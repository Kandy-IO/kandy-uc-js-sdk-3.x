{"version":3,"sources":["webpack://Kandy/webpack/universalModuleDefinition","webpack://Kandy/webpack/bootstrap","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/io-6de156f3.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/is/dist/redux-saga-is.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/helpers/extends.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/redux-saga-effects.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/symbols/dist/redux-saga-symbols.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_core.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/json/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isFunction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isSymbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isEmpty.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/toString.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isString.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/combineActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/identity.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isNull.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isPlainObject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isArray.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isNil.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/getLastElement.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/camelCase.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/arrayToObject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/ownKeys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/get.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenWhenNode.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenActionMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/unflattenActionCreators.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createCurriedAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isUndefined.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/handleAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/reduce-reducers/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/hasGeneratorInterface.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenReducerMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/handleActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_export.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_global.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/errors/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_descriptors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/invariant/browser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/effects.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-dp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_ctx.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_hide.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_an-object.js","webpack://Kandy/(webpack)/buildin/global.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_fails.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_has.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-iobject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/actions/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/validation/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/errors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_a-function.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_property-desc.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_cof.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_library.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-pie.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iterators.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_for-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-length.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_uid.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.string.iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_meta.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/model/webRtcAdaptorModel.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/node_modules/redux/es/redux.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/deferred/dist/redux-saga-deferred.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/redux-saga-core.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-saga/dist/redux-saga-core-npm-proxy.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/delay-p/dist/redux-saga-delay-p.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_dom-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-primitive.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iobject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_defined.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-integer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_shared-key.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_shared.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gops.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack://Kandy/(webpack)/buildin/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/web.dom.iterable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_classof.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_an-instance.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_new-promise-capability.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_redefine-all.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-sap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/version.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks-ext.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/validation.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/rng.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/regex.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/validate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/v1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/parse.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/v35.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/md5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/v3.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/v4.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/sha1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/v5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/nil.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/version.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/uuid/dist/esm-browser/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/symbol-observable/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-camel-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-keys-internal.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/compose/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/function.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_redefine.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-dps.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_html.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gpo.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-step.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-array-iter.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_species-constructor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_task.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_perform.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_promise-resolve.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-species.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-detect.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/symbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopn.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logFormatter.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/config.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_validate-collection.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/name.js","webpack://Kandy/(webpack)/buildin/amd-options.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_Symbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/lib/base64.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/grammar.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/calls.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/subscription/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/requests.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/link/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/actions/users.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/actions/contacts.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/events/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux/es/redux.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/symbol-observable/es/ponyfill.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/just-curry-it/index.js","webpack://Kandy/./index.js","webpack://Kandy/../core/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/factory.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-includes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-absolute-index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-devtools-extension/index.js","webpack://Kandy/(webpack)/buildin/harmony-module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/lodash.min.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/_baseConvert.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/_mapping.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/placeholder.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/stamp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/composable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/core/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/core/merge.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/plain-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_string-at.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.array.iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_invoke.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_microtask.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_user-agent.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.promise.finally.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.promise.try.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/query-string/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/strict-uri-encode/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/decode-uri-component/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/split-on-first/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/filter-obj/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.object.values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-to-array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/symbol/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.symbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_enum-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopd.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/timer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logHandler.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/actionHandler.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/json/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/v8n/dist/v8n.esm.js","webpack://Kandy/../core/basePlugins.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/plugin.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-space-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-no-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection-strong.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-methods.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-species-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-species-constructor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.to-json.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection-to-json.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-from-iterable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-collection-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-collection-from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/transformers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-logger/dist/redux-logger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/array/from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/array/from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.array.from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_create-property.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/symbol/iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/docs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/eventEmitter.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/uc/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/name.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/jwt-decode/build/jwt-decode.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/uc/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/tokens/uc.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/base-64/base64.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/utf8/utf8.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/errors/codes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/subscription/requests.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/subscription/services.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/effects.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/subscription/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/oldLink/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/oldLink/callShim.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/next.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/bottlejs/dist/bottle.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/loadModule.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/logmanager/logManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/config.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/cache.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdpparser/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/challenge.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/once.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/before.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/toInteger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/toFinite.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/toNumber.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_baseTrim.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_trimmedEndIndex.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/isObject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/isSymbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_baseGetTag.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_root.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_freeGlobal.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_getRawTag.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/_objectToString.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/isObjectLike.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/promiscuous/promiscuous.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/timers-browserify/main.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/setimmediate/setImmediate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/process/browser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/core.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/locale.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/http/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/http/http.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/http/xhr.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/globalbroadcaster/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/globalbroadcaster/globalBroadcaster.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/turncredentials/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/turncredentials/turnCredentialsManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/pipeline.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/parser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/parser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/writer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/logger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/bundleHandler.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/rcc/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/rcc/rccFsm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/rcc/rccManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/rcc/wamrcc.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/wam/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/wam/callFsm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/wam/callManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/wam/wamcall.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/call/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcChromeAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcContainerAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcFirefoxAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcFirefoxEsrAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcPluginAdaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcPluginv22Adaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/adaptor/webRtcPluginv31Adaptor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/decorator/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/decorator/webRtcLibraryDecorator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/decorator/webRtcLibraryChromeDecorator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/decorator/webRtcLibraryFirefoxDecorator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/model/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/utils/map.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/model/webRtcChromeAdaptorModel.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/model/webRtcFirefoxAdaptorModel.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/model/webRtcPluginAdaptorModel.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/webRtcManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/webrtc/webRtcAdaptorFactory.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/oldLink/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/localVideo.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/actions/audioBridge.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/utils/mediaDevices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/utils/normalization.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/calls.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/localVideo.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/reducers/audioBridges.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/sagas/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/sagas/server.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/sagas/client.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callHistory/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/clickToCall/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/base.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/websocket.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/uc/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/uc/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/actions/messages.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/actions/conversations.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/messaging/interface/mixins.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/mwi/link/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/sagas/pushRegistration.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/sagas/notification.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/pako/dist/pako.esm.mjs","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/link/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/link/requests.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/presence/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/reducer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/sipEvents/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/link.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/api/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/api/users.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/api/contacts.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/reducers/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/reducers/contacts.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/reducers/users.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/events/contacts.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/users/interface/events/users.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/configs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/makeRequest.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/authorization.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/name.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/docs/docs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/fcs/src/js/sdp/codecRemover.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@kandy-io/sdp-handlers/src/codecRemover.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@kandy-io/sdp-handlers/src/index.js"],"names":["API_LOG_TAG","manager","defaultOptions","logManager","getAuthConfig","getSubscriptionInfo","getConnectionInfo","getDomain","getIdentity","getUserInfo","getAuthScenario","getServices","getPlatform","getRequestInfo","state","config","authentication","platform","subscription","undefined","connection","username","identity","domain","split","userInfo","isSSO","servicesInfo","requested","received","missing","status","SUBSCRIPTION_STATE","NONE","services","clientCorrelator","server","protocol","base","port","version","requestInfo","platforms","CPAAS","baseURL","token","accessToken","options","headers","Accept","Authorization","UC","LINK","setPlatform","connInfo","requestOptions","notificationTypes","WEBSOCKET","PUSH","connCheckResponsibility","CLIENT","SERVER","connCheckMethods","KEEP_ALIVE","PING_PONG","mapEvents","on","off","subscribe","unsubscribe","emitEvent","aliasEvent","actionTypes","mapping","type","MAP_EVENTS","payload","listener","EVENTS_ON","eventType","EVENTS_OFF","EVENTS_SUBSCRIBE","EVENTS_UNSUBSCRIBE","args","Error","EVENTS_EMIT","alias","EVENTS_ALIAS","authCodes","callCodes","callHistoryCodes","groupsCodes","messagingCodes","mwiCodes","sipEventCodes","clickToCallCodes","bridgeCodes","subscriptionCodes","presenceCodes","usersCodes","webrtcCodes","BasicError","constructor","message","code","name","getProperty","compose","getTimestamp","parseAddress","getInteger","Queue","serialize","extend","always","Utils","makeSafeForCSS","obj","property","extendme","prop","bind","Date","getTime","address","contact","displayName","indexOf","replace","firstName","lastName","val","isNaN","parseInt","items","enqueue","item","push","dequeue","shift","peek","size","length","object","encodedString","hasOwnProperty","encodeURI","target","promise","handler","then","param","resolve","error","LogManager","_logManager","logger","callFunctionIfExist","getLogger","Array","prototype","slice","call","arguments","func","apply","e","stack","s","c","charCodeAt","toLowerCase","toString","NOT_FOUND","SEND_RECEIVE","SEND_ONLY","RECEIVE_ONLY","INACTIVE","STABLE","HAVE_LOCAL_OFFER","HAVE_REMOTE_OFFER","HAVE_LOCAL_PRANSWER","HAVE_REMOTE_PRANSWER","CLOSED","SDP","TYPE","OPERATION","STEP","BUNDLE_POLICY","MAX_COMPAT","MAX_BUNDLE","BALANCED","DISABLED","PREFIX","MAKE_CALL","MAKE_CALL_FINISH","CALL_INCOMING","ANSWER_CALL","ANSWER_CALL_FINISH","IGNORE_CALL","IGNORE_CALL_FINISH","REJECT_CALL","REJECT_CALL_FINISH","END_CALL","END_CALL_FINISH","CALL_STATE_CHANGE","CALL_MEDIA_STATE_CHANGE","START_LOCAL_VIDEO","START_LOCAL_VIDEO_FINISH","STOP_LOCAL_VIDEO","STOP_LOCAL_VIDEO_FINISH","MUTE_CALL","MUTE_CALL_FINISH","UNMUTE_CALL","UNMUTE_CALL_FINISH","SILENCE_CALL","SILENCE_CALL_FINISH","UNSILENCE_CALL","UNSILENCE_CALL_FINISH","SET_CUSTOM_PARAMETERS","START_VIDEO","START_VIDEO_FINISH","STOP_VIDEO","STOP_VIDEO_FINISH","HOLD_CALL","HOLD_CALL_FINISH","UNHOLD_CALL","UNHOLD_CALL_FINISH","START_SCREENSHARE","START_SCREENSHARE_FINISH","STOP_SCREENSHARE","STOP_SCREENSHARE_FINISH","FORWARD_CALL","FORWARD_CALL_FINISH","DIRECT_TRANSFER","DIRECT_TRANSFER_FINISH","CONSULTATIVE_TRANSFER","CONSULTATIVE_TRANSFER_FINISH","JOIN_CALL","JOIN_CALL_FINISH","SEND_CUSTOM_PARAMETERS","SEND_CUSTOM_PARAMETERS_FINISH","SEND_DTMF","SEND_DTMF_FINISH","CHECK_DEVICES","CHECK_DEVICES_FINISH","SET_DEFAULT_DEVICES","SET_DEFAULT_DEVICES_FINISH","PROMPT_USER_MEDIA","PROMPT_USER_MEDIA_FINISH","CHANGE_SPEAKER","CHANGE_SPEAKER_FINISH","CHANGE_INPUT_DEVICES","CHANGE_INPUT_DEVICES_FINISH","INIT_MEDIA","INIT_MEDIA_FINISH","MAKE_CALL_ANONYMOUS","CREATE_AUDIO_BRIDGE","CREATE_AUDIO_BRIDGE_FINISH","CLOSE_AUDIO_BRIDGE","CLOSE_AUDIO_BRIDGE_FINISH","BRIDGE_ADD_CALL","BRIDGE_ADD_CALL_FINISH","BRIDGE_REMOVE_CALL","BRIDGE_REMOVE_CALL_FINISH","MUTE_AUDIO_BRIDGE","MUTE_AUDIO_BRIDGE_FINISH","UNMUTE_AUDIO_BRIDGE","UNMUTE_AUDIO_BRIDGE_FINISH","SILENCE_AUDIO_BRIDGE","SILENCE_AUDIO_BRIDGE_FINISH","UNSILENCE_AUDIO_BRIDGE","UNSILENCE_AUDIO_BRIDGE_FINISH","UPDATE_AUDIO_BRIDGE_CALLS","mergeValues","toQueryString","autoRestart","forwardAction","normalizeServices","defer","objects","leftValue","rightValue","params","stringifiedParams","paramParser","stringify","saga","autoRestarting","shouldRestart","console","log","action","map","service","d","reject","request","requestSaga","actions","commonOptions","manualOptions","getCommonOptions","url","requestAction","responseAction","RESPONSE","meta","requestId","prefix","PROCESS_NOTIFICATION","PROCESS_NOTIFICATION_FINISH","NOTIFICATION_RECEIVED","ENABLE_NOTIFICATION_CHANNEL","ENABLE_NOTIFICATION_CHANNEL_FINISH","REGISTER_APPLE_PUSH_NOTIFICATION","REGISTER_ANDROID_PUSH_NOTIFICATION","UNREGISTER_APPLE_PUSH_NOTIFICATION","UNREGISTER_ANDROID_PUSH_NOTIFICATION","update","setSdpHandlers","values","pluginName","CONFIG_UPDATE","sdpHandlers","removeH264Codecs","sanitizeSdesFromSdp","modifySdpBandwidth","SET_SDP_HANDLERS","WS_ATTEMPT_CONNECT","WS_CONNECT_FINISHED","WS_DISCONNECT","WS_DISCONNECT_FINISHED","WS_RECONNECT_FAILED","WS_CLOSED","WS_ERROR","LOST_CONNECTION","RECEIVE_SERVER_PING","RECEIVE_SERVER_PONG","CHANGE_CONNECTIVITY_CHECKING","CHANGE_PING_INTERVAL","CallImpl","mediaErrors","NOT_ALLOWED","OPTIONS","WRONG_VERSION","NOT_INITIALIZED","NEW_VERSION_WARNING","INVALID_PARAMETER","NO_SCREENSHARING_WARNING","CallManager","_callManager","RccManager","_rccManager","localVideoState","remoteVideoState","onReceived","onCallReplaceReceived","onOutgoingCall","setOnMonitorSessionLost","callback","initMedia","onSuccess","onFailure","startCall","from","to","isVideoEnabled","sendInitialVideo","videoResolution","serviceName","start","startMonitorDevice","deviceID","stopMonitorDevice","getRCCDeviceList","getDeviceList","set_logSeverityLevel","level","enable_logCallback","disable_logCallback","get_audioInDeviceCount","get_audioOutDeviceCount","get_videoDeviceCount","hasVideoDevice","hasAudioDevice","getUserMedia","privateStream","showSettingsWindow","getLocalVideoResolutions","getRemoteVideoResolutions","isPluginEnabled","hasGotCalls","getIncomingCallById","id","callid","createStreamRenderer","stream","container","disposeStreamRenderer","createLocalAudioBridge","States","IN_CALL","ON_HOLD","RINGING","ENDED","REJECTED","OUTGOING","INCOMING","ANSWERING","JOINED","RENEGOTIATION","TRANSFERRED","ON_REMOTE_HOLD","CALL_IN_PROGRESS","EARLY_MEDIA","TRANSFER_FAILURE","REPLACING","MediaStates","NEW","CHECKING","CONNECTED","COMPLETED","FAILED","DISCONNECTED","HoldStates","LOCAL_HOLD","REMOTE_HOLD","BOTH_HOLD","LOCAL_STATUS_CODES","STATUS_CODE_NOT_PROVIDED","ENDED_BY_LOCAL","REJECTED_BY_LOCAL","IGNORED_BY_LOCAL","RESPONDED_FROM_ANOTHER_DEVICE","SESSION_COMPLETED","LOCAL_REASON_TEXTS","MediaErrors","clickToCall","callingParty","calledParty","getIMRN","realm","source","destination","getStreamById","streamId","removeStreamById","setSelectedMicrophoneId","microphoneId","setSelectedCameraId","cameraId","setSelectedSpeakerId","speakerId","getCameraList","getMicrophoneList","getSpeakerList","changeDevices","changeSpeaker","setOnMonitorSessionRefreshed","setOnMonitorSessionTerminated","IncomingCall","OutgoingCall","LocalAudioBridge","ADD_CONTACT","ADD_CONTACT_FINISH","REFRESH_CONTACTS","REFRESH_CONTACTS_FINISH","REMOVE_CONTACT","REMOVE_CONTACT_FINISH","UPDATE_CONTACT","UPDATE_CONTACT_FINISH","FETCH_CONTACT","FETCH_CONTACT_FINISH","FETCH_USER","FETCH_USER_FINISH","FETCH_SELF_INFO","FETCH_SELF_INFO_FINISH","SEARCH_DIRECTORY","SEARCH_DIRECTORY_FINISH","v8n","function","value","validation","enums","v8nExact","exact","exactValues","passesAnyOf","errorMessages","v8nRule","input","validationErrorMessages","validationResults","testAll","parse","errors","info","prettyPrint","validationError","startingPath","validationErrorMessageHelper","acc","cause","rule","path","newVEM","ruleMessage","enumName","join","aOrAn","arg","chain","__","string","test","NETWORK","AUTH","STATE","PRIV","UNKNOWN","LOGIN_LIMIT_CLIENT","INCORRECT_LOGIN_PASS","INVALID_LOGIN","FORCE_LOGOUT_ERROR","LOGIN_LIMIT_TABLET","TOKEN_NOT_FOUND","SESSION_EXPIRED","VIDEO_SESSION_NOT_AVAILABLE","PENDING_REQUEST","NOT_ALLOWED_SERVICE","NOT_ALLOWED_METHOD","NOT_ALLOWED_INSTANCE","CONNECTION_ISSUE","MEDIA_NOT_FOUND","MEDIA_NOT_ALLOWED","CALL_FAILED","CALL_ENDED","MAXIMUM_ENTRIES","ENTRY_ALREADY_EXISTS","SERVICE_NOT_AUTHORIZED","DB_EXCEPTION","INSUFFICIENT_INFO","INTERNAL_SERVER_ERROR","SERVICE_UNAVAILABLE","SESSION_NOT_FOUND","CANNOT_SUBSCRIBE","MEDIA_REQUIRED","mapValuesToKeys","FCS_CALL_STATES","CALL_STATES_FCS","CALL_STATES","INITIATING","INITIATED","CANCELLED","CALL_MEDIA_STATES","DUAL_HOLD","CALL_MEDIA_CONNECTION_STATES","OPERATIONS","CHANGE_MEDIA","HOLD_MEDIA","UNHOLD_MEDIA","MUSIC_ON_HOLD","COMPLEX_OPERATIONS","JOIN","COMPLEX_OPERATION_MESSAGES","DIRECT_TRANSFER_SUCCESS","CONSULTATIVE_TRANSFER_SUCCESS","JOIN_SUCCESS","DIRECT_TRANSFER_FAILURE","CONSULTATIVE_TRANSFER_FAILURE","JOIN_FAILURE","STATUS_CODES","CALL_DIRECTION","WEBRTC_DEVICE_KINDS","audioinput","videoinput","audiooutput","FCS_ICE_MEDIA_STATES","ICE_MEDIA_STATES","logLevels","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","levelValues","logMethods","trace","debug","warn","group","groupEnd","groupCollapsed","timeLevel","CONNECT","SET_CONNECTION_INFO","CONNECTION_OCCURRED","CONNECT_FINISHED","GET_USER_DETAILS","USER_DETAILS_RECEIVED","DISCONNECT","DISCONNECT_FINISHED","RESUBSCRIPTION_FINISHED","REFRESH_TOKENS","REFRESH_TOKENS_FINISHED","UPDATE_SUBSCRIPTION","UPDATE_SUBSCRIPTION_FINISH","SET_TOKEN","SET_CREDENTIALS","SET_CREDENTIALS_FINISH","AUTHORIZATION_ERROR","UPDATE_HMAC_TOKEN","CREATE_CONVERSATION","SEND_MESSAGE","SEND_MESSAGE_FINISH","MESSAGE_RECEIVED","INCOMING_MESSAGE_READ","SEND_MESSAGE_READ","SEND_MESSAGE_READ_FINISH","CLEAR_MESSAGES","CLEAR_MESSAGES_FINISH","DELETE_CONVERSATION","DELETE_CONVERSATION_FINISH","DELETE_MESSAGE","DELETE_MESSAGE_FINISH","FETCH_CONVERSATIONS","FETCH_CONVERSATIONS_FINISHED","UPDATE_CONVERSATION","FETCH_MESSAGES","FETCH_MESSAGES_FINISHED","FILE_UPLOAD_FAIL","FULL","PARTIAL","DISCONNECT_REASONS","GONE","REQUEST","getCpaasAgentHeaderValue","sanitizeRequest","fetchResource","useCustomHeader","injectAgentVersionHeader","customSuffix","customAgentVersionHeaderSuffix","headerValue","includes","logOptions","authHeader","substring","body","JSON","resource","module","charAt","queryParams","queryString","response","fetch","createWsAction","isReconnect","wsAttemptConnect","wsDisconnect","wsConnectFinished","wsDisconnectFinished","wsReconnectFailed","wsClosed","wsError","lostConnection","receiveServerPing","receiveServerPong","changeConnectivityChecking","changePingInterval","getConnectionState","getConnectivityConfig","getPingInterval","getCheckConnectivity","pingInterval","checkConnectivity","WebRtcAdaptorModel","self","dtlsEnabled","dscpEnabled","iceServerUrl","containers","video","localVideo","remoteVideo","defaultVideo","mediaSources","available","audio","screen","width","height","rate","stats","initialized","rtcLibrary","language","logLevel","peerCount","pluginEnabled","h264Enabled","screenStream","localStreamMap","Map","privateStreamMap","localMedia","selectedMicrophoneId","selectedSpeakerId","selectedCameraId","mediaSourceList","getLocalMedia","setLocalMedia","media","getLocalStreamMap","getScreenStream","setScreenStream","isH264Enabled","setH264Enabled","enabled","getIceServerUrl","setIceServerUrl","isDtlsEnabled","setDtlsEnabled","isDscpEnabled","setDscpEnabled","getVideoContainer","setVideoContainer","getLocalVideoContainer","setLocalVideoContainer","getRemoteVideoContainer","setRemoteVideoContainer","getDefaultVideoContainer","setDefaultVideoContainer","isInitialized","setInitialized","getRtcLibrary","setRtcLibrary","library","getLogLevel","setLogLevel","getLanguage","setLanguage","lang","getVideoWidth","setVideoWidth","_videoWidth","getVideoHeight","setVideoHeight","_videoHeight","getVideoSourceAvailable","setVideoSourceAvailable","_videoSourceAvailable","getAudioSourceAvailable","setAudioSourceAvailable","_audioSourceAvailable","setMediaSources","mediaSourceInfo","videoSourceAvailable","audioSourceAvailable","setScreenSourceAvailable","screenSourceAvailable","setMediaSourceList","sourceList","getScreenSourceAvailable","getScreenWidth","setScreenWidth","_screenWidth","getScreenHeight","setScreenHeight","_screenHeight","getScreenFrameRate","setScreenFrameRate","_screenRate","getPeerCount","setPeerCount","_peerCount","setPluginEnabled","_isPluginEnabled","_selectedMicrophoneId","getSelectedMicrophoneId","_selectedSpeakerId","getSelectedSpeakerId","_selectedCameraId","getSelectedCameraId","get","removeStreamFromMap","remove","getPrivateStreamMap","_mediaSourceList","getMediaSourceList","getStats","setStats","_stats","getUserMediaContraints","FETCH_CALL_HISTORY","FETCH_CALL_HISTORY_FINISH","DELETE_CALL_HISTORY","DELETE_CALL_HISTORY_FINISH","ADD_CALL_HISTORY_ENTRY","SET_CACHE","CLICK_TO_CALL","CLICK_TO_CALL_FINISH","MWI_UPDATE","FETCH_MWI","UPDATE","UPDATE_FINISH","GET","GET_FINISH","SUBSCRIBE","SUBSCRIBE_FINISH","UNSUBSCRIBE","UNSUBSCRIBE_FINISH","RECEIVED","CREATE_PRESENCE_LIST","CREATE_PRESENCE_LIST_FINISH","DELETE_PRESENCE_LIST","GET_PRESENCE_LIST","SIP_EVENT_SUBSCRIBE","SIP_EVENT_SUBSCRIBE_FINISH","SIP_EVENT_UPDATE","SIP_EVENT_UPDATE_FINISH","SIP_EVENT_UNSUBSCRIBE","SIP_EVENT_UNSUBSCRIBE_FINISH","SIP_EVENT_RECEIVED","getVersion","checkLevel","checkHandler","upperLevel","toUpperCase","setLevel","levelsChanged","setHandler","handlersChanged","SET_LEVEL","levelMap","LEVELS_CHANGE","SET_HANDLER","handlerMap","HANDLERS_CHANGE","localVideoActionsImport","mediaActionsImport","devicesActionsImport","callsActionsImport","audioBridgeActionsImport","localVideoActions","mediaActions","devicesActions","callsActions","audioBridgeActions","getCallConfig","getCalls","getCallById","getCustomParametersById","getDevices","getMediaInfo","getAudioBridges","getBridgeCalls","calls","callId","customParameters","devices","audioBridges","bridgeId","bridge","retrieveCallLogs","retrieveCallLogsFinish","removeCallLogs","removeCallLogsFinish","addCallLogEntry","setCache","amount","offset","logs","recordId","logEntry","data","websocketNotification","externalNotification","notificationReceived","processNotificationFinish","enableNotificationChannel","registerApplePushNotification","registerAndroidPushNotification","unregisterApplePushNotification","unregisterAndroidPushNotification","enableNotificationChannelFinish","notificationHelper","channel","notification","deferred","pushProvider","registration","channelEnabled","messageActionsImport","convoActionsImport","messageActions","convoActions","getMessagingConfig","getConversations","getMessages","findConversation","findMember","messaging","conversations","conversationId","messages","find","conversation","conv","members","member","createManager","levelImport","logFormatter","defaultLogFormatter","entry","timestamp","shortId","shortName","logInfo","enableFcsLogs","logActions","partialDefaultLogActions","defaultActionHandler","actionOnly","collapsed","diff","exposePayloads","getConfiguration","connect","setConnectionInfo","connectionOccurred","connectFinished","getUserDetails","userDetailsReceived","disconnect","disconnectFinished","resubscribeFinished","refreshTokens","refreshTokensFinished","updateSubscription","updateSubscriptionFinished","setTokens","setCredentials","setCredentialsFinished","updateHmacToken","credentials","isSensitive","userDetailsResponse","user_first_name","user_last_name","photoURL","emailAddress","user_email","reason","retryAfter","attemptNum","idToken","password","authname","hmacToken","bearerAccessToken","authorizationError","nextRequestId","generateRequestId","result","base64_encode","base64_decode","b64","o1","o2","o3","h1","h2","h3","h4","bits","i","ac","enc","tmp_arr","utf8_encode","dec","String","fromCharCode","utf8_decode","argString","utftext","end","stringl","n","c1","str_data","c2","c3","callActionHelper","makeCall","makeCallFinish","callIncoming","answerCall","answerCallFinish","ignoreCall","ignoreCallFinish","rejectCall","rejectCallFinish","endCall","endCallFinish","callStateChange","callMediaStateChange","muteCall","muteCallFinish","unMuteCall","unMuteCallFinish","silenceCall","silenceCallFinish","unSilenceCall","unSilenceCallFinish","setCustomParameters","startVideo","startVideoFinish","stopVideo","stopVideoFinish","holdCall","holdCallFinish","unHoldCall","unHoldCallFinish","startScreenshare","startScreenshareFinish","stopScreenshare","stopScreenshareFinish","sendDTMF","sendDTMFFinish","sendCustomParameters","sendCustomParametersFinish","forwardCall","forwardCallFinish","directTransfer","directTransferFinish","consultativeTransfer","consultativeTransferFinish","joinCall","joinCallFinish","makeAnonymousCall","callInfo","callee","transition","mediaState","screenshareOptions","tone","joinedCalls","callPrefix","PENDING_MAKE_CALL","SESSION_CREATED","MAKE_ANONYMOUS_CALL","MAKE_ANONYMOUS_CALL_FINISH","SEND_RINGING_FEEDBACK","SEND_RINGING_FEEDBACK_FINISH","CALL_RINGING","SESSION_PROGRESS","CALL_CANCELLED","CALL_ACCEPTED","PENDING_OPERATION","UPDATE_CALL","CALL_HOLD","CALL_HOLD_FINISH","CALL_UNHOLD","CALL_UNHOLD_FINISH","ADD_MEDIA","ADD_MEDIA_FINISH","ADD_BASIC_MEDIA","REMOVE_MEDIA","REMOVE_MEDIA_FINISH","REMOVE_BASIC_MEDIA","RENEGOTIATE","RENEGOTIATE_FINISH","GET_STATS","GET_STATS_FINISH","PENDING_CONSULTATIVE_TRANSFER","PENDING_JOIN","JOIN_FINISH","REPLACE_TRACK","REPLACE_TRACK_FINISH","MEDIA_RESTART","MEDIA_RESTART_FINISH","CUSTOM_PARAMETERS_RECEIVED","GET_AVAILABLE_CODECS","AVAILABLE_CODECS_RETRIEVED","CALL_REMOTE_HOLD_FINISH","CALL_REMOTE_UNHOLD_FINISH","REMOTE_ADD_MEDIA_FINISH","REMOTE_REMOVE_MEDIA_FINISH","REMOTE_START_MOH_FINISH","REMOTE_STOP_MOH_FINISH","REMOTE_SLOW_START","turnPrefix","TURN_CHANGED","trackPrefix","TRACK_ADDED","TRACK_REMOVED","getActiveCalls","getCallByWrtcsSessionId","getCallByWebrtcSessionId","getOptions","getTurnInfo","addTracksToCall","callState","session","webrtcSessionId","localTracks","remoteTracks","endedStates","filter","wrtcsSessionId","turn","clickToCallFinish","caller","requestTime","getSubscriptionConfig","getRegisteredServices","getNotificationChannels","getSubscribedServices","getSubscriptions","getSubscriptionExpiry","getWebsocketConfig","registeredServices","notificationChannels","subscriptions","isArray","channelType","reduce","currentSub","concat","subConfig","authConfig","expires","websocket","CONVERSATIONS_NEW","CONVERSATIONS_CHANGE","MESSAGES_CHANGE","MESSAGES_ERROR","mwiUpdate","fetchMwi","mwiData","getNotificationsInfo","getNotificationConfig","notifications","pushNotificationsRegistration","pushNotificationsDeRegistration","fetchSDP","bundleId","deviceToken","voipDeviceToken","standardDeviceToken","isProduction","method","bundleID","registrationResponse","responseName","statusCode","text","statuscode","responseType","partialUrl","updatePresence","updatePresenceFinish","getPresence","getPresenceFinish","subscribePresence","subscribePresenceFinish","unsubscribePresence","unsubscribePresenceFinish","createPresenceList","deletePresenceList","getPresenceList","createListFinish","presenceReceived","activity","note","users","presentityUserId","presenceListId","presence","getAllPresence","getSelfPresence","user","userId","STATUS","OPEN","ACTIVITY","ACTIVE","IDLE","AWAY","LUNCH","OTHER","BUSY","VACATION","ON_THE_PHONE","getSipEventInfo","sipEvents","sipEventSubscribe","sipEventSubscribeFinish","sipEventUpdate","sipEventUpdateFinish","sipEventUnsubscribe","sipEventUnsubscribeFinish","sipEventReceived","finishActionHelper","actionType","subscribeUserList","userLists","isResub","unsubscribeUserList","sipEvent","event","fetchSelfInfo","fetchSelfInfoFinish","fetchUser","fetchUserFinish","searchDirectory","searchDirectoryFinish","Boolean","filters","refreshContacts","refreshContactsFinish","addContact","addContactFinish","fetchContact","fetchContactFinish","removeContact","removeContactFinish","updateContact","updateContactFinish","contacts","contactId","getContacts","getContact","getUsers","getUser","allUsers","CONTACTS_NEW","CONTACTS_ERROR","CONTACTS_CHANGE","DIRECTORY_CHANGE","DIRECTORY_ERROR","USERS_CHANGE","USERS_ERROR","defaultPlugins","basePlugins","fn","auth","callHistory","connectivity","mwi","root","plugins","create","createCodecRemover","exports","commonIndex","_","noConflict","factory","factoryDefaults","enableReduxDevTools","reduxDevToolsName","allowProxy","v8nValidation","schema","boolean","parseOptions","pluginFactories","sdkOptions","common","pluginOptions","sagas","store","middlewares","apis","reducers","initSagas","taskDescriptor","shared","context","capabilities","api","primitives","getState","destroyedSDK","dispatch","loggerMiddleware","destroyedSDKMiddleware","next","plugin","forEach","reducer","middleware","init","mixins","baseStamp","propertyDescriptors","objName","key","rootSaga","composeMiddleware","composeWithoutDevTools","sagaMiddleware","run","apiFactory","publicAPI","getCapabilities","destroy","_destroy","cancel","destroyStateReducer","replaceReducer","immediately","setTimeout","defaultType","loggers","settings","defaultLogHandler","loggerName","getLevel","getHandler","getLoggers","createLogger","logFunc","injectables","shouldLog","now","timeLog","timer","timeWarn","createTimer","timers","time","timeEnd","elapsed","formattedString","tail","styleLog","logType","style","events","logPlugin","Object","webRTC","webRTCLogManager","managers","components","setLevelEntry","setHandlerEntry","levels","getTypes","clonedState","setLogHandler","getLevelMap","getHandlerMap","err","types","handlers","createActionLogger","actionOptions","prevState","nextState","excludeActions","predicate","titleFormatter","colors","transformers","setupTransformers","actionPipeline","transformer","actionTransformers","removePayloads","passwordHider","actionTransformer","isSafe","took","parts","toFixed","t","super_","enumerable","writable","configurable","r","defineProperty","o","a","f","u","N","Math","l","p","g","prefilter","normalize","h","y","v","b","lhs","m","rhs","w","x","S","kind","index","F","color","P","duration","started","startedTime","k","j","D","E","title","A","O","C","L","T","M","stateTransformer","errorTransformer","logErrors","diffPredicate","getHours","getMinutes","getSeconds","getMilliseconds","performance","global","window","DeepDiff","observableDiff","applyDiff","applyChange","revertChange","isConflict","defaults","default","changeDtlsRoleTo","generateEndParams","newSdp","originalSdp","mLine","crypto","fingerprint","role","changeDtlsRole","original","setup","generateBandwidthConfigs","limit","bandwidth","currentCallState","isLocal","endParams","remoteParticipant","displayNumber","remoteNumber","remoteName","reasonText","configImplementation","pluginInterface","configApi","getConfig","updateConfig","newConfigValues","eventsImplementation","emitter","eventMap","emit","mapper","eventReducer","aliases","count","eventEmitter","subscribeMap","strictMode","checkEvent","define","list","splice","setStrictMode","strict","authCpaas","localization","useTurn","notificationType","earlyRefreshMargin","positive","array","every","eventsMap","connectFlow","updateTokenSaga","extendSubscription","onConnectionLostEntry","onSubscriptionGone","eventTypes","authChangedEvent","AUTH_ERROR","AUTH_CHANGE","discEvent","forced","resubEvent","AUTH_RESUB","isFailure","AUTH_CREDENTIALS_SET","isPending","isConnected","throw","refreshToken","idTokenPayload","preferred_username","_removed","removeXtoken","updateToken","updateConnection","getConnection","subscriptionStates","disconnectReasons","jwt","onConnectionLost","connectivityActionTypes","task","finishOrError","disconnectAction","tokenInfo","createToken","tokenExpires","oauthToken","INVALID_CREDENTIALS","connectionInfo","extras","gatewaySubscribe","subscriptionParams","access_token","websocketInfo","notificationChannel","wsOpenOrError","CONNECT_FAIL_WS_ERROR","refreshTokenSaga","takeGoneNotification","notificationMessage","takeResubGoneSubscription","wsState","connected","content","resubTriggers","resubDelay","pow","expiry","resubscribe","refresh_token","success","requestExtras","tokenChannel","refresh","base64","encode","utf8","human","UC_CREATE_TOKEN_FAIL","LINK_UNSUBSCRIBE_FAIL","LINK_SUBSCRIBE_FAIL","LINK_EXTEND_SUBSCRIPTION_FAIL","LINK_UPDATE_SUBSCRIPTION_FAIL","UC_SUBSCRIBE_FAIL","UC_REFRESH_TOKEN_FAIL","UC_EXTEND_SUBSCRIPTION_FAIL","UC_DISCONNECT_FAIL","MISSING_SERVICE","UNKNOWN_ERROR","GENERIC_ERROR","INIT_MEDIA_FAILED","USER_MEDIA_ERROR","NOT_SUPPORTED","INVALID_STATE","INVALID_PARAM","STATE_DESYNC","INVALID_OFFER","NO_ICE_CANDIDATES","BAD_REQUEST","NOT_AUTHENTICATED","FORBIDDEN","MISSING_ARGS","RESPONSE_ERROR","MISSING_PARAMETERS","CREATE_GROUP_FAIL","MARK_READ_FAIL","REMOVE_MEMBERS_FAIL","ADD_MEMBERS_FAIL","SEND_MESSAGE_FAIL","FETCH_MESSAGES_FAIL","FETCH_CONVERSATIONS_FAIL","INVALID_DESTINATION","INVALID_FILE_PARTS","SET_IS_TYPING_FAIL","FETCH_MWI_FAIL","NOT_PROVISIONED","NOT_SUBSCRIBED","INVALID_INPUT","ALREADY_EXISTS","WS_CONNECTION_ERROR","CPAAS_WSREQUEST_FAIL","CPAAS_WSREVOKE_FAIL","CPAAS_WSREFRESH_FAIL","CPAAS_SERVICE_SUB_FAIL","CPAAS_SERVICE_UNSUB_FAIL","CPAAS_UNSUBSCRIBE_FAIL","INVALID_STATUS","INVALID_ACTIVITY","REFRESH_CONTACTS_FAIL","DIRECTORY_REQUEST_FAIL","requests","subscribeType","isAnonymous","subscribeRequest","supported","forceLogOut","authorizationResponse","subscribeResponse","subscribedServices","parseSpidrServices","subscriptionURL","errorCode","resubResponse","upperReceived","reqService","connectWebsocket","disconnectWebsocket","waitForReconnect","timeout","reconnected","disconnected","UNSUBSCRIBE_FINISHED","SUBSCRIBE_FINISHED","REGISTER_SUB_SERVICE","PLUGIN_SUBSCRIPTION","PLUGIN_SUBSCRIPTION_FINISHED","PLUGIN_UNSUBSCRIPTION","PLUGIN_UNSUBSCRIPTION_FINISHED","CHANNEL_OPENED","CHANNEL_CLOSED","callsLink","authActionTypes","notiActionTypes","connActionTypes","logMgr","fcsLog","callDefaults","isAudioEnabled","remoteVideoContainer","localVideoContainer","webrtcdtls","chromeExtensionId","serverProvidedTurnCredentials","iceserver","recordCallStats","checkMediaDevices","watchCheckMediaDevices","onDeviceChange","shimContext","getUsername","callShim","fcsLogger","logObject","msg","onIncomingCall","onCallStateChange","prevCallState","newState","startTime","endTime","onMediaStateChange","onBridgeCallsChanged","updateAudioBridgeCalls","setDefaultDevices","setDevices","setDefaultDevicesFinish","catch","promptUserMedia","promptUserMediaFinish","basicError","changeSpeakerFinish","changeInputDevices","changeInputDevicesFinish","logHandler","initLogging","setUserAuth","restUrl","restPort","websocketProtocol","websocketIP","websocketPort","callResyncOnConnect","resyncOnConnect","ajaxHook","xhr","unusedWindow","cpaasAgentHeaderValue","customHeaders","tokenString","hasCallService","setTokenAuth","setKandyUAT","fcsConfig","turnCredentials","iceInfo","credential","screenSharing","setupVars","anonymous","setRealm","toLog","onScreenshareStop","joinedCallId","joinedCallTo","participants","isJoinedCall","muted","videoContainer","startLocalVideo","startLocalVideoFinish","stopLocalVideo","stopLocalVideoFinish","mediaResults","initMediaFinish","createAudioBridgeFinish","closeAudioBridge","closeAudioBridgeFinish","addCallToBridge","addCallToBridgeFinish","removeCallFromBridge","removeCallFromBridgeFinish","muteAudioBridge","muteAudioBridgeFinish","unmuteAudioBridge","unmuteAudioBridgeFinish","silenceAudioBridge","silenceAudioBridgeFinish","unsilenceAudioBridge","unsilenceAudioBridgeFinish","callbacks","getNotificationCallbacks","globalBroadcaster","getGlobalBroadcaster","publish","shim","fcs","ongoingCalls","localStream","getUnifiedSdkCalls","fcsCalls","callIds","getId","processMediaError","pluginUrls","urlWin32bit","urlWin64bit","urlMacUnix","initializeMedia","initMediaSuccess","initMediaFailure","getInternalCall","getInternalBridge","onStateChange","localStatusAndReason","localStatusCode","localReasonText","isVideoNegotiationAvailable","callerNumber","calleeNumber","callerName","calleeName","getJoin","getRemoteVideoState","onCallMediaStateChange","NotificationCallbacks","GlobalBroadcaster","startCallSuccess","fcsCall","startCallFailure","mediaSuccess","sendScreenShare","mediaSourceId","mediaOptions","answerSuccess","answerFailure","answer","mediaFailure","ignoreSuccess","ignoreFailure","ignore","rejectSuccess","rejectFailure","endSuccess","endFailure","mute","unmute","silence","unsilence","getCustomParameters","startVideoSuccess","startVideoFailure","videoStart","stopVideoSuccess","stopVideoFailure","videoStop","holdSuccess","holdFailure","hold","unHoldSuccess","unHoldFailure","unhold","screensharingStopped","startScreenshareSuccess","startScreenshareFailure","screenSharingStart","stopScreenshareSuccess","stopScreenshareFailure","screenSharingStop","sendCustomParametersSuccess","sendCustomParametersFailure","forwardSuccess","forwardFailure","forward","transferSuccess","transferFailure","dest","joinSuccess","joinedCall","joinFailure","withVideo","onSpeakerSuccess","speaker","camera","microphone","onSpeakerFailure","device","deviceId","promptUserMediaSuccess","promptUserMediaFailure","changeSpeakerSuccess","changeSpeakerFailure","changeDevicesSuccess","changeDevicesFailure","fcsError","getUserMediaSuccess","streamInfo","getUserMediaFailure","createBridgeSuccess","onCallsChange","createBridgeFailure","close","addCallSuccess","addCallFailure","errCode","add","removeCallSuccess","removeCallFailure","muteLocalAudio","unmuteLocalAudio","silenceRemoteAudio","unsilenceRemoteAudio","createFcs","modules","coreModule","callModule","rccCallModule","wamCallModule","webRtcModule","bottle","Bottle","loadModule","Core","Notification","Call","httpModule","globalBroadcasterModule","turnCredentialsModule","sdpModule","Config","LogManagerImpl","Cache","SdpParser","SdpParserImpl","LocaleService","ChallengeManager","ChallengeManagerFactory","CoreImpl","Navigator","navigator","Global","_core","Level","OFF","FATAL","ALL","_logHandler","enableDebug","isEnabled","Logger","getName","argument","fatal","_loggerName","trim","polling","iceCandidateCollectionTimeoutInterval","pluginMode","mode","h264","bundlePolicy","constants","WEBRTC","_fcs","_config","_global","getPrefix","cachePrefix","setItem","keyName","keyValue","localStorage","getItem","removeItem","clear","fullKeyName","_fcsConfig","nl","lf","sdpData","sessionDescription","mediaDescriptions","sdp","parseSDP","setSessionDescriptionAttributes","setMediaDescriptionsAttributes","descriptions","mediaDescription","line","sessionDescriptions","connectionData","match","email","ip","mediaDescriptionIndex","mediaDescriptionAttributes","mediaData","direction","isHold","isRemote","media_index","mediaDesc","isRemoteHold","isLocalHold","getSessionDescription","getMediaDescriptions","isSdpHas","pSdp","M_LINE","isSdpHasAudio","STRING","AUDIO","isSdpHasVideo","VIDEO","isSdpHasUfrag","A_LINE","ICE_UFRAG","isSdpHasMediaWithExpectedPort","isSdpHasAudioWithZeroPort","isSdpHasVideoWithZeroPort","isSdpHasAudioWithOnePort","isSdpHasVideoWithOnePort","isSdpHasAudioWithNinePort","isSdpHasVideoWithNinePort","replaceZeroVideoPortWithOne","getSdpDirection","substr","MEDIA_STATE","logmsg","getAudioSdpDirection","getVideoSdpDirection","isAudioSdpDirectionInactive","isAudioSdpDirectionSendrecv","isAudioSdpDirectionSendonly","isAudioSdpDirectionRecvonly","isSdpContainsAudioDirection","isVideoSdpDirectionInactive","isVideoSdpDirectionSendrecv","isVideoSdpDirectionSendonly","isVideoSdpDirectionRecvonly","isSdpContainsVideoDirection","changeDirection","directionBefore","directionAfter","updateSdpDirection","beforeDirection","updateAudioSdpDirection","updateVideoSdpDirection","updateAudioSdpDirectionToInactive","updateVideoSdpDirectionToInactive","isSdpHasDirection","sr_indx","so_indx","ro_indx","in_indx","isSdpEnabled","isAudioSdpEnabled","isVideoSdpEnabled","isSdpVideoReceiveEnabled","updateH264Level","reg","video_arr","new_substr","elm","elm_array","CARRIAGE_RETURN","NEW_LINE","updateH264LevelTo42E01F","isSdpVideoCandidateEnabled","deleteFingerprintFromSdp","getFingerprintFromSdp","exec","deleteCryptoFromSdp","deleteCryptoZeroFromSdp","updateAudioCodec","audio_arr","attrLine","partialMLine","remcodec","regExpCodec","codecsToRemove","RegExp","updateVideoCodec","codecsToRemoveForVideo","removeAudioCodec","codecToRemove","elm2","removeRTXCodec","rtxPayloadType","vp8SSRC","rtxSSRC","getVp8Ssrc","getRtxSsrc","removeSsrcId","getRTXPayloadType","removeVideoCodec","splitArray","ssrcGroupArray","ssrcArray","ssrcId","ssrc_arr","removeG722Codec","getPayloadTypeOf","codecString","rtpMapNumber","rtpMapArray","payloadTypeArray","search","replaceTelephoneEventPayloadType","oldCode","newCode","finalsdp","regex","matches","tempAudioLine","partialsdp","number","replaceOpusCodec","oldCodecNumber","defaultCodecNumber","updateOpusConfig","opusConfig","opusBandwidthLine","opusPayload","getOpusPayloadType","searchParam","untilFtmpLine","opusFmtpLine","aFmtp","maxPlaybackRate","maxAverageBitrate","fec","dtx","ptime","createControlText","BANDWIDTH","MAXPLAYBACKRATE","MAXAVERAGEBITRATE","FEC","DTX","lastIndexOf","isValidOpusControl","PTIME","ptimeSearchParam","ptimeAndRest","ptimeLine","audioControlPropertyName","audioControlPropertyValue","controlLine","controlName","controlValue","getG7228000PayloadType","getVP8PayloadType","getG72216000PayloadType","getH264PayloadType","isSdpHasTelephoneEventWithRate","isSdpHasTelephoneEvent","isSdpHasVP8Codec","isSdpHasH264Codec","checkSupportedVideoCodecs","localOfferSdp","isVideoCodecsSupported","removeAllVideoCodecs","addVP8Codec","updateSdpVideoPort","performVideoPortZeroWorkaround","removeVideoDescription","codecs","offerSdp","vp8PayloadType","codecType","videoUFRAGParam","videoPWDParam","ice_ufrag","ice_pwd","removeSdpLineContainingText","checkICEParams","getICEParams","restoreICEParams","ICE_PWD","containing_text","r_sdp","port_text","addSdpMissingCryptoLine","mediaSplit","audioLines","cryptLine","CRYPTO","FINGERPRINT","mediaType","parse1","parse2","isVideo","parse3","new_value","updateICEParams","subsdp","num","checkIceParamsLengths","oldSdp","isSdpVideoSendEnabled","getSdpDirectionLogging","logging","deleteInactiveVideoSsrc","videoSdp","deleteSsrcFromSdp","getTcpSetupAttribute","SETUP_ACTIVE","SETUP_PASSIVE","SETUP_ACTPASS","setTcpSetupAttribute","newSetupAttribute","checkAndRestoreICEParams","oSdp","audioUFRAGParam","audioPWDParam","incrementVersion","oLineAsArray","newoLine","actualoLine","escalateSdpDirection","deescalateSdpDirection","isIceLite","getSessionIdFromSdp","oLine","updateVersion","fromSdp","toSdp","fromOline","toOline","actualtoOline","copyCandidatesToTheNewLocalSdp","oldSplitSdp","newSplitSdp","oldVideoSdp","newVideoSdp","oldAudioSdp","newAudioSdp","copyCandidates","mediaLines","getSdpFromObject","deleteGoogleIceFromSdp","respondToRemoteSdpDirections","localSdp","remoteSdp","respondToRemoteMediaSdpDirection","remoteDirection","hasZeroConnectionIP","hasCandidates","relayCandidateCycle","relayCandidateConfigCycle","checkRelayCandidateCollectionTimeout","candidateParser","getCandidateType","mLines","mline","deleteFingerprintOrCrypto","addRtpmapForCodec","rtpmapString","audioCodecList","addRtpmapForPCMU","addRtpmapForPCMA","deleteCurlyBracketsSDP","deleteBandwidthLineFromSdp","setOpusCodecToLowerCase","replaceAudioMlineOfCodec","prevValue","newValue","replaceMlineOfCodec","replaceVideoMlineOfCodec","option","prevMline","newMline","mLineRegex","replaceRTPMapOfCodec","replaceRTCPOfCodec","replaceFMTPOfCodec","replaceCodecValue","codec","payloadType","replaceCodecs","codecMap","removeH264Codec","h264PayloadType","findZeroConnectionIPandModify","hasCodecPayloadChanged","oldTEPayloadCodec","newTEPayloadCodec","isVideoHasSsrc","videoLine","checkandReplaceAPTValue","substr_arr","numOfAPT","APTIndex","sdpMline","APTValue","isSdpHasTrickle","setTrickleOption","addTrickle","compareSDPForEarlyMedia","sdp1","sdp2","lineIndex","originalLines","newLines","isRemoteEndFirefox","challengeManager","setChallengeHandler","TypeError","challengeHandler","setAnswerHandler","challengeAnswerHandler","challenge","challengeSuspensions","Promise","currentChallenge","retry","suspendChallenges","waitOn","_globalBroadcaster","dev","pluginVer","un","tkn","authorizationName","tokenRealm","kandyUAT","DEFAULT_SUBSCRIPTION_EXPIRY_VALUE","MIN_SUBSCRIPTION_EXPIRY_VALUE","isAsync","setAsync","getAuthUser","getDevice","EVENT","BASIC_AUTH_STARTED","TOKEN_AUTH_STARTED","getTokenAuth","setDeviceAuth","getRealm","uat","getKandyUAT","AuthenticationType","USER","DEVICE","Errors","configParams","delayInitMedia","codecsToReplaceDefaultFound","paramFields","handleValidSubscriptionExpiryTimerValue","trickleIceSupport","TRICKLE","FCS_SETUP_COMPLETED","connectionParams","SDP_CONSTANTS","setPluginVersion","getPluginVersion","setServices","serviceParam","callDisplay","callDisposition","restfulClient","callControl","remoteCallControl","callMe","directory","history","custom","IM","routes","dataChannel","setConnected","connectionStatus","Http","_server","_utils","getUserLocale","sendGetRequest","getWAMUrl","XHR","XHRImpl","HttpImpl","_xhr","REQUEST_TYPE_PUT","REQUEST_TYPE_POST","REQUEST_TYPE_GET","REQUEST_TYPE_DELETE","onSubscriptionStarted","onSubscriptionEnded","onTokenAuth","onBasicAuth","manipulateHeader","header","sendRequest","callParams","successHandler","errorHandler","successParser","errorParser","failureHandler","CONSTANTS","sendPostRequestTokenAuth","sendPostRequest","sendDeleteRequest","sendPutRequest","getUrl","authNeeded","DEVICE_SUBSCRIPTION_STARTED","DEVICE_SUBSCRIPTION_ENDED","setSession","setUsernamePassword","pass","_challenger","GoneNotifier","_goneNotifier","DEFAULT_LONGPOLLING_TOLERANCE","DEFAULT_AJAX_TIMEOUT","XHR_READY_STATE","REQUEST_NOT_INITIALIZED","REQUEST_DONE","composeAjaxRequestResponseLog","errorThrown","responseLog","statusText","responseText","readyState","parseError","returnResult","parseErrorStatusCode","origHeaders","urlWithoutRestVersion","resourceString","finalHeaders","headerKey","responseLogContext","handleSuccess","handleError","isSuccess","modValues","longpollingTolerans","imRequest","XMLHttpRequest","onload","onabort","onerror","open","withCredentials","cors","setRequestHeader","send","dataType","async","jsonp","crossDomain","checkIE9HackForAbortedAjaxRequest","description","responseURL","SyntaxError","reportError","onGoneReceived","XHR_REQUEST_NOT_INITIALIZED","enableAuthChallenge","newUAT","onreadystatechange","MAX_PRIORITY","MIN_PRIORITY","topics","subUid","unsubscribeFromTopic","subscribeToTopic","topic","priority","temporary","prio","temp","sort","parseFloat","publishTopic","subscribers","len","_args","_topic","TurnCredentialsManager","TurnCredentialsManagerImpl","_cache","CREDENTIALS_CACHE_KEY","save","onCredentialsReceived","SdpPipeline","builtinHandlers","createSdpPipeline","createConvertedSdpPipeline","getHandlers","sdpLogger","operation","step","nextCalled","callHandler","currentSdp","pipeline","sdpString","sdpObject","sdpParse","sdpWrite","transform","write","createSdpLogger","createBundleHandler","bundleHandler","groups","RccFSM","RccFSMImpl","RccManagerImpl","RccControlService","RccControlServiceImpl","CallFSMState","INIT","MAKING_CALL","ANSWERED","CALL_RECEIVED","DEFLECTING_CALL","ENDING_CALL","HOLDING_CALL","RETRIEVING_CALL","BLIND_TRANSFERING","ANSWERING_CALL","MAKING_CONSULTATIVE_TRANSFER","CONFERENCING_CALL","CONFERENCED_CALL","TransferEvent","unknownNotification_fsm","makeCall_fsm","callInProgress_fsm","ringing_fsm","answered_fsm","callReceived_fsm","callFailed_fsm","callEnded_fsm","endCall_fsm","blind_transfering_fsm","holdCall_fsm","callHeldLocally_fsm","callRetrievedLocally_fsm","callHeldRemotely_fsm","callRetrievedRemotely_fsm","callHeldBoth_fsm","answerCall_fsm","deflectCall_fsm","consultativeTransfer_fsm","redirected_fsm","callBlindTransferred_fsm","callConsultativeTransferred_fsm","callTransferred_fsm","conferencing_fsm","conferenced_fsm","blindTransferFailed_fsm","consultativeTransferFailed_fsm","conferenceCallFailed_fsm","NotificationEvent","unknowNotify","callInProgress","ringing","answered","callHeldRemotely","callRetrievedRemotely","callHeldLocally","callRetrievedLocally","callTransferred","callReceived","redirected","callFailed","callEnded","makeCall_GUI","deflectCall_GUI","endCall_GUI","holdCall_GUI","blind_transfering_GUI","retrieveCall_GUI","answerCall_GUI","consultativeTransfer_GUI","conferenceCall_GUI","conferenced","blindTransferFailed","consultativeTransferFailed","conferenceCallFailed","FSM","getCurrentState","currentState","previousState","retrieveCall_fsm","handleEvent","initialCallState","transferEvent","_rccFSM","_rccControlService","_notificationCallbacks","fsmNotificationEvent","fsmState","CALL_HOLD_STATES","extendMonitorDeviceTimer","isMonitorStarted","isSubscription","sessionParam","onMonitorSessionLost","monitorSessionLostNotification","monitorSessionRefreshed","monitorSessionTerminated","onMonitorSessionRefreshed","onMonitorSessionTerminated","opts","sendVideo","isJoin","buttonDisabler","btnTimeout","auditTimer","notificationQueue","onLocalStreamAdded","onStreamAdded","canReject","canForward","canAnswer","canSendVideo","canOriginatorSendLocalVideo","canReceiveVideo","canOriginatorReceiveRemoteVideo","getHoldState","getHoldStateOfCall","getCalledParty","getCallingParty","transferredCallId","currentCallId","targetCallId","isVideoStart","videoStopStart","anotherCall","callid1","callid2","sendIntraFrame","sendBlackFrame","refreshVideoRenderer","setJoin","getButtonDisabler","setButtonDisabler","disable","clearBtnTimeout","clearTimeout","setAuditTimer","audit","setInterval","callAuditTimer","clearAuditTimer","clearInterval","isCallMuted","isVideoNegotationAvailable","transfaredCallId","setDeviceID","deviceid","setSessionID","sessionid","sessionID","setExpiryTime","expirytime","expiryTime","setMonitorSessionParam","getMonitorSessionParam","removeMonitorSessionParam","clearResources","clearAllResources","stopExtendMonitorDeviceTimer","extendMonitorDeviceSubscription","extendMonitor","startExtendMonitorDeviceTimer","internalCall","isCall","delegateToCallFSM","stateMessage","monitorStarted","isSubscribed","subscriptionStarted","subscriptionStopped","isDeviceMonitor","reponse","rccCallResponse","startMonitor","rccSessionResponse","sessionId","stopMonitor","answerSuccessCallback","answerFailureCallback","retrieveCall","_currentState","deflectCall","currentInternalCall","targetInternalCall","targetCallState","currentCall","targetCall","conferenceCall","responseData","rccDeviceResponse","deviceList","blindTransfer","onNotificationEvent","sessionParams","triggerCallState","getCallerAndCalleeData","handleCallControlNotification","RemoteCallControl","rccEvent","rccNotificationParams","rccNotifyData","rccNotifySecondData","incomingCall","newOutgoingCall","copyNotifyDataForConferencedDoubleCallID","endedCallId","addCallerAndCalleeToTheCall","genericErrorParser","jqXHR","callRequestPostPutErrorParser","callRequestDeleteErrorParser","getDeviceListRequestErrorParser","sessionRequestPostPutErrorParser","sessionRequestDeleteErrorParser","isUserMonitor","rccToRccDevice","rccToSession","rccToSessionID","rccToCall","rccToCallID","callID","requestData","urlPostfix","CallFSM","CallFSMImpl","CallManagerImpl","CallControlService","CallControlServiceImpl","TRYING","RINGING_SLOW","LOCAL_HOLDING","LOCAL_UNHOLDING","LOCAL_VIDEO_STOP_START","REMOTE_OFFER","REMOTE_HOLDING","REMOTE_UNHOLDING","JOINING","PROVISIONRECEIVED","REFER","TRANSFERING","LOCAL_SLOW_START_OFFER","LOCAL_REOFFER","LOCAL_REJECTING","LOCAL_ENDING","ignoredNotification_fsm","callStart_fsm","answer_fsm","reject_GUI","rejectWithoutClearCallObject_GUI","ignore_GUI","callCompleted_fsm","noAnswer_fsm","localEnding_fsm","localEndingWithoutClearCallObject_fsm","localEnd_fsm","localReject_fsm","remoteEnd_fsm","answeringRingingSlow_fsm","callCompletedAnswering_fsm","localHold_fsm","localHolding_fsm","remoteHold_fsm","remoteHolding_fsm","localUnHold_fsm","localUnHolding_fsm","remoteUnHold_fsm","remoteUnHolding_fsm","localVideoStopStart_fsm","remoteOffer_fsm","joining_fsm","sessionComplete_fsm","joiningSuccess_fsm","sessionFail_fsm","respondCallUpdate_fsm","remoteCallUpdate_fsm","remotePranswer_fsm","forward_fsm","refer_fsm","accepted_fsm","transfering_fsm","transferSuccess_fsm","transferFail_fsm","respondCallHoldUpdate_fsm","remoteOfferDuringLocalHold_fsm","renegotiationCompleted_fsm","slowStartOfferDuringRemoteHold_fsm","slowStartOfferDuringOnCall_fsm","stateReverted_fsm","glareCondition_fsm","slowStartOfferProcessed_fsm","performReconnectWorkaround_fsm","performCreateNewPeerWorkaround_fsm","startCallReplace_fsm","startCallReplaceRejected_fsm","respondedFromAnotherDevice_fsm","deviceChange_fsm","callStart_GUI","callNotify","ringing_Notify","answer_GUI","end_GUI","respondCallUpdate_Notify","respondCallUpdate_Notify_sendOnly","respondCallUpdate_glareCondition_Notify","callEnd_Notify","callNotify_noSDP","startCallUpdate_slowStart_Notify","startCallUpdate_remoteHold_Notify","startCallUpdate_remoteOffer_Notify","joining_Notify","sessionComplete_Notify","joiningSuccess_Notify","sessionFail_Notify","hold_GUI","unhold_GUI","videoStopStart_GUI","sessionProgress","callCancel_Notify","forward_GUI","refer_JSL","accepted_Notify","transfering","requestFailure_JSL","webrtcFailure_JSL","remoteOfferProcessed_JSL","remoteHoldProcessed_JSL","remoteUnHoldProcessed_JSL","slowStartOfferProcessed_JSL","performReconnectWorkaround_JSL","performCreateNewPeerWorkaround_JSL","startCallReplace_Notify","endReject_GUI","endIgnore_GUI","revertState_JSL","deviceChange_GUI","answerRingingSlow_fsm","WebRtcManager","_webRtcManager","_callFSM","_callControlService","_sdpParser","_notificationCallBacks","bridges","AUDIT_KICKOFF_TIMEOUT","isReconnected","isQueueEnabled","startCallInProgress","startCallQueue","NOTIFICATION_STATE","JOIN_COMPLETED","isOutgoing","onMute","isSilenced","getCustomParametersOfCall","customParams","setCustomParametersOfCall","getWebRtcStats","getNativeWebRtcStats","startWebRtcStatsTimer","interval","stopWebRtcStatsTimer","getMediaStream","onStopped","isScreenStart","screenStopStart","bridgedCalls","bridgedCall","muteAudioTrack","silenced","updateSilenceStatus","mergeAudioStream","bridgeIndex","unMergeAudioStream","pop","cleanInternalCall","callIndex","targetAddress","transfer","transferTrigger","preserveCallObject","callStats","isAuditing","pendingRequestTimer","cache","processEnd","clearCallObject","setNotificationStateOfCallToBusy","notificationState","setNotificationStateOfCallToIdle","isNotificationStateOfCallBusy","triggerQueue","notificationObj","callNotificationParams","processStartCallQueue","sessionData","onSubscriptionReEstablished","defaultActiveCallTimeoutMS","activeCallTimeout","activeCallTimeoutMS","callAge","callStateOnConnect","getSession","callControlResponse","mapGetUserMediaErrorToFcsError","privateGetUserMedia","canMergeAudio","setUpdateCandidateCallbackToCall","updateCandidates","candidateArray","updateIceCandidate","iceCandidates","videoNegotiationAvailable","offerToReceiveVideo","getUserMediaSuccessCallback","mediaInfo","isVideoSourceAllowed","storeLocalStreamToCall","createAnswer","createAnswerSuccessCallback","addLocalStream","createAnswerFailureCallback","getUserMediaFailureCallback","createOffer","createOfferSuccessCallback","createOfferFailureCallback","cachedCall","optionReject","optionForward","optionAnswer","canOrigReceiveVideo","primaryContact","cacheCall","callToCache","screenShare","requestScreenShare","isScreenShared","handleFailure","failureEvent","revertRtcState","handleRequestFailure","handleWebrtcFailure","originalStream","lastUpdateRequest","createHoldUpdate","videoUpdate","retryCallback","createUpdate","reinvite","onScreenStop","isStartingScreenMedia","startScreenMedia","updateLocalStreamToCall","stopScreenMedia","internalCall1","internalCall2","newInternalCall","currentCallState1","currentCallState2","onJoin","firstInternalCallId","secondInternalCallId","clientControlled","isReferer","refer1ID","refer2ID","cerateIncomingCallInFSM","continuity","notificationParams","referTo","referredBy","prevRemoteSdp","stableRemoteSdp","supportTrickle","remoteDisplayNumber","callStates","auditTimerDelay","startAuditTimer","doNotTriggerQueue","stateText","stateName","triggerCallStateWithoutQueue","forceNewPeer","replaceCallCompleted_fsm","peer","signalingState","RTC_SIGNALING_STATE","processAnswer","ICE_ICELITE","referCall","replacingCallId","replacingCall","remoteParticipantChanged","remoteEndPointChanged","processHold","respondToRemoteHold","errorStr","processRemoteOfferOnLocalHold","respondCallUpdate","createReOffer","createReOfferSuccessCallback","reInviteSuccessCallback","reInviteFailureCallback","createReOfferFailureCallback","respondToRemoteUnhold","processUpdate","processHoldRespond","processRespond","refer","isVideoSourceAvailable","isAudioSourceAvailable","hasScreenSharing","isScreenSourceAvailable","isAudioMuted","isSendInitialVideoEnabled","cameraList","microphoneList","speakerList","internalCallId","replaceStream","deleteLocalStream","handleIncomingIceCandidate","candidates","addRemoteCandidates","handleIncomingCall","dispositionParams","callDispositionParams","ringingFeedback","rawParameters","handleReplacesFailure","newlyCreatedCall","sendRejectCallReplace","handleReplacesWebrtcFailure","rejectCallReplace","createNewCall","notificationWithSdp","newlyCreatedCallId","handleStartCallReplaceNotification","newlyCreatedSessionParams","replaces","remoteParty","transferredCall","transferredCallState","isSendInitialVideo","successCallback","acceptCallReplace","failureCallback","startCallUpdate","handleStartCallUpdateNotification","getCallerInfo","callerDisplayNumber","getCalleeInfo","calleeDisplayNumber","notificationEvent","remoteCallParams","RemoteDisplayName","RemoteDisplayNumber","onRemoteEndPointChange","currentUser","handleRespondCallUpdateNotification","sessionComplete","handleSssionCompleteNotification","sessionFail","handleSessionFailNotification","callEnd","handleCallEndNotification","trying","handleTryingNotification","trying_Notify","callCancel","handleCallCancelNotification","accepted","handleAcceptedNotification","startCallReplace","IceCandidate","CONNECTION_REESTABLISHED","NOTIFICATION_CHANNEL_LOST","setCalls","_calls","setNotificationState","_notificationState","getStartCallQueue","_sdpPipeline","runSdpPipeline","PRE_SEND_LOCAL","addNotificationChannel","callMeRequest","notifyChannelId","modifiedSdp","START_CALL","OFFER","parseCallStart","callMeResponse","callControlRequest","earlyMedia","callReplace","HOLD","UNHOLD","ANSWER","firstSessionData","secondSessionData","parseJoin","endUrl","delimiter","makeRequest","callDispositionRequest","dummy","sessiondataToTransfer","parseIMRNResponse","IMRNdata","receivedIMRN","imrnResponse","callData","parseAcceptCallReplaceData","parseRejectCallReplaceData","adaptorModule","decoratorModule","modelModule","WebRtcAdaptorFactory","WebRtcAdaptorBaseFactory","decorator","model","WebRtcAdaptorImpl","WebRtcChromeAdaptorFactory","WebRtcChromeDecoratorFactory","WebRtcChromeAdaptorModelFactory","WebRtcChromeAdaptorImpl","WebRtcContainerAdaptorFactory","WebRtcContainerAdaptorImpl","WebRtcFirefoxAdaptorFactory","WebRtcFirefoxDecoratorFactory","WebRtcFirefoxAdaptorModelFactory","WebRtcFirefoxAdaptorImpl","WebRtcFirefoxEsrAdaptorFactory","WebRtcFirefoxEsrAdaptorImpl","WebRtcPluginAdaptorFactory","WebRtcDecoratorFactory","WebRtcPluginAdaptorModelFactory","WebRtcPluginAdaptorImpl","WebRtcPluginv22AdaptorFactory","WebRtcPluginv22AdaptorImpl","WebRtcPluginv31AdaptorFactory","WebRtcPluginv31AdaptorImpl","_decorator","_model","zero","peerId","performSdpWorkaroundsBeforeProcessingIncomingSdp","setRemoteDescription","remoteDesc","storeRemoteSdp","PRE_SET_REMOTE","createRTCSessionDescription","isVideoDirectionsSendRecv","isAudioDirectionsSendRecv","isSdpDirectionsSendRecv","isAudioSdpDirectionsSendRecv","oldSolutionNeeded","oldVideoLine","newVideoLine","oldSessionId","newSessionId","telephoneEventPayloadChanged","iceCredentialsChanged","oldVideoUfrag","newVideoUfrag","updateCodecs","codecsToReplace","overrideConfiguredCodecValues","fireEvent","isSendingLocalVideo","useDefaultRenderer","fireOnLocalStreamAddedEvent","lastElementChild","localStreamId","endLocalMedia","usePreviousMediaDirection","localDescObj","localAudioDirection","localVideoDirection","prevLocalSdp","stableLocalSdp","deleteVideoStream","initialVideoState","createNewPeerForCall","createReOfferCreateOfferSuccessCallback","REOFFER","PRE_SET_LOCAL","setLocalDescription","createReOfferSetLocalDescriptionSuccessCallback","createReOfferSetLocalDescriptionFailureCallback","createReOfferCreateOfferFailureCallback","getLocalAudioTrack","audioTracks","getSenders","audioSenders","sender","track","getLocalStreams","streams","getAudioTracks","getLocalVideoTrack","videoTracks","videoSenders","getVideoTracks","getRemoteVideoTrack","getRemoteStreams","userAction","newMuteState","audioMuted","audioGain","gain","localAudioTrack","fcsUserAudioMuteState","muteVideoTrack","localVideoTrack","videoMuted","fcsUserVideoMuteState","remoteStream","safeStreamId","audioRenderer","document","querySelector","videoRenderer","restoreUserMuteStateOfCall","previousMuteStateOfAudio","previousMuteStateOfVideo","muteOnHold","checkMediaSourceAvailability","mediaSourceCallback","initScreenSharing","performVideoStartWorkaround","onFail","remoteAudioState","localDescription","pvswFirstSetRemoteDescriptionSuccessCallback","pvswSecondSetRemoteDescriptionSuccessCallback","pvswCreateAnswerSuccessCallback","dtlsRole","pvswSetLocalDescriptionSuccessCallback","pvswSetLocalDescriptionFailureCallback","pvswCreateAnswerFailureCallback","pvswSecondSetRemoteDescriptionFailureCallback","pvswFirstSetRemoteDescriptionFailureCallback","createAudioContext","AudioContext","webkitAudioContext","mozAudioContext","oAudioContext","msAudioContext","mediaStreamSource","mediaStreamDestination","constraints","audioContext","videoConstraints","audioConstraints","createMediaStreamDestination","createMediaStreamSource","createGain","addTrack","mergedSources","replaceVideoStream","targetStream","sourceStream","targetVideoTracks","removeTrack","sourceVideoTracks","call1","call2","remoteStream1","remoteStream2","source1","source2","onEnded","video_constraints","mandatory","mediaSource","oldStream","onended","stopStream","createDataChannelOffer","localDesc","DATA_CHANNEL","createDataChannelAnswer","processDataChannelAnswer","isAnswer","addStream","createOfferSetLocalDescriptionSuccessCallback","createOfferSetLocalDescriptionFailureCallback","createAnswerSetRemoteDescriptionSuccessCallback","createAnswerSetLocalDescriptionSuccessCallback","createAnswerSetLocalDescriptionFailureCallback","createAnswerSetRemoteDescriptionFailureCallback","needNewPeer","updateStream","createUpdateCreateOfferSuccessCallback","createUpdateCreateOfferSetLocalDescriptionSuccessCallback","iceConnectionState","iceGatheringState","crateUpdateCreateOfferSetLocalDescriptionFailureCallback","createUpdateCrateOfferFailureCallback","rtcState","revertRtcStateLocalDescriptionSuccessCallback","REVERT_RTC_STATE","revertRtcStateRemoteDescriptionSuccessCallback","revertRtcStateRemoteDescriptionFailureCallback","revertRtcStateLocalDescriptionFailureCallback","remote_hold_status","createHoldUpdateCreateOfferSuccessCallback","videoInactiveOnHold","createHoldUpdateSetLocalDescriptionSuccessCallback","createHoldUpdateSetLocalDescriptionFailureCallback","createHoldUpdateCreateOfferFailureCallback","local_hold_status","audioDirection","videoDirection","peerLocalSdp","inactiveRemoteSdp","setOriginatorSendLocalVideo","processHoldSetFirstRemoteDescriptionSuccessCallback","processHoldSetSecondRemoteDescriptionSuccessCallback","processHoldCreateAnswerSuccessCallback","processHoldSetLocalDescriptionSuccessCallback","processHoldSetLocalDescriptionFailureCallback","processHoldCreateAnswerFailureCallback","processHoldSetSecondRemoteDescriptionFailureCallback","processHoldSetFirstRemoteDescriptionFailureCallback","remoteVideoDirection","processUpdateWorkaroundSetRemoteDescriptionSuccessCallback","processUpdateSetRemoteDescriptionSuccessCallback","processUpdateCreateAnswerSuccessCallback","processUpdateSetLocalDescriptionSuccessCallback","processUpdateCreateAnswerFailureCallback","onSuccessAfterWorkarounds","origSdp","callOperation","processPreAnswer","PRANSWER","processPreAnswerSetRemoteDescriptionSuccessCallback","setOriginatorReceiveRemoteVideo","processPreAnswerSetRemoteDescriptionFailureCallback","remoteSdpHasVideo","RESPOND","remoteAudioDirection","onSuccessAfterWorkaround","localHoldFlag","remoteHoldFlag","onRemoteStreamAdded","forceDisableMediaOnHold","processHoldRespondSetRemoteDescriptionSuccessCallback","processHoldRespondSetRemoteDescriptionFailureCallback","removeJslIdFromContainer","removeAttribute","clearLocalMediaProperties","detachWebAudioContextFromLocalMedia","stopLocalMedia","localStreamEntries","clearIceCandidateCollectionTimer","clearUpdateCandidateInterval","clearWebrtcLogCollectionInterval","onRemoteStreamRemoved","entries","onSessionConnecting","onSessionOpened","onSignalingStateChange","local","isVideoTrackAvailable","children","innerHTML","firstElementChild","setSelectedSpeaker","element","setSinkId","renderer","createElement","appendChild","srcObject","autoplay","playPromise","play","addCallIdInPluginContainer","setAttribute","isActiveCallInVideoContainer","getAttribute","remoteVideoTracks","remoteStreamId","onaddtrack","mergedCall","mergedSource","fireOnStreamAddedEvent","updateCandidateInterval","iceCandidateCollectionTimer","onIceCandidate","candidate","relayCandidateCollectionTimeoutCycle","sdpMLineIndex","onIceComplete","onDataChannel","dataChannelWrapperObj","iceCandidateCollectionTimeoutHandler","setupIceCandidateCollectionTimer","results","collectWebRtcStats","accumulatedStats","getAccumulatedWebRtcStats","cacheWebRtcStats","statsList","currentStats","callCache","packetsSent","bytesSent","bytesReceived","peerAddress","packetsLost","jitter","rtt","accumulateStats","accumulatedStatsObj","statsObj","statsSdp","setWebRtcStats","res","names","sdpAudioPort","sdpVideoPort","transportId","googChannelId","googCodecName","alwaysMediaOnBroker","stat","fillStats","sdpRemotePort","remotePort","remoteAddress","webrtcLogCollectionInterval","webrtcLogCollectionTimeoutHandler","statObj","resultLength","namesLength","audioOutputLevel","setupWebrtcLogCollectionTimer","logCollectionInterval","oniceconnectionstatechange","mediaStates","createDataChannel","createPeer","pc","servers","useIceServer","ignoreIceParamsForServices","iceServers","rtcpMuxPolicy","sdpSemantics","callConstraints","chrome","optional","useRelayOnly","iceTransportPolicy","createRTCPeerConnection","_peerId","onconnecting","onopen","onsignalingstatechange","onaddstream","onremovestream","onicecandidate","onicecomplete","ondatachannel","onicegatheringstatechange","checkFireFox","incomingSDP","isNewPeerCreated","oldPeer","videoTrack","dtmfSender","remoteResolution","remoteVideoHeight","remoteVideoWidth","firstChild","videoHeight","videoWidth","localResolution","localVideoHeight","localVideoWidth","safeId","removeChild","sendInbandDTMF","oscillator1","oscillator2","freq1","freq2","gainNode","createOscillator","frequency","createGainNode","remoteDescription","createDTMFSender","canInsertDTMF","insertDTMF","pluginLogger","tSdp","videoSendEnabled","canOrigSendVideo","setDTLSRoleFromStableLocalSDP","handleDTLSRoleFromRemoteSDP","remote_role","local_role","lastLocalSdp","setDTLSRole","prepareAudioConstraints","mediaConstraints","updateVideoConstraints","max","maxHeight","min","minHeight","maxWidth","minWidth","prepareVideoConstraints","frameRate","maxFrameRate","chromeMediaSourceId","privateMedia","privateGetUserMediaSuccessCallback","privateGetUserMediaFailureCallback","createRTCIceCandidate","addIceCandidate","setContainerSinkId","videoEl","sinkId","_super","getMediaSourceId","callSdpWithNoSsrc","processAnswerSetRemoteDescriptionSuccessCallback","processAnswerSetRemoteDescriptionFailureCallback","hasActiveVideo","processHoldSetRemoteDescriptionSuccessCallback","processHoldSetRemoteDescriptionFailureCallback","processRespondSetRemoteDescriptionSuccessCallback","senders","dtmf","urls","firefox","currentTarget","statsCallback","currentStat","componentId","ipAddress","portNumber","mozRtt","localStreams","remoteStreams","mainContainer","rtcPlugin","verifyPlugin","onloadParam","pluginid","applicationType","configuredPluginVersion","currentPluginVersion","currentPluginVersionString","major","minor","current_revision","pluginLogLevel","onFCSPLoaded","enableH264","setH264CodecStateChangeHandler","onH264CodecStateChangeHandler","getCurrentPluginVersionObject","revision","min_revision","build","min_build","onPluginRequired","current_build","setLang","appName","getElementById","createPeerConnection","getUserMediaCallback","label","OfferToReceiveVideo","mustCreatePeer","setTcpSetupAttiributesOnProcessAnswer","remoteDescriptionMainProcess","processUpdateSetLocalDescriptionFailureCallback","processUpdateWorkaroundSetRemoteDescriptionFailureCallback","sessionIdChanged","isDTLSFingerprintChanged","createPeerSuccessCallback","clearTcpSetupParameters","createPeerFailureCallback","streamUrl","getURLFromStream","webRtcPlugin22Version","webRtcPlugin31Version","webRtcLibraryDecoratorImpl","libraryObjWrapper","createSessionDescription","createIceCandidate","getVideoDeviceNames","getAudioInDeviceNames","getAudioOutDeviceNames","logSeverityLevel","get_logSeverityLevel","logCallback","setType","getType","onh264codecstatechange","splittedPluginVersion","stop","removeStream","webRtcLibraryChromeDecoratorImpl","_window","_navigator","screenShareExtensionLoaded","screenShareExtensionId","getSourceMedia","chromeMediaSource","webkitGetUserMedia","isScreensharing","runtime","sendMessage","screenSharingOpts","RTCSessionDescription","RTCIceCandidate","RTCPeerConnection","webkitRTCPeerConnection","sources","executeCallback","processMediaDevices","groupId","mediaDevices","enumerateDevices","MediaStreamTrack","getSources","numberOfOutputs","tracks","getTracks","webRtcLibraryFirefoxDecoratorImpl","mozGetUserMedia","mozRTCSessionDescription","mozRTCIceCandidate","mozRTCPeerConnection","WebRtcAdaptorModelFactory","WebRtcChromeAdaptorModel","WebRtcFirefoxAdaptorModel","WebRtcPluginAdaptorModel","variableKey","setMediaSourceId","sourceId","pluginVersion","_webRtcAdaptorFactory","_turnCredentialsManager","rtcAdaptor","setSuccessCallbacktoCall","clearSuccessParametersFromCall","addTurnCredentialsToUrl","serverType","onFcsSetupCompleted","getWebRtcAdaptor","returnParams","statsTimer","userAgent","successCallbackWrapper","createDataChannelSuccessCallback","createDataChannelFailureCallback","createDataChannelAnswerFailureCallback","_rtcLibrary","_WebRtcChromeAdaptor","_WebRtcContainerAdaptor","_WebRtcFirefoxAdaptor","_WebRtcFirefoxEsrAdaptor","_WebRtcPluginv22Adaptor","_WebRtcPluginv31Adaptor","NAVIGATOR_TYPES","CHROME","FIREFOX","CONTAINER","PLUGIN_MODES","WEBRTCH264","WEBRTC22","AUTO","AUTO22","AUTOH264","AUTOFIREFOX","DEFAULT_RTC_PLUGIN_MODE","DEFAULT_RTC_ADAPTOR","PLUGIN_MODE_LOOKUP_TABLE","webrtc","autofirefox","autoh264","webrtch264","auto","auto22","ADAPTOR_LOOKUP_TABLE","webrtc22","autoesr","COMPOSIT_PLUGIN_MODES","COMPOSIT_ADAPTOR_LOOKUP_TABLE","getNavigatorType","omniRegex","omniVersion","PLUGIN","identifyPluginMode","getPluginModeForComposition","navigatorType","validPluginMode","pluginModeBrowser","pluginModeBrowserVersion","browserVersion","getPluginMode","adaptorFactory","adaptor","pluginModeAndH264Bundle","getLastPluginMode","getPluginModes","getDefaultRtcPluginMode","getDefaultRtcAdaptor","isSupported","checkDevicesFinish","deviceChangeChannel","recentDeviceChange","ondevicechange","checkDevices","createAudioBridge","convertDevices","convertedDevices","mediaApi","startPreviewVideo","stopPreviewVideo","callApi","getAll","getById","states","make","callOptions","normalizeAddress","normalizeDestination","destinationCallId","videoTag","childNodes","node","tagName","audioBridgeApi","addCall","removeCall","audioBridge","normalizeSipUri","extractDomainFromAddress","addressString","indexOfAtSymbol","separateAddressAndDomain","defaultDomainString","extractedDomain","extractPrependedData","inputString","prependedDataMatches","extractLeadingSpecialCharacters","potentialLeadingChars","actualLeadingChars","withoutVisualSeparators","isPhoneNumber","cleanNumber","phoneNumberMatch","processAddress","processDomain","domainString","resultingAddressAndDomain","prepend","leadingChars","callReducers","newCall","originalRemoteParticipant","sendingVideo","callReducer","specificCallActions","defaultState","displaying","bridgeReducers","newBridge","bridgeReducer","specificBridgeActions","callErrorEvent","CALL_ERROR","CALL_STARTED","CALL_FORWARDED","CALL_JOIN","CALL_SCREENSHARE_CHANGE","DEVICE_CHANGE","DEVICE_ERROR","DEVICE_DEFAULT_CHANGE","MEDIA_PERMISSIONS","granted","MEDIA_INITIALIZED","LOCAL_VIDEO_ERROR","LOCAL_VIDEO_CHANGE","audioBridgeEvents","BRIDGE_ERROR","BRIDGE_CHANGE","callHistoryApi","getCache","getCallHistory","getCachedHistory","localLogs","localLogsRemoved","resourceLocation","uniqueLogs","some","isSimilar","newLogs","serverLogEntry","startTimePadding","durationPadding","abs","fetchLogs","removeLogs","createLocalLog","oldCallEndedPattern","callEndedPattern","oldStoreCallLogs","storeCallLogs","startIndex","logHistory","logItems","logRecord","oldGetCallById","contactName","newGetCallById","isCaller","getSessions","getSessionById","getTrackById","getMedia","getMediaById","getBrowserDetails","sessions","trackId","mediaId","browser","callHistoryEvent","CALL_HISTORY_CHANGE","CALL_HISTORY_CACHE_CHANGE","CALL_HISTORY_ERROR","clickToCallImplementation","clickToCallSaga","clickToCallApi","conn","clickToCallRequest","clickToCallEvent","CLICK_TO_CALL_STARTED","CLICK_TO_CALL_ERROR","defaultValues","reconnectLimit","reconnectDelay","reconnectTimeMultiplier","reconnectTimeLimit","autoReconnect","maxMissedPings","webSocketOAuthMode","baseConnectivity","responsibleParty","wsConnectFlow","connectivityApi","getSocketState","enableConnectivityChecking","enable","resetConnection","pinging","kandy","WS_CHANGE","websocketLifecycle","serverPingFlow","clientPingFlow","chan","wsConnectAction","wsInfo","disconnectWebsocketPattern","connConfig","lastContact","emitTask","wsEmitter","pingFlow","closeWebsocketPattern","cleanupWebSocket","ws","timeOfLastPing","configPingInterval","maxIdleDuration","serverPing","pingIntervalMillis","connCheck","connAck","_sendWSMessage","timeOfLastPong","shouldCheck","intervalInSeconds","message_type","shouldCheckConnectivity","delayStartTime","serverPong","timeElapsed","timeUntilNextPing","configs","connectionAttempt","delayTime","safeOpenWs","openWebsocket","wsConnectStart","openWs","attemptDuration","remainingDelay","INITIAL_BUFFER_SIZE","WebSocket","validateWS","onOpen","onError","onclose","onmessage","createWsChannel","END","buffers","expanding","wsChannel","ucMessaging","features","fetchConversations","fetchMessages","receiveMessage","deleteMessage","deleteConversation","messageId","newConversation","MESSAGING_ERROR","sendMessageChannel","resetSaga","isGroup","tos","usedParts","attachments","part","txt","file","upload","uploadFile","handle","sendMessageFinish","json","jsonObject","tryParseJSON","jsonString","jsonBlob","Blob","attach","updateConversation","messageReceivedChannel","messageReceived","From","cimType","sdkType","Attach","attachment","mime","jsonBlobResponse","fetchMessageChannel","convType","formattedMessageArray","senderName","findMessageSender","dir","when","fetchMessagesFinished","touched","prepareTouchedParam","thread","fetchConversationsFinished","formattedConversationsArray","convo","handles","lastreceived","lastpull","lastmsg","lastReceived","lastPull","lastMessage","handleDeleteConversation","deleteRequest","handledResponse","handleDeleteResponse","deleteConversationFinish","deleteMessageChannel","handleDeleteMessage","deleteMessageFinish","pathParams","formData","FormData","append","requestObject","cimDateFormat","unixtime","getUTCFullYear","getUTCMonth","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","sendMessageReadFinish","clearMessages","sendMessageHelper","read","messageReadHelper","participant","deliveryStatus","incomingMessageRead","sendMessageRead","createConversation","isTypingList","messagingApi","recipient","Conversation","prevConv","sendMessageFinishHelper","conversationBase","initializers","groupIndex","methods","createMessage","messageContext","Message","markRead","getMessage","deleteMessages","messageIds","delete","subscriber","subscriberWrapper","conversationHistory","messageBase","convoContext","withParts","addPart","validationResponse","validatePart","validTypeFlag","mwiLink","mwiReceived","MWI_ERROR","MWI_CHANGE","lastUpdated","newMessagesWaiting","totalVoice","unheardVoice","voice","fax","multimedia","mwiApi","voicemail","getMwi","mwiEventChannel","mwiNotificationParams","mwiresponse","errMsg","pushRegistrationSagas","idCacheLength","incomingCallNotificationMode","pushRegistration","enableWebsocketChannelEntry","processNotification","newChannelState","notificationApi","process","registerApplePush","deferredResult","registerAndroidPush","unregisterApplePush","registrationInfo","unregisterAndroidPush","enableWebsocket","NOTI_ERROR","NOTI_CHANGE","NOTI_RECEIVED","applePushRegistrationEntry","androidPushRegistrationEntry","applePushUnregisterEntry","androidPushUnregisterEntry","registerPushDeviceToken","unregisterPushDeviceToken","normalizeSDP","enableWebsocketChannel","queue","externalNotifications","notificationId","formattedPayload","ids","duplicate","eventId","sdpFormat","sdpCompressedBytes","atob","buf","ArrayBuffer","bufView","Uint8Array","strLen","sdpUnCompressedBytes","eventDataResponse","linkPresence","augmentedApi","newApi","statuses","activities","presenceApi","storedUsers","selectors","getSelf","loading","userIds","presenceContact","presenceObject","person","activityValue","overridingWillingnessValue","other","updatedUsers","presenceUpdateSaga","presenceGetSaga","presenceSubscribeSaga","presenceUnsubscribeSaga","presenceReceivedSaga","receivePresence","updatePresenceRequest","watchPresenceRequest","presenceWatcherResponse","wsAction","presenceWatcherNotificationParams","presenceRequest","presenceResponse","presenceWatcherRequest","userList","presenceError","SELF_CHANGE","getDetails","sip","subscribedUsers","eventInfo","receiveEventNotify","startsWith","eventSubscriptionRequest","eventSubscriptionResponse","finishAction","sipEventResub","shouldResub","unsubAction","receiveEventNotifyPattern","genericNotification","genericNotificationParams","sessiondataType","targetcall","subscriptionChange","change","EVENT_ERROR","EVENT_SUBSCRIPTION_CHANGED","unsubscribedUsers","EVENT_RECEIVED","links","usersLink","contactRequest","getDirectory","fetchUserLocale","userActions","contactActions","contactsEvents","usersEvents","addressBookEntries","localContactFromRemote","contactData","addressBookRequest","remoteContactFromLocal","encodeURIComponent","contactRestObject","searchCriteria","searchType","searchTypeInteger","directoryItems","localUserFromRemote","fetchSelf","userData","userProfile","currentLocale","extraURL","errorMessage","addressBookResponse","criteria","criteriaType","userProfileData","acceptLanguage","nickname","usersAPI","contactsAPI","objectToUse","contactsReducers","usersReducers","contactsPendingReducer","contactNewEvent","contactsChangeEvent","addContactFinishActions","pluginFactory","linkRequest","ucRequest","cpaasRequest","watchRequests","authorizations","handleRequest","__testonly__","responseTypes","blob","none","validateOptions","fetchOptions","makeResponse","ok","parseBody","contentType","responseBody","invalidUrlMessage","invalidResponseType","expectedType","apiResponse","httpResponse","linkAuthorization","ucAuthorization","cpaasAuthorization","authIssues","getStatusCode","REQUEST_ERROR","oldCallstack","codecStringsToRemove","finalRemoveList","filteredRtp","rtp","relevantCodecs","relevantCodec","fmtpParams","fmtp","isNumber","payloads","rtcpFb"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AACtD;AACuE;AACxF;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,IAAI,KAAqE,EAAE,EAQ1E;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAQ;;AAEV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6lBAA6lB;;AAE7lB;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAqC,EAAE,EAI1C;;AAEL,kDAAkD,uEAAW;AAC7D;AACA,KAAK;AACL;AACA;AACA;AACA,iBAAiB,qEAAS;AAC1B;AACA;AACA,iBAAiB,uEAAW;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,KAAqC,EAAE,EAI1C;;AAEH;AACA;AACA,gBAAgB,oEAAK;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,yEAAa;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,OAAO,8DAAE;AAC3B;;AAEA;AACA,SAAS,qEAAM;AACf;;AAEA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,0BAA0B,0FAAQ,GAAG;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,MAAM,KAAyD,EAAE,EAE9D;;AAEH,MAAM,sEAAO;AACb;AACA;AACA,KAAK;AACL;;AAEA,MAAM,wEAAS,sBAAsB,uEAAQ,sBAAsB,sEAAO;AAC1E;AACA;AACA;AACA,KAAK;AACL;;AAEA,MAAM,sEAAO;AACb;AACA;AACA,KAAK;AACL;;AAEA,MAAM,KAAqC,EAAE,EAE1C;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAQ1C;;AAEH,MAAM,oEAAK;AACX,uBAAuB;;AAEvB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,sBAAsB,+DAAQ;;AAE9B,MAAM,mEAAI;AACV;AACA;;AAEA;AACA;;AAEA,MAAM,oEAAK;AACX;AACA;AACA,cAAc,+DAAQ;AACtB,GAAG,UAAU,qEAAM;AACnB;AACA;AACA,cAAc,+DAAQ,oCAAoC,YAAY;AACtE,GAAG;AACH,wBAAwB,2DAAI;AAC5B;AACA;;AAEA,iBAAiB,qEAAM;AACvB,uBAAuB,2DAAI;AAC3B;AACA;;AAEA,YAAY,2DAAI,+DAA+D,YAAY;AAC3F;;AAEA;AACA;AACA;;AAEA,MAAM,mEAAI;AACV;AACA,GAAG;AACH,QAAQ,oEAAK;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,mBAAmB,qEAAM,QAAQ,mEAAI;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA,MAAM,KAAqC,EAAE,aAI1C;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAK1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAY1C;;AAEH;AACA;AACA;AACA;AACA,kBAAkB,6EAAiB;AACnC;;AAEA,MAAM,KAAqC,EAAE,EAY1C;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,MAAM,KAAyD,EAAE,EAG9D;;AAEH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,MAAM,KAAqC,EAAE,EAO1C;;AAEH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iCAAiC;AACjC;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;AACA;AACA;AACA,gBAAgB,mEAAM;;AAE26B;;;;;;;;ACzqBj8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuE;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gEAAI;AACpB;AACA;AACA,wBAAwB,uEAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qEAAS;AACpC;AACA;AACA,oBAAoB,8DAAE;AACtB;;AAEgM;;;;;;;AC7DhM,QAAQ,mBAAO,CAAC,GAAc;AAC9B,iBAAiB,mBAAO,CAAC,GAAmB;;;;;;;;;;;;;;;ACD5C;;;;AACA;;;;;;AAEA;AACO,MAAMA,oCAAc,eAApB;;AAEP;;;;;AAKA;;;;;AAKA,MAAMC,UAAU,2BAAcC,gBAAd,CAAhB;AACO,MAAMC,kCAAaF,OAAnB,C;;;;;;;ACjBM;;AAEb;;AAEA,cAAc,mBAAO,CAAC,EAA0B;;AAEhD;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtB6B;AACe;AAC6B;AAC+F;AAC0J;AACrS;;AAE7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,4CAAO;AACb;AACA;;AAEA,MAAM,mDAAc;AACpB;AACA;;AAEA,MAAM,yCAAI;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,iCAAY;AACrB;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,gCAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,wBAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,gCAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,wBAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa,gCAAM;AACnB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,gCAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,wBAAI;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA;AACA,WAAW,gCAAa,UAAU,gCAAO;AACzC;;AAEA;AACA;AACA;AACA,aAAa,gCAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa,wBAAI;AACjB;AACA;;AAEA;AACA;AACA,WAAW,gCAAK;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,wBAAI;AACf;AACA;AACA;AACA,WAAW,gCAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA;AACA,WAAW,gCAAI;AACf;AACA;AACA;AACA,WAAW,gCAAI;AACf,cAAc,gCAAI;AAClB,gBAAgB,gCAAK;AACrB,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,wBAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,IAAI,yCAAkB;AACtB,EAAE,gCAAK,mBAAmB,qCAAQ;AAClC,EAAE,gCAAK,SAAS,qCAAQ;AACxB;;AAEA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,wFAAwF,aAAa;AACrG;AACA;;AAEA,SAAS,wBAAI;AACb;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,wBAAI;AACb;AACA;AACA,MAAM,KAAqC,EAAE,EAE1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,wBAAI;AACb;AACA;AACA,MAAM,KAAqC,EAAE,EAG1C;;AAEH,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,wBAAI;AACb;AACA;AACA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,wBAAI;AACb;AACA;AACA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,wBAAI;AACb;;AAEkJ;;;AC7bzG;;;;;;;;ACAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;;AAGA;AACA;AACA;AACA;;AAEA,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,OAAO,qBAAY;AACxB;AACA,KAAK;AACL,GAAG;AACH;AACA;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG,QAAQ,qBAAY;AACvB;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,GAAG,aAAa;;AAEhB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oEAAoE;AACpE;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;;;AAGA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;;AAEA,QAAQ,KAAqC,EAAE,EAI1C;;AAEL;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;;AAEA;;AAEA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAQ,KAAqC,EAAE,uBAM1C;;AAEL;AACA;;AAEA,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;;AAEA;AACA,4EAA4E,aAAa;AACzF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,8BAA8B;AAC9B;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,IAAI,KAA6G,EAAE,EAElH;;AAE+H;;;ACtpBhI;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;;AAEA;AACA;;AAEe,oEAAQ,EAAC;AACG;;;;;;ACnBwH;AACvF;AACF;AAC0C;AACsF;AAC0d;AACvlB;AAC7B;AACY;AACf;;AAE7B,IAAI,yBAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,EAAE,yBAAK;;AAEP;AACA;AACA,IAAI,yBAAK;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,IAAI,yBAAK;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAAS,yBAAK;AACd;AACA;;AAEA,+BAA+B,yBAAK;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,2BAAO;AACpB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4BAAQ;AACZ,SAAS,wBAAK;AACd;AACA,SAAS,2BAAO;AAChB;AACA,yCAAyC,4BAAQ,GAAG,2CAAQ,qBAAqB,0CAAO,oBAAoB,mDAAc,qBAAqB,yCAAI,wBAAwB,2CAAQ;;AAEnL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,kDAAgB;AACxB;AACA,IAAI,yBAAK;AACT,yBAAyB,kDAAgB;AACzC;AACA;AACA;AACA;AACA,SAAS,2BAAO;AAChB;AACA,eAAe,gCAAS;AACxB;;AAEA;AACA;;AAEA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;AACA,YAAY,gCAAW;AACvB;;AAEA;AACA,YAAY,gCAAW;AACvB;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAG1C;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAG1C;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,QAAQ,iCAAM;AACd;AACA;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAG1C;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAE1C;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gCAAI;AACjB;;AAEA;AACA;AACA,aAAa,2BAAO;;AAEpB;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,yCAAI;AACZ;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,yBAAK;AACb;AACA;AACA;;AAEA;AACA,GAAG;;AAEH,MAAM,KAAqC,EAAE,EAE1C;;AAEH,gBAAgB,gCAAI;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,gCAAW;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAE1C;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,kBAAkB,OAAO,2CAAS;AAClC,QAAQ,KAAqC,EAAE,EAG1C;;AAEL;AACA;AACA;;AAEA,QAAQ,yBAAK;AACb;AACA;AACA;;AAEA;;AAEA,wCAAwC,SAAS;AACjD;;AAEA,gBAAgB,uCAAK;AACrB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gBAAgB,4BAAQ;AACxB;;AAEA,QAAQ,KAAqC,EAAE,EAE1C;;AAEL;AACA;AACA;AACA;;AAEA,OAAO,uCAAK;AACZ;AACA;AACA,gBAAgB,gCAAI;AACpB;AACA,MAAM,iCAAM;AACZ,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,cAAc,6CAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,wCAAM;;AAEpC,MAAM,yCAAI;AACV;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,gCAAW;AACpB;;AAEA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA,yCAAyC;;AAEzC,QAAQ,6CAAQ;AAChB;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA,iBAAiB,4CAAO;AACxB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,iCAAY;AACvB,GAAG;AACH;AACA;AACA,WAAW,iCAAY;AACvB;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,mBAAmB,4CAAO;AAC1B;AACA,KAAK;AACL;AACA;AACA,GAAG,EAAE;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,yBAAK;AACb,SAAS,2CAAS;AAClB;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,6CAAQ,YAAY,2BAAO;AACpD,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA;;AAEA,QAAQ,4CAAO;AACf;AACA;AACA;;AAEA,QAAQ,6CAAQ;AAChB;AACA,+CAA+C,gCAAW;AAC1D;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,UAAU,0CAAK;AACf;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG,EAAE;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,iCAAM;AAC1C;;AAEA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA,MAAM,0CAAO;AACb;AACA;AACA;AACA;;AAEA,yBAAyB,gCAA4B;AACrD;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,mDAAiB;AACvC;AACA,GAAG,UAAU,0CAAO;AACpB;AACA,GAAG;AACH;AACA;;AAEA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO,0CAAO,mBAAmB;AACjC;AACA;;AAEA,uBAAuB,gCAA4B;AACnD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,0CAAO,YAAY,gCAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,iCAAc;AACjC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,yBAAI;AAC3B;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,2BAAO;AACpB,cAAc,2BAAO;;AAErB;AACA,SAAS,yBAAK;AACd;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,gCAAiB;AACnB;AACA;;AAEA,4CAA4C,mBAAmB,wBAAI,oCAAoC,wBAAG,mCAAmC,wBAAG,mCAAmC,wBAAI,oCAAoC,wBAAI,oCAAoC,wBAAG,mCAAmC,wBAAI,oCAAoC,wBAAI,oCAAoC,wBAAQ,sCAAsC,wBAAM,sCAAsC,wBAAc,uCAAuC,wBAAW,yCAAyC,wBAAK,qCAAqC,wBAAW,0CAA0C,wBAAW;;AAEtqB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAM,iCAAM;AACZ,kBAAkB,yBAAI;;AAEtB;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,yBAAI;AACnB;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,iCAAW;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,iCAAO;AAC9B;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI,6BAAS;AACb;AACA;AACA,EAAE,6BAAS;AACX;AACA;AACA;AACA,EAAE,6BAAS;AACX,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA,mDAAmD;AACnD,6BAA6B,oCAAoC,GAAG;AACpE,4BAA4B;AAC5B,2BAA2B;AAC3B;;AAEA,IAAI,4BAAQ;AACZ,kBAAkB,6BAAS;AAC3B,mBAAmB,6BAAS;AAC5B;AACA;AACA;AACA;AACA,GAAG,2BAA2B,6BAAS;AACvC;;AAEA;AACA;;AAEA;AACA,WAAW,yBAAI;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB,UAAU,6CAAW;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,6CAAW;AAChC;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,wBAAwB,4BAAQ,GAAG;AACnC;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,QAAQ,KAAqC,EAAE,EAE1C;;AAEL,IAAI,gCAAiB;AACrB;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,uBAAQ;;AAE1B;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,wBAAwB,QAAQ,sCAAI;AACpC;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA,MAAM,KAAwE,EAAE,EAE7E;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,yBAAI;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,6CAAW;AACtB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,GAAG;;;AAGH,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa,iDAAiD;AAC9D,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC;;AAEvC;AACA,OAAO,UAAU,iCAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,yCAAI,wCAAwC,6CAAW;AACxE;AACA,iBAAiB,6CAAW;AAC5B;AACA,OAAO,UAAU,iCAAe;AAChC;AACA,iBAAiB,yCAAI;AACrB;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAO;AACf;AACA,KAAK,UAAU,6CAAQ;AACvB;AACA;AACA;AACA;AACA,KAAK,2BAA2B,oCAAE;AAClC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;;AAEtB;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,yBAAI,CAAC;;AAEvB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL,oBAAoB,yBA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;AACA,sDAAsD,GAAG;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA,uEAAuE;AACvE;;AAEA,2EAA2E;;AAE3E,6DAA6D;;AAE7D;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;;AAEvB,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,sBAAsB;;AAEtB,mCAAmC;;AAEnC,6BAA6B;;AAE7B,iCAAiC;;AAEjC,2BAA2B;;AAE3B,iBAAiB,OAAO;AACxB;AACA;;AAEA,gBAAgB,qBAAS;AACzB;;AAEe,qDAAE,E;;AC9FoB;;AAErC;AACA,OAAO,oBAAQ;AACf;AACA;;AAEA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,2DAAK,E;;AClCmB;AACR;;AAE/B;AACA,0CAA0C;;AAE1C;;AAEA,iBAAiB,gBAAgB;AACjC;AACA;;AAEA;AACA;;AAEO;AACA;AACQ;AACf;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iBAAK;AACvB;;AAEA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,QAAQ;AAC7B;AACA;;AAEA;AACA;;AAEA,WAAW,qBAAS;AACpB,GAAG;;;AAGH;AACA,6BAA6B;AAC7B,GAAG,eAAe;;;AAGlB;AACA;AACA;AACA,C;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,aAAa;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,uDAAG,E;;ACtNS;AACA;AAC3B,SAAS,GAAG,aAAa,eAAG;AACb,qDAAE,E;;ACHU;AACY;;AAEvC;AACA;AACA,+CAA+C,GAAG,IAAI;;AAEtD;AACA,kCAAkC;;AAElC;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA,SAAS,qBAAS;AAClB;;AAEe,qDAAE,E;;ACvBjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,SAAS;AAC5B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,yDAAI,E;;AC/FQ;AACE;AAC7B,SAAS,GAAG,aAAa,gBAAI;AACd,qDAAE,E;;ACHF,8EAAsC,E;;ACAhB;;AAErC,SAAS,eAAO;AAChB,OAAO,oBAAQ;AACf;AACA;;AAEA;AACA;;AAEe,uEAAO,E;;ACVkB;AACA;AACA;AACA;AACE;AACQ;AACE;AACE;;;;;;;;ACPtD;AAAA;AACqC;;AAErC;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,UAAU,IAA6B;AACxC;AACA,CAAC,MAAM,EAEN;;AAED,aAAa,oEAAQ;AACN,+DAAM,EAAC;;;;;;;;;ACjBtB,YAAY,mBAAO,CAAC,GAAe;;AAEnC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACpBA,kBAAkB,mBAAO,CAAC,EAAgB,MAAM,mBAAO,CAAC,EAAU;AAClE,+BAA+B,mBAAO,CAAC,EAAe,gBAAgB,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD,UAAU,mBAAO,CAAC,EAAQ;AAC1B,gBAAgB,mBAAO,CAAC,EAAe;AACvC,mBAAmB,mBAAO,CAAC,GAAmB;AAC9C,eAAe,mBAAO,CAAC,EAAe;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA,cAAc,mBAAO,CAAC,GAAiB;AACvC,iBAAiB,mBAAO,CAAC,GAAoB;AAC7C,eAAe,mBAAO,CAAC,EAAkB;AACzC,cAAc,mBAAO,CAAC,GAAiB;AACvC,mBAAmB,mBAAO,CAAC,GAAsB;;AAEjD,aAAa,mBAAO,CAAC,GAAoB;AACzC,YAAY,mBAAO,CAAC,GAAmB;;AAEvC;;AAEA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,eAAe,+BAA+B;;AAE9C;AACA;AACA,qEAAqE;;AAErE;;AAEA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA,WAAW,0DAA0D;AACrE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,WAAW,eAAe;AACrC,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,WAAW;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,WAAW,gBAAgB;AAC3B,aAAa,MAAM;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA,oCAAoC,uCAAuC;AAC3E;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,MAAM;AACnB,cAAc,OAAO;AACrB,cAAc,gBAAgB;AAC9B,cAAc,gBAAgB;AAC9B,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,O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O,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,kBAAkB;AACzB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wCAAwC,UAAU;AAClD,gCAAgC;AAChC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qCAAqC,eAAe,WAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC,aAAa;AAC7C,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sCAAsC;AACtC,0BAA0B;AAC1B,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC,EAAE;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AA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;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA,WAAW,IAAI;AACf;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;;AAEA,SAAS,iBAAW;AACpB;;AAEA;AACA,oBAAoB,KAAqC,+BAA+B,SAA4Q;AACpW;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,KAAqC,+BAA+B,SAAuF;AACjL;;AAEA,oBAAoB,iBAAW;AAC/B;;AAEA;AACA,oBAAoB,KAAqC,+BAA+B,SAA0F;AAClL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;;;AAGA;AACA;AACA,sBAAsB,KAAqC,+BAA+B,SAAgN;AAC1S;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;;;AAGA;AACA;AACA,sBAAsB,KAAqC,+BAA+B,SAAuF;AACjL;;AAEA;AACA,sBAAsB,KAAqC,+BAA+B,SAAgU;AAC1Z;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,KAAqC,+BAA+B,SAA2J;AACvP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA,sBAAsB,KAAqC,+BAA+B,SAAga;AAC1f;;AAEA;AACA,sBAAsB,KAAqC,+BAA+B,SAA4G;AACtM;;AAEA;AACA,sBAAsB,KAAqC,+BAA+B,SAAoC;AAC9H;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;;AAGA;AACA;AACA,sBAAsB,KAAqC,gCAAgC,SAAuF;AAClL;;AAEA,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAqC,gCAAgC,SAAsF;AACrL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,GAAG,aAAa;;AAEhB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,KAAqC,gCAAgC,SAA0U;AACra;;AAEA;AACA;AACA,KAAK;AACL,sBAAsB,KAAqC,gCAAgC,SAAqd;AAChjB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;;;AAGA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;;AAEA,QAAQ,KAAqC,EAAE,EAI1C;;AAEL;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;;AAEA;;AAEA,MAAM,KAAqC,EAAE,EAE1C;;AAEH;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAQ,KAAqC,EAAE,uBAM1C;;AAEL;AACA;;AAEA,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,KAAqC,gCAAgC,SAAkV;AAC/a;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,KAAqC,gCAAgC,SAAgN;AACzS;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;;AAEA;AACA,4EAA4E,aAAa;AACzF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wBAAwB,KAAqC,gCAAgC,SAA6H;AAC1N;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,aAAa,cAAa,CAAC,cA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AAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,aAAa;AAC1B,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;;;;;;;ACxjBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,aAAa;AAC7B,oBAAoB,aAAa;AACjC,kBAAkB,aAAa;AAC/B,sBAAsB,aAAa;AACnC,kBAAkB,aAAa;AAC/B,sBAAsB,aAAa;AACnC,iBAAiB,aAAa;AAC9B,oBAAoB,aAAa;AACjC,eAAe,aAAa;AAC5B,mBAAmB,aAAa;AAChC,cAAc,aAAa;AAC3B,mBAAmB,aAAa;AAChC,cAAc,aAAa;AAC3B,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrWA;AACA;AACA;AACA,UAAU;AACV;AACA;;;;;;;ACLA,iBAAiB,mBAAO,CAAC,GAAY;;AAErC;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,EAAU;;;;;;;ACHnC;;;;;;;ACAA,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,eAAe,mBAAO,CAAC,EAAkB;AACzC,cAAc,mBAAO,CAAC,GAAiB;;AAEvC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;;;;;;;AClDA;AACA;AACA;AACA;;;;;;;ACHA,mBAAO,CAAC,EAAiC;AACzC,mBAAO,CAAC,EAAgC;AACxC,mBAAO,CAAC,EAA6B;AACrC,mBAAO,CAAC,GAAwB;AAChC,mBAAO,CAAC,GAAgC;AACxC,mBAAO,CAAC,GAA4B;AACpC,iBAAiB,mBAAO,CAAC,CAAkB;;;;;;;ACN3C,gBAAgB,mBAAO,CAAC,EAAe;AACvC,cAAc,mBAAO,CAAC,EAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChBa;AACb,aAAa,mBAAO,CAAC,EAAkB;AACvC,iBAAiB,mBAAO,CAAC,EAAkB;AAC3C,qBAAqB,mBAAO,CAAC,EAAsB;AACnD;;AAEA;AACA,mBAAO,CAAC,EAAS,qBAAqB,mBAAO,CAAC,EAAQ,4BAA4B,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;;ACZa;AACb,uBAAuB,mBAAO,CAAC,GAAuB;AACtD,WAAW,mBAAO,CAAC,GAAc;AACjC,gBAAgB,mBAAO,CAAC,EAAc;AACtC,gBAAgB,mBAAO,CAAC,EAAe;;AAEvC;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACjCA,8BAA8B;;;;;;;;ACAjB;AACb,cAAc,mBAAO,CAAC,EAAY;AAClC,aAAa,mBAAO,CAAC,EAAW;AAChC,UAAU,mBAAO,CAAC,EAAQ;AAC1B,cAAc,mBAAO,CAAC,EAAY;AAClC,cAAc,mBAAO,CAAC,EAAW;AACjC,eAAe,mBAAO,CAAC,EAAc;AACrC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,EAAW;AAC/B,yBAAyB,mBAAO,CAAC,GAAwB;AACzD,WAAW,mBAAO,CAAC,GAAS;AAC5B,gBAAgB,mBAAO,CAAC,GAAc;AACtC,iCAAiC,mBAAO,CAAC,EAA2B;AACpE,cAAc,mBAAO,CAAC,GAAY;AAClC,gBAAgB,mBAAO,CAAC,GAAe;AACvC,qBAAqB,mBAAO,CAAC,GAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,EAAE,mBAAO,CAAC,EAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,EAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E,mBAAO,CAAC,EAAsB;AAC9B,mBAAO,CAAC,GAAgB;AACxB,UAAU,mBAAO,CAAC,CAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD,mBAAO,CAAC,GAAgB;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;AC7RD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA,aAAa,mBAAO,CAAC,EAAW;AAChC,gBAAgB,mBAAO,CAAC,GAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,EAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;ACpEA,aAAa,mBAAO,CAAC,EAAW;AAChC;;AAEA;;;;;;;;ACHA;AACa;AACb,cAAc,mBAAO,CAAC,EAAW;AACjC,WAAW,mBAAO,CAAC,CAAS;AAC5B,aAAa,mBAAO,CAAC,EAAW;AAChC,yBAAyB,mBAAO,CAAC,GAAwB;AACzD,qBAAqB,mBAAO,CAAC,GAAoB;;AAEjD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;ACnBU;AACb;AACA,cAAc,mBAAO,CAAC,EAAW;AACjC,2BAA2B,mBAAO,CAAC,EAA2B;AAC9D,cAAc,mBAAO,CAAC,GAAY;;AAElC,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;ACXH,mBAAO,CAAC,GAA+B;AACvC,iBAAiB,mBAAO,CAAC,CAAqB;;;;;;;ACD9C;AACA,eAAe,mBAAO,CAAC,EAAc;AACrC,YAAY,mBAAO,CAAC,EAAgB;;AAEpC,mBAAO,CAAC,EAAe;AACvB;AACA;AACA;AACA,CAAC;;;;;;;;ACRY;AACb,wBAAwB,mBAAO,CAAC,GAAmB;AACnD,wBAAwB,mBAAO,CAAC,GAAsB;AACtD,qBAAqB,mBAAO,CAAC,GAAgB;AAC7C,qBAAqB,mBAAO,CAAC,GAAY;;AAEzC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,wDAAwD,0CAA0C;AAClG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,yDAAyD,YAAY;;AAErE;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;;AAEA;AACA;AACA,aAAa,2GAA2G;AACxH;;AAEA,WAAW,IAAI,EAAE,YAAY,EAAE,KAAK;AACpC;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF,QAAQ,+BAA+B;AACvC;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;;;;;;;;AC9ba;AACb,6EAA6E,2CAA2C;;;;;;;;ACD3G;AACb,uBAAuB,EAAE;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AAC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CnC,eAAe,mBAAO,CAAC,EAAc;AACrC,eAAe,mBAAO,CAAC,EAAc;AACrC,eAAe,mBAAO,CAAC,EAAc;AACrC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,iBAAiB,mBAAO,CAAC,EAAkB;AAC3C,cAAc,mBAAO,CAAC,EAAkB;AACxC,cAAc,mBAAO,CAAC,GAAoB;AAC1C,YAAY,mBAAO,CAAC,GAAgB;AACpC,YAAY,mBAAO,CAAC,EAAgB;AACpC,UAAU,mBAAO,CAAC,EAAc;AAChC,YAAY,mBAAO,CAAC,EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,GAAgB;AAC1B,EAAE,mBAAO,CAAC,EAAe;AACzB;;AAEA,sBAAsB,mBAAO,CAAC,EAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,8CAA8C,YAAY,EAAE;;AAE5D;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,EAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrPA;AACA,cAAc,mBAAO,CAAC,EAAgB;AACtC,WAAW,mBAAO,CAAC,EAAgB;AACnC,UAAU,mBAAO,CAAC,EAAe;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACdA;AACA,gBAAgB,mBAAO,CAAC,EAAe;AACvC,WAAW,mBAAO,CAAC,GAAgB;AACnC,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA,UAAU,mBAAO,CAAC,EAAe;AACjC,iBAAiB,mBAAO,CAAC,EAAkB;AAC3C,gBAAgB,mBAAO,CAAC,EAAe;AACvC,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,UAAU,mBAAO,CAAC,EAAQ;AAC1B,qBAAqB,mBAAO,CAAC,GAAmB;AAChD;;AAEA,YAAY,mBAAO,CAAC,EAAgB;AACpC;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;;;;;;;ACfA,mBAAO,CAAC,EAAe;;;;;;;ACAvB,mBAAO,CAAC,EAAe;;;;;;;;;;;;;;;;;;kBCaCE,Y;;AAbxB;;AACA;;AACA;;;;;;AAEA;;;;;;;;;AASe,SAASA,YAAT,CAAuB7pC,MAAvB,EAA+BpG,UAAU,EAAzC,EAA6C;AAC1D;AACA,QAAM2U,QAAQ,4BAAW3U,QAAQ2U,KAAnB,CAAd;AACA,QAAMrO,UAAU,8BAAatG,QAAQsG,OAArB,CAAhB;;AAEA;;;;;;;AAOA,QAAMO,SAAS;AACbT,UADa;AAEbuO,SAFa;AAGbrO;;AAGF;;;;;;;;AANe,GAAf,CAcA,SAAS4pC,OAAT,CAAkB5K,MAAlB,EAA0Bzc,QAA1B,EAAoCsnB,WAApC,EAAiD;AAC/C;;;AAGA,WAAO,UAAU,GAAG/tC,IAAb,EAAmB;AACxB;AACA,YAAMguC,YAAYxuB,uBAAYiH,QAAZ,KAAyBjH,uBAAY/a,OAAO8N,KAAnB,CAA3C;AACA;AACA,UAAI,CAACy7B,SAAL,EAAgB;AACd;AACD;;AAED;AACA,YAAM7Z,mCAED4Z,WAFC;AAGJ;AACA7K,cAJI;AAKJ9O,mBAAW7xB,KAAK0rC,GAAL,EALP;AAMJ17B,eAAOkU,QANH;AAOJziB,gBAAQS,OAAOT,MAPX;AAQJ;AACAyvB,kBAAU,CAAC,GAAGzzB,IAAJ;AATN,QAAN;;AAYAyE,aAAOP,OAAP,CAAeiwB,KAAf;AACD,KAtBD;AAuBD;;AAED;;;;;;;;;;AAUA,WAAStF,QAAT,CAAmBtc,KAAnB,EAA0B;AACxB9N,WAAO8N,KAAP,GAAe,4BAAWA,KAAX,CAAf;AACD;;AAED;;;;;;;;;AASA,WAASm7B,QAAT,GAAqB;AACnB,WAAOjpC,OAAO8N,KAAd;AACD;;AAED;;;;;;;;;;;;;AAaA,WAASwc,UAAT,CAAqB7qB,OAArB,EAA8B;AAC5BO,WAAOP,OAAP,GAAiB,8BAAaA,OAAb,CAAjB;AACD;;AAED;;;;;;;;;AASA,WAASypC,UAAT,GAAuB;AACrB,WAAOlpC,OAAOP,OAAd;AACD;;AAED,QAAMknC,MAAM;AACVuC,cADU;AAEV5e,cAFU;AAGV2e,YAHU;AAIV7e,YAJU;AAKV,QAAItvB,IAAJ,GAAY;AACV,aAAOkF,OAAOT,MAAP,CAAczE,IAArB;AACD,KAPS;AAQV,QAAIgU,EAAJ,GAAU;AACR,aAAO9O,OAAOT,MAAP,CAAcuP,EAArB;AACD,KAVS;AAWV,QAAIjS,IAAJ,GAAY;AACV,aAAOmD,OAAOT,MAAP,CAAc1C,IAArB;AACD;AAbS,GAAZ;;AAgBA;AACA,OAAK,MAAM4hC,MAAX,IAAqBzjB,qBAArB,EAAiC;AAC/B2rB,QAAIlI,MAAJ,IAAc4K,QAAQ5K,MAAR,EAAgBzjB,sBAAWyjB,MAAX,CAAhB,CAAd;AACD;;AAED;AACA;AACA;AACA,QAAMgL,UAAU,CAAC9sC,OAAD,EAAUuwB,IAAV,KAAmBmc,QAAQnc,KAAKkV,KAAb,EAAoB7mB,oBAApB,EAA+B,EAAEmuB,OAAOxc,IAAT,EAA/B,EAAgDvwB,OAAhD,CAAnC;AACA,QAAMgtC,WAAW,CAAChtC,OAAD,EAAUuwB,IAAV,KAAmBmc,QAAQ,MAAR,EAAgB7uB,qBAAUI,IAA1B,EAAgC,EAAE8uB,OAAOxc,IAAT,EAAhC,EAAiDvwB,OAAjD,CAApC;AACA,QAAM+sC,QAAQ,qBAAYD,OAAZ,EAAqBE,QAArB,CAAd;;AAEA,oCACKhD,GADL,EAEK+C,KAFL;AAID,C;;;;;;;;;;;;kBClJuBE,W;;AAXxB;;AAEA;;;;;;;;;AASe,SAASA,WAAT,CAAsBrhC,GAAtB,EAA2B4S,IAA3B,EAAiC;AAC9C;AACA;AACA,gCAAa5S,GAAb;AACA,gCAAa4S,IAAb;;AAEA;;;;AAIA,QAAM0uB,SAAS,EAAf;;AAEA;;;;;;AAMA,WAASC,IAAT,CAAejtC,IAAf,EAAqB;AACnB,UAAM2sC,MAAM1rC,KAAK0rC,GAAL,EAAZ;AACA;AACA,UAAMtc,OAAO;AACXkV,aAAO,MADI;AAEXvlC;AAFW,KAAb;;AAKA,QAAIgtC,OAAOxqC,cAAP,CAAsBxC,IAAtB,CAAJ,EAAiC;AAC/BqwB,WAAK3f,KAAL,GAAas8B,OAAOhtC,IAAP,CAAb;AACAse,WAAM,SAAQte,IAAK,mBAAnB,EAAuCqwB,IAAvC;AACD,KAHD,MAGO;AACL;AACA2c,aAAOhtC,IAAP,IAAe2sC,GAAf;;AAEAtc,WAAK3f,KAAL,GAAai8B,GAAb;AACAjhC,UAAK,SAAQ1L,IAAK,WAAlB,EAA8BqwB,IAA9B;AACD;AACF;;AAED;;;;;AAKA,WAAS6c,OAAT,CAAkBltC,IAAlB,EAAwB;AACtB,UAAM2sC,MAAM1rC,KAAK0rC,GAAL,EAAZ;AACA;AACA,UAAMtc,OAAO;AACXkV,aAAO,SADI;AAEXvlC,UAFW;AAGX0Q,aAAOs8B,OAAOhtC,IAAP;AAHI,KAAb;;AAMA,QAAIgtC,OAAOxqC,cAAP,CAAsBxC,IAAtB,CAAJ,EAAiC;AAC/B,YAAM0Q,QAAQs8B,OAAOhtC,IAAP,CAAd;AACA;AACA,aAAOgtC,OAAOhtC,IAAP,CAAP;;AAEA,YAAMmtC,UAAUR,MAAMj8B,KAAtB;AACA2f,WAAKiH,GAAL,GAAWqV,GAAX;AACAtc,WAAK8c,OAAL,GAAeA,OAAf;;AAEAzhC,UAAK,SAAQ1L,IAAK,kBAAiBmtC,OAAQ,KAA3C,EAAiD9c,IAAjD;AACD,KAVD,MAUO;AACL/R,WAAM,SAAQte,IAAK,wBAAnB,EAA4CqwB,IAA5C;AACD;AACF;;AAED;;;;;;AAMA,WAASuc,OAAT,CAAkB5sC,IAAlB,EAAwB;AACtB,UAAM2sC,MAAM1rC,KAAK0rC,GAAL,EAAZ;AACA;AACA,UAAMtc,OAAO;AACXkV,aAAO,SADI;AAEXvlC,UAFW;AAGX0Q,aAAOs8B,OAAOhtC,IAAP;AAHI,KAAb;;AAMA,QAAIgtC,OAAOxqC,cAAP,CAAsBxC,IAAtB,CAAJ,EAAiC;AAC/B,YAAMmtC,UAAUR,MAAMK,OAAOhtC,IAAP,CAAtB;AACAqwB,WAAKt1B,KAAL,GAAa4xC,GAAb;AACAtc,WAAK8c,OAAL,GAAeA,OAAf;;AAEAzhC,UAAK,SAAQ1L,IAAK,cAAamtC,OAAQ,YAAvC,EAAoD9c,IAApD;AACD,KAND,MAMO;AACL/R,WAAM,SAAQte,IAAK,wBAAnB,EAA4CqwB,IAA5C;AACD;AACF;;AAED,SAAO;AACL4c,QADK;AAELC,WAFK;AAGLN;AAHK,GAAP;AAKD,C;;;;;;;;;;;;kBCtGuBV,iB;;AAPxB;;;;;;AACA;;;;;;AAMe,SAASA,iBAAT,CAA4BrZ,KAA5B,EAAmC;AAChD,MAAI,EAAE+O,MAAF,KAAa/O,KAAjB;;AAEA;AACA;AACA,MAAI+O,OAAO/f,QAAP,CAAgB,MAAhB,CAAJ,EAA6B;AAC3B+f,aAAS,OAAT;AACD;;AAED,QAAMwL,kBAAkB,4BAAoBva,KAApB,CAAxB;AACA,QAAMwa,OAAOxa,MAAMV,QAAN,CAAe3uB,KAAf,CAAqB,CAArB,CAAb;AACAiI,UAAQm2B,MAAR,EAAgBwL,eAAhB,EAAiC,GAAGC,IAApC;AACD,C;;;;;;;;;;;;kBC6BuBha,oB;AAhDxB;;;;AAIA,SAASia,QAAT,CAAmBza,KAAnB,EAA0B;AACxB,QAAM,EAAEC,SAAF,EAAa7hB,KAAb,KAAuB4hB,KAA7B;AACA,QAAMI,UAAW,GAAEH,SAAU,eAAc7hB,KAAM,EAAjD;;AAEA,MAAI,CAACs8B,OAAD,EAAUpvC,OAAV,IAAqB00B,MAAMV,QAA/B;;AAEA,MAAIvlB,MAAJ;AACA,MAAI4gC,QAAQ,EAAZ;AACA,MAAID,QAAQ1rB,QAAR,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B;AACAjV,aAAU,GAAEqmB,OAAQ,MAAKsa,QAAQjgB,WAAR,EAAsB,EAA/C;AACD,GAHD,MAGO,IAAIigB,QAAQ1rB,QAAR,CAAiB,OAAjB,KAA6B0rB,QAAQ1rB,QAAR,CAAiB,SAAjB,CAA7B,IAA4D0rB,QAAQ1rB,QAAR,CAAiB,OAAjB,CAAhE,EAA2F;AAChG;AACAjV,aAAU,GAAEimB,MAAMV,QAAN,CAAe,CAAf,CAAkB,KAAIU,MAAMV,QAAN,CAAe,CAAf,CAAkB,EAApD;AACAqb,YAAQ3a,MAAMV,QAAN,CAAe,CAAf,CAAR;AACAh0B,cAAU00B,MAAMV,QAAN,CAAe,CAAf,CAAV;AACD,GALM,MAKA,IAAIob,QAAQ1rB,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AACtC;AACAjV,aAAU,GAAEimB,MAAMV,QAAN,CAAe,CAAf,CAAkB,KAAIU,MAAMV,QAAN,CAAe,CAAf,CAAkB,EAApD;AACAqb,YAAQ3a,MAAMV,QAAN,CAAe,CAAf,CAAR;AACAh0B,cAAW,GAAE00B,MAAMV,QAAN,CAAe,CAAf,CAAkB,IAAGU,MAAMV,QAAN,CAAe,CAAf,CAAkB,IAAGU,MAAMV,QAAN,CAAe,CAAf,CAAkB,EAAzE;AACD,GALM,MAKA,IAAIob,QAAQ1rB,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AACtC;AACAjV,aAAU,GAAEqmB,OAAQ,YAApB;AACA90B,cAAU,EAAV;AACD,GAJM,MAIA;AACL;AACAyO,aAAU,GAAEqmB,OAAQ,MAAK90B,QAAQF,IAAK,MAAKsvC,OAAQ,EAAnD;AACD;;AAED,SAAO,EAAE3gC,MAAF,EAAU4gC,KAAV,EAAiBrvC,OAAjB,EAAP;AACD;;AAED;;;;;;;;;;;AAWe,SAASk1B,oBAAT,CAA+BR,KAA/B,EAAsC;AACnD;AACA,MAAI,CAAC,OAAD,EAAU,gBAAV,EAA4BhR,QAA5B,CAAqCgR,MAAM+O,MAA3C,CAAJ,EAAwD;AACtDn2B,YAAQonB,MAAM+O,MAAd,EAAsB,GAAG/O,MAAMV,QAA/B;AACA;AACD,GAHD,MAGO,IAAIU,MAAM+O,MAAN,KAAiB,UAArB,EAAiC;AACtCn2B,YAAQ+S,QAAR;AACA;AACD;;AAED,QAAM,EAAE5R,MAAF,EAAU4gC,KAAV,EAAiBrvC,OAAjB,KAA6BmvC,SAASza,KAAT,CAAnC;AACApnB,UAAQonB,MAAM+O,MAAd,EAAsBh1B,MAAtB,EAA8B4gC,KAA9B,EAAqCrvC,OAArC;AACD,C;;;;;;AC5DD,WAAW,mBAAO,CAAC,CAAqB;AACxC,uCAAuC,4BAA4B;AACnE,yCAAyC;AACzC;AACA;;;;;;;;ACJA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2FAA2F,aAAa;AACxG;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;;AAEA;AACA,0EAA0E,aAAa;AACvF;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEe,kEAAG,EAAC;;;;;;;;;;;;;;AC5pBnB;;;;AACA;;;;AACA;;;;;;AAEA;;;;kBAIe,CACb,EAAE6B,MAAM,MAAR,EAAgB0nC,IAAIxX,gBAApB,EADa,EAEb,EAAElwB,MAAM,QAAR,EAAkB0nC,IAAIptC,gBAAtB,EAFa,EAGb,EAAE0F,MAAM,QAAR,EAAkB0nC,IAAI+F,gBAAtB,EAHa,C;;;;;;;;;;;;;;;;;;;;;kBCwBSC,S;;AApBxB;;;;AACA;;;;AACA;;IAAYxhC,O;;AAEZ;;AACA;;AACA;;;;AAGA;;AACA;;AAGA;;AACA;;AACA;;AAGA;;;;;;AANA;;;AAJA;AApBA;;;;;;;;;;;AAWA;AAqBe,SAASwhC,SAAT,CAAoBpxC,UAAU,EAA9B,EAAkC;AAC/C,QAAM0D,OAAO,MAAb;;AAEA,QAAMmD,SAASzJ,kBAAW2J,SAAX,CAAqB,MAArB,CAAf;;AAEA;AACA,MAAI/G,QAAQsG,OAAR,IAAmB,OAAOtG,QAAQsG,OAAf,KAA2B,UAAlD,EAA8D;AAC5D,WAAOtG,QAAQsG,OAAf;AACAO,WAAOmb,IAAP,CAAY,oEAAZ;AACD;;AAED;AACA,MAAIhiB,QAAQ6oB,QAAR,IAAoB,CAAC,oBAAYxH,sBAAZ,EAAuBkE,QAAvB,CAAgCvlB,QAAQ6oB,QAAR,CAAiBmI,WAAjB,EAAhC,CAAzB,EAA0F;AACxF,WAAOhxB,QAAQ6oB,QAAf;AACAhiB,WAAOmb,IAAP,CAAY,kEAAZ;AACD;;AAEDhiB,YAAU,wBAAY7C,sBAAZ,EAA4B6C,OAA5B,CAAV;;AAEA;AACA,MAAIA,QAAQ62B,UAAR,KAAuB,KAA3B,EAAkC;AAChC,QAAI72B,QAAQ62B,UAAR,YAA8Bwa,MAAlC,EAA0C;AACxCrxC,cAAQ62B,UAAR,GAAqB,wBAAYC,gCAAZ,EAAsC92B,QAAQ62B,UAA9C,CAArB;AACD,KAFD,MAEO;AACL72B,cAAQ62B,UAAR,GAAqBC,gCAArB;AACD;AACF;;AAED;AACA;AACA15B,oBAAW6zB,QAAX,CAAoBjxB,QAAQ6oB,QAA5B;AACA,MAAI7oB,QAAQsG,OAAZ,EAAqB;AACnBlJ,sBAAW+zB,UAAX,CAAsBnxB,QAAQsG,OAA9B;AACD;;AAED,wBAAclJ,kBAAW4yC,UAAX,EAAd,EAAuC/B,OAAvC,CAA+CpnC,UAAU;AACvDA,WAAOoqB,QAAP,CAAgBjxB,QAAQ6oB,QAAxB;AACA,QAAI7oB,QAAQsG,OAAZ,EAAqB;AACnBO,aAAOsqB,UAAP,CAAkBnxB,QAAQsG,OAA1B;AACD;AACF,GALD;;AAOA,YAAW8nC,IAAX,CAAiB,EAAEkD,MAAF,EAAjB,EAA6B;AAC3B;AACA;AACA,UAAM,kBAAI,sBAAatxC,OAAb,EAAsB0D,IAAtB,CAAJ,CAAN;AACA;AACA,UAAM,kBAAIkM,QAAQshB,aAAR,CAAsB,wBAAY9zB,iBAAZ,CAAtB,CAAJ,CAAN;;AAEA;AACA,QAAIk0C,MAAJ,EAAY;AACV;AACA;AACA,YAAMC,mBAAmBD,OAAOE,QAAP,CAAgB5d,IAAzC;AACA,UAAI5zB,QAAQsG,OAAZ,EAAqB;AACnBirC,yBAAiBpgB,UAAjB,CAA4BnxB,QAAQsG,OAApC;AACD;AACD,4BAAcirC,iBAAiBvB,UAAjB,EAAd,EAA6C/B,OAA7C,CAAqDpnC,UAAU;AAC7DA,eAAOoqB,QAAP,CAAgBjxB,QAAQ6oB,QAAxB;AACA,YAAI7oB,QAAQsG,OAAZ,EAAqB;AACnBO,iBAAOsqB,UAAP,CAAkBnxB,QAAQsG,OAA1B;AACD;AACF,OALD;AAMD;AACF;;AAED,QAAMmrC,aAAa;AACjB/tC,QADiB;AAEjB6pC,kBAAc,CAAC,MAAD,CAFG;AAGjBa,QAHiB;AAIjBZ,sBAJiB;AAKjBU,+BALiB;AAMjBpB,WAAO,CAAC4E,oBAAD,EAAgBC,sBAAhB;AANU,GAAnB;;AASA3xC,UAAQ6oB,QAAR,GAAmB7oB,QAAQ6oB,QAAR,CAAiBmI,WAAjB,EAAnB;AACA,QAAMC,WAAW5P,uBAAUrhB,QAAQ6oB,QAAlB,CAAjB;AACA;AACA;AACA,MAAIoI,YAAY5P,uBAAUG,IAAtB,IAA8BxhB,QAAQ62B,UAAR,KAAuB,KAAzD,EAAgE;AAC9D4a,eAAWtD,UAAX,GAAwB,uBAAmBnuC,OAAnB,CAAxB;AACD;;AAED,SAAOyxC,UAAP;AACD;;AAvFD,iC;;;;;;;;;;;;kBCMwBjE,G;;AAlCxB;;AACA;;IAAY59B,O;;AACZ;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8Be,SAAS49B,GAAT,CAAc,EAAEI,QAAF,EAAYF,QAAZ,EAAd,EAAsC;AACnD,QAAMt+B,MAAMhS,kBAAW2J,SAAX,CAAqB,MAArB,CAAZ;;AAEA,QAAMymC,MAAM;AACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCAoE,YAAQ;AACNjwB,cAAQ,QADF;AAEND,aAAO,OAFD;AAGND,YAAM,MAHA;AAIND,YAAM,MAJA;AAKND,aAAO;AALD,KAnCE;;AA2CV;;;;;;;;;;;;;;;;;;;AAmBA0P,aAAUtc,KAAV,EAAiBhT,IAAjB,EAAuB;AACrByN,UAAI2S,KAAJ,CAAU9kB,qBAAc,mBAAxB,EAA6C0X,KAA7C,EAAoDhT,IAApD;;AAEAisC,eAASh+B,QAAQqhB,QAAR,CAAiBtc,KAAjB,EAAwBhT,IAAxB,CAAT;AACD,KAlES;;AAoEV;;;;;;;;;;AAUAmuC,aAAUnuC,IAAV,EAAgB;AACdyN,UAAI2S,KAAJ,CAAU9kB,qBAAc,mBAAxB,EAA6C0E,IAA7C;;AAEA,aAAO,yBAAS+rC,UAAT,EAAqB/rC,IAArB,CAAP;AACD,KAlFS;;AAoFV;;;;;;;;;;;;;;;;;;;;;;;;AAwBAwvB,eAAY7qB,OAAZ,EAAqB3E,IAArB,EAA2B;AACzByN,UAAI2S,KAAJ,CAAU9kB,qBAAc,qBAAxB,EAA+CqJ,OAA/C,EAAwD3E,IAAxD;;AAEAisC,eAASh+B,QAAQuhB,UAAR,CAAmB7qB,OAAnB,EAA4B3E,IAA5B,CAAT;AACD,KAhHS;;AAkHV;;;;;;;;;;;;;;;;;;AAkBAkwC,eAAY;AACVziC,UAAI2S,KAAJ,CAAU9kB,qBAAc,iBAAxB;;AAEA,aAAO,yBAASywC,UAAT,CAAP;AACD;AAxIS,GAAZ;;AA2IA,SAAO;AACL7mC,YAAQ2mC;AADH,GAAP;AAGD,C,CApLD,e;;;;;;;;;;;;;;;;;QCUgBsC,Q,GAAAA,Q;QAWA+B,Q,GAAAA,Q;;AApBhB;;;;AAEA;;;;;;;AAOO,SAAS/B,QAAT,CAAmB/xC,KAAnB,EAA0B4D,OAAO,SAAjC,EAA4C;AACjD,QAAMmwC,cAAc,mBAAU/zC,KAAV,CAApB;AACA,SAAO+zC,YAAYle,IAAZ,CAAiBjyB,IAAjB,CAAP;AACD;;AAED;;;;;;AAfA;AAqBO,SAASkwC,QAAT,CAAmB9zC,KAAnB,EAA0B;AAC/B,QAAM+zC,cAAc,mBAAU/zC,KAAV,CAApB;AACA,SAAO,oBAAY+zC,YAAYle,IAAxB,CAAP;AACD,C;;;;;;;;;;;;;;;;;ACxBD;;IAAYnyB,W;;AAGZ;;;;;;AAEA;;;;;;;;;;;AAWA,MAAMyrC,WAAW,EAAjB;;AAdA;;;AAgBAA,SAASzrC,YAAY8vB,aAArB,IAAsC;AACpCwc,OAAMhwC,KAAN,EAAasR,MAAb,EAAqB;AACnB;AACA,sCACKtR,KADL,EAEKsR,OAAOxN,OAFZ;AAID;AAPmC,CAAtC;;AAUA,MAAMqsC,UAAU,iCAAchB,QAAd,EAAwB,EAAxB,CAAhB;kBACegB,O;;;;;;;AC5Bf,YAAY,mBAAO,CAAC,GAAY;;AAEhC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACnBA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;QCnDkBwD,a,GAAAA,a;QAQAC,e,GAAAA,e;QAWApmB,W,GAAAA,W;QAuCAwmB,a,GAAAA,a;QAuCFC,W,GAAAA,W;QAuBAC,a,GAAAA,a;;AAtIhB;;IAAYxwC,W;;AACZ;;IAAYmO,O;;AACZ;;AAGA;;;;;;AAEA;AARA;AASA,MAAM6/B,cAAc,SAApB;;AAEA;;;;;;AANA;AAUO,UAAWiC,aAAX,GAA4B;AACjC,QAAM,wBAAUjwC,YAAY4vB,SAAtB,EAAiC9F,WAAjC,CAAN;AACD;;AAED;;;;AAIO,UAAWomB,eAAX,GAA8B;AACnC,QAAM,wBAAUlwC,YAAY+vB,WAAtB,EAAmCugB,aAAnC,CAAN;AACD;;AAED;;;;;;;AAOO,UAAWxmB,WAAX,CAAwBlc,MAAxB,EAAgC;AACrC,QAAM,EAAEsF,KAAF,EAAShT,IAAT,KAAkB0N,OAAOxN,OAA/B;;AAEA,MAAI;AACF,QAAI,CAACF,IAAD,IAASA,SAAS8tC,WAAtB,EAAmC;AACjC;AACAryC,wBAAW6zB,QAAX,CAAoBtc,KAApB;AACA;AACAvX,wBAAW4yC,UAAX,GAAwB/B,OAAxB,CAAgCpnC,UAAU;AACxCA,eAAOoqB,QAAP,CAAgBtc,KAAhB;AACD,OAFD;;AAIA;AACA;AACA,YAAM,kBAAI/E,QAAQshB,aAAR,CAAsB8gB,YAAY50C,iBAAZ,CAAtB,CAAJ,CAAN;AACD,KAXD,MAWO;AACL;AACAA,wBAAW6zB,QAAX,CAAoBtvB,IAApB,EAA0BgT,KAA1B;AACA;AACAvX,wBAAW4yC,UAAX,CAAsBruC,IAAtB,EAA4BssC,OAA5B,CAAoCpnC,UAAU;AAC5CA,eAAOoqB,QAAP,CAAgBtc,KAAhB;AACD,OAFD;;AAIA;AACA,YAAM,kBAAI/E,QAAQshB,aAAR,CAAsB,EAAE,CAACvvB,IAAD,GAAQgT,KAAV,EAAtB,CAAJ,CAAN;AACD;AACF,GAvBD,CAuBE,OAAOu9B,GAAP,EAAY;AACZ,UAAM9iC,MAAMhS,kBAAW2J,SAAX,CAAqB,MAArB,CAAZ;AACAqI,QAAI1I,KAAJ,CAAUwrC,IAAI1uC,OAAd;AACD;AACF;;AAED;;;;;;;AAOO,UAAWuuC,aAAX,CAA0B1iC,MAA1B,EAAkC;AACvC,QAAM,EAAE/I,OAAF,EAAW3E,IAAX,KAAoB0N,OAAOxN,OAAjC;;AAEA,MAAI;AACF,QAAI,CAACF,IAAD,IAASA,SAAS8tC,WAAtB,EAAmC;AACjC;AACAryC,wBAAW+zB,UAAX,CAAsB7qB,OAAtB;AACA;AACAlJ,wBAAW4yC,UAAX,GAAwB/B,OAAxB,CAAgCpnC,UAAU;AACxCA,eAAOsqB,UAAP,CAAkB7qB,OAAlB;AACD,OAFD;;AAIA;AACA;AACA;AACA,YAAM,kBAAIsJ,QAAQwhB,eAAR,CAAwB6gB,cAAc70C,iBAAd,CAAxB,CAAJ,CAAN;AACD,KAZD,MAYO;AACL;AACAA,wBAAW+zB,UAAX,CAAsBxvB,IAAtB,EAA4B2E,OAA5B;AACA;AACAlJ,wBAAW4yC,UAAX,CAAsBruC,IAAtB,EAA4BssC,OAA5B,CAAoCpnC,UAAU;AAC5CA,eAAOsqB,UAAP,CAAkB7qB,OAAlB;AACD,OAFD;;AAIA;AACA,YAAM,kBAAIsJ,QAAQwhB,eAAR,CAAwB,EAAE,CAACzvB,IAAD,GAAQ2E,OAAV,EAAxB,CAAJ,CAAN;AACD;AACF,GAxBD,CAwBE,OAAO4rC,GAAP,EAAY;AACZ,UAAM9iC,MAAMhS,kBAAW2J,SAAX,CAAqB,MAArB,CAAZ;AACAqI,QAAI1I,KAAJ,CAAUwrC,IAAI1uC,OAAd;AACD;AACF;;AAED;;;;;;AAMO,SAASwuC,WAAT,CAAsB50C,UAAtB,EAAkC;AACvC;AACA,QAAMsyC,UAAUtyC,WAAW4yC,UAAX,EAAhB;AACA,QAAMmC,QAAQ,CAAC,GAAG,kBAAQzC,QAAQpgC,GAAR,CAAYzI,UAAUA,OAAOlF,IAA7B,CAAR,CAAJ,CAAd;;AAEA,QAAMiwC,SAAS,EAAf;AACA;AACAA,SAAOnC,WAAP,IAAsBryC,WAAW0yC,QAAX,EAAtB;;AAEA;AACAqC,QAAMlE,OAAN,CAActsC,QAAQ;AACpBiwC,WAAOjwC,IAAP,IAAevE,WAAW0yC,QAAX,CAAoBnuC,IAApB,CAAf;AACD,GAFD;;AAIA,SAAOiwC,MAAP;AACD;;AAED;;;;;;AAMO,SAASK,aAAT,CAAwB70C,UAAxB,EAAoC;AACzC;AACA,QAAMsyC,UAAUtyC,WAAW4yC,UAAX,EAAhB;AACA,QAAMmC,QAAQ,CAAC,GAAG,kBAAQzC,QAAQpgC,GAAR,CAAYzI,UAAUA,OAAOlF,IAA7B,CAAR,CAAJ,CAAd;;AAEA,QAAMywC,WAAW,EAAjB;AACA;AACAA,WAAS3C,WAAT,IAAwBryC,WAAW2yC,UAAX,EAAxB;;AAEA;AACAoC,QAAMlE,OAAN,CAActsC,QAAQ;AACpBywC,aAASzwC,IAAT,IAAiBvE,WAAW2yC,UAAX,CAAsBpuC,IAAtB,CAAjB;AACD,GAFD;;AAIA,SAAOywC,QAAP;AACD,C;;;;;;ACtJD,kBAAkB,YAAY,mBAAO,CAAC,GAAwB,sB;;;;;;ACA9D,mBAAO,CAAC,EAAiC;AACzC,mBAAO,CAAC,EAAgC;AACxC,mBAAO,CAAC,EAA6B;AACrC,mBAAO,CAAC,GAAoB;AAC5B,mBAAO,CAAC,GAA4B;AACpC,mBAAO,CAAC,GAAuB;AAC/B,mBAAO,CAAC,GAAyB;AACjC,iBAAiB,mBAAO,CAAC,CAAkB;;;;;;;;ACP9B;AACb,aAAa,mBAAO,CAAC,GAAsB;AAC3C,eAAe,mBAAO,CAAC,GAAwB;AAC/C;;AAEA;AACA,iBAAiB,mBAAO,CAAC,GAAe;AACxC,yBAAyB,mEAAmE;AAC5F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACbY;AACb,SAAS,mBAAO,CAAC,EAAc;AAC/B,aAAa,mBAAO,CAAC,EAAkB;AACvC,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,UAAU,mBAAO,CAAC,EAAQ;AAC1B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,EAAW;AAC/B,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,WAAW,mBAAO,CAAC,GAAc;AACjC,iBAAiB,mBAAO,CAAC,GAAgB;AACzC,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,cAAc,mBAAO,CAAC,EAAS;AAC/B,eAAe,mBAAO,CAAC,GAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;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AEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,IAEU;AACZ;AACA,EAAE,mCAAO;AACT;AACA,GAAG;AAAA,oGAAC;AACJ,EAAE,MAAM,YAUN;;AAEF,CAAC;;;;;;;;ACnKD;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;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;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,UAAa,6BAA6B,wBAAU,iBAAiB,wBAAU;AAC3F;AACA,YAAY,mCAAO,YAAY,eAAe,EAAE;AAAA,oGAAC;AACjD,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL,CAAC,a;;;;;;;;;;;;;kBCxqBuB6H,U;AAbxB;;;;;;;;;;;;;AAae,SAASA,UAAT,CAAoBhtC,MAApB,EAA4B;AACvC,SAAK,IAAIvW,OAAT,IAAoBuW,MAApB,EAA4B;AACxB,YAAIA,OAAO5f,cAAP,CAAsBqJ,OAAtB,CAAJ,EAAoC;AAChC,gBAAIA,YAAY,OAAhB,EAAyB;AACrB,qBAAKf,KAAL,CAAWsX,OAAOvW,OAAP,CAAX;AACH,aAFD,MAEO;AACH,qBAAK08B,OAAL,CAAa18B,OAAb,EAAsBuW,OAAOvW,OAAP,CAAtB;AACH;AACJ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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvCA,eAAe,mBAAO,CAAC,GAAY;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACnCA,eAAe,mBAAO,CAAC,GAAY;;AAEnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzCA,eAAe,mBAAO,CAAC,GAAa;AACpC,eAAe,mBAAO,CAAC,GAAY;AACnC,eAAe,mBAAO,CAAC,GAAY;;AAEnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/DA,sBAAsB,mBAAO,CAAC,GAAoB;;AAElD;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9BA,iBAAiB,mBAAO,CAAC,GAAe;AACxC,mBAAmB,mBAAO,CAAC,GAAgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA,aAAa,mBAAO,CAAC,GAAW;AAChC,gBAAgB,mBAAO,CAAC,GAAc;AACtC,qBAAqB,mBAAO,CAAC,GAAmB;;AAEhD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3BA,iBAAiB,mBAAO,CAAC,GAAe;;AAExC;AACA;;AAEA;AACA;;AAEA;;;;;;;ACRA;AACA;;AAEA;;;;;;;;ACHA,aAAa,mBAAO,CAAC,GAAW;;AAEhC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA;AACA;AACA;AACA,2BAA2B,iCAAiC;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,2DAA2D;AACjF,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,mBAAmB;AAChC,wBAAwB,cAAc,gBAAgB;AACtD;AACA;AACA;AACA,aAAa,iEAAiE;AAC9E,wBAAwB,kBAAkB;AAC1C;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kDAAkD,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yDAAyD;AAC1F;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA,8BAA8B,yCAAyC,oCAAoC,EAAE;AAC7G,uEAAuE,oCAAoC,EAAE,EAAE;AAC/G,qCAAqC,wBAAwB,EAAE;AAC/D,qCAAqC,wBAAwB,EAAE;AAC/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB,EAAE,EAAE;;AAE3F;AACA,sCAAsC,4CAA4C,gBAAgB,EAAE,EAAE;;AAEtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,CAAC;;;;;;;;ACzID;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,GAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9DA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;ACzLD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;;;;;;;;;;QC9KtBjX,Q,GAAAA,Q;;AAThB;;;;AACA;;;;;;AAEA;;;;;;AAMO,SAASA,QAAT,CAAkB;AACrB/G,uBAAmB6e,kBADE;AAErBtY,YAAQmC;AAFa,CAAlB,EAGJ;;AAEC,QAAIoW,MAAM,IAAV;AAAA,QACIC,YAAY,IADhB;AAAA,QAEI3sE,WAAW,EAFf;AAAA,QAGI4sE,KAAK,IAHT;AAAA,QAIIC,MAAM,IAJV;AAAA,QAKIC,oBAAoB,IALxB;AAAA,QAMI3tB,YAAY,IANhB;AAAA,QAOI4tB,aAAa,IAPjB;AA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BAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,8EAA8E;AAC9E,GAAG;AACH;;AAEA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;AC3HA,cAAc,mBAAO,CAAC,GAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;;;;;;;;;;;;;kBCjHwBK,e;AAAT,SAASA,eAAT,CAAyB1wE,MAAzB,EAAiC;AAC5C,WAAO,SAAS6vE,SAAT,CAAmB,EAAC3oC,IAAD,EAAOgpC,UAAP,EAAmBj/B,WAAnB,EAAgC6+B,SAAhC,EAA2CC,IAA3C,EAAiDj1E,IAAjD,EAAuDmxB,MAAvD,EAAnB,EAAmF;AACtFjsB,eAAOqV,IAAP,CAAY,6BAA6B4W,MAA7B,GAAsC,SAAtC,GAAkD8jD,IAAlD,GAAyD,cAAzD,GAA0ED,SAA1E,GAAsF,SAAtF,GAAkGh1E,IAA9G;;AAEA,YAAIo1E,eAAej/B,WAAnB,E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O90D,OAAP;AACD,GApBM,MAoBA;AACLuN,QAAI2S,KAAJ,CAAW,+BAA8BlgB,QAAQs8C,mBAAR,CAA4BylC,aAA5B,CAA0C23C,SAAU,GAA7F;AACA,WAAO15H,OAAP;AACD;AACF,C;;;;;;;;;;;;;;;;;;;AClND;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;;AAEA;;;AAGA,sBAAsB,sBAAsB,qBAAqB,cAAc,EAAE;;AAEjF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,kCAAkC;AAClC,iCAAiC;AACjC,iCAAiC;AACjC,4BAA4B;AAC5B,iCAAiC;;AAEjC;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,2BAA2B;AAC3B,oBAAoB;AACpB,6BAA6B;AAC7B;;;;AAIA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,WAAW;AACX,WAAW;AACX,YAAY;AACZ,QAAQ;AACR,mBAAmB;;AAEnB,gBAAgB,oBAAoB;AACpC;AACA;;AAEA;AACA;AACA;AACA,+CAA+C;;AAE/C,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,UAAU,EAAE;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;;AAE/B;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C,uBAAuB;AACvB,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB,qBAAqB;AACrB;AACA,8CAA8C;AAC9C,eAAe;AACf,WAAW;AACX,QAAQ;;AAER;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,gBAAgB;AAC7B;AACA,oBAAoB,UAAU;AAC9B;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,QAAQ;AACR,WAAW;AACX,aAAa;AACb,WAAW;AACX,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,2BAA2B;AAC3C;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA,aAAa;AACb,QAAQ,kBAAkB;AAC1B;AACA,eAAe,oCAAoC;AACnD;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,oBAAoB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,QAAQ;;AAER;AACA,aAAa,eAAe,QAAQ,iCAAiC;AACrE,aAAa,eAAe,QAAQ,iCAAiC;AACrE,aAAa,gBAAgB,OAAO,+BAA+B;;AAEnE;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,eAAe;AACf,kBAAkB;AAClB;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,YAAY;AACZ;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,OAAO;;AAEtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA,WAAW;AACX,SAAS;AACT,aAAa;AACb,WAAW;AACX,YAAY;;AAEZ;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA,OAAO;AACP;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA,kCAAkC;AAClC;AACA,eAAe;AACf;AACA;;AAEA,kCAAkC;AAClC;AACA;AACA;AACA,oCAAoC;AACpC;AACA,OAAO;;AAEP;AACA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,oBAAoB;AACpB,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,QAAQ,OAAO,wBAAwB;;AAE9E;AACA;AACA;AACA,eAAe;AACf;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA,8BAA8B;;AAE9B,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB;AACA,QAAQ;AACR,mBAAmB;AACnB,aAAa;;AAEb,wCAAwC;;AAExC,gBAAgB;AAChB,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA,gDAAgD;;AAEhD,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;;AAEA,KAAK;;AAEL,+BAA+B,kCAAkC;AACjE;;AAEA,KAAK;AACL;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB;AACA,QAAQ;AACR,mBAAmB;AACnB,aAAa;;AAEb,wCAAwC;;AAExC,gBAAgB;AAChB,oBAAoB;AACpB,oBAAoB;;AAEpB,+BAA+B;AAC/B;AACA;AACA;AACA;;AAEA,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,KAAK;AACL,UAAU,iCAAiC,EAAE;;AAE7C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,gCAAgC;AAChC,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;;AAEA,wCAAwC;AACxC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,IAAI,MAAM,GAAG,MAAM,GAAG;AAChD;AACA;AACA;AACA,SAAS,IAAI,KAAK,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,IAAI,MAAM,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,gBAAgB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iBAAiB;AACjB,WAAW;AACX;AACA,wDAAwD;AACxD,uCAAuC;AACvC;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iBAAiB;AACjB,WAAW;AACX;AACA,4BAA4B;AAC5B,sBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kCAAkC,wBAAwB;;AAE1D,GAAG;AACH;AACA,4CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,kBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA,mBAAmB,SAAS;AAC5B;AACA;;AAEA,sBAAsB;AACtB;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,oEAAoE;;;;;AAK3E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B;AAC5B,4BAA4B;AAC5B,4BAA4B;AAC5B,4BAA4B;;AAE5B,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,qBAAqB,cAAc;AAC1D;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,YAAY;AAC/B,kBAAkB,UAAU;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC,wBAAwB;AACxB,YAAY;AACZ,UAAU;AACV,+BAA+B;AAC/B,gCAAgC;AAChC;AACA;;AAEA,wBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0BAA0B;;AAE3D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,aAAa;;AAEb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;;AAEnE;AACA,yDAAyD;AACzD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,aAAa;;AAEb;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb,WAAW;AACX,mBAAmB;;AAEnB;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAoE;AACpE;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,aAAa;;AAEb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,mBAAmB;AACnB,kBAAkB;AAClB,0BAA0B;AAC1B,4BAA4B;AAC5B,uBAAuB;AACvB,mBAAmB;AACnB,gBAAgB;AAChB,qBAAqB;AACrB,mBAAmB;AACnB,6BAA6B;AAC7B,uBAAuB;;AAEvB,kBAAkB;AAClB,kBAAkB;AAClB,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;;AAEnB,iBAAiB;AACjB,qBAAqB;AACrB,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB,sBAAsB;AACtB,2BAA2B;AAC3B,oBAAoB;AACpB,uBAAuB;AACvB,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB,oBAAoB;;AAEpB;AACA;;AAEA,sBAAsB;;AAEtB;;AAEA;;AAEA,2CAA2C;AAC3C,6CAA6C;AAC7C,4CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,0BAA0B;AAC1B,+CAA+C;AAC/C;;AAEA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;AACnB,kBAAkB;;;AAGlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,6BAA6B,yBAAyB;AACtD,8BAA8B,yBAAyB;AACvD;AACA;AACA;;;AAGA;;AAEA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB,sCAAsC;;AAEtC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,8BAA8B;;AAE9B,6BAA6B,eAAe;AAC5C,oBAAoB,uBAAuB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;AACA;;AAEA,aAAa;;AAEb;AACA;AACA,qBAAqB;AACrB,yBAAyB;AACzB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA;;AAEA;AACA;;AAEA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK,oDAAoD,EAAE,aAAa,0BAA0B;;;AAGlG;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA,kCAAkC;;;AAGlC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,aAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA,mBAAmB,qBAAqB,UAAU;;AAElD;AACA;AACA,oBAAoB,0BAA0B,gBAAgB,UAAU;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,0BAA0B,UAAU;;AAExD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,kBAAkB;;AAE3C;AACA;AACA,kDAAkD,OAAO;;AAEzD;AACA;AACA,gBAAgB,YAAY;;AAE5B;AACA;AACA,kBAAkB,YAAY;;AAE9B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA,8BAA8B;AAC9B;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,cAAc;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,8CAA8C;;AAEnE;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,WAAW;AACX,WAAW;AACX,UAAU;AACV,UAAU;AACV;AACA,WAAW;AACX;AACA,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ;AACA,eAAe;AACf,WAAW;AACX,WAAW;AACX,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ,WAAW;AACX,SAAS;AACT;AACA,UAAU;AACV,WAAW;AACX,WAAW;AACX;;;AAGA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,GAAG;AACd;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,GAAG;AAClB;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4BAA4B;AAC5B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,gCAAgC;AAChC;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB,qCAAqC;AACrC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,qBAAqB;AACrB,uCAAuC;AACvC;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,kBAAkB;AAClB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB,cAAc;AACd,cAAc;AACd,uBAAuB;AACvB,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,WAAW;AACX,WAAW;AACX,UAAU;AACV,WAAW;AACX,WAAW;AACX,kBAAkB;AAClB;AACA,iBAAiB;AACjB,UAAU;AACV,6CAA6C,eAAe;AAC5D,4CAA4C,eAAe;AAC3D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA,eAAe,aAAa;AAC5B;AACA;;AAEA;AACA;AACA,qBAAqB,UAAU;AAC/B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA,kBAAkB;AAClB,sCAAsC,2BAA2B;AACjE,uCAAuC;AACvC,wCAAwC;AACxC;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA,eAAe,WAAW;AAC1B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;;AAEA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,GAAG,OAAO;AACV;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX,UAAU;AACV,YAAY;AACZ,qBAAqB;AACrB,cAAc;AACd,WAAW;AACX,WAAW;AACX,mBAAmB;AACnB,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;;;AAGA,kBAAkB;AAClB,mBAAmB;AACnB,kBAAkB;AAClB,gBAAgB;AAChB,mBAAmB;AACnB,mBAAmB;AACnB,kBAAkB;AAClB,qBAAqB;AACrB,kBAAkB;AAClB,qBAAqB;AACrB,mBAAmB;AACnB,uBAAuB;AACvB,yBAAyB;AACzB,yBAAyB;AACzB,wBAAwB;AACxB,uBAAuB;AACvB,wBAAwB;AACxB,0BAA0B;AAC1B,2BAA2B;AAC3B,2BAA2B;AAC3B,0BAA0B;AAC1B,6BAA6B;AAC7B,2BAA2B;AAC3B,8BAA8B;AAC9B,4BAA4B;AAC5B,0BAA0B;AAC1B,oBAAoB;AACpB,qBAAqB;AACrB,mBAAmB;AACnB,kBAAkB;AAClB,kBAAkB;AAClB,mBAAmB;;AAEnB;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA,gBAAgB;AAChB,oBAAoB;AACpB,gBAAgB;AAChB,wBAAwB;AACxB,iBAAiB;AACjB,gBAAgB;AAChB,iBAAiB;AACjB,iBAAiB;AACjB;AACA,mBAAmB;;AAEnB;AACA,iBAAiB;AACjB,iBAAiB;AACjB,iBAAiB;AACjB,iBAAiB;AACjB,qBAAqB;;AAErB;AACA,gBAAgB;AAChB,gBAAgB;;AAEhB;AACA,kBAAkB;AAClB,kBAAkB;;AAElB;AACA,iBAAiB;;AAEjB;AACA,sBAAsB;AACtB,uBAAuB;AACvB,mBAAmB;AACnB,oBAAoB;;AAEpB;AACA,iBAAiB;AACjB,gBAAgB;AAChB,iBAAiB;AACjB,gBAAgB;AAChB,mBAAmB;;AAEnB,mCAAmC;AACnC,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA,wCAAwC;AACxC,qBAAqB;AACrB,sBAAsB;AACtB,gBAAgB;AAChB,gBAAgB;AAChB,eAAe;AACf;;;AAGA;;AAEA,6BAA6B,yBAAyB;AACtD;AACA;AACA,gBAAgB;AAChB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,6BAA6B,yBAAyB;AACtD;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA,6BAA6B,yBAAyB;AACtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,cAAc,yBAAyB;AACvC,sBAAsB;;AAEtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;;AAGpB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;;AAE9C,kEAAkE,UAAU;;AAE5E;AACA;AACA,sBAAsB,uBAAuB;;AAE7C,kEAAkE,UAAU;;AAE5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;;;AAGA;;AAEA;AACA,oBAAoB;AACpB,WAAW;AACX,UAAU;AACV,iBAAiB;AACjB,WAAW;AACX,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,WAAW;AACX;AACA,eAAe;AACf,mCAAmC;AACnC,aAAa;AACb,mCAAmC;AACnC,UAAU;AACV,UAAU;AACV,iCAAiC;AACjC;;AAEA,QAAQ;;AAER;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB,EAAE;;;AAGnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,iBAAiB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC,4BAA4B,aAAa;AACzC,2BAA2B,iBAAiB;AAC5C,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,oEAAoE;AACpE;AACA;AACA;;AAEA,sCAAsC,OAAO;AAC7C;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,OAAO;;AAExC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,kEAAkE;AAClE;AACA;AACA;;AAEA,kCAAkC,OAAO;AACzC;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,OAAO;AACzD;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,oEAAoE;AACpE;AACA;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,OAAO;AACzD;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qBAAqB;AAC3D,8BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC,kBAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,kBAAkB;AACnD;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA,6BAA6B,yBAAyB;AACtD;AACA,+BAA+B,yBAAyB;;AAExD;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6DAA6D,yBAAyB;AACtF;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA,8BAA8B;AAC9B;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;A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AY16G,MAAM06G,GAAN,CAAU3hG,MAAV,CAAiB2hG,OAAO,CAACF,gBAAgB7+G,QAAhB,CAAyB++G,IAAIziI,OAA7B,CAAzB,CAAZ;AACH;;AAED,gBAAI+nB,MAAM86G,IAAV,EAAgB;AACZ96G,sBAAM86G,IAAN,GAAa96G,MAAM86G,IAAN,CAAW/hG,MAAX,CAAkB+hG,QAAQ,CAACN,gBAAgB7+G,QAAhB,CAAyBm/G,KAAK7iI,OAA9B,CAA3B,CAAb;AACH;AACD,gBAAI+nB,MAAMi7G,MAAV,EAAkB;AACdj7G,sBAAMi7G,MAAN,GAAej7G,MAAMi7G,MAAN,CAAaliG,MAAb,CACXkiG,UAAU,CAACT,gBAAgB7+G,QAAhB,CAAyBs/G,OAAOhjI,OAAhC,CADA,CAAf;AAGH;AACJ,SApFD;;AAsFA;AACA;AACA,eAAOqiI,eAAet1H,OAAO,CAAP,EAAUm/B,IAAV,CAAe8J,MAAf,CAAf,GAAwCA,MAA/C;AACH,KA7GD;AA8GH,C;;;;;;;;;;;;;;AChJD;AACA;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,YAAY,SAAS;AACrB;AACO;AACP;AACA,2DAA2D,aAAa;;AAExE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;;ACtGA;AACiC","file":"kandy.uc.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Kandy\"] = factory();\n\telse\n\t\troot[\"Kandy\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 170);\n","import { TASK_CANCEL, TERMINATE, SAGA_LOCATION, SAGA_ACTION, IO, SELF_CANCELLATION } from '@redux-saga/symbols';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { array, notUndef, pattern, multicast, channel, undef, effect, task, func, buffer, string, object } from '@redux-saga/is';\nimport delayP from '@redux-saga/delay-p';\n\nvar konst = function konst(v) {\n  return function () {\n    return v;\n  };\n};\nvar kTrue =\n/*#__PURE__*/\nkonst(true);\n\nvar noop = function noop() {};\n\nif (process.env.NODE_ENV !== 'production' && typeof Proxy !== 'undefined') {\n  noop =\n  /*#__PURE__*/\n  new Proxy(noop, {\n    set: function set() {\n      throw internalErr('There was an attempt to assign a property to internal `noop` function.');\n    }\n  });\n}\nvar identity = function identity(v) {\n  return v;\n};\nvar hasSymbol = typeof Symbol === 'function';\nvar asyncIteratorSymbol = hasSymbol && Symbol.asyncIterator ? Symbol.asyncIterator : '@@asyncIterator';\nfunction check(value, predicate, error) {\n  if (!predicate(value)) {\n    throw new Error(error);\n  }\n}\nvar assignWithSymbols = function assignWithSymbols(target, source) {\n  _extends(target, source);\n\n  if (Object.getOwnPropertySymbols) {\n    Object.getOwnPropertySymbols(source).forEach(function (s) {\n      target[s] = source[s];\n    });\n  }\n};\nvar flatMap = function flatMap(mapper, arr) {\n  var _ref;\n\n  return (_ref = []).concat.apply(_ref, arr.map(mapper));\n};\nfunction remove(array, item) {\n  var index = array.indexOf(item);\n\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n}\nfunction once(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n\n    called = true;\n    fn();\n  };\n}\n\nvar kThrow = function kThrow(err) {\n  throw err;\n};\n\nvar kReturn = function kReturn(value) {\n  return {\n    value: value,\n    done: true\n  };\n};\n\nfunction makeIterator(next, thro, name) {\n  if (thro === void 0) {\n    thro = kThrow;\n  }\n\n  if (name === void 0) {\n    name = 'iterator';\n  }\n\n  var iterator = {\n    meta: {\n      name: name\n    },\n    next: next,\n    throw: thro,\n    return: kReturn,\n    isSagaIterator: true\n  };\n\n  if (typeof Symbol !== 'undefined') {\n    iterator[Symbol.iterator] = function () {\n      return iterator;\n    };\n  }\n\n  return iterator;\n}\nfunction logError(error, _ref2) {\n  var sagaStack = _ref2.sagaStack;\n\n  /*eslint-disable no-console*/\n  console.error(error);\n  console.error(sagaStack);\n}\nvar internalErr = function internalErr(err) {\n  return new Error(\"\\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\\n  Error: \" + err + \"\\n\");\n};\nvar createSetContextWarning = function createSetContextWarning(ctx, props) {\n  return (ctx ? ctx + '.' : '') + \"setContext(props): argument \" + props + \" is not a plain object\";\n};\nvar FROZEN_ACTION_ERROR = \"You can't put (a.k.a. dispatch from saga) frozen actions.\\nWe have to define a special non-enumerable property on those actions for scheduling purposes.\\nOtherwise you wouldn't be able to communicate properly between sagas & other subscribers (action ordering would become far less predictable).\\nIf you are using redux and you care about this behaviour (frozen actions),\\nthen you might want to switch to freezing actions in a middleware rather than in action creator.\\nExample implementation:\\n\\nconst freezeActions = store => next => action => next(Object.freeze(action))\\n\"; // creates empty, but not-holey array\n\nvar createEmptyArray = function createEmptyArray(n) {\n  return Array.apply(null, new Array(n));\n};\nvar wrapSagaDispatch = function wrapSagaDispatch(dispatch) {\n  return function (action) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(action, function (ac) {\n        return !Object.isFrozen(ac);\n      }, FROZEN_ACTION_ERROR);\n    }\n\n    return dispatch(Object.defineProperty(action, SAGA_ACTION, {\n      value: true\n    }));\n  };\n};\nvar shouldTerminate = function shouldTerminate(res) {\n  return res === TERMINATE;\n};\nvar shouldCancel = function shouldCancel(res) {\n  return res === TASK_CANCEL;\n};\nvar shouldComplete = function shouldComplete(res) {\n  return shouldTerminate(res) || shouldCancel(res);\n};\nfunction createAllStyleChildCallbacks(shape, parentCallback) {\n  var keys = Object.keys(shape);\n  var totalCount = keys.length;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(totalCount, function (c) {\n      return c > 0;\n    }, 'createAllStyleChildCallbacks: get an empty array or object');\n  }\n\n  var completedCount = 0;\n  var completed;\n  var results = array(shape) ? createEmptyArray(totalCount) : {};\n  var childCallbacks = {};\n\n  function checkEnd() {\n    if (completedCount === totalCount) {\n      completed = true;\n      parentCallback(results);\n    }\n  }\n\n  keys.forEach(function (key) {\n    var chCbAtKey = function chCbAtKey(res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      if (isErr || shouldComplete(res)) {\n        parentCallback.cancel();\n        parentCallback(res, isErr);\n      } else {\n        results[key] = res;\n        completedCount++;\n        checkEnd();\n      }\n    };\n\n    chCbAtKey.cancel = noop;\n    childCallbacks[key] = chCbAtKey;\n  });\n\n  parentCallback.cancel = function () {\n    if (!completed) {\n      completed = true;\n      keys.forEach(function (key) {\n        return childCallbacks[key].cancel();\n      });\n    }\n  };\n\n  return childCallbacks;\n}\nfunction getMetaInfo(fn) {\n  return {\n    name: fn.name || 'anonymous',\n    location: getLocation(fn)\n  };\n}\nfunction getLocation(instrumented) {\n  return instrumented[SAGA_LOCATION];\n}\n\nvar BUFFER_OVERFLOW = \"Channel's Buffer overflow!\";\nvar ON_OVERFLOW_THROW = 1;\nvar ON_OVERFLOW_DROP = 2;\nvar ON_OVERFLOW_SLIDE = 3;\nvar ON_OVERFLOW_EXPAND = 4;\nvar zeroBuffer = {\n  isEmpty: kTrue,\n  put: noop,\n  take: noop\n};\n\nfunction ringBuffer(limit, overflowAction) {\n  if (limit === void 0) {\n    limit = 10;\n  }\n\n  var arr = new Array(limit);\n  var length = 0;\n  var pushIndex = 0;\n  var popIndex = 0;\n\n  var push = function push(it) {\n    arr[pushIndex] = it;\n    pushIndex = (pushIndex + 1) % limit;\n    length++;\n  };\n\n  var take = function take() {\n    if (length != 0) {\n      var it = arr[popIndex];\n      arr[popIndex] = null;\n      length--;\n      popIndex = (popIndex + 1) % limit;\n      return it;\n    }\n  };\n\n  var flush = function flush() {\n    var items = [];\n\n    while (length) {\n      items.push(take());\n    }\n\n    return items;\n  };\n\n  return {\n    isEmpty: function isEmpty() {\n      return length == 0;\n    },\n    put: function put(it) {\n      if (length < limit) {\n        push(it);\n      } else {\n        var doubledLimit;\n\n        switch (overflowAction) {\n          case ON_OVERFLOW_THROW:\n            throw new Error(BUFFER_OVERFLOW);\n\n          case ON_OVERFLOW_SLIDE:\n            arr[pushIndex] = it;\n            pushIndex = (pushIndex + 1) % limit;\n            popIndex = pushIndex;\n            break;\n\n          case ON_OVERFLOW_EXPAND:\n            doubledLimit = 2 * limit;\n            arr = flush();\n            length = arr.length;\n            pushIndex = arr.length;\n            popIndex = 0;\n            arr.length = doubledLimit;\n            limit = doubledLimit;\n            push(it);\n            break;\n\n          default: // DROP\n\n        }\n      }\n    },\n    take: take,\n    flush: flush\n  };\n}\n\nvar none = function none() {\n  return zeroBuffer;\n};\nvar fixed = function fixed(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_THROW);\n};\nvar dropping = function dropping(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_DROP);\n};\nvar sliding = function sliding(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_SLIDE);\n};\nvar expanding = function expanding(initialSize) {\n  return ringBuffer(initialSize, ON_OVERFLOW_EXPAND);\n};\n\nvar buffers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  none: none,\n  fixed: fixed,\n  dropping: dropping,\n  sliding: sliding,\n  expanding: expanding\n});\n\nvar TAKE = 'TAKE';\nvar PUT = 'PUT';\nvar ALL = 'ALL';\nvar RACE = 'RACE';\nvar CALL = 'CALL';\nvar CPS = 'CPS';\nvar FORK = 'FORK';\nvar JOIN = 'JOIN';\nvar CANCEL = 'CANCEL';\nvar SELECT = 'SELECT';\nvar ACTION_CHANNEL = 'ACTION_CHANNEL';\nvar CANCELLED = 'CANCELLED';\nvar FLUSH = 'FLUSH';\nvar GET_CONTEXT = 'GET_CONTEXT';\nvar SET_CONTEXT = 'SET_CONTEXT';\n\nvar effectTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TAKE: TAKE,\n  PUT: PUT,\n  ALL: ALL,\n  RACE: RACE,\n  CALL: CALL,\n  CPS: CPS,\n  FORK: FORK,\n  JOIN: JOIN,\n  CANCEL: CANCEL,\n  SELECT: SELECT,\n  ACTION_CHANNEL: ACTION_CHANNEL,\n  CANCELLED: CANCELLED,\n  FLUSH: FLUSH,\n  GET_CONTEXT: GET_CONTEXT,\n  SET_CONTEXT: SET_CONTEXT\n});\n\nvar TEST_HINT = '\\n(HINT: if you are getting these errors in tests, consider using createMockTask from @redux-saga/testing-utils)';\n\nvar makeEffect = function makeEffect(type, payload) {\n  var _ref;\n\n  return _ref = {}, _ref[IO] = true, _ref.combinator = false, _ref.type = type, _ref.payload = payload, _ref;\n};\n\nvar isForkEffect = function isForkEffect(eff) {\n  return effect(eff) && eff.type === FORK;\n};\n\nvar detach = function detach(eff) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(eff, isForkEffect, 'detach(eff): argument must be a fork effect');\n  }\n\n  return makeEffect(FORK, _extends({}, eff.payload, {\n    detached: true\n  }));\n};\nfunction take(patternOrChannel, multicastPattern) {\n  if (patternOrChannel === void 0) {\n    patternOrChannel = '*';\n  }\n\n  if (process.env.NODE_ENV !== 'production' && arguments.length) {\n    check(arguments[0], notUndef, 'take(patternOrChannel): patternOrChannel is undefined');\n  }\n\n  if (pattern(patternOrChannel)) {\n    return makeEffect(TAKE, {\n      pattern: patternOrChannel\n    });\n  }\n\n  if (multicast(patternOrChannel) && notUndef(multicastPattern) && pattern(multicastPattern)) {\n    return makeEffect(TAKE, {\n      channel: patternOrChannel,\n      pattern: multicastPattern\n    });\n  }\n\n  if (channel(patternOrChannel)) {\n    return makeEffect(TAKE, {\n      channel: patternOrChannel\n    });\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    throw new Error(\"take(patternOrChannel): argument \" + patternOrChannel + \" is not valid channel or a valid pattern\");\n  }\n}\nvar takeMaybe = function takeMaybe() {\n  var eff = take.apply(void 0, arguments);\n  eff.payload.maybe = true;\n  return eff;\n};\nfunction put(channel$1, action) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      check(channel$1, notUndef, 'put(channel, action): argument channel is undefined');\n      check(channel$1, channel, \"put(channel, action): argument \" + channel$1 + \" is not a valid channel\");\n      check(action, notUndef, 'put(channel, action): argument action is undefined');\n    } else {\n      check(channel$1, notUndef, 'put(action): argument action is undefined');\n    }\n  }\n\n  if (undef(action)) {\n    action = channel$1; // `undefined` instead of `null` to make default parameter work\n\n    channel$1 = undefined;\n  }\n\n  return makeEffect(PUT, {\n    channel: channel$1,\n    action: action\n  });\n}\nvar putResolve = function putResolve() {\n  var eff = put.apply(void 0, arguments);\n  eff.payload.resolve = true;\n  return eff;\n};\nfunction all(effects) {\n  var eff = makeEffect(ALL, effects);\n  eff.combinator = true;\n  return eff;\n}\nfunction race(effects) {\n  var eff = makeEffect(RACE, effects);\n  eff.combinator = true;\n  return eff;\n} // this match getFnCallDescriptor logic\n\nvar validateFnDescriptor = function validateFnDescriptor(effectName, fnDescriptor) {\n  check(fnDescriptor, notUndef, effectName + \": argument fn is undefined or null\");\n\n  if (func(fnDescriptor)) {\n    return;\n  }\n\n  var context = null;\n  var fn;\n\n  if (array(fnDescriptor)) {\n    context = fnDescriptor[0];\n    fn = fnDescriptor[1];\n    check(fn, notUndef, effectName + \": argument of type [context, fn] has undefined or null `fn`\");\n  } else if (object(fnDescriptor)) {\n    context = fnDescriptor.context;\n    fn = fnDescriptor.fn;\n    check(fn, notUndef, effectName + \": argument of type {context, fn} has undefined or null `fn`\");\n  } else {\n    check(fnDescriptor, func, effectName + \": argument fn is not function\");\n    return;\n  }\n\n  if (context && string(fn)) {\n    check(context[fn], func, effectName + \": context arguments has no such method - \\\"\" + fn + \"\\\"\");\n    return;\n  }\n\n  check(fn, func, effectName + \": unpacked fn argument (from [context, fn] or {context, fn}) is not a function\");\n};\n\nfunction getFnCallDescriptor(fnDescriptor, args) {\n  var context = null;\n  var fn;\n\n  if (func(fnDescriptor)) {\n    fn = fnDescriptor;\n  } else {\n    if (array(fnDescriptor)) {\n      context = fnDescriptor[0];\n      fn = fnDescriptor[1];\n    } else {\n      context = fnDescriptor.context;\n      fn = fnDescriptor.fn;\n    }\n\n    if (context && string(fn) && func(context[fn])) {\n      fn = context[fn];\n    }\n  }\n\n  return {\n    context: context,\n    fn: fn,\n    args: args\n  };\n}\n\nvar isNotDelayEffect = function isNotDelayEffect(fn) {\n  return fn !== delay;\n};\n\nfunction call(fnDescriptor) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    var arg0 = typeof args[0] === 'number' ? args[0] : 'ms';\n    check(fnDescriptor, isNotDelayEffect, \"instead of writing `yield call(delay, \" + arg0 + \")` where delay is an effect from `redux-saga/effects` you should write `yield delay(\" + arg0 + \")`\");\n    validateFnDescriptor('call', fnDescriptor);\n  }\n\n  return makeEffect(CALL, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction apply(context, fn, args) {\n  if (args === void 0) {\n    args = [];\n  }\n\n  var fnDescriptor = [context, fn];\n\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('apply', fnDescriptor);\n  }\n\n  return makeEffect(CALL, getFnCallDescriptor([context, fn], args));\n}\nfunction cps(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('cps', fnDescriptor);\n  }\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return makeEffect(CPS, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction fork(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('fork', fnDescriptor);\n    check(fnDescriptor, function (arg) {\n      return !effect(arg);\n    }, 'fork: argument must not be an effect');\n  }\n\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return makeEffect(FORK, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction spawn(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('spawn', fnDescriptor);\n  }\n\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  return detach(fork.apply(void 0, [fnDescriptor].concat(args)));\n}\nfunction join(taskOrTasks) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      throw new Error('join(...tasks) is not supported any more. Please use join([...tasks]) to join multiple tasks.');\n    }\n\n    if (array(taskOrTasks)) {\n      taskOrTasks.forEach(function (t) {\n        check(t, task, \"join([...tasks]): argument \" + t + \" is not a valid Task object \" + TEST_HINT);\n      });\n    } else {\n      check(taskOrTasks, task, \"join(task): argument \" + taskOrTasks + \" is not a valid Task object \" + TEST_HINT);\n    }\n  }\n\n  return makeEffect(JOIN, taskOrTasks);\n}\nfunction cancel(taskOrTasks) {\n  if (taskOrTasks === void 0) {\n    taskOrTasks = SELF_CANCELLATION;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      throw new Error('cancel(...tasks) is not supported any more. Please use cancel([...tasks]) to cancel multiple tasks.');\n    }\n\n    if (array(taskOrTasks)) {\n      taskOrTasks.forEach(function (t) {\n        check(t, task, \"cancel([...tasks]): argument \" + t + \" is not a valid Task object \" + TEST_HINT);\n      });\n    } else if (taskOrTasks !== SELF_CANCELLATION && notUndef(taskOrTasks)) {\n      check(taskOrTasks, task, \"cancel(task): argument \" + taskOrTasks + \" is not a valid Task object \" + TEST_HINT);\n    }\n  }\n\n  return makeEffect(CANCEL, taskOrTasks);\n}\nfunction select(selector) {\n  if (selector === void 0) {\n    selector = identity;\n  }\n\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  if (process.env.NODE_ENV !== 'production' && arguments.length) {\n    check(arguments[0], notUndef, 'select(selector, [...]): argument selector is undefined');\n    check(selector, func, \"select(selector, [...]): argument \" + selector + \" is not a function\");\n  }\n\n  return makeEffect(SELECT, {\n    selector: selector,\n    args: args\n  });\n}\n/**\n  channel(pattern, [buffer])    => creates a proxy channel for store actions\n**/\n\nfunction actionChannel(pattern$1, buffer$1) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(pattern$1, pattern, 'actionChannel(pattern,...): argument pattern is not valid');\n\n    if (arguments.length > 1) {\n      check(buffer$1, notUndef, 'actionChannel(pattern, buffer): argument buffer is undefined');\n      check(buffer$1, buffer, \"actionChannel(pattern, buffer): argument \" + buffer$1 + \" is not a valid buffer\");\n    }\n  }\n\n  return makeEffect(ACTION_CHANNEL, {\n    pattern: pattern$1,\n    buffer: buffer$1\n  });\n}\nfunction cancelled() {\n  return makeEffect(CANCELLED, {});\n}\nfunction flush(channel$1) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(channel$1, channel, \"flush(channel): argument \" + channel$1 + \" is not valid channel\");\n  }\n\n  return makeEffect(FLUSH, channel$1);\n}\nfunction getContext(prop) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(prop, string, \"getContext(prop): argument \" + prop + \" is not a string\");\n  }\n\n  return makeEffect(GET_CONTEXT, prop);\n}\nfunction setContext(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(props, object, createSetContextWarning(null, props));\n  }\n\n  return makeEffect(SET_CONTEXT, props);\n}\nvar delay =\n/*#__PURE__*/\ncall.bind(null, delayP);\n\nexport { apply as $, ALL as A, logError as B, CALL as C, wrapSagaDispatch as D, identity as E, FORK as F, GET_CONTEXT as G, buffers as H, detach as I, JOIN as J, take as K, fork as L, cancel as M, call as N, actionChannel as O, PUT as P, sliding as Q, RACE as R, SELECT as S, TAKE as T, delay as U, race as V, effectTypes as W, takeMaybe as X, put as Y, putResolve as Z, all as _, CPS as a, cps as a0, spawn as a1, join as a2, select as a3, cancelled as a4, flush as a5, getContext as a6, setContext as a7, CANCEL as b, check as c, ACTION_CHANNEL as d, expanding as e, CANCELLED as f, FLUSH as g, SET_CONTEXT as h, internalErr as i, getMetaInfo as j, kTrue as k, createAllStyleChildCallbacks as l, createEmptyArray as m, none as n, once as o, assignWithSymbols as p, makeIterator as q, remove as r, shouldComplete as s, noop as t, flatMap as u, getLocation as v, createSetContextWarning as w, asyncIteratorSymbol as x, shouldCancel as y, shouldTerminate as z };\n","import { TASK, SAGA_ACTION, MULTICAST, IO } from '@redux-saga/symbols';\n\nvar undef = function undef(v) {\n  return v === null || v === undefined;\n};\nvar notUndef = function notUndef(v) {\n  return v !== null && v !== undefined;\n};\nvar func = function func(f) {\n  return typeof f === 'function';\n};\nvar number = function number(n) {\n  return typeof n === 'number';\n};\nvar string = function string(s) {\n  return typeof s === 'string';\n};\nvar array = Array.isArray;\nvar object = function object(obj) {\n  return obj && !array(obj) && typeof obj === 'object';\n};\nvar promise = function promise(p) {\n  return p && func(p.then);\n};\nvar iterator = function iterator(it) {\n  return it && func(it.next) && func(it.throw);\n};\nvar iterable = function iterable(it) {\n  return it && func(Symbol) ? func(it[Symbol.iterator]) : array(it);\n};\nvar task = function task(t) {\n  return t && t[TASK];\n};\nvar sagaAction = function sagaAction(a) {\n  return Boolean(a && a[SAGA_ACTION]);\n};\nvar observable = function observable(ob) {\n  return ob && func(ob.subscribe);\n};\nvar buffer = function buffer(buf) {\n  return buf && func(buf.isEmpty) && func(buf.take) && func(buf.put);\n};\nvar pattern = function pattern(pat) {\n  return pat && (string(pat) || symbol(pat) || func(pat) || array(pat) && pat.every(pattern));\n};\nvar channel = function channel(ch) {\n  return ch && func(ch.take) && func(ch.close);\n};\nvar stringableFunc = function stringableFunc(f) {\n  return func(f) && f.hasOwnProperty('toString');\n};\nvar symbol = function symbol(sym) {\n  return Boolean(sym) && typeof Symbol === 'function' && sym.constructor === Symbol && sym !== Symbol.prototype;\n};\nvar multicast = function multicast(ch) {\n  return channel(ch) && ch[MULTICAST];\n};\nvar effect = function effect(eff) {\n  return eff && eff[IO];\n};\n\nexport { array, buffer, channel, effect, func, iterable, iterator, multicast, notUndef, number, object, observable, pattern, promise, sagaAction, string, stringableFunc, symbol, task, undef };\n","var _ = require('./lodash.min').runInContext();\nmodule.exports = require('./fp/_baseConvert')(_, _);\n","import createManager from 'kandy-logger'\nimport defaultOptions from './config'\n\n// Logs generated as a result of invoking the public API will contain this tag\nexport const API_LOG_TAG = 'API invoked: '\n\n/**\n * Create the LogManager right away so that it is available. The SDK has not\n *    been instantiated yet, so we have to use the default options until we get\n *    the application's configs.\n */\n/**\n * TODO: There is a technical debt associated with having a loggerManager along with it's\n * loggers created at the global scope. Multiple instances of the SDK would end up sharing\n * the log manager and therefore loggers.\n */\nconst manager = createManager(defaultOptions)\nexport const logManager = manager\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};","import '@redux-saga/symbols';\nimport '@babel/runtime/helpers/esm/extends';\nimport { channel, stringableFunc, func, notUndef } from '@redux-saga/is';\nimport { q as makeIterator, K as take, L as fork, M as cancel, N as call, O as actionChannel, Q as sliding, U as delay, V as race, c as check } from './io-6de156f3.js';\nexport { O as actionChannel, _ as all, $ as apply, N as call, M as cancel, a4 as cancelled, a0 as cps, U as delay, W as effectTypes, a5 as flush, L as fork, a6 as getContext, a2 as join, Y as put, Z as putResolve, V as race, a3 as select, a7 as setContext, a1 as spawn, K as take, X as takeMaybe } from './io-6de156f3.js';\nimport '@redux-saga/delay-p';\n\nvar done = function done(value) {\n  return {\n    done: true,\n    value: value\n  };\n};\n\nvar qEnd = {};\nfunction safeName(patternOrChannel) {\n  if (channel(patternOrChannel)) {\n    return 'channel';\n  }\n\n  if (stringableFunc(patternOrChannel)) {\n    return String(patternOrChannel);\n  }\n\n  if (func(patternOrChannel)) {\n    return patternOrChannel.name;\n  }\n\n  return String(patternOrChannel);\n}\nfunction fsmIterator(fsm, startState, name) {\n  var stateUpdater,\n      errorState,\n      effect,\n      nextState = startState;\n\n  function next(arg, error) {\n    if (nextState === qEnd) {\n      return done(arg);\n    }\n\n    if (error && !errorState) {\n      nextState = qEnd;\n      throw error;\n    } else {\n      stateUpdater && stateUpdater(arg);\n      var currentState = error ? fsm[errorState](error) : fsm[nextState]();\n      nextState = currentState.nextState;\n      effect = currentState.effect;\n      stateUpdater = currentState.stateUpdater;\n      errorState = currentState.errorState;\n      return nextState === qEnd ? done(arg) : effect;\n    }\n  }\n\n  return makeIterator(next, function (error) {\n    return next(null, error);\n  }, name);\n}\n\nfunction takeEvery(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var action,\n      setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q1',\n        effect: yFork(action)\n      };\n    }\n  }, 'q1', \"takeEvery(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction takeLatest(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yCancel = function yCancel(task) {\n    return {\n      done: false,\n      value: cancel(task)\n    };\n  };\n\n  var task, action;\n\n  var setTask = function setTask(t) {\n    return task = t;\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return task ? {\n        nextState: 'q3',\n        effect: yCancel(task)\n      } : {\n        nextState: 'q1',\n        effect: yFork(action),\n        stateUpdater: setTask\n      };\n    },\n    q3: function q3() {\n      return {\n        nextState: 'q1',\n        effect: yFork(action),\n        stateUpdater: setTask\n      };\n    }\n  }, 'q1', \"takeLatest(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction takeLeading(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yCall = function yCall(ac) {\n    return {\n      done: false,\n      value: call.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var action;\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q1',\n        effect: yCall(action)\n      };\n    }\n  }, 'q1', \"takeLeading(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction throttle(delayLength, pattern, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var action, channel;\n  var yActionChannel = {\n    done: false,\n    value: actionChannel(pattern, sliding(1))\n  };\n\n  var yTake = function yTake() {\n    return {\n      done: false,\n      value: take(channel)\n    };\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yDelay = {\n    done: false,\n    value: delay(delayLength)\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  var setChannel = function setChannel(ch) {\n    return channel = ch;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yActionChannel,\n        stateUpdater: setChannel\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q3',\n        effect: yTake(),\n        stateUpdater: setAction\n      };\n    },\n    q3: function q3() {\n      return {\n        nextState: 'q4',\n        effect: yFork(action)\n      };\n    },\n    q4: function q4() {\n      return {\n        nextState: 'q2',\n        effect: yDelay\n      };\n    }\n  }, 'q1', \"throttle(\" + safeName(pattern) + \", \" + worker.name + \")\");\n}\n\nfunction retry(maxTries, delayLength, fn) {\n  var counter = maxTries;\n\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var yCall = {\n    done: false,\n    value: call.apply(void 0, [fn].concat(args))\n  };\n  var yDelay = {\n    done: false,\n    value: delay(delayLength)\n  };\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yCall,\n        errorState: 'q10'\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: qEnd\n      };\n    },\n    q10: function q10(error) {\n      counter -= 1;\n\n      if (counter <= 0) {\n        throw error;\n      }\n\n      return {\n        nextState: 'q1',\n        effect: yDelay\n      };\n    }\n  }, 'q1', \"retry(\" + fn.name + \")\");\n}\n\nfunction debounceHelper(delayLength, patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var action, raceOutput;\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n  var yRace = {\n    done: false,\n    value: race({\n      action: take(patternOrChannel),\n      debounce: delay(delayLength)\n    })\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yNoop = function yNoop(value) {\n    return {\n      done: false,\n      value: value\n    };\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  var setRaceOutput = function setRaceOutput(ro) {\n    return raceOutput = ro;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q3',\n        effect: yRace,\n        stateUpdater: setRaceOutput\n      };\n    },\n    q3: function q3() {\n      return raceOutput.debounce ? {\n        nextState: 'q1',\n        effect: yFork(action)\n      } : {\n        nextState: 'q2',\n        effect: yNoop(raceOutput.action),\n        stateUpdater: setAction\n      };\n    }\n  }, 'q1', \"debounce(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nvar validateTakeEffect = function validateTakeEffect(fn, patternOrChannel, worker) {\n  check(patternOrChannel, notUndef, fn.name + \" requires a pattern or channel\");\n  check(worker, notUndef, fn.name + \" requires a saga parameter\");\n};\n\nfunction takeEvery$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeEvery$1, patternOrChannel, worker);\n  }\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  return fork.apply(void 0, [takeEvery, patternOrChannel, worker].concat(args));\n}\nfunction takeLatest$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeLatest$1, patternOrChannel, worker);\n  }\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    args[_key2 - 2] = arguments[_key2];\n  }\n\n  return fork.apply(void 0, [takeLatest, patternOrChannel, worker].concat(args));\n}\nfunction takeLeading$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeLeading$1, patternOrChannel, worker);\n  }\n\n  for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    args[_key3 - 2] = arguments[_key3];\n  }\n\n  return fork.apply(void 0, [takeLeading, patternOrChannel, worker].concat(args));\n}\nfunction throttle$1(ms, pattern, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(pattern, notUndef, 'throttle requires a pattern');\n    check(worker, notUndef, 'throttle requires a saga parameter');\n  }\n\n  for (var _len4 = arguments.length, args = new Array(_len4 > 3 ? _len4 - 3 : 0), _key4 = 3; _key4 < _len4; _key4++) {\n    args[_key4 - 3] = arguments[_key4];\n  }\n\n  return fork.apply(void 0, [throttle, ms, pattern, worker].concat(args));\n}\nfunction retry$1(maxTries, delayLength, worker) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 3 ? _len5 - 3 : 0), _key5 = 3; _key5 < _len5; _key5++) {\n    args[_key5 - 3] = arguments[_key5];\n  }\n\n  return call.apply(void 0, [retry, maxTries, delayLength, worker].concat(args));\n}\nfunction debounce(delayLength, pattern, worker) {\n  for (var _len6 = arguments.length, args = new Array(_len6 > 3 ? _len6 - 3 : 0), _key6 = 3; _key6 < _len6; _key6++) {\n    args[_key6 - 3] = arguments[_key6];\n  }\n\n  return fork.apply(void 0, [debounceHelper, delayLength, pattern, worker].concat(args));\n}\n\nexport { debounce, retry$1 as retry, takeEvery$1 as takeEvery, takeLatest$1 as takeLatest, takeLeading$1 as takeLeading, throttle$1 as throttle };\n","export * from '@redux-saga/core/effects';\n","var createSymbol = function createSymbol(name) {\n  return \"@@redux-saga/\" + name;\n};\n\nvar CANCEL =\n/*#__PURE__*/\ncreateSymbol('CANCEL_PROMISE');\nvar CHANNEL_END_TYPE =\n/*#__PURE__*/\ncreateSymbol('CHANNEL_END');\nvar IO =\n/*#__PURE__*/\ncreateSymbol('IO');\nvar MATCH =\n/*#__PURE__*/\ncreateSymbol('MATCH');\nvar MULTICAST =\n/*#__PURE__*/\ncreateSymbol('MULTICAST');\nvar SAGA_ACTION =\n/*#__PURE__*/\ncreateSymbol('SAGA_ACTION');\nvar SELF_CANCELLATION =\n/*#__PURE__*/\ncreateSymbol('SELF_CANCELLATION');\nvar TASK =\n/*#__PURE__*/\ncreateSymbol('TASK');\nvar TASK_CANCEL =\n/*#__PURE__*/\ncreateSymbol('TASK_CANCEL');\nvar TERMINATE =\n/*#__PURE__*/\ncreateSymbol('TERMINATE');\nvar SAGA_LOCATION =\n/*#__PURE__*/\ncreateSymbol('LOCATION');\n\nexport { CANCEL, CHANNEL_END_TYPE, IO, MATCH, MULTICAST, SAGA_ACTION, SAGA_LOCATION, SELF_CANCELLATION, TASK, TASK_CANCEL, TERMINATE };\n","import { cloneDeep } from 'lodash/fp'\nimport { SUBSCRIPTION_STATE } from '../constants'\nimport { platforms } from '../../constants'\n\n/*\n * Redux-saga selector functions.\n * Used with the `select` effect in sagas to Retrieves\n *      specific portions of the state.\n */\n\n/**\n * Retrieves the config options provided by the auth plugin.\n * @method getAuthConfig\n * @return {Object}\n */\nexport function getAuthConfig (state) {\n  return cloneDeep(state.config.authentication)\n}\n\n/**\n * Retrieves the subscription information of a platform.\n * @method getSubscriptionInfo\n * @param  {string} [platform] - The backend platform in use.\n * @return {Object}\n */\nexport function getSubscriptionInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  if (state.authentication.subscription) {\n    return cloneDeep(state.authentication.subscription[platform])\n  } else {\n    return undefined\n  }\n}\n\n/**\n * Retrieves the connection information of a platform.\n * Includes the info needed to make requests to that platform.\n * @method getConnectionInfo\n * @param  {string} [platform] - The backend platform in use.\n * @return {Object}\n */\nexport function getConnectionInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  if (state.authentication.connection) {\n    return cloneDeep(state.authentication.connection[platform])\n  } else {\n    return undefined\n  }\n}\n\n/**\n * Retrieves the domain of the callee address information of a platform.\n * @method getDomain\n * @return {string}\n */\nexport function getDomain (state) {\n  const { username = '', identity = username } = getUserInfo(state)\n  const [, domain = ''] = identity.split('@')\n  return domain\n}\n\n/**\n * Retrieves the identity of the currently logged-in user.\n * The identity is of the form: <userName>@<domain>\n * @method getIdentity\n * @return {string}\n */\nexport function getIdentity (state) {\n  const userInfo = getUserInfo(state)\n  return userInfo.identity || userInfo.username || ''\n}\n\n/**\n * Retrieves the user information.\n * @method getUserInfo\n * @return {Object} An object whose properties are: accessToken, identity & username. Identity is user's primary contact address.\n */\nexport function getUserInfo (state) {\n  return cloneDeep(state.authentication.userInfo) || {}\n}\n\n/**\n * Retrieves a flag from the store representing if the login scenario was SSO or not.\n * @method getAuthScenario\n * @return {boolean}\n */\nexport function getAuthScenario (state) {\n  return cloneDeep(state.authentication.isSSO)\n}\n\n/**\n * Retrieves information about the services that the user is subscribed for.\n * @method getServices\n * @return {Object}\n */\nexport function getServices (state, platform) {\n  const subscription = getSubscriptionInfo(state, platform)\n\n  if (subscription && subscription.servicesInfo) {\n    return subscription.servicesInfo\n  } else {\n    return {\n      // TODO: Have default as part of the reducer.\n      requested: [],\n      received: [],\n      missing: [],\n      status: SUBSCRIPTION_STATE.NONE,\n      services: {}\n    }\n  }\n}\n\n/**\n * Retrieves the name of the backend platform the user is currently subscribed to.\n * @method getPlatform\n * @return {string}\n */\nexport function getPlatform (state) {\n  let platform = state.authentication.platform\n\n  /**\n   * Link and UC set the platform in auth state after setting credentials /\n   *    connecting, but CPaaS does not (because the idea was to move away from\n   *    needing the platform). So if there isn't a platform, but there is a\n   *    CPaaS-specific identity, then assume the platform is CPaaS.\n   * This was needed for the request plugin to get the right platform when using\n   *    the `getRequestInfo` selector below.\n   * This is a workaround for bad design.\n   */\n  if (!platform && getUserInfo(state).identity) {\n    platform = 'cpaas'\n  }\n\n  return platform\n}\n\n/**\n * Retrieves info needed to make a REST request for the different platforms.\n * @method getRequestInfo\n * @return {Object}\n */\nexport function getRequestInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  const { subscription, clientCorrelator } = getAuthConfig(state)\n  let { server } = getAuthConfig(state)\n  let { userInfo } = cloneDeep(state.authentication)\n\n  // For backwards compatibility, we need to fall back to\n  // subscription for the server connection details\n  if (!server) {\n    server = {\n      protocol: subscription.protocol,\n      base: subscription.server,\n      port: subscription.port,\n      version: subscription.version\n    }\n  }\n\n  // If user info does not exist yet, use an empty object. Requests will still fail, but they will be handled.\n  if (!userInfo) {\n    userInfo = {}\n  }\n\n  let requestInfo\n\n  if (platform === platforms.CPAAS) {\n    requestInfo = {\n      baseURL: `${server.protocol}://${server.base}:${server.port}`,\n      version: server.version,\n      username: userInfo.username,\n      // TODO: Token doesn't need to be here if its in requestOptions.\n      token: userInfo.accessToken,\n      clientCorrelator,\n      // TODO: DO NOT hardcode this here (?). The original idea was that this\n      //    is set in state after connection.\n      options: {\n        headers: {\n          Accept: 'application/json',\n          Authorization: `Bearer ${userInfo.accessToken}`,\n          'Content-Type': 'application/json'\n        }\n      }\n    }\n  } else if (platform === platforms.UC) {\n    requestInfo = {\n      baseURL: `${subscription.protocol}://${subscription.server}:${subscription.port}`,\n      version: subscription.version,\n      username: userInfo.username\n    }\n  } else if (platform === platforms.LINK) {\n    requestInfo = {\n      baseURL: `${server.protocol}://${server.base}:${server.port}`,\n      version: server.version,\n      username: userInfo.username\n    }\n\n    /*\n     * If the requested platform was Link but the platform set in state is\n     *    UC, and so we're using UC but making a request for SPiDR.\n     * Change the requestInfo provided to ensure the URL will be valid for\n     *    SPiDR and authentication will be valid for CIM.\n     */\n    const setPlatform = getPlatform(state)\n    if (setPlatform === platforms.UC) {\n      requestInfo.version = '1'\n\n      const connInfo = getConnectionInfo(state, setPlatform)\n      if (connInfo && connInfo.requestOptions) {\n        requestInfo.requestOptions = connInfo.requestOptions\n      }\n      return requestInfo\n    }\n  } else {\n    // Platform is not supported\n    return {}\n  }\n\n  const connInfo = getConnectionInfo(state, platform)\n  if (connInfo && connInfo.requestOptions) {\n    requestInfo.requestOptions = connInfo.requestOptions\n  }\n\n  return requestInfo\n}\n","var core = module.exports = { version: '2.6.12' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","export const platforms = {\n  LINK: 'link',\n  UC: 'uc',\n  CPAAS: 'cpaas'\n}\n\nexport const notificationTypes = {\n  WEBSOCKET: 'websocket',\n  PUSH: 'push'\n}\n\nexport const connCheckResponsibility = {\n  CLIENT: 'client',\n  SERVER: 'server'\n}\n\nexport const connCheckMethods = {\n  KEEP_ALIVE: 'keepAlive',\n  PING_PONG: 'pingPong'\n}\n","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","export default (function (value) {\n  return typeof value === 'function';\n});","export default (function (value) {\n  return typeof value === 'symbol' || typeof value === 'object' && Object.prototype.toString.call(value) === '[object Symbol]';\n});","export default (function (value) {\n  return value.length === 0;\n});","export default (function (value) {\n  return value.toString();\n});","export default (function (value) {\n  return typeof value === 'string';\n});","export var DEFAULT_NAMESPACE = '/';\nexport var ACTION_TYPE_DELIMITER = '||';","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport isSymbol from './utils/isSymbol';\nimport isEmpty from './utils/isEmpty';\nimport toString from './utils/toString';\nimport isString from './utils/isString';\nimport { ACTION_TYPE_DELIMITER } from './constants';\n\nfunction isValidActionType(type) {\n  return isString(type) || isFunction(type) || isSymbol(type);\n}\n\nfunction isValidActionTypes(types) {\n  if (isEmpty(types)) {\n    return false;\n  }\n\n  return types.every(isValidActionType);\n}\n\nexport default function combineActions() {\n  for (var _len = arguments.length, actionsTypes = new Array(_len), _key = 0; _key < _len; _key++) {\n    actionsTypes[_key] = arguments[_key];\n  }\n\n  invariant(isValidActionTypes(actionsTypes), 'Expected action types to be strings, symbols, or action creators');\n  var combinedActionType = actionsTypes.map(toString).join(ACTION_TYPE_DELIMITER);\n  return {\n    toString: function toString() {\n      return combinedActionType;\n    }\n  };\n}","export default (function (value) {\n  return value;\n});","export default (function (value) {\n  return value === null;\n});","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport identity from './utils/identity';\nimport isNull from './utils/isNull';\nexport default function createAction(type, payloadCreator, metaCreator) {\n  if (payloadCreator === void 0) {\n    payloadCreator = identity;\n  }\n\n  invariant(isFunction(payloadCreator) || isNull(payloadCreator), 'Expected payloadCreator to be a function, undefined or null');\n  var finalPayloadCreator = isNull(payloadCreator) || payloadCreator === identity ? identity : function (head) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return head instanceof Error ? head : payloadCreator.apply(void 0, [head].concat(args));\n  };\n  var hasMeta = isFunction(metaCreator);\n  var typeString = type.toString();\n\n  var actionCreator = function actionCreator() {\n    var payload = finalPayloadCreator.apply(void 0, arguments);\n    var action = {\n      type: type\n    };\n\n    if (payload instanceof Error) {\n      action.error = true;\n    }\n\n    if (payload !== undefined) {\n      action.payload = payload;\n    }\n\n    if (hasMeta) {\n      action.meta = metaCreator.apply(void 0, arguments);\n    }\n\n    return action;\n  };\n\n  actionCreator.toString = function () {\n    return typeString;\n  };\n\n  return actionCreator;\n}","export default (function (value) {\n  if (typeof value !== 'object' || value === null) return false;\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n});","export default (function (value) {\n  return Array.isArray(value);\n});","export default (function (value) {\n  return value === null || value === undefined;\n});","export default (function (array) {\n  return array[array.length - 1];\n});","import camelCase from 'to-camel-case';\nvar namespacer = '/';\nexport default (function (type) {\n  return type.indexOf(namespacer) === -1 ? camelCase(type) : type.split(namespacer).map(camelCase).join(namespacer);\n});","export default (function (array, callback) {\n  return array.reduce(function (partialObject, element) {\n    return callback(partialObject, element);\n  }, {});\n});","export default (function (value) {\n  return typeof Map !== 'undefined' && value instanceof Map;\n});","import isMap from './isMap';\nexport default function ownKeys(object) {\n  if (isMap(object)) {\n    // We are using loose transforms in babel. Here we are trying to convert an\n    // interable to an array. Loose mode expects everything to already be an\n    // array. The problem is that our eslint rules encourage us to prefer\n    // spread over Array.from.\n    //\n    // Instead of disabling loose mode we simply disable the warning.\n    // eslint-disable-next-line unicorn/prefer-spread\n    return Array.from(object.keys());\n  }\n\n  if (typeof Reflect !== 'undefined' && typeof Reflect.ownKeys === 'function') {\n    return Reflect.ownKeys(object);\n  }\n\n  var keys = Object.getOwnPropertyNames(object);\n\n  if (typeof Object.getOwnPropertySymbols === 'function') {\n    keys = keys.concat(Object.getOwnPropertySymbols(object));\n  }\n\n  return keys;\n}","import isMap from './isMap';\nexport default function get(key, x) {\n  return isMap(x) ? x.get(key) : x[key];\n}","import { DEFAULT_NAMESPACE, ACTION_TYPE_DELIMITER } from '../constants';\nimport ownKeys from './ownKeys';\nimport get from './get';\nexport default (function (predicate) {\n  return function flatten(map, _temp, partialFlatMap, partialFlatActionType) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$namespace = _ref.namespace,\n        namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace,\n        prefix = _ref.prefix;\n\n    if (partialFlatMap === void 0) {\n      partialFlatMap = {};\n    }\n\n    if (partialFlatActionType === void 0) {\n      partialFlatActionType = '';\n    }\n\n    function connectNamespace(type) {\n      var _ref2;\n\n      if (!partialFlatActionType) return type;\n      var types = type.toString().split(ACTION_TYPE_DELIMITER);\n      var partials = partialFlatActionType.split(ACTION_TYPE_DELIMITER);\n      return (_ref2 = []).concat.apply(_ref2, partials.map(function (p) {\n        return types.map(function (t) {\n          return \"\" + p + namespace + t;\n        });\n      })).join(ACTION_TYPE_DELIMITER);\n    }\n\n    function connectPrefix(type) {\n      if (partialFlatActionType || !prefix || prefix && new RegExp(\"^\" + prefix + namespace).test(type)) {\n        return type;\n      }\n\n      return \"\" + prefix + namespace + type;\n    }\n\n    ownKeys(map).forEach(function (type) {\n      var nextNamespace = connectPrefix(connectNamespace(type));\n      var mapValue = get(type, map);\n\n      if (predicate(mapValue)) {\n        flatten(mapValue, {\n          namespace: namespace,\n          prefix: prefix\n        }, partialFlatMap, nextNamespace);\n      } else {\n        partialFlatMap[nextNamespace] = mapValue;\n      }\n    });\n    return partialFlatMap;\n  };\n});","import isPlainObject from './isPlainObject';\nimport flattenWhenNode from './flattenWhenNode';\nexport default flattenWhenNode(isPlainObject);","import { DEFAULT_NAMESPACE } from '../constants';\nimport isEmpty from './isEmpty';\nimport camelCase from './camelCase';\nexport default function unflattenActionCreators(flatActionCreators, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$namespace = _ref.namespace,\n      namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace,\n      prefix = _ref.prefix;\n\n  function unflatten(flatActionType, partialNestedActionCreators, partialFlatActionTypePath) {\n    var nextNamespace = camelCase(partialFlatActionTypePath.shift());\n\n    if (isEmpty(partialFlatActionTypePath)) {\n      partialNestedActionCreators[nextNamespace] = flatActionCreators[flatActionType];\n    } else {\n      if (!partialNestedActionCreators[nextNamespace]) {\n        partialNestedActionCreators[nextNamespace] = {};\n      }\n\n      unflatten(flatActionType, partialNestedActionCreators[nextNamespace], partialFlatActionTypePath);\n    }\n  }\n\n  var nestedActionCreators = {};\n  Object.getOwnPropertyNames(flatActionCreators).forEach(function (type) {\n    var unprefixedType = prefix ? type.replace(\"\" + prefix + namespace, '') : type;\n    return unflatten(type, nestedActionCreators, unprefixedType.split(namespace));\n  });\n  return nestedActionCreators;\n}","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport invariant from 'invariant';\nimport isPlainObject from './utils/isPlainObject';\nimport isFunction from './utils/isFunction';\nimport identity from './utils/identity';\nimport isArray from './utils/isArray';\nimport isString from './utils/isString';\nimport isNil from './utils/isNil';\nimport getLastElement from './utils/getLastElement';\nimport camelCase from './utils/camelCase';\nimport arrayToObject from './utils/arrayToObject';\nimport flattenActionMap from './utils/flattenActionMap';\nimport unflattenActionCreators from './utils/unflattenActionCreators';\nimport createAction from './createAction';\nimport { DEFAULT_NAMESPACE } from './constants';\nexport default function createActions(actionMap) {\n  for (var _len = arguments.length, identityActions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    identityActions[_key - 1] = arguments[_key];\n  }\n\n  var options = isPlainObject(getLastElement(identityActions)) ? identityActions.pop() : {};\n  invariant(identityActions.every(isString) && (isString(actionMap) || isPlainObject(actionMap)), 'Expected optional object followed by string action types');\n\n  if (isString(actionMap)) {\n    return actionCreatorsFromIdentityActions([actionMap].concat(identityActions), options);\n  }\n\n  return _objectSpread({}, actionCreatorsFromActionMap(actionMap, options), actionCreatorsFromIdentityActions(identityActions, options));\n}\n\nfunction actionCreatorsFromActionMap(actionMap, options) {\n  var flatActionMap = flattenActionMap(actionMap, options);\n  var flatActionCreators = actionMapToActionCreators(flatActionMap);\n  return unflattenActionCreators(flatActionCreators, options);\n}\n\nfunction actionMapToActionCreators(actionMap, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      prefix = _ref.prefix,\n      _ref$namespace = _ref.namespace,\n      namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace;\n\n  function isValidActionMapValue(actionMapValue) {\n    if (isFunction(actionMapValue) || isNil(actionMapValue)) {\n      return true;\n    }\n\n    if (isArray(actionMapValue)) {\n      var _actionMapValue$ = actionMapValue[0],\n          payload = _actionMapValue$ === void 0 ? identity : _actionMapValue$,\n          meta = actionMapValue[1];\n      return isFunction(payload) && isFunction(meta);\n    }\n\n    return false;\n  }\n\n  return arrayToObject(Object.keys(actionMap), function (partialActionCreators, type) {\n    var _objectSpread2;\n\n    var actionMapValue = actionMap[type];\n    invariant(isValidActionMapValue(actionMapValue), 'Expected function, undefined, null, or array with payload and meta ' + (\"functions for \" + type));\n    var prefixedType = prefix ? \"\" + prefix + namespace + type : type;\n    var actionCreator = isArray(actionMapValue) ? createAction.apply(void 0, [prefixedType].concat(actionMapValue)) : createAction(prefixedType, actionMapValue);\n    return _objectSpread({}, partialActionCreators, (_objectSpread2 = {}, _objectSpread2[type] = actionCreator, _objectSpread2));\n  });\n}\n\nfunction actionCreatorsFromIdentityActions(identityActions, options) {\n  var actionMap = arrayToObject(identityActions, function (partialActionMap, type) {\n    var _objectSpread3;\n\n    return _objectSpread({}, partialActionMap, (_objectSpread3 = {}, _objectSpread3[type] = identity, _objectSpread3));\n  });\n  var actionCreators = actionMapToActionCreators(actionMap, options);\n  return arrayToObject(Object.keys(actionCreators), function (partialActionCreators, type) {\n    var _objectSpread4;\n\n    return _objectSpread({}, partialActionCreators, (_objectSpread4 = {}, _objectSpread4[camelCase(type)] = actionCreators[type], _objectSpread4));\n  });\n}","import curry from 'just-curry-it';\nimport createAction from './createAction';\nexport default (function (type, payloadCreator) {\n  return curry(createAction(type, payloadCreator), payloadCreator.length);\n});","export default (function (value) {\n  return value === undefined;\n});","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport isPlainObject from './utils/isPlainObject';\nimport identity from './utils/identity';\nimport isNil from './utils/isNil';\nimport isUndefined from './utils/isUndefined';\nimport toString from './utils/toString';\nimport { ACTION_TYPE_DELIMITER } from './constants';\nexport default function handleAction(type, reducer, defaultState) {\n  if (reducer === void 0) {\n    reducer = identity;\n  }\n\n  var types = toString(type).split(ACTION_TYPE_DELIMITER);\n  invariant(!isUndefined(defaultState), \"defaultState for reducer handling \" + types.join(', ') + \" should be defined\");\n  invariant(isFunction(reducer) || isPlainObject(reducer), 'Expected reducer to be a function or object with next and throw reducers');\n\n  var _ref = isFunction(reducer) ? [reducer, reducer] : [reducer.next, reducer.throw].map(function (aReducer) {\n    return isNil(aReducer) ? identity : aReducer;\n  }),\n      nextReducer = _ref[0],\n      throwReducer = _ref[1];\n\n  return function (state, action) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    var actionType = action.type;\n\n    if (!actionType || types.indexOf(toString(actionType)) === -1) {\n      return state;\n    }\n\n    return (action.error === true ? throwReducer : nextReducer)(state, action);\n  };\n}","export default (function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var initialState = typeof args[args.length - 1] !== 'function' && args.pop();\n  var reducers = args;\n\n  if (typeof initialState === 'undefined') {\n    throw new TypeError('The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.');\n  }\n\n  return function (prevState, value) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      args[_key2 - 2] = arguments[_key2];\n    }\n\n    var prevStateIsUndefined = typeof prevState === 'undefined';\n    var valueIsUndefined = typeof value === 'undefined';\n\n    if (prevStateIsUndefined && valueIsUndefined && initialState) {\n      return initialState;\n    }\n\n    return reducers.reduce(function (newState, reducer) {\n      return reducer.apply(undefined, [newState, value].concat(args));\n    }, prevStateIsUndefined && !valueIsUndefined && initialState ? initialState : prevState);\n  };\n});","import ownKeys from './ownKeys';\nexport default function hasGeneratorInterface(handler) {\n  var keys = ownKeys(handler);\n  var hasOnlyInterfaceNames = keys.every(function (ownKey) {\n    return ownKey === 'next' || ownKey === 'throw';\n  });\n  return keys.length && keys.length <= 2 && hasOnlyInterfaceNames;\n}","import isPlainObject from './isPlainObject';\nimport isMap from './isMap';\nimport hasGeneratorInterface from './hasGeneratorInterface';\nimport flattenWhenNode from './flattenWhenNode';\nexport default flattenWhenNode(function (node) {\n  return (isPlainObject(node) || isMap(node)) && !hasGeneratorInterface(node);\n});","import reduceReducers from 'reduce-reducers';\nimport invariant from 'invariant';\nimport isPlainObject from './utils/isPlainObject';\nimport isMap from './utils/isMap';\nimport ownKeys from './utils/ownKeys';\nimport flattenReducerMap from './utils/flattenReducerMap';\nimport handleAction from './handleAction';\nimport get from './utils/get';\nexport default function handleActions(handlers, defaultState, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  invariant(isPlainObject(handlers) || isMap(handlers), 'Expected handlers to be a plain object.');\n  var flattenedReducerMap = flattenReducerMap(handlers, options);\n  var reducers = ownKeys(flattenedReducerMap).map(function (type) {\n    return handleAction(type, get(type, flattenedReducerMap), defaultState);\n  });\n  var reducer = reduceReducers.apply(void 0, reducers.concat([defaultState]));\n  return function (state, action) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    return reducer(state, action);\n  };\n}","import combineActions from './combineActions';\nimport createAction from './createAction';\nimport createActions from './createActions';\nimport createCurriedAction from './createCurriedAction';\nimport handleAction from './handleAction';\nimport handleActions from './handleActions';\nexport { combineActions, createAction, createActions, createCurriedAction, handleAction, handleActions };","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","import * as actionTypes from './actionTypes'\n\n/**\n * Add an action-to-event mapping\n * @param  {Object} mapping A mapping object\n * @return {action}          A redux action.\n */\nexport function mapEvents (mapping) {\n  return {\n    type: actionTypes.MAP_EVENTS,\n    payload: mapping\n  }\n}\n\n/* Interface actions */\n\n/**\n * Add a listener for a specified event type.\n *\n * @param {string} type The event type to add the listener on.\n * @param {Function} listener The event listener to be added.\n * @return {Action} action A redux action.\n */\nexport function on (type, listener) {\n  return {\n    type: actionTypes.EVENTS_ON,\n    payload: {\n      eventType: type,\n      listener: listener\n    }\n  }\n}\n\n/**\n * Remove a listener from a specified event type.\n *\n * @param {string} type The event type to remove the listener from.\n * @param {Function} listener The event listener to be removed.\n * @return {Action} action A redux action.\n */\nexport function off (type, listener) {\n  return {\n    type: actionTypes.EVENTS_OFF,\n    payload: {\n      eventType: type,\n      listener: listener\n    }\n  }\n}\n\n/**\n * Add a global event listener.\n *\n * @param {Function} listener The event listener to be added.\n * @return {Action} action A redux action.\n */\nexport function subscribe (listener) {\n  return {\n    type: actionTypes.EVENTS_SUBSCRIBE,\n    payload: listener\n  }\n}\n\n/**\n * Remove a global event listener.\n *\n * @param {Function} listener The event listener to be removed.\n * @return {Action} action A redux action.\n */\nexport function unsubscribe (listener) {\n  return {\n    type: actionTypes.EVENTS_UNSUBSCRIBE,\n    payload: listener\n  }\n}\n\n/* Internal actions */\n\n/**\n * Emits an event of the specified type.\n *\n * @method emitEvent\n * @param {Object} payload Information of the event to emit.\n * @throws {Error} Invalid event type\n * @return action An EVENTS_EMIT action.\n */\nexport function emitEvent (type, ...args) {\n  if (type === undefined) {\n    throw Error('Attempted to emit an event without a type.')\n  }\n\n  return {\n    type: actionTypes.EVENTS_EMIT,\n    payload: { eventType: type, args }\n  }\n}\n\n/**\n * Define an alias for an event type.\n *\n * @method alias\n * @param {string} type The event type for which to add an alias.\n * @param {string} alias The alias name for the event type.\n */\nexport function aliasEvent (type, alias) {\n  if (type === undefined || alias === undefined) {\n    throw Error('Invalid attempt to alias an event.')\n  }\n\n  return {\n    type: actionTypes.EVENTS_ALIAS,\n    payload: { eventType: type, alias }\n  }\n}\n","/**\n * The Basic Error object. Provides information about an error that occurred in the SDK.\n * @public\n * @static\n * @typedef {Object} BasicError\n * @memberof api\n * @property {string} code The code of the error. If no code is known, this will be 'NO_CODE'.\n * @property {string} message A human-readable message to describe the error. If no message is known, this will be 'An error occurred'.\n */\n\nexport {\n  authCodes,\n  callCodes,\n  callHistoryCodes,\n  groupsCodes,\n  messagingCodes,\n  mwiCodes,\n  sipEventCodes,\n  clickToCallCodes,\n  bridgeCodes,\n  subscriptionCodes,\n  presenceCodes,\n  usersCodes,\n  webrtcCodes\n} from './codes'\n\nexport default class BasicError {\n  constructor ({ message, code }) {\n    this.name = 'BasicError'\n    this.code = code || 'NO_CODE'\n    this.message = message ? `${message}` : 'An error occurred.'\n  }\n}\n","export function getProperty(obj, property) {\n    return ((typeof obj[property]) === 'undefined') ? null : obj[property];\n}\n\n//WARNING: This function probably does not do what you think.\nexport function compose(base, extendme) {\n    var prop;\n    for (prop in base) {\n        if (typeof base[prop] === 'function' && !extendme[prop]) {\n            extendme[prop] = base[prop].bind(base);\n        }\n    }\n}\n\nexport function getTimestamp() {\n    return new Date().getTime();\n}\n\nexport function parseAddress(address, contact) {\n    var displayName = '';\n\n    if (address.indexOf('sip:', 0) > -1) {\n        address = address.replace('sip:', '');\n    }\n\n    if (contact === undefined || contact === null) {\n        return (address.indexOf('@', 0) > -1) ? 'sip:' + address : address;\n    }\n    if (contact.firstName && contact.firstName !== '') {\n        displayName += contact.firstName;\n    }\n    if (contact.lastName && contact.lastName !== '') {\n        if (displayName === '') {\n            displayName += contact.lastName;\n        } else {\n            displayName += ' ' + contact.lastName;\n        }\n    }\n    if (displayName === '') {\n        return (address.indexOf('@', 0) > -1) ? 'sip:' + address : address;\n    }\n    return displayName + '<' + ((address.indexOf('@', 0) > -1) ? 'sip:' + address : address) + '>';\n}\n\nexport function getInteger(val) {\n    if (isNaN(val) || val === null || val === undefined) {\n        return 0;\n    }\n    return parseInt(val);\n}\n\nexport function Queue() {\n    var items;\n\n    this.enqueue = function(item) {\n        if (typeof(items) === 'undefined') {\n            items = [];\n        }\n        items.push(item);\n    };\n\n    this.dequeue = function() {\n        return items.shift();\n    };\n\n    this.peek = function() {\n        return items[0];\n    };\n\n    this.size = function() {\n        return typeof(items) === 'undefined' ? 0 : items.length;\n    };\n}\n\n/*\n * Similar to http://api.jquery.com/jquery.param/\n */\nexport function serialize(object) {\n    var encodedString = '',\n        prop;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            if (encodedString.length > 0) {\n                encodedString += '&';\n            }\n            encodedString += encodeURI(prop + '=' + object[prop]);\n        }\n    }\n    return encodedString;\n}\n\nexport function extend(target, object) {\n    var prop;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            target[prop] = object[prop];\n        }\n    }\n    return target;\n}\n\n/*\n * Always is a Promise.finally replacement helper. Will call the handler as part of the promise chain without\n * affecting the result of the promise.\n *\n * @param  {Promise} promise The promise to attach the finally handler to.\n * @param  {Function} handler A function which will be called when the passed in promise is settled (resolved or rejected)\n * @return {Promise} The new Promise with the handler attached.\n */\nexport function always(promise, handler) {\n    return promise.then(\n        // Success path, attach the always handler and then just a continuation of the param.\n        param => new Promise(resolve => resolve(handler())).then(() => param),\n        // Failure path, attach the always handler and then just a continuation with the re-thrown error.\n        error => new Promise(resolve => resolve(handler())).then(() => { throw error; })\n    );\n}\n\n\nexport function Utils({ LogManager: _logManager }) {\n    var logger;\n\n    this.callFunctionIfExist = function callFunctionIfExist() {\n        // Get the logger on first usage, instead of on LogManager instantiation.\n        // Avoids dependency issues while testing.\n        if(!logger) {\n            logger = _logManager.getLogger('utils');\n        }\n\n        var args = Array.prototype.slice.call(arguments),\n            func;\n        func = args.shift();\n        if (typeof(func) === 'function') {\n            try {\n                return func.apply(null, args);\n            } catch (e) {\n                logger.error('Exception occured: ' + e.message + '\\n' + e.stack);\n            }\n        }\n    };\n}\n\nexport function makeSafeForCSS(name) {\n    if(!name){\n        return name;\n    } else {\n        return name.replace(/[^a-z0-9]/g, function(s) {\n            var c = s.charCodeAt(0);\n            if (c === 32) {\n                return '-';\n            }\n            if (c >= 65 && c <= 90) {\n                return '_' + s.toLowerCase();\n            }\n            return '__' + ('000' + c.toString(16)).slice(-4);\n        });\n    }\n}\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","export default {\n    'WEBRTC': {\n        'PLUGIN_ID': 'fcsPlugin',\n        'MEDIA_STATE': {\n            NOT_FOUND: 'notfound',\n            SEND_RECEIVE: 'sendrecv',\n            SEND_ONLY: 'sendonly',\n            RECEIVE_ONLY: 'recvonly',\n            INACTIVE: 'inactive'\n        },\n        'RTC_SIGNALING_STATE': {\n            STABLE: 'stable',\n            HAVE_LOCAL_OFFER: 'have-local-offer',\n            HAVE_REMOTE_OFFER: 'have-remote-offer',\n            HAVE_LOCAL_PRANSWER: 'have-local-pranswer',\n            HAVE_REMOTE_PRANSWER: 'have-remote-pranswer',\n            CLOSED: 'closed'\n        },\n        SDP: {\n            TYPE: {\n                'OFFER': 'offer',\n                'ANSWER': 'answer',\n                'PRANSWER': 'pranswer'\n            },\n            OPERATION: {\n                'START_CALL': 'START_CALL',\n                'ANSWER_CALL': 'ANSWER_CALL',\n                'HOLD': 'HOLD',\n                'UNHOLD': 'UNHOLD',\n                'UPDATE': 'UPDATE',\n                'RESPOND': 'RESPOND',\n                'REOFFER': 'REOFFER',\n                'DATA_CHANNEL': 'DATA_CHANNEL'\n            },\n            STEP: {\n                'PRE_SET_LOCAL': 'PRE_SET_LOCAL',\n                'PRE_SET_REMOTE': 'PRE_SET_REMOTE',\n                'PRE_SEND_LOCAL': 'PRE_SEND_LOCAL'\n            },\n            BUNDLE_POLICY: {\n                MAX_COMPAT: 'max-compat',\n                MAX_BUNDLE: 'max-bundle',\n                BALANCED: 'balanced',\n                DISABLED: 'DISABLED'\n            }\n        },\n        'ERROR': {\n            'ICE_ICELITE': 'ICE_ICELITE'\n        }\n    },\n    'STRING': {\n        'NEW_LINE': '\\n',\n        'CARRIAGE_RETURN': '\\r',\n        'VIDEO': 'video',\n        'AUDIO': 'audio'\n    },\n    'SDP': {\n        'A_LINE': 'a=',\n        'M_LINE': 'm=',\n        'CRYPTO': 'crypto',\n        'FINGERPRINT': 'fingerprint',\n        'ICE_UFRAG': 'ice-ufrag:',\n        'ICE_PWD': 'ice-pwd:',\n        'NACK': 'nack',\n        'NACKPLI': 'nack pli',\n        'SETUP_ACTIVE': 'a=setup:active',\n        'SETUP_PASSIVE': 'a=setup:passive',\n        'SETUP_ACTPASS': 'a=setup:actpass',\n        'BANDWIDTH': {\n            'MAXPLAYBACKRATE': 'maxplaybackrate',\n            'MAXAVERAGEBITRATE': 'maxaveragebitrate',\n            'FEC': 'useinbandfec',\n            'DTX': 'usedtx',\n            'PTIME': 'ptime'\n        }\n    },\n    'HTTP_METHOD': {\n        'GET': 'GET',\n        'POST': 'POST',\n        'PUT': 'PUT',\n        'DELETE': 'DELETE',\n        'OPTIONS': 'OPTIONS'\n    },\n    'WEBSOCKET': {\n        'PROTOCOL': {\n            'SECURE': 'wss',\n            'NONSECURE': 'ws'\n        },\n        'DEFAULT_PORT': '8581',\n        'STATUS': {\n            'OPENED': 1,\n            'ALREADY_OPENED': 2,\n            'CREATE_ERROR': 3,\n            'CONNECTION_ERROR': 4,\n            'NOT_FOUND': 5,\n            'CONNECTION_CLOSED': 6\n        },\n        'FOREGROUND_INTERVAL': 10000,\n        'BACKGROUND_INTERVAL': 60000\n    },\n    'LONG_POLLING': {\n        'STATUS': {\n            'TRIGGERED_CONNECT': 1\n        }\n    },\n    'NOTIFICATION': {\n        'STATUS': {\n            'NOT_STARTED': 3,\n            'CONFIGURATION_ERROR': 4,\n            'STOP_FOR_LP_TO_WS_UPGRADE': 5\n        }\n    },\n    'EVENT': {\n        'XHR_REQUEST_NOT_INITIALIZED': 'XHR_REQUEST_NOT_INITIALIZED',\n        'DEVICE_SUBSCRIPTION_STARTED': 'DEVICE_SUBSCRIPTION_STARTED',\n        'DEVICE_SUBSCRIPTION_STOPPED': 'DEVICE_SUBSCRIPTION_STOPPED',\n        'DEVICE_SUBSCRIPTION_ENDED': 'DEVICE_SUBSCRIPTION_ENDED',\n        'CONNECTION_REESTABLISHED': 'CONNECTION_REESTABLISHED',\n        'CONNECTION_LOST': 'CONNECTION_LOST',\n        'TOKEN_AUTH_STARTED': 'TOKEN_AUTH_STARTED',\n        'BASIC_AUTH_STARTED': 'BASIC_AUTH_STARTED',\n        'TOKEN_NOT_FOUND': 'TOKEN_NOT_FOUND',\n        'SESSION_EXPIRED': 'SESSION_EXPIRED',\n        'NOTIFICATION_CHANNEL_LOST': 'NOTIFICATION_CHANNEL_LOST',\n        'FCS_SETUP_COMPLETED': 'FCS_SETUP_COMPLETED',\n        'WEBSOCKET_CONNECTED': 'WEBSOCKET_CONNECTED',\n        'WEBSOCKET_ERROR': 'WEBSOCKET_ERROR',\n        'WEBSOCKET_DISCONNECTED': 'WEBSOCKET_DISCONNECTED',\n        'WEBSOCKET_CONNECTIVITY_CHECK': 'WEBSOCKET_CONNECTIVITY_CHECK',\n        'NETWORK_ERROR': 'NETWORK_ERROR',\n        'NETWORK_CHANGED' : 'NETWORK_CHANGED',\n        'SERVER_CHANGED' : 'SERVER_CHANGED'\n    },\n    'SUBSCRIPTION_EVENT': {\n        'TOKEN_OR_SESSION_LOSS': 'TOKEN_OR_SESSION_LOSS',\n        'SUBSCRIPTION_SUCCESS': 'SUBSCRIPTION_SUCCESS',\n        'EXTEND_SUCCESS': 'EXTEND_SUCCESS',\n        'EXTEND_FAILURE': 'EXTEND_FAILURE',\n        'REGULAR_EXTEND_PROCESSING': 'REGULAR_EXTEND_PROCESSING',\n        'STOP_SUCCESS': 'STOP_SUCCESS',\n        'STOP_FAILURE': 'STOP_FAILURE',\n        'CONNECTION_LOSS': 'CONNECTION_LOSS',\n        'SET_NOTIFICATION_ONERROR': 'SET_NOTIFICATION_ONERROR',\n        'SET_NOTIFICATION_ONSUCCESS': 'SET_NOTIFICATION_ONSUCCESS',\n        'TRIGGER_LONG_POLLING': 'TRIGGER_LONG_POLLING',\n        'RESTART_SUBSCRIPTION_REQUEST': 'RESTART_SUBSCRIPTION_REQUEST'\n    },\n    'NOTIFICATION_EVENT': {\n        'NOTIFICATION_SUCCESS': 'NOTIFICATION_SUCCESS',\n        'NOTIFICATION_FAILURE': 'NOTIFICATION_FAILURE'\n    },\n    'CACHE': {\n        'NOTIFYURL': 'NotificationUrl',\n        'NOTIFYID': 'NotificationId',\n        'SUBSCRIBEURL': 'SubscriptionUrl',\n        'SUBSCRIBEEXPIRY': 'SubscriptionExpiry',\n        'SUBSCRIBEEXTENDINTERVAL': 'SubscriptionExtendInterval',\n        'SESSION': 'SESSION'\n    },\n    'TIMEOUT': {\n        'STAGGERED_MAX': 5000,\n        'STAGGERED_MIN': 300,\n        'CHECK_INTERVAL': 10000,\n        'RETRY_START': 10000,\n        'RETRY_LIMIT': 640000,\n        'RETRY_MULTIPLIER': 2,\n        'WS_ERROR': 0\n    },\n    'PLATFORM': {\n        'IOS': 'iOS'\n    },\n    'TRICKLE': {\n        'NONE': 'none',\n        'HALF': 'half',\n        'FULL': 'full'\n    }\n};\n","const PREFIX = '@@KANDY/'\n\nexport const MAKE_CALL = PREFIX + 'MAKE_CALL'\nexport const MAKE_CALL_FINISH = PREFIX + 'MAKE_CALL_FINISH'\nexport const CALL_INCOMING = PREFIX + 'CALL_INCOMING'\nexport const ANSWER_CALL = PREFIX + 'ANSWER_CALL'\nexport const ANSWER_CALL_FINISH = PREFIX + 'ANSWER_CALL_FINISH'\nexport const IGNORE_CALL = PREFIX + 'IGNORE_CALL'\nexport const IGNORE_CALL_FINISH = PREFIX + 'IGNORE_CALL_FINISH'\nexport const REJECT_CALL = PREFIX + 'REJECT_CALL'\nexport const REJECT_CALL_FINISH = PREFIX + 'REJECT_CALL_FINISH'\nexport const END_CALL = PREFIX + 'END_CALL'\nexport const END_CALL_FINISH = PREFIX + 'END_CALL_FINISH'\n\nexport const CALL_STATE_CHANGE = PREFIX + 'CALL_STATE_CHANGE'\nexport const CALL_MEDIA_STATE_CHANGE = PREFIX + 'CALL_MEDIA_STATE_CHANGE'\n\nexport const START_LOCAL_VIDEO = PREFIX + 'START_LOCAL_VIDEO'\nexport const START_LOCAL_VIDEO_FINISH = PREFIX + 'START_LOCAL_VIDEO_FINISH'\nexport const STOP_LOCAL_VIDEO = PREFIX + 'STOP_LOCAL_VIDEO'\nexport const STOP_LOCAL_VIDEO_FINISH = PREFIX + 'STOP_LOCAL_VIDEO_FINISH'\n\n/*\n *   Mid-Call operations.\n */\nexport const MUTE_CALL = PREFIX + 'MUTE_CALL'\nexport const MUTE_CALL_FINISH = PREFIX + 'MUTE_CALL_FINISH'\nexport const UNMUTE_CALL = PREFIX + 'UNMUTE_CALL'\nexport const UNMUTE_CALL_FINISH = PREFIX + 'UNMUTE_CALL_FINISH'\n\nexport const SILENCE_CALL = PREFIX + 'SILENCE_CALL'\nexport const SILENCE_CALL_FINISH = PREFIX + 'SILENCE_CALL_FINISH'\nexport const UNSILENCE_CALL = PREFIX + 'UNSILENCE_CALL'\nexport const UNSILENCE_CALL_FINISH = PREFIX + 'UNSILENCE_CALL_FINISH'\n\nexport const SET_CUSTOM_PARAMETERS = PREFIX + 'SET_CUSTOM_PARAMETERS'\n\nexport const START_VIDEO = PREFIX + 'START_VIDEO'\nexport const START_VIDEO_FINISH = PREFIX + 'START_VIDEO_FINISH'\nexport const STOP_VIDEO = PREFIX + 'STOP_VIDEO'\nexport const STOP_VIDEO_FINISH = PREFIX + 'STOP_VIDEO_FINISH'\n\nexport const HOLD_CALL = PREFIX + 'HOLD_CALL'\nexport const HOLD_CALL_FINISH = PREFIX + 'HOLD_CALL_FINISH'\nexport const UNHOLD_CALL = PREFIX + 'UNHOLD_CALL'\nexport const UNHOLD_CALL_FINISH = PREFIX + 'UNHOLD_CALL_FINISH'\n\nexport const START_SCREENSHARE = PREFIX + 'START_SCREENSHARE'\nexport const START_SCREENSHARE_FINISH = PREFIX + 'START_SCREENSHARE_FINISH'\nexport const STOP_SCREENSHARE = PREFIX + 'STOP_SCREENSHARE'\nexport const STOP_SCREENSHARE_FINISH = PREFIX + 'STOP_SCREENSHARE_FINISH'\n\nexport const FORWARD_CALL = PREFIX + 'FORWARD_CALL'\nexport const FORWARD_CALL_FINISH = PREFIX + 'FORWARD_CALL_FINISH'\n\nexport const DIRECT_TRANSFER = PREFIX + 'DIRECT_TRANSFER'\nexport const DIRECT_TRANSFER_FINISH = PREFIX + 'DIRECT_TRANSFER_FINISH'\n\nexport const CONSULTATIVE_TRANSFER = PREFIX + 'CONSULTATIVE_TRANSFER'\nexport const CONSULTATIVE_TRANSFER_FINISH = PREFIX + 'CONSULTATIVE_TRANSFER_FINISH'\n\nexport const JOIN_CALL = PREFIX + 'JOIN_CALL'\nexport const JOIN_CALL_FINISH = PREFIX + 'JOIN_CALL_FINISH'\n\nexport const SEND_CUSTOM_PARAMETERS = PREFIX + 'SEND_CUSTOM_PARAMETERS'\nexport const SEND_CUSTOM_PARAMETERS_FINISH = PREFIX + 'SEND_CUSTOM_PARAMETERS_FINISH'\n\nexport const SEND_DTMF = PREFIX + 'SEND_DTMF'\nexport const SEND_DTMF_FINISH = PREFIX + 'SEND_DTMF_FINISH'\n\n// Media devices.\nexport const CHECK_DEVICES = PREFIX + 'CHECK_DEVICES'\nexport const CHECK_DEVICES_FINISH = PREFIX + 'CHECK_DEVICES_FINISH'\n\nexport const SET_DEFAULT_DEVICES = PREFIX + 'SET_DEFAULT_DEVICES'\nexport const SET_DEFAULT_DEVICES_FINISH = PREFIX + 'SET_DEFAULT_DEVICES_FINISH'\n\nexport const PROMPT_USER_MEDIA = PREFIX + 'PROMPT_USER_MEDIA'\nexport const PROMPT_USER_MEDIA_FINISH = PREFIX + 'PROMPT_USER_MEDIA_FINISH'\n\nexport const CHANGE_SPEAKER = PREFIX + 'CHANGE_SPEAKER'\nexport const CHANGE_SPEAKER_FINISH = PREFIX + 'CHANGE_SPEAKER_FINISH'\n\nexport const CHANGE_INPUT_DEVICES = PREFIX + 'CHANGE_INPUT_DEVICES'\nexport const CHANGE_INPUT_DEVICES_FINISH = PREFIX + 'CHANGE_INPUT_DEVICES_FINISH'\n\n// Media\nexport const INIT_MEDIA = PREFIX + 'INIT_MEDIA'\nexport const INIT_MEDIA_FINISH = PREFIX + 'INIT_MEDIA_FINISH'\n\n// Call Me\nexport const MAKE_CALL_ANONYMOUS = PREFIX + 'MAKE_CALL_ANONYMOUS'\n\n// Audio Bridge\nexport const CREATE_AUDIO_BRIDGE = PREFIX + 'CREATE_AUDIO_BRIDGE'\nexport const CREATE_AUDIO_BRIDGE_FINISH = PREFIX + 'CREATE_AUDIO_BRIDGE_FINISH'\n\nexport const CLOSE_AUDIO_BRIDGE = PREFIX + 'CLOSE_AUDIO_BRIDGE'\nexport const CLOSE_AUDIO_BRIDGE_FINISH = PREFIX + 'CLOSE_AUDIO_BRIDGE_FINISH'\n\nexport const BRIDGE_ADD_CALL = PREFIX + 'BRIDGE_ADD_CALL'\nexport const BRIDGE_ADD_CALL_FINISH = PREFIX + 'BRIDGE_ADD_CALL_FINISH'\n\nexport const BRIDGE_REMOVE_CALL = PREFIX + 'BRIDGE_REMOVE_CALL'\nexport const BRIDGE_REMOVE_CALL_FINISH = PREFIX + 'BRIDGE_REMOVE_CALL_FINISH'\n\nexport const MUTE_AUDIO_BRIDGE = PREFIX + 'MUTE_AUDIO_BRIDGE'\nexport const MUTE_AUDIO_BRIDGE_FINISH = PREFIX + 'MUTE_AUDIO_BRIDGE_FINISH'\n\nexport const UNMUTE_AUDIO_BRIDGE = PREFIX + 'UNMUTE_AUDIO_BRIDGE'\nexport const UNMUTE_AUDIO_BRIDGE_FINISH = PREFIX + 'UNMUTE_AUDIO_BRIDGE_FINISH'\n\nexport const SILENCE_AUDIO_BRIDGE = PREFIX + 'SILENCE_AUDIO_BRIDGE'\nexport const SILENCE_AUDIO_BRIDGE_FINISH = PREFIX + 'SILENCE_AUDIO_BRIDGE_FINISH'\n\nexport const UNSILENCE_AUDIO_BRIDGE = PREFIX + 'UNSILENCE_AUDIO_BRIDGE'\nexport const UNSILENCE_AUDIO_BRIDGE_FINISH = PREFIX + 'UNSILENCE_AUDIO_BRIDGE_FINISH'\n\nexport const UPDATE_AUDIO_BRIDGE_CALLS = PREFIX + 'UPDATE_AUDIO_BRIDGE_CALLS'\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","// Libraries.\nimport { mergeAllWith, isArray, isPlainObject } from 'lodash/fp'\nimport paramParser from 'query-string'\nimport { call, put } from 'redux-saga/effects'\n\n/**\n * Deeply merges the values of multiple objects. Objects on the left receive the values from objects on their right.\n * Unlike lodash's default merge behavior this doesn't merge arrays.\n *\n * @name mergeValues\n * @param {...Object} objects - Objects to merge\n * @return {Object} A new object containing the merged values.\n */\nexport function mergeValues (...objects) {\n  return mergeAllWith((leftValue, rightValue) => {\n    // Overwrite the default behavior of lodash's merge for arrays and simply\n    // clobber what's on the left so we don't end up with merged arrays.\n    if (isArray(leftValue)) {\n      return rightValue\n    }\n  }, objects)\n}\n\n/**\n * Utility function to convert an object to a query string.\n *\n * @param {Object} params An object of query parameters to be parsed and converted for use in a URL string\n * @param {Object} [options] Options to be passed to the query-string library\n * * @param {String} [options.arrayFormat] Format in which to compose array values which were passed as query parameters\n */\nexport function toQueryString (params = {}, options = {}) {\n  if (Object.keys(params).length > 0) {\n    const stringifiedParams = paramParser.stringify(params, options)\n    return '?' + stringifiedParams\n  }\n  return ''\n}\n\n/**\n * Higher-order function to auto-restart sagas when they crash.\n * Based on: https://github.com/redux-saga/redux-saga/pull/644#issuecomment-266454875\n * @method autoRestart\n * @param  {Generator} saga The saga to wrap.\n * @return {Generator} Wrapped saga.\n */\nexport function autoRestart (saga) {\n  return function * autoRestarting (...args) {\n    // Only restart the saga if it crashed; avoid restarting it if\n    //      it returned normally.\n    let shouldRestart = false\n    do {\n      try {\n        yield call(saga, ...args)\n        shouldRestart = false\n      } catch (e) {\n        // TODO: Re-add this log line.\n        // Importing the LogManager in this file breaks tests for an unknown\n        //    reason. Should find out why so that we can log in our utils.\n        // log.error(`Unhandled error in saga ${saga.name}.`, e)\n        console.log(`Unhandled error in saga ${saga.name}.`, e)\n        shouldRestart = true\n      }\n    } while (shouldRestart)\n  }\n}\n\n/**\n * Forwards the actions by directly dispatching them.\n * For example, this can be used with a takeEvery effect to grab actions from a channel and dispatch them.\n * @param {Object} action The action to be forwarded.\n * @example\n * const channel = eventChannel(...)\n * yield takeEvery(channel, forwardAction)\n */\nexport function * forwardAction (action) {\n  yield put(action)\n}\n\n/**\n * Ensures that services are in the same format understood by the server regardless,\n * of whether the client provides services as strings or objects.\n * @param {Array} services The list of services requested by the client.\n * @return {Array} A normalized list of services requested by the client.\n */\nexport function normalizeServices (services = []) {\n  return services.map(service => {\n    if (isPlainObject(service) && service.hasOwnProperty('service')) {\n      return service\n    }\n    return { service: service }\n  })\n}\n\n/**\n * A deferred promise\n * Don't use this unless you know what you are doing:\n *  <https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern>\n * @returns An object a with promise property and functions to resolve and reject\n */\nexport function defer () {\n  const d = {}\n  d.promise = new Promise((resolve, reject) => {\n    d.resolve = resolve\n    d.reject = reject\n  })\n  return d\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// Requests plugin.\nimport { RESPONSE } from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { getCommonOptions } from './utils'\n\n// Libraries.\nimport { mergeValues } from '../common/utils'\nimport { get } from 'lodash/fp'\nimport { put, take, call } from 'redux-saga/effects'\n\n/**\n * Creates an effect description that instructs the middleware to perform a request with the provided options.\n * This effect is blocking and will yield a RESPONSE action on completion.\n *\n * @param {Object} options See https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @param {string} options.url The url to perform the request on.\n * @param {string} options.method The HTTP method to use for the request.\n * @param {Object} options.headers Object literal of headers you want to add to the request.\n * @param {Object} [options.queryParams] The parameters to be added to the query string\n * @param {string} [options.responseType] The data type assumed to be received in the response body\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] Any body that you want to add to your request.\n * @return A blocking redux-saga effect that will instruct the middleware to wait for the request to be fulfilled or until it fails.\n */\nexport default function request (options, commonOptions) {\n  return call(requestSaga, options, commonOptions)\n}\n\n/*\n * The saga backing the request effect.\n */\nexport function * requestSaga (options, manualOptions) {\n  /*\n   * Some requests can have special-cases where they don't want to use the\n   *    \"common\" options. Allow them to pass in \"manual\" options that should be\n   *    used instead.\n   * For example, the CPaaS \"upload file\" request cannot use the \"common\"\n   *    Content-Type header.\n   */\n  if (manualOptions) {\n    options = mergeValues(options, manualOptions)\n  } else {\n    // Get the common request options that should be used for all requests.\n    const commonOptions = yield call(getCommonOptions, options.url)\n\n    options = mergeValues(options, commonOptions)\n  }\n\n  // Dispatch the request action for the sagas to process.\n  const requestAction = yield put(actions.request(options))\n  const responseAction = yield take(\n    action => action.type === RESPONSE && get('meta.requestId', action) === requestAction.meta.requestId\n  )\n\n  return responseAction\n}\n","const prefix = '@@KANDY/'\n\nexport const PROCESS_NOTIFICATION = prefix + 'PROCESS_NOTIFICATION'\nexport const PROCESS_NOTIFICATION_FINISH = prefix + 'PROCESS_NOTIFICATION_FINISH'\nexport const NOTIFICATION_RECEIVED = prefix + 'NOTIFICATION_RECEIVED'\n\nexport const ENABLE_NOTIFICATION_CHANNEL = prefix + 'ENABLE_NOTIFICATION_CHANNEL'\nexport const ENABLE_NOTIFICATION_CHANNEL_FINISH = prefix + 'ENABLE_NOTIFICATION_CHANNEL_FINISH'\n\nexport const REGISTER_APPLE_PUSH_NOTIFICATION = prefix + 'REGISTER_APPLE_PUSH_NOTIFICATION'\nexport const REGISTER_ANDROID_PUSH_NOTIFICATION = prefix + 'REGISTER_ANDROID_PUSH_NOTIFICATION'\n\nexport const UNREGISTER_APPLE_PUSH_NOTIFICATION = prefix + 'UNREGISTER_APPLE_PUSH_NOTIFICATION'\nexport const UNREGISTER_ANDROID_PUSH_NOTIFICATION = prefix + 'UNREGISTER_ANDROID_PUSH_NOTIFICATION'\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","import * as actionTypes from './actionTypes'\nimport { sanitizeSdesFromSdp, modifySdpBandwidth } from '../../callstack/utils'\nimport { createCodecRemover } from '@kandy-io/sdp-handlers'\n\n/**\n * Add or update a specific key within the store.config.\n *\n * @param {Object} values The values that will be placed in the store.\n * @param {string} [pluginName] The plugin name of the config being set.\n * @return {Action} action A redux action.\n */\nexport function update (values, pluginName = '') {\n  var payload\n  // Use the plugin name as a substate key, if present.\n  if (pluginName) {\n    payload = {\n      [pluginName]: values\n    }\n  } else {\n    payload = values\n  }\n\n  return {\n    type: actionTypes.CONFIG_UPDATE,\n    payload: payload\n  }\n}\n\n/**\n * Updates the SDP Handlers in the call plugin configs\n *\n * @method setSdpHandlers\n * @param {Array<call.SdpHandlerFunction>} sdpHandlers The list of SDP handler to set in the config.\n * @param {Object}                         options     Options to configure extra sdp handlers\n * @returns {Object} A flux standard action.\n */\nexport function setSdpHandlers (sdpHandlers, options) {\n  /*\n   * Set SDP handlers to be used for every operation:\n   *\n   * 1. Application provided SDP handlers.\n   *\n   * 2. Disable DTLS-SDES crypto method (ie. delete the line) if there's a better\n   *    crypto method enabled. WebRTC only allows one method to be enabled.\n   *    This is needed for interoperability with non-browser endpoints that include\n   *    SDES as a fallback method.\n   *\n   * 3. [optional] Disable H264 Codecs for video calls, used to reduce SDP size\n   *\n   * 4. Modify sdp and add bandwidth limits on it if bandwidth controls are provided.\n   */\n  if (options.removeH264Codecs) {\n    sdpHandlers.push(createCodecRemover(['H264']))\n  }\n  sdpHandlers.push(sanitizeSdesFromSdp)\n  sdpHandlers.push(modifySdpBandwidth)\n\n  return {\n    type: actionTypes.SET_SDP_HANDLERS,\n    payload: {\n      sdpHandlers\n    }\n  }\n}\n","const prefix = '@@KANDY/CONN/'\n\n// Actions to tell connectivity plugin what to do\nexport const WS_ATTEMPT_CONNECT = prefix + 'WS_ATTEMPT_CONNECT'\nexport const WS_CONNECT_FINISHED = prefix + 'WS_CONNECT_FINISHED'\nexport const WS_DISCONNECT = prefix + 'WS_DISCONNECT'\nexport const WS_DISCONNECT_FINISHED = prefix + 'WS_DISCONNECT_FINISHED'\nexport const WS_RECONNECT_FAILED = prefix + 'WS_RECONNECT_FAILED'\n\n// actions for hooking into connectivity plugin behaviour\nexport const WS_CLOSED = prefix + 'WS_CLOSED'\nexport const WS_ERROR = prefix + 'WS_ERROR'\n\nexport const LOST_CONNECTION = prefix + 'LOST_CONNECTION'\n\nexport const RECEIVE_SERVER_PING = prefix + 'RECEIVE_SERVER_PING'\nexport const RECEIVE_SERVER_PONG = prefix + 'RECEIVE_SERVER_PONG'\n\nexport const CHANGE_CONNECTIVITY_CHECKING = prefix + 'CHANGE_CONNECTIVITY_CHECKING'\nexport const CHANGE_PING_INTERVAL = prefix + 'CHANGE_PING_INTERVAL'\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };","import { extend } from '../utils';\n\nexport const mediaErrors = {\n    NOT_FOUND: 1,\n    NOT_ALLOWED: 2,\n    OPTIONS: 3,\n    WRONG_VERSION: 4,\n    NOT_INITIALIZED: 5,\n    NEW_VERSION_WARNING: 6,\n    INVALID_PARAMETER: 7,\n    NO_SCREENSHARING_WARNING: 8\n};\n\n/**\n * Call and Remote Call Control (RCC) related resources (IMRN, Click To Call, Call Disposition).\n *\n * Available for SPiDR since 3.0.0, and for RCC since 3.1.1.\n *\n * @name call\n * @namespace\n *\n * @memberOf fcs\n *\n * @version @{spidr.jsl.version}\n */\nexport function CallImpl({ CallManager: _callManager, RccManager: _rccManager}) {\n\n    /**\n     * This field provides the state of local video status like \"recvonly\", \"sendrecv\", \"sendrecv\" etc.\n     *\n     * This is a SPiDR service only member.\n     *\n     * @name fcs.call#localVideoState\n     * @field\n     * @type {number}\n     * @since 3.0.0\n     */\n    this.localVideoState = 0;\n\n    /**\n     * This field provides the state of remote video status like \"recvonly\", \"sendrecv\", \"sendrecv\" etc.\n     *\n     * This is a SPiDR service only member.\n     *\n     * @name fcs.call#remoteVideoState\n     * @field\n     * @since 3.0.0\n     * @type {number}\n     */\n    this.remoteVideoState = 0;\n\n    /**\n     * Sets the handler for received call notifications.\n     *\n     * This is a SPiDR and RCC service event.\n     *\n     * @name fcs.call#onReceived\n     * @event\n     * @param {fcs.call#Call} call The call object\n     * @example\n     * // SPiDR service example is as follows:\n     * // @since 3.0.0\n     * // This function listens received calls\n     * function callReceived(call) {\n     *    console.log(\"There is an incomming call...\");\n     *\n     *    //This function listens call state changes in JSL API level\n     *    call.onStateChange = function(state) {\n     *        onStateChange(call, state);\n     *    };\n     *\n     *    //This function listens media streams in JSL API level\n     *    call.onStreamAdded = function(stream) {\n     *        // Remote Video is turned on by the other end of the call\n     *        // Stream of Remote Video stream is passed into this function\n     *        onStreamAdded(stream);\n     *    };\n     *\n     *    // Answering the incomming call\n     *    call.answer(onAnswer, onFailure, isVideoAnswer);\n     * }\n     *\n     * fcs.call.onReceived = callReceived;\n     *\n     * // RCC service example is as follows:\n     * // @since 3.1.1\n     * function onCallReceived(call) {\n     *   console.log('There is an incomming call...');\n     *\n     *   call.onStateChange = function (state, statusCode, reasonText, data) {\n     *       onStateChange(call, state, data);\n     *   };\n     * }\n     *\n     * fcs.call.onReceived = onCallReceived;\n     *\n     */\n    this.onReceived = null;\n\n    /**\n     * Sets the handler for received CallReplace nofitication\n     *\n     * This is a SPIDR service event\n     *\n     * @name fcs.call#onCallReplaceReceived\n     * @event\n     * @param {fcs.call#Call} call the new call object\n     * @param {fcs.call#Call} call the call object to transferred\n     * @since 4.0.0\n     * @example\n     *\n     *\n     *  function onCallReplaceReceived(newlyCreatedCall, transferredCall) {\n     *       showInfoMessage(\"A Replacing call has received with id: \" + newlyCreatedCall.id);\n     *\n     *       // Assigning call object to currentCall variable to use in the application\n     *       currentCall = newlyCreatedCall;\n     *\n     *       //This function listens call state changes in JSL API level\n     *       newlyCreatedCall.call.onStateChange = function(state) {\n     *          onStateChange(newlyCreatedCall, state);\n     *       };\n     *\n     *       //This function listens call state changes in JSL API level\n     *       transferredCall.onMute = function(status) {\n     *           showInfoMessage(\"Call mute status: \" + status);\n     *       };\n     * }\n     *\n     * fcs.call.onCallReplaceReceived = onCallReplaceReceived;\n     */\n    this.onCallReplaceReceived = null;\n\n    /**\n     * Sets the handler for monitored device initiated outgoing call notifications.\n     *\n     * This is an RCC service only event.\n     *\n     * @name fcs.call#onOutgoingCall\n     * @event\n     * @since 3.1.1\n     * @param {fcs.call#Call} Call The call object\n     *\n     * @example\n     * //This function listens monitored device initiated outgoing calls\n     * function outgoingCall(call) {\n     *    console.log(\"A new call is successful!\");\n     *\n     *    //This function listens call state changes in JSL API level\n     *    outgoingCall.onStateChange = function(state, statusCode, reasonText, data) {\n     *      onStateChange(call, state, data);\n     *    };\n     *\n     * }\n     * fcs.call.onOutgoingCall = outgoingCall;\n     */\n    this.onOutgoingCall = null;\n\n    /**\n     * Monitor session is automatically and periodically extended after it is\n     * started (see {@link fcs.call#startMonitorDevice}). In case of extend\n     * monitor failure, given onMonitorSessionLost callback\n     * function is called.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#setOnMonitorSessionLost\n     * @function\n     * @since 3.1.1\n     * @param {function} callback callback function for on monitor session lost\n     *\n     * @example\n     * onSuccess = function () {\n     *   console.log('Start monitor success');\n     *\n     *   fcs.call.setOnMonitorSessionLost(\n     *       function () {\n     *           console.log('Extend monitor session lost! Please again start new monitor session.');\n     *       });\n     * }\n     *\n     * onFailure = function () {\n     *   console.log('Start monitor failure');\n     * }\n     *\n     * fcs.call.startMonitorDevice(deviceID, onSuccess, onFailure);\n     *\n     */\n    this.setOnMonitorSessionLost = function(callback) {\n        return _rccManager.setOnMonitorSessionLost({callback});\n    };\n\n    /**\n     * @deprecated DO NOT USE, fcs.setup will do initMedia immediatly, please see {@link fcs#setup} for more information\n     * @name fcs.call#initMedia\n     * @function\n     */\n\n    this.initMedia = function(onSuccess, onFailure, options) {\n        return _callManager.initMedia({options}, onSuccess, onFailure);\n    };\n\n    /**\n     * Starts a call.\n     *\n     * This is a SPiDR and RCC service method.\n     *\n     * @name fcs.call#startCall\n     * @function\n     * @param {string} from The caller's address (e.g. SIP URI) used to establish the call. This is a SPiDR service only parameter.\n     * @param {object} [contact] Contains users firstName and lastName. This is a SPiDR service only parameter.\n     * @param {string} [contact.firstName=\"John\"] First Name of the user\n     * @param {string} [contact.lastName=\"Doe\"] Last Name of the user\n     * @param {string} to The callee's address (e.g. SIP URI) used to establish the call\n     * @param {function} onSuccess The onSuccess({@link fcs.call#OutgoingCall}) callback function to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n     * @param {boolean} [isVideoEnabled] This will negotiate to receive video, see sendInitialVideo. This is a SPiDR service only parameter.\n     * @param {boolean} [sendInitialVideo] Send the video automatically with the call, this will turn the camera on, and set the call to also receive video same as setting isVideoEnabled to true. This is a SPiDR service only parameter.\n     * @param {object} [videoResolution] Sets the quality of video. This is a SPiDR service only parameter.\n     * @param {string} [videoResolution.width=\"320\"] Specifies min & max width of video.\n     * @param {string} [videoResolution.height=\"240\"] Specifies min & maxheight of video.\n     * @param {string} [videoResolution.minWidth=\"320\"] Specifies min width of video. Overrides ({@link videoResolution.width})\n     * @param {string} [videoResolution.minHeight=\"240\"] Specifies min height of video. Overrides ({@link videoResolution.height})\n     * @param {string} [videoResolution.maxWidth=\"320\"] Specifies max width of video. Overrides ({@link videoResolution.width})\n     * @param {string} [videoResolution.maxHeight=\"240\"] Specifies max height of video. Overrides ({@link videoResolution.height})\n     * @param {object} [params] Extra parameters.\n     * @param {string} [params.serviceName] Contains the service name 'spidr' or 'rcc'. SPiDR service parameter is default. If it is a RCC service, the service parameter should be given.\n     * @param {boolean} [params.isAudioEnabled] Setting this to false will disable audio for the call. This is a SPiDR service only parameter.\n     *\n     * @example\n     * // SPiDR service example is as follows:\n     * // @since 3.0.0\n     * // Make Voice Call\n     * // Start a voice call to the uri indicated with \"to\" argument\n     * // Login is a prerequisite for making calls\n     * // contact is an object with two fields contact.firstName and contact.lastName that specifies caller info\n     * fcs.call.startCall(fcs.getUser(), contact, to,\n     *      function(outgoingCall){\n     *        //get callid for your web app to be used later for handling popup windows\n     *        var callId = outgoingCall.getId();\n     *\n     *        outgoingCall.onStateChange = function(state, sipResponseCode, sipReasonText, data){\n     *            // For example, to handle the end of a call.\n     *            switch (sipResponseCode) {\n     *            \tcase \"404\":\n     *            \t\tshowInfoMessage(\"Callee does not exist\");\n     *            \t\tbreak;\n     *            \tcase \"480\":\n     *            \t\tshowInfoMessage(\"Callee is offline\");\n     *            \t\tbreak;\n     *            \tcase \"603\":\n     *            \t\tshowInfoMessage(\"Callee rejected us\");\n     *            \t\tbreak;\n     *            \tcase \"487\":\n     *            \t\tshowInfoMessage(\"Callee did not answer\");\n     *            \t\tbreak;\n     *            }\n     *            switch (data.localStatusCode) {\n     *            \tcase \"9900\":\n     *            \t\tshowInfoMessage(\"Call end reason is not provided\");\n     *            \t\tbreak;\n     *            \tcase \"9901\":\n     *            \t\tshowInfoMessage(\"Call is ended locally\");\n     *            \t\tbreak;\n     *            \tcase \"9902\":\n     *            \t\tshowInfoMessage(\"Call is rejected locally\");\n     *            \t\tbreak;\n     *            \tcase \"9903\":\n     *            \t\tshowInfoMessage(\"Call is ignored locally\");\n     *            \t\tbreak;\n     *            \tcase \"9904\":\n     *            \t\tshowInfoMessage(\"Call is responded from another device\");\n     *            \t\tbreak;\n     *                case \"9905\":\n     *            \t\tshowInfoMessage(\"Call is transfered\");\n     *            \t\tbreak;\n     *            \tdefault:\n     *            \t\tbreak;\n     *            }\n     *          //Add statusCode that returned from the server property to the call\n     *          outgoingCall.statusCode = sipResponseCode;\n     *          outgoingCall.localStatusCode = data.localStatusCode;\n     *          outgoingCall.reasonText = sipReasonText;\n     *          outgoingCall.localReasonText = data.localReasonText;\n     *          //Put your web app code to handle call state change like ringing, onCall ...etc.\n     *\t      };\n     *\n     *       outgoingCall.onStreamAdded = function(stream){\n     *           // Setting up source (src tag) of remote video container\n     *           document.getElementById('remoteVideo').srcObject = stream;\n     *       };\n     *    },\n     *    function(){\n     *       //put your web app failure handling code\n     *       window.alert(\"CALL_FAILED\");\n     *    },\n     *    false, false);\n     *\n     * // RCC service example is as follows:\n     * // @since 3.1.1\n     * // Start a call from a monitored device.\n     * fcs.call.startCall(undefined, undefined,\n     *    // destination\n     *    destination,\n     *    // onSuccess callback\n     *    function (outgoingCall)\n     *    {\n     *        outgoingCall.onStateChange = function (state, statusCode, reasonText, data) {\n     *                onStateChange(outgoingCall, state, data);\n     *        };\n     *        console.log('make call request success');\n     *    },\n     *    // onFailure callback\n     *    function (e) {\n     *        console.log('make call request failure!');\n     *    },\n     *    undefined, undefined, undefined, {serviceName: 'rcc'});\n     *\n     */\n\n    /*\n     * Internal API\n     * @param {boolean} [params.sendScreenShare] Initiate a call with screen sharing. If mediaSourceId is not provided this will trigger the browser to request for screen sharing, can be used with FireFox, or with the Kandy ChromeExtension. Audio will be disabled when in use. This is a SPiDR service only parameter.\n     * @param {string} [params.mediaSourceId] . This will initate the call from a mediaSourceId. This is a SPiDR service only parameter.\n     */\n\n    this.startCall = function(from, contact, to, onSuccess, onFailure, isVideoEnabled, sendInitialVideo, videoResolution, options) {\n        var params = {\n            from: from,\n            contact: contact,\n            to: to,\n            isVideoEnabled: isVideoEnabled,\n            sendInitialVideo: sendInitialVideo,\n            videoResolution: videoResolution\n        };\n        params = extend(params, options);\n\n        if (options && options.serviceName === 'rcc') {\n            return _rccManager.start(params, onSuccess, onFailure);\n        } else {\n            return _callManager.start(params, onSuccess, onFailure);\n        }\n    };\n\n    /**\n     * Starts monitoring a device.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#startMonitorDevice\n     * @function\n     * @since 3.1.1\n     * @param {string} deviceID If string with length greater than 0; device monitor will be started, otherwise user monitor will be started.\n     * @param {function} onSuccess The onSuccess callback function to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n     *\n     * @example\n     * // User is subscribed...\n     * // If deviceID is a string with length greater than 0; device monitor will be started,\n     * // otherwise user monitor will be started.\n     * var deviceID = null;\n     * fcs.call.startMonitorDevice(\n     *     deviceID,\n     *     // onSuccess callback\n     *     function () {\n     *         console.log('Start monitor success');\n     *     },\n     *     // onFailure callback\n     *     function () {\n     *         console.log('Start monitor failure');\n     *     });\n     */\n\n    this.startMonitorDevice = function(deviceID, onSuccess, onFailure) {\n        return _rccManager.startMonitorDevice({ deviceID }, onSuccess, onFailure);\n    };\n\n    /**\n     * Stops monitoring a device.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#stopMonitorDevice\n     * @function\n     * @since 3.1.1\n     * @param {function} onSuccess The onSuccess callback function to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n     *\n     * @example\n     * fcs.call.stopMonitorDevice(\n     *  // onSuccess callback\n     *  function () {\n     *      console.log('stop monitor success');\n     *  },\n     *  // onFailure callback\n     *  function () {\n     *      console.log('stop monitor failure');\n     *  });\n     *\n     */\n\n    this.stopMonitorDevice = function(onSuccess, onFailure) {\n        return _rccManager.stopMonitorDevice(onSuccess, onFailure);\n    };\n\n\n    /**\n     * Lists the registered devices of the RCC subscriber.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#getRCCDeviceList\n     * @function\n     * @since 3.1.1\n     * @param {function} onSuccess The onSuccess callback function to be called with an array of device info objects. Each object contains deviceURI, deviceId and uuid fields.\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n     *\n     * @example\n     * // User is subscribed...\n     * fcs.call.getRCCDeviceList(\n     *  // onsuccess callback\n     *  function(deviceList) {\n     *      console.log('get device list success');\n     *      for (i = 0; i < deviceList.length; i++) {\n     *          // use device list array elements: Sample element:\n     *          // \"deviceURI\":\"user1@1.1.1.1:5061\",\n     *          // \"uuid\":\"00000000-0000-1000-8000-001ECAF35125\",\n     *          // \"deviceId\":\"c2lwOmVyZGVtMUA0Ny4xNjguMjQ2LjMzOjUwNjE7dHJhbnNwb3J0PXRjcCQ8dXJuOnV1aWQ6IDAw%0AMDAwMDAwLTAwMDAtMTAwMC04MDAwLTAwMUVDQUYzNTEyNT4%3D%0A\"\n     *      }\n     *  },\n     *  // onFailure callback\n     *  function(e) {\n     *      console.log('get device list failure');\n     *  });\n     */\n    this.getRCCDeviceList = function(onSuccess, onFailure) {\n        return _rccManager.getDeviceList(onSuccess, onFailure);\n    };\n\n    /**\n     * Sets log severity level for Webrtc Plugin (not used for native webrtc)\n     * 5 levels(sensitive:0, verbose:1, info:2, warning:3, error:4).\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#set_logSeverityLevel\n     * @function\n     * @since 3.0.0\n     *\n     */\n\n    this.set_logSeverityLevel = function(level) {\n        return _callManager.set_logSeverityLevel({level});\n    };\n\n    /**\n     * Enables log callback for Webrtc Plugin (not used for native webrtc).\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#enable_logCallback\n     * @function\n     * @since 3.0.0\n     */\n\n    this.enable_logCallback = function() {\n        return _callManager.enable_logCallback();\n    };\n\n    /**\n     * Disables log callback for Webrtc Plugin (not used for native webrtc).\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#disable_logCallback\n     * @function\n     * @since 3.0.0\n     */\n\n    this.disable_logCallback = function() {\n        return _callManager.disable_logCallback();\n    };\n\n    /**\n     * Gets audioInDeviceCount.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#get_audioInDeviceCount\n     * @function\n     * @since 3.0.0\n     */\n\n    this.get_audioInDeviceCount = function() {\n        return _callManager.get_audioInDeviceCount();\n    };\n\n    /**\n     * Gets audioOutDeviceCount.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#get_autioOutDeviceCount\n     * @function\n     * @since 3.0.0\n     */\n\n    this.get_audioOutDeviceCount = function() {\n        return _callManager.get_audioOutDeviceCount();\n    };\n\n    /**\n     * Gets videoDeviceCount.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#get_videoDeviceCount\n     * @function\n     * @since 3.0.0\n     */\n\n    this.get_videoDeviceCount = function() {\n        return _callManager.get_videoDeviceCount();\n    };\n\n    /**\n     * Returns Video Device(Camera) availability.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#hasVideoDevice\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * if(fcs.call.hasVideoDevice()){\n     *     // If there is a video device available, show local video container\n     *     callView.toggleLocalVideo(true);\n     * }\n     */\n    this.hasVideoDevice = function() {\n        return _callManager.get_videoDeviceCount();\n    };\n\n    /**\n     * Returns Audio Device(Microphone) availability.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#hasAudioDevice\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * if(!fcs.call.hasAudioDevice()){\n     *     window.alert(\"There is no available audio source!\");\n     * }\n     */\n    this.hasAudioDevice = function() {\n        return _callManager.hasAudioDevice();\n    };\n\n    /**\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getUserMedia\n     * @function\n     * @since 3.0.0\n     * @param onSuccess success callback of getUserMedia\n     * @param onFailure failure callback of getUserMedia\n     * @param options contains audio and video constraints\n     *\n     * @example\n     * fcs.call.getUserMedia(\n     *    function(mediaInfo){\n     *        window.console.log(\"media initialized. mediaInfo: \" + JSON.stringify(mediaInfo));\n     *    },\n     *    function(err){\n     *        window.console.log(\"media initialization error \" + err);\n     *    },\n     *    {\n     *        \"audio\": true,\n     *        \"video\": true\n     *    }\n     * );\n     */\n\n    this.getUserMedia = function(onSuccess, onFailure, options) {\n        return _callManager.getUserMedia({options, privateStream: true}, onSuccess, onFailure);\n    };\n\n    /**\n     * Shows device settings Window\n     * Only works with PLUGIN.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#showSettingsWindow\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * $(\"#device_settings_button\").click(function() {\n     *    fcs.call.showSettingsWindow();\n     * });\n     */\n\n    this.showSettingsWindow = function(onSuccess, onFailure, options) {\n        return _callManager.showSettingsWindow({options}, onSuccess, onFailure);\n    };\n\n    /**\n     * Gets local video resolutions with the order below\n     * localVideoHeight-localVideoWidth\n     * Only works with PLUGIN.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getLocalVideoResolutions\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * var pluginLocalVideoResolution = fcs.call.getLocalVideoResolutions();\n     * var localVideoHeight = pluginLocalVideoResolution[0];\n     * var localVideoWidth = pluginLocalVideoResolution[1];\n     * console.log(\"Local Video Dimensions: \" + localVideoWidth + \",\" + localVideoHeight);\n     */\n\n    this.getLocalVideoResolutions = function() {\n        return _callManager.getLocalVideoResolutions();\n    };\n\n    /**\n     * Gets remote video resolutions with the order below\n     * remoteVideoHeight-remoteVideoWidth\n     * Only works with PLUGIN.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getRemoteVideoResolutions\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * var pluginRemoteVideoResolution = fcs.call.getRemoteVideoResolutions();\n     * var remoteVideoHeight = pluginRemoteVideoResolution[0];\n     * var remoteVideoWidth = pluginRemoteVideoResolution[1];\n     * console.log(\"Remote Video Dimensions: \" + remoteVideoWidth + \",\" + remoteVideoHeight);\n     */\n\n    this.getRemoteVideoResolutions = function() {\n        return _callManager.getRemoteVideoResolutions();\n    };\n\n    /**\n     * Shows if plugin is enabled.\n     * Only works with PLUGIN.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#isPluginEnabled\n     * @function\n     * @since 3.0.0\n     *\n     * @example\n     * if(fcs.call.isPluginEnabled()) {\n     *     $(\"#device_settings_details\").show();\n     * }\n     */\n\n    this.isPluginEnabled = function() {\n        return _callManager.isPluginEnabled();\n    };\n\n    /**\n     * Checks if any call exists.\n     *\n     * This is a SPiDR and RCC service method.\n     *\n     * @name fcs.call#hasGotCalls\n     * @function\n     * @param {object} params Contains the service name ({serviceName:'spidr'} or ({serviceName:'rcc'}). SPiDR service parameter is default. If it is a RCC service, the service parameter should be given.\n     * @returns {Boolean} true if any call exists, false otherwise.\n     *\n     * @example\n     * // SPiDR service example is as follows:\n     * // @since 3.0.0\n     * if(fcs.call.hasGotCalls()) {\n     *  console.log('At least one call is available.');\n     * }\n     *\n     * // RCC service example is as follows:\n     * // @since 3.1.1\n     * if(fcs.call.hasGotCalls({serviceName:'rcc'})) {\n     *  console.log('At least one call is available.');\n     * }\n     */\n    this.hasGotCalls = function(options) {\n        if (options && options.serviceName === 'rcc') {\n            return _rccManager.hasGotCalls();\n        } else {\n            return _callManager.hasGotCalls();\n        }\n    };\n\n    /**\n     * Retrived a call by Id.\n     *\n     * This function allow to retrive a call which was cached by the call continuation feature.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getIncomingCallById\n     * @function\n     * @since 3.0.0\n     * @param {string} id from The id of the incoming call\n     * @returns {fcs.call.IncomingCall}\n     *\n     */\n    this.getIncomingCallById = function(id) {\n        return _callManager.getIncomingCallById({ callid: id });\n    };\n\n    /**\n     * Create a renderer for an audio/video stream.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#createStreamRenderer\n     * @function\n     * @since 3.0.0\n     * @param {MediaStream} stream The stream to render\n     * @param {object} container The DOM node into which to create the renderer (the content of the node will be cleared)\n     * @param {object} options The options to be used for the renderer\n     * @returns {Object} renderer Renderer object\n     *\n     */\n    this.createStreamRenderer = function(stream, container, options) {\n        return _callManager.createStreamRenderer({stream, container, options});\n    };\n\n    /**\n     * Discpose of a previously created renderer.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#disposeStreamRenderer\n     * @function\n     * @since 3.0.0\n     * @param {object} container The DOM node into which the renderer was previously created\n     */\n    this.disposeStreamRenderer = function(container) {\n        return _callManager.disposeStreamRenderer({container});\n    };\n\n    /**\n     * Create an audio local bridge\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#createLocalAudioBridge\n     * @function\n     * @since 3.0.0\n     * @param {function} onSuccess The onSuccess({@link fcs.call.LocalAudioBridge}) callback to be called with the LocalAudioBridge\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback to be called\n     * @param {object} options The options for creating an audio bridge\n     */\n    this.createLocalAudioBridge = function(onSuccess, onFailure, options) {\n        return _callManager.createLocalAudioBridge(options, onSuccess, onFailure);\n    };\n\n    /**\n     * States of the Call.\n     *\n     * This is a SPiDR and RCC service member.\n     * Available for SPiDR since 3.0.0, and for RCC since 3.1.1.\n     *\n     * @name fcs.call#States\n     * @enum {number}\n     * @readonly\n     * @property {number} [IN_CALL=0] The call has been established. In rcc mode, called and calling party information is also passed to the client in on state change callback.\n     * @property {number} [ON_HOLD=1] The call has been put on hold.\n     * @property {number} [RINGING=2] The outgoing call is ringing. In rcc mode, called and calling party information is also passed to the client in on state change callback.\n     * @property {number} [ENDED=3] The call has been terminated.\n     * @property {number} [REJECTED=4] The outgoing call request has been rejected by the other party.\n     * @property {number} [OUTGOING=5] The outgoing call request has been sent but no response have been received yet.\n     * @property {number} [INCOMING=6] The incoming call has been received but has not been answered yet. In rcc mode, called and calling party information is also passed to the client in on state change callback.\n     * @property {number} [ANSWERING=7] The incoming call has been answered but the call as not been establish yet.\n     * @property {number} [JOINED=8] The call is joined.\n     * @property {number} [RENEGOTIATION=9] The call is re-established.\n     * @property {number} [TRANSFERRED=10] The call is transferred to a third party.\n     * @property {number} [ON_REMOTE_HOLD=11] The call has been put on hold remotely.\n     * @property {number} [CALL_IN_PROGRESS=12] The call is in progress. In rcc mode, called and calling party information is also passed to the client in on state change callback.\n     * @property {number} [EARLY_MEDIA=13] Early media process successful.\n     * EARLY_MEDIA and RINGING states can be triggered multiple times in different orders.\n     * In each of these states, if the respondCallUpdate notification comes\n     * and processed successfully, the state is IN_CALL.\n     * @property {number} [TRANSFER_FAILURE=14] The call couldn't be transferred to a third party.\n     * @property {number} [REPLACING=15] Blind Transfer is in progress for transferee. Call replacing notification has come.\n     */\n\n    this.States = {\n        IN_CALL: 0,\n        ON_HOLD: 1,\n        RINGING: 2,\n        ENDED: 3,\n        REJECTED: 4,\n        OUTGOING: 5,\n        INCOMING: 6,\n        ANSWERING: 7,\n        JOINED: 8,\n        RENEGOTIATION: 9,\n        TRANSFERRED: 10,\n        ON_REMOTE_HOLD: 11,\n        CALL_IN_PROGRESS: 12,\n        EARLY_MEDIA: 13,\n        TRANSFER_FAILURE: 14,\n        REPLACING: 15\n    };\n\n    /**\n     * States of the Media Negotiation (ICE).\n     *\n     * This is a SPiDR service only.\n     *\n     * @name fcs.call#MediaStates\n     * @enum {number}\n     * @readonly\n     * @property {number} [NEW=0] The ICE agent is gathering addresses or is waiting to be given remote candidates.\n     * @property {number} [CHECKING=1] The ICE agent has been given one or more remote candidates and is checking pairs of local and remote candidates against one another to try to find a compatible match, but has not yet found a pair which will allow the peer connection to be made. It's possible that gathering of candidates is also still underway.\n     * @property {number} [CONNECTED=2] A usable pairing of local and remote candidates has been found for all components of the connection, and the connection has been established. It's possible that gathering is still underway, and it's also possible that the ICE agent is still checking candidates against one another looking for a better connection to use.\n     * @property {number} [COMPLETED=3] The ICE agent has finished gathering candidates, has checked all pairs against one another, and has found a connection for all components.\n     * @property {number} [FAILED=4] The ICE candidate has checked all candidates pairs against one another and has failed to find compatible matches for all components of the connection. It is, however, possible that the ICE agent did find compatible connections for some components.\n     * @property {number} [DISCONNECTED=5] Checks to ensure that components are still connected failed for at least one component of the RTCPeerConnection. This is a less stringent test than \"failed\" and may trigger intermittently and resolve just as spontaneously on less reliable networks, or during temporary disconnections. When the problem resolves, the connection may return to the \"connected\" state.\n     * @property {number} [CLOSED=6] The ICE agent for this RTCPeerConnection has shut down and is no longer handling requests.\n     */\n\n    this.MediaStates = {\n        NEW: 0,\n        CHECKING: 1,\n        CONNECTED: 2,\n        COMPLETED: 3,\n        FAILED: 4,\n        DISCONNECTED: 5,\n        CLOSED: 6\n    };\n\n    /**\n     * Hold states of the Call.\n     *\n     * This is a SPiDR and RCC service member.\n     * Available for SPiDR since 3.0.0, and for RCC since 3.1.1.\n     *\n     * @name fcs.call#HoldStates\n     * @enum {number}\n     * @readonly\n     * @property {number} [LOCAL_HOLD=0] The call has been put on hold locally.\n     * @property {number} [REMOTE_HOLD=1] The call has been put on hold remotely.\n     * @property {number} [BOTH_HOLD=2] he call has been put on both locally and remotely.\n     */\n\n    this.HoldStates = {\n        LOCAL_HOLD: 0,\n        REMOTE_HOLD: 1,\n        BOTH_HOLD: 2\n    };\n\n    /**\n     * Local status codes of the Call.\n     *\n     * This is a SPiDR service only member.\n     * Available for SPiDR since 4.0.0\n     *\n     * @name fcs.call#LocalStatusCodes\n     * @enum {string}\n     * @readonly\n     * @property {string} [STATUS_CODE_NOT_PROVIDED=\"9900\"] The call's status code hasn't been provided.\n     * @property {string} [ENDED_BY_LOCAL=\"9901\"] The call has been ended locally.\n     * @property {string} [REJECTED_BY_LOCAL=\"9902\"] The call has been rejected by local user.\n     * @property {string} [IGNORED_BY_LOCAL=\"9903\"] The call has been ignored by local user.\n     * @property {string} [RESPONDED_FROM_ANOTHER_DEVICE=\"9904\"] The call has been responded from another device.\n     * @property {string} [SESSION_COMPLETED=\"9905\"] The call session has been completed.\n     */\n    this.LOCAL_STATUS_CODES = {\n        STATUS_CODE_NOT_PROVIDED: '9900',\n        ENDED_BY_LOCAL: '9901',\n        REJECTED_BY_LOCAL: '9902',\n        IGNORED_BY_LOCAL: '9903',\n        RESPONDED_FROM_ANOTHER_DEVICE: '9904',\n        SESSION_COMPLETED: '9905'\n    };\n\n    /**\n     * Local reason texts of the Call.\n     *\n     * This is a SPiDR service only member.\n     * Available for SPiDR since 4.0.0\n     *\n     * @name fcs.call#LocalReasonTexts\n     * @enum {string}\n     * @readonly\n     * @property {string} [STATUS_CODE_NOT_PROVIDED=\"Reason not provided\"] The call's reason text has not been provided.\n     * @property {string} [ENDED_BY_LOCAL=\"Ended by local user\"] The call has been ended locally.\n     * @property {string} [REJECTED_BY_LOCAL=\"Rejected by local user\"] The call has been rejected by local user.\n     * @property {string} [IGNORED_BY_LOCAL=\"Ignored by local user\"] The call has been ignored by local user.\n     * @property {string} [RESPONDED_FROM_ANOTHER_DEVICE=\"Responded from another device\"] The call has been answered on another device.\n     * @property {string} [SESSION_COMPLETED=\"Session completed\"] The call session is complete.\n     */\n    this.LOCAL_REASON_TEXTS = {\n        STATUS_CODE_NOT_PROVIDED: 'Reason not provided',\n        ENDED_BY_LOCAL: 'Ended by local user',\n        REJECTED_BY_LOCAL: 'Rejected by local user',\n        IGNORED_BY_LOCAL: 'Ignored by local user',\n        RESPONDED_FROM_ANOTHER_DEVICE: 'Responded from another device',\n        SESSION_COMPLETED: 'Session completed'\n    };\n\n    /**\n     * Type of media initialization errors.\n     *\n     * This is a SPiDR service only member.\n     *\n     * @name fcs.call#MediaErrors\n     * @enum {number}\n     * @since 3.0.0\n     * @readonly\n     * @property {number} [NOT_FOUND=1] No media source available.\n     * @property {number} [NOT_ALLOWED=2] User did not allow media use.\n     * @property {number} [OPTIONS=3] Missing or wrong use of options.\n     * @property {number} [WRONG_VERSION=4] The version of the plugin is not supported.\n     * @property {number} [NOT_INITIALIZED=5] The media is not initialized.\n     * @property {number} [NEW_VERSION_WARNING=6] New plugin version is available.\n     * @property {number} [INVALID_PARAMETER=7] Invalid parameter.\n     * @property {number} [NO_SCREENSHARING_WARNING=8] Screen sharing is not possible with this browser or the screensharing extension could not be found.\n     */\n    this.MediaErrors = mediaErrors;\n\n    /**\n     * Call a party through a client device using the Click To Call service.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#clickToCall\n     * @function\n     * @since 3.0.0\n     * @param {string} callingParty The caller's address (e.g. SIP) used to establish the call\n     * @param {string} calledParty The callee's address (e.g. SIP) used to establish the call\n     * @param {function} onSuccess The onSuccess() callback to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback to be called\n     *\n     * @example\n     * var onSuccess = function(){\n     *    //do something here\n     * };\n     * var onError = function (err) {\n     *   //do something here\n     * };\n     *\n     * fcs.call.clickToCall(\"user1@test.com\", \"user2@test.com\", onSuccess, onError);\n     */\n\n    this.clickToCall = function(callingParty, calledParty, onSuccess, onFailure) {\n        return _callManager.clickToCall({callingParty, calledParty}, onSuccess, onFailure);\n    };\n\n    /**\n     * Provide the user with a routable PSTN number as a result of an IMRN allocation request.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getIMRN\n     * @function\n     * @param {string} realm The pool of numbers from which IMRN will be allocated\n     * @param {string} source The URI of the individual placing the call\n     * @param {string} destination The URI of the individual receiving the call\n     * @param {function} onSuccess The onSuccess() callback to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback to be called\n     */\n\n    this.getIMRN = function(realm, source, destination, onSuccess, onFailure) {\n        return _callManager.getIMRN({realm, source, destination}, onSuccess, onFailure);\n    };\n\n    /**\n     * Return the stream refined by id\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getStreamById\n     * @function\n     * @param id of the stream\n     */\n    this.getStreamById = function(streamId) {\n        return _callManager.getStreamById({streamId});\n    };\n\n    /**\n     * Delete selected stream\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#removeStreamById\n     * @function\n     * @param id of the stream\n     */\n    this.removeStreamById = function(streamId) {\n        _callManager.removeStreamById({streamId});\n    };\n\n    /**\n     * Sets specific audio input for the next call\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#setSelectedMicrophoneId\n     * @function\n     * @param id of the audio input device\n     */\n    this.setSelectedMicrophoneId = function(microphoneId) {\n        _callManager.setSelectedMicrophoneId({microphoneId});\n    };\n\n    /**\n     * Sets specific video input for the next call\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#setSelectedCameraId\n     * @function\n     * @param id of the video input device\n     */\n    this.setSelectedCameraId = function(cameraId) {\n        _callManager.setSelectedCameraId({cameraId});\n    };\n\n    /**\n     * Sets the selected speaker as the default speaker.\n     * It will be used for audio output for future calls.\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#setSelectedSpeakerId\n     * @function\n     * @param {String} id ID of the speaker to use for call audio.\n     * @param {Function} onSuccess Function called once the operation completes successfully.\n     * @param {function} onFailure Function called if the operation fails to complete.\n     */\n    this.setSelectedSpeakerId = function(speakerId, onSuccess, onFailure) {\n        _callManager.setSelectedSpeakerId({speakerId}, onSuccess, onFailure);\n    };\n\n    /**\n     * Returns available video input sources\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getCameraList\n     * @function\n     * @param onSuccess success callback of getCameraList\n     * @example\n     * // Get the list of cameras and create an option under an existing select menu\n     * var camSelect = document.getElementById(\"cameraDevice\");\n     *\n     * fcs.call.getCameraList(function(cList) {\n     *     for (var index = 0; index < cList.length; index++) {\n     *         var option = document.createElement(\"option\");\n     *         option.value = cList[index].id;\n     *         option.text = cList[index].label;\n     *         camSelect.add(option);\n     *     }\n     * });\n     */\n    this.getCameraList = function(onSuccess) {\n        return _callManager.getCameraList({onSuccess});\n    };\n\n    /**\n     * Returns available audio input sources\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getMicrophoneList\n     * @function\n     * @param onSuccess success callback of getMicrophoneList\n     * @example\n     * // Get the list of microphones and create an option under an existing select menu\n     * var micSelect = document.getElementById(\"microphoneDevice\");\n     *\n     * fcs.call.getMicrophoneList(function(mList) {\n     *     for (var index = 0; index < mList.length; index++) {\n     *         var option = document.createElement(\"option\");\n     *         option.value = mList[index].id;\n     *         option.text = mList[index].label;\n     *         micSelect.add(option);\n     *     }\n     * });\n     */\n    this.getMicrophoneList = function(onSuccess) {\n        return _callManager.getMicrophoneList({onSuccess});\n    };\n\n    /**\n     * Returns available audio output sources\n     *\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#getSpeakerList\n     * @function\n     * @param onSuccess success callback of getSpeakerList\n     * @example\n     * // Get the list of speakers and create an option under an existing select menu\n     * var speakerSelect = document.getElementById(\"speakerDevice\");\n     *\n     * fcs.call.getSpeakerList(function(sList) {\n     *     for (var index = 0; index < sList.length; index++) {\n     *         var option = document.createElement(\"option\");\n     *         option.value = sList[index].id;\n     *         option.text = sList[index].label;\n     *         speakerSelect.add(option);\n     *     }\n     * });\n     */\n    this.getSpeakerList = function(onSuccess) {\n        return _callManager.getSpeakerList({onSuccess});\n    };\n\n    /**\n     * Sets specific media device for active call\n     * Changes the camera and/or microphone used for the active call.\n     * This is a SPiDR service only method.\n     *\n     * @name fcs.call#changeDevices\n     * @function\n     * @param {object} contains new device ids and active call object\n     *                var params = {\"call\":call};\n     *\n     * @param {function} onSuccess The onSuccess() callback to be called\n     * @param {function} onFailure The onFailure({@link fcs#Errors}) callback to be called\n     *\n     * @since 4.0.0\n     * @example\n     * // SPiDR service example is as follows:\n     * // Change Media Devices\n     * // During an active call with selected device id\n     * // This method change media device which called with setSelectedCameraId or setSelectedMicrophoneId\n     *  var params = {\"call\":call};\n     *  fcs.call.setSelectedCameraId(videoDeviceId);\n     *  fcs.call.setSelectedMicrophoneId(audioDeviceId);\n     *\n     *  fcs.call.changeDevices(params,\n     *  function(){\n     *     showInfoMessage(\"Device change called.\");\n     *  },function(){\n     *     showInfoMessage(\"Device change Failed.\");\n     *  });\n     */\n    this.changeDevices = function(params, onSuccess, onFailure) {\n        return _callManager.changeDevices(params, onSuccess, onFailure);\n    };\n\n    /**\n     * Changes speaker used for call audio output.\n     * This is a SPiDR service only method.\n     * Supported on browser's that support HTMLMediaElement.setSinkId().\n     * @name fcs.call#changeSpeaker\n     * @function\n     * @param {String} speakerId ID of the speaker to use for audio output.\n     * @param {Function} onSuccess The success callback.\n     * @param {Function} onFailure The failure callback.\n     * @example\n     * var speakerId;\n     * // Set a speaker to use.\n     * call.changeSpeaker(speakerId, onSuccess, onFailure);\n     */\n    this.changeSpeaker = function(speakerId, onSuccess, onFailure) {\n        return _callManager.changeSpeaker({speakerId}, onSuccess, onFailure);\n    };\n\n    /**\n     * When an monitor session refreshed notification is received, {@link fcs.call#setOnMonitorSessionRefreshed} handler will be invoked.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#setOnMonitorSessionRefreshed\n     * @function\n     * @since 4.1.0\n     * @param {function} callback callback function for on monitor session refreshed\n     *\n     * @example\n     * onSuccess = function () {\n     *   console.log('Start monitor success');\n     *\n     *   fcs.call.setOnMonitorSessionRefreshed(\n     *       function () {\n     *           console.log('Received monitor session refreshed.');\n     *       });\n     * }\n     *\n     * onFailure = function () {\n     *   console.log('Start monitor failure');\n     * }\n     *\n     * fcs.call.startMonitorDevice(deviceID, onSuccess, onFailure);\n     *\n     */\n    this.setOnMonitorSessionRefreshed = function(callback) {\n        return _rccManager.setOnMonitorSessionRefreshed({callback});\n    };\n\n    /**\n     * When an monitor session refreshed notification is received, {@link fcs.call#setOnMonitorSessionTerminated} handler will be invoked.\n     *\n     * This is an RCC service only method.\n     *\n     * @name fcs.call#setOnMonitorSessionTerminated\n     * @function\n     * @since 4.1.0\n     * @param {function} callback callback function for on monitor session terminated\n     *\n     * @example\n     * onSuccess = function () {\n     *   console.log('Start monitor success');\n     *\n     *   fcs.call.setOnMonitorSessionTerminated(\n     *       function () {\n     *           console.log('Received monitor session terminated.');\n     *       });\n     * }\n     *\n     * onFailure = function () {\n     *   console.log('Start monitor failure');\n     * }\n     *\n     * fcs.call.startMonitorDevice(deviceID, onSuccess, onFailure);\n     *\n     */\n    this.setOnMonitorSessionTerminated = function(callback) {\n        return _rccManager.setOnMonitorSessionTerminated({callback});\n    };\n\n    /**\n     * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n     *\n     * This is a SPiDR and RCC service class.\n     * Available for SPiDR since 3.0.0, and for RCC since 3.1.1.\n     *\n     * @name fcs.call#IncomingCall\n     * @class\n     * @augments fcs.call.Call\n     * @param {String} callid Unique identifier for the call\n     * @param {Object} opts options\n     * @param {String} callee Called party information. This is an RCC service parameter.\n     * @param {String} caller Calling party information. This is an RCC service parameter.\n     * @version @{spidr.jsl.version}\n     */\n    this.IncomingCall = function() {\n\n        /**\n         * Sets the handler for listening for media state changed\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#IncomingCall#onMediaStateChange\n         * @event\n         * @param {fcs.call.MediaStates} state Current state of the media negotiation.\n         *\n         **/\n\n        /**\n         * Sets the handler for listening local stream ready event.\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#IncomingCall#onLocalStreamAdded\n         * @function\n         * @since 3.0.0.1\n         *\n         **/\n\n        /**\n         * Sets the handler for listening remote stream ready event.\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#IncomingCall#onStreamAdded\n         *\n         * @function\n         * @since 2.0.0\n         * @param {?MediaStream} stream remote MediaStream\n         *\n         **/\n\n        /**\n         *\n         * This is a SPiDR service only member.\n         *\n         * @name fcs.call#IncomingCall#calleeNumber\n         * @field\n         * @since 3.0.0\n         * @type {String}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.calleeNumber;\n         */\n\n        /**\n         *\n         * This is a SPiDR service only member.\n         *\n         * @name fcs.call#IncomingCall#callerNumber\n         * @field\n         * @since 3.0.0\n         * @type {String}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.callerNumber;\n         */\n\n        /**\n         *\n         * This is a SPiDR service only member.\n         *\n         * @name fcs.call#IncomingCall#callerName\n         * @field\n         * @since 3.0.0\n         * @type {String}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.callerName;\n         */\n\n        /**\n         *\n         * This is a SPiDR service only member.\n         *\n         * @name fcs.call#IncomingCall#primaryContact\n         * @field\n         * @since 3.0.0\n         * @type {String}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.primaryContact;\n         */\n\n        /**\n         * Mutes the microphone.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#mute\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.mute();\n         */\n\n        /**\n         * Unmutes the microphone\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#unmute\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.unmute();\n         */\n\n        /**\n         * Silence the speaker\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#silence\n         * @function\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.silence();\n         */\n\n        /**\n         * Unsilence the speaker\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#unsilence\n         * @function\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.unsilence();\n         */\n\n        /**\n         * Check if the speaker is silenced\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#isSilenced\n         * @return {boolean} True if the call is silenced, false otherwise.\n         * @function\n         */\n\n        /**\n         * Answers the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#answer\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called. In RCC, success callback is triggered when answered event is received.\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called. In RCC, failure call back is triggered when end or failed event is received before answered event, or there is a state failure.\n         * @param {boolean} [sendInitialVideo] Answer call with video when video was negotiated by the other party. This is a SPiDR service only parameter.\n         * @param {String} [videoResolution] Video quality. This is a SPiDR service only parameter.\n         * @param {Object} [param] Extra optional parameters.\n         * @param {boolean} [param.isAudioEnabled] Setting this to false will disable audio for the call. This is a SPiDR service only parameter.\n         *\n         * @example\n         * // SPiDR service example is as follows:\n         * // @since 3.0.0\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    console.log('Answer call success!');\n         * };\n         * var onError = function (err) {\n         *   console.log('Answer call failure!');\n         * };\n         *\n         * incomingCall.answer(onSuccess, onFailure, true, \"1280x720\");\n         *\n         * // RCC service example is as follows:\n         * // @since 3.1.1\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.answer(\n         *  // onSuccess callback\n         *  function () {\n         *      console.log('Answer call success!');\n         *  },\n         *  // onFailure callback\n         *  function () {\n         *      console.log('Answer call failure!');\n         *  });\n         */\n\n        /**\n         * Rejects the call.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#reject\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    //do something here\n         * };\n         * var onError = function (err) {\n         *   //do something here\n         * };\n         *\n         * incomingCall.reject(onSuccess, onFailure);\n         */\n\n        /**\n         * Ignores the call. Client will not send any rest request for this one. Ignore is on client side only.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#ignore\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    //do something here\n         * };\n         * var onError = function (err) {\n         *   //do something here\n         * };\n         *\n         * incomingCall.ignore(onSuccess, onFailure);\n         */\n\n        /**\n         * Forwards the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#forward\n         * @function\n         * @param {string} address The address where the call is transferred (e.g. SIP URI)\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    console.log('Forward call success!');\n         * };\n         * var onError = function (err) {\n         *   console.log('Forward call failure!');\n         * };\n         *\n         * incomingCall.forward(\"user1@test.com\", onSuccess, onFailure);\n         */\n\n        /**\n         *\n         * Checks the incoming call if it has reject option.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#canReject\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.canReject();\n         */\n\n        /**\n         *\n         * Checks the incoming call if it has forward option.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#canForward\n         * @function\n         * @returns {Boolean}\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.canForward();\n         */\n\n        /**\n         * Checks the incoming call if it has answer option.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#canAnswer\n         * @function\n         * @returns {Boolean}\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.canAnswer();\n         */\n\n        /**\n         * Are we able to send video.\n         * Ex: Client may try to send video but video cam can be unplugged. Returns false in that case.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#canSendVideo\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.canSendVideo();\n         */\n\n        /**\n         * Are we able to send video. Checks the incoming SDP.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#canReceiveVideo\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean}\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.canReceiveVideo();\n         */\n\n        /**\n         * Returns hold state of call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#getHoldState\n         * @function\n         * @returns {@link fcs.HoldStates} or undefined if call has not been put\n         * on hold.\n         *\n         * @example\n         * // Available since 3.0.4 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getHoldState();\n         */\n\n        /**\n         * Gets called party.\n         *\n         * This is an RCC service method.\n         *\n         * @name fcs.call#IncomingCall#getCalledParty\n         * @function\n         * @returns {calledParty} string describing the called party\n         *\n         * @example\n         * // Available since 3.1.0 for RCC service.\n         *\n         *   fcs.call.onReceived = onCallReceived;\n         *   function onCallReceived(call) {\n         *       console.log(\"Called party: \" + call.getCalledParty());\n         *   }\n         */\n\n        /**\n         * Gets calling party.\n         *\n         * This is an RCC service method.\n         *\n         * @name fcs.call#IncomingCall#getCallingParty\n         * @function\n         * @returns {callingParty} string describing the calling party\n         *\n         * @example\n         * // Available since 3.1.0 for RCC service.\n         *\n         *   fcs.call.onReceived = onCallReceived;\n         *   function onCallReceived(call) {\n         *       console.log(\"Calling party: \" + call.getCallingParty());\n         *   }\n         */\n\n\n        /**\n         * Gets call id.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#getId\n         * @function\n         * @returns {id} Unique identifier for the call\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getId();\n         */\n\n        /**\n         * End the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * `Starting with the SPiDR 4.0.0 JSL API this method fires fcs.call.States.ENDED state.`\n         *\n         * @name fcs.call#IncomingCall#end\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.end(\n         *   // onSuccess callback\n         *   function () {\n         *       console.log('Call is ended!');\n         *   },\n         *   // onFailure callback\n         *   function () {\n         *       console.log('Call could not be ended!');\n         *   });\n         */\n\n        /**\n         * Holds the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#hold\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    console.log('Call is held!');\n         * };\n         * var onFailure = function(err){\n         *    console.log('Call could not be held!');\n         * };\n         *\n         * incomingCall.hold(onSuccess, onFailure);\n         */\n\n        /**\n         * Resume the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#unhold\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    console.log('Call is retrieved!');\n         * };\n         * var onFailure = function(err){\n         *    console.log('Call could not be retrieved!');\n         * };\n         *\n         * incomingCall.unhold(onSuccess, onFailure);\n         */\n\n        /**\n         * Get WebRTC Statistics\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#IncomingCall#getWebRtcStats\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getWebRtcStats(function(stats) {\n         *          // Stats returned successfully\n         *          logger.debug(\"Audio Packets Lost: \" + stats.audio.packetsLost);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"getWebRtcStats failed: \" + error);\n         *      }\n         * );\n         */\n\n        /**\n         * Get Native WebRTC Statistics\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#IncomingCall#getNativeWebRtcStats\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getNativeWebRtcStats(function(results) {\n         *          // Stats returned successfully\n         *          logger.debug(\"getNativeWebRtcStats returned successfully: \" + results);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"getNativeWebRtcStats failed: \" + error);\n         *      }\n         *   );\n         */\n\n        /**\n         * Start WebRtc Statistics Timer\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#IncomingCall#startWebRtcStatsTimer\n         * @function\n         * @param {string} interval The interval is a parameter that determines how many seconds if necessary turning statistics(e.g. 10 seconds)\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.startWebRtcStatsTimer(interval,\n         *      function(stats) {\n         *          // Stats returned successfully\n         *          logger.debug(\"Audio Packets Lost: \" + stats.audio.packetsLost);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"startWebRtcStatsTimer failed: \" + error);\n         *      }\n         *   );\n         */\n\n        /**\n         * Stop WebRtc Statistics Timer\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#IncomingCall#stopWebRtcStatsTimer\n         * @function\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.stopWebRtcStatsTimer();\n         */\n\n        /**\n         * Directly transfers the existing call to another recipient.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#directTransfer\n         * @function\n         * @param {string} address The address where the call is transferred (e.g. SIP URI)\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    console.log('Call is transferred!');\n         * };\n         * var onFailure = function(err){\n         *    console.log('Call could not be transferred!');\n         * };\n         *\n         * incomingCall.directTransfer(\"user@domain.com\", onSuccess, onFailure);\n         */\n\n        /**\n         * Transfers an existing call to another existing call.\n         *\n         *\n         * @name fcs.call#IncomingCall#consultativeTransfer\n         * @function\n         * @since 3.1.1\n         * @param {string} transferredCallId The id of call which will be transferred into the current(incoming) call\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * // When an outgoing call is received, {@link fcs.call.event:onOutgoingCall} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onOutgoingCall = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.consultativeTransfer(outgoingCall.getId(), onSuccess, onFailure);\n         */\n\n        /**\n         * Stop the video for this call after the call is established.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#videoStop\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    //do something here\n         * };\n         * var onFailure = function(err){\n         *    //do something here\n         * };\n         *\n         * incomingCall.videoStop(onSuccess, onFailure);\n         */\n\n        /**\n         * Start the video for this call after the call is established.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#videoStart\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure() callback function to be called\n         * @param {object} [videoResolution] Sets the quality of video. This is a SPiDR service only parameter.\n         * @param {string} [videoResolution.width=\"320\"] Specifies min & max width of video.\n         * @param {string} [videoResolution.height=\"240\"] Specifies min & maxheight of video.\n         * @param {string} [videoResolution.minWidth=\"320\"] Specifies min width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.minHeight=\"240\"] Specifies min height of video. Overrides ({@link videoResolution.height})\n         * @param {string} [videoResolution.maxWidth=\"320\"] Specifies max width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.maxHeight=\"240\"] Specifies max height of video. Overrides ({@link videoResolution.height})\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * var onSuccess = function(){\n         *    //do something here\n         * };\n         * var onFailure = function(err){\n         *    //do something here\n         * };\n         *\n         * incomingCall.videoStart(onSuccess, onFailure);\n         */\n\n        /**\n         * Join 2 calls.\n         * You need two different calls to establish this functionality.<br>\n         *\n         * In SPiDR implementation: in order to join two calls both calls must\n         * be put into hold state first.<br>\n         *\n         * In RCC implementation: in order to join two calls one call must\n         * be in local hold state, and the other one must be in answered state. <br>\n         *\n         * If not call servers will not handle your request.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#IncomingCall#join\n         * @function\n         * @param {fcs.call#Call} anotherCall Call that we want the current call to be joined to.\n         * @param {function} onSuccess The onSuccess({@link fcs.call#Call}) to be called when the call have been joined provide the joined call as parameter\n         * @param {function} [onFailure] The onFailure() to be called when media could not be join\n         * @param {boolean} [isVideoEnabled] In order to join video calls set this to true. This is a SPiDR service only parameter.\n         * @param {object} [videoResolution] Sets the quality of video. This is a SPiDR service only parameter.\n         * @param {string} [videoResolution.width=\"320\"] Specifies min & max width of video.\n         * @param {string} [videoResolution.height=\"240\"] Specifies min & maxheight of video.\n         * @param {string} [videoResolution.minWidth=\"320\"] Specifies min width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.minHeight=\"240\"] Specifies min height of video. Overrides ({@link videoResolution.height})\n         * @param {string} [videoResolution.maxWidth=\"320\"] Specifies max width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.maxHeight=\"240\"] Specifies max height of video. Overrides ({@link videoResolution.height})\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * // And another {@link fcs.call#OutgoingCall} or {@link fcs.call#IncomingCall} is required which is going to be joined.\n         * var anotherCall; // assume this is previosuly created.\n         *\n         * var joinOnSuccess = function(joinedCall){\n         *    joinedCall // newly created.\n         *    console.log('Join success!');\n         * };\n         * var joinOnFailure = function(){\n         *    console.log('Join failure!');\n         * };\n         *\n         * incomingCall.join(anotherCall, joinOnSuccess, joinOnFailure, isVideoEnabled, videoResolution);\n         *\n         * // When join() is successfuly completed, joinOnSuccess({@link fcs.call#OutgoingCall}) will be invoked.\n         */\n\n        /**\n         * Send Dual-tone multi-frequency signaling.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#sendDTMF\n         * @function\n         * @since 3.0.0\n         * @param {String} tone Tone to be send as dtmf.\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.sendDTMF(\"0\");\n         */\n\n        /**\n         * Force the plugin to send a IntraFrame\n         * Only used by PLUGIN.\n         * This needs to be called when sending video.\n         * Solves video freeze issue.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#sendIntraFrame\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.sendIntraFrame();\n         */\n\n        /**\n         * Force the plugin to send a BlackFrame\n         * Only used by PLUGIN.\n         * Some of the SBC's(Session Border Controllers) do not establish one way video.\n         * audio only side has to send a blackFrame in order to see the incoming video.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#sendBlackFrame\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.sendBlackFrame();\n         */\n\n        /**\n         * Force the plugin to refresh video renderer\n         * with this call's remote video stream\n         * Only used by PLUGIN.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#refreshVideoRenderer\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.refreshVideoRenderer();\n         */\n\n        /**\n         * Returns the call is a join call or not\n         * Do not use this function if you really dont need it.\n         * This will be handled by the framework.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#getJoin\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean} isJoin\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getJoin();\n         */\n\n        /**\n         * Marks the call as a join call or not\n         * Do not use this function if you really dont need it.\n         * This will be handled by the framework.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#setJoin\n         * @function\n         * @since 3.0.0\n         * @param {String} join\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.setJoin(true);\n         */\n\n        /**\n         * Returns the button is a disabled or not\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#getButtonDisabler\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean} buttonDisabler\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.getButtonDisabler();\n         */\n\n        /**\n         * Disable the button after waiting 4000 milliseconds.\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#setButtonDisabler\n         * @function\n         * @since 3.0.0\n         * @param {Boolean} disable\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.setButtonDisabler(true);\n         */\n\n        /**\n         * Clears the timer set with fcs.call#IncomingCall#setButtonDisabler.\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#clearBtnTimeout\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.clearBtnTimeout();\n         */\n\n\n        /**\n         * Long call audit\n         * Creates a timer after call is established.\n         * This timer sends a \"PUT\" request to server.\n         * This will continue until one request fails.\n         * Handled by framework. You dont need to call this function.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#setAuditTimer\n         * @function\n         * @since 3.0.0\n         * @param {String} audit\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         * incomingCall.setAuditTimer(audit);\n         */\n\n\n        /**\n         * Clears the long call audit prior to clearing all call resources.\n         * Handled by framework. you dont need to call this function.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#clearAuditTimer\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         */\n\n        /**\n         * @deprecated DO NOT USE, use isVideoNegotiationAvailable instead\n         * Returns video negotation availability.\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#isVideoNegotationAvailable\n         * @function\n         * @since 3.0.1\n         * @param {String} id Unique identifier for the call\n         * @example\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.isVideoNegotationAvailable();\n         */\n\n        /**\n         * Returns video negotiation availability.\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#isVideoNegotiationAvailable\n         * @function\n         * @since 3.1.0\n         * @example\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.isVideoNegotiationAvailable();\n         */\n\n        /**\n         * Set custom parameters\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#setCustomParameters\n         * @function\n         * @since 3.0.0\n         * @param {Array.<{name: string, value:string}>} customParameters Custom SIP header parameters for the call.\n         *\n         * @example\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.setCustomParameters(\n         *   [\n         *     {\n         *       \"name\": \"X-GPS\",\n         *       \"value\": \"42,686032,23.344565\"\n         *     }\n         *   ]\n         * );\n         */\n\n        /**\n         * Get custom parameters\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#getCustomParameters\n         * @function\n         * @since 3.0.0\n         * @returns {Array.<{name: string, value:string}>} Custom SIP header parameters of the call\n         *\n         * @example\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         * const customParameters = incomingCall.getCustomParameters();\n         */\n\n        /**\n         * Sends the current custom parameters associated with a call to\n         * the SPiDR service.\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#IncomingCall#sendCustomParameters\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * incomingCall.sendCustomParameters();\n         */\n    };\n\n    /**\n     * This class is used to represent an outgoing call.\n     *\n     * This is a SPiDR and RCC service class.\n     * Available for SPiDR since 3.0.0, and for RCC since 3.1.1.\n     *\n     * @name fcs.call#OutgoingCall\n     * @class\n     * @augments fcs.call.Call\n     * @param {String} callid Unique identifier for the call\n     * @param {String} callee Called party information. This is an RCC service parameter. Exists in received calls. Does not exist in rcc client started calls.\n     * @param {String} caller Calling party information. This is an RCC service parameter. Exists in received calls. Does not exist in rcc client started calls.\n     * @version @{spidr.jsl.version}\n     */\n    this.OutgoingCall = function() {\n\n        /**\n         * Sets the handler for listening for media state changed\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#OutgoingCall#onMediaStateChange\n         * @event\n         * @param {fcs.call.MediaStates} state Current state of the media negotiation.\n         *\n         **/\n\n        /**\n         * Sets the handler for listening local stream ready event.\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#OutgoingCall#onLocalStreamAdded\n         * @function\n         * @param {?MediaStream} stream remote MediaStream\n         *\n         **/\n\n        /**\n         * Sets the handler for listening remote stream ready event.\n         *\n         * This is a SPiDR service only event.\n         *\n         * @name fcs.call#OutgoingCall#onStreamAdded\n         *\n         * @function\n         * @param {?MediaStream} stream remote MediaStream\n         *\n         **/\n\n        /**\n         * Are we able to send video.\n         * Ex: Client may try to send video but video cam can be unplugged. Returns false in that case.\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#canSendVideo\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean}\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.canSend();\n         */\n\n        /**\n         * Are we able to send video. Checks the incoming SDP.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#canReceiveVideo\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean}\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.canReceiveVideo();\n         */\n\n        /**\n         * Returns hold state of call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#getHoldState\n         * @function\n         * @returns {@link fcs.HoldStates} or undefined if call has not been put\n         * on hold.\n         *\n         * @example\n         * // Available since 3.0.4 for SPiDR service, and since 3.1.1 for RCC service.\n         * // When an outgoingCall call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * outgoingCall.getHoldState();\n         */\n\n\n        /**\n         * Gets called party.\n         *\n         * This is an RCC service method. This paremeter exists in received calls. Does not exist in rcc client started calls.\n         *\n         * @name fcs.call#OutgoingCall#getCalledParty\n         * @function\n         * @returns {calledParty} string describing the called party\n         *\n         * @example\n         * // Available since 3.1.0 for RCC service.\n         *\n         *   fcs.call.onOutgoingCall = onOutgoingCall;\n         *   function onOutgoingCall(call) {\n         *       console.log(\"Called party: \" + call.getCalledParty());\n         *   }\n         */\n\n        /**\n         * Gets calling party.\n         *\n         * This is an RCC service method. This paremeter exists in received calls. Does not exist in rcc client started calls.\n         *\n         * @name fcs.call#OutgoingCall#getCallingParty\n         * @function\n         * @returns {callingParty} string describing the calling party\n         *\n         * @example\n         * // Available since 3.1.0 for RCC service.\n         *\n         *   fcs.call.onOutgoingCall = onOutgoingCall;\n         *   function onOutgoingCall(call) {\n         *       console.log(\"Calling party: \" + call.getCallingParty());\n         *   }\n         */\n\n\n        /**\n         * Gets call id.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#getId\n         * @function\n         * @returns {id} Unique identifier for the call\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.getId();\n         */\n\n        /**\n         * Force the plugin to send a IntraFrame.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#sendIntraFrame\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.sendIntraFrame();\n         */\n\n        /**\n         * Force the plugin to send a BlackFrame.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#sendBlackFrame\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.sendBlackFrame();\n         */\n\n        /**\n         * Force the plugin to refresh video renderer\n         * with this call's remote video stream.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#refreshVideoRenderer\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.refreshVideoRenderer();\n         */\n\n        /**\n         * Mute the microphone.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#mute\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.mute();\n         */\n\n        /**\n         * Unmute the microphone\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#unmute\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.unmute();\n         */\n\n        /**\n         * Silence the speaker\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#silence\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.silence();\n         */\n\n        /**\n         * Unsilence the speaker\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#unsilence\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.unsilence();\n         */\n\n        /**\n         * Check if the speaker is silenced\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#isSilenced\n         * @return {boolean} True if the call is silenced, false otherwise.\n         * @function\n         */\n\n        /**\n         * End the call.\n         *\n         * `Starting with the SPiDR 4.0.0 JSL API this method fires fcs.call.States.ENDED state.`\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#end\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         * @function\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * outgoingCall.end(\n         *   // onSuccess callback\n         *   function () {\n         *       console.log('Call is ended!');\n         *   },\n         *   // onFailure callback\n         *   function () {\n         *       console.log('Call could not be ended!');\n         *   });\n         */\n\n        /**\n         * Holds the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#hold\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var holdCallOnSuccess = function(){\n         *    console.log('Call is held!');\n         * };\n         * var holdCallOnFailure = function(err){\n         *    console.log('Call could not be held!');\n         * };\n         *\n         * outgoingCall.hold(holdCallOnSuccess, holdCallOnFailure);\n         */\n\n        /**\n         * Resume the call.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#unhold\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var unholdCallOnSuccess = function(){\n         *    console.log('Call is retrieved!');\n         * };\n         * var unholdCallOnFailure = function(err){\n         *    console.log('Call could not be retrieved!');\n         * };\n         *\n         * outgoingCall.unhold(unholdCallOnSuccess, unholdCallOnFailure);\n         */\n\n        /**\n         * Get WebRTC Statistics\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#OutgoingCall#getWebRtcStats\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * outgoingCall.getWebRtcStats(function(stats) {\n         *          // Stats returned successfully\n         *          logger.debug(\"Audio Packets Lost: \" + stats.audio.packetsLost);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"getWebRtcStats failed: \" + error);\n         *      }\n         * );\n         */\n\n        /**\n         * Get Native WebRTC Statistics\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#OutgoingCall#getNativeWebRtcStats\n         * @function\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         *  outgoingCall.getNativeWebRtcStats(function(results) {\n         *          // Stats returned successfully\n         *          logger.debug(\"getNativeWebRtcStats returned successfully: \" + results);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"getNativeWebRtcStats failed: \" + error);\n         *      }\n         *   );\n         */\n\n        /**\n         * Start WebRtc Statistics Timer\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#OutgoingCall#startWebRtcStatsTimer\n         * @function\n         * @param {string} interval The interval is a parameter that determines how many seconds if necessary turning statistics(e.g. 10 seconds)\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         *  outgoingCall.startWebRtcStatsTimer(interval,\n         *      function(stats) {\n         *          // Stats returned successfully\n         *          logger.debug(\"Audio Packets Lost: \" + stats.audio.packetsLost);\n         *      },\n         *      function(error) {\n         *          // Error occured\n         *          logger.error(\"startWebRtcStatsTimer failed: \" + error);\n         *      }\n         *   );\n         */\n\n        /**\n         * Stop WebRtc Statistics Timer\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#OutgoingCall#stopWebRtcStatsTimer\n         * @function\n         *\n         * @example\n         * // Available since 4.0.0 for SPiDR service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * outgoingCall.stopWebRtcStatsTimer();\n         */\n\n        /**\n         * Directly transfers the existing call to another recipient.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#directTransfer\n         * @function\n         * @param {string} address The address where the call is transferred (e.g. SIP URI)\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var onSuccess = function(){\n         *    console.log('Call is transferred!');\n         * };\n         * var onFailure = function(err){\n         *    console.log('Call could not be transferred!');\n         * };\n         *\n         * outgoingCall.directTransfer(\"user@domain.com\", onSuccess, onFailure);\n         */\n\n        /**\n         * Transfers an existing call to another existing call.\n         *\n         * This is an RCC service only method.\n         *\n         * @name fcs.call#OutgoingCall#consultativeTransfer\n         * @function\n         * @since 3.1.1\n         * @param {string} transferredCallId The id of call which will be transferred into the current(outgoing) call\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * // When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var incomingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    incomingCall = call;\n         * };\n         *\n         * // When an outgoing call is received, {@link fcs.call.event:onOutgoingCall} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onOutgoingCall = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * outgoingCall.consultativeTransfer(incomingCall.getId(), onSuccess, onFailure);\n         */\n\n        /**\n         * Stop the video for this call after the call is established.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#videoStop\n         * @function\n         * @since 3.0.0\n         * @param {function} [onSuccess] The onSuccess() to be called when the video is stopped<br />\n         * function()\n         * @param {function} [onFailure] The onFailure() to be called when the video could not be stopped<br />\n         * function()\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var videoStopOnSuccess = function(){\n         *    //do something here\n         * };\n         * var videoStopOnFailure = function(){\n         *    //do something here\n         * };\n         *\n         * outgoingCall.videoStop(videoStopOnSuccess, videoStopOnFailure);\n         */\n\n        /**\n         * Start the video for this call after the call is established.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#videoStart\n         * @function\n         * @since 3.0.0\n         * @param {function} [onSuccess] The onSuccess() to be called when the video is started\n         * @param {function} [onFailure] The onFailure() to be called when the video could not be started\n         * @param {object} [videoResolution] Sets the quality of video. This is a SPiDR service only parameter.\n         * @param {string} [videoResolution.width=\"320\"] Specifies min & max width of video.\n         * @param {string} [videoResolution.height=\"240\"] Specifies min & maxheight of video.\n         * @param {string} [videoResolution.minWidth=\"320\"] Specifies min width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.minHeight=\"240\"] Specifies min height of video. Overrides ({@link videoResolution.height})\n         * @param {string} [videoResolution.maxWidth=\"320\"] Specifies max width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.maxHeight=\"240\"] Specifies max height of video. Overrides ({@link videoResolution.height})\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var videoStartOnSuccess = function(){\n         *    //do something here\n         * };\n         * var videoStartOnFailure = function(){\n         *    //do something here\n         * };\n         *\n         * outgoingCall.videoStart(videoStopOnSuccess, videoStopOnFailure);\n         */\n\n        /**\n         * Join 2 calls.\n         * You need two different calls to establish this functionality.<br>\n         *\n         * In SPiDR implementation: in order to join two calls both calls must\n         * be put into hold state first.<br>\n         *\n         * In RCC implementation: in order to join two calls one call must\n         * be in local hold state, and the other one must be in answered state. <br>\n         *\n         * If not call servers will not handle your request.\n         *\n         * This is a SPiDR and RCC service method.\n         *\n         * @name fcs.call#OutgoingCall#join\n         * @function\n         * @param {fcs.call#Call} anotherCall Call that we want the current call to be joined to.\n         * @param {function} onSuccess The onSuccess({@link fcs.call#OutgoingCall}) to be called when the call have been joined provide the joined call as parameter\n         * @param {function} [onFailure] The onFailure() to be called when media could not be join\n         * @param {boolean} [isVideoEnabled] In order to join video calls set this to true. This is a SPiDR service only parameter.\n         * @param {object} [videoResolution] Sets the quality of video. This is a SPiDR service only parameter.\n         * @param {string} [videoResolution.width=\"320\"] Specifies min & max width of video.\n         * @param {string} [videoResolution.height=\"240\"] Specifies min & maxheight of video.\n         * @param {string} [videoResolution.minWidth=\"320\"] Specifies min width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.minHeight=\"240\"] Specifies min height of video. Overrides ({@link videoResolution.height})\n         * @param {string} [videoResolution.maxWidth=\"320\"] Specifies max width of video. Overrides ({@link videoResolution.width})\n         * @param {string} [videoResolution.maxHeight=\"240\"] Specifies max height of video. Overrides ({@link videoResolution.height})\n         *\n         * @example\n         * // Available since 3.0.0 for SPiDR service, and since 3.1.1 for RCC service.\n         * // A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * // And another {@link fcs.call#OutgoingCall} or {@link fcs.call#IncomingCall} is required which is going to be joined.\n         * var anotherCall; // assume this is previosuly created.\n         *\n         * var joinOnSuccess = function(joinedCall){\n         *    joinedCall // newly created.\n         *    console.log('Join success!');\n         * };\n         * var joinOnFailure = function(){\n         *    console.log('Join failure!');\n         * };\n         *\n         * outgoingCall.join(anotherCall, joinOnSuccess, joinOnFailure, isVideoEnabled, videoResolution);\n         *\n         * // When join() is successfuly completed, joinOnSuccess({@link fcs.call#OutgoingCall}) will be invoked.\n         */\n\n        /**\n         * Send Dual-tone multi-frequency signaling.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#sendDTMF\n         * @function\n         * @since 3.0.0\n         * @param {String} tone Tone to be send as dtmf.\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var videoStartOnSuccess = function(){\n         *    //do something here\n         * };\n         * var videoStartOnFailure = function(){\n         *    //do something here\n         * };\n         *\n         * outgoingCall.sendDTMF(\"0\");\n         */\n\n        /**\n         * Returns the call is a join call or not\n         * Do not use this function if you really dont need it.\n         * This will be handled by the framework.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#getJoin\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean} isJoin\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         *\n         * var videoStartOnSuccess = function(){\n         *    //do something here\n         * };\n         * var videoStartOnFailure = function(){\n         *    //do something here\n         * };\n         *\n         * outgoingCall.getJoin();\n         *\n         * This method will return true if the outgoingCall is a previously joined call {@see {@link fcs.call#OutgoingCall#join}}.\n         */\n\n        /**\n         * Marks the call as a join call or not\n         * Do not use this function if you really dont need it.\n         * This will be handled by the framework.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#setJoin\n         * @function\n         * @since 3.0.0\n         * @param {String} join\n         *\n         * @example\n         *\n         * When an outgoing call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * outgoingCall.setJoin(true);\n         */\n\n        /**\n         * Returns the button is a disabled or not\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#getButtonDisabler\n         * @function\n         * @since 3.0.0\n         * @returns {Boolean} buttonDisabler\n         *\n         * @example\n         *\n         * When an outgoing call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * outgoingCall.getButtonDisabler();\n         */\n\n        /**\n         * Clears the timer set with fcs.call#IncomingCall#setButtonDisabler.\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#clearBtnTimeout\n         * @function\n         * @since 3.0.0\n         * @param {bool} disable\n         *\n         * @example\n         *\n         * When an outgoing call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * outgoingCall.clearBtnTimeout();\n         */\n\n        /**\n         * Clears the timer set with fcs.call#IncomingCall#setButtonDisabler.\n         * You may want to disable your buttons while waiting for a response.\n         * Ex: this will prevent clicking multiple times for hold button until first hold response is not recieved.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#clearBtnTimeout\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an outgoing call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         *\n         * var outgoingCall = {};\n         * fcs.call.onReceived = function(call) {\n         *    outgoingCall = call;\n         * };\n         *\n         * outgoingcall.clearBtnTimeout();\n         */\n\n        /**\n         * Long call audit\n         * Creates a timer after call is established.\n         * This timer sends a \"PUT\" request to server.\n         * This will continue until one request fails.\n         * Handled by framework. You dont need to call this function.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#setAuditTimer\n         * @function\n         * @since 3.0.0\n         * @param {function} audit\n         *\n         * @example\n         *\n         * When an incoming call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         * incomingCall.setAuditTimer(audit);\n         */\n\n\n        /**\n         * Clears the long call audit prior to clearing all call resources.\n         * Handled by framework. you dont need to call this function.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#clearAuditTimer\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * When an outgoing call is received, {@link fcs.call#event:onReceived} handler will be invoked.\n         */\n\n        /**\n         * @deprecated DO NOT USE, use isVideoNegotiationAvailable instead\n         * Returns video negotation availability.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#isVideoNegotationAvailable\n         * @function\n         * @since 3.0.1\n         * @param {String} id Unique identifier for the call\n         * @example\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.isVideoNegotationAvailable(id);\n         */\n\n        /**\n         * Returns video negotiation availability.\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#isVideoNegotiationAvailable\n         * @function\n         * @since 3.1.0\n         * @example\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.isVideoNegotiationAvailable();\n         */\n\n        /**\n         * Set custom parameters\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#setCustomParameters\n         * @function\n         * @since 3.0.0\n         * @param {Array.<{name: string, value:string}>} customParameters Custom SIP header parameters for the call.\n         *\n         * @example\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.setCustomParameters(\n         *    [\n         *      {\n         *        \"name\": \"X-GPS\",\n         *        \"value\": \"42,686032,23.344565\"\n         *      }\n         *    ]\n         * );\n         */\n\n        /**\n         * Get custom parameters\n         *\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#getCustomParameters\n         * @function\n         * @since 3.0.0\n         * @returns {Array.<{name: string, value:string}>} Custom SIP header parameters of the call\n         *\n         * @example\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * const customParameters = outgoingCall.getCustomParameters();\n         */\n\n        /**\n         * Send custom parameters\n         *             * Sends the current custom parameters associated with a call to\n         * the SPiDR service.\n         *             * This is a SPiDR service only method.\n         *\n         * @name fcs.call#OutgoingCall#sendCustomParameters\n         * @function\n         * @since 3.0.0\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         * A previously created {@link fcs.call#OutgoingCall} is required. {@see {@link fcs.call#startCall}} for more details.\n         *\n         * var outgoingCall = {};\n         * fcs.call.startCall(..., ..., ..., onSuccess(outgoingCall), ..., ...);\n         * outgoingCall.sendCustomParameters();\n         */\n    };\n\n    /**\n     * This class is used to represent a local audio bridge.\n     *\n     * This is a SPiDR service only\n     *\n     * @name fcs.call#LocalAudioBridge\n     * @class\n     * @version @{spidr.jsl.version}\n     */\n    this.LocalAudioBridge = function() {\n        /**\n         * Add a call to the local audio bridge\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#LocalAudioBridge#add\n         * @function\n         * @param {fcs.call.IncomingCall | fcs.call.OutgoingCall} call The call to be added to the audio local bridge\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#LocalAudioBridge} is required. {@see {@link fcs.call#createLocalAudioBridge}} for more details.\n         * var incomingCall = {};\n         * var bridge = {};\n         * bridge.add(incomingCall);\n         */\n\n        /**\n         * Remove a call from the local audio bridge\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#LocalAudioBridge#remove\n         * @function\n         * @param {fcs.call.IncomingCall | fcs.call.OutgoingCall} call The call to be added to the audio local bridge\n         * @param {function} onSuccess The onSuccess() callback function to be called\n         * @param {function} onFailure The onFailure({@link fcs#Errors}) callback function to be called\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#LocalAudioBridge} is required. {@see {@link fcs.call#createLocalAudioBridge}} for more details.\n         * var incomingCall = {};\n         * var bridge = {};\n         * bridge.add(incomingCall);\n         * bridge.remove(incomingCall);\n         */\n\n        /**\n         * Closes the audio bridge, removing all of the calls.\n         *\n         * This is a SPiDR service method.\n         *\n         * @name fcs.call#LocalAudioBridge#close\n         * @function\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#LocalAudioBridge} is required. {@see {@link fcs.call#createLocalAudioBridge}} for more details.\n         * var bridge = {};\n         * bridge.close();\n         */\n\n        /**\n         * Mute the local audio for all of the calls on the bridge\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#LocalAudioBridge#muteLocalAudio\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#LocalAudioBridge} is required. {@see {@link fcs.call#createLocalAudioBridge}} for more details.\n         *\n         * var bridge = {};\n         * bridge.muteLocalAudio();\n         */\n\n        /**\n         * Mute the local audio for all of the calls on the bridge\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#LocalAudioBridge#unmuteLocalAudio\n         * @function\n         * @since 3.0.0\n         *\n         * @example\n         *\n         * A previously created {@link fcs.call#LocalAudioBridge} is required. {@see {@link fcs.call#createLocalAudioBridge}} for more details.\n         *\n         * var bridge = {};\n         * bridge.unmuteLocalAudio();\n         */\n\n        /**\n         * Silences the remote audio for all of the calls on the bridge\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#LocalAudioBridge#silenceRemoteAudio\n         * @function\n         */\n\n        /**\n         * Un-silences the remote audio for all of the calls on the bridge\n         * This is a SPiDR service only method.\n         *\n         * @name fcs.call#LocalAudioBridge#unsilenceRemoteAudio\n         * @function\n         */\n    };\n}\n","const prefix = '@@KANDY/'\n\n/**\n * Contact Actions\n *\n * Action types associated with the operations of methods on the contacts namespace\n */\nexport const ADD_CONTACT = prefix + 'ADD_CONTACT'\nexport const ADD_CONTACT_FINISH = prefix + 'ADD_CONTACT_FINISH'\n\nexport const REFRESH_CONTACTS = prefix + 'REFRESH_CONTACTS'\nexport const REFRESH_CONTACTS_FINISH = prefix + 'REFRESH_CONTACTS_FINISH'\n\nexport const REMOVE_CONTACT = prefix + 'REMOVE_CONTACT'\nexport const REMOVE_CONTACT_FINISH = prefix + 'REMOVE_CONTACT_FINISH'\n\nexport const UPDATE_CONTACT = prefix + 'UPDATE_CONTACT'\nexport const UPDATE_CONTACT_FINISH = prefix + 'UPDATE_CONTACT_FINISH'\n\nexport const FETCH_CONTACT = prefix + 'FETCH_CONTACT'\nexport const FETCH_CONTACT_FINISH = prefix + 'FETCH_CONTACT_FINISH'\n\n/**\n * User Actions\n *\n * Action types associated with the operations of methods on the users namespace\n */\nexport const FETCH_USER = prefix + 'FETCH_USER'\nexport const FETCH_USER_FINISH = prefix + 'FETCH_USER_FINISH'\n\nexport const FETCH_SELF_INFO = prefix + 'FETCH_SELF_INFO'\nexport const FETCH_SELF_INFO_FINISH = prefix + 'FETCH_SELF_INFO_FINISH'\n\nexport const SEARCH_DIRECTORY = prefix + 'SEARCH_DIRECTORY'\nexport const SEARCH_DIRECTORY_FINISH = prefix + 'SEARCH_DIRECTORY_FINISH'\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","/**\n * This wrapper generates error messages from v8n Validation Errors. https://imbrn.github.io/v8n/api/#validationerror\n * They are logged using LogManager as a warning to our customers when they mess up arguments.\n * To use: `import { enums, validation as v8n, parse } from '<relativePath>/common/validation'`.\n * Build up your validation using v8n.string, v8n.number, v8n.schema, enums, etc.\n * Enums is not part of the v8n library, but provided here for ease of use\n * const v8nValidation = v8n.schema({\n      sdpSemantics: enums(['unified-plan', 'plan-b']),\n      iceServers: v8n.array(),\n      iceCollectionDelay: v8n.positive(),\n      serverTurnCredentials: v8n.boolean(),\n      iceCollectionCheck: v8n.optional(v8n.function())\n    })\n * Create a validator like this: `const parseOptions = parse('nameOfArg', v8nValidation)`\n * Run that validator against the actual values: `parseOptions(options)`\n * Returns the input either way and logs errors, in the future will throw errors on invalid data.\n */\nimport { __, concat, flatMap, isArray, isEmpty, join, map, partial } from 'lodash/fp'\nimport { logManager } from '../../logs'\nimport v8n from 'v8n'\n\n// Custom v8n Rules - https://imbrn.github.io/v8n/api/#extend\nv8n.extend({\n  function: () => value => typeof value === 'function'\n})\n\n// EXPORTS / IO\nexport const validation = v8n()\n\n// TODO: Add an enums function to the v8n library\n// Use as such: `prop: enums( [ 'red', 'blue', 'green' ] )\nexport const enums = values => {\n  // Map iteratee isn't just `v8n().exact` due to v8n() returning a new ProxyContext each time\n  const v8nExact = value => v8n().exact(value)\n  const exactValues = map(v8nExact)(values)\n  return v8n().passesAnyOf(...exactValues)\n}\n\n// Name -> v8nRule -> Input -> [String]\nexport const errorMessages = name => v8nRule => input =>\n  flatMap(validationErrorMessages(name))(validationResults(v8nRule)(input))\n\nexport const validationResults = v8nRule => input => v8nRule.testAll(input)\n\n// (Name, v8nRule) -> Input -> IO Input\nexport const parse = (name, v8nRule) => input => {\n  const errors = errorMessages(name)(v8nRule)(input)\n\n  if (isEmpty(errors)) {\n    return input\n  } else {\n    const log = logManager.getLogger('VALIDATION')\n    log.info(prettyPrint(errors)) // This is an IO side-effect\n    return input\n  }\n}\n\n// DEFINITIONS\n\n// Name -> ValidationError -> [String]\n// https://imbrn.github.io/v8n/api/#validationerror\nconst validationErrorMessages = name => validationError => {\n  const startingPath = []\n  return validationErrorMessageHelper(startingPath)(name)(validationError)\n}\n\n// [String] -> Name -> ValidationError -> [String]\nconst validationErrorMessageHelper = acc => name => ({ cause, rule, target, value }) => {\n  const path = concat(acc)(target || name)\n  if (isArray(cause)) {\n    const newVEM = validationErrorMessageHelper(path)(target)\n    return flatMap(newVEM)(cause)\n  } else {\n    return `${join('.')(path)} has value of '${value}', but it should be ${ruleMessage(rule)}`\n  }\n}\n\n// Rule -> String\n// https://imbrn.github.io/v8n/api/#rule\nconst ruleMessage = ({ name, args }) => {\n  switch (name) {\n    case 'schema':\n      return 'Schema'\n\n    case 'passesAnyOf':\n      return `any of '${join(\"', '\")(map(enumName)(args))}'`\n\n    case 'between':\n      return `between ${args.join(', ')}`\n\n    default:\n      return `${aOrAn(name)} ${name}`\n  }\n}\n\n// HELPERS\nconst enumName = arg => arg.chain[0].args // v8n internals\nconst prettyPrint = partial(JSON.stringify)([__, null, 4])\n// https://dictionary.cambridge.org/grammar/british-grammar/a-an-and-the\nconst aOrAn = string => (/[aeiou]/i.test(string[0]) ? 'an' : 'a')\n","export default {\n    NETWORK: 1,\n    AUTH: 2,\n    STATE: 3,\n    PRIV: 4,\n    UNKNOWN: 9,\n    LOGIN_LIMIT_CLIENT: 10,\n    INCORRECT_LOGIN_PASS: 11,\n    INVALID_LOGIN: 12,\n    // smartoffice2.0 specific\n    FORCE_LOGOUT_ERROR: 13,\n    // smartoffice2.0 specific\n    LOGIN_LIMIT_TABLET: 14,\n    TOKEN_NOT_FOUND: 15,\n    SESSION_EXPIRED: 16,\n    VIDEO_SESSION_NOT_AVAILABLE: 17,\n    PENDING_REQUEST: 18,\n    NOT_ALLOWED_SERVICE: 19,\n    NOT_ALLOWED_METHOD: 20,\n    NOT_ALLOWED_INSTANCE: 21,\n    INVALID_PARAMETER: 22,\n    CONNECTION_ISSUE: 23,\n    MEDIA_NOT_FOUND: 24,\n    MEDIA_NOT_ALLOWED: 25,\n    CALL_FAILED: 26,\n    CALL_ENDED: 27,\n    MAXIMUM_ENTRIES:28,\n    ENTRY_ALREADY_EXISTS:29,\n    SERVICE_NOT_AUTHORIZED:30,\n    DB_EXCEPTION:31,\n    INSUFFICIENT_INFO:32,\n    NOT_FOUND:33,\n    INTERNAL_SERVER_ERROR:34,\n    SERVICE_UNAVAILABLE:35,\n    SESSION_NOT_FOUND: 36,\n    CANNOT_SUBSCRIBE: 37,\n    MEDIA_REQUIRED: 38\n};\n","import { mapKeys } from 'lodash/fp'\n\n/**\n * Helper function. Converts an object so that its keys are the same as its values.\n * @method mapValuesToKeys\n * @param  {Object} source\n * @return {Object}\n */\nfunction mapValuesToKeys (source) {\n  return mapKeys(function (value) {\n    return source[value]\n  })(source)\n}\n\n/**\n * Enum of FCS call states.\n * Key is the \"code\" that FCS uses, and value is the text representation.\n * These are taken from FCS callManager.js, but inversed.\n *      See `fcs.call.States`.\n * @type {Object}\n */\nexport const FCS_CALL_STATES = {\n  0: 'IN_CALL',\n  1: 'ON_HOLD',\n  2: 'RINGING',\n  3: 'ENDED',\n  4: 'REJECTED',\n  5: 'OUTGOING',\n  6: 'INCOMING',\n  7: 'ANSWERING',\n  8: 'JOINED',\n  9: 'RENEGOTIATION',\n  10: 'TRANSFERRED',\n  11: 'ON_REMOTE_HOLD',\n  12: 'CALL_IN_PROGRESS',\n  13: 'EARLY_MEDIA',\n  14: 'TRANSFER_FAILURE',\n  15: 'REPLACING'\n}\n\n/**\n * Call states.\n * Same as FCS_CALL_STATES, except both key and value are the text representation.\n * @name CALL_STATES_FCS\n */\nexport const CALL_STATES_FCS = mapValuesToKeys(FCS_CALL_STATES)\n\n/**\n * Call states\n * Call states used in the cpaas and link call plugins\n * @name CALL_STATES\n */\nexport const CALL_STATES = {\n  INITIATING: 'Initiating',\n  INITIATED: 'Initiated',\n  EARLY_MEDIA: 'Early Media',\n  RINGING: 'Ringing',\n  CANCELLED: 'Cancelled',\n  CONNECTED: 'Connected',\n  ON_HOLD: 'On Hold',\n  ENDED: 'Ended'\n}\n\n/**\n * Possible states a call's media can be in.\n * Describes whether media is flowing or if an endpoint is preventing media flow.\n * @name CALL_MEDIA_STATES\n * @type {Object}\n * @property {string} CONNECTED Both call endpoints allow for media to flow.\n * @property {string} LOCAL_HOLD Local endpoint disallows media from flowing.\n * @property {string} REMOTE_HOLD Remote endpoint disallows media from flowing.\n * @property {string} DUAL_HOLD Both endpoints disallow media from flowing.\n */\nexport const CALL_MEDIA_STATES = {\n  CONNECTED: 'Connected',\n  LOCAL_HOLD: 'Local Hold',\n  REMOTE_HOLD: 'Remote Hold',\n  DUAL_HOLD: 'Dual Hold'\n}\n\n/**\n * Possible states for a Call's media connection.\n * @name CALL_MEDIA_CONNECTION_STATES\n */\nexport const CALL_MEDIA_CONNECTION_STATES = {\n  NEW: 'new',\n  CHECKING: 'checking',\n  CONNECTED: 'connected',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n  DISCONNECTED: 'disconnected',\n  CLOSED: 'closed'\n}\n\n/**\n * Call operations that require negotiation.\n * @name OPERATIONS\n * @type {Object}\n * @property {string} CHANGE_MEDIA Media flow remains the same, includes non-flow related media changes.\n * @property {string} HOLD_MEDIA   Media flow stops. May include non-flow related media changes.\n * @property {string} UNHOLD_MEDIA Media flow restarts. May include non-flow related media changes.\n * @property {string} MUSIC_ON_HOLD Media flow changes to sendonly.\n */\nexport const OPERATIONS = {\n  CHANGE_MEDIA: 'Change Media',\n  HOLD_MEDIA: 'Hold Media',\n  UNHOLD_MEDIA: 'Unhold Media',\n  MUSIC_ON_HOLD: 'Music on hold'\n}\n\n/**\n * Complex call operations.\n * @name COMPLEX_OPERATIONS\n * @type {Object}\n * @property {string} DIRECT_TRANSFER\n * @property {string} CONSULTATIVE_TRANSFER\n * @property {string} JOIN\n */\nexport const COMPLEX_OPERATIONS = {\n  DIRECT_TRANSFER: 'Direct Transfer',\n  CONSULTATIVE_TRANSFER: 'Consultative Transfer',\n  JOIN: 'Join'\n}\n\n/**\n * Complex call operation messages.\n * @name COMPLEX_OPERATION_MESSAGES\n * @type {Object}\n * @property {string} DIRECT_TRANSFER_SUCCESS Success message for direct transfer.\n * @property {string} CONSULTATIVE_TRANSFER_SUCCESS Success message for consultative transfer (matches reasonText from notification).\n * @property {string} JOIN_SUCCESS Success message for join.\n * @property {string} DIRECT_TRANSFER_FAILURE Failure message for direct transfer.\n * @property {string} CONSULTATIVE_TRANSFER_FAILURE Failure message for consultative transfer.\n * @property {string} JOIN_FAILURE Failure message for join.\n */\nexport const COMPLEX_OPERATION_MESSAGES = {\n  DIRECT_TRANSFER_SUCCESS: 'Direct Transfer Successful',\n  CONSULTATIVE_TRANSFER_SUCCESS: 'Transfer Successful',\n  JOIN_SUCCESS: 'Join Successful',\n  DIRECT_TRANSFER_FAILURE: 'Direct Transfer Failed',\n  CONSULTATIVE_TRANSFER_FAILURE: 'Transfer Failed',\n  JOIN_FAILURE: 'Join Failed'\n}\n\n/**\n * Status codes that match success messages.\n * @name STATUS_CODES\n * @type {Object}\n * @property {number} DIRECT_TRANSFER_SUCCESS Status code for successful direct transfer.\n * @property {number} CONSULTATIVE_TRANSFER_SUCCESS Status code for successful consultative transfer.\n * @property {number} JOIN_SUCCESS Status code for successful join.\n * @property {number} DIRECT_TRANSFER_FAILURE Status code for failed direct transfer.\n * @property {number} CONSULTATIVE_TRANSFER_FAILURE Status code for failed consultative transfer.\n * @property {number} JOIN_FAILURE Status code for failed join.\n */\nexport const STATUS_CODES = {\n  DIRECT_TRANSFER_SUCCESS: 9905,\n  CONSULTATIVE_TRANSFER_SUCCESS: 9905,\n  JOIN_SUCCESS: 9906,\n  DIRECT_TRANSFER_FAILURE: -1,\n  CONSULTATIVE_TRANSFER_FAILURE: -1,\n  JOIN_FAILURE: -2\n}\n\n/**\n * Call direction\n * Indication of which direction the call is going\n * @name CALL_DIRECTION\n */\nexport const CALL_DIRECTION = {\n  INCOMING: 'incoming',\n  OUTGOING: 'outgoing'\n}\n\n/*\n * A conversion from MediaDeviceInfo.kind values to their more common terms.\n * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo/kind\n */\nexport const WEBRTC_DEVICE_KINDS = {\n  audioinput: 'microphone',\n  videoinput: 'camera',\n  audiooutput: 'speaker'\n}\n\n/**\n * Enum of ICE media states.\n * These are taken from FCS call, but inversed.\n *      See `fcs.call.MediaStates`.\n * @name FCS_ICE_MEDIA_STATES\n * @type {Object}\n */\nexport const FCS_ICE_MEDIA_STATES = {\n  0: 'NEW',\n  1: 'CHECKING',\n  2: 'CONNECTED',\n  3: 'COMPLETED',\n  4: 'FAILED',\n  5: 'DISCONNECTED',\n  6: 'CLOSED'\n}\n\n/**\n * ICE media states.\n * Same as FCS_ICE_MEDIA_STATES, except both key and value are the text representation.\n * @name ICE_MEDIA_STATES\n */\nexport const ICE_MEDIA_STATES = mapValuesToKeys(FCS_ICE_MEDIA_STATES)\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","module.exports = true;\n","exports.f = {}.propertyIsEnumerable;\n","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","module.exports = {};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","/**\n * Log levels supported by Loggers.\n * When a level is set, all logs of that level and higher will be logged.\n * @type {Object}\n */\nexport const logLevels = {\n  TRACE: 'TRACE',\n  DEBUG: 'DEBUG',\n  INFO: 'INFO',\n  WARN: 'WARN',\n  ERROR: 'ERROR',\n  SILENT: 'SILENT'\n}\n\n/**\n * Numeric values for each log level.\n * When a level is set, all logs of that level and higher will be logged.\n * @type {Object}\n */\nexport const levelValues = {\n  TRACE: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4,\n  SILENT: 5\n}\n\n/**\n * Supported Log methods and their set log level; `<logMethod>: <logLevel>`\n * Used to construct the logging methods on a Logger.\n * @type {Object}\n */\nexport const logMethods = {\n  // Standard methods.\n  trace: logLevels.TRACE,\n  debug: logLevels.DEBUG,\n  info: logLevels.INFO,\n  warn: logLevels.WARN,\n  error: logLevels.ERROR,\n  // Extra console methods.\n  log: logLevels.DEBUG,\n  group: logLevels.DEBUG,\n  groupEnd: logLevels.DEBUG,\n  groupCollapsed: logLevels.DEBUG\n}\n\n/**\n * The log level for all timer methods.\n * @type {string}\n */\nexport const timeLevel = logLevels.DEBUG\n","const prefix = '@@KANDY/'\n\nexport const CONNECT = prefix + 'CONNECT'\nexport const SET_CONNECTION_INFO = prefix + 'SET_CONNECTION_INFO'\nexport const CONNECTION_OCCURRED = prefix + 'CONNECTION_OCCURRED'\nexport const CONNECT_FINISHED = prefix + 'CONNECT_FINISHED'\nexport const GET_USER_DETAILS = prefix + 'GET_USER_DETAILS'\nexport const USER_DETAILS_RECEIVED = prefix + 'USER_DETAILS_RECEIVED'\nexport const DISCONNECT = prefix + 'DISCONNECT'\nexport const DISCONNECT_FINISHED = prefix + 'DISCONNECT_FINISHED'\nexport const RESUBSCRIPTION_FINISHED = prefix + 'RESUBSCRIPTION_FINISHED'\nexport const REFRESH_TOKENS = prefix + 'REFRESH_TOKENS'\nexport const REFRESH_TOKENS_FINISHED = prefix + 'REFRESH_TOKENS_FINISHED'\n\nexport const UPDATE_SUBSCRIPTION = prefix + 'UPDATE_SUBSCRIPTION'\nexport const UPDATE_SUBSCRIPTION_FINISH = prefix + 'UPDATE_SUBSCRIPTION_FINISH'\n\nexport const SET_TOKEN = prefix + 'SET_TOKEN'\n\nexport const SET_CREDENTIALS = prefix + 'SET_CREDENTIALS'\nexport const SET_CREDENTIALS_FINISH = prefix + 'SET_CREDENTIALS_FINISH'\n\nexport const AUTHORIZATION_ERROR = prefix + 'AUTHORIZATION_ERROR'\n\nexport const UPDATE_HMAC_TOKEN = prefix + 'UPDATE_HMAC_TOKEN'\n","const PREFIX = '@@KANDY/'\n\nexport const CREATE_CONVERSATION = PREFIX + 'CREATE_CONVERSATION'\nexport const SEND_MESSAGE = PREFIX + 'SEND_MESSAGE'\nexport const SEND_MESSAGE_FINISH = PREFIX + 'SEND_MESSAGE_FINISH'\nexport const MESSAGE_RECEIVED = PREFIX + 'MESSAGE_RECEIVED'\nexport const INCOMING_MESSAGE_READ = PREFIX + 'INCOMING_MESSAGE_READ'\nexport const SEND_MESSAGE_READ = PREFIX + 'SEND_MESSAGE_READ'\nexport const SEND_MESSAGE_READ_FINISH = PREFIX + 'SEND_MESSAGE_READ_FINISH'\n\nexport const CLEAR_MESSAGES = PREFIX + 'CLEAR_MESSAGES'\nexport const CLEAR_MESSAGES_FINISH = PREFIX + 'CLEAR_MESSAGES_FINISH'\n\nexport const DELETE_CONVERSATION = PREFIX + 'DELETE_CONVERSATION'\nexport const DELETE_CONVERSATION_FINISH = PREFIX + 'DELETE_CONVERSATION_FINISH'\n\nexport const DELETE_MESSAGE = PREFIX + 'DELETE_MESSAGES'\nexport const DELETE_MESSAGE_FINISH = PREFIX + 'DELETE_MESSAGES_FINISH'\n\nexport const FETCH_CONVERSATIONS = PREFIX + 'FETCH_CONVERSATIONS'\nexport const FETCH_CONVERSATIONS_FINISHED = PREFIX + 'FETCH_CONVERSATIONS_FINISHED'\n\nexport const UPDATE_CONVERSATION = PREFIX + 'UPDATE_CONVERSATION'\n\nexport const FETCH_MESSAGES = PREFIX + 'FETCH_MESSAGES'\nexport const FETCH_MESSAGES_FINISHED = PREFIX + 'FETCH_MESSAGES_FINISHED'\n\nexport const FILE_UPLOAD_FAIL = PREFIX + 'FILE_UPLOAD_FAIL'\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","/**\n * Possible subscription states.\n * @name SUBSCRIPTION_STATE\n * @type {Object}\n */\nexport const SUBSCRIPTION_STATE = {\n  FULL: 'FULL',\n  PARTIAL: 'PARTIAL',\n  NONE: 'NONE'\n}\n\n/**\n * Possible disconnect reasons.\n * @name DISCONNECT_REASONS\n * @type {Object}\n */\nexport const DISCONNECT_REASONS = {\n  GONE: 'GONE',\n  LOST_CONNECTION: 'LOST_CONNECTION'\n}\n","const PREFIX = '@@KANDY/'\n\nexport const REQUEST = PREFIX + 'REQUEST'\nexport const RESPONSE = PREFIX + 'RESPONSE'\n\nexport const AUTHORIZATION_ERROR = PREFIX + 'AUTHORIZATION_ERROR'\n","// Request plugin.\nimport { injectAgentVersionHeader, customAgentVersionHeaderSuffix } from '../interface/selectors'\n\n// Other plugins.\nimport { getPlatform, getRequestInfo } from '../../auth/interface/selectors'\nimport { logManager } from '../../logs'\n\n// Utils.\nimport { getVersion } from '../../common/version'\nimport { toQueryString } from '../../common/utils'\nimport { platforms } from '../../constants'\n\n// Libraries.\nimport { select } from 'redux-saga/effects'\nimport { cloneDeep } from 'lodash/fp'\n\nconst log = logManager.getLogger('REQUEST')\n\n/**\n * Helper function to compile the common headers/options for a REST request.\n * @method getCommonOptions\n * @param  {string} url The URL to be used for the request.\n * @return {Object}\n */\nexport function * getCommonOptions (url) {\n  const platform = yield select(getPlatform)\n  const requestInfo = yield select(getRequestInfo, platform)\n  const useCustomHeader = yield select(injectAgentVersionHeader)\n  const customSuffix = yield select(customAgentVersionHeaderSuffix)\n\n  // Start off with whatever options were set by the Auth plugin.\n  //    The authentication headers / token will be there if they are set.\n  let options\n  if (platform === 'cpaas') {\n    // For some reason, CPaaS has this property as `options` where the other\n    //    SDKs have it as `requestOptions`. Workaround that here.\n    options = requestInfo.options || {}\n  } else {\n    options = requestInfo.requestOptions || {}\n  }\n\n  // Ensure there is a headers object.\n  options.headers = options.headers || {}\n\n  // Add the common headers.\n  options.headers['Content-Type'] = 'application/json'\n  options.headers.Accept = 'application/json'\n\n  // If enabled, add the 'Agent Version' header to the options.\n  if (useCustomHeader) {\n    let headerValue = getCpaasAgentHeaderValue(platform, url)\n    if (customSuffix) {\n      // If a custom suffix value was provided as well, then use it.\n      headerValue += ' ' + customSuffix\n    }\n    options.headers['X-Cpaas-Agent'] = headerValue\n  }\n\n  return options\n}\n\n/**\n * Determine and return the current SDK platform and version string to be used\n * with the x-Cpaas-Agent network request header field.\n * @method getCpaasAgentHeaderValue\n * @param  {string}  platform Which platform is currently being used.\n * @param  {string}  url The url for the request being made.\n * @return {string}  A string representation of the platform and version the SDK is using.\n */\nexport function getCpaasAgentHeaderValue (platform, url) {\n  // Assume request is for CPaaS platform, by default.\n  let headerValue = `cpaas-js-sdk/${getVersion()}`\n\n  // Check if request is for callMe service, otherwise determine the appropriate platform.\n  // (callMe service uses Link platform for call requests)\n  if (url && url.includes('/anonymous/')) {\n    headerValue = `callme-js-sdk/${getVersion()}`\n  } else {\n    // Check the actual platform used\n    if (platform === platforms.UC) {\n      headerValue = `uc-js-sdk/${getVersion()}`\n    } else if (platform === platforms.LINK) {\n      headerValue = `link-js-sdk/${getVersion()}`\n    }\n  }\n  return headerValue\n}\n\n/**\n * Prepares a REST request options object for logging by removing passwords\n * and parses the body string into an object that can be interacted with in console.\n * @method sanitizeRequest\n * @param {Object} options An object containing any custom settings that you want to\n *                         apply to the request. See [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/fetch)\n *                         or a full description and defaults.\n * @return {Object} A sanitized REST request options object that can be safely logged.\n */\nexport function sanitizeRequest (options) {\n  const logOptions = cloneDeep(options)\n  // When logging the Auth header, cut it off so that we can see the type of\n  //    token but not the token itself. Depending on the type, it can contain\n  //    a password.\n  const authHeader = logOptions.headers && logOptions.headers.Authorization\n  if (authHeader) {\n    logOptions.headers.Authorization = authHeader.substring(0, 6) + '...'\n  }\n\n  // If the rest request body is a string, try to parse it as JSON and store\n  // it as an object so it can be interacted with in the console\n  const body = logOptions.body\n  if (body) {\n    try {\n      logOptions.body = JSON.parse(body)\n    } catch (e) {\n      // Noop, leave the body in whatever format it was in.\n    }\n  }\n\n  return logOptions\n}\n\n/**\n * Send a REST request to Link with the appropriate configuration.\n * @method fetchResource\n * @param {string} resource The path of the resource to fetch from the underlying service. This path will be appended\n *                          to the base URL according to SDK configuration.\n * @param {Object} requestInfo An object containing any custom settings that you want to apply to the request. See [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/fetch)\n *                             for a full description and defaults.\n * @return {Promise<Response>} A promise for a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) object.\n */\nexport async function fetchResource (resource, requestInfo, module) {\n  const { requestOptions } = requestInfo\n\n  // If the app doesn't prepend the '/' we should add it.\n  if (resource.charAt() !== '/') {\n    resource = `/${resource}`\n  }\n\n  const url = `${requestInfo.baseURL}${resource}`\n  const logOptions = sanitizeRequest(requestOptions)\n  log.debug('Making REST request', logOptions)\n\n  const queryParams = requestInfo.requestOptions.queryParams || {}\n  let queryString = toQueryString(queryParams)\n  // Check resource passed in for any existing query params\n  if (resource.includes('?')) {\n    queryString = queryString.replace('?', '&')\n  }\n  const response = await fetch(url + queryString, requestOptions)\n\n  log.debug('Received REST response', response)\n\n  return response\n}\n","import * as actionTypes from './actionTypes'\n// Constants\nimport { platforms } from '../../constants'\n\n/**\n * @param {string} type\n */\nfunction createWsAction (type) {\n  /**\n   * @param {any=} payload\n   * @param {string=} platform\n   * @param {boolean=} [isReconnect] flag to signify if we are reconnecting or not.\n   */\n  function action (payload, platform = platforms.LINK, isReconnect = false) {\n    return {\n      type,\n      // TODO: This must check for basic error eventually instead.\n      error: payload instanceof Error,\n      payload,\n      meta: { platform, isReconnect }\n    }\n  }\n  return action\n}\n\nexport const wsAttemptConnect = createWsAction(actionTypes.WS_ATTEMPT_CONNECT)\nexport const wsDisconnect = createWsAction(actionTypes.WS_DISCONNECT)\nexport const wsConnectFinished = createWsAction(actionTypes.WS_CONNECT_FINISHED)\nexport const wsDisconnectFinished = createWsAction(actionTypes.WS_DISCONNECT_FINISHED)\nexport const wsReconnectFailed = createWsAction(actionTypes.WS_RECONNECT_FAILED)\n\nexport const wsClosed = createWsAction(actionTypes.WS_CLOSED)\nexport const wsError = createWsAction(actionTypes.WS_ERROR)\n\nexport const lostConnection = createWsAction(actionTypes.LOST_CONNECTION)\n\nexport const receiveServerPing = createWsAction(actionTypes.RECEIVE_SERVER_PING)\nexport const receiveServerPong = createWsAction(actionTypes.RECEIVE_SERVER_PONG)\n\nexport const changeConnectivityChecking = createWsAction(actionTypes.CHANGE_CONNECTIVITY_CHECKING)\nexport const changePingInterval = createWsAction(actionTypes.CHANGE_PING_INTERVAL)\n","import { cloneDeep } from 'lodash/fp'\nimport name from './name'\n\nexport function getConnectionState (state, platform) {\n  if (state[name][platform]) {\n    return cloneDeep(state[name][platform])\n  } else {\n    return new Error('No sockets are up. Have you attempted to connect?')\n  }\n}\n\n/**\n * Retrieves the config options provided by the connectivity plugin.\n * @method getConnectivityConfig\n * @return {Object}\n */\nexport function getConnectivityConfig (state) {\n  return state.config[name]\n}\n\n/**\n * Retrieves the pingInterval property from state\n * @method getPingInterval\n * @param {Object} state Redux state.\n * @return {Object}\n */\nexport function getPingInterval (state) {\n  return state[name].pingInterval\n}\n\n/**\n * Retrieves the checkConnectivity property from state\n * @method getCheckConnectivity\n * @param {Object} state Redux state.\n * @return {Object}\n */\nexport function getCheckConnectivity (state) {\n  return state[name].checkConnectivity\n}\n","import Map from '../../utils/map';\n\nexport function WebRtcAdaptorModel() {\n    var self = {},\n        dtlsEnabled = false,\n        dscpEnabled,\n        iceServerUrl = '',\n        containers = {\n            video: null,\n            localVideo: null,\n            remoteVideo: null,\n            defaultVideo: null\n        },\n        mediaSources = {\n            video: {\n                available: false\n            },\n            audio: {\n                available: false\n            },\n            screen: {\n                available: false,\n                width: '1024',\n                height: '768',\n                rate: 15\n            }\n        },\n        stats = {},\n        initialized = false,\n        rtcLibrary = {},\n        language,\n        logLevel = 4,\n        peerCount = 0,\n        pluginEnabled = false,\n        h264Enabled = false,\n        screenStream,\n        localStreamMap = new Map(),\n        privateStreamMap = new Map(),\n        localMedia = {},\n        selectedMicrophoneId,\n        selectedSpeakerId,\n        selectedCameraId,\n        mediaSourceList;\n\n    self.getLocalMedia = function() {\n        return localMedia;\n    };\n\n    self.setLocalMedia = function(media) {\n        localMedia = media;\n    };\n\n    self.getLocalStreamMap = function() {\n        return localStreamMap;\n    };\n\n    self.getScreenStream = function() {\n        return screenStream;\n    };\n\n    self.setScreenStream = function(stream) {\n        screenStream = stream;\n    };\n\n    self.isH264Enabled = function() {\n        return h264Enabled;\n    };\n\n    self.setH264Enabled = function(enabled) {\n        h264Enabled = enabled === true ? true : false;\n    };\n\n    self.getIceServerUrl = function() {\n        return iceServerUrl;\n    };\n\n    self.setIceServerUrl = function(url) {\n        iceServerUrl = url;\n    };\n\n    self.isDtlsEnabled = function() {\n        return dtlsEnabled;\n    };\n\n    self.setDtlsEnabled = function(enabled) {\n        dtlsEnabled = enabled;\n    };\n\n    self.isDscpEnabled = function() {\n        return dscpEnabled;\n    };\n\n    self.setDscpEnabled = function(enabled) {\n        dscpEnabled = enabled;\n    };\n\n    self.getVideoContainer = function() {\n        return containers.video;\n    };\n\n    self.setVideoContainer = function(container) {\n        containers.video = container;\n    };\n\n    self.getLocalVideoContainer = function() {\n        return containers.localVideo;\n    };\n\n    self.setLocalVideoContainer = function(container) {\n        containers.localVideo = container;\n    };\n\n    self.getRemoteVideoContainer = function() {\n        return containers.remoteVideo;\n    };\n\n    self.setRemoteVideoContainer = function(container) {\n        containers.remoteVideo = container;\n    };\n\n    self.getDefaultVideoContainer = function() {\n        return containers.defaultVideo;\n    };\n\n    self.setDefaultVideoContainer = function(container) {\n        containers.defaultVideo = container;\n    };\n\n    self.isInitialized = function() {\n        return initialized;\n    };\n\n    self.setInitialized = function(value) {\n        initialized = value === true ? true : false;\n    };\n\n    self.getRtcLibrary = function() {\n        return rtcLibrary;\n    };\n\n    self.setRtcLibrary = function(library) {\n        rtcLibrary = library;\n    };\n\n    self.getLogLevel = function() {\n        return logLevel;\n    };\n\n    self.setLogLevel = function(level) {\n        logLevel = level;\n    };\n\n    self.getLanguage = function() {\n        return language;\n    };\n\n    self.setLanguage = function(lang) {\n        language = lang;\n    };\n\n    self.getVideoWidth = function() {\n        return mediaSources.video.width;\n    };\n\n    self.setVideoWidth = function(_videoWidth) {\n        mediaSources.video.width = _videoWidth;\n    };\n\n    self.getVideoHeight = function() {\n        return mediaSources.video.height;\n    };\n\n    self.setVideoHeight = function(_videoHeight) {\n        mediaSources.video.height = _videoHeight;\n    };\n\n    self.getVideoSourceAvailable = function() {\n        return mediaSources.video.available || mediaSources.screen.available;\n    };\n\n    self.setVideoSourceAvailable = function(_videoSourceAvailable) {\n        mediaSources.video.available = _videoSourceAvailable;\n    };\n\n    self.getAudioSourceAvailable = function() {\n        return mediaSources.audio.available;\n    };\n\n    self.setAudioSourceAvailable = function(_audioSourceAvailable) {\n        mediaSources.audio.available = _audioSourceAvailable;\n    };\n\n    self.setMediaSources = function(mediaSourceInfo) {\n        if (mediaSourceInfo) {\n            self.setVideoSourceAvailable(mediaSourceInfo.videoSourceAvailable);\n            self.setAudioSourceAvailable(mediaSourceInfo.audioSourceAvailable);\n            self.setScreenSourceAvailable(mediaSourceInfo.screenSourceAvailable);\n            self.setMediaSourceList(mediaSourceInfo.sourceList);\n        }\n    };\n\n    self.getScreenSourceAvailable = function() {\n        return mediaSources.screen.available;\n    };\n\n    self.setScreenSourceAvailable = function(_videoSourceAvailable) {\n        mediaSources.screen.available = _videoSourceAvailable;\n    };\n\n    self.getScreenWidth = function() {\n        return mediaSources.screen.width;\n    };\n\n    self.setScreenWidth = function(_screenWidth) {\n        mediaSources.screen.width = _screenWidth;\n    };\n\n    self.getScreenHeight = function() {\n        return mediaSources.screen.height;\n    };\n\n    self.setScreenHeight = function(_screenHeight) {\n        mediaSources.screen.height = _screenHeight;\n    };\n\n    self.getScreenFrameRate = function() {\n        return mediaSources.screen.rate;\n    };\n\n    self.setScreenFrameRate = function(_screenRate) {\n        mediaSources.screen.rate = _screenRate;\n    };\n\n    self.getPeerCount = function() {\n        return peerCount;\n    };\n\n    self.setPeerCount = function(_peerCount) {\n        peerCount = _peerCount;\n    };\n\n    self.isPluginEnabled = function() {\n        return pluginEnabled;\n    };\n\n    self.setPluginEnabled = function(_isPluginEnabled) {\n        pluginEnabled = _isPluginEnabled;\n    };\n\n    self.setSelectedMicrophoneId = function(_selectedMicrophoneId) {\n        selectedMicrophoneId = _selectedMicrophoneId;\n    };\n\n    self.getSelectedMicrophoneId = function() {\n        return selectedMicrophoneId;\n    };\n\n    self.setSelectedSpeakerId = function(_selectedSpeakerId) {\n        selectedSpeakerId = _selectedSpeakerId;\n    };\n\n    self.getSelectedSpeakerId = function() {\n        return selectedSpeakerId;\n    };\n\n    self.setSelectedCameraId = function(_selectedCameraId) {\n        selectedCameraId = _selectedCameraId;\n    };\n\n    self.getSelectedCameraId = function() {\n        return selectedCameraId;\n    };\n\n    self.getStreamById = function(id) {\n        return privateStreamMap.get(id);\n    };\n\n    self.removeStreamFromMap = function(id) {\n        privateStreamMap.remove(id);\n    };\n\n    self.getPrivateStreamMap = function() {\n        return privateStreamMap;\n    };\n\n    self.setMediaSourceList = function(_mediaSourceList) {\n        mediaSourceList = _mediaSourceList;\n    };\n\n    self.getMediaSourceList = function() {\n        return mediaSourceList;\n    };\n\n    self.getStats = function() {\n        return stats;\n    };\n\n    self.setStats = function(_stats) {\n        stats = _stats;\n    };\n\n    self.getUserMediaContraints = function() {\n        return {\n            audio: true,\n            video: true\n        };\n    };\n\n    return self;\n}\n","const prefix = '@@KANDY/'\n\nexport const FETCH_CALL_HISTORY = prefix + 'FETCH_CALL_HISTORY'\nexport const FETCH_CALL_HISTORY_FINISH = prefix + 'FETCH_CALL_HISTORY_FINISH'\n\nexport const DELETE_CALL_HISTORY = prefix + 'DELETE_CALL_HISTORY'\nexport const DELETE_CALL_HISTORY_FINISH = prefix + 'DELETE_CALL_HISTORY_FINISH'\n\nexport const ADD_CALL_HISTORY_ENTRY = prefix + 'ADD_CALL_HISTORY_ENTRY'\n\nexport const SET_CACHE = prefix + 'SET_CACHE'\n","const PREFIX = '@@KANDY/'\n\nexport const CLICK_TO_CALL = PREFIX + 'CLICK_TO_CALL'\nexport const CLICK_TO_CALL_FINISH = PREFIX + 'CLICK_TO_CALL_FINISH'\n","const PREFIX = '@@KANDY/'\n\nexport const MWI_UPDATE = PREFIX + 'MWI_UPDATE'\nexport const FETCH_MWI = PREFIX + 'FETCH_MWI'\n","const prefix = '@@KANDY/PRESENCE/'\n\nexport const UPDATE = prefix + 'UPDATE'\nexport const UPDATE_FINISH = prefix + 'UPDATE_FINISH'\nexport const GET = prefix + 'GET'\nexport const GET_FINISH = prefix + 'GET_FINISH'\nexport const SUBSCRIBE = prefix + 'SUBSCRIBE'\nexport const SUBSCRIBE_FINISH = prefix + 'SUBSCRIBE_FINISH'\nexport const UNSUBSCRIBE = prefix + 'UNSUBSCRIBE'\nexport const UNSUBSCRIBE_FINISH = prefix + 'UNSUBSCRIBE_FINISH'\nexport const RECEIVED = prefix + 'RECEIVED'\nexport const CREATE_PRESENCE_LIST = prefix + 'CREATE_PRESENCE_LIST'\nexport const CREATE_PRESENCE_LIST_FINISH = prefix + 'CREATE_PRESENCE_LIST_FINISH'\nexport const DELETE_PRESENCE_LIST = prefix + 'DELETE_PRESENCE_LIST'\nexport const GET_PRESENCE_LIST = prefix + 'GET_PRESENCE_LIST'\n","const PREFIX = '@@KANDY/'\n\nexport const SIP_EVENT_SUBSCRIBE = PREFIX + 'SIP_EVENT_SUBSCRIBE'\nexport const SIP_EVENT_SUBSCRIBE_FINISH = PREFIX + 'SIP_EVENT_SUBSCRIBE_FINISH'\n\nexport const SIP_EVENT_UPDATE = PREFIX + 'SIP_EVENT_UPDATE'\nexport const SIP_EVENT_UPDATE_FINISH = PREFIX + 'SIP_EVENT_UPDATE_FINISH'\n\nexport const SIP_EVENT_UNSUBSCRIBE = PREFIX + 'SIP_EVENT_UNSUBSCRIBE'\nexport const SIP_EVENT_UNSUBSCRIBE_FINISH = PREFIX + 'SIP_EVENT_UNSUBSCRIBE_FINISH'\n\nexport const SIP_EVENT_RECEIVED = PREFIX + 'SIP_EVENT_RECEIVED'\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","function deferred() {\n  var def = {};\n  def.promise = new Promise(function (resolve, reject) {\n    def.resolve = resolve;\n    def.reject = reject;\n  });\n  return def;\n}\nfunction arrayOfDeferred(length) {\n  var arr = [];\n\n  for (var i = 0; i < length; i++) {\n    arr.push(deferred());\n  }\n\n  return arr;\n}\n\nexport default deferred;\nexport { arrayOfDeferred };\n","import { CHANNEL_END_TYPE, MULTICAST, MATCH, SAGA_ACTION, CANCEL, SELF_CANCELLATION, TERMINATE, TASK, TASK_CANCEL, IO } from '@redux-saga/symbols';\nexport { CANCEL, SAGA_LOCATION } from '@redux-saga/symbols';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { string as string$1, array as array$1, stringableFunc, func, symbol as symbol$1, buffer, notUndef, promise, iterator, undef, object, channel as channel$1 } from '@redux-saga/is';\nimport { k as kTrue, e as expanding, c as check, o as once, r as remove, n as none, i as internalErr, T as TAKE, P as PUT, A as ALL, R as RACE, C as CALL, a as CPS, F as FORK, J as JOIN, b as CANCEL$1, S as SELECT, d as ACTION_CHANNEL, f as CANCELLED$1, g as FLUSH, G as GET_CONTEXT, h as SET_CONTEXT, j as getMetaInfo, l as createAllStyleChildCallbacks, m as createEmptyArray, p as assignWithSymbols, q as makeIterator, s as shouldComplete, t as noop, u as flatMap, v as getLocation, w as createSetContextWarning, x as asyncIteratorSymbol, y as shouldCancel, z as shouldTerminate, B as logError, D as wrapSagaDispatch, E as identity } from './io-6de156f3.js';\nexport { H as buffers, I as detach } from './io-6de156f3.js';\nimport { compose } from 'redux';\nimport deferred from '@redux-saga/deferred';\nimport '@redux-saga/delay-p';\n\nvar queue = [];\n/**\n  Variable to hold a counting semaphore\n  - Incrementing adds a lock and puts the scheduler in a `suspended` state (if it's not\n    already suspended)\n  - Decrementing releases a lock. Zero locks puts the scheduler in a `released` state. This\n    triggers flushing the queued tasks.\n**/\n\nvar semaphore = 0;\n/**\n  Executes a task 'atomically'. Tasks scheduled during this execution will be queued\n  and flushed after this task has finished (assuming the scheduler endup in a released\n  state).\n**/\n\nfunction exec(task) {\n  try {\n    suspend();\n    task();\n  } finally {\n    release();\n  }\n}\n/**\n  Executes or queues a task depending on the state of the scheduler (`suspended` or `released`)\n**/\n\n\nfunction asap(task) {\n  queue.push(task);\n\n  if (!semaphore) {\n    suspend();\n    flush();\n  }\n}\n/**\n * Puts the scheduler in a `suspended` state and executes a task immediately.\n */\n\nfunction immediately(task) {\n  try {\n    suspend();\n    return task();\n  } finally {\n    flush();\n  }\n}\n/**\n  Puts the scheduler in a `suspended` state. Scheduled tasks will be queued until the\n  scheduler is released.\n**/\n\nfunction suspend() {\n  semaphore++;\n}\n/**\n  Puts the scheduler in a `released` state.\n**/\n\n\nfunction release() {\n  semaphore--;\n}\n/**\n  Releases the current lock. Executes all queued tasks if the scheduler is in the released state.\n**/\n\n\nfunction flush() {\n  release();\n  var task;\n\n  while (!semaphore && (task = queue.shift()) !== undefined) {\n    exec(task);\n  }\n}\n\nvar array = function array(patterns) {\n  return function (input) {\n    return patterns.some(function (p) {\n      return matcher(p)(input);\n    });\n  };\n};\nvar predicate = function predicate(_predicate) {\n  return function (input) {\n    return _predicate(input);\n  };\n};\nvar string = function string(pattern) {\n  return function (input) {\n    return input.type === String(pattern);\n  };\n};\nvar symbol = function symbol(pattern) {\n  return function (input) {\n    return input.type === pattern;\n  };\n};\nvar wildcard = function wildcard() {\n  return kTrue;\n};\nfunction matcher(pattern) {\n  // prettier-ignore\n  var matcherCreator = pattern === '*' ? wildcard : string$1(pattern) ? string : array$1(pattern) ? array : stringableFunc(pattern) ? string : func(pattern) ? predicate : symbol$1(pattern) ? symbol : null;\n\n  if (matcherCreator === null) {\n    throw new Error(\"invalid pattern: \" + pattern);\n  }\n\n  return matcherCreator(pattern);\n}\n\nvar END = {\n  type: CHANNEL_END_TYPE\n};\nvar isEnd = function isEnd(a) {\n  return a && a.type === CHANNEL_END_TYPE;\n};\nvar CLOSED_CHANNEL_WITH_TAKERS = 'Cannot have a closed channel with pending takers';\nvar INVALID_BUFFER = 'invalid buffer passed to channel factory function';\nvar UNDEFINED_INPUT_ERROR = \"Saga or channel was provided with an undefined action\\nHints:\\n  - check that your Action Creator returns a non-undefined value\\n  - if the Saga was started using runSaga, check that your subscribe source provides the action to its listeners\";\nfunction channel(buffer$1) {\n  if (buffer$1 === void 0) {\n    buffer$1 = expanding();\n  }\n\n  var closed = false;\n  var takers = [];\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(buffer$1, buffer, INVALID_BUFFER);\n  }\n\n  function checkForbiddenStates() {\n    if (closed && takers.length) {\n      throw internalErr(CLOSED_CHANNEL_WITH_TAKERS);\n    }\n\n    if (takers.length && !buffer$1.isEmpty()) {\n      throw internalErr('Cannot have pending takers with non empty buffer');\n    }\n  }\n\n  function put(input) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(input, notUndef, UNDEFINED_INPUT_ERROR);\n    }\n\n    if (closed) {\n      return;\n    }\n\n    if (takers.length === 0) {\n      return buffer$1.put(input);\n    }\n\n    var cb = takers.shift();\n    cb(input);\n  }\n\n  function take(cb) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(cb, func, \"channel.take's callback must be a function\");\n    }\n\n    if (closed && buffer$1.isEmpty()) {\n      cb(END);\n    } else if (!buffer$1.isEmpty()) {\n      cb(buffer$1.take());\n    } else {\n      takers.push(cb);\n\n      cb.cancel = function () {\n        remove(takers, cb);\n      };\n    }\n  }\n\n  function flush(cb) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(cb, func, \"channel.flush' callback must be a function\");\n    }\n\n    if (closed && buffer$1.isEmpty()) {\n      cb(END);\n      return;\n    }\n\n    cb(buffer$1.flush());\n  }\n\n  function close() {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    if (closed) {\n      return;\n    }\n\n    closed = true;\n    var arr = takers;\n    takers = [];\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      var taker = arr[i];\n      taker(END);\n    }\n  }\n\n  return {\n    take: take,\n    put: put,\n    flush: flush,\n    close: close\n  };\n}\nfunction eventChannel(subscribe, buffer) {\n  if (buffer === void 0) {\n    buffer = none();\n  }\n\n  var closed = false;\n  var unsubscribe;\n  var chan = channel(buffer);\n\n  var close = function close() {\n    if (closed) {\n      return;\n    }\n\n    closed = true;\n\n    if (func(unsubscribe)) {\n      unsubscribe();\n    }\n\n    chan.close();\n  };\n\n  unsubscribe = subscribe(function (input) {\n    if (isEnd(input)) {\n      close();\n      return;\n    }\n\n    chan.put(input);\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(unsubscribe, func, 'in eventChannel: subscribe should return a function to unsubscribe');\n  }\n\n  unsubscribe = once(unsubscribe);\n\n  if (closed) {\n    unsubscribe();\n  }\n\n  return {\n    take: chan.take,\n    flush: chan.flush,\n    close: close\n  };\n}\nfunction multicastChannel() {\n  var _ref;\n\n  var closed = false;\n  var currentTakers = [];\n  var nextTakers = currentTakers;\n\n  function checkForbiddenStates() {\n    if (closed && nextTakers.length) {\n      throw internalErr(CLOSED_CHANNEL_WITH_TAKERS);\n    }\n  }\n\n  var ensureCanMutateNextTakers = function ensureCanMutateNextTakers() {\n    if (nextTakers !== currentTakers) {\n      return;\n    }\n\n    nextTakers = currentTakers.slice();\n  };\n\n  var close = function close() {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    closed = true;\n    var takers = currentTakers = nextTakers;\n    nextTakers = [];\n    takers.forEach(function (taker) {\n      taker(END);\n    });\n  };\n\n  return _ref = {}, _ref[MULTICAST] = true, _ref.put = function put(input) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(input, notUndef, UNDEFINED_INPUT_ERROR);\n    }\n\n    if (closed) {\n      return;\n    }\n\n    if (isEnd(input)) {\n      close();\n      return;\n    }\n\n    var takers = currentTakers = nextTakers;\n\n    for (var i = 0, len = takers.length; i < len; i++) {\n      var taker = takers[i];\n\n      if (taker[MATCH](input)) {\n        taker.cancel();\n        taker(input);\n      }\n    }\n  }, _ref.take = function take(cb, matcher) {\n    if (matcher === void 0) {\n      matcher = wildcard;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    if (closed) {\n      cb(END);\n      return;\n    }\n\n    cb[MATCH] = matcher;\n    ensureCanMutateNextTakers();\n    nextTakers.push(cb);\n    cb.cancel = once(function () {\n      ensureCanMutateNextTakers();\n      remove(nextTakers, cb);\n    });\n  }, _ref.close = close, _ref;\n}\nfunction stdChannel() {\n  var chan = multicastChannel();\n  var put = chan.put;\n\n  chan.put = function (input) {\n    if (input[SAGA_ACTION]) {\n      put(input);\n      return;\n    }\n\n    asap(function () {\n      put(input);\n    });\n  };\n\n  return chan;\n}\n\nvar RUNNING = 0;\nvar CANCELLED = 1;\nvar ABORTED = 2;\nvar DONE = 3;\n\nfunction resolvePromise(promise, cb) {\n  var cancelPromise = promise[CANCEL];\n\n  if (func(cancelPromise)) {\n    cb.cancel = cancelPromise;\n  }\n\n  promise.then(cb, function (error) {\n    cb(error, true);\n  });\n}\n\nvar current = 0;\nvar nextSagaId = (function () {\n  return ++current;\n});\n\nvar _effectRunnerMap;\n\nfunction getIteratorMetaInfo(iterator, fn) {\n  if (iterator.isSagaIterator) {\n    return {\n      name: iterator.meta.name\n    };\n  }\n\n  return getMetaInfo(fn);\n}\n\nfunction createTaskIterator(_ref) {\n  var context = _ref.context,\n      fn = _ref.fn,\n      args = _ref.args;\n\n  // catch synchronous failures; see #152 and #441\n  try {\n    var result = fn.apply(context, args); // i.e. a generator function returns an iterator\n\n    if (iterator(result)) {\n      return result;\n    }\n\n    var resolved = false;\n\n    var next = function next(arg) {\n      if (!resolved) {\n        resolved = true; // Only promises returned from fork will be interpreted. See #1573\n\n        return {\n          value: result,\n          done: !promise(result)\n        };\n      } else {\n        return {\n          value: arg,\n          done: true\n        };\n      }\n    };\n\n    return makeIterator(next);\n  } catch (err) {\n    // do not bubble up synchronous failures for detached forks\n    // instead create a failed task. See #152 and #441\n    return makeIterator(function () {\n      throw err;\n    });\n  }\n}\n\nfunction runPutEffect(env, _ref2, cb) {\n  var channel = _ref2.channel,\n      action = _ref2.action,\n      resolve = _ref2.resolve;\n\n  /**\n   Schedule the put in case another saga is holding a lock.\n   The put will be executed atomically. ie nested puts will execute after\n   this put has terminated.\n   **/\n  asap(function () {\n    var result;\n\n    try {\n      result = (channel ? channel.put : env.dispatch)(action);\n    } catch (error) {\n      cb(error, true);\n      return;\n    }\n\n    if (resolve && promise(result)) {\n      resolvePromise(result, cb);\n    } else {\n      cb(result);\n    }\n  }); // Put effects are non cancellables\n}\n\nfunction runTakeEffect(env, _ref3, cb) {\n  var _ref3$channel = _ref3.channel,\n      channel = _ref3$channel === void 0 ? env.channel : _ref3$channel,\n      pattern = _ref3.pattern,\n      maybe = _ref3.maybe;\n\n  var takeCb = function takeCb(input) {\n    if (input instanceof Error) {\n      cb(input, true);\n      return;\n    }\n\n    if (isEnd(input) && !maybe) {\n      cb(TERMINATE);\n      return;\n    }\n\n    cb(input);\n  };\n\n  try {\n    channel.take(takeCb, notUndef(pattern) ? matcher(pattern) : null);\n  } catch (err) {\n    cb(err, true);\n    return;\n  }\n\n  cb.cancel = takeCb.cancel;\n}\n\nfunction runCallEffect(env, _ref4, cb, _ref5) {\n  var context = _ref4.context,\n      fn = _ref4.fn,\n      args = _ref4.args;\n  var task = _ref5.task;\n\n  // catch synchronous failures; see #152\n  try {\n    var result = fn.apply(context, args);\n\n    if (promise(result)) {\n      resolvePromise(result, cb);\n      return;\n    }\n\n    if (iterator(result)) {\n      // resolve iterator\n      proc(env, result, task.context, current, getMetaInfo(fn),\n      /* isRoot */\n      false, cb);\n      return;\n    }\n\n    cb(result);\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runCPSEffect(env, _ref6, cb) {\n  var context = _ref6.context,\n      fn = _ref6.fn,\n      args = _ref6.args;\n\n  // CPS (ie node style functions) can define their own cancellation logic\n  // by setting cancel field on the cb\n  // catch synchronous failures; see #152\n  try {\n    var cpsCb = function cpsCb(err, res) {\n      if (undef(err)) {\n        cb(res);\n      } else {\n        cb(err, true);\n      }\n    };\n\n    fn.apply(context, args.concat(cpsCb));\n\n    if (cpsCb.cancel) {\n      cb.cancel = cpsCb.cancel;\n    }\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runForkEffect(env, _ref7, cb, _ref8) {\n  var context = _ref7.context,\n      fn = _ref7.fn,\n      args = _ref7.args,\n      detached = _ref7.detached;\n  var parent = _ref8.task;\n  var taskIterator = createTaskIterator({\n    context: context,\n    fn: fn,\n    args: args\n  });\n  var meta = getIteratorMetaInfo(taskIterator, fn);\n  immediately(function () {\n    var child = proc(env, taskIterator, parent.context, current, meta, detached, undefined);\n\n    if (detached) {\n      cb(child);\n    } else {\n      if (child.isRunning()) {\n        parent.queue.addTask(child);\n        cb(child);\n      } else if (child.isAborted()) {\n        parent.queue.abort(child.error());\n      } else {\n        cb(child);\n      }\n    }\n  }); // Fork effects are non cancellables\n}\n\nfunction runJoinEffect(env, taskOrTasks, cb, _ref9) {\n  var task = _ref9.task;\n\n  var joinSingleTask = function joinSingleTask(taskToJoin, cb) {\n    if (taskToJoin.isRunning()) {\n      var joiner = {\n        task: task,\n        cb: cb\n      };\n\n      cb.cancel = function () {\n        if (taskToJoin.isRunning()) remove(taskToJoin.joiners, joiner);\n      };\n\n      taskToJoin.joiners.push(joiner);\n    } else {\n      if (taskToJoin.isAborted()) {\n        cb(taskToJoin.error(), true);\n      } else {\n        cb(taskToJoin.result());\n      }\n    }\n  };\n\n  if (array$1(taskOrTasks)) {\n    if (taskOrTasks.length === 0) {\n      cb([]);\n      return;\n    }\n\n    var childCallbacks = createAllStyleChildCallbacks(taskOrTasks, cb);\n    taskOrTasks.forEach(function (t, i) {\n      joinSingleTask(t, childCallbacks[i]);\n    });\n  } else {\n    joinSingleTask(taskOrTasks, cb);\n  }\n}\n\nfunction cancelSingleTask(taskToCancel) {\n  if (taskToCancel.isRunning()) {\n    taskToCancel.cancel();\n  }\n}\n\nfunction runCancelEffect(env, taskOrTasks, cb, _ref10) {\n  var task = _ref10.task;\n\n  if (taskOrTasks === SELF_CANCELLATION) {\n    cancelSingleTask(task);\n  } else if (array$1(taskOrTasks)) {\n    taskOrTasks.forEach(cancelSingleTask);\n  } else {\n    cancelSingleTask(taskOrTasks);\n  }\n\n  cb(); // cancel effects are non cancellables\n}\n\nfunction runAllEffect(env, effects, cb, _ref11) {\n  var digestEffect = _ref11.digestEffect;\n  var effectId = current;\n  var keys = Object.keys(effects);\n\n  if (keys.length === 0) {\n    cb(array$1(effects) ? [] : {});\n    return;\n  }\n\n  var childCallbacks = createAllStyleChildCallbacks(effects, cb);\n  keys.forEach(function (key) {\n    digestEffect(effects[key], effectId, childCallbacks[key], key);\n  });\n}\n\nfunction runRaceEffect(env, effects, cb, _ref12) {\n  var digestEffect = _ref12.digestEffect;\n  var effectId = current;\n  var keys = Object.keys(effects);\n  var response = array$1(effects) ? createEmptyArray(keys.length) : {};\n  var childCbs = {};\n  var completed = false;\n  keys.forEach(function (key) {\n    var chCbAtKey = function chCbAtKey(res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      if (isErr || shouldComplete(res)) {\n        // Race Auto cancellation\n        cb.cancel();\n        cb(res, isErr);\n      } else {\n        cb.cancel();\n        completed = true;\n        response[key] = res;\n        cb(response);\n      }\n    };\n\n    chCbAtKey.cancel = noop;\n    childCbs[key] = chCbAtKey;\n  });\n\n  cb.cancel = function () {\n    // prevents unnecessary cancellation\n    if (!completed) {\n      completed = true;\n      keys.forEach(function (key) {\n        return childCbs[key].cancel();\n      });\n    }\n  };\n\n  keys.forEach(function (key) {\n    if (completed) {\n      return;\n    }\n\n    digestEffect(effects[key], effectId, childCbs[key], key);\n  });\n}\n\nfunction runSelectEffect(env, _ref13, cb) {\n  var selector = _ref13.selector,\n      args = _ref13.args;\n\n  try {\n    var state = selector.apply(void 0, [env.getState()].concat(args));\n    cb(state);\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runChannelEffect(env, _ref14, cb) {\n  var pattern = _ref14.pattern,\n      buffer = _ref14.buffer;\n  var chan = channel(buffer);\n  var match = matcher(pattern);\n\n  var taker = function taker(action) {\n    if (!isEnd(action)) {\n      env.channel.take(taker, match);\n    }\n\n    chan.put(action);\n  };\n\n  var close = chan.close;\n\n  chan.close = function () {\n    taker.cancel();\n    close();\n  };\n\n  env.channel.take(taker, match);\n  cb(chan);\n}\n\nfunction runCancelledEffect(env, data, cb, _ref15) {\n  var task = _ref15.task;\n  cb(task.isCancelled());\n}\n\nfunction runFlushEffect(env, channel, cb) {\n  channel.flush(cb);\n}\n\nfunction runGetContextEffect(env, prop, cb, _ref16) {\n  var task = _ref16.task;\n  cb(task.context[prop]);\n}\n\nfunction runSetContextEffect(env, props, cb, _ref17) {\n  var task = _ref17.task;\n  assignWithSymbols(task.context, props);\n  cb();\n}\n\nvar effectRunnerMap = (_effectRunnerMap = {}, _effectRunnerMap[TAKE] = runTakeEffect, _effectRunnerMap[PUT] = runPutEffect, _effectRunnerMap[ALL] = runAllEffect, _effectRunnerMap[RACE] = runRaceEffect, _effectRunnerMap[CALL] = runCallEffect, _effectRunnerMap[CPS] = runCPSEffect, _effectRunnerMap[FORK] = runForkEffect, _effectRunnerMap[JOIN] = runJoinEffect, _effectRunnerMap[CANCEL$1] = runCancelEffect, _effectRunnerMap[SELECT] = runSelectEffect, _effectRunnerMap[ACTION_CHANNEL] = runChannelEffect, _effectRunnerMap[CANCELLED$1] = runCancelledEffect, _effectRunnerMap[FLUSH] = runFlushEffect, _effectRunnerMap[GET_CONTEXT] = runGetContextEffect, _effectRunnerMap[SET_CONTEXT] = runSetContextEffect, _effectRunnerMap);\n\n/**\n Used to track a parent task and its forks\n In the fork model, forked tasks are attached by default to their parent\n We model this using the concept of Parent task && main Task\n main task is the main flow of the current Generator, the parent tasks is the\n aggregation of the main tasks + all its forked tasks.\n Thus the whole model represents an execution tree with multiple branches (vs the\n linear execution tree in sequential (non parallel) programming)\n\n A parent tasks has the following semantics\n - It completes if all its forks either complete or all cancelled\n - If it's cancelled, all forks are cancelled as well\n - It aborts if any uncaught error bubbles up from forks\n - If it completes, the return value is the one returned by the main task\n **/\n\nfunction forkQueue(mainTask, onAbort, cont) {\n  var tasks = [];\n  var result;\n  var completed = false;\n  addTask(mainTask);\n\n  var getTasks = function getTasks() {\n    return tasks;\n  };\n\n  function abort(err) {\n    onAbort();\n    cancelAll();\n    cont(err, true);\n  }\n\n  function addTask(task) {\n    tasks.push(task);\n\n    task.cont = function (res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      remove(tasks, task);\n      task.cont = noop;\n\n      if (isErr) {\n        abort(res);\n      } else {\n        if (task === mainTask) {\n          result = res;\n        }\n\n        if (!tasks.length) {\n          completed = true;\n          cont(result);\n        }\n      }\n    };\n  }\n\n  function cancelAll() {\n    if (completed) {\n      return;\n    }\n\n    completed = true;\n    tasks.forEach(function (t) {\n      t.cont = noop;\n      t.cancel();\n    });\n    tasks = [];\n  }\n\n  return {\n    addTask: addTask,\n    cancelAll: cancelAll,\n    abort: abort,\n    getTasks: getTasks\n  };\n}\n\n// there can be only a single saga error created at any given moment\n\nfunction formatLocation(fileName, lineNumber) {\n  return fileName + \"?\" + lineNumber;\n}\n\nfunction effectLocationAsString(effect) {\n  var location = getLocation(effect);\n\n  if (location) {\n    var code = location.code,\n        fileName = location.fileName,\n        lineNumber = location.lineNumber;\n    var source = code + \"  \" + formatLocation(fileName, lineNumber);\n    return source;\n  }\n\n  return '';\n}\n\nfunction sagaLocationAsString(sagaMeta) {\n  var name = sagaMeta.name,\n      location = sagaMeta.location;\n\n  if (location) {\n    return name + \"  \" + formatLocation(location.fileName, location.lineNumber);\n  }\n\n  return name;\n}\n\nfunction cancelledTasksAsString(sagaStack) {\n  var cancelledTasks = flatMap(function (i) {\n    return i.cancelledTasks;\n  }, sagaStack);\n\n  if (!cancelledTasks.length) {\n    return '';\n  }\n\n  return ['Tasks cancelled due to error:'].concat(cancelledTasks).join('\\n');\n}\n\nvar crashedEffect = null;\nvar sagaStack = [];\nvar addSagaFrame = function addSagaFrame(frame) {\n  frame.crashedEffect = crashedEffect;\n  sagaStack.push(frame);\n};\nvar clear = function clear() {\n  crashedEffect = null;\n  sagaStack.length = 0;\n}; // this sets crashed effect for the soon-to-be-reported saga frame\n// this slightly streatches the singleton nature of this module into wrong direction\n// as it's even less obvious what's the data flow here, but it is what it is for now\n\nvar setCrashedEffect = function setCrashedEffect(effect) {\n  crashedEffect = effect;\n};\n/**\n  @returns {string}\n\n  @example\n  The above error occurred in task errorInPutSaga {pathToFile}\n  when executing effect put({type: 'REDUCER_ACTION_ERROR_IN_PUT'}) {pathToFile}\n      created by fetchSaga {pathToFile}\n      created by rootSaga {pathToFile}\n*/\n\nvar toString = function toString() {\n  var firstSaga = sagaStack[0],\n      otherSagas = sagaStack.slice(1);\n  var crashedEffectLocation = firstSaga.crashedEffect ? effectLocationAsString(firstSaga.crashedEffect) : null;\n  var errorMessage = \"The above error occurred in task \" + sagaLocationAsString(firstSaga.meta) + (crashedEffectLocation ? \" \\n when executing effect \" + crashedEffectLocation : '');\n  return [errorMessage].concat(otherSagas.map(function (s) {\n    return \"    created by \" + sagaLocationAsString(s.meta);\n  }), [cancelledTasksAsString(sagaStack)]).join('\\n');\n};\n\nfunction newTask(env, mainTask, parentContext, parentEffectId, meta, isRoot, cont) {\n  var _task;\n\n  if (cont === void 0) {\n    cont = noop;\n  }\n\n  var status = RUNNING;\n  var taskResult;\n  var taskError;\n  var deferredEnd = null;\n  var cancelledDueToErrorTasks = [];\n  var context = Object.create(parentContext);\n  var queue = forkQueue(mainTask, function onAbort() {\n    cancelledDueToErrorTasks.push.apply(cancelledDueToErrorTasks, queue.getTasks().map(function (t) {\n      return t.meta.name;\n    }));\n  }, end);\n  /**\n   This may be called by a parent generator to trigger/propagate cancellation\n   cancel all pending tasks (including the main task), then end the current task.\n    Cancellation propagates down to the whole execution tree held by this Parent task\n   It's also propagated to all joiners of this task and their execution tree/joiners\n    Cancellation is noop for terminated/Cancelled tasks tasks\n   **/\n\n  function cancel() {\n    if (status === RUNNING) {\n      // Setting status to CANCELLED does not necessarily mean that the task/iterators are stopped\n      // effects in the iterator's finally block will still be executed\n      status = CANCELLED;\n      queue.cancelAll(); // Ending with a TASK_CANCEL will propagate the Cancellation to all joiners\n\n      end(TASK_CANCEL, false);\n    }\n  }\n\n  function end(result, isErr) {\n    if (!isErr) {\n      // The status here may be RUNNING or CANCELLED\n      // If the status is CANCELLED, then we do not need to change it here\n      if (result === TASK_CANCEL) {\n        status = CANCELLED;\n      } else if (status !== CANCELLED) {\n        status = DONE;\n      }\n\n      taskResult = result;\n      deferredEnd && deferredEnd.resolve(result);\n    } else {\n      status = ABORTED;\n      addSagaFrame({\n        meta: meta,\n        cancelledTasks: cancelledDueToErrorTasks\n      });\n\n      if (task.isRoot) {\n        var sagaStack = toString(); // we've dumped the saga stack to string and are passing it to user's code\n        // we know that it won't be needed anymore and we need to clear it\n\n        clear();\n        env.onError(result, {\n          sagaStack: sagaStack\n        });\n      }\n\n      taskError = result;\n      deferredEnd && deferredEnd.reject(result);\n    }\n\n    task.cont(result, isErr);\n    task.joiners.forEach(function (joiner) {\n      joiner.cb(result, isErr);\n    });\n    task.joiners = null;\n  }\n\n  function setContext(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(props, object, createSetContextWarning('task', props));\n    }\n\n    assignWithSymbols(context, props);\n  }\n\n  function toPromise() {\n    if (deferredEnd) {\n      return deferredEnd.promise;\n    }\n\n    deferredEnd = deferred();\n\n    if (status === ABORTED) {\n      deferredEnd.reject(taskError);\n    } else if (status !== RUNNING) {\n      deferredEnd.resolve(taskResult);\n    }\n\n    return deferredEnd.promise;\n  }\n\n  var task = (_task = {}, _task[TASK] = true, _task.id = parentEffectId, _task.meta = meta, _task.isRoot = isRoot, _task.context = context, _task.joiners = [], _task.queue = queue, _task.cancel = cancel, _task.cont = cont, _task.end = end, _task.setContext = setContext, _task.toPromise = toPromise, _task.isRunning = function isRunning() {\n    return status === RUNNING;\n  }, _task.isCancelled = function isCancelled() {\n    return status === CANCELLED || status === RUNNING && mainTask.status === CANCELLED;\n  }, _task.isAborted = function isAborted() {\n    return status === ABORTED;\n  }, _task.result = function result() {\n    return taskResult;\n  }, _task.error = function error() {\n    return taskError;\n  }, _task);\n  return task;\n}\n\nfunction proc(env, iterator$1, parentContext, parentEffectId, meta, isRoot, cont) {\n  if (process.env.NODE_ENV !== 'production' && iterator$1[asyncIteratorSymbol]) {\n    throw new Error(\"redux-saga doesn't support async generators, please use only regular ones\");\n  }\n\n  var finalRunEffect = env.finalizeRunEffect(runEffect);\n  /**\n    Tracks the current effect cancellation\n    Each time the generator progresses. calling runEffect will set a new value\n    on it. It allows propagating cancellation to child effects\n  **/\n\n  next.cancel = noop;\n  /** Creates a main task to track the main flow */\n\n  var mainTask = {\n    meta: meta,\n    cancel: cancelMain,\n    status: RUNNING\n  };\n  /**\n   Creates a new task descriptor for this generator.\n   A task is the aggregation of it's mainTask and all it's forked tasks.\n   **/\n\n  var task = newTask(env, mainTask, parentContext, parentEffectId, meta, isRoot, cont);\n  var executingContext = {\n    task: task,\n    digestEffect: digestEffect\n  };\n  /**\n    cancellation of the main task. We'll simply resume the Generator with a TASK_CANCEL\n  **/\n\n  function cancelMain() {\n    if (mainTask.status === RUNNING) {\n      mainTask.status = CANCELLED;\n      next(TASK_CANCEL);\n    }\n  }\n  /**\n    attaches cancellation logic to this task's continuation\n    this will permit cancellation to propagate down the call chain\n  **/\n\n\n  if (cont) {\n    cont.cancel = task.cancel;\n  } // kicks up the generator\n\n\n  next(); // then return the task descriptor to the caller\n\n  return task;\n  /**\n   * This is the generator driver\n   * It's a recursive async/continuation function which calls itself\n   * until the generator terminates or throws\n   * @param {internal commands(TASK_CANCEL | TERMINATE) | any} arg - value, generator will be resumed with.\n   * @param {boolean} isErr - the flag shows if effect finished with an error\n   *\n   * receives either (command | effect result, false) or (any thrown thing, true)\n   */\n\n  function next(arg, isErr) {\n    try {\n      var result;\n\n      if (isErr) {\n        result = iterator$1.throw(arg); // user handled the error, we can clear bookkept values\n\n        clear();\n      } else if (shouldCancel(arg)) {\n        /**\n          getting TASK_CANCEL automatically cancels the main task\n          We can get this value here\n           - By cancelling the parent task manually\n          - By joining a Cancelled task\n        **/\n        mainTask.status = CANCELLED;\n        /**\n          Cancels the current effect; this will propagate the cancellation down to any called tasks\n        **/\n\n        next.cancel();\n        /**\n          If this Generator has a `return` method then invokes it\n          This will jump to the finally block\n        **/\n\n        result = func(iterator$1.return) ? iterator$1.return(TASK_CANCEL) : {\n          done: true,\n          value: TASK_CANCEL\n        };\n      } else if (shouldTerminate(arg)) {\n        // We get TERMINATE flag, i.e. by taking from a channel that ended using `take` (and not `takem` used to trap End of channels)\n        result = func(iterator$1.return) ? iterator$1.return() : {\n          done: true\n        };\n      } else {\n        result = iterator$1.next(arg);\n      }\n\n      if (!result.done) {\n        digestEffect(result.value, parentEffectId, next);\n      } else {\n        /**\n          This Generator has ended, terminate the main task and notify the fork queue\n        **/\n        if (mainTask.status !== CANCELLED) {\n          mainTask.status = DONE;\n        }\n\n        mainTask.cont(result.value);\n      }\n    } catch (error) {\n      if (mainTask.status === CANCELLED) {\n        throw error;\n      }\n\n      mainTask.status = ABORTED;\n      mainTask.cont(error, true);\n    }\n  }\n\n  function runEffect(effect, effectId, currCb) {\n    /**\n      each effect runner must attach its own logic of cancellation to the provided callback\n      it allows this generator to propagate cancellation downward.\n       ATTENTION! effect runners must setup the cancel logic by setting cb.cancel = [cancelMethod]\n      And the setup must occur before calling the callback\n       This is a sort of inversion of control: called async functions are responsible\n      of completing the flow by calling the provided continuation; while caller functions\n      are responsible for aborting the current flow by calling the attached cancel function\n       Library users can attach their own cancellation logic to promises by defining a\n      promise[CANCEL] method in their returned promises\n      ATTENTION! calling cancel must have no effect on an already completed or cancelled effect\n    **/\n    if (promise(effect)) {\n      resolvePromise(effect, currCb);\n    } else if (iterator(effect)) {\n      // resolve iterator\n      proc(env, effect, task.context, effectId, meta,\n      /* isRoot */\n      false, currCb);\n    } else if (effect && effect[IO]) {\n      var effectRunner = effectRunnerMap[effect.type];\n      effectRunner(env, effect.payload, currCb, executingContext);\n    } else {\n      // anything else returned as is\n      currCb(effect);\n    }\n  }\n\n  function digestEffect(effect, parentEffectId, cb, label) {\n    if (label === void 0) {\n      label = '';\n    }\n\n    var effectId = nextSagaId();\n    env.sagaMonitor && env.sagaMonitor.effectTriggered({\n      effectId: effectId,\n      parentEffectId: parentEffectId,\n      label: label,\n      effect: effect\n    });\n    /**\n      completion callback and cancel callback are mutually exclusive\n      We can't cancel an already completed effect\n      And We can't complete an already cancelled effectId\n    **/\n\n    var effectSettled; // Completion callback passed to the appropriate effect runner\n\n    function currCb(res, isErr) {\n      if (effectSettled) {\n        return;\n      }\n\n      effectSettled = true;\n      cb.cancel = noop; // defensive measure\n\n      if (env.sagaMonitor) {\n        if (isErr) {\n          env.sagaMonitor.effectRejected(effectId, res);\n        } else {\n          env.sagaMonitor.effectResolved(effectId, res);\n        }\n      }\n\n      if (isErr) {\n        setCrashedEffect(effect);\n      }\n\n      cb(res, isErr);\n    } // tracks down the current cancel\n\n\n    currCb.cancel = noop; // setup cancellation logic on the parent cb\n\n    cb.cancel = function () {\n      // prevents cancelling an already completed effect\n      if (effectSettled) {\n        return;\n      }\n\n      effectSettled = true;\n      currCb.cancel(); // propagates cancel downward\n\n      currCb.cancel = noop; // defensive measure\n\n      env.sagaMonitor && env.sagaMonitor.effectCancelled(effectId);\n    };\n\n    finalRunEffect(effect, effectId, currCb);\n  }\n}\n\nvar RUN_SAGA_SIGNATURE = 'runSaga(options, saga, ...args)';\nvar NON_GENERATOR_ERR = RUN_SAGA_SIGNATURE + \": saga argument must be a Generator function!\";\nfunction runSaga(_ref, saga) {\n  var _ref$channel = _ref.channel,\n      channel = _ref$channel === void 0 ? stdChannel() : _ref$channel,\n      dispatch = _ref.dispatch,\n      getState = _ref.getState,\n      _ref$context = _ref.context,\n      context = _ref$context === void 0 ? {} : _ref$context,\n      sagaMonitor = _ref.sagaMonitor,\n      effectMiddlewares = _ref.effectMiddlewares,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? logError : _ref$onError;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(saga, func, NON_GENERATOR_ERR);\n  }\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var iterator$1 = saga.apply(void 0, args);\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(iterator$1, iterator, NON_GENERATOR_ERR);\n  }\n\n  var effectId = nextSagaId();\n\n  if (sagaMonitor) {\n    // monitors are expected to have a certain interface, let's fill-in any missing ones\n    sagaMonitor.rootSagaStarted = sagaMonitor.rootSagaStarted || noop;\n    sagaMonitor.effectTriggered = sagaMonitor.effectTriggered || noop;\n    sagaMonitor.effectResolved = sagaMonitor.effectResolved || noop;\n    sagaMonitor.effectRejected = sagaMonitor.effectRejected || noop;\n    sagaMonitor.effectCancelled = sagaMonitor.effectCancelled || noop;\n    sagaMonitor.actionDispatched = sagaMonitor.actionDispatched || noop;\n    sagaMonitor.rootSagaStarted({\n      effectId: effectId,\n      saga: saga,\n      args: args\n    });\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (notUndef(dispatch)) {\n      check(dispatch, func, 'dispatch must be a function');\n    }\n\n    if (notUndef(getState)) {\n      check(getState, func, 'getState must be a function');\n    }\n\n    if (notUndef(effectMiddlewares)) {\n      var MIDDLEWARE_TYPE_ERROR = 'effectMiddlewares must be an array of functions';\n      check(effectMiddlewares, array$1, MIDDLEWARE_TYPE_ERROR);\n      effectMiddlewares.forEach(function (effectMiddleware) {\n        return check(effectMiddleware, func, MIDDLEWARE_TYPE_ERROR);\n      });\n    }\n\n    check(onError, func, 'onError passed to the redux-saga is not a function!');\n  }\n\n  var finalizeRunEffect;\n\n  if (effectMiddlewares) {\n    var middleware = compose.apply(void 0, effectMiddlewares);\n\n    finalizeRunEffect = function finalizeRunEffect(runEffect) {\n      return function (effect, effectId, currCb) {\n        var plainRunEffect = function plainRunEffect(eff) {\n          return runEffect(eff, effectId, currCb);\n        };\n\n        return middleware(plainRunEffect)(effect);\n      };\n    };\n  } else {\n    finalizeRunEffect = identity;\n  }\n\n  var env = {\n    channel: channel,\n    dispatch: wrapSagaDispatch(dispatch),\n    getState: getState,\n    sagaMonitor: sagaMonitor,\n    onError: onError,\n    finalizeRunEffect: finalizeRunEffect\n  };\n  return immediately(function () {\n    var task = proc(env, iterator$1, context, effectId, getMetaInfo(saga),\n    /* isRoot */\n    true, undefined);\n\n    if (sagaMonitor) {\n      sagaMonitor.effectResolved(effectId, task);\n    }\n\n    return task;\n  });\n}\n\nfunction sagaMiddlewareFactory(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$context = _ref.context,\n      context = _ref$context === void 0 ? {} : _ref$context,\n      _ref$channel = _ref.channel,\n      channel = _ref$channel === void 0 ? stdChannel() : _ref$channel,\n      sagaMonitor = _ref.sagaMonitor,\n      options = _objectWithoutPropertiesLoose(_ref, [\"context\", \"channel\", \"sagaMonitor\"]);\n\n  var boundRunSaga;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(channel, channel$1, 'options.channel passed to the Saga middleware is not a channel');\n  }\n\n  function sagaMiddleware(_ref2) {\n    var getState = _ref2.getState,\n        dispatch = _ref2.dispatch;\n    boundRunSaga = runSaga.bind(null, _extends({}, options, {\n      context: context,\n      channel: channel,\n      dispatch: dispatch,\n      getState: getState,\n      sagaMonitor: sagaMonitor\n    }));\n    return function (next) {\n      return function (action) {\n        if (sagaMonitor && sagaMonitor.actionDispatched) {\n          sagaMonitor.actionDispatched(action);\n        }\n\n        var result = next(action); // hit reducers\n\n        channel.put(action);\n        return result;\n      };\n    };\n  }\n\n  sagaMiddleware.run = function () {\n    if (process.env.NODE_ENV !== 'production' && !boundRunSaga) {\n      throw new Error('Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware');\n    }\n\n    return boundRunSaga.apply(void 0, arguments);\n  };\n\n  sagaMiddleware.setContext = function (props) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(props, object, createSetContextWarning('sagaMiddleware', props));\n    }\n\n    assignWithSymbols(context, props);\n  };\n\n  return sagaMiddleware;\n}\n\nexport default sagaMiddlewareFactory;\nexport { END, channel, eventChannel, isEnd, multicastChannel, runSaga, stdChannel };\n","import createSagaMiddleware__default from '@redux-saga/core';\nexport * from '@redux-saga/core';\n\n\n\nexport default createSagaMiddleware__default;\n","import { CANCEL } from '@redux-saga/symbols';\n\nfunction delayP(ms, val) {\n  if (val === void 0) {\n    val = true;\n  }\n\n  var timeoutId;\n  var promise = new Promise(function (resolve) {\n    timeoutId = setTimeout(resolve, ms, val);\n  });\n\n  promise[CANCEL] = function () {\n    clearTimeout(timeoutId);\n  };\n\n  return promise;\n}\n\nexport default delayP;\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2020 Denis Pushkarev (zloirock.ru)'\n});\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","exports.f = Object.getOwnPropertySymbols;\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function isObject(arg) {\n  var type = typeof arg;\n  return Boolean(arg) && (type === 'object' || type === 'function');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","/**\n * Returns the version of the currently running SDK.\n *\n * It must be used by any plugins (including the factory) as the unique source of truth when it comes to determine the current SDK version.\n * The actual version value is provided by the build process scripts (aka webpack.config.***.js) which simply do a string substitution\n * for the @@ tag below with actual version value.\n */\nexport function getVersion () {\n  return '3.35.0-beta.813'\n}\n","exports.f = require('./_wks');\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","import { logLevels } from './constants'\n\n/**\n * Helper function to validate a \"log level\" string before its used in the library.\n * @method checkLevel\n * @param  {string} level A log level provided by a user.\n * @return {string}       The log level as expected by the library.\n * @throws Will throw an error if the `level` parameter is invalid.\n */\nexport function checkLevel (level) {\n  // Ensure: is defined and is a string.\n  const upperLevel = level && level.toUpperCase && level.toUpperCase()\n\n  // Ensure: is a supported log level.\n  if (upperLevel && logLevels[upperLevel]) {\n    return logLevels[upperLevel]\n  } else {\n    throw new Error('Provided level is not a valid log level.')\n  }\n}\n\n/**\n * Helper function to validate a \"log handler\".\n * Basically just \"is function\" that throws an error if false.\n * @method checkHandler\n * @param  {Function} handler A log handler function, ideally.\n * @return {Function}         The same log handler function, ideally.\n * @throws Will throw an error if the `handler` provided is not a function.\n */\nexport function checkHandler (handler) {\n  if (handler && typeof handler === 'function') {\n    return handler\n  } else {\n    throw new Error('Provided log handler is not a function.')\n  }\n}\n","// Logs plugin.\nimport * as actionTypes from './actionTypes'\n\n/**\n * Action for setting a Logger's level.\n * @method setLevel\n * @param  {string} level  The level to be set.\n * @param  {string} [type] The type of Logger to set it for.\n */\nexport function setLevel (level, type) {\n  return {\n    type: actionTypes.SET_LEVEL,\n    payload: { level, type }\n  }\n}\n\n/**\n * Action for setting all of the Loggers' log level.\n * @method levelsChanged\n * @param  {Object} levelMap Mapping of logger type to level.\n * @return {Object}\n */\nexport function levelsChanged (levelMap) {\n  return {\n    type: actionTypes.LEVELS_CHANGE,\n    payload: levelMap\n  }\n}\n\n/**\n * Action for setting a Logger's handler.\n * @method setHandler\n * @param  {Function} handler A LogHandler function.\n * @param  {string}   [type]  The type of Logger to set it for.\n */\nexport function setHandler (handler, type) {\n  return {\n    type: actionTypes.SET_HANDLER,\n    payload: { handler, type }\n  }\n}\n\n/**\n * Action for setting all of the Loggers' log handler.\n * @method handlersChanged\n * @param  {Object} handlerMap Mapping of logger type to handler.\n * @return {Object}\n */\nexport function handlersChanged (handlerMap) {\n  return {\n    type: actionTypes.HANDLERS_CHANGE,\n    payload: handlerMap\n  }\n}\n","const prefix = '@@KANDY/LOGS/'\n\nexport const SET_LEVEL = prefix + 'SET_LEVEL'\nexport const LEVELS_CHANGE = prefix + 'LEVELS_CHANGE'\n\nexport const SET_HANDLER = prefix + 'SET_HANDLER'\nexport const HANDLERS_CHANGE = prefix + 'HANDLERS_CHANGE'\n","const PREFIX = '@@KANDY/'\n\nexport const EVENTS_ON = PREFIX + 'EVENTS_ON'\nexport const EVENTS_OFF = PREFIX + 'EVENTS_OFF'\nexport const EVENTS_SUBSCRIBE = PREFIX + 'EVENTS_SUBSCRIBE'\nexport const EVENTS_UNSUBSCRIBE = PREFIX + 'EVENTS_UNSUBSCRIBE'\nexport const EVENTS_ALIAS = PREFIX + 'EVENTS_ALIAS'\nexport const EVENTS_EMIT = PREFIX + 'EVENTS_EMIT'\nexport const MAP_EVENTS = PREFIX + 'MAP_EVENTS'\n","import * as localVideoActionsImport from './localVideo'\nimport * as mediaActionsImport from './media'\nimport * as devicesActionsImport from './devices'\nimport * as callsActionsImport from './calls'\nimport * as audioBridgeActionsImport from './audioBridge'\n\n// Apparently the following doesn't work:\n//      export * as newName from './place';\n// So import everything from each file, then re-export.\nexport const localVideoActions = localVideoActionsImport\nexport const mediaActions = mediaActionsImport\nexport const devicesActions = devicesActionsImport\nexport const callsActions = callsActionsImport\nexport const audioBridgeActions = audioBridgeActionsImport\n","import { cloneDeep, find } from 'lodash/fp'\n\n/**\n * Retrieves the config options provided by the call plugin.\n * @method getCallConfig\n * @return {Object}\n */\nexport function getCallConfig (state) {\n  return cloneDeep(state.config.call)\n}\n\n/**\n * Retrieves all calls in state.\n * @method getCalls\n * @param  {Object} state    Redux state.\n * @return {Array} Call objects.\n */\nexport function getCalls (state) {\n  return cloneDeep(state.call.calls)\n}\n\n/**\n * Retrieves a call from state with a specific call ID.\n * @method getCallById\n * @param  {Object}    state  Redux state.\n * @param  {string}    callId The ID of the call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallById (state, callId) {\n  return find(call => call.id === callId, getCalls(state))\n}\n\n/**\n * Retrieves custom parameters from a call with a specific call ID.\n * @method getCustomParametersById\n * @param  {Object}    state  Redux state.\n * @param  {string}    callId The ID of the call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCustomParametersById (state, callId) {\n  const call = find(call => call.id === callId, getCalls(state))\n  if (call && call.customParameters) {\n    return call.customParameters\n  }\n  return []\n}\n\n/**\n * Retrieves media devices available on the system.\n * @method getDevices\n * @param  {Object}    state  Redux state.\n * @return {Object}\n */\nexport function getDevices (state) {\n  return cloneDeep(state.call.devices)\n}\n\n/**\n * Retrieves media support information.\n * @method getMediaInfo\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getMediaInfo (state) {\n  return cloneDeep(state.call.media)\n}\n\n/**\n * Retrieves audio bridge information.\n * @method getAudioBridges\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getAudioBridges (state) {\n  return cloneDeep(state.call.audioBridges)\n}\n\n/**\n * Retrieve all calls currently part of an audio bridge.\n * @method getBridgeCalls\n * @param state\n * @param bridgeId\n * @return {Array} List of calls currently part of the specified audio bridge.\n */\nexport function getBridgeCalls (state, bridgeId) {\n  return cloneDeep(find(bridge => bridge.id === bridgeId, getAudioBridges(state)).calls)\n}\n","import * as actionTypes from './actionTypes'\n\n/**\n * Represents a request to fetch call logs.\n * @method retrieveCallLogs\n * @param  {number} amount The number of records to retrieve.\n * @param  {number} offset Starting offset for records to retrieve.\n * @return {Object} A flux standard action.\n */\nexport function retrieveCallLogs (amount, offset) {\n  return {\n    type: actionTypes.FETCH_CALL_HISTORY,\n    payload: {\n      amount,\n      offset\n    }\n  }\n}\n\n/**\n * Represents a received response from fetching call logs.\n * @method retrieveCallLogsFinish\n * @param  {Object} $0\n * @param  {Object} $0.logs Retrieved call logs.\n * @param  {BasicError} $0.error  Error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function retrieveCallLogsFinish ({ logs, error }) {\n  return {\n    type: actionTypes.FETCH_CALL_HISTORY_FINISH,\n    error: !!error,\n    payload: error || logs\n  }\n}\n\n/**\n * Represents a request to delete call logs.\n * @method removeCallLogs\n * @param  {number} recordId Which logs to delete.\n * @return {Object} A flux standard action.\n */\nexport function removeCallLogs (recordId) {\n  return {\n    type: actionTypes.DELETE_CALL_HISTORY,\n    payload: recordId\n  }\n}\n\n/**\n * Represents a received response from deleting call logs.\n * @method removeCallLogsFinish\n * @param  {Object} $0\n * @param  {number|string} $0.recordId The ID of the removed record. Can also be 'all'.\n * @param  {BasicError} $0.error  Error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function removeCallLogsFinish ({ recordId, error }) {\n  return {\n    type: actionTypes.DELETE_CALL_HISTORY_FINISH,\n    error: !!error,\n    payload: error || recordId\n  }\n}\n\n/**\n * Represents a request to add a new entry to the call logs.\n * @method addCallLogEntry\n * @param  {Object} $0 The call log entry to add\n * @return {Object} A flux standard action.\n */\nexport function addCallLogEntry (logEntry) {\n  return {\n    type: actionTypes.ADD_CALL_HISTORY_ENTRY,\n    payload: logEntry\n  }\n}\n\n/**\n * Represents a call to set the cache in the call history\n * @method setCache\n * @param  {Object} $0 call log state to hydrate into app state\n * @return {Object} A flux standard action.\n */\nexport function setCache (data) {\n  return {\n    type: actionTypes.SET_CACHE,\n    payload: data\n  }\n}\n","import * as actionTypes from './actionTypes'\n// Constants\nimport { platforms } from '../../constants'\n\n/**\n * Helper function for funneling all notification types into a single action.\n * @method notificationHelper\n * @param  {string} channel - The channel that the notification came from.\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nfunction notificationHelper (channel, notification, platform) {\n  return {\n    type: actionTypes.PROCESS_NOTIFICATION,\n    payload: notification,\n    meta: {\n      platform,\n      channel\n    }\n  }\n}\n\n/**\n * Represents an application request to process a websocket notification.\n * @method websocketNotification\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function websocketNotification (notification, platform = platforms.LINK) {\n  return notificationHelper('WEBSOCKET', notification, platform)\n}\n\n/**\n * Represents an application request to process an external notification.\n * @method externalNotification\n * @param  {Object} notification\n * @param  {string} [channel='PUSH'] - The channel that the notification came from.\n * @return {Object} A flux standard action.\n */\nexport function externalNotification (notification, channel = 'PUSH', platform) {\n  // TODO: Are external notifications _only_ for Link?\n  return notificationHelper(channel.toUpperCase(), notification, platform)\n}\n\n/**\n * Represents a received notification.\n * @method notificationReceived\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function notificationReceived (notification, platform, channel) {\n  return {\n    type: actionTypes.NOTIFICATION_RECEIVED,\n    payload: notification,\n    error: notification instanceof Error,\n    meta: {\n      platform,\n      channel\n    }\n  }\n}\n\n/**\n * Represents a received notification.\n * @method processNotificationFinish\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function processNotificationFinish (notification, platform) {\n  return {\n    type: actionTypes.PROCESS_NOTIFICATION_FINISH,\n    payload: notification,\n    error: notification instanceof Error,\n    meta: {\n      platform\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method enableNotificationChannel\n * @param  {string} channel - The notification channel being affected.\n * @param  {Object} params\n * @param  {boolean} params.channelEnabled - Whether to enable the channel or not.\n * @return {Object} A flux standard action.\n */\nexport function enableNotificationChannel (channel, params = {}) {\n  return {\n    type: actionTypes.ENABLE_NOTIFICATION_CHANNEL,\n    payload: {\n      ...params\n    },\n    meta: {\n      channel\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method registerApplePushNotification\n * @param  {Object} params\n * @return {Object} A flux standard action.\n */\nexport function registerApplePushNotification (params, deferred) {\n  return {\n    type: actionTypes.REGISTER_APPLE_PUSH_NOTIFICATION,\n    payload: {\n      ...params,\n      pushProvider: 'apple'\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method registerAndroidPushNotification\n * @param  {Object} params\n * @return {Object} A flux standard action.\n */\nexport function registerAndroidPushNotification (params, deferred) {\n  return {\n    type: actionTypes.REGISTER_ANDROID_PUSH_NOTIFICATION,\n    payload: {\n      ...params,\n      pushProvider: 'google'\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method unregisterApplePushNotification\n * @param  {string} registration\n * @return {Object} A flux standard action.\n */\nexport function unregisterApplePushNotification (registration, deferred) {\n  return {\n    type: actionTypes.UNREGISTER_APPLE_PUSH_NOTIFICATION,\n    payload: {\n      registration\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method unregisterAndroidPushNotification\n * @param  {string} registration\n * @return {Object} A flux standard action.\n */\nexport function unregisterAndroidPushNotification (registration, deferred) {\n  return {\n    type: actionTypes.UNREGISTER_ANDROID_PUSH_NOTIFICATION,\n    payload: {\n      registration\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents the response of a change in a notification channel status.\n * @method enableNotificationChannelFinish\n * @param  {string} channel - The notification channel being affected.\n * @param  {Object} $1\n * @param  {Object} $1.params - Information about the channel change.\n * @param  {Object} $1.params.channelEnabled - Whether the channel was enabled or not.\n * @param  {Object} $1.error - Error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function enableNotificationChannelFinish (channel, { params, error } = {}) {\n  var action = {\n    type: actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH,\n    meta: {\n      channel\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = new Error(error)\n    action.payload.channelEnabled = params.channelEnabled\n  } else {\n    action.payload = {\n      ...params\n    }\n  }\n\n  return action\n}\n","import * as messageActionsImport from './messages'\nimport * as convoActionsImport from './conversations'\n// Apparently the following doesn't work:\n//      export * as newName from './place';\n// So import everything from each file, then re-export.\n\n/**\n * The messaging plugin's actions are organized into three types:\n *  - message actions: those which act on message object,\n *  - convo actions: those which act on conversation objects,\n *  - group actions: those which manage groups.\n */\nexport const messageActions = messageActionsImport\nexport const convoActions = convoActionsImport\n","import { cloneDeep, isEqual } from 'lodash/fp'\n\n/*\n * Redux-saga selector functions.\n * Used with the `select` effect in sagas to retrieve\n *      specific portions of the state.\n */\n\n/**\n * Retrieves the config options provided by the messaging plugin.\n * @method getMessagingConfig\n * @return {Object}\n */\nexport function getMessagingConfig (state) {\n  return cloneDeep(state.config.messaging)\n}\n\n/**\n * Retrieves conversations from the store pertaining to messaging.\n * @method getConversations\n * @return {Object}\n */\nexport function getConversations (state) {\n  return cloneDeep(state.messaging.conversations)\n}\n\n/**\n * Retrieves the messages from the store pertaining to a specific messaging\n * conversation.\n * @method getMessages\n * @return {Object}\n */\nexport function getMessages (state, conversationId) {\n  return cloneDeep(state.messaging.conversations[conversationId].messages)\n}\n\n/**\n * Searches for a conversation by its destination, which represents the destination\n * for all messages being sent to this conversation from this instance of the SDK\n *\n * @param state\n * @param {Array} destination A subscriber handle or a comma-separated list\n * of subscriber handles\n * @param {string} type The type of conversation: can be one of 'im', 'sms' or 'group'\n * @returns {Object}\n */\nexport function findConversation (state, destination, type = 'im') {\n  return cloneDeep(\n    state.messaging.conversations.find(conversation => {\n      return isEqual(conversation.destination, destination) && conversation.type === type\n    })\n  )\n}\n\n/**\n * Searches for a member in a conversation and returns their name\n *\n * @param state\n * @param {string} destination A subscriber handle or a comma-separated list\n * of subscriber handles\n * @param id {number} User ID for the specific conversation member for whom we are searching\n * @returns {*}\n */\nexport function findMember (state, destination, id) {\n  const conv = state.messaging.conversations.find(conversation => conversation.destination === destination)\n  if (conv) {\n    return cloneDeep(conv.members.find(member => member.id === id))\n  }\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","\nvar space = require('to-space-case')\n\n/**\n * Export.\n */\n\nmodule.exports = toCamelCase\n\n/**\n * Convert a `string` to camel case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toCamelCase(string) {\n  return space(string).replace(/\\s(\\w)/g, function (matches, letter) {\n    return letter.toUpperCase()\n  })\n}\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var isArray = require('@stamp/is/array');\nvar isFunction = require('@stamp/is/function');\nvar isObject = require('@stamp/is/object');\nvar isStamp = require('@stamp/is/stamp');\nvar isComposable = require('@stamp/is/composable');\n\nvar assign = require('@stamp/core/assign');\nvar merge = require('@stamp/core/merge');\n\nvar slice = Array.prototype.slice;\n\n/**\n * Creates new factory instance.\n * @returns {Function} The new factory function.\n */\nfunction createFactory() {\n  return function Stamp(options) {\n    var descriptor = Stamp.compose || {};\n    // Next line was optimized for most JS VMs. Please, be careful here!\n    var obj = {__proto__: descriptor.methods}; // jshint ignore:line\n\n    merge(obj, descriptor.deepProperties);\n    assign(obj, descriptor.properties);\n    Object.defineProperties(obj, descriptor.propertyDescriptors || {});\n\n    if (!descriptor.initializers || descriptor.initializers.length === 0) return obj;\n\n    if (options === undefined) options = {};\n    var inits = descriptor.initializers;\n    var length = inits.length;\n    for (var i = 0; i < length; i += 1) {\n      var initializer = inits[i];\n      if (isFunction(initializer)) {\n        var returnedValue = initializer.call(obj, options,\n          {instance: obj, stamp: Stamp, args: slice.apply(arguments)});\n        obj = returnedValue === undefined ? obj : returnedValue;\n      }\n    }\n\n    return obj;\n  };\n}\n\n/**\n * Returns a new stamp given a descriptor and a compose function implementation.\n * @param {Descriptor} [descriptor={}] The information about the object the stamp will be creating.\n * @param {Compose} composeFunction The \"compose\" function implementation.\n * @returns {Stamp}\n */\nfunction createStamp(descriptor, composeFunction) {\n  var Stamp = createFactory();\n\n  if (descriptor.staticDeepProperties) {\n    merge(Stamp, descriptor.staticDeepProperties);\n  }\n  if (descriptor.staticProperties) {\n    assign(Stamp, descriptor.staticProperties);\n  }\n  if (descriptor.staticPropertyDescriptors) {\n    Object.defineProperties(Stamp, descriptor.staticPropertyDescriptors);\n  }\n\n  var composeImplementation = isFunction(Stamp.compose) ? Stamp.compose : composeFunction;\n  Stamp.compose = function _compose() {\n    'use strict'; // to make sure `this` is not pointing to `global` or `window`\n    return composeImplementation.apply(this, arguments);\n  };\n  assign(Stamp.compose, descriptor);\n\n  return Stamp;\n}\n\nfunction concatAssignFunctions(dstObject, srcArray, propName) {\n  if (!isArray(srcArray)) return;\n\n  var length = srcArray.length;\n  var dstArray = dstObject[propName] || [];\n  dstObject[propName] = dstArray;\n  for (var i = 0; i < length; i += 1) {\n    var fn = srcArray[i];\n    if (isFunction(fn) && dstArray.indexOf(fn) < 0) {\n      dstArray.push(fn);\n    }\n  }\n}\n\n\nfunction combineProperties(dstObject, srcObject, propName, action) {\n  if (!isObject(srcObject[propName])) return;\n  if (!isObject(dstObject[propName])) dstObject[propName] = {};\n  action(dstObject[propName], srcObject[propName]);\n}\n\nfunction deepMergeAssign(dstObject, srcObject, propName) {\n  combineProperties(dstObject, srcObject, propName, merge);\n}\nfunction mergeAssign(dstObject, srcObject, propName) {\n  combineProperties(dstObject, srcObject, propName, assign);\n}\n\n/**\n * Mutates the dstDescriptor by merging the srcComposable data into it.\n * @param {Descriptor} dstDescriptor The descriptor object to merge into.\n * @param {Composable} [srcComposable] The composable\n * (either descriptor or stamp) to merge data form.\n */\nfunction mergeComposable(dstDescriptor, srcComposable) {\n  var srcDescriptor = (srcComposable && srcComposable.compose) || srcComposable;\n\n  mergeAssign(dstDescriptor, srcDescriptor, 'methods');\n  mergeAssign(dstDescriptor, srcDescriptor, 'properties');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'deepProperties');\n  mergeAssign(dstDescriptor, srcDescriptor, 'propertyDescriptors');\n  mergeAssign(dstDescriptor, srcDescriptor, 'staticProperties');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'staticDeepProperties');\n  mergeAssign(dstDescriptor, srcDescriptor, 'staticPropertyDescriptors');\n  mergeAssign(dstDescriptor, srcDescriptor, 'configuration');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'deepConfiguration');\n  concatAssignFunctions(dstDescriptor, srcDescriptor.initializers, 'initializers');\n  concatAssignFunctions(dstDescriptor, srcDescriptor.composers, 'composers');\n}\n\n/**\n * Given the list of composables (stamp descriptors and stamps) returns\n * a new stamp (composable factory function).\n * @typedef {Function} Compose\n * @param {...(Composable)} [arguments] The list of composables.\n * @returns {Stamp} A new stamp (aka composable factory function)\n */\nmodule.exports = function compose() {\n  'use strict'; // to make sure `this` is not pointing to `global` or `window`\n  var descriptor = {};\n  var composables = [];\n  if (isComposable(this)) {\n    mergeComposable(descriptor, this);\n    composables.push(this);\n  }\n\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (isComposable(arg)) {\n      mergeComposable(descriptor, arg);\n      composables.push(arg);\n    }\n  }\n\n  var stamp = createStamp(descriptor, compose);\n\n  var composers = descriptor.composers;\n  if (isArray(composers) && composers.length > 0) {\n    for (var j = 0; j < composers.length; j += 1) {\n      var composer = composers[j];\n      var returnedValue = composer({stamp: stamp, composables: composables});\n      stamp = isStamp(returnedValue) ? returnedValue : stamp;\n    }\n  }\n\n  return stamp;\n};\n\n\n/**\n * The Stamp Descriptor\n * @typedef {Function|Object} Descriptor\n * @returns {Stamp} A new stamp based on this Stamp\n * @property {Object} [methods] Methods or other data used as object instances' prototype\n * @property {Array<Function>} [initializers] List of initializers called for each object instance\n * @property {Array<Function>} [composers] List of callbacks called each time a composition happens\n * @property {Object} [properties] Shallow assigned properties of object instances\n * @property {Object} [deepProperties] Deeply merged properties of object instances\n * @property {Object} [staticProperties] Shallow assigned properties of Stamps\n * @property {Object} [staticDeepProperties] Deeply merged properties of Stamps\n * @property {Object} [configuration] Shallow assigned properties of Stamp arbitrary metadata\n * @property {Object} [deepConfiguration] Deeply merged properties of Stamp arbitrary metadata\n * @property {Object} [propertyDescriptors] ES5 Property Descriptors applied to object instances\n * @property {Object} [staticPropertyDescriptors] ES5 Property Descriptors applied to Stamps\n */\n\n/**\n * The Stamp factory function\n * @typedef {Function} Stamp\n * @returns {*} Instantiated object\n * @property {Descriptor} compose - The Stamp descriptor and composition function\n */\n\n/**\n * A composable object - stamp or descriptor\n * @typedef {Stamp|Descriptor} Composable\n */\n\n","module.exports = Array.isArray;\n","module.exports = function isFunction(arg) {\n  return typeof arg === 'function';\n};\n","module.exports = require('./_hide');\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","import createManager from './logManager'\nimport defaultLogFormatter from './logFormatter'\nimport { logLevels as levelImport } from './constants'\n\n/**\n * Package main.\n */\n\n// Main export is the manager's factory function.\nexport default createManager\n\n// Named export for the log level constants the package uses / expects.\nexport const logLevels = levelImport\n\n// Default log formatter used by the defaultLogHandler\nexport const logFormatter = defaultLogFormatter\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","/**\n * Default function for the SDK to use for log formatting.\n *    Uses entry information to form a prefix.\n * @method defaultLogFormatter\n * @param  {LogEntry} entry\n */\nexport default function defaultLogFormatter (entry) {\n  // Compile the meta info of the log for a prefix.\n  const { timestamp, level, target } = entry\n\n  // Find a short name to reference which Logger this log is from.\n  //    This is mostly to cut down the ID if it's too long for a human to read.\n  const shortId = target.id && target.id.length > 8 ? target.id.substring(0, 6) : target.id\n  const shortName = shortId ? `${target.type}/${shortId}` : target.type\n\n  const logInfo = `${timestamp} - ${shortName} - ${level}`\n\n  // Assume that the first message parameter is a string.\n  const log = entry.messages[0]\n\n  return `${logInfo} - ${log}`\n}\n","import defaultActionHandler from './actions/actionHandler'\n\n/**\n * Configuration options for the Logs feature.\n *\n * The SDK will log information about the operations it is performing. The\n *    amount of information will depend on how the Logs feature is configured.\n *\n * The format of logs can also be customized by providing a\n *    {@link logger.LogHandler LogHandler}. This function will receive a\n *    {@link logger.LogEntry LogEntry} which it can handle as it sees fit. By\n *    default, the SDK will log information to the console. For more\n *    information, see the {@link logger Logs feature} description.\n *\n * @public\n * @static\n * @name config.logs\n * @memberof config\n * @requires logs\n * @instance\n * @param {Object} logs Logs configs.\n * @param {string} [logs.logLevel='debug'] Log level to be set. See {@link logger.levels}.\n * @param {logger.LogHandler} [logs.handler] The function to receive log entries from the\n *    SDK. If not provided, a default handler will be used that logs entries\n *    to the console.\n * @param  {boolean} [logs.enableFcsLogs=true] Enable the detailed call logger\n *    for v3.X. Requires log level debug.\n * @param {Object|boolean} [logs.logActions=false] Options specifically for action logs when\n *    logLevel is at DEBUG+ levels. Set this to false to not output action logs.\n * @param {logger.LogHandler} [logs.logActions.handler] The function to receive action\n *    log entries from the SDK. If not provided, a default handler will be used\n *    that logs actions to the console.\n * @param {boolean} [logs.logActions.actionOnly=false] Only output information\n *    about the action itself. Omits the SDK context for when it occurred.\n * @param {boolean} [logs.logActions.collapsed=false] Whether logs should be\n *    minimized when initially output. The full log is still output and can be\n *    inspected on the console.\n * @param {boolean} [logs.logActions.diff=false] Include a diff of what SDK\n *    context was changed by the action.\n * @param {string}  [logs.logActions.level='debug'] Log level to be set\n *    on the action logs\n * @param {boolean} [logs.logActions.exposePayloads=true] Allow action payloads\n *    to be exposed in the logs, potentially displaying sensitive information.\n */\nexport const defaultOptions = {\n  logLevel: 'debug',\n  handler: undefined,\n  enableFcsLogs: true,\n  logActions: false\n}\n\nexport const partialDefaultLogActions = {\n  handler: defaultActionHandler,\n  actionOnly: false,\n  collapsed: false,\n  diff: false,\n  level: 'debug',\n  exposePayloads: true\n}\n/*\n * TODO: Figure out a way to work around this.\n * Can't use validation in logging because validation uses logging to output errors.\n * Circular dependency, have to refactor.\n * Code:\n ```javascript\n// Parse and/or Validate\n// import { enums, validation as v8n, parse } from '../common/validation'\nconst defaultValidation = v8n.schema({\n  logLevel: enums(['silent', 'error', 'warn', 'info', 'debug']),\n  handler: v8n.optional(v8n.function()),\n  enableFcsLogs: v8n.boolean(),\n  logActions: v8n.optional(\n    v8n.passesAnyOf(\n      v8n.schema({\n        handler: v8n.optional(v8n.function()),\n        actionOnly: v8n.boolean(),\n        collapsed: v8n.boolean(),\n        diff: v8n.boolean(),\n        exposePayloads: v8n.boolean()\n      }),\n      // OR\n      v8n.boolean()\n    )\n  )\n})\n\nexport const parseLogConfig = parse('logger', defaultValidation)\n```\n*/\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","const PREFIX = '@@KANDY/'\n\nexport const CONFIG_UPDATE = PREFIX + 'CONFIG_UPDATE'\n\nexport const SET_SDP_HANDLERS = PREFIX + 'SET_SDP_HANDLERS'\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves configuration Object stored in state\n *\n * @method getConfiguration\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getConfiguration (state) {\n  return cloneDeep(state.config)\n}\n","import * as actionTypes from './actionTypes'\n\n/**\n * Creates a connect action that takes a credentials object.\n *\n * @method connect\n * @param {Object} credentials The credentials to pass to the connect action.\n * @param {Object} [options] Any parameters that aren't credentials.\n * @return {Object} A flux standard action.\n */\nexport function connect (credentials, options) {\n  return {\n    type: actionTypes.CONNECT,\n    payload: { credentials, options },\n    meta: {\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Create a set connection info action that takes a connection and user info object\n *\n * @method setConnectionInfo\n * @param {Object} $0\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @return {Object} A flux standard action.\n */\nexport function setConnectionInfo ({ userInfo, connection }, platform) {\n  return {\n    type: actionTypes.SET_CONNECTION_INFO,\n    payload: { userInfo, connection },\n    meta: {\n      platform,\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Connection occurred action.\n * Signifies that a connection has been made to a service, but that the connection\n *      workflow has not finished yet. Intended for use in scenarios where the\n *      workflow connects to multiple services, to represent the \"intermediate\"\n *      connections.\n *\n * @method connectionOccurred\n * @param  {Object} $0\n * @param  {Object} $0.subscription\n * @param  {Object} $0.connection\n * @param  {Object} [$0.error] An error message. Only present if an error occurred.\n * @param  {string} platform The backend platform used for the connection.\n * @return {Object} A flux standard action.\n */\nexport function connectionOccurred ({ subscription, connection, error }, platform) {\n  // TODO: Is this action used anywhere?\n  var action = {\n    type: actionTypes.CONNECTION_OCCURRED,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { subscription, connection }\n  }\n\n  return action\n}\n\n/**\n * Create a connect finished action that takes a userInfo object on success and possibly\n * an error object.\n *\n * @method connectFinished\n * @param {Object} $0\n * @param {Object} $0.subscription A subscription object. Contains what services to subscribe to.\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} platform The backend platform we are currently on.\n * @param {boolean} isSSO Boolean for whether the current connection scenario is SSO or not.\n * @return {Object} A flux standard action.\n */\nexport function connectFinished ({ subscription, userInfo, connection, error }, platform, isSSO = false) {\n  var action = {\n    type: actionTypes.CONNECT_FINISHED,\n    meta: {\n      platform,\n      isSSO,\n      isSensitive: true\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { subscription, userInfo, connection }\n  }\n\n  return action\n}\n\n/**\n * Creates a getUserDetails action\n *\n * @method getUserDetails\n * @return {Object} A flux standard action.\n */\nexport function getUserDetails () {\n  return { type: actionTypes.GET_USER_DETAILS }\n}\n\n/**\n * Create a user details received action\n *\n * @method userDetailsReceived\n * @param  {Object} userDetailsResponse An object representing the REST response of a user details request.\n * @return {Object} A flux standard action.\n */\nexport function userDetailsReceived (userDetailsResponse) {\n  var action = {\n    type: actionTypes.USER_DETAILS_RECEIVED,\n    payload: {\n      firstName: userDetailsResponse.firstName || userDetailsResponse.user_first_name,\n      user_first_name: userDetailsResponse.user_first_name || userDetailsResponse.firstName,\n      lastName: userDetailsResponse.lastName || userDetailsResponse.user_last_name,\n      user_last_name: userDetailsResponse.user_last_name || userDetailsResponse.lastName,\n      photoURL: userDetailsResponse.photoURL,\n      emailAddress: userDetailsResponse.emailAddress || userDetailsResponse.user_email,\n      user_email: userDetailsResponse.user_email || userDetailsResponse.emailAddress,\n      username: userDetailsResponse.username\n    }\n  }\n\n  return action\n}\n\n/**\n * Creates a disconnect action.\n *\n * @method disconnect\n * @return {Object} A flux standard action.\n */\nexport function disconnect () {\n  return { type: actionTypes.DISCONNECT }\n}\n\n/**\n * Create a disconnectFinished action that possibly takes an error object on failure.\n *\n * @method disconnectFinished\n * @param {Object} params\n * @param {string} [params.error] An error message. Only present if an error occurred.\n * @param {string} [params.reason] Why the disconnectFinished action is being dispatched.\n * @param {number} [params.retryAfter] The time (in seconds) when SDK should retry the operation.\n * @return {Object} A flux standard action.\n */\nexport function disconnectFinished ({ error, reason, retryAfter } = {}) {\n  const action = {\n    type: actionTypes.DISCONNECT_FINISHED,\n    payload: {}\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  }\n\n  if (reason) {\n    action.payload.reason = reason\n  }\n\n  if (retryAfter) {\n    action.payload.retryAfter = retryAfter\n  }\n  return action\n}\n\n/**\n * Action creator representing the finish of a resubscription request.\n * Payload mirrors a connect finished action.\n *\n * @method resubscribeFinished\n * @param {Object} $0\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} [$0.attemptNum] The attempt number of this resubscription.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function resubscribeFinished ({ error, attemptNum }, platform) {\n  var action = {\n    type: actionTypes.RESUBSCRIPTION_FINISHED,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n    action.payload.attemptNum = attemptNum\n  } else {\n    action.payload = {\n      attemptNum\n    }\n  }\n\n  return action\n}\n\n/**\n * Creates a refreshTokens action with the given credentials as a payload.\n *\n * @method refreshTokens\n * @param {Object} credentials A credentials object containing tokens.\n * @return {Object} A flux standard action.\n */\nexport function refreshTokens (credentials) {\n  var action = {\n    type: actionTypes.REFRESH_TOKENS,\n    payload: { credentials }\n  }\n  return action\n}\n\n/**\n * Creates a refreshTokensFinished action with connection and platform information.\n * Optionally includes an error.\n *\n * @method refreshTokensFinished\n * @param {Object} $0\n * @param {Object} [$0.error] An optional error object.\n * @param {Object} $0.connection Connection information.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function refreshTokensFinished ({ error, connection }, platform) {\n  var action = {\n    type: actionTypes.REFRESH_TOKENS_FINISHED,\n    payload: { connection },\n    meta: { platform }\n  }\n  if (error) {\n    action.error = true\n    action.payload = error\n  }\n\n  return action\n}\n\n/**\n * Represents a request to update a current subscription.\n * @method updateSubscription\n * @param  {Object} subscription Information used to update subscription.\n * @return {Object} A flux standard action.\n */\nexport function updateSubscription (subscription) {\n  return {\n    type: actionTypes.UPDATE_SUBSCRIPTION,\n    payload: subscription\n  }\n}\n\n/**\n * Represents that the current subscription has been updated.\n * @method updateSubscriptionFinished\n * @param  {Object} $0\n * @param  {Object} $0.subscription New subscription state to be updated.\n * @param  {Object} [$0.error] Error object, in the case of an error.\n * @param  {string} platform The backend platform used for the subscription.\n * @return {Object} A flux standard action.\n */\nexport function updateSubscriptionFinished ({ subscription, error }, platform) {\n  var action = {\n    type: actionTypes.UPDATE_SUBSCRIPTION_FINISH,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = subscription\n  }\n  return action\n}\n\n/**\n * Sets the token information in the state.\n * @method setTokens\n * @param {Object} params Dictionary object of parameters.\n * @param {string} accessToken An access token retrieved using the authentication APIs of the platform.\n * @param {string} idToken An identity token retrieved using the authentication APIs of the platform.\n * @return {Object} A flux standard action.\n */\nexport function setTokens ({ accessToken, idToken }) {\n  return {\n    type: actionTypes.SET_TOKEN,\n    payload: { accessToken, idToken }\n  }\n}\n\n/**\n * Creates a setCredentials action that takes a credentials object.\n *\n * @method setCredentials\n * @param {Object} $0\n * @param {string} $0.username The username.\n * @param {string} $0.password The user's password.\n * @param {string} $0.authname The user's authorization name.\n * @param {string} $0.hmacToken An HMAC token for the user with the provided user ID.\n * @param {string} $0.bearerAccessToken An access token retrieved using the authentication APIs of the platform.\n * @param {string} $0.idToken An identity token retrieved using the authentication APIs of the platform.\n * @return {Object} A flux standard action.\n */\nexport function setCredentials ({ username, password, authname, hmacToken, bearerAccessToken, idToken }) {\n  return {\n    type: actionTypes.SET_CREDENTIALS,\n    payload: { username, password, authname, hmacToken, bearerAccessToken, idToken },\n    meta: {\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Create a setCredentials finished action that takes a userInfo object on success and possibly\n * an error object.\n *\n * @method setCredentialsFinished\n * @param {Object} $0\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function setCredentialsFinished ({ userInfo, connection, error }, platform) {\n  var action = {\n    type: actionTypes.SET_CREDENTIALS_FINISH,\n    meta: {\n      platform,\n      isSensitive: true\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { userInfo, connection }\n  }\n\n  return action\n}\n\n/**\n * Creates an updateToken action with connection and platform information.\n *\n * @method updateToken\n * @param {string} token A session id retrieved after a successful subscription on the platform.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function updateHmacToken (token, platform) {\n  var action = {\n    type: actionTypes.UPDATE_HMAC_TOKEN,\n    payload: token,\n    meta: {\n      platform,\n      isSensitive: true\n    }\n  }\n\n  return action\n}\n","import * as actionTypes from './actionTypes'\n\nvar nextRequestId = 0\nfunction generateRequestId () {\n  return nextRequestId++\n}\n\n/**\n * Creates a request action.\n * @param {Object} options\n * @param {string} options.url The url for the request\n * @param {Object} [options.queryParams] Query parameters to be added to the url string\n * @param {string} [options.responseType] The data type assumed to be received in the response body\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] The request body\n */\nexport function request (options) {\n  return {\n    type: actionTypes.REQUEST,\n    payload: options,\n    meta: {\n      requestId: generateRequestId()\n    }\n  }\n}\n\n/**\n * Creates a response action.\n */\nexport function response (requestId, result, error = false) {\n  return {\n    type: actionTypes.RESPONSE,\n    payload: result,\n    error,\n    meta: {\n      requestId: requestId\n    }\n  }\n}\n\n/**\n * Action to signify a REST request has encountered an authorization error.\n * @param  {BasicError} error\n * @return {Action}\n */\nexport function authorizationError (error) {\n  return {\n    error: true,\n    type: actionTypes.AUTHORIZATION_ERROR,\n    payload: error\n  }\n}\n","const name = 'connectivity'\nexport default name\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","// Base64 by Kevin van Zonneveld - Public Domain\n// Original Source: http://kevin.vanzonneveld.net/\n\nexport function base64_encode (data) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Bayron Guevara\n    // +   improved by: Thunder.m\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: utf8_encode\n    // *     example 1: base64_encode('Kevin van Zonneveld');\n    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    //if (typeof this.window['atob'] == 'function') {\n    //    return atob(data);\n    //}\n\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc='', tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data = utf8_encode(data+'');\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1<<16 | o2<<8 | o3;\n\n        h1 = bits>>18 & 0x3f;\n        h2 = bits>>12 & 0x3f;\n        h3 = bits>>6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n    case 1:\n        enc = enc.slice(0, -2) + '==';\n        break;\n    case 2:\n        enc = enc.slice(0, -1) + '=';\n        break;\n    }\n\n    return enc;\n}\n\n\n\nexport function base64_decode (data) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Thunder.m\n    // +      input by: Aman Gupta\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: utf8_decode\n    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n    // *     returns 1: 'Kevin van Zonneveld'\n\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    //if (typeof this.window['btoa'] == 'function') {\n    //    return btoa(data);\n    //}\n\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = '', tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data += '';\n\n    do {  // unpack four hexets into three octets using index points in b64\n        h1 = b64.indexOf(data.charAt(i++));\n        h2 = b64.indexOf(data.charAt(i++));\n        h3 = b64.indexOf(data.charAt(i++));\n        h4 = b64.indexOf(data.charAt(i++));\n\n        bits = h1<<18 | h2<<12 | h3<<6 | h4;\n\n        o1 = bits>>16 & 0xff;\n        o2 = bits>>8 & 0xff;\n        o3 = bits & 0xff;\n\n        if (h3 === 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1);\n        } else if (h4 === 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2);\n        } else {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n        }\n    } while (i < data.length);\n\n    dec = tmp_arr.join('');\n    dec = utf8_decode(dec);\n\n    return dec;\n}\n\n\nfunction utf8_encode ( argString ) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: sowberry\n    // +    tweaked by: Jack\n    // +   bugfixed by: Onno Marsman\n    // +   improved by: Yves Sucaet\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Ulrich\n    // *     example 1: utf8_encode('Kevin van Zonneveld');\n    // *     returns 1: 'Kevin van Zonneveld'\n\n    var string = (argString+''); // .replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\n\n    var utftext = '';\n    var start, end;\n    var stringl = 0;\n\n    start = end = 0;\n    stringl = string.length;\n    for (var n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192) + String.fromCharCode((c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224) + String.fromCharCode(((c1 >> 6) & 63) | 128) + String.fromCharCode((c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end);\n            }\n            utftext += enc;\n            start = end = n+1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length);\n    }\n\n    return utftext;\n}\n\nfunction utf8_decode ( str_data ) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n    // +      input by: Aman Gupta\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: Norman \"zEh\" Fuchs\n    // +   bugfixed by: hitwork\n    // +   bugfixed by: Onno Marsman\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // *     example 1: utf8_decode('Kevin van Zonneveld');\n    // *     returns 1: 'Kevin van Zonneveld'\n\n    var tmp_arr = [], i = 0, ac = 0, c1 = 0, c2 = 0, c3 = 0;\n\n    str_data += '';\n\n    while ( i < str_data.length ) {\n        c1 = str_data.charCodeAt(i);\n        if (c1 < 128) {\n            tmp_arr[ac++] = String.fromCharCode(c1);\n            i++;\n        } else if ((c1 > 191) && (c1 < 224)) {\n            c2 = str_data.charCodeAt(i+1);\n            tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n            i += 2;\n        } else {\n            c2 = str_data.charCodeAt(i+1);\n            c3 = str_data.charCodeAt(i+2);\n            tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n            i += 3;\n        }\n    }\n\n    return tmp_arr.join('');\n}\n","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Helper function for formatting call actions.\n * @method callActionHelper\n * @param  {string} type - Action type.\n * @param  {string} callId - Id of the call being acted on.\n * @param  {Object} $2\n * @param  {Object} $2.callInfo - Call state properties.\n * @param  {Object} $2.error\n * @return {Object} A flux standard action.\n */\nexport function callActionHelper (type, callId, { callInfo, error, params } = {}) {\n  const action = {\n    type,\n    payload: {}\n  }\n\n  if (error) {\n    action.error = true\n    const message = typeof error === 'string' ? error : error.message\n    action.payload = new Error(message)\n    // TODO: Ensure the middleware uses consistent error objects.\n    // Ensure the action has the entire error object.\n    action.payload.error = error\n  }\n\n  if (callInfo) {\n    action.payload.callInfo = callInfo\n  }\n  if (params) {\n    action.payload.params = params\n  }\n  action.payload.callId = callId\n\n  return action\n}\n\n/**\n * Creates a make call action to start an outgoing call.\n * @method makeCall\n * @param  {string} callee       Full user ID of the call recipient.\n * @param  {string} callId       A unique identifier for the call.\n * @param  {Object} [options={}] Call options.\n * @returns {Object} A flux standard action representing the make call action.\n */\nexport function makeCall (callee, callId, options = {}) {\n  const callInfo = {\n    ...options,\n    to: callee\n  }\n  return callActionHelper(actionTypes.MAKE_CALL, callId, {\n    callInfo\n  })\n}\n\n/**\n * Creates a make call finish action.\n * @method makeCallFinish\n * @param  {string} callId The outgoing call ID.\n * @param  {Object} callInfo Information about the call.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action representing the make call finish action.\n */\nexport function makeCallFinish (callId, callInfo, error) {\n  return callActionHelper(actionTypes.MAKE_CALL_FINISH, callId, {\n    callInfo,\n    error\n  })\n}\n\n/**\n * Create a call incoming action.\n * @method callIncoming\n * @param  {string} callId The outgoing call ID.\n * @param  {Object} callInfo Information about the call.\n * @returns {Object} A flux standard action representing the call incoming action.\n */\nexport function callIncoming (callId, callInfo) {\n  return callActionHelper(actionTypes.CALL_INCOMING, callId, {\n    callInfo\n  })\n}\n\n/**\n * Creating an answer call action.\n * @method answerCall\n * @param  {string}   callId  The ID of the call to answer.\n * @param  {Object}   [options={}] Call options.\n * @returns {Object} A flux standard action representing the answer call action.\n */\nexport function answerCall (callId, options = {}) {\n  return callActionHelper(actionTypes.ANSWER_CALL, callId, {\n    callInfo: options\n  })\n}\n\n/**\n * Creating an answer call finish action.\n * @method answerCall\n * @param  {string}   callId  The ID of the call that was answered.\n * @param  {Object}   [error] The error object, in the case of an error.\n * @returns {Object} A flux standard action representing the answer call finish action.\n */\nexport function answerCallFinish (callId, callInfo, error) {\n  return callActionHelper(actionTypes.ANSWER_CALL_FINISH, callId, {\n    callInfo,\n    error\n  })\n}\n\n/**\n * Creates an ignore call action.\n * @method ignoreCall\n * @param  {string}   callId  The ID of the call to ignore.\n * @returns {Object} A flux standard action representing the ignore call action.\n */\nexport function ignoreCall (callId) {\n  return callActionHelper(actionTypes.IGNORE_CALL, callId)\n}\n\n/**\n * Creates an ignore call finish action.\n * @method ignoreCallFinish\n * @param  {string}   callId  The ID of the ignored call.\n * @param  {Object}   [error] The error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function ignoreCallFinish (callId, error) {\n  return callActionHelper(actionTypes.IGNORE_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Creates an reject call action.\n * @method rejectCall\n * @param  {string}   callId  The ID of the call to reject.\n * @returns {Object} A flux standard action representing the reject call action.\n */\nexport function rejectCall (callId) {\n  return callActionHelper(actionTypes.REJECT_CALL, callId)\n}\n\n/**\n * Creates an reject call finish action.\n * @method rejectCallFinish\n * @param  {string}   callId  The ID of the rejected call.\n * @param  {Object}   [error] The error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function rejectCallFinish (callId, error) {\n  return callActionHelper(actionTypes.REJECT_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Create an end call action.\n * @method endCall\n * @param  {string} callId The outgoing call ID.\n * @returns {Object} A flux standard action representing the end call action.\n */\nexport function endCall (callId) {\n  return callActionHelper(actionTypes.END_CALL, callId)\n}\n\n/**\n * Creates an end call finish action.\n * @method endCallFinish\n * @param  {string} callId Id of the call that was ended.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action representing the end call finish action.\n */\nexport function endCallFinish (callId, error) {\n  return callActionHelper(actionTypes.END_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action about a call state changing.\n * @method callStateChange\n * @param  {string} callId   Id of the call that changed.\n * @param  {string} state    The new call state.\n * @param  {Object} transition   Information about the state change.\n * @param  {Object} callInfo Meta information about the call.\n * @returns {Object} A flux standard action.\n */\nexport function callStateChange (callId, state, transition, callInfo) {\n  // TODO: Error action if error state change?\n  return {\n    type: actionTypes.CALL_STATE_CHANGE,\n    payload: {\n      callId,\n      state,\n      transition,\n      callInfo\n    }\n  }\n}\n\n/**\n * Represents that a call's media state has changed.\n * @method callMediaStateChange\n * @param  {string} callId   Id of the call that changed.\n * @param  {number} mediaState The new call media state.\n * @returns {Object} A flux standard action.\n */\nexport function callMediaStateChange (callId, mediaState) {\n  return {\n    type: actionTypes.CALL_MEDIA_STATE_CHANGE,\n    payload: {\n      callId,\n      mediaState\n    }\n  }\n}\n\n/**\n * Represents an action to mute a call.\n * @method muteCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function muteCall (callId) {\n  return callActionHelper(actionTypes.MUTE_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to mute a call.\n * @method muteCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function muteCallFinish (callId, error) {\n  return callActionHelper(actionTypes.MUTE_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to unmute a call.\n * @method unMuteCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function unMuteCall (callId) {\n  return callActionHelper(actionTypes.UNMUTE_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to unmute a call.\n * @method unMuteCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function unMuteCallFinish (callId, error) {\n  return callActionHelper(actionTypes.UNMUTE_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to silence a call.\n * @method silenceCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function silenceCall (callId) {\n  return callActionHelper(actionTypes.SILENCE_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to silence a call.\n * @method silenceCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function silenceCallFinish (callId, error) {\n  return callActionHelper(actionTypes.SILENCE_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to unsilence a call.\n * @method unSilenceCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function unSilenceCall (callId) {\n  return callActionHelper(actionTypes.UNSILENCE_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to unsilence a call.\n * @method unSilenceCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function unSilenceCallFinish (callId, error) {\n  return callActionHelper(actionTypes.UNSILENCE_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to set parameters.\n * @method setCustomParameters\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Array.<{name: string, value:string}>} customParameters Custom parameters.\n * @returns {Object} A flux standard action.\n */\nexport function setCustomParameters (callId, customParameters = []) {\n  return {\n    type: actionTypes.SET_CUSTOM_PARAMETERS,\n    payload: {\n      callId,\n      customParameters\n    }\n  }\n}\n\n/**\n * Represents an action to start video for a call.\n * @method startVideo\n * @param  {string} callId The ID of the call being acted on.\n * @param {Object} [params]\n * @param {Object} [params.videoResolution]\n * @returns {Object} A flux standard action.\n */\nexport function startVideo (callId, params = {}) {\n  return callActionHelper(actionTypes.START_VIDEO, callId, {\n    callInfo: params\n  })\n}\n\n/**\n * Represents the finish of an action to start video for a call.\n * @method startVideoFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} [error] The error object, in the case of an error.\n * @param {Object} [params]\n * @param {Object} [params.videoResolution]\n * @returns {Object} A flux standard action.\n */\nexport function startVideoFinish (callId, params, error) {\n  return callActionHelper(actionTypes.START_VIDEO_FINISH, callId, {\n    callInfo: params,\n    error\n  })\n}\n\n/**\n * Represents an action to stop video for a call.\n * @method stopVideo\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function stopVideo (callId) {\n  return callActionHelper(actionTypes.STOP_VIDEO, callId)\n}\n\n/**\n * Represents the finish of an action to stop video for a call.\n * @method stopVideoFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} [error] The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function stopVideoFinish (callId, error) {\n  return callActionHelper(actionTypes.STOP_VIDEO_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to hold a call.\n * @method holdCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function holdCall (callId) {\n  return callActionHelper(actionTypes.HOLD_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to hold a call.\n * @method holdCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function holdCallFinish (callId, error) {\n  return callActionHelper(actionTypes.HOLD_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to unhold a call.\n * @method unHoldCall\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function unHoldCall (callId) {\n  return callActionHelper(actionTypes.UNHOLD_CALL, callId)\n}\n\n/**\n * Represents the finish of an action to unhold a call.\n * @method unHoldCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function unHoldCallFinish (callId, error) {\n  return callActionHelper(actionTypes.UNHOLD_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to start screensharing over a call.\n * @method startScreenshare\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} params\n * @param  {Number} [params.width=1024] The width of the screen to request.\n * @param  {Number} [params.height=768] The height of the screen to request.\n * @param  {Number} [params.frameRate=15] The number of frames per second to request.\n * @returns {Object} A flux standard action.\n */\nexport function startScreenshare (callId, params = {}) {\n  return callActionHelper(actionTypes.START_SCREENSHARE, callId, {\n    callInfo: {\n      screenshareOptions: params\n    }\n  })\n}\n\n/**\n * Represents the finish of an action to start screensharing over a call.\n * @method startScreenshareFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @param  {Object} params\n * @param  {Number} [params.width=1024] The width of the screen to request.\n * @param  {Number} [params.height=768] The height of the screen to request.\n * @param  {Number} [params.frameRate=15] The number of frames per second to request.\n * @returns {Object} A flux standard action.\n */\nexport function startScreenshareFinish (callId, params, error) {\n  return callActionHelper(actionTypes.START_SCREENSHARE_FINISH, callId, {\n    callInfo: {\n      screenshareOptions: params\n    },\n    error\n  })\n}\n\n/**\n * Represents an action to stop screensharing over a call.\n * @method stopScreenshare\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function stopScreenshare (callId) {\n  return callActionHelper(actionTypes.STOP_SCREENSHARE, callId)\n}\n\n/**\n * Represents the finish of an action to stop screensharing over a call.\n * @method stopScreenshareFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function stopScreenshareFinish (callId, error) {\n  return callActionHelper(actionTypes.STOP_SCREENSHARE_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents an action to send a DTMF tone over a call.\n * @method sendDTMF\n * @param  {string} callId The ID of the call being acted on.\n * @param {string} tone DTMF tone to send.\n * @returns {Object} A flux standard action.\n */\nexport function sendDTMF (callId, tone) {\n  return callActionHelper(actionTypes.SEND_DTMF, callId, {\n    params: { tone }\n  })\n}\n\n/**\n * Represents the finish of an action to send a DTMF tone.\n * Error action only.\n * @method sendDTMFFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error\n * @returns {Object} A flux standard action.\n */\nexport function sendDTMFFinish (callId, error) {\n  var payload = new Error(error)\n  payload.callId = callId\n\n  return {\n    type: actionTypes.SEND_DTMF_FINISH,\n    error: true,\n    payload\n  }\n}\n\n/**\n * Represents the request to send custom parameters.\n * @method sendCustomParameters\n * @param  {string} callId The ID of the call being acted on.\n * @returns {Object} A flux standard action.\n */\nexport function sendCustomParameters (callId) {\n  return callActionHelper(actionTypes.SEND_CUSTOM_PARAMETERS, callId)\n}\n\n/**\n * Represents the finish of an action to send custom parameters.\n * Error action only.\n * @method sendCustomParametersFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function sendCustomParametersFinish (callId, error) {\n  var payload = new Error(error)\n  payload.callId = callId\n\n  return {\n    type: actionTypes.SEND_CUSTOM_PARAMETERS_FINISH,\n    error: true,\n    payload\n  }\n}\n\n/**\n * Represents the request to forward an incoming call.\n * @method forwardCall\n * @param  {string} callId The ID of the call being acted on.\n * @param  {string} destination The user the call is to be forwarded to.\n * @returns {Object} A flux standard action.\n */\nexport function forwardCall (callId, destination) {\n  return callActionHelper(actionTypes.FORWARD_CALL, callId, {\n    params: { destination }\n  })\n}\n\n/**\n * Represents the finish of an action to forward a call.\n * @method forwardCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * * @returns {Object} A flux standard action.\n */\nexport function forwardCallFinish (callId, error) {\n  return callActionHelper(actionTypes.FORWARD_CALL_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents the request to transfer a call (direct transfer).\n * @method directTransfer\n * @param  {string} callId The ID of the call being acted on.\n * @param  {string} destination The user the call is to be transferred to.\n * @returns {Object} A flux standard action.\n */\nexport function directTransfer (callId, destination) {\n  return callActionHelper(actionTypes.DIRECT_TRANSFER, callId, {\n    params: { destination }\n  })\n}\n\n/**\n * Represents the finish of an action to transfer a call.\n * @method directTransferFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * * @returns {Object} A flux standard action.\n */\nexport function directTransferFinish (callId, error) {\n  return callActionHelper(actionTypes.DIRECT_TRANSFER_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents the request to transfer a call (consultative transfer).\n * @method consultativeTransfer\n * @param  {string} callId The ID of the call being acted on.\n * @param  {string} destination The callId to be transferred to.\n * @returns {Object} A flux standard action.\n */\nexport function consultativeTransfer (callId, destination) {\n  return callActionHelper(actionTypes.CONSULTATIVE_TRANSFER, callId, {\n    params: { destination }\n  })\n}\n\n/**\n * Represents the finish of an action to transfer a call.\n * @method consultativeTransferFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Object} error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function consultativeTransferFinish (callId, error) {\n  return callActionHelper(actionTypes.CONSULTATIVE_TRANSFER_FINISH, callId, {\n    error\n  })\n}\n\n/**\n * Represents the request to join two calls.\n * @method joinCall\n * @param  {string} callId The ID of the call being acted on.\n * @param  {string} destination The callId to be joined with.\n * @returns {Object} A flux standard action.\n */\nexport function joinCall (callId, destination, callInfo) {\n  return callActionHelper(actionTypes.JOIN_CALL, callId, {\n    callInfo,\n    params: { destination }\n  })\n}\n\n/**\n * Represents the finish of an action to join two calls.\n * @method joinCallFinish\n * @param  {string} callId The ID of the call being acted on.\n * @param  {Array} joinedCalls List of call IDs that were joined.\n * @param  {Object} $2\n * @param  {Object} $2.callInfo Call state properties.\n * @param  {Object} $2.error The error object, in the case of an error.\n * @returns {Object} A flux standard action.\n */\nexport function joinCallFinish (callId, joinedCalls, { callInfo, error }) {\n  return callActionHelper(actionTypes.JOIN_CALL_FINISH, callId, {\n    error,\n    callInfo,\n    params: { joinedCalls }\n  })\n}\n\n/**\n * Represents a request to start the anonymous call process.\n * @method makeAnonymousCall\n * @param  {string} callee       Full user ID of the call recipient.\n * @param  {string} callId       A unique identifier for the call.\n * @param  {Object} credentials  Information needed to validate a token anonymous call.\n * @param  {Object} [options={}] Call options.\n * @returns {Object} A flux standard action.\n */\nexport function makeAnonymousCall (callee, callId, credentials = {}, options = {}) {\n  return {\n    type: actionTypes.MAKE_CALL_ANONYMOUS,\n    payload: {\n      callee,\n      callId,\n      credentials,\n      callInfo: {\n        ...options\n      }\n    }\n  }\n}\n","const callPrefix = '@@KANDY/CALL/'\n\n/**\n * Basic call operation actions.\n */\nexport const MAKE_CALL = callPrefix + 'MAKE'\nexport const PENDING_MAKE_CALL = callPrefix + 'PENDING_MAKE'\nexport const SESSION_CREATED = callPrefix + 'SESSION_CREATED'\nexport const MAKE_CALL_FINISH = callPrefix + 'MAKE_FINISH'\n\nexport const MAKE_ANONYMOUS_CALL = callPrefix + 'MAKE_ANONYMOUS_CALL'\nexport const MAKE_ANONYMOUS_CALL_FINISH = callPrefix + 'MAKE_ANONYMOUS_CALL_FINISH'\n\nexport const CALL_INCOMING = callPrefix + 'INCOMING'\n\nexport const SEND_RINGING_FEEDBACK = callPrefix + 'SEND_RINGING_FEEDBACK'\nexport const SEND_RINGING_FEEDBACK_FINISH = callPrefix + 'SEND_RINGING_FEEDBACK_FINISH'\n\nexport const CALL_RINGING = callPrefix + 'RINGING'\nexport const SESSION_PROGRESS = callPrefix + 'SESSION_PROGRESS'\nexport const CALL_CANCELLED = callPrefix + 'CANCELLED'\n\nexport const ANSWER_CALL = callPrefix + 'ANSWER'\nexport const ANSWER_CALL_FINISH = callPrefix + 'ANSWER_FINISH'\n\nexport const REJECT_CALL = callPrefix + 'REJECT'\nexport const REJECT_CALL_FINISH = callPrefix + 'REJECT_FINISH'\n\nexport const IGNORE_CALL = callPrefix + 'IGNORE'\nexport const IGNORE_CALL_FINISH = callPrefix + 'IGNORE_FINISH'\n\nexport const CALL_ACCEPTED = callPrefix + 'ACCEPTED'\n\nexport const END_CALL = callPrefix + 'END'\nexport const END_CALL_FINISH = callPrefix + 'END_FINISH'\n\nexport const FORWARD_CALL = callPrefix + 'FORWARD_CALL'\nexport const FORWARD_CALL_FINISH = callPrefix + 'FORWARD_CALL_FINISH'\n\nexport const PENDING_OPERATION = callPrefix + 'PENDING_OPERATION'\n\n/**\n * Mid-call operation actions.\n */\n\nexport const UPDATE_CALL = callPrefix + 'UPDATE_CALL'\n\nexport const CALL_HOLD = callPrefix + 'HOLD'\nexport const CALL_HOLD_FINISH = callPrefix + 'HOLD_FINISH'\n\nexport const CALL_UNHOLD = callPrefix + 'UNHOLD'\nexport const CALL_UNHOLD_FINISH = callPrefix + 'UNHOLD_FINISH'\n\nexport const SET_CUSTOM_PARAMETERS = callPrefix + 'SET_CUSTOM_PARAMETERS'\n\nexport const SEND_CUSTOM_PARAMETERS = callPrefix + 'SEND_CUSTOM_PARAMETERS'\nexport const SEND_CUSTOM_PARAMETERS_FINISH = callPrefix + 'SEND_CUSTOM_PARAMETERS_FINISH'\n\nexport const ADD_MEDIA = callPrefix + 'ADD_MEDIA'\nexport const ADD_MEDIA_FINISH = callPrefix + 'ADD_MEDIA_FINISH'\nexport const ADD_BASIC_MEDIA = callPrefix + 'ADD_BASIC_MEDIA'\n\nexport const REMOVE_MEDIA = callPrefix + 'REMOVE_MEDIA'\nexport const REMOVE_MEDIA_FINISH = callPrefix + 'REMOVE_MEDIA_FINISH'\nexport const REMOVE_BASIC_MEDIA = callPrefix + 'REMOVE_BASIC_MEDIA'\n\nexport const RENEGOTIATE = callPrefix + 'RENEGOTIATE'\nexport const RENEGOTIATE_FINISH = callPrefix + 'RENEGOTIATE_FINISH'\n\nexport const MUSIC_ON_HOLD = callPrefix + 'MUSIC_ON_HOLD'\n\nexport const SEND_DTMF = callPrefix + 'SEND_DTMF'\nexport const SEND_DTMF_FINISH = callPrefix + 'SEND_DTMF_FINISH'\n\nexport const GET_STATS = callPrefix + 'GET_STATS'\nexport const GET_STATS_FINISH = callPrefix + 'GET_STATS_FINISH'\n\nexport const CONSULTATIVE_TRANSFER = callPrefix + 'CONSULTATIVE_TRANSFER'\nexport const PENDING_CONSULTATIVE_TRANSFER = callPrefix + 'PENDING_CONSULTATIVE_TRANSFER'\nexport const CONSULTATIVE_TRANSFER_FINISH = callPrefix + 'CONSULTATIVE_TRANSFER_FINISH'\n\nexport const DIRECT_TRANSFER = callPrefix + 'DIRECT_TRANSFER'\nexport const DIRECT_TRANSFER_FINISH = callPrefix + 'DIRECT_TRANSFER_FINISH'\n\nexport const JOIN = callPrefix + 'JOIN'\nexport const PENDING_JOIN = callPrefix + 'PENDING_JOIN'\nexport const JOIN_FINISH = callPrefix + 'JOIN_FINISH'\n\nexport const REPLACE_TRACK = callPrefix + 'REPLACE_TRACK'\nexport const REPLACE_TRACK_FINISH = callPrefix + 'REPLACE_TRACK_FINISH'\n\nexport const MEDIA_RESTART = callPrefix + 'MEDIA_RESTART'\nexport const MEDIA_RESTART_FINISH = callPrefix + 'MEDIA_RESTART_FINISH'\n\n/**\n * Miscellaneous call actions\n */\nexport const CUSTOM_PARAMETERS_RECEIVED = callPrefix + 'CUSTOM_PARAMETERS_RECEIVED'\nexport const GET_AVAILABLE_CODECS = callPrefix + 'GET_AVAILABLE_CODECS'\nexport const AVAILABLE_CODECS_RETRIEVED = callPrefix + 'AVAILABLE_CODECS_RETRIEVED'\n\n/**\n * Remote operation actions.\n */\nexport const CALL_REMOTE_HOLD_FINISH = callPrefix + 'REMOTE_HOLD_FINISH'\nexport const CALL_REMOTE_UNHOLD_FINISH = callPrefix + 'REMOTE_UNHOLD_FINISH'\nexport const REMOTE_ADD_MEDIA_FINISH = callPrefix + 'REMOTE_ADD_MEDIA_FINISH'\nexport const REMOTE_REMOVE_MEDIA_FINISH = callPrefix + 'REMOTE_REMOVE_MEDIA_FINISH'\nexport const REMOTE_START_MOH_FINISH = callPrefix + 'REMOTE_START_MOH_FINISH'\nexport const REMOTE_STOP_MOH_FINISH = callPrefix + 'REMOTE_STOP_MOH_FINISH'\nexport const REMOTE_SLOW_START = callPrefix + 'REMOTE_SLOW_START'\n\n/**\n * Turn action types.\n */\nconst turnPrefix = callPrefix + 'TURN/'\n\nexport const TURN_CHANGED = turnPrefix + 'CHANGED'\n\n/**\n * Track action types.\n */\nconst trackPrefix = callPrefix + 'TRACK/'\n\nexport const TRACK_ADDED = trackPrefix + 'ADDED'\nexport const TRACK_REMOVED = trackPrefix + 'REMOVED'\n","// Call plugin.\nimport { CALL_STATES } from '../constants'\n\n// Webrtc plugin.\nimport { getSessionById } from '../../webrtc/interface/selectors'\n\n/**\n * Call selectors.\n * Handles retrieving data from the `state.call.calls` substate.\n */\n\n/**\n * Helper function for adding track information to call state.\n * @method addTracksToCall\n * @param  {Object} state\n * @param  {Object} callState\n * @return {Object} Track augmented call state.\n */\nfunction addTracksToCall (state, callState) {\n  const session = getSessionById(state, callState.webrtcSessionId)\n  if (session) {\n    return {\n      ...callState,\n      localTracks: session.localTracks,\n      remoteTracks: session.remoteTracks\n    }\n  } else {\n    return {\n      ...callState,\n      localTracks: [],\n      remoteTracks: []\n    }\n  }\n}\n\n/**\n * Get the list of all calls this session.\n * @method getCalls\n * @param  {Object} state Redux state.\n * @return {Array} A list of all call objects.\n */\nexport function getCalls (state) {\n  // TODO: cloneDeep?\n  return state.call.calls.map(callState => addTracksToCall(state, callState))\n}\n\n/**\n * Retrieves the list of all on-going calls.\n * @method getActiveCalls\n * @param {Object} state Redux state.\n * @return {Array} A list of call objects.\n */\nexport function getActiveCalls (state) {\n  const endedStates = [CALL_STATES.ENDED, CALL_STATES.CANCELLED]\n\n  return getCalls(state).filter(call => !endedStates.includes(call.state))\n}\n\n/**\n * Get the call object of a specific call.\n * @method getCallById\n * @param  {Object} state Redux state.\n * @param  {string} callId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallById (state, callId) {\n  return getCalls(state).find(call => call.id === callId)\n}\n\n/**\n * Get the call object with a specific wrtcsSessionId (backend ID).\n * @method getCallByWrtcsSessionId\n * @param  {Object} state Redux state.\n * @param  {string} wrtcsSessionId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallByWrtcsSessionId (state, wrtcsSessionId) {\n  return getCalls(state).find(call => call.wrtcsSessionId === wrtcsSessionId)\n}\n\n/**\n * Get the call object with a specific webrtcSessionId.\n * @method getCallByWebrtcSessionId\n * @param  {Object} state Redux state.\n * @param  {string} webrtcSessionId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallByWebrtcSessionId (state, webrtcSessionId) {\n  return getCalls(state).find(call => call.webrtcSessionId === webrtcSessionId)\n}\n\n/**\n * Retrieve the call plugin's options.\n * @method getOptions\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getOptions (state) {\n  return state.config.call\n}\n\n/**\n * Retrieve TURN server/credential information.\n */\nexport function getTurnInfo (state) {\n  return state.call.turn\n}\n","import * as actionTypes from './actionTypes'\n\n/**\n * Represents a request to POST clickToCall data.\n * @method clickToCall\n * @param  {string} callId\n * @param  {string} caller\n * @param  {string} callee\n * @return {Action} A redux action.\n */\nexport function clickToCall (callId, caller, callee) {\n  return {\n    type: actionTypes.CLICK_TO_CALL,\n    payload: {\n      callId,\n      caller,\n      callee\n    }\n  }\n}\n\n/**\n * Represents that a response was received for a clickToCall request.\n * @method clickToCallFinish\n * @param  {string} callId\n * @param  {string} caller\n * @param  {string} callee\n * @param  {number} requestTime time that the request was made at\n * @param  {Boolean}  [error] A parameter to indicate if there was an issue.\n * @return {Action} A redux action.\n */\nexport function clickToCallFinish ({ callId, caller, callee, requestTime, error }) {\n  if (error) {\n    return {\n      type: actionTypes.CLICK_TO_CALL_FINISH,\n      error: true,\n      payload: {\n        error\n      }\n    }\n  } else {\n    return {\n      type: actionTypes.CLICK_TO_CALL_FINISH,\n      error: false,\n      payload: {\n        callId,\n        caller,\n        callee,\n        requestTime\n      }\n    }\n  }\n}\n","import { cloneDeep } from 'lodash/fp'\n\n// Auth selectors for backwards compatibility.\nimport { getSubscriptionInfo as getAuthSubscriptionInfo } from '../../auth/interface/selectors'\n\n// Utilities.\nimport { mergeValues } from '../../common/utils'\n\n/**\n * Retrieves the config options provided by the subscription plugin.\n * NOTE: This is only used by CPaaS currently and won't work with\n * the old auth/subscription config on link.  It will work with the new\n * auth/subscription config on link.\n * @method getSubscriptionConfig\n * @return {Object}\n */\nexport function getSubscriptionConfig (state) {\n  return cloneDeep(state.config.subscription)\n}\n\n/**\n * Retrieves the list of services that plugins have registered for.\n * @method getRegisteredServices\n * @return {Array}\n */\nexport function getRegisteredServices (state) {\n  return cloneDeep(state.subscription.registeredServices)\n}\n\n/**\n * Retrieves the open notifications channels' info and their active subscriptions.\n * @method getNotificationChannels\n * @return {Object}\n */\n// TODO: Rename this selector. It gets more than notification channels.\nexport function getNotificationChannels (state) {\n  return cloneDeep({\n    notificationChannels: state.subscription.notificationChannels,\n    subscriptions: state.subscription.subscriptions\n  })\n}\n\n/**\n * Retrieve the list of services with current subscriptions.\n * @method getSubscribedServices\n * @param {string} type the type of subscription we want to get specifically\n * @return {Array}\n */\nexport function getSubscribedServices (state, type) {\n  const info = getSubscriptionInfo(state)\n  // For backwards compatibility, make sure that this is an array. It isn't when\n  //    the old Auth plugin is being used (eg. Link v3.X).\n  let subscriptions = Array.isArray(info) ? info : [info]\n\n  // If a type was specified, filter out subscriptions of other types.\n  if (type) {\n    subscriptions = subscriptions.filter(subscription => subscription.channelType === type)\n  }\n\n  // Massage the subscriptions to be a list of service names.\n\n  // For Link, subscription.service is an array of strings (all services).\n  // For CPaaS, subscription.service is a string (single service).\n  // Process the subscriptions in a way that will provide an array of strings in\n  //    both cases.\n  return subscriptions.reduce((acc, currentSub) => {\n    return acc.concat(currentSub.service)\n  }, [])\n}\n\n/**\n * Retrieves the subscription information.\n * @method getSubscriptionInfo\n * @return {Object}\n */\nexport function getSubscriptionInfo (state) {\n  if (state.subscription) {\n    return cloneDeep(state.subscription.subscriptions)\n  } else {\n    // For backwards compatibility, also check if the authentication substate\n    //    has subscription info. It will have the info when the oldAuth plugin\n    //    is being used (eg. Link v3.X).\n    // Warning: This returns an object, unlike the above which returns an array.\n    return cloneDeep(getAuthSubscriptionInfo(state))\n  }\n}\n\n/**\n * Retrieve the list of subscriptions matching a given channel type and service name.\n * @method getSubscriptions\n * @param {string} service the name of the service we want to get specifically (e.g. smsinbound)\n * @param {string} type the type of communication channel we want to get specifically (e.g. websocket)\n * @return {Array}\n */\nexport function getSubscriptions (state, service, type) {\n  let subscriptions = state.subscription.subscriptions\n  subscriptions = subscriptions.filter(\n    subscription => subscription.service === service && subscription.channelType === type\n  )\n  return cloneDeep(subscriptions)\n}\n\n/**\n * Retrieve the subscription expiry time from config.\n * @method getSubscriptionExpiry\n * @return {number}\n */\nexport function getSubscriptionExpiry (state) {\n  const subConfig = state.config.subscription\n  const authConfig = state.config.authentication\n\n  // In order to maintain backwards compatibility with the auth plugin config\n  // we need to first check if this setting is provided in the authentication plugin\n  // config, and if not use the one from subscription plugin.  We need to check\n  // authentication config first because if no value is provided in the subscription\n  // plugin, a default value will be used and we don't want that if one is provided in\n  // the authentication plugin.\n  const expires =\n    authConfig.subscription && authConfig.subscription.expires ? authConfig.subscription.expires : subConfig.expires\n\n  return expires\n}\n\n/**\n * Retrieve the websocket info from config. We merge the websocket config\n * from auth plugin with the one from subscription plugin giving precedence to\n * the websocket config in auth plugin since we need to maintain backwards compatibility\n * with the old format config.\n * @method getSubscriptionExpiry\n * @return {number}\n */\nexport function getWebsocketConfig (state) {\n  const subConfig = state.config.subscription\n  const authConfig = state.config.authentication\n\n  // In order to support legacy configurations, we need to do the following:\n  // Take the values (including defaults) from subscription config.  Merge into\n  // that any client provided values from the authentication config.  All keys existing\n  // in authentication config will overwrite those from subscription config.  However,\n  // since defaults are not set for websocket in the authentication plugin, only client\n  // provided values for websocket will be used from authentication config and defaults\n  // will come from the subscription plugin.\n  return mergeValues(subConfig.websocket, authConfig.websocket)\n}\n","/**\n * A new conversation has been created and added to the state.\n *\n * @public\n * @memberof conversation\n * @event conversations:new\n */\nexport const CONVERSATIONS_NEW = 'conversations:new'\n\n/**\n * A change has occurred in the conversation list.\n *\n * @public\n * @memberof conversation\n * @event conversations:change\n * @param {Array} params An array of objects containing information about the conversations that have changed\n * @param {Array} params.destination The destination for messages created in this conversation.\n * @param {string} params.type The type of conversation to create. Can be one of \"chat\", \"im\", \"sms\" or \"group\"\n */\nexport const CONVERSATIONS_CHANGE = 'conversations:change'\n\n/**\n * A change has occurred in a specific conversations message list.\n * If a single message was affected/created, `messageId` will be present\n * as part of the event argument.\n *\n * @public\n * @memberof conversation\n * @event messages:change\n * @param {Object} params\n * @param {string} params.destination The destination for messages created in this conversation.\n * @param {string} params.type The type of conversation to create. Can be one of \"chat\", \"im\", \"sms\" or \"group\"\n * @param {string} [params.messageId] The ID of the message affected.\n * @param {string} [params.sender] The username of the sender of the message which caused the `messages:change` event to be triggered.\n */\nexport const MESSAGES_CHANGE = 'messages:change'\n\n/**\n * An error occurred with messaging.\n *\n * @public\n * @memberof conversation\n * @event messages:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const MESSAGES_ERROR = 'messages:error'\n","import * as actionTypes from './actionTypes'\n\n/**\n * Creates a message waiting indicator update action.\n *\n * @method mwiUpdate\n * @param {Object} $0\n * @param {string} $0.mwiEvent An mwiEvent object from spidr.\n * @param {Object} $0.error A Basic error object.\n * @returns {Object} A flux standard action.\n */\nexport function mwiUpdate ({ mwiData, error }) {\n  if (error) {\n    return {\n      type: actionTypes.MWI_UPDATE,\n      payload: error,\n      error: true\n    }\n  } else {\n    return {\n      type: actionTypes.MWI_UPDATE,\n      payload: {\n        ...mwiData\n      }\n    }\n  }\n}\n\n/**\n * Creates a fetch message waiting indicator action.\n *\n * @method fetchMwi\n * @returns {Object} A flux standard action.\n */\nexport function fetchMwi () {\n  return {\n    type: actionTypes.FETCH_MWI\n  }\n}\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves the notifications state.\n * @method getNotificationsInfo\n * @param  {String} [channel] - Specific notification channel information to retrieve.\n * @return {Object}\n */\nexport function getNotificationsInfo (state, channel = undefined) {\n  if (channel) {\n    return state.notifications[channel]\n  } else {\n    return state.notifications\n  }\n}\n\n/**\n * Retrieves notification config.\n * @method getNotificationConfig\n * @return {Object}\n */\nexport function getNotificationConfig (state) {\n  return cloneDeep(state.config.notifications)\n}\n","// Request\nimport request from '../../request/effects'\n// Logs\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Registers a device token with On-Prem services.\n * @method pushNotificationsRegistration\n * @param  {Object} connection - Information for formatting the request.\n * @param  {Object} options\n * @param  {string[]} options.services - Push service to register to; either 'google' or 'apple'.\n * @param {string} options.pushProvider - The push provider, can be either 'apple' or 'google'.\n * @param  {string} options.bundleId - The bundle id to use for registration.\n * @param  {string} options.deviceToken\n * @param {string} options.voipDeviceToken - Token for call related service.\n * @param {string} options.standardDeviceToken - Token for non-call related service.\n * @param  {string} options.clientCorrelator - Unique identifier for a client device.\n * @param {string} options.realm - The realm used by the push registration service to identify\n *                                and establish a connection with the service gateway.\n * @param {boolean} options.isProduction - If true, push notification will be sent to production. If false, push notification will be sent to sandbox.\n * @return {Object} response\n */\nexport function * pushNotificationsRegistration (\n  connection,\n  {\n    services,\n    pushProvider,\n    bundleId,\n    deviceToken,\n    voipDeviceToken,\n    standardDeviceToken,\n    clientCorrelator,\n    realm,\n    isProduction\n  }\n) {\n  const { server } = connection\n  pushProvider = pushProvider.toLowerCase()\n  const url =\n    `${server.protocol}://${server.server}:${server.port}/` +\n    `rest/version/${server.version}/` +\n    `user/${connection.username}/` +\n    'push/' +\n    pushProvider +\n    '/devices/'\n  const method = 'POST'\n  let body = {\n    bundleID: bundleId,\n    service: services,\n    clientCorrelator: clientCorrelator,\n    realm: realm,\n    isProduction: isProduction\n  }\n\n  if (pushProvider === 'apple') {\n    body.voipDeviceToken = voipDeviceToken\n    body.standardDeviceToken = standardDeviceToken\n  } else {\n    body.deviceToken = deviceToken\n  }\n\n  body = JSON.stringify(body)\n  log.debug(`Sending PUSH register request: ${method} ${url}`)\n\n  const response = yield request({ url, method, body })\n\n  let registrationResponse\n  const responseName = pushProvider + 'DeviceRegistrationResponse'\n  if (response.payload.body && response.payload.body[responseName]) {\n    registrationResponse = response.payload.body[responseName]\n  }\n\n  if (response.error) {\n    log.info('Failed to register device token for PUSH notifications.')\n    if (registrationResponse) {\n      // Handle errors from the server.\n      const statusCode = registrationResponse.statusCode\n      log.debug(`Device registration request for PUSH notifications failed with status code: ${statusCode}`)\n\n      return {\n        error: true,\n        status: statusCode,\n        text: `Failed to register device token for PUSH notifications. Code: ${statusCode}`\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Device registration request for PUSH notifications failed with message: ${message}.`)\n\n      return {\n        error: true,\n        status: response.payload.result.code,\n        text: `Failed to register device token for PUSH notifications. Error: ${response.payload.result.message}`\n      }\n    }\n  } else if (registrationResponse && registrationResponse.statusCode !== 0) {\n    log.info(`Failed to register device token for PUSH notifications. Code: ${registrationResponse.statuscode}`)\n    // TODO: Is this else-if needed?\n    return {\n      error: true,\n      status: registrationResponse.statuscode,\n      text: `Failed to register device token for PUSH notifications. Error: ${registrationResponse.statusCode}`\n    }\n  } else {\n    log.info('Successfully registered device token for PUSH notifications.')\n    return {\n      error: false,\n      ...registrationResponse\n    }\n  }\n}\n\n/**\n * De-Registers a device token with On-Prem services.\n * @method pushNotificationsDeRegistration\n * @param  {Object} connection - Information for formatting the request.\n * @param  {Object} options\n * @param  {string} options.registration\n * @return {Object} response\n */\nexport function * pushNotificationsDeRegistration (connection, { registration }) {\n  const { server } = connection\n  const url = `${server.protocol}://${server.server}:${server.port}${registration}`\n  const method = 'DELETE'\n  const responseType = 'none'\n\n  log.debug(`Sending PUSH unregister request: ${method} ${url}`)\n  const response = yield request({ url, method, responseType })\n\n  if (response.error) {\n    log.info('Failed to unregister device token for PUSH notifications.')\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body\n      log.debug(`Failed to unregister device token for PUSH notifications. Status code: ${statusCode}.`)\n      // TODO: Proper errors.\n      return {\n        error: true,\n        status: statusCode,\n        text: `Failed to unregister device token for PUSH notifications. Code: ${statusCode}.`\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Device token unregistration request failed for PUSH notifications: ${message}`)\n      // TODO: Proper error.\n      return {\n        error: true,\n        status: response.payload.result.code,\n        text: `Device token unregistration request failed for PUSH notifications: ${message}`\n      }\n    }\n  } else {\n    log.info('Successfully unregistered device token for PUSH notifications.')\n    // Successful de-register has no response.\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Fetches SDP data from a given partial URL.\n * @method fetchSDP\n * @param  {Object} partialUrl - A partial URL. Contains everything after the protocol://server:port\n * @return {Object} response A response payload\n */\nexport function * fetchSDP (connection, partialUrl) {\n  const { server } = connection\n  const method = 'GET'\n  const url = `${server.protocol}://${server.server}:${server.port}${partialUrl}`\n  log.debug(`Sending request to fetch SDP: ${method} ${url}`)\n\n  const response = yield request({\n    url,\n    method\n  })\n\n  if (!response.error) {\n    log.info('SDP fetched successfully.')\n    // TODO: test and see what this format actually is.\n    return response.payload.body\n  } else {\n    log.debug(`Failed to fetch SDP. Error is: ${JSON.stringify(response.error)}`)\n  }\n}\n","// Presence plugin.\nimport * as actionTypes from './actionTypes'\n\n// Other plugins.\nimport BasicError from '../../errors'\n\n/**\n * Update the presence for the current user\n * @param  {string} status   The status of the presence state\n * @param  {string} activity The activity to be shown as presence state\n * @param  {string} note     The note to be shown as alternative presence state\n *                           which is determined by the user. The note entry is\n *                           effective on the remote sip client when the\n *                           activity is other.\n * @return {Object}          A Flux Standard Action for UPDATE_PRESENCE\n */\nexport function updatePresence (status, activity, note) {\n  return {\n    type: actionTypes.UPDATE,\n    payload: {\n      status,\n      activity,\n      note\n    }\n  }\n}\n\nexport function updatePresenceFinish (payload) {\n  return {\n    type: actionTypes.UPDATE_FINISH,\n    error: payload instanceof Error || payload instanceof BasicError,\n    payload\n  }\n}\n\n/**\n * Get the presence for the given user(s)\n * @param  {string} users  A user id or an array of user ids.\n * @return {Object}        A Flux Standard Action for GET_PRESENCE\n */\nexport function getPresence (users) {\n  return {\n    type: actionTypes.GET,\n    payload: users\n  }\n}\n\nexport function getPresenceFinish (payload) {\n  return {\n    type: actionTypes.GET_FINISH,\n    error: payload instanceof Error || payload instanceof BasicError,\n    payload\n  }\n}\n\n/**\n * Subscribe to the presence for the given user(s)\n * @param  {string} users  A user id or an array of user ids.\n * @return {Object}        A Flux Standard Action for SUBSCRIBE_PRESENCE\n */\nexport function subscribePresence (users) {\n  return {\n    type: actionTypes.SUBSCRIBE,\n    payload: users\n  }\n}\n\nexport function subscribePresenceFinish (result) {\n  if (!Array.isArray(result.presentityUserId)) {\n    result.presentityUserId = [result.presentityUserId]\n  }\n  return {\n    type: actionTypes.SUBSCRIBE_FINISH,\n    error: result instanceof Error || result instanceof BasicError,\n    payload: result\n  }\n}\n\n/**\n * Unsubscribe from the presence for the given user(s)\n * @param  {string} users  A user id or an array of user ids.\n * @return {Object}        A Flux Standard Action for UNSUBSCRIBE_PRESENCE\n */\nexport function unsubscribePresence (users) {\n  return {\n    type: actionTypes.UNSUBSCRIBE,\n    payload: users\n  }\n}\n\nexport function unsubscribePresenceFinish (result) {\n  if (result.presentityUserId && !Array.isArray(result.presentityUserId)) {\n    result.presentityUserId = [result.presentityUserId]\n  }\n  return {\n    type: actionTypes.UNSUBSCRIBE_FINISH,\n    error: result instanceof Error || result instanceof BasicError,\n    payload: result\n  }\n}\n\n/**\n * Create a new presence list\n * @param  {string} users  A user id or an array of user ids.\n * @return {Object}        A Flux Standard Action for UNSUBSCRIBE_PRESENCE\n */\nexport function createPresenceList (users) {\n  return {\n    type: actionTypes.CREATE_PRESENCE_LIST,\n    payload: users\n  }\n}\n\n/**\n * Delete a presence list\n * @param  {string} presenceListId  The ID of the presence list to delete.\n * @return {Object}                 A Flux Standard Action for UNSUBSCRIBE_PRESENCE\n */\nexport function deletePresenceList (presenceListId) {\n  return {\n    type: actionTypes.DELETE_PRESENCE_LIST,\n    payload: presenceListId\n  }\n}\n\n/**\n * Retrieve a presence list\n * @param  {string} presenceListId  The ID of the presence list to delete.\n * @return {Object}                 A Flux Standard Action for UNSUBSCRIBE_PRESENCE\n */\nexport function getPresenceList (presenceListId) {\n  return {\n    type: actionTypes.GET_PRESENCE_LIST,\n    payload: presenceListId\n  }\n}\n\nexport function createListFinish (payload) {\n  return {\n    type: actionTypes.CREATE_PRESENCE_LIST_FINISH,\n    error: payload instanceof Error || payload instanceof BasicError,\n    payload\n  }\n}\n\nexport function presenceReceived (presence) {\n  return {\n    type: actionTypes.RECEIVED,\n    payload: presence\n  }\n}\n","export function getPresence (state, users) {\n  // If no users specified, return them all\n  if (!users) {\n    return state.presence.users\n  }\n\n  // Grab all users that match the passed in IDs, return\n  return Object.values(state.presence.users).filter(user => users.indexOf(user.userId) !== -1)\n}\n\n/**\n * Retrieves presence information for all users.\n * @method getAllPresence\n * @param  {Object} state Redux state.\n * @return {Array}  List of presence information for users.\n */\nexport function getAllPresence (state) {\n  return Object.values(state.presence.users)\n}\n\n/**\n * Retrieves the current user's self presence.\n * @method getSelfPresence\n * @param  {Object} state Redux state.\n * @return {Object} Self-presence information.\n */\nexport function getSelfPresence (state) {\n  return state.presence.self\n}\n","/**\n * The status of the presence state\n * @name STATUS\n */\nexport const STATUS = {\n  OPEN: 'open',\n  CLOSED: 'closed'\n}\n\n/**\n * The presence activity\n * @name ACTIVITY\n */\nexport const ACTIVITY = {\n  ACTIVE: 'active',\n  IDLE: 'idle',\n  AWAY: 'away',\n  LUNCH: 'lunch',\n  OTHER: 'other',\n  BUSY: 'busy',\n  VACATION: 'vacation',\n  ON_THE_PHONE: 'on-the-phone',\n  UNKNOWN: 'unknown'\n}\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves information about a sip event.\n * @method getSipEventInfo\n * @param  {string} eventType\n * @return {Object}\n */\nexport function getSipEventInfo (state, eventType) {\n  if (eventType) {\n    return cloneDeep(state.sipEvents[eventType])\n  } else {\n    return cloneDeep(state.sipEvents)\n  }\n}\n","import * as actionTypes from './actionTypes'\n\n// Helper function for formatting _FINISH actions.\nfunction finishActionHelper (actionType, { response, error }) {\n  return {\n    type: actionType,\n    error: !!error,\n    payload: error || response\n  }\n}\n\n/**\n * Represents a request to subscribe to a specific sip event.\n * @method sipEventSubscribe\n * @param  {string} eventType\n * @param  {Array}  subscribeUserList\n * @param  {string} clientCorrelator\n * @param  {Object} customParameters\n * @returns {Object} A flux standard action.\n */\nexport function sipEventSubscribe (eventType, subscribeUserList, clientCorrelator, customParameters) {\n  return {\n    type: actionTypes.SIP_EVENT_SUBSCRIBE,\n    payload: {\n      eventType,\n      subscribeUserList,\n      clientCorrelator,\n      customParameters\n    }\n  }\n}\n\n/**\n * Represents the response/error of a sip event subscription request.\n * @method sipEventSubscribeFinish\n * @param  {Object} $0\n * @param  {Object} $0.response Information about the subscription response.\n * @param  {BasicError} $0.error An error object, in the case of an issue.\n * @returns {Object} A flux standard action.\n */\nexport function sipEventSubscribeFinish ({ response, error }) {\n  return finishActionHelper(actionTypes.SIP_EVENT_SUBSCRIBE_FINISH, {\n    response,\n    error\n  })\n}\n\n/**\n * Represents a request to update a sip event subscription or resubscribe for it.\n * @method sipEventUpdate\n * @param  {string} eventType\n * @param  {Object} userLists\n * @param  {Object} customParameters\n * @returns {Object} A flux standard action.\n */\nexport function sipEventUpdate (eventType, userLists = {}, customParameters) {\n  // If no userList changes, this should just be a resubscription.\n  const isResub = Object.keys(userLists).length === 0\n  return {\n    type: actionTypes.SIP_EVENT_UPDATE,\n    payload: {\n      eventType,\n      subscribeUserList: userLists.subscribeUserList || [],\n      unsubscribeUserList: userLists.unsubscribeUserList || [],\n      customParameters\n    },\n    meta: isResub ? { isResub: true } : {}\n  }\n}\n\n/**\n * Represents the response/error of a sip event update/resub request.\n * @method sipEventUpdateFinish\n * @param  {Object} $0\n * @param  {Object} $0.response Information about the update/resub response.\n * @param  {BasicError} $0.error An error object, in the case of an issue.\n * @returns {Object} A flux standard action.\n */\nexport function sipEventUpdateFinish ({ response, error }) {\n  return finishActionHelper(actionTypes.SIP_EVENT_UPDATE_FINISH, {\n    response,\n    error\n  })\n}\n\n/**\n * Represents a request to unsubscribe from sip event subscriptions.\n * @method sipEventUnsubscribe\n * @param  {string} eventType The sip event subscription to unsubscribe from.\n * @returns {Object} A flux standard action.\n */\nexport function sipEventUnsubscribe (eventType) {\n  return {\n    type: actionTypes.SIP_EVENT_UNSUBSCRIBE,\n    payload: eventType\n  }\n}\n\n/**\n * Represents the response/error of a sip event unsubscribe request.\n * @method sipEventUnsubscribeFinish\n * @param  {Object} $0\n * @param  {Object} $0.response Information about the unsubscribe response.\n * @param  {BasicError} $0.error An error object, in the case of an issue.\n * @returns {Object} A flux standard action.\n */\nexport function sipEventUnsubscribeFinish ({ response, error }) {\n  return finishActionHelper(actionTypes.SIP_EVENT_UNSUBSCRIBE_FINISH, {\n    response,\n    error\n  })\n}\n\n/**\n * Represents that a sip event notification has been received.\n * @method sipEventReceived\n * @param  {Object} sipEvent\n * @param {string} callId\n * @returns {Object} A flux standard action.\n */\nexport function sipEventReceived (sipEvent, callId) {\n  return {\n    type: actionTypes.SIP_EVENT_RECEIVED,\n    payload: {\n      event: sipEvent,\n      callId\n    }\n  }\n}\n","import * as actionTypes from './actionTypes'\n\n/**\n * Action for fetching the current user's profile data.\n * @returns {Object} A flux standard action\n */\nexport function fetchSelfInfo () {\n  return {\n    type: actionTypes.FETCH_SELF_INFO\n  }\n}\n\n/**\n * The finishing action to follow the FETCH_SELF_INFO action\n * @returns {Object} A flux standard action representing the FETCH_SELF_INFO_FINISH action\n */\nexport function fetchSelfInfoFinish (self, error) {\n  return {\n    type: actionTypes.FETCH_SELF_INFO_FINISH,\n    payload: error || self,\n    error: Boolean(error)\n  }\n}\n\n/**\n *\n * @param {string} userId The URI uniquely identifying the user.\n * @returns {Object} A flux standard action representing the FETCH_USER action\n */\nexport function fetchUser (userId) {\n  return {\n    type: actionTypes.FETCH_USER,\n    payload: userId\n  }\n}\n\n/**\n * Create a finish action to follow a FETCH_USER action.\n *\n * @param {Object} user A user object\n * @param {Object} [error] An error object.\n * @returns {Object} A flux standard action representing the USER_FETCH_FINISH action.\n */\nexport function fetchUserFinish (user, error) {\n  return {\n    type: actionTypes.FETCH_USER_FINISH,\n    payload: error || user,\n    error: Boolean(error)\n  }\n}\n\n/**\n * Create an action that searches the directory.\n *\n * @param {Object} filters Query filter options.\n * @param {string} [filters.name] Matches firstName or lastName.\n * @param {string} [filters.firstName] Matches firstName.\n * @param {string} [filters.lastName] Matches lastName.\n * @param {string} [filters.userName] Matches userName.\n * @param {string} [filters.phoneNumber] Matches phoneNumber.\n * @param {Object} [options] Sorting options\n * @param {string} [options.sortBy] The attribute upon which to sort results. This can be any of the above listed filters which describe a user attribute.\n * @param {string} [options.order] Order by which to return results. Can be one of \"asc\" or \"desc\".\n * @param {number} [options.max] The maximum number of results to return.\n * @param {string} [options.next] The pointer for a chunk of results, which may be returned from other a previous query.\n * @returns {Object} A flux standard action representing the SEARCH_DIRECTORY action.\n */\nexport function searchDirectory (filters, options) {\n  return {\n    type: actionTypes.SEARCH_DIRECTORY,\n    payload: { filters, options }\n  }\n}\n\n/**\n * Create a finish action to follow the SEARCH_DIRECTORY action.\n *\n * @param {Object} $0 A dictionary object of parameters\n * @param {Array} [$0.users] The user objects\n * @param {Object} [$0.error] An error object.\n * @returns {Object} A flux standard action representing the DIRECTORY_CHANGED action.\n */\nexport function searchDirectoryFinish ({ users, error }) {\n  return {\n    type: actionTypes.SEARCH_DIRECTORY_FINISH,\n    payload: error || users,\n    error: Boolean(error)\n  }\n}\n","import * as actionTypes from './actionTypes'\n\n/**\n * Refresh the contact list.\n * @returns {Object} A flux standard action representing the REFRESH_CONTACTS action.\n */\nexport function refreshContacts () {\n  return {\n    type: actionTypes.REFRESH_CONTACTS,\n    payload: null\n  }\n}\n\n/**\n * The finishing action which follows the REFRESH_CONTACTS action\n * @param {Object} $0\n * @param  {Array} [$0.contacts] An array of contact objects.\n * @param  {Object} [$0.error] An error object. Only present if an error occurred.\n * @returns {Object} A flux standard action representing the REFRESH_CONTACTS_FINISH action.\n */\nexport function refreshContactsFinish ({ contacts, error }) {\n  return {\n    type: actionTypes.REFRESH_CONTACTS_FINISH,\n    payload: error || contacts,\n    error: Boolean(error)\n  }\n}\n\n/**\n * Adds a contact to the Address Book\n * @param {Object} contact The contact object.\n * @returns {Object} A flux standard action representing the ADD_CONTACT action.\n */\nexport function addContact (contact) {\n  return {\n    type: actionTypes.ADD_CONTACT,\n    payload: contact\n  }\n}\n\n/**\n * The finishing action which follows the ADD_CONTACT action\n * @param {Object} $0\n * @param {Object} [$0.contact] The contact object.\n * @param {Object} [$0.error] An error object. Only present if an error occurred.\n * @returns {Object} A flux standard action representing the ADD_CONTACT_FINISH action.\n */\nexport function addContactFinish ({ contact, error }) {\n  return {\n    payload: error || contact,\n    error: Boolean(error),\n    type: actionTypes.ADD_CONTACT_FINISH\n  }\n}\n\n/**\n * Fetch a contact from the user's personal address book\n * @param {string} contactId The ID of the contact to be fetched\n * @returns {Object} A flux standard action representing the FETCH_CONTACT action.\n */\nexport function fetchContact (contactId) {\n  return {\n    type: actionTypes.FETCH_CONTACT,\n    payload: contactId\n  }\n}\n\n/**\n * The finishing action which follows a FETCH_CONTACT action\n * @param {Object} $0\n * @param {Object} [$0.contact] The contact object.\n * @param {Object} [$0.error] A Basic error object\n * @returns {Object} A flux standard action representing the FETCH_CONTACT_FINISH action.\n */\nexport function fetchContactFinish ({ contact, error }) {\n  return {\n    type: actionTypes.FETCH_CONTACT_FINISH,\n    payload: error || contact,\n    error: Boolean(error)\n  }\n}\n\n/**\n * Removes a contact from the Address Book\n * @param {string} contactId The id of the contact whom it has been requested to delete from the address book\n * @returns {Object} A flux standard action representing the REMOVE_CONTACT action.\n */\nexport function removeContact (contactId) {\n  return {\n    type: actionTypes.REMOVE_CONTACT,\n    payload: contactId\n  }\n}\n\n/**\n * The finishing action which follows a REMOVE_CONTACT action\n * @param {Object} $0\n * @param {string} [$0.contactId] The id of the contact whom it has been requested to delete from the address book\n * @param {Object} [$0.error] An error object. Only present if an error occurred.\n * @returns {Object} A flux standard action representing the REMOVE_CONTACT_FINISH action.\n */\nexport function removeContactFinish ({ contactId, error }) {\n  return {\n    type: actionTypes.REMOVE_CONTACT_FINISH,\n    payload: contactId || error,\n    error: !!error\n  }\n}\n\n/**\n * Updates the data for a contact in the Address Book\n * @param {Object} contact The contact object. The contact object must include the ID of the contact being targeted for an update action.\n * @returns {Object} A flux standard action representing the UPDATE_CONTACT action.\n */\nexport function updateContact (contact) {\n  return {\n    type: actionTypes.UPDATE_CONTACT,\n    payload: { contact }\n  }\n}\n\n/**\n * The finishing action which follows a UPDATE_CONTACT action\n * @param {Object} $0\n * @param {Object} [$0.contact] The contact object.\n * @param {Object} [$0.error] A Basic error object\n * @returns {Object} A flux standard action representing the UPDATE_CONTACT_FINISH action.\n */\nexport function updateContactFinish ({ contact, error }) {\n  return {\n    type: actionTypes.UPDATE_CONTACT_FINISH,\n    payload: error || contact,\n    error: !!error\n  }\n}\n","import { cloneDeep } from 'lodash/fp'\n\n/*\n * Redux-saga selector functions.\n * Used with the `select` effect in sagas to Retrieves\n *      specific portions of the state.\n */\n\n/**\n * Gets the contacts from state.\n * @method getContacts\n * @return {Object}\n */\nexport function getContacts (state) {\n  return cloneDeep(state.users.contacts)\n}\n\n/**\n * Gets a contact from the state whose ID matches the supplied parameter\n * @method getContact\n * @return {Object}\n */\nexport function getContact (state, id) {\n  return cloneDeep(state.users.contacts[id])\n}\n\n/**\n * Gets the users from state.\n * @method getUsers\n * @return {Array<User>} An array of all the User objects.\n */\nexport function getUsers (state) {\n  const allUsers = cloneDeep(state.users.users)\n  return Object.values(allUsers)\n}\n\n/**\n * Gets the users from state.\n * @method getUser\n * @return {Object}\n */\nexport function getUser (state, name) {\n  return cloneDeep(state.users.users[name])\n}\n","// Contacts actions\n/**\n * A new contact has been added to the address book.\n * @public\n * @memberof contacts\n * @event contacts:new\n * @param {Object} contact The new contact.\n */\nexport const CONTACTS_NEW = 'contacts:new'\n\n/**\n * An error occurred while performing a contact operation.\n * @public\n * @memberof contacts\n * @event contacts:error\n * @param {Object} params\n * @param {Object} params.error The Basic error object.\n */\nexport const CONTACTS_ERROR = 'contacts:error'\n\n/**\n * The contacts list has changed.\n * @public\n * @memberof contacts\n * @event contacts:change\n * @example\n * client.on('contacts:change', function () {\n *    // Get the updated list of contacts.\n *    const contacts = client.contacts.getAll()\n *    ...\n * })\n */\nexport const CONTACTS_CHANGE = 'contacts:change'\n\n// Users actions\n/**\n * The directory has changed.\n * @public\n * @static\n * @memberof user\n * @event directory:change\n * @param {Object} params\n * @param {Array<user.User>} params.results The Users' information returned by the\n *    operation.\n */\nexport const DIRECTORY_CHANGE = 'directory:change'\n\n/**\n * An error occurred while performing a directory operation.\n * @public\n * @memberof user\n * @event directory:error\n * @param {Object} params\n * @param {Object} params.error The Basic error object.\n */\nexport const DIRECTORY_ERROR = 'directory:error'\n\n/**\n * A change has occurred in the users list\n * @public\n * @static\n * @memberof user\n * @event users:change\n * @param {Object} params\n * @param {Array<user.User>} params.results The Users' information returned by the\n *    operation.\n */\nexport const USERS_CHANGE = 'users:change'\n\n/**\n * An error occurred while retrieving the user information\n * @public\n * @static\n * @memberof user\n * @event users:error\n * @param {Object} params\n * @param {Object} params.error params.error The Basic error object.\n */\nexport const USERS_ERROR = 'users:error'\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","module.exports = curry;\n\n/*\n  function add(a, b, c) {\n    return a + b + c;\n  }\n  curry(add)(1)(2)(3); // 6\n  curry(add)(1)(2)(2); // 5\n  curry(add)(2)(4, 3); // 9\n\n  function add(...args) {\n    return args.reduce((sum, n) => sum + n, 0)\n  }\n  var curryAdd4 = curry(add, 4)\n  curryAdd4(1)(2, 3)(4); // 10\n\n  function converter(ratio, input) {\n    return (input*ratio).toFixed(1);\n  }\n  const curriedConverter = curry(converter)\n  const milesToKm = curriedConverter(1.62);\n  milesToKm(35); // 56.7\n  milesToKm(10); // 16.2\n*/\n\nfunction curry(fn, arity) {\n  return function curried() {\n    if (arity == null) {\n      arity = fn.length;\n    }\n    var args = [].slice.call(arguments);\n    if (args.length >= arity) {\n      return fn.apply(this, args);\n    } else {\n      return function() {\n        return curried.apply(this, args.concat([].slice.call(arguments)));\n      };\n    }\n  };\n}\n","import commonIndex from '../core'\n\n// Plugins\nimport basePlugins from '../core/basePlugins'\nimport auth from '../../packages/kandy/src/auth/uc'\nimport call from '../../packages/kandy/src/call/oldLink' // TODO: Update when new Link is done.\nimport callHistory from '../../packages/kandy/src/callHistory'\nimport clickToCall from '../../packages/kandy/src/clickToCall'\nimport connectivity from '../../packages/kandy/src/connectivity/link'\nimport messaging from '../../packages/kandy/src/messaging/uc'\nimport mwi from '../../packages/kandy/src/mwi/link'\nimport notifications from '../../packages/kandy/src/notifications/link'\nimport presence from '../../packages/kandy/src/presence/link'\nimport sipEvents from '../../packages/kandy/src/sipEvents'\nimport users from '../../packages/kandy/src/users/link'\nimport request from '../../packages/kandy/src/request'\nimport '../../packages/kandy/src/docs/docs'\n\nimport createCodecRemover from '../../packages/fcs/src/js/sdp/codecRemover'\n\nconst defaultPlugins = [\n  ...basePlugins,\n  { name: 'authentication', fn: auth },\n  { name: 'call', fn: call },\n  { name: 'callHistory', fn: callHistory },\n  { name: 'clickToCall', fn: clickToCall },\n  { name: 'connectivity', fn: connectivity },\n  { name: 'messaging', fn: messaging },\n  { name: 'mwi', fn: mwi },\n  { name: 'notifications', fn: notifications },\n  { name: 'presence', fn: presence },\n  { name: 'sipEvents', fn: sipEvents },\n  { name: 'users', fn: users },\n  { name: 'request', fn: request }\n]\n\nfunction root (options = {}, plugins = []) {\n  console.info(\n    '%cKandy.js 3.x is deprecated and will stop being supported as of November 1, 2020. Please plan to upgrade to 4.x before then. Here it is: ' +\n      'https://github.com/Kandy-IO/kandy-uc-js-sdk',\n    'font-weight:bold'\n  )\n\n  return commonIndex(options, [...defaultPlugins, ...plugins])\n}\n\n// Alias 'create' to be equal to the root function\nroot.create = root\n\nroot.sdpHandlers = {\n  createCodecRemover\n}\n\n// Export this way as a work-around, so it can be used as `<export>();`.\n// See: https://github.com/webpack/webpack/issues/706\nmodule.exports = root\n","// Disabling eslint for the next comment as we want to be able to use a disallowed word\n// eslint-disable-next-line no-warning-comments\n/**\n * The SDK creation factory. Create an instance of the SDK by calling this factory with the desired configurations.\n * The SDK instance will be referred as 'api' throughout the rest of the documentation content.\n * @public\n * @method create\n * @param {config} config The configuration object.\n * @return {api} The SDK instance.\n * @example\n * // Instantiate the SDK.\n * import { create } from 'kandy'\n * const client = create({\n *     authentication: { ... },\n *     logs: { ... },\n *     ...\n * });\n * // Use the SDK's API.\n * client.on( ... );\n */\n\n/**\n * The 'api' is the type returned by the create function.\n * It contains various top-level functions that pertain to SDK global instance\n * as well as several nested namespaces that pertain to various features (e.g. call, contacts, presence, etc).\n *\n * @public\n * @module api\n */\n\n/**\n * The configuration object. This object defines what different configuration\n * values you can use when instantiating the SDK using the {@link create} function.\n * @public\n * @module config\n */\n\n// Disabling eslint for the next comment as we want to be able to use a disallowed word\n// eslint-disable-next-line no-warning-comments\n/**\n * A set of {@link call.SdpHandlerFunction SdpHandlerFunction}s for manipulating SDP information.\n * These handlers are used to customize low-level call behaviour for very specific\n * environments and/or scenarios.\n *\n * Note that SDP handlers are exposed on the entry point of the SDK. They can be added during\n * initialization of the SDK using the {@link #configconfigcall config.call.sdpHandlers} configuration\n * parameter. They can also be set after the SDK's creation by using the\n * {@link call.setSdpHandlers} function.\n *\n * @public\n * @namespace sdpHandlers\n * @example\n * import { create, sdpHandlers } from 'kandy';\n * const codecRemover = sdpHandlers.createCodecRemover(['VP8', 'VP9'])\n * const client = create({\n *   call: {\n *     sdpHandlers: [ codecRemover, <Your-SDP-Handler-Function>, ...]\n *   }\n * })\n * @example\n * // Through the Call API post-instantiation\n * client.call.setSdpHandlers([ codecRemover, <Your-SDP-Handler-Function>, ...])\n */\n\n/**\n * An object that represents a selector to match codecs of an RTP map in SDP.\n *\n * @public\n * @static\n * @typedef {Object} CodecSelector\n * @memberof sdpHandlers\n * @property {string} name The name of the codec.\n * @property {Array<string>} fmtpParams An array of strings to match against the \"a=fmtp\" format parameters for the corresponding codec.\n *                                      All of the elements in the array must be contained in the \"a=fmtp\" attribute in order to be a match.\n */\n\n/**\n * This function creates an SDP handler that will remove codecs matching the selectors specified for SDP offers and answers.\n *\n * In some scenarios it's necessary to remove certain codecs being offered by the SDK to remote parties. For example, some legacy call services limit the SDP\n * length (usually to 4KB) and will reject calls that have SDP size above this amount.\n *\n * While creating an SDP handler would allow a user to perform this type of manipulation, it is a non-trivial task that requires in-depth knowledge of WebRTC SDP.\n *\n * To facilitate this common task, the createCodecRemover function creates a codec removal handler that can be used for this purpose. Applications can use this codec\n * removal handler in combination with the {@link call.getAvailableCodecs call.getAvailableCodecs} function in order to build logic to determine the best codecs to use\n * for their application.\n *\n * @public\n * @memberof sdpHandlers\n * @method createCodecRemover\n * @param {Array<CodecSelector> | Array<string>} codecs A list of codec selectors to remove from the SDP. If passing a list of strings, they will be converted into\n *                                                      codec selectors that correspond to those names without any extra FMTP parameters.\n * @returns {call.SdpHandlerFunction} The resulting SDP handler that will remove the codec.\n * @example\n * import { create, sdpHandlers } from 'kandy';\n *\n * const codecRemover = sdpHandlers.createCodecRemover([\n *   // Remove all VP8 and VP9 codecs.\n *   'VP8',\n *   'VP9',\n *\n *   // Remove all H264 codecs with the specified FMTP parameters.\n *   {\n *     name: 'H264',\n *     fmtpParams: ['profile-level-id=4d0032', 'packetization-mode=1']\n *   }\n * ])\n *\n * const client = create({\n *   call: {\n *     sdpHandlers: [codecRemover]\n *   }\n * })\n *\n */\n\n/*\n * Index template file that is used to create pre-defined version of the SDK.\n */\nimport { factory } from '../../packages/kandy/src/factory'\nimport { _ } from 'lodash/fp'\n\n// This is a hack to fix an issue where Lodash will add itself to\n// the window scope even if it's loaded via ES6. You can remove this when\n// we have an answer to https://github.com/lodash/lodash/issues/1798 .\n// eslint-disable-next-line\nif (_) _.noConflict()\n\nexport default function commonIndex (options = {}, plugins = []) {\n  return factory(plugins, options)\n}\n","// Libraries.\nimport { combineReducers, createStore, applyMiddleware, compose as composeWithoutDevTools } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport createSagaMiddleware from 'redux-saga'\nimport { map, merge } from 'lodash/fp'\nimport { fork } from 'redux-saga/effects'\nimport compose from '@stamp/compose'\n\n// Helpers.\nimport { autoRestart, mergeValues } from './common/utils'\nimport { getVersion } from './common/version'\n\n// Plugins.\nimport { logManager } from './logs'\n\n// Parse and/or Validate\nimport { validation as v8n, parse } from './common/validation'\nconst log = logManager.getLogger('FACTORY')\n\nconst factoryDefaults = {\n  enableReduxDevTools: false,\n  reduxDevToolsName: 'WebRTC SDK',\n  allowProxy: false\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  enableReduxDevTools: v8n.boolean(),\n  reduxDevToolsName: v8n.string(),\n  allowProxy: v8n.boolean()\n})\nconst parseOptions = parse('common', v8nValidation)\n\n/**\n * Creates an instance of the SDK with the specified plugins and configuration.\n *\n * @param {Function[]} pluginFactories - The list of factories to create plugins for this instance of the SDK.\n * @param {Object} [sdkOptions] - Factory and plugin options\n * @param {Object} [sdkOptions.common] - Factory specific options\n * @param {boolean} [sdkOptions.common.enableReduxDevTools] - A flag to indicate whether or not to include Redux Dev Tools\n * @param {string}  [sdkOptions.common.reduxDevToolsName=\"WebRTC SDK\"] - The name of the store that will show up in the\n *                                          Redux Dev tools. This helps differentiate the SDK from other redux instances.\n * @param {boolean} [sdkOptions.allowProxy] Whether the factory should allow the Proxy Plugin to be included.\n */\nexport function factory (pluginFactories, sdkOptions = {}) {\n  // Log the SDK's version (templated by webpack) on initialization.\n  const version = getVersion()\n  log.info(`SDK version: ${version}`)\n\n  // Separate factory and plugin options.\n  let { common: options, ...pluginOptions } = sdkOptions\n\n  options = mergeValues(factoryDefaults, options)\n  parseOptions(options)\n\n  var sagas = []\n  var store\n  var middlewares = []\n  const apis = []\n  var reducers = {}\n  var initSagas = []\n  var taskDescriptor\n  const shared = {}\n  var context = {\n    capabilities: [],\n    api: {},\n    primitives: {},\n    getState () {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      if (destroyedSDK) {\n        throw Error('State is not available if the SDK has been destroyed')\n      }\n      return store.getState()\n    },\n    dispatch (...args) {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      return store.dispatch(...args)\n    },\n    subscribe (fn) {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      return store.subscribe(fn)\n    }\n  }\n\n  // Special case middleware for logging.\n  var loggerMiddleware\n\n  var destroyedSDK = false\n  var destroyedSDKMiddleware = store => next => action => {\n    if (destroyedSDK) {\n      return null\n    } else {\n      return next(action)\n    }\n  }\n\n  // Instantiate the plugins.\n  let plugins = map(function (plugin) {\n    // Make sure the plugin factory is actually a function.\n    if (!plugin || !plugin.fn || typeof plugin.fn !== 'function') {\n      return false\n    }\n\n    return plugin.fn(pluginOptions[plugin.name])\n  }, pluginFactories)\n\n  // Remove undefined plugins. Those are plugins that failed to load for some reason.\n  plugins = plugins.filter(plugin => Boolean(plugin))\n\n  // Run all the plugins to build the context.\n  // Set up each plugin component individually.\n  plugins.forEach(function (plugin) {\n    // Ignore the Proxy Plugin if not configured to allow it.\n    if (plugin.name === 'proxy' && !options.allowProxy) {\n      plugin = {}\n    }\n\n    if (plugin.capabilities) {\n      context.capabilities = context.capabilities.concat(plugin.capabilities)\n    }\n    if (plugin.reducer) {\n      reducers[plugin.name] = plugin.reducer\n    }\n    if (plugin.middleware) {\n      if (plugin.name === 'logs') {\n        loggerMiddleware = plugin.middleware\n      } else {\n        middlewares.push(() => plugin.middleware(context)) // pass context to middleware instead of store\n      }\n    }\n    if (plugin.api) {\n      apis.push(plugin.api)\n    }\n    if (plugin.init) {\n      initSagas.push(plugin.init)\n    }\n    if (plugin.sagas) {\n      sagas = sagas.concat(plugin.sagas)\n    }\n    // TODO: Revisit this. Looks a little extreme for a couple stamps...\n    if (plugin.mixins) {\n      // Define a base stamp that all stamps will be composed with.\n      //      This gives stamps access to the factory's context.\n      const baseStamp = {\n        propertyDescriptors: {\n          context: {\n            get () {\n              return context\n            }\n          }\n        }\n      }\n      for (const objName in plugin.mixins) {\n        if (plugin.mixins.hasOwnProperty(objName)) {\n          // Ensure that every stamp starts with the base stamp.\n          if (!context.primitives.hasOwnProperty(objName)) {\n            context.primitives[objName] = baseStamp\n          }\n          context.primitives[objName] = compose(context.primitives[objName], plugin.mixins[objName])\n        }\n      }\n    }\n\n    /**\n     * Plugins are allowed to share data between them by providing it to the\n     *    factory. All shared data will be collected as a single object, and\n     *    that object will be provided to plugins during their `init` saga.\n     * It is intended that a plugin can \"override\" another plugin's shared data.\n     * The order that plugins are given to the factory matters because of this.\n     * `plugin.shared` is expected to be an object.\n     */\n    if (plugin.shared) {\n      for (const key in plugin.shared) {\n        if (shared[key]) {\n          log.debug(`Replacing shared ${key} with ${key} from ${plugin.name}.`)\n          shared[key] = plugin.shared[key]\n        } else {\n          shared[key] = plugin.shared[key]\n        }\n      }\n    }\n  })\n\n  if (loggerMiddleware) {\n    // The redux logger middleware should be the last middleware.\n    middlewares.push(() => loggerMiddleware(context))\n  }\n\n  // Compose the root saga\n  function * rootSaga () {\n    // Give all plugins an opportunity to initialize themselves.\n    // Note: Sagas have not been forked yet, so init cannot use them\n    //      by dispatching actions. See PR #698.\n    // Note: If anything asynchronous is done in an init, it MUST be\n    //      non-blocking (ie. use fork, not call). See PR #699.\n    for (const init of initSagas) {\n      // Note: Yield directly to init. If redux-saga's `call()` is used, then the\n      //      factory returns before the instance is done all inits. See PR #699.\n      // Provide the factory's shared data (from plugins) to the `init` saga.\n      yield * init(shared)\n    }\n    // Run all of the sagas provided by implementation plugins.\n    for (const saga of sagas) {\n      yield fork(autoRestart(saga))\n    }\n  }\n\n  // Alias our composeMiddleware to conditionally include devTools as per the provided configuration flag\n  const composeMiddleware = options.enableReduxDevTools\n    ? composeWithDevTools({ name: options.reduxDevToolsName })\n    : composeWithoutDevTools\n\n  // don't include saga stuff if there are no sagas.\n  if (initSagas.length + sagas.length > 0) {\n    var sagaMiddleware = createSagaMiddleware()\n\n    // Create the store with the plugins (incl. sagas) and with the configuration as the initial state.\n    store = createStore(\n      combineReducers(reducers),\n      composeMiddleware(applyMiddleware(destroyedSDKMiddleware, sagaMiddleware, ...middlewares))\n    )\n\n    taskDescriptor = sagaMiddleware.run(rootSaga)\n  } else {\n    // Create the store with the plugins (excl. sagas) and with the configuration as the initial state.\n    store = createStore(\n      combineReducers(reducers),\n      composeMiddleware(applyMiddleware(destroyedSDKMiddleware, ...middlewares))\n    )\n  }\n\n  // Use the plugins' API factories to build the public API.\n  //    Do this after the store has been created.\n  apis.forEach(apiFactory => {\n    context.api = merge(context.api, apiFactory(context))\n  })\n\n  // setup the API\n  const publicAPI = {\n    ...context.api,\n    state: {\n      get: function () {\n        return store.getState()\n      },\n      subscribe: function (...args) {\n        return store.subscribe(...args)\n      }\n    },\n    /**\n     * Return all the capabilities currently available to the plugin system.\n     *\n     * @memberof api\n     * @method getCapabilities\n     */\n    getCapabilities () {\n      return context.capabilities\n    },\n    /**\n     * Returns the current version of the API.\n     *\n     * @public\n     * @memberof api\n     * @method getVersion\n     */\n    getVersion () {\n      return version\n    },\n    // Disabling eslint for the next comment as we want to be able to use a disallowed word\n    // eslint-disable-next-line no-warning-comments\n    /**\n     * Destroys the SDK, and removes its state, rendering the SDK unusable.\n     * Useful when a user logs out and their call data needs to be destroyed.\n     * The SDK must be recreated to be usable again.\n     * The destroy command is async, and will happen on the next tick\n     *   so as not to interfere with any ongoing events.\n     *\n     * @public\n     * @memberof api\n     * @method destroy\n     * @example\n     * // Instantiate the SDK.\n     * import { create } from 'kandy'\n     * const config = {\n     *     authentication: { ... },\n     *     logs: { ... },\n     *     ...\n     * }\n     * let client = create(config);\n     * client.on( ... )\n     * // Use the SDK\n     * ...\n     * // Destroy the SDK, then recreate on the next step\n     * client.destroy()\n     * client = create(config)\n     * client.on( ... )\n     */\n    destroy () {\n      // TODO: Is it possible for the store to auto-unsubscribe any listeners\n      //    (from client.state.subscribe API)? If not, may be easier to simply\n      //    protect from issues.\n\n      const _destroy = () => {\n        if (destroyedSDK) return\n\n        // Cancel all the sagas\n        if (taskDescriptor) taskDescriptor.cancel()\n\n        // Clear the state\n        function destroyStateReducer (state, action) {\n          return {}\n        }\n        store.replaceReducer(destroyStateReducer)\n\n        // Neuter all actions\n        destroyedSDK = true\n      }\n\n      // setTimeout is necessary so that the destroy\n      //   happens at the start of the next tick for\n      //   when destroy is called inside an event handler\n      const immediately = 0\n      setTimeout(_destroy, immediately)\n    }\n  }\n\n  // Return the public API.\n  return publicAPI\n}\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","'use strict';\n\nvar compose = require('redux').compose;\n\nexports.__esModule = true;\nexports.composeWithDevTools =\n  typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    : function () {\n        if (arguments.length === 0) return undefined;\n        if (typeof arguments[0] === 'object') return compose;\n        return compose.apply(null, arguments);\n      };\n\nexports.devToolsEnhancer =\n  typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__\n    ? window.__REDUX_DEVTOOLS_EXTENSION__\n    : function () {\n        return function (noop) {\n          return noop;\n        };\n      };\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function e(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;\nreturn!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!!(null==n?0:n.length)&&y(n,t,0)>-1}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);\nreturn r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n){return n.split(\"\")}function _(n){return n.match($t)||[]}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function y(n,t,r){return t===t?Z(n,t,r):g(n,b,r)}function d(n,t,r,e){\nfor(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function b(n){return n!==n}function w(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:Cn}function m(n){return function(t){return null==t?X:t[n]}}function x(n){return function(t){return null==n?X:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==X&&(r=r===X?i:r+i);\n}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n,t){return c(t,function(t){return[t,n[t]]})}function R(n){return n?n.slice(0,H(n)+1).replace(Lt,\"\"):n}function z(n){return function(t){return n(t)}}function E(n,t){return c(t,function(t){return n[t]})}function S(n,t){return n.has(t)}function W(n,t){for(var r=-1,e=n.length;++r<e&&y(t,n[r],0)>-1;);return r}function L(n,t){for(var r=n.length;r--&&y(t,n[r],0)>-1;);return r}function C(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;\nreturn e}function U(n){return\"\\\\\"+Yr[n]}function B(n,t){return null==n?X:n[t]}function T(n){return Nr.test(n)}function $(n){return Pr.test(n)}function D(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function M(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function F(n,t){return function(r){return n(t(r))}}function N(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==cn||(n[r]=cn,i[u++]=r)}return i}function P(n){var t=-1,r=Array(n.size);\nreturn n.forEach(function(n){r[++t]=n}),r}function q(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function Z(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function K(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function V(n){return T(n)?J(n):_e(n)}function G(n){return T(n)?Y(n):p(n)}function H(n){for(var t=n.length;t--&&Ct.test(n.charAt(t)););return t}function J(n){for(var t=Mr.lastIndex=0;Mr.test(n);)++t;return t}function Y(n){return n.match(Mr)||[];\n}function Q(n){return n.match(Fr)||[]}var X,nn=\"4.17.21\",tn=200,rn=\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\",en=\"Expected a function\",un=\"Invalid `variable` option passed into `_.template`\",on=\"__lodash_hash_undefined__\",fn=500,cn=\"__lodash_placeholder__\",an=1,ln=2,sn=4,hn=1,pn=2,_n=1,vn=2,gn=4,yn=8,dn=16,bn=32,wn=64,mn=128,xn=256,jn=512,An=30,kn=\"...\",On=800,In=16,Rn=1,zn=2,En=3,Sn=1/0,Wn=9007199254740991,Ln=1.7976931348623157e308,Cn=NaN,Un=4294967295,Bn=Un-1,Tn=Un>>>1,$n=[[\"ary\",mn],[\"bind\",_n],[\"bindKey\",vn],[\"curry\",yn],[\"curryRight\",dn],[\"flip\",jn],[\"partial\",bn],[\"partialRight\",wn],[\"rearg\",xn]],Dn=\"[object Arguments]\",Mn=\"[object Array]\",Fn=\"[object AsyncFunction]\",Nn=\"[object Boolean]\",Pn=\"[object Date]\",qn=\"[object DOMException]\",Zn=\"[object Error]\",Kn=\"[object Function]\",Vn=\"[object GeneratorFunction]\",Gn=\"[object Map]\",Hn=\"[object Number]\",Jn=\"[object Null]\",Yn=\"[object Object]\",Qn=\"[object Promise]\",Xn=\"[object Proxy]\",nt=\"[object RegExp]\",tt=\"[object Set]\",rt=\"[object String]\",et=\"[object Symbol]\",ut=\"[object Undefined]\",it=\"[object WeakMap]\",ot=\"[object WeakSet]\",ft=\"[object ArrayBuffer]\",ct=\"[object DataView]\",at=\"[object Float32Array]\",lt=\"[object Float64Array]\",st=\"[object Int8Array]\",ht=\"[object Int16Array]\",pt=\"[object Int32Array]\",_t=\"[object Uint8Array]\",vt=\"[object Uint8ClampedArray]\",gt=\"[object Uint16Array]\",yt=\"[object Uint32Array]\",dt=/\\b__p \\+= '';/g,bt=/\\b(__p \\+=) '' \\+/g,wt=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,mt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>\"']/g,jt=RegExp(mt.source),At=RegExp(xt.source),kt=/<%-([\\s\\S]+?)%>/g,Ot=/<%([\\s\\S]+?)%>/g,It=/<%=([\\s\\S]+?)%>/g,Rt=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,zt=/^\\w*$/,Et=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,St=/[\\\\^$.*+?()[\\]{}|]/g,Wt=RegExp(St.source),Lt=/^\\s+/,Ct=/\\s/,Ut=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Bt=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Tt=/,? & /,$t=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Dt=/[()=,{}\\[\\]\\/\\s]/,Mt=/\\\\(\\\\)?/g,Ft=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Nt=/\\w*$/,Pt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Zt=/^\\[object .+?Constructor\\]$/,Kt=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\\d*)$/,Gt=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,Ht=/($^)/,Jt=/['\\n\\r\\u2028\\u2029\\\\]/g,Yt=\"\\\\ud800-\\\\udfff\",Qt=\"\\\\u0300-\\\\u036f\",Xt=\"\\\\ufe20-\\\\ufe2f\",nr=\"\\\\u20d0-\\\\u20ff\",tr=Qt+Xt+nr,rr=\"\\\\u2700-\\\\u27bf\",er=\"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\",ur=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\",ir=\"\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\",or=\"\\\\u2000-\\\\u206f\",fr=\" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",cr=\"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\",ar=\"\\\\ufe0e\\\\ufe0f\",lr=ur+ir+or+fr,sr=\"['\\u2019]\",hr=\"[\"+Yt+\"]\",pr=\"[\"+lr+\"]\",_r=\"[\"+tr+\"]\",vr=\"\\\\d+\",gr=\"[\"+rr+\"]\",yr=\"[\"+er+\"]\",dr=\"[^\"+Yt+lr+vr+rr+er+cr+\"]\",br=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",wr=\"(?:\"+_r+\"|\"+br+\")\",mr=\"[^\"+Yt+\"]\",xr=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",jr=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Ar=\"[\"+cr+\"]\",kr=\"\\\\u200d\",Or=\"(?:\"+yr+\"|\"+dr+\")\",Ir=\"(?:\"+Ar+\"|\"+dr+\")\",Rr=\"(?:\"+sr+\"(?:d|ll|m|re|s|t|ve))?\",zr=\"(?:\"+sr+\"(?:D|LL|M|RE|S|T|VE))?\",Er=wr+\"?\",Sr=\"[\"+ar+\"]?\",Wr=\"(?:\"+kr+\"(?:\"+[mr,xr,jr].join(\"|\")+\")\"+Sr+Er+\")*\",Lr=\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",Cr=\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",Ur=Sr+Er+Wr,Br=\"(?:\"+[gr,xr,jr].join(\"|\")+\")\"+Ur,Tr=\"(?:\"+[mr+_r+\"?\",_r,xr,jr,hr].join(\"|\")+\")\",$r=RegExp(sr,\"g\"),Dr=RegExp(_r,\"g\"),Mr=RegExp(br+\"(?=\"+br+\")|\"+Tr+Ur,\"g\"),Fr=RegExp([Ar+\"?\"+yr+\"+\"+Rr+\"(?=\"+[pr,Ar,\"$\"].join(\"|\")+\")\",Ir+\"+\"+zr+\"(?=\"+[pr,Ar+Or,\"$\"].join(\"|\")+\")\",Ar+\"?\"+Or+\"+\"+Rr,Ar+\"+\"+zr,Cr,Lr,vr,Br].join(\"|\"),\"g\"),Nr=RegExp(\"[\"+kr+Yt+tr+ar+\"]\"),Pr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qr=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Zr=-1,Kr={};\nKr[at]=Kr[lt]=Kr[st]=Kr[ht]=Kr[pt]=Kr[_t]=Kr[vt]=Kr[gt]=Kr[yt]=!0,Kr[Dn]=Kr[Mn]=Kr[ft]=Kr[Nn]=Kr[ct]=Kr[Pn]=Kr[Zn]=Kr[Kn]=Kr[Gn]=Kr[Hn]=Kr[Yn]=Kr[nt]=Kr[tt]=Kr[rt]=Kr[it]=!1;var Vr={};Vr[Dn]=Vr[Mn]=Vr[ft]=Vr[ct]=Vr[Nn]=Vr[Pn]=Vr[at]=Vr[lt]=Vr[st]=Vr[ht]=Vr[pt]=Vr[Gn]=Vr[Hn]=Vr[Yn]=Vr[nt]=Vr[tt]=Vr[rt]=Vr[et]=Vr[_t]=Vr[vt]=Vr[gt]=Vr[yt]=!0,Vr[Zn]=Vr[Kn]=Vr[it]=!1;var Gr={\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\xc3\":\"A\",\"\\xc4\":\"A\",\"\\xc5\":\"A\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\xe3\":\"a\",\"\\xe4\":\"a\",\"\\xe5\":\"a\",\n\"\\xc7\":\"C\",\"\\xe7\":\"c\",\"\\xd0\":\"D\",\"\\xf0\":\"d\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\xcb\":\"E\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\xeb\":\"e\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\xcf\":\"I\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\xef\":\"i\",\"\\xd1\":\"N\",\"\\xf1\":\"n\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\xd5\":\"O\",\"\\xd6\":\"O\",\"\\xd8\":\"O\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\xf5\":\"o\",\"\\xf6\":\"o\",\"\\xf8\":\"o\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\xdc\":\"U\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\xfc\":\"u\",\"\\xdd\":\"Y\",\"\\xfd\":\"y\",\"\\xff\":\"y\",\"\\xc6\":\"Ae\",\n\"\\xe6\":\"ae\",\"\\xde\":\"Th\",\"\\xfe\":\"th\",\"\\xdf\":\"ss\",\"\\u0100\":\"A\",\"\\u0102\":\"A\",\"\\u0104\":\"A\",\"\\u0101\":\"a\",\"\\u0103\":\"a\",\"\\u0105\":\"a\",\"\\u0106\":\"C\",\"\\u0108\":\"C\",\"\\u010a\":\"C\",\"\\u010c\":\"C\",\"\\u0107\":\"c\",\"\\u0109\":\"c\",\"\\u010b\":\"c\",\"\\u010d\":\"c\",\"\\u010e\":\"D\",\"\\u0110\":\"D\",\"\\u010f\":\"d\",\"\\u0111\":\"d\",\"\\u0112\":\"E\",\"\\u0114\":\"E\",\"\\u0116\":\"E\",\"\\u0118\":\"E\",\"\\u011a\":\"E\",\"\\u0113\":\"e\",\"\\u0115\":\"e\",\"\\u0117\":\"e\",\"\\u0119\":\"e\",\"\\u011b\":\"e\",\"\\u011c\":\"G\",\"\\u011e\":\"G\",\"\\u0120\":\"G\",\"\\u0122\":\"G\",\"\\u011d\":\"g\",\"\\u011f\":\"g\",\"\\u0121\":\"g\",\n\"\\u0123\":\"g\",\"\\u0124\":\"H\",\"\\u0126\":\"H\",\"\\u0125\":\"h\",\"\\u0127\":\"h\",\"\\u0128\":\"I\",\"\\u012a\":\"I\",\"\\u012c\":\"I\",\"\\u012e\":\"I\",\"\\u0130\":\"I\",\"\\u0129\":\"i\",\"\\u012b\":\"i\",\"\\u012d\":\"i\",\"\\u012f\":\"i\",\"\\u0131\":\"i\",\"\\u0134\":\"J\",\"\\u0135\":\"j\",\"\\u0136\":\"K\",\"\\u0137\":\"k\",\"\\u0138\":\"k\",\"\\u0139\":\"L\",\"\\u013b\":\"L\",\"\\u013d\":\"L\",\"\\u013f\":\"L\",\"\\u0141\":\"L\",\"\\u013a\":\"l\",\"\\u013c\":\"l\",\"\\u013e\":\"l\",\"\\u0140\":\"l\",\"\\u0142\":\"l\",\"\\u0143\":\"N\",\"\\u0145\":\"N\",\"\\u0147\":\"N\",\"\\u014a\":\"N\",\"\\u0144\":\"n\",\"\\u0146\":\"n\",\"\\u0148\":\"n\",\"\\u014b\":\"n\",\"\\u014c\":\"O\",\n\"\\u014e\":\"O\",\"\\u0150\":\"O\",\"\\u014d\":\"o\",\"\\u014f\":\"o\",\"\\u0151\":\"o\",\"\\u0154\":\"R\",\"\\u0156\":\"R\",\"\\u0158\":\"R\",\"\\u0155\":\"r\",\"\\u0157\":\"r\",\"\\u0159\":\"r\",\"\\u015a\":\"S\",\"\\u015c\":\"S\",\"\\u015e\":\"S\",\"\\u0160\":\"S\",\"\\u015b\":\"s\",\"\\u015d\":\"s\",\"\\u015f\":\"s\",\"\\u0161\":\"s\",\"\\u0162\":\"T\",\"\\u0164\":\"T\",\"\\u0166\":\"T\",\"\\u0163\":\"t\",\"\\u0165\":\"t\",\"\\u0167\":\"t\",\"\\u0168\":\"U\",\"\\u016a\":\"U\",\"\\u016c\":\"U\",\"\\u016e\":\"U\",\"\\u0170\":\"U\",\"\\u0172\":\"U\",\"\\u0169\":\"u\",\"\\u016b\":\"u\",\"\\u016d\":\"u\",\"\\u016f\":\"u\",\"\\u0171\":\"u\",\"\\u0173\":\"u\",\"\\u0174\":\"W\",\"\\u0175\":\"w\",\n\"\\u0176\":\"Y\",\"\\u0177\":\"y\",\"\\u0178\":\"Y\",\"\\u0179\":\"Z\",\"\\u017b\":\"Z\",\"\\u017d\":\"Z\",\"\\u017a\":\"z\",\"\\u017c\":\"z\",\"\\u017e\":\"z\",\"\\u0132\":\"IJ\",\"\\u0133\":\"ij\",\"\\u0152\":\"Oe\",\"\\u0153\":\"oe\",\"\\u0149\":\"'n\",\"\\u017f\":\"s\"},Hr={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},Jr={\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"},Yr={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Qr=parseFloat,Xr=parseInt,ne=\"object\"==typeof global&&global&&global.Object===Object&&global,te=\"object\"==typeof self&&self&&self.Object===Object&&self,re=ne||te||Function(\"return this\")(),ee=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,ue=ee&&\"object\"==typeof module&&module&&!module.nodeType&&module,ie=ue&&ue.exports===ee,oe=ie&&ne.process,fe=function(){\ntry{var n=ue&&ue.require&&ue.require(\"util\").types;return n?n:oe&&oe.binding&&oe.binding(\"util\")}catch(n){}}(),ce=fe&&fe.isArrayBuffer,ae=fe&&fe.isDate,le=fe&&fe.isMap,se=fe&&fe.isRegExp,he=fe&&fe.isSet,pe=fe&&fe.isTypedArray,_e=m(\"length\"),ve=x(Gr),ge=x(Hr),ye=x(Jr),de=function p(x){function Z(n){if(cc(n)&&!bh(n)&&!(n instanceof Ct)){if(n instanceof Y)return n;if(bl.call(n,\"__wrapped__\"))return eo(n)}return new Y(n)}function J(){}function Y(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,\nthis.__index__=0,this.__values__=X}function Ct(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Un,this.__views__=[]}function $t(){var n=new Ct(this.__wrapped__);return n.__actions__=Tu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Tu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Tu(this.__views__),n}function Yt(){if(this.__filtered__){var n=new Ct(this);n.__dir__=-1,\nn.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Qt(){var n=this.__wrapped__.value(),t=this.__dir__,r=bh(n),e=t<0,u=r?n.length:0,i=Oi(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Hl(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return wu(n,this.__actions__);var _=[];n:for(;c--&&h<p;){a+=t;for(var v=-1,g=n[a];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==zn)g=w;else if(!w){if(b==Rn)continue n;break n}}_[h++]=g}return _}function Xt(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function nr(){this.__data__=is?is(null):{},this.size=0}function tr(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function rr(n){var t=this.__data__;if(is){var r=t[n];return r===on?X:r}return bl.call(t,n)?t[n]:X}function er(n){var t=this.__data__;return is?t[n]!==X:bl.call(t,n)}function ur(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=is&&t===X?on:t,this}function ir(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function or(){this.__data__=[],this.size=0}function fr(n){var t=this.__data__,r=Wr(t,n);return!(r<0)&&(r==t.length-1?t.pop():Ll.call(t,r,1),--this.size,!0)}function cr(n){var t=this.__data__,r=Wr(t,n);return r<0?X:t[r][1]}function ar(n){return Wr(this.__data__,n)>-1}function lr(n,t){var r=this.__data__,e=Wr(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function sr(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){\nvar e=n[t];this.set(e[0],e[1])}}function hr(){this.size=0,this.__data__={hash:new Xt,map:new(ts||ir),string:new Xt}}function pr(n){var t=xi(this,n).delete(n);return this.size-=t?1:0,t}function _r(n){return xi(this,n).get(n)}function vr(n){return xi(this,n).has(n)}function gr(n,t){var r=xi(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function yr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new sr;++t<r;)this.add(n[t])}function dr(n){return this.__data__.set(n,on),this}function br(n){\nreturn this.__data__.has(n)}function wr(n){this.size=(this.__data__=new ir(n)).size}function mr(){this.__data__=new ir,this.size=0}function xr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function jr(n){return this.__data__.get(n)}function Ar(n){return this.__data__.has(n)}function kr(n,t){var r=this.__data__;if(r instanceof ir){var e=r.__data__;if(!ts||e.length<tn-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new sr(e)}return r.set(n,t),this.size=r.size,this}function Or(n,t){\nvar r=bh(n),e=!r&&dh(n),u=!r&&!e&&mh(n),i=!r&&!e&&!u&&Oh(n),o=r||e||u||i,f=o?O(n.length,hl):[],c=f.length;for(var a in n)!t&&!bl.call(n,a)||o&&(\"length\"==a||u&&(\"offset\"==a||\"parent\"==a)||i&&(\"buffer\"==a||\"byteLength\"==a||\"byteOffset\"==a)||Ci(a,c))||f.push(a);return f}function Ir(n){var t=n.length;return t?n[tu(0,t-1)]:X}function Rr(n,t){return Xi(Tu(n),Mr(t,0,n.length))}function zr(n){return Xi(Tu(n))}function Er(n,t,r){(r===X||Gf(n[t],r))&&(r!==X||t in n)||Br(n,t,r)}function Sr(n,t,r){var e=n[t];\nbl.call(n,t)&&Gf(e,r)&&(r!==X||t in n)||Br(n,t,r)}function Wr(n,t){for(var r=n.length;r--;)if(Gf(n[r][0],t))return r;return-1}function Lr(n,t,r,e){return ys(n,function(n,u,i){t(e,n,r(n),i)}),e}function Cr(n,t){return n&&$u(t,Pc(t),n)}function Ur(n,t){return n&&$u(t,qc(t),n)}function Br(n,t,r){\"__proto__\"==t&&Tl?Tl(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=il(e),i=null==n;++r<e;)u[r]=i?X:Mc(n,t[r]);return u}function Mr(n,t,r){return n===n&&(r!==X&&(n=n<=r?n:r),\nt!==X&&(n=n>=t?n:t)),n}function Fr(n,t,e,u,i,o){var f,c=t&an,a=t&ln,l=t&sn;if(e&&(f=i?e(n,u,i,o):e(n)),f!==X)return f;if(!fc(n))return n;var s=bh(n);if(s){if(f=zi(n),!c)return Tu(n,f)}else{var h=zs(n),p=h==Kn||h==Vn;if(mh(n))return Iu(n,c);if(h==Yn||h==Dn||p&&!i){if(f=a||p?{}:Ei(n),!c)return a?Mu(n,Ur(f,n)):Du(n,Cr(f,n))}else{if(!Vr[h])return i?n:{};f=Si(n,h,c)}}o||(o=new wr);var _=o.get(n);if(_)return _;o.set(n,f),kh(n)?n.forEach(function(r){f.add(Fr(r,t,e,r,n,o))}):jh(n)&&n.forEach(function(r,u){\nf.set(u,Fr(r,t,e,u,n,o))});var v=l?a?di:yi:a?qc:Pc,g=s?X:v(n);return r(g||n,function(r,u){g&&(u=r,r=n[u]),Sr(f,u,Fr(r,t,e,u,n,o))}),f}function Nr(n){var t=Pc(n);return function(r){return Pr(r,n,t)}}function Pr(n,t,r){var e=r.length;if(null==n)return!e;for(n=ll(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===X&&!(u in n)||!i(o))return!1}return!0}function Gr(n,t,r){if(\"function\"!=typeof n)throw new pl(en);return Ws(function(){n.apply(X,r)},t)}function Hr(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;\nif(!l)return s;r&&(t=c(t,z(r))),e?(i=f,a=!1):t.length>=tn&&(i=S,a=!1,t=new yr(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function Jr(n,t){var r=!0;return ys(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Yr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===X?o===o&&!bc(o):r(o,f)))var f=o,c=i}return c}function ne(n,t,r,e){var u=n.length;for(r=kc(r),r<0&&(r=-r>u?0:u+r),\ne=e===X||e>u?u:kc(e),e<0&&(e+=u),e=r>e?0:Oc(e);r<e;)n[r++]=t;return n}function te(n,t){var r=[];return ys(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function ee(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Li),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?ee(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function ue(n,t){return n&&bs(n,t,Pc)}function oe(n,t){return n&&ws(n,t,Pc)}function fe(n,t){return i(t,function(t){return uc(n[t])})}function _e(n,t){t=ku(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[no(t[r++])];\nreturn r&&r==e?n:X}function de(n,t,r){var e=t(n);return bh(n)?e:a(e,r(n))}function we(n){return null==n?n===X?ut:Jn:Bl&&Bl in ll(n)?ki(n):Ki(n)}function me(n,t){return n>t}function xe(n,t){return null!=n&&bl.call(n,t)}function je(n,t){return null!=n&&t in ll(n)}function Ae(n,t,r){return n>=Hl(t,r)&&n<Gl(t,r)}function ke(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=il(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,z(t))),s=Hl(p.length,s),l[a]=!r&&(t||u>=120&&p.length>=120)?new yr(a&&p):X}p=n[0];\nvar _=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?S(v,y):e(h,y,r))){for(a=i;--a;){var d=l[a];if(!(d?S(d,y):e(n[a],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Oe(n,t,r,e){return ue(n,function(n,u,i){t(e,r(n),u,i)}),e}function Ie(t,r,e){r=ku(r,t),t=Gi(t,r);var u=null==t?t:t[no(jo(r))];return null==u?X:n(u,t,e)}function Re(n){return cc(n)&&we(n)==Dn}function ze(n){return cc(n)&&we(n)==ft}function Ee(n){return cc(n)&&we(n)==Pn}function Se(n,t,r,e,u){\nreturn n===t||(null==n||null==t||!cc(n)&&!cc(t)?n!==n&&t!==t:We(n,t,r,e,Se,u))}function We(n,t,r,e,u,i){var o=bh(n),f=bh(t),c=o?Mn:zs(n),a=f?Mn:zs(t);c=c==Dn?Yn:c,a=a==Dn?Yn:a;var l=c==Yn,s=a==Yn,h=c==a;if(h&&mh(n)){if(!mh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new wr),o||Oh(n)?pi(n,t,r,e,u,i):_i(n,t,c,r,e,u,i);if(!(r&hn)){var p=l&&bl.call(n,\"__wrapped__\"),_=s&&bl.call(t,\"__wrapped__\");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new wr),u(v,g,r,e,i)}}return!!h&&(i||(i=new wr),vi(n,t,r,e,u,i));\n}function Le(n){return cc(n)&&zs(n)==Gn}function Ce(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=ll(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===X&&!(c in n))return!1}else{var s=new wr;if(e)var h=e(a,l,c,n,t,s);if(!(h===X?Se(l,a,hn|pn,e,s):h))return!1}}return!0}function Ue(n){return!(!fc(n)||Di(n))&&(uc(n)?kl:Zt).test(to(n))}function Be(n){return cc(n)&&we(n)==nt}function Te(n){return cc(n)&&zs(n)==tt;\n}function $e(n){return cc(n)&&oc(n.length)&&!!Kr[we(n)]}function De(n){return\"function\"==typeof n?n:null==n?La:\"object\"==typeof n?bh(n)?Ze(n[0],n[1]):qe(n):Fa(n)}function Me(n){if(!Mi(n))return Vl(n);var t=[];for(var r in ll(n))bl.call(n,r)&&\"constructor\"!=r&&t.push(r);return t}function Fe(n){if(!fc(n))return Zi(n);var t=Mi(n),r=[];for(var e in n)(\"constructor\"!=e||!t&&bl.call(n,e))&&r.push(e);return r}function Ne(n,t){return n<t}function Pe(n,t){var r=-1,e=Hf(n)?il(n.length):[];return ys(n,function(n,u,i){\ne[++r]=t(n,u,i)}),e}function qe(n){var t=ji(n);return 1==t.length&&t[0][2]?Ni(t[0][0],t[0][1]):function(r){return r===n||Ce(r,n,t)}}function Ze(n,t){return Bi(n)&&Fi(t)?Ni(no(n),t):function(r){var e=Mc(r,n);return e===X&&e===t?Nc(r,n):Se(t,e,hn|pn)}}function Ke(n,t,r,e,u){n!==t&&bs(t,function(i,o){if(u||(u=new wr),fc(i))Ve(n,t,o,r,Ke,e,u);else{var f=e?e(Ji(n,o),i,o+\"\",n,t,u):X;f===X&&(f=i),Er(n,o,f)}},qc)}function Ve(n,t,r,e,u,i,o){var f=Ji(n,r),c=Ji(t,r),a=o.get(c);if(a)return Er(n,r,a),X;var l=i?i(f,c,r+\"\",n,t,o):X,s=l===X;\nif(s){var h=bh(c),p=!h&&mh(c),_=!h&&!p&&Oh(c);l=c,h||p||_?bh(f)?l=f:Jf(f)?l=Tu(f):p?(s=!1,l=Iu(c,!0)):_?(s=!1,l=Wu(c,!0)):l=[]:gc(c)||dh(c)?(l=f,dh(f)?l=Rc(f):fc(f)&&!uc(f)||(l=Ei(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Er(n,r,l)}function Ge(n,t){var r=n.length;if(r)return t+=t<0?r:0,Ci(t,r)?n[t]:X}function He(n,t,r){t=t.length?c(t,function(n){return bh(n)?function(t){return _e(t,1===n.length?n[0]:n)}:n}):[La];var e=-1;return t=c(t,z(mi())),A(Pe(n,function(n,r,u){return{criteria:c(t,function(t){\nreturn t(n)}),index:++e,value:n}}),function(n,t){return Cu(n,t,r)})}function Je(n,t){return Ye(n,t,function(t,r){return Nc(n,r)})}function Ye(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=_e(n,o);r(f,o)&&fu(i,ku(o,n),f)}return i}function Qe(n){return function(t){return _e(t,n)}}function Xe(n,t,r,e){var u=e?d:y,i=-1,o=t.length,f=n;for(n===t&&(t=Tu(t)),r&&(f=c(n,z(r)));++i<o;)for(var a=0,l=t[i],s=r?r(l):l;(a=u(f,s,a,e))>-1;)f!==n&&Ll.call(f,a,1),Ll.call(n,a,1);return n}function nu(n,t){for(var r=n?t.length:0,e=r-1;r--;){\nvar u=t[r];if(r==e||u!==i){var i=u;Ci(u)?Ll.call(n,u,1):yu(n,u)}}return n}function tu(n,t){return n+Nl(Ql()*(t-n+1))}function ru(n,t,r,e){for(var u=-1,i=Gl(Fl((t-n)/(r||1)),0),o=il(i);i--;)o[e?i:++u]=n,n+=r;return o}function eu(n,t){var r=\"\";if(!n||t<1||t>Wn)return r;do t%2&&(r+=n),t=Nl(t/2),t&&(n+=n);while(t);return r}function uu(n,t){return Ls(Vi(n,t,La),n+\"\")}function iu(n){return Ir(ra(n))}function ou(n,t){var r=ra(n);return Xi(r,Mr(t,0,r.length))}function fu(n,t,r,e){if(!fc(n))return n;t=ku(t,n);\nfor(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=no(t[u]),a=r;if(\"__proto__\"===c||\"constructor\"===c||\"prototype\"===c)return n;if(u!=o){var l=f[c];a=e?e(l,c,f):X,a===X&&(a=fc(l)?l:Ci(t[u+1])?[]:{})}Sr(f,c,a),f=f[c]}return n}function cu(n){return Xi(ra(n))}function au(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=il(u);++e<u;)i[e]=n[e+t];return i}function lu(n,t){var r;return ys(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function su(n,t,r){\nvar e=0,u=null==n?e:n.length;if(\"number\"==typeof t&&t===t&&u<=Tn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!bc(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return hu(n,t,La,r)}function hu(n,t,r,e){var u=0,i=null==n?0:n.length;if(0===i)return 0;t=r(t);for(var o=t!==t,f=null===t,c=bc(t),a=t===X;u<i;){var l=Nl((u+i)/2),s=r(n[l]),h=s!==X,p=null===s,_=s===s,v=bc(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Hl(i,Bn)}function pu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){\nvar o=n[r],f=t?t(o):o;if(!r||!Gf(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function _u(n){return\"number\"==typeof n?n:bc(n)?Cn:+n}function vu(n){if(\"string\"==typeof n)return n;if(bh(n))return c(n,vu)+\"\";if(bc(n))return vs?vs.call(n):\"\";var t=n+\"\";return\"0\"==t&&1/n==-Sn?\"-0\":t}function gu(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(i>=tn){var s=t?null:ks(n);if(s)return P(s);c=!1,u=S,l=new yr}else l=t?[]:a;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,c&&p===p){for(var _=l.length;_--;)if(l[_]===p)continue n;\nt&&l.push(p),a.push(h)}else u(l,p,r)||(l!==a&&l.push(p),a.push(h))}return a}function yu(n,t){return t=ku(t,n),n=Gi(n,t),null==n||delete n[no(jo(t))]}function du(n,t,r,e){return fu(n,t,r(_e(n,t)),e)}function bu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?au(n,e?0:i,e?i+1:u):au(n,e?i+1:0,e?u:i)}function wu(n,t){var r=n;return r instanceof Ct&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mu(n,t,r){var e=n.length;if(e<2)return e?gu(n[0]):[];\nfor(var u=-1,i=il(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Hr(i[u]||o,n[f],t,r));return gu(ee(i,1),t,r)}function xu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){r(o,n[e],e<i?t[e]:X)}return o}function ju(n){return Jf(n)?n:[]}function Au(n){return\"function\"==typeof n?n:La}function ku(n,t){return bh(n)?n:Bi(n,t)?[n]:Cs(Ec(n))}function Ou(n,t,r){var e=n.length;return r=r===X?e:r,!t&&r>=e?n:au(n,t,r)}function Iu(n,t){if(t)return n.slice();var r=n.length,e=zl?zl(r):new n.constructor(r);\nreturn n.copy(e),e}function Ru(n){var t=new n.constructor(n.byteLength);return new Rl(t).set(new Rl(n)),t}function zu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.byteLength)}function Eu(n){var t=new n.constructor(n.source,Nt.exec(n));return t.lastIndex=n.lastIndex,t}function Su(n){return _s?ll(_s.call(n)):{}}function Wu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.length)}function Lu(n,t){if(n!==t){var r=n!==X,e=null===n,u=n===n,i=bc(n),o=t!==X,f=null===t,c=t===t,a=bc(t);\nif(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Cu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Lu(u[e],i[e]);if(c){if(e>=f)return c;return c*(\"desc\"==r[e]?-1:1)}}return n.index-t.index}function Uu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Gl(i-o,0),l=il(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l;\n}function Bu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Gl(i-f,0),s=il(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Tu(n,t){var r=-1,e=n.length;for(t||(t=il(e));++r<e;)t[r]=n[r];return t}function $u(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):X;c===X&&(c=n[f]),u?Br(r,f,c):Sr(r,f,c)}return r}function Du(n,t){return $u(n,Is(n),t)}function Mu(n,t){return $u(n,Rs(n),t);\n}function Fu(n,r){return function(e,u){var i=bh(e)?t:Lr,o=r?r():{};return i(e,n,mi(u,2),o)}}function Nu(n){return uu(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:X,o=u>2?r[2]:X;for(i=n.length>3&&\"function\"==typeof i?(u--,i):X,o&&Ui(r[0],r[1],o)&&(i=u<3?X:i,u=1),t=ll(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Pu(n,t){return function(r,e){if(null==r)return r;if(!Hf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=ll(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function qu(n){return function(t,r,e){\nfor(var u=-1,i=ll(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(r(i[c],c,i)===!1)break}return t}}function Zu(n,t,r){function e(){return(this&&this!==re&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&_n,i=Gu(n);return e}function Ku(n){return function(t){t=Ec(t);var r=T(t)?G(t):X,e=r?r[0]:t.charAt(0),u=r?Ou(r,1).join(\"\"):t.slice(1);return e[n]()+u}}function Vu(n){return function(t){return l(Ra(ca(t).replace($r,\"\")),n,\"\")}}function Gu(n){return function(){var t=arguments;switch(t.length){\ncase 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=gs(n.prototype),e=n.apply(r,t);return fc(e)?e:r}}function Hu(t,r,e){function u(){for(var o=arguments.length,f=il(o),c=o,a=wi(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:N(f,a);\nreturn o-=l.length,o<e?oi(t,r,Qu,u.placeholder,X,f,l,X,X,e-o):n(this&&this!==re&&this instanceof u?i:t,this,f)}var i=Gu(t);return u}function Ju(n){return function(t,r,e){var u=ll(t);if(!Hf(t)){var i=mi(r,3);t=Pc(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:X}}function Yu(n){return gi(function(t){var r=t.length,e=r,u=Y.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(\"function\"!=typeof i)throw new pl(en);if(u&&!o&&\"wrapper\"==bi(i))var o=new Y([],!0)}for(e=o?e:r;++e<r;){\ni=t[e];var f=bi(i),c=\"wrapper\"==f?Os(i):X;o=c&&$i(c[0])&&c[1]==(mn|yn|bn|xn)&&!c[4].length&&1==c[9]?o[bi(c[0])].apply(o,c[3]):1==i.length&&$i(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&bh(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Qu(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=il(y),b=y;b--;)d[b]=arguments[b];if(_)var w=wi(l),m=C(d,w);if(e&&(d=Uu(d,e,u,_)),i&&(d=Bu(d,i,o,_)),\ny-=m,_&&y<a){return oi(n,t,Qu,l.placeholder,r,d,N(d,w),f,c,a-y)}var x=h?r:this,j=p?x[n]:n;return y=d.length,f?d=Hi(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==re&&this instanceof l&&(j=g||Gu(j)),j.apply(x,d)}var s=t&mn,h=t&_n,p=t&vn,_=t&(yn|dn),v=t&jn,g=p?X:Gu(n);return l}function Xu(n,t){return function(r,e){return Oe(r,n,t(e),{})}}function ni(n,t){return function(r,e){var u;if(r===X&&e===X)return t;if(r!==X&&(u=r),e!==X){if(u===X)return e;\"string\"==typeof r||\"string\"==typeof e?(r=vu(r),\ne=vu(e)):(r=_u(r),e=_u(e)),u=n(r,e)}return u}}function ti(t){return gi(function(r){return r=c(r,z(mi())),uu(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ri(n,t){t=t===X?\" \":vu(t);var r=t.length;if(r<2)return r?eu(t,n):t;var e=eu(t,Fl(n/V(t)));return T(t)?Ou(G(e),0,n).join(\"\"):e.slice(0,n)}function ei(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=il(l+c),h=this&&this!==re&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];\nreturn n(h,o?e:this,s)}var o=r&_n,f=Gu(t);return i}function ui(n){return function(t,r,e){return e&&\"number\"!=typeof e&&Ui(t,r,e)&&(r=e=X),t=Ac(t),r===X?(r=t,t=0):r=Ac(r),e=e===X?t<r?1:-1:Ac(e),ru(t,r,e,n)}}function ii(n){return function(t,r){return\"string\"==typeof t&&\"string\"==typeof r||(t=Ic(t),r=Ic(r)),n(t,r)}}function oi(n,t,r,e,u,i,o,f,c,a){var l=t&yn,s=l?o:X,h=l?X:o,p=l?i:X,_=l?X:i;t|=l?bn:wn,t&=~(l?wn:bn),t&gn||(t&=~(_n|vn));var v=[n,t,u,p,s,_,h,f,c,a],g=r.apply(X,v);return $i(n)&&Ss(g,v),g.placeholder=e,\nYi(g,n,t)}function fi(n){var t=al[n];return function(n,r){if(n=Ic(n),r=null==r?0:Hl(kc(r),292),r&&Zl(n)){var e=(Ec(n)+\"e\").split(\"e\");return e=(Ec(t(e[0]+\"e\"+(+e[1]+r)))+\"e\").split(\"e\"),+(e[0]+\"e\"+(+e[1]-r))}return t(n)}}function ci(n){return function(t){var r=zs(t);return r==Gn?M(t):r==tt?q(t):I(t,n(t))}}function ai(n,t,r,e,u,i,o,f){var c=t&vn;if(!c&&\"function\"!=typeof n)throw new pl(en);var a=e?e.length:0;if(a||(t&=~(bn|wn),e=u=X),o=o===X?o:Gl(kc(o),0),f=f===X?f:kc(f),a-=u?u.length:0,t&wn){var l=e,s=u;\ne=u=X}var h=c?X:Os(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&qi(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=p[9]===X?c?0:n.length:Gl(p[9]-a,0),!f&&t&(yn|dn)&&(t&=~(yn|dn)),t&&t!=_n)_=t==yn||t==dn?Hu(n,t,f):t!=bn&&t!=(_n|bn)||u.length?Qu.apply(X,p):ei(n,t,r,e);else var _=Zu(n,t,r);return Yi((h?ms:Ss)(_,p),n,t)}function li(n,t,r,e){return n===X||Gf(n,gl[r])&&!bl.call(e,r)?t:n}function si(n,t,r,e,u,i){return fc(n)&&fc(t)&&(i.set(t,n),Ke(n,t,X,si,i),i.delete(t)),n}function hi(n){return gc(n)?X:n}function pi(n,t,r,e,u,i){\nvar o=r&hn,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n),l=i.get(t);if(a&&l)return a==t&&l==n;var s=-1,p=!0,_=r&pn?new yr:X;for(i.set(n,t),i.set(t,n);++s<f;){var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(y!==X){if(y)continue;p=!1;break}if(_){if(!h(t,function(n,t){if(!S(_,t)&&(v===n||u(v,n,r,e,i)))return _.push(t)})){p=!1;break}}else if(v!==g&&!u(v,g,r,e,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function _i(n,t,r,e,u,i,o){switch(r){case ct:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;\nn=n.buffer,t=t.buffer;case ft:return!(n.byteLength!=t.byteLength||!i(new Rl(n),new Rl(t)));case Nn:case Pn:case Hn:return Gf(+n,+t);case Zn:return n.name==t.name&&n.message==t.message;case nt:case rt:return n==t+\"\";case Gn:var f=M;case tt:var c=e&hn;if(f||(f=P),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=pn,o.set(n,t);var l=pi(f(n),f(t),e,u,i,o);return o.delete(n),l;case et:if(_s)return _s.call(n)==_s.call(t)}return!1}function vi(n,t,r,e,u,i){var o=r&hn,f=yi(n),c=f.length;if(c!=yi(t).length&&!o)return!1;\nfor(var a=c;a--;){var l=f[a];if(!(o?l in t:bl.call(t,l)))return!1}var s=i.get(n),h=i.get(t);if(s&&h)return s==t&&h==n;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++a<c;){l=f[a];var v=n[l],g=t[l];if(e)var y=o?e(g,v,l,t,n,i):e(v,g,l,n,t,i);if(!(y===X?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_=\"constructor\"==l)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&\"constructor\"in n&&\"constructor\"in t&&!(\"function\"==typeof d&&d instanceof d&&\"function\"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),\ni.delete(t),p}function gi(n){return Ls(Vi(n,X,_o),n+\"\")}function yi(n){return de(n,Pc,Is)}function di(n){return de(n,qc,Rs)}function bi(n){for(var t=n.name+\"\",r=fs[t],e=bl.call(fs,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function wi(n){return(bl.call(Z,\"placeholder\")?Z:n).placeholder}function mi(){var n=Z.iteratee||Ca;return n=n===Ca?De:n,arguments.length?n(arguments[0],arguments[1]):n}function xi(n,t){var r=n.__data__;return Ti(t)?r[\"string\"==typeof t?\"string\":\"hash\"]:r.map;\n}function ji(n){for(var t=Pc(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Fi(u)]}return t}function Ai(n,t){var r=B(n,t);return Ue(r)?r:X}function ki(n){var t=bl.call(n,Bl),r=n[Bl];try{n[Bl]=X;var e=!0}catch(n){}var u=xl.call(n);return e&&(t?n[Bl]=r:delete n[Bl]),u}function Oi(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case\"drop\":n+=o;break;case\"dropRight\":t-=o;break;case\"take\":t=Hl(t,n+o);break;case\"takeRight\":n=Gl(n,t-o)}}return{start:n,end:t}}function Ii(n){var t=n.match(Bt);\nreturn t?t[1].split(Tt):[]}function Ri(n,t,r){t=ku(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=no(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&oc(u)&&Ci(o,u)&&(bh(n)||dh(n)))}function zi(n){var t=n.length,r=new n.constructor(t);return t&&\"string\"==typeof n[0]&&bl.call(n,\"index\")&&(r.index=n.index,r.input=n.input),r}function Ei(n){return\"function\"!=typeof n.constructor||Mi(n)?{}:gs(El(n))}function Si(n,t,r){var e=n.constructor;switch(t){case ft:return Ru(n);\ncase Nn:case Pn:return new e(+n);case ct:return zu(n,r);case at:case lt:case st:case ht:case pt:case _t:case vt:case gt:case yt:return Wu(n,r);case Gn:return new e;case Hn:case rt:return new e(n);case nt:return Eu(n);case tt:return new e;case et:return Su(n)}}function Wi(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?\"& \":\"\")+t[e],t=t.join(r>2?\", \":\" \"),n.replace(Ut,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}function Li(n){return bh(n)||dh(n)||!!(Cl&&n&&n[Cl])}function Ci(n,t){var r=typeof n;\nreturn t=null==t?Wn:t,!!t&&(\"number\"==r||\"symbol\"!=r&&Vt.test(n))&&n>-1&&n%1==0&&n<t}function Ui(n,t,r){if(!fc(r))return!1;var e=typeof t;return!!(\"number\"==e?Hf(r)&&Ci(t,r.length):\"string\"==e&&t in r)&&Gf(r[t],n)}function Bi(n,t){if(bh(n))return!1;var r=typeof n;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=n&&!bc(n))||(zt.test(n)||!Rt.test(n)||null!=t&&n in ll(t))}function Ti(n){var t=typeof n;return\"string\"==t||\"number\"==t||\"symbol\"==t||\"boolean\"==t?\"__proto__\"!==n:null===n}function $i(n){\nvar t=bi(n),r=Z[t];if(\"function\"!=typeof r||!(t in Ct.prototype))return!1;if(n===r)return!0;var e=Os(r);return!!e&&n===e[0]}function Di(n){return!!ml&&ml in n}function Mi(n){var t=n&&n.constructor;return n===(\"function\"==typeof t&&t.prototype||gl)}function Fi(n){return n===n&&!fc(n)}function Ni(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==X||n in ll(r)))}}function Pi(n){var t=Cf(n,function(n){return r.size===fn&&r.clear(),n}),r=t.cache;return t}function qi(n,t){var r=n[1],e=t[1],u=r|e,i=u<(_n|vn|mn),o=e==mn&&r==yn||e==mn&&r==xn&&n[7].length<=t[8]||e==(mn|xn)&&t[7].length<=t[8]&&r==yn;\nif(!i&&!o)return n;e&_n&&(n[2]=t[2],u|=r&_n?0:gn);var f=t[3];if(f){var c=n[3];n[3]=c?Uu(c,f,t[4]):f,n[4]=c?N(n[3],cn):t[4]}return f=t[5],f&&(c=n[5],n[5]=c?Bu(c,f,t[6]):f,n[6]=c?N(n[5],cn):t[6]),f=t[7],f&&(n[7]=f),e&mn&&(n[8]=null==n[8]?t[8]:Hl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Zi(n){var t=[];if(null!=n)for(var r in ll(n))t.push(r);return t}function Ki(n){return xl.call(n)}function Vi(t,r,e){return r=Gl(r===X?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Gl(u.length-r,0),f=il(o);++i<o;)f[i]=u[r+i];\ni=-1;for(var c=il(r+1);++i<r;)c[i]=u[i];return c[r]=e(f),n(t,this,c)}}function Gi(n,t){return t.length<2?n:_e(n,au(t,0,-1))}function Hi(n,t){for(var r=n.length,e=Hl(t.length,r),u=Tu(n);e--;){var i=t[e];n[e]=Ci(i,r)?u[i]:X}return n}function Ji(n,t){if((\"constructor\"!==t||\"function\"!=typeof n[t])&&\"__proto__\"!=t)return n[t]}function Yi(n,t,r){var e=t+\"\";return Ls(n,Wi(e,ro(Ii(e),r)))}function Qi(n){var t=0,r=0;return function(){var e=Jl(),u=In-(e-r);if(r=e,u>0){if(++t>=On)return arguments[0]}else t=0;\nreturn n.apply(X,arguments)}}function Xi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===X?e:t;++r<t;){var i=tu(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function no(n){if(\"string\"==typeof n||bc(n))return n;var t=n+\"\";return\"0\"==t&&1/n==-Sn?\"-0\":t}function to(n){if(null!=n){try{return dl.call(n)}catch(n){}try{return n+\"\"}catch(n){}}return\"\"}function ro(n,t){return r($n,function(r){var e=\"_.\"+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function eo(n){if(n instanceof Ct)return n.clone();var t=new Y(n.__wrapped__,n.__chain__);\nreturn t.__actions__=Tu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function uo(n,t,r){t=(r?Ui(n,t,r):t===X)?1:Gl(kc(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=il(Fl(e/t));u<e;)o[i++]=au(n,u,u+=t);return o}function io(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function oo(){var n=arguments.length;if(!n)return[];for(var t=il(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return a(bh(r)?Tu(r):[r],ee(t,1));\n}function fo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),au(n,t<0?0:t,e)):[]}function co(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,0,t<0?0:t)):[]}function ao(n,t){return n&&n.length?bu(n,mi(t,3),!0,!0):[]}function lo(n,t){return n&&n.length?bu(n,mi(t,3),!0):[]}function so(n,t,r,e){var u=null==n?0:n.length;return u?(r&&\"number\"!=typeof r&&Ui(n,t,r)&&(r=0,e=u),ne(n,t,r,e)):[]}function ho(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);\nreturn u<0&&(u=Gl(e+u,0)),g(n,mi(t,3),u)}function po(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==X&&(u=kc(r),u=r<0?Gl(e+u,0):Hl(u,e-1)),g(n,mi(t,3),u,!0)}function _o(n){return(null==n?0:n.length)?ee(n,1):[]}function vo(n){return(null==n?0:n.length)?ee(n,Sn):[]}function go(n,t){return(null==n?0:n.length)?(t=t===X?1:kc(t),ee(n,t)):[]}function yo(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function bo(n){return n&&n.length?n[0]:X}function wo(n,t,r){\nvar e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);return u<0&&(u=Gl(e+u,0)),y(n,t,u)}function mo(n){return(null==n?0:n.length)?au(n,0,-1):[]}function xo(n,t){return null==n?\"\":Kl.call(n,t)}function jo(n){var t=null==n?0:n.length;return t?n[t-1]:X}function Ao(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==X&&(u=kc(r),u=u<0?Gl(e+u,0):Hl(u,e-1)),t===t?K(n,t,u):g(n,b,u,!0)}function ko(n,t){return n&&n.length?Ge(n,kc(t)):X}function Oo(n,t){return n&&n.length&&t&&t.length?Xe(n,t):n;\n}function Io(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,mi(r,2)):n}function Ro(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,X,r):n}function zo(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=mi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return nu(n,u),r}function Eo(n){return null==n?n:Xl.call(n)}function So(n,t,r){var e=null==n?0:n.length;return e?(r&&\"number\"!=typeof r&&Ui(n,t,r)?(t=0,r=e):(t=null==t?0:kc(t),r=r===X?e:kc(r)),au(n,t,r)):[]}function Wo(n,t){\nreturn su(n,t)}function Lo(n,t,r){return hu(n,t,mi(r,2))}function Co(n,t){var r=null==n?0:n.length;if(r){var e=su(n,t);if(e<r&&Gf(n[e],t))return e}return-1}function Uo(n,t){return su(n,t,!0)}function Bo(n,t,r){return hu(n,t,mi(r,2),!0)}function To(n,t){if(null==n?0:n.length){var r=su(n,t,!0)-1;if(Gf(n[r],t))return r}return-1}function $o(n){return n&&n.length?pu(n):[]}function Do(n,t){return n&&n.length?pu(n,mi(t,2)):[]}function Mo(n){var t=null==n?0:n.length;return t?au(n,1,t):[]}function Fo(n,t,r){\nreturn n&&n.length?(t=r||t===X?1:kc(t),au(n,0,t<0?0:t)):[]}function No(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,t<0?0:t,e)):[]}function Po(n,t){return n&&n.length?bu(n,mi(t,3),!1,!0):[]}function qo(n,t){return n&&n.length?bu(n,mi(t,3)):[]}function Zo(n){return n&&n.length?gu(n):[]}function Ko(n,t){return n&&n.length?gu(n,mi(t,2)):[]}function Vo(n,t){return t=\"function\"==typeof t?t:X,n&&n.length?gu(n,X,t):[]}function Go(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){\nif(Jf(n))return t=Gl(n.length,t),!0}),O(t,function(t){return c(n,m(t))})}function Ho(t,r){if(!t||!t.length)return[];var e=Go(t);return null==r?e:c(e,function(t){return n(r,X,t)})}function Jo(n,t){return xu(n||[],t||[],Sr)}function Yo(n,t){return xu(n||[],t||[],fu)}function Qo(n){var t=Z(n);return t.__chain__=!0,t}function Xo(n,t){return t(n),n}function nf(n,t){return t(n)}function tf(){return Qo(this)}function rf(){return new Y(this.value(),this.__chain__)}function ef(){this.__values__===X&&(this.__values__=jc(this.value()));\nvar n=this.__index__>=this.__values__.length;return{done:n,value:n?X:this.__values__[this.__index__++]}}function uf(){return this}function of(n){for(var t,r=this;r instanceof J;){var e=eo(r);e.__index__=0,e.__values__=X,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function ff(){var n=this.__wrapped__;if(n instanceof Ct){var t=n;return this.__actions__.length&&(t=new Ct(this)),t=t.reverse(),t.__actions__.push({func:nf,args:[Eo],thisArg:X}),new Y(t,this.__chain__)}return this.thru(Eo);\n}function cf(){return wu(this.__wrapped__,this.__actions__)}function af(n,t,r){var e=bh(n)?u:Jr;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function lf(n,t){return(bh(n)?i:te)(n,mi(t,3))}function sf(n,t){return ee(yf(n,t),1)}function hf(n,t){return ee(yf(n,t),Sn)}function pf(n,t,r){return r=r===X?1:kc(r),ee(yf(n,t),r)}function _f(n,t){return(bh(n)?r:ys)(n,mi(t,3))}function vf(n,t){return(bh(n)?e:ds)(n,mi(t,3))}function gf(n,t,r,e){n=Hf(n)?n:ra(n),r=r&&!e?kc(r):0;var u=n.length;return r<0&&(r=Gl(u+r,0)),\ndc(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&y(n,t,r)>-1}function yf(n,t){return(bh(n)?c:Pe)(n,mi(t,3))}function df(n,t,r,e){return null==n?[]:(bh(t)||(t=null==t?[]:[t]),r=e?X:r,bh(r)||(r=null==r?[]:[r]),He(n,t,r))}function bf(n,t,r){var e=bh(n)?l:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ys)}function wf(n,t,r){var e=bh(n)?s:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ds)}function mf(n,t){return(bh(n)?i:te)(n,Uf(mi(t,3)))}function xf(n){return(bh(n)?Ir:iu)(n)}function jf(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),\n(bh(n)?Rr:ou)(n,t)}function Af(n){return(bh(n)?zr:cu)(n)}function kf(n){if(null==n)return 0;if(Hf(n))return dc(n)?V(n):n.length;var t=zs(n);return t==Gn||t==tt?n.size:Me(n).length}function Of(n,t,r){var e=bh(n)?h:lu;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function If(n,t){if(\"function\"!=typeof t)throw new pl(en);return n=kc(n),function(){if(--n<1)return t.apply(this,arguments)}}function Rf(n,t,r){return t=r?X:t,t=n&&null==t?n.length:t,ai(n,mn,X,X,X,X,t)}function zf(n,t){var r;if(\"function\"!=typeof t)throw new pl(en);\nreturn n=kc(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=X),r}}function Ef(n,t,r){t=r?X:t;var e=ai(n,yn,X,X,X,X,X,t);return e.placeholder=Ef.placeholder,e}function Sf(n,t,r){t=r?X:t;var e=ai(n,dn,X,X,X,X,X,t);return e.placeholder=Sf.placeholder,e}function Wf(n,t,r){function e(t){var r=h,e=p;return h=p=X,d=t,v=n.apply(e,r)}function u(n){return d=n,g=Ws(f,t),b?e(n):v}function i(n){var r=n-y,e=n-d,u=t-r;return w?Hl(u,_-e):u}function o(n){var r=n-y,e=n-d;return y===X||r>=t||r<0||w&&e>=_;\n}function f(){var n=fh();return o(n)?c(n):(g=Ws(f,i(n)),X)}function c(n){return g=X,m&&h?e(n):(h=p=X,v)}function a(){g!==X&&As(g),d=0,h=y=p=g=X}function l(){return g===X?v:c(fh())}function s(){var n=fh(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===X)return u(y);if(w)return As(g),g=Ws(f,t),e(y)}return g===X&&(g=Ws(f,t)),v}var h,p,_,v,g,y,d=0,b=!1,w=!1,m=!0;if(\"function\"!=typeof n)throw new pl(en);return t=Ic(t)||0,fc(r)&&(b=!!r.leading,w=\"maxWait\"in r,_=w?Gl(Ic(r.maxWait)||0,t):_,m=\"trailing\"in r?!!r.trailing:m),\ns.cancel=a,s.flush=l,s}function Lf(n){return ai(n,jn)}function Cf(n,t){if(\"function\"!=typeof n||null!=t&&\"function\"!=typeof t)throw new pl(en);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Cf.Cache||sr),r}function Uf(n){if(\"function\"!=typeof n)throw new pl(en);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:\nreturn!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Bf(n){return zf(2,n)}function Tf(n,t){if(\"function\"!=typeof n)throw new pl(en);return t=t===X?t:kc(t),uu(n,t)}function $f(t,r){if(\"function\"!=typeof t)throw new pl(en);return r=null==r?0:Gl(kc(r),0),uu(function(e){var u=e[r],i=Ou(e,0,r);return u&&a(i,u),n(t,this,i)})}function Df(n,t,r){var e=!0,u=!0;if(\"function\"!=typeof n)throw new pl(en);return fc(r)&&(e=\"leading\"in r?!!r.leading:e,u=\"trailing\"in r?!!r.trailing:u),\nWf(n,t,{leading:e,maxWait:t,trailing:u})}function Mf(n){return Rf(n,1)}function Ff(n,t){return ph(Au(t),n)}function Nf(){if(!arguments.length)return[];var n=arguments[0];return bh(n)?n:[n]}function Pf(n){return Fr(n,sn)}function qf(n,t){return t=\"function\"==typeof t?t:X,Fr(n,sn,t)}function Zf(n){return Fr(n,an|sn)}function Kf(n,t){return t=\"function\"==typeof t?t:X,Fr(n,an|sn,t)}function Vf(n,t){return null==t||Pr(n,t,Pc(t))}function Gf(n,t){return n===t||n!==n&&t!==t}function Hf(n){return null!=n&&oc(n.length)&&!uc(n);\n}function Jf(n){return cc(n)&&Hf(n)}function Yf(n){return n===!0||n===!1||cc(n)&&we(n)==Nn}function Qf(n){return cc(n)&&1===n.nodeType&&!gc(n)}function Xf(n){if(null==n)return!0;if(Hf(n)&&(bh(n)||\"string\"==typeof n||\"function\"==typeof n.splice||mh(n)||Oh(n)||dh(n)))return!n.length;var t=zs(n);if(t==Gn||t==tt)return!n.size;if(Mi(n))return!Me(n).length;for(var r in n)if(bl.call(n,r))return!1;return!0}function nc(n,t){return Se(n,t)}function tc(n,t,r){r=\"function\"==typeof r?r:X;var e=r?r(n,t):X;return e===X?Se(n,t,X,r):!!e;\n}function rc(n){if(!cc(n))return!1;var t=we(n);return t==Zn||t==qn||\"string\"==typeof n.message&&\"string\"==typeof n.name&&!gc(n)}function ec(n){return\"number\"==typeof n&&Zl(n)}function uc(n){if(!fc(n))return!1;var t=we(n);return t==Kn||t==Vn||t==Fn||t==Xn}function ic(n){return\"number\"==typeof n&&n==kc(n)}function oc(n){return\"number\"==typeof n&&n>-1&&n%1==0&&n<=Wn}function fc(n){var t=typeof n;return null!=n&&(\"object\"==t||\"function\"==t)}function cc(n){return null!=n&&\"object\"==typeof n}function ac(n,t){\nreturn n===t||Ce(n,t,ji(t))}function lc(n,t,r){return r=\"function\"==typeof r?r:X,Ce(n,t,ji(t),r)}function sc(n){return vc(n)&&n!=+n}function hc(n){if(Es(n))throw new fl(rn);return Ue(n)}function pc(n){return null===n}function _c(n){return null==n}function vc(n){return\"number\"==typeof n||cc(n)&&we(n)==Hn}function gc(n){if(!cc(n)||we(n)!=Yn)return!1;var t=El(n);if(null===t)return!0;var r=bl.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof r&&r instanceof r&&dl.call(r)==jl}function yc(n){\nreturn ic(n)&&n>=-Wn&&n<=Wn}function dc(n){return\"string\"==typeof n||!bh(n)&&cc(n)&&we(n)==rt}function bc(n){return\"symbol\"==typeof n||cc(n)&&we(n)==et}function wc(n){return n===X}function mc(n){return cc(n)&&zs(n)==it}function xc(n){return cc(n)&&we(n)==ot}function jc(n){if(!n)return[];if(Hf(n))return dc(n)?G(n):Tu(n);if(Ul&&n[Ul])return D(n[Ul]());var t=zs(n);return(t==Gn?M:t==tt?P:ra)(n)}function Ac(n){if(!n)return 0===n?n:0;if(n=Ic(n),n===Sn||n===-Sn){return(n<0?-1:1)*Ln}return n===n?n:0}function kc(n){\nvar t=Ac(n),r=t%1;return t===t?r?t-r:t:0}function Oc(n){return n?Mr(kc(n),0,Un):0}function Ic(n){if(\"number\"==typeof n)return n;if(bc(n))return Cn;if(fc(n)){var t=\"function\"==typeof n.valueOf?n.valueOf():n;n=fc(t)?t+\"\":t}if(\"string\"!=typeof n)return 0===n?n:+n;n=R(n);var r=qt.test(n);return r||Kt.test(n)?Xr(n.slice(2),r?2:8):Pt.test(n)?Cn:+n}function Rc(n){return $u(n,qc(n))}function zc(n){return n?Mr(kc(n),-Wn,Wn):0===n?n:0}function Ec(n){return null==n?\"\":vu(n)}function Sc(n,t){var r=gs(n);return null==t?r:Cr(r,t);\n}function Wc(n,t){return v(n,mi(t,3),ue)}function Lc(n,t){return v(n,mi(t,3),oe)}function Cc(n,t){return null==n?n:bs(n,mi(t,3),qc)}function Uc(n,t){return null==n?n:ws(n,mi(t,3),qc)}function Bc(n,t){return n&&ue(n,mi(t,3))}function Tc(n,t){return n&&oe(n,mi(t,3))}function $c(n){return null==n?[]:fe(n,Pc(n))}function Dc(n){return null==n?[]:fe(n,qc(n))}function Mc(n,t,r){var e=null==n?X:_e(n,t);return e===X?r:e}function Fc(n,t){return null!=n&&Ri(n,t,xe)}function Nc(n,t){return null!=n&&Ri(n,t,je);\n}function Pc(n){return Hf(n)?Or(n):Me(n)}function qc(n){return Hf(n)?Or(n,!0):Fe(n)}function Zc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,t(n,e,u),n)}),r}function Kc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,e,t(n,e,u))}),r}function Vc(n,t){return Gc(n,Uf(mi(t)))}function Gc(n,t){if(null==n)return{};var r=c(di(n),function(n){return[n]});return t=mi(t),Ye(n,r,function(n,r){return t(n,r[0])})}function Hc(n,t,r){t=ku(t,n);var e=-1,u=t.length;for(u||(u=1,n=X);++e<u;){var i=null==n?X:n[no(t[e])];\ni===X&&(e=u,i=r),n=uc(i)?i.call(n):i}return n}function Jc(n,t,r){return null==n?n:fu(n,t,r)}function Yc(n,t,r,e){return e=\"function\"==typeof e?e:X,null==n?n:fu(n,t,r,e)}function Qc(n,t,e){var u=bh(n),i=u||mh(n)||Oh(n);if(t=mi(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:fc(n)&&uc(o)?gs(El(n)):{}}return(i?r:ue)(n,function(n,r,u){return t(e,n,r,u)}),e}function Xc(n,t){return null==n||yu(n,t)}function na(n,t,r){return null==n?n:du(n,t,Au(r))}function ta(n,t,r,e){return e=\"function\"==typeof e?e:X,\nnull==n?n:du(n,t,Au(r),e)}function ra(n){return null==n?[]:E(n,Pc(n))}function ea(n){return null==n?[]:E(n,qc(n))}function ua(n,t,r){return r===X&&(r=t,t=X),r!==X&&(r=Ic(r),r=r===r?r:0),t!==X&&(t=Ic(t),t=t===t?t:0),Mr(Ic(n),t,r)}function ia(n,t,r){return t=Ac(t),r===X?(r=t,t=0):r=Ac(r),n=Ic(n),Ae(n,t,r)}function oa(n,t,r){if(r&&\"boolean\"!=typeof r&&Ui(n,t,r)&&(t=r=X),r===X&&(\"boolean\"==typeof t?(r=t,t=X):\"boolean\"==typeof n&&(r=n,n=X)),n===X&&t===X?(n=0,t=1):(n=Ac(n),t===X?(t=n,n=0):t=Ac(t)),n>t){\nvar e=n;n=t,t=e}if(r||n%1||t%1){var u=Ql();return Hl(n+u*(t-n+Qr(\"1e-\"+((u+\"\").length-1))),t)}return tu(n,t)}function fa(n){return Qh(Ec(n).toLowerCase())}function ca(n){return n=Ec(n),n&&n.replace(Gt,ve).replace(Dr,\"\")}function aa(n,t,r){n=Ec(n),t=vu(t);var e=n.length;r=r===X?e:Mr(kc(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function la(n){return n=Ec(n),n&&At.test(n)?n.replace(xt,ge):n}function sa(n){return n=Ec(n),n&&Wt.test(n)?n.replace(St,\"\\\\$&\"):n}function ha(n,t,r){n=Ec(n),t=kc(t);\nvar e=t?V(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ri(Nl(u),r)+n+ri(Fl(u),r)}function pa(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?n+ri(t-e,r):n}function _a(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?ri(t-e,r)+n:n}function va(n,t,r){return r||null==t?t=0:t&&(t=+t),Yl(Ec(n).replace(Lt,\"\"),t||0)}function ga(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),eu(Ec(n),t)}function ya(){var n=arguments,t=Ec(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function da(n,t,r){return r&&\"number\"!=typeof r&&Ui(n,t,r)&&(t=r=X),\n(r=r===X?Un:r>>>0)?(n=Ec(n),n&&(\"string\"==typeof t||null!=t&&!Ah(t))&&(t=vu(t),!t&&T(n))?Ou(G(n),0,r):n.split(t,r)):[]}function ba(n,t,r){return n=Ec(n),r=null==r?0:Mr(kc(r),0,n.length),t=vu(t),n.slice(r,r+t.length)==t}function wa(n,t,r){var e=Z.templateSettings;r&&Ui(n,t,r)&&(t=X),n=Ec(n),t=Sh({},t,e,li);var u,i,o=Sh({},t.imports,e.imports,li),f=Pc(o),c=E(o,f),a=0,l=t.interpolate||Ht,s=\"__p += '\",h=sl((t.escape||Ht).source+\"|\"+l.source+\"|\"+(l===It?Ft:Ht).source+\"|\"+(t.evaluate||Ht).source+\"|$\",\"g\"),p=\"//# sourceURL=\"+(bl.call(t,\"sourceURL\")?(t.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Zr+\"]\")+\"\\n\";\nn.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Jt,U),r&&(u=!0,s+=\"' +\\n__e(\"+r+\") +\\n'\"),f&&(i=!0,s+=\"';\\n\"+f+\";\\n__p += '\"),e&&(s+=\"' +\\n((__t = (\"+e+\")) == null ? '' : __t) +\\n'\"),a=c+t.length,t}),s+=\"';\\n\";var _=bl.call(t,\"variable\")&&t.variable;if(_){if(Dt.test(_))throw new fl(un)}else s=\"with (obj) {\\n\"+s+\"\\n}\\n\";s=(i?s.replace(dt,\"\"):s).replace(bt,\"$1\").replace(wt,\"$1;\"),s=\"function(\"+(_||\"obj\")+\") {\\n\"+(_?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(u?\", __e = _.escape\":\"\")+(i?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+s+\"return __p\\n}\";\nvar v=Xh(function(){return cl(f,p+\"return \"+s).apply(X,c)});if(v.source=s,rc(v))throw v;return v}function ma(n){return Ec(n).toLowerCase()}function xa(n){return Ec(n).toUpperCase()}function ja(n,t,r){if(n=Ec(n),n&&(r||t===X))return R(n);if(!n||!(t=vu(t)))return n;var e=G(n),u=G(t);return Ou(e,W(e,u),L(e,u)+1).join(\"\")}function Aa(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.slice(0,H(n)+1);if(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,0,L(e,G(t))+1).join(\"\")}function ka(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.replace(Lt,\"\");\nif(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,W(e,G(t))).join(\"\")}function Oa(n,t){var r=An,e=kn;if(fc(t)){var u=\"separator\"in t?t.separator:u;r=\"length\"in t?kc(t.length):r,e=\"omission\"in t?vu(t.omission):e}n=Ec(n);var i=n.length;if(T(n)){var o=G(n);i=o.length}if(r>=i)return n;var f=r-V(e);if(f<1)return e;var c=o?Ou(o,0,f).join(\"\"):n.slice(0,f);if(u===X)return c+e;if(o&&(f+=c.length-f),Ah(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=sl(u.source,Ec(Nt.exec(u))+\"g\")),u.lastIndex=0;a=u.exec(l);)var s=a.index;\nc=c.slice(0,s===X?f:s)}}else if(n.indexOf(vu(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e}function Ia(n){return n=Ec(n),n&&jt.test(n)?n.replace(mt,ye):n}function Ra(n,t,r){return n=Ec(n),t=r?X:t,t===X?$(n)?Q(n):_(n):n.match(t)||[]}function za(t){var r=null==t?0:t.length,e=mi();return t=r?c(t,function(n){if(\"function\"!=typeof n[1])throw new pl(en);return[e(n[0]),n[1]]}):[],uu(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})}function Ea(n){\nreturn Nr(Fr(n,an))}function Sa(n){return function(){return n}}function Wa(n,t){return null==n||n!==n?t:n}function La(n){return n}function Ca(n){return De(\"function\"==typeof n?n:Fr(n,an))}function Ua(n){return qe(Fr(n,an))}function Ba(n,t){return Ze(n,Fr(t,an))}function Ta(n,t,e){var u=Pc(t),i=fe(t,u);null!=e||fc(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=fe(t,Pc(t)));var o=!(fc(e)&&\"chain\"in e&&!e.chain),f=uc(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;\nif(o||t){var r=n(this.__wrapped__);return(r.__actions__=Tu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function $a(){return re._===this&&(re._=Al),this}function Da(){}function Ma(n){return n=kc(n),uu(function(t){return Ge(t,n)})}function Fa(n){return Bi(n)?m(no(n)):Qe(n)}function Na(n){return function(t){return null==n?X:_e(n,t)}}function Pa(){return[]}function qa(){return!1}function Za(){return{}}function Ka(){return\"\";\n}function Va(){return!0}function Ga(n,t){if(n=kc(n),n<1||n>Wn)return[];var r=Un,e=Hl(n,Un);t=mi(t),n-=Un;for(var u=O(e,t);++r<n;)t(r);return u}function Ha(n){return bh(n)?c(n,no):bc(n)?[n]:Tu(Cs(Ec(n)))}function Ja(n){var t=++wl;return Ec(n)+t}function Ya(n){return n&&n.length?Yr(n,La,me):X}function Qa(n,t){return n&&n.length?Yr(n,mi(t,2),me):X}function Xa(n){return w(n,La)}function nl(n,t){return w(n,mi(t,2))}function tl(n){return n&&n.length?Yr(n,La,Ne):X}function rl(n,t){return n&&n.length?Yr(n,mi(t,2),Ne):X;\n}function el(n){return n&&n.length?k(n,La):0}function ul(n,t){return n&&n.length?k(n,mi(t,2)):0}x=null==x?re:be.defaults(re.Object(),x,be.pick(re,qr));var il=x.Array,ol=x.Date,fl=x.Error,cl=x.Function,al=x.Math,ll=x.Object,sl=x.RegExp,hl=x.String,pl=x.TypeError,_l=il.prototype,vl=cl.prototype,gl=ll.prototype,yl=x[\"__core-js_shared__\"],dl=vl.toString,bl=gl.hasOwnProperty,wl=0,ml=function(){var n=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||\"\");return n?\"Symbol(src)_1.\"+n:\"\"}(),xl=gl.toString,jl=dl.call(ll),Al=re._,kl=sl(\"^\"+dl.call(bl).replace(St,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Ol=ie?x.Buffer:X,Il=x.Symbol,Rl=x.Uint8Array,zl=Ol?Ol.allocUnsafe:X,El=F(ll.getPrototypeOf,ll),Sl=ll.create,Wl=gl.propertyIsEnumerable,Ll=_l.splice,Cl=Il?Il.isConcatSpreadable:X,Ul=Il?Il.iterator:X,Bl=Il?Il.toStringTag:X,Tl=function(){\ntry{var n=Ai(ll,\"defineProperty\");return n({},\"\",{}),n}catch(n){}}(),$l=x.clearTimeout!==re.clearTimeout&&x.clearTimeout,Dl=ol&&ol.now!==re.Date.now&&ol.now,Ml=x.setTimeout!==re.setTimeout&&x.setTimeout,Fl=al.ceil,Nl=al.floor,Pl=ll.getOwnPropertySymbols,ql=Ol?Ol.isBuffer:X,Zl=x.isFinite,Kl=_l.join,Vl=F(ll.keys,ll),Gl=al.max,Hl=al.min,Jl=ol.now,Yl=x.parseInt,Ql=al.random,Xl=_l.reverse,ns=Ai(x,\"DataView\"),ts=Ai(x,\"Map\"),rs=Ai(x,\"Promise\"),es=Ai(x,\"Set\"),us=Ai(x,\"WeakMap\"),is=Ai(ll,\"create\"),os=us&&new us,fs={},cs=to(ns),as=to(ts),ls=to(rs),ss=to(es),hs=to(us),ps=Il?Il.prototype:X,_s=ps?ps.valueOf:X,vs=ps?ps.toString:X,gs=function(){\nfunction n(){}return function(t){if(!fc(t))return{};if(Sl)return Sl(t);n.prototype=t;var r=new n;return n.prototype=X,r}}();Z.templateSettings={escape:kt,evaluate:Ot,interpolate:It,variable:\"\",imports:{_:Z}},Z.prototype=J.prototype,Z.prototype.constructor=Z,Y.prototype=gs(J.prototype),Y.prototype.constructor=Y,Ct.prototype=gs(J.prototype),Ct.prototype.constructor=Ct,Xt.prototype.clear=nr,Xt.prototype.delete=tr,Xt.prototype.get=rr,Xt.prototype.has=er,Xt.prototype.set=ur,ir.prototype.clear=or,ir.prototype.delete=fr,\nir.prototype.get=cr,ir.prototype.has=ar,ir.prototype.set=lr,sr.prototype.clear=hr,sr.prototype.delete=pr,sr.prototype.get=_r,sr.prototype.has=vr,sr.prototype.set=gr,yr.prototype.add=yr.prototype.push=dr,yr.prototype.has=br,wr.prototype.clear=mr,wr.prototype.delete=xr,wr.prototype.get=jr,wr.prototype.has=Ar,wr.prototype.set=kr;var ys=Pu(ue),ds=Pu(oe,!0),bs=qu(),ws=qu(!0),ms=os?function(n,t){return os.set(n,t),n}:La,xs=Tl?function(n,t){return Tl(n,\"toString\",{configurable:!0,enumerable:!1,value:Sa(t),\nwritable:!0})}:La,js=uu,As=$l||function(n){return re.clearTimeout(n)},ks=es&&1/P(new es([,-0]))[1]==Sn?function(n){return new es(n)}:Da,Os=os?function(n){return os.get(n)}:Da,Is=Pl?function(n){return null==n?[]:(n=ll(n),i(Pl(n),function(t){return Wl.call(n,t)}))}:Pa,Rs=Pl?function(n){for(var t=[];n;)a(t,Is(n)),n=El(n);return t}:Pa,zs=we;(ns&&zs(new ns(new ArrayBuffer(1)))!=ct||ts&&zs(new ts)!=Gn||rs&&zs(rs.resolve())!=Qn||es&&zs(new es)!=tt||us&&zs(new us)!=it)&&(zs=function(n){var t=we(n),r=t==Yn?n.constructor:X,e=r?to(r):\"\";\nif(e)switch(e){case cs:return ct;case as:return Gn;case ls:return Qn;case ss:return tt;case hs:return it}return t});var Es=yl?uc:qa,Ss=Qi(ms),Ws=Ml||function(n,t){return re.setTimeout(n,t)},Ls=Qi(xs),Cs=Pi(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(\"\"),n.replace(Et,function(n,r,e,u){t.push(e?u.replace(Mt,\"$1\"):r||n)}),t}),Us=uu(function(n,t){return Jf(n)?Hr(n,ee(t,1,Jf,!0)):[]}),Bs=uu(function(n,t){var r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),mi(r,2)):[]}),Ts=uu(function(n,t){\nvar r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),X,r):[]}),$s=uu(function(n){var t=c(n,ju);return t.length&&t[0]===n[0]?ke(t):[]}),Ds=uu(function(n){var t=jo(n),r=c(n,ju);return t===jo(r)?t=X:r.pop(),r.length&&r[0]===n[0]?ke(r,mi(t,2)):[]}),Ms=uu(function(n){var t=jo(n),r=c(n,ju);return t=\"function\"==typeof t?t:X,t&&r.pop(),r.length&&r[0]===n[0]?ke(r,X,t):[]}),Fs=uu(Oo),Ns=gi(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return nu(n,c(t,function(n){return Ci(n,r)?+n:n}).sort(Lu)),e}),Ps=uu(function(n){\nreturn gu(ee(n,1,Jf,!0))}),qs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),gu(ee(n,1,Jf,!0),mi(t,2))}),Zs=uu(function(n){var t=jo(n);return t=\"function\"==typeof t?t:X,gu(ee(n,1,Jf,!0),X,t)}),Ks=uu(function(n,t){return Jf(n)?Hr(n,t):[]}),Vs=uu(function(n){return mu(i(n,Jf))}),Gs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),mu(i(n,Jf),mi(t,2))}),Hs=uu(function(n){var t=jo(n);return t=\"function\"==typeof t?t:X,mu(i(n,Jf),X,t)}),Js=uu(Go),Ys=uu(function(n){var t=n.length,r=t>1?n[t-1]:X;return r=\"function\"==typeof r?(n.pop(),\nr):X,Ho(n,r)}),Qs=gi(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Ct&&Ci(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:nf,args:[u],thisArg:X}),new Y(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(X),n})):this.thru(u)}),Xs=Fu(function(n,t,r){bl.call(n,r)?++n[r]:Br(n,r,1)}),nh=Ju(ho),th=Ju(po),rh=Fu(function(n,t,r){bl.call(n,r)?n[r].push(t):Br(n,r,[t])}),eh=uu(function(t,r,e){var u=-1,i=\"function\"==typeof r,o=Hf(t)?il(t.length):[];\nreturn ys(t,function(t){o[++u]=i?n(r,t,e):Ie(t,r,e)}),o}),uh=Fu(function(n,t,r){Br(n,r,t)}),ih=Fu(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),oh=uu(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Ui(n,t[0],t[1])?t=[]:r>2&&Ui(t[0],t[1],t[2])&&(t=[t[0]]),He(n,ee(t,1),[])}),fh=Dl||function(){return re.Date.now()},ch=uu(function(n,t,r){var e=_n;if(r.length){var u=N(r,wi(ch));e|=bn}return ai(n,e,t,r,u)}),ah=uu(function(n,t,r){var e=_n|vn;if(r.length){var u=N(r,wi(ah));e|=bn;\n}return ai(t,e,n,r,u)}),lh=uu(function(n,t){return Gr(n,1,t)}),sh=uu(function(n,t,r){return Gr(n,Ic(t)||0,r)});Cf.Cache=sr;var hh=js(function(t,r){r=1==r.length&&bh(r[0])?c(r[0],z(mi())):c(ee(r,1),z(mi()));var e=r.length;return uu(function(u){for(var i=-1,o=Hl(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),ph=uu(function(n,t){return ai(n,bn,X,t,N(t,wi(ph)))}),_h=uu(function(n,t){return ai(n,wn,X,t,N(t,wi(_h)))}),vh=gi(function(n,t){return ai(n,xn,X,X,X,t)}),gh=ii(me),yh=ii(function(n,t){\nreturn n>=t}),dh=Re(function(){return arguments}())?Re:function(n){return cc(n)&&bl.call(n,\"callee\")&&!Wl.call(n,\"callee\")},bh=il.isArray,wh=ce?z(ce):ze,mh=ql||qa,xh=ae?z(ae):Ee,jh=le?z(le):Le,Ah=se?z(se):Be,kh=he?z(he):Te,Oh=pe?z(pe):$e,Ih=ii(Ne),Rh=ii(function(n,t){return n<=t}),zh=Nu(function(n,t){if(Mi(t)||Hf(t))return $u(t,Pc(t),n),X;for(var r in t)bl.call(t,r)&&Sr(n,r,t[r])}),Eh=Nu(function(n,t){$u(t,qc(t),n)}),Sh=Nu(function(n,t,r,e){$u(t,qc(t),n,e)}),Wh=Nu(function(n,t,r,e){$u(t,Pc(t),n,e);\n}),Lh=gi(Tr),Ch=uu(function(n,t){n=ll(n);var r=-1,e=t.length,u=e>2?t[2]:X;for(u&&Ui(t[0],t[1],u)&&(e=1);++r<e;)for(var i=t[r],o=qc(i),f=-1,c=o.length;++f<c;){var a=o[f],l=n[a];(l===X||Gf(l,gl[a])&&!bl.call(n,a))&&(n[a]=i[a])}return n}),Uh=uu(function(t){return t.push(X,si),n(Mh,X,t)}),Bh=Xu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=xl.call(t)),n[t]=r},Sa(La)),Th=Xu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=xl.call(t)),bl.call(n,t)?n[t].push(r):n[t]=[r]},mi),$h=uu(Ie),Dh=Nu(function(n,t,r){\nKe(n,t,r)}),Mh=Nu(function(n,t,r,e){Ke(n,t,r,e)}),Fh=gi(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=ku(t,n),e||(e=t.length>1),t}),$u(n,di(n),r),e&&(r=Fr(r,an|ln|sn,hi));for(var u=t.length;u--;)yu(r,t[u]);return r}),Nh=gi(function(n,t){return null==n?{}:Je(n,t)}),Ph=ci(Pc),qh=ci(qc),Zh=Vu(function(n,t,r){return t=t.toLowerCase(),n+(r?fa(t):t)}),Kh=Vu(function(n,t,r){return n+(r?\"-\":\"\")+t.toLowerCase()}),Vh=Vu(function(n,t,r){return n+(r?\" \":\"\")+t.toLowerCase()}),Gh=Ku(\"toLowerCase\"),Hh=Vu(function(n,t,r){\nreturn n+(r?\"_\":\"\")+t.toLowerCase()}),Jh=Vu(function(n,t,r){return n+(r?\" \":\"\")+Qh(t)}),Yh=Vu(function(n,t,r){return n+(r?\" \":\"\")+t.toUpperCase()}),Qh=Ku(\"toUpperCase\"),Xh=uu(function(t,r){try{return n(t,X,r)}catch(n){return rc(n)?n:new fl(n)}}),np=gi(function(n,t){return r(t,function(t){t=no(t),Br(n,t,ch(n[t],n))}),n}),tp=Yu(),rp=Yu(!0),ep=uu(function(n,t){return function(r){return Ie(r,n,t)}}),up=uu(function(n,t){return function(r){return Ie(n,r,t)}}),ip=ti(c),op=ti(u),fp=ti(h),cp=ui(),ap=ui(!0),lp=ni(function(n,t){\nreturn n+t},0),sp=fi(\"ceil\"),hp=ni(function(n,t){return n/t},1),pp=fi(\"floor\"),_p=ni(function(n,t){return n*t},1),vp=fi(\"round\"),gp=ni(function(n,t){return n-t},0);return Z.after=If,Z.ary=Rf,Z.assign=zh,Z.assignIn=Eh,Z.assignInWith=Sh,Z.assignWith=Wh,Z.at=Lh,Z.before=zf,Z.bind=ch,Z.bindAll=np,Z.bindKey=ah,Z.castArray=Nf,Z.chain=Qo,Z.chunk=uo,Z.compact=io,Z.concat=oo,Z.cond=za,Z.conforms=Ea,Z.constant=Sa,Z.countBy=Xs,Z.create=Sc,Z.curry=Ef,Z.curryRight=Sf,Z.debounce=Wf,Z.defaults=Ch,Z.defaultsDeep=Uh,\nZ.defer=lh,Z.delay=sh,Z.difference=Us,Z.differenceBy=Bs,Z.differenceWith=Ts,Z.drop=fo,Z.dropRight=co,Z.dropRightWhile=ao,Z.dropWhile=lo,Z.fill=so,Z.filter=lf,Z.flatMap=sf,Z.flatMapDeep=hf,Z.flatMapDepth=pf,Z.flatten=_o,Z.flattenDeep=vo,Z.flattenDepth=go,Z.flip=Lf,Z.flow=tp,Z.flowRight=rp,Z.fromPairs=yo,Z.functions=$c,Z.functionsIn=Dc,Z.groupBy=rh,Z.initial=mo,Z.intersection=$s,Z.intersectionBy=Ds,Z.intersectionWith=Ms,Z.invert=Bh,Z.invertBy=Th,Z.invokeMap=eh,Z.iteratee=Ca,Z.keyBy=uh,Z.keys=Pc,Z.keysIn=qc,\nZ.map=yf,Z.mapKeys=Zc,Z.mapValues=Kc,Z.matches=Ua,Z.matchesProperty=Ba,Z.memoize=Cf,Z.merge=Dh,Z.mergeWith=Mh,Z.method=ep,Z.methodOf=up,Z.mixin=Ta,Z.negate=Uf,Z.nthArg=Ma,Z.omit=Fh,Z.omitBy=Vc,Z.once=Bf,Z.orderBy=df,Z.over=ip,Z.overArgs=hh,Z.overEvery=op,Z.overSome=fp,Z.partial=ph,Z.partialRight=_h,Z.partition=ih,Z.pick=Nh,Z.pickBy=Gc,Z.property=Fa,Z.propertyOf=Na,Z.pull=Fs,Z.pullAll=Oo,Z.pullAllBy=Io,Z.pullAllWith=Ro,Z.pullAt=Ns,Z.range=cp,Z.rangeRight=ap,Z.rearg=vh,Z.reject=mf,Z.remove=zo,Z.rest=Tf,\nZ.reverse=Eo,Z.sampleSize=jf,Z.set=Jc,Z.setWith=Yc,Z.shuffle=Af,Z.slice=So,Z.sortBy=oh,Z.sortedUniq=$o,Z.sortedUniqBy=Do,Z.split=da,Z.spread=$f,Z.tail=Mo,Z.take=Fo,Z.takeRight=No,Z.takeRightWhile=Po,Z.takeWhile=qo,Z.tap=Xo,Z.throttle=Df,Z.thru=nf,Z.toArray=jc,Z.toPairs=Ph,Z.toPairsIn=qh,Z.toPath=Ha,Z.toPlainObject=Rc,Z.transform=Qc,Z.unary=Mf,Z.union=Ps,Z.unionBy=qs,Z.unionWith=Zs,Z.uniq=Zo,Z.uniqBy=Ko,Z.uniqWith=Vo,Z.unset=Xc,Z.unzip=Go,Z.unzipWith=Ho,Z.update=na,Z.updateWith=ta,Z.values=ra,Z.valuesIn=ea,\nZ.without=Ks,Z.words=Ra,Z.wrap=Ff,Z.xor=Vs,Z.xorBy=Gs,Z.xorWith=Hs,Z.zip=Js,Z.zipObject=Jo,Z.zipObjectDeep=Yo,Z.zipWith=Ys,Z.entries=Ph,Z.entriesIn=qh,Z.extend=Eh,Z.extendWith=Sh,Ta(Z,Z),Z.add=lp,Z.attempt=Xh,Z.camelCase=Zh,Z.capitalize=fa,Z.ceil=sp,Z.clamp=ua,Z.clone=Pf,Z.cloneDeep=Zf,Z.cloneDeepWith=Kf,Z.cloneWith=qf,Z.conformsTo=Vf,Z.deburr=ca,Z.defaultTo=Wa,Z.divide=hp,Z.endsWith=aa,Z.eq=Gf,Z.escape=la,Z.escapeRegExp=sa,Z.every=af,Z.find=nh,Z.findIndex=ho,Z.findKey=Wc,Z.findLast=th,Z.findLastIndex=po,\nZ.findLastKey=Lc,Z.floor=pp,Z.forEach=_f,Z.forEachRight=vf,Z.forIn=Cc,Z.forInRight=Uc,Z.forOwn=Bc,Z.forOwnRight=Tc,Z.get=Mc,Z.gt=gh,Z.gte=yh,Z.has=Fc,Z.hasIn=Nc,Z.head=bo,Z.identity=La,Z.includes=gf,Z.indexOf=wo,Z.inRange=ia,Z.invoke=$h,Z.isArguments=dh,Z.isArray=bh,Z.isArrayBuffer=wh,Z.isArrayLike=Hf,Z.isArrayLikeObject=Jf,Z.isBoolean=Yf,Z.isBuffer=mh,Z.isDate=xh,Z.isElement=Qf,Z.isEmpty=Xf,Z.isEqual=nc,Z.isEqualWith=tc,Z.isError=rc,Z.isFinite=ec,Z.isFunction=uc,Z.isInteger=ic,Z.isLength=oc,Z.isMap=jh,\nZ.isMatch=ac,Z.isMatchWith=lc,Z.isNaN=sc,Z.isNative=hc,Z.isNil=_c,Z.isNull=pc,Z.isNumber=vc,Z.isObject=fc,Z.isObjectLike=cc,Z.isPlainObject=gc,Z.isRegExp=Ah,Z.isSafeInteger=yc,Z.isSet=kh,Z.isString=dc,Z.isSymbol=bc,Z.isTypedArray=Oh,Z.isUndefined=wc,Z.isWeakMap=mc,Z.isWeakSet=xc,Z.join=xo,Z.kebabCase=Kh,Z.last=jo,Z.lastIndexOf=Ao,Z.lowerCase=Vh,Z.lowerFirst=Gh,Z.lt=Ih,Z.lte=Rh,Z.max=Ya,Z.maxBy=Qa,Z.mean=Xa,Z.meanBy=nl,Z.min=tl,Z.minBy=rl,Z.stubArray=Pa,Z.stubFalse=qa,Z.stubObject=Za,Z.stubString=Ka,\nZ.stubTrue=Va,Z.multiply=_p,Z.nth=ko,Z.noConflict=$a,Z.noop=Da,Z.now=fh,Z.pad=ha,Z.padEnd=pa,Z.padStart=_a,Z.parseInt=va,Z.random=oa,Z.reduce=bf,Z.reduceRight=wf,Z.repeat=ga,Z.replace=ya,Z.result=Hc,Z.round=vp,Z.runInContext=p,Z.sample=xf,Z.size=kf,Z.snakeCase=Hh,Z.some=Of,Z.sortedIndex=Wo,Z.sortedIndexBy=Lo,Z.sortedIndexOf=Co,Z.sortedLastIndex=Uo,Z.sortedLastIndexBy=Bo,Z.sortedLastIndexOf=To,Z.startCase=Jh,Z.startsWith=ba,Z.subtract=gp,Z.sum=el,Z.sumBy=ul,Z.template=wa,Z.times=Ga,Z.toFinite=Ac,Z.toInteger=kc,\nZ.toLength=Oc,Z.toLower=ma,Z.toNumber=Ic,Z.toSafeInteger=zc,Z.toString=Ec,Z.toUpper=xa,Z.trim=ja,Z.trimEnd=Aa,Z.trimStart=ka,Z.truncate=Oa,Z.unescape=Ia,Z.uniqueId=Ja,Z.upperCase=Yh,Z.upperFirst=Qh,Z.each=_f,Z.eachRight=vf,Z.first=bo,Ta(Z,function(){var n={};return ue(Z,function(t,r){bl.call(Z.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),Z.VERSION=nn,r([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],function(n){Z[n].placeholder=Z}),r([\"drop\",\"take\"],function(n,t){Ct.prototype[n]=function(r){\nr=r===X?1:Gl(kc(r),0);var e=this.__filtered__&&!t?new Ct(this):this.clone();return e.__filtered__?e.__takeCount__=Hl(r,e.__takeCount__):e.__views__.push({size:Hl(r,Un),type:n+(e.__dir__<0?\"Right\":\"\")}),e},Ct.prototype[n+\"Right\"]=function(t){return this.reverse()[n](t).reverse()}}),r([\"filter\",\"map\",\"takeWhile\"],function(n,t){var r=t+1,e=r==Rn||r==En;Ct.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:mi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r([\"head\",\"last\"],function(n,t){\nvar r=\"take\"+(t?\"Right\":\"\");Ct.prototype[n]=function(){return this[r](1).value()[0]}}),r([\"initial\",\"tail\"],function(n,t){var r=\"drop\"+(t?\"\":\"Right\");Ct.prototype[n]=function(){return this.__filtered__?new Ct(this):this[r](1)}}),Ct.prototype.compact=function(){return this.filter(La)},Ct.prototype.find=function(n){return this.filter(n).head()},Ct.prototype.findLast=function(n){return this.reverse().find(n)},Ct.prototype.invokeMap=uu(function(n,t){return\"function\"==typeof n?new Ct(this):this.map(function(r){\nreturn Ie(r,n,t)})}),Ct.prototype.reject=function(n){return this.filter(Uf(mi(n)))},Ct.prototype.slice=function(n,t){n=kc(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Ct(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==X&&(t=kc(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Ct.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Ct.prototype.toArray=function(){return this.take(Un)},ue(Ct.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=Z[e?\"take\"+(\"last\"==t?\"Right\":\"\"):t],i=e||/^find/.test(t);\nu&&(Z.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Ct,c=o[0],l=f||bh(t),s=function(n){var t=u.apply(Z,a([n],o));return e&&h?t[0]:t};l&&r&&\"function\"==typeof c&&1!=c.length&&(f=l=!1);var h=this.__chain__,p=!!this.__actions__.length,_=i&&!h,v=f&&!p;if(!i&&l){t=v?t:new Ct(this);var g=n.apply(t,o);return g.__actions__.push({func:nf,args:[s],thisArg:X}),new Y(g,h)}return _&&v?n.apply(this,o):(g=this.thru(s),_?e?g.value()[0]:g.value():g)})}),r([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){\nvar t=_l[n],r=/^(?:push|sort|unshift)$/.test(n)?\"tap\":\"thru\",e=/^(?:pop|shift)$/.test(n);Z.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(bh(u)?u:[],n)}return this[r](function(r){return t.apply(bh(r)?r:[],n)})}}),ue(Ct.prototype,function(n,t){var r=Z[t];if(r){var e=r.name+\"\";bl.call(fs,e)||(fs[e]=[]),fs[e].push({name:t,func:r})}}),fs[Qu(X,vn).name]=[{name:\"wrapper\",func:X}],Ct.prototype.clone=$t,Ct.prototype.reverse=Yt,Ct.prototype.value=Qt,Z.prototype.at=Qs,\nZ.prototype.chain=tf,Z.prototype.commit=rf,Z.prototype.next=ef,Z.prototype.plant=of,Z.prototype.reverse=ff,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=cf,Z.prototype.first=Z.prototype.head,Ul&&(Z.prototype[Ul]=uf),Z},be=de();\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?(re._=be,define(function(){return be})):ue?((ue.exports=be)._=be,ee._=be):re._=be}).call(this);","var mapping = require('./_mapping'),\n    fallbackHolder = require('./placeholder');\n\n/** Built-in value reference. */\nvar push = Array.prototype.push;\n\n/**\n * Creates a function, with an arity of `n`, that invokes `func` with the\n * arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} n The arity of the new function.\n * @returns {Function} Returns the new function.\n */\nfunction baseArity(func, n) {\n  return n == 2\n    ? function(a, b) { return func.apply(undefined, arguments); }\n    : function(a) { return func.apply(undefined, arguments); };\n}\n\n/**\n * Creates a function that invokes `func`, with up to `n` arguments, ignoring\n * any additional arguments.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @param {number} n The arity cap.\n * @returns {Function} Returns the new function.\n */\nfunction baseAry(func, n) {\n  return n == 2\n    ? function(a, b) { return func(a, b); }\n    : function(a) { return func(a); };\n}\n\n/**\n * Creates a clone of `array`.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the cloned array.\n */\nfunction cloneArray(array) {\n  var length = array ? array.length : 0,\n      result = Array(length);\n\n  while (length--) {\n    result[length] = array[length];\n  }\n  return result;\n}\n\n/**\n * Creates a function that clones a given object using the assignment `func`.\n *\n * @private\n * @param {Function} func The assignment function.\n * @returns {Function} Returns the new cloner function.\n */\nfunction createCloner(func) {\n  return function(object) {\n    return func({}, object);\n  };\n}\n\n/**\n * A specialized version of `_.spread` which flattens the spread array into\n * the arguments of the invoked `func`.\n *\n * @private\n * @param {Function} func The function to spread arguments over.\n * @param {number} start The start position of the spread.\n * @returns {Function} Returns the new function.\n */\nfunction flatSpread(func, start) {\n  return function() {\n    var length = arguments.length,\n        lastIndex = length - 1,\n        args = Array(length);\n\n    while (length--) {\n      args[length] = arguments[length];\n    }\n    var array = args[start],\n        otherArgs = args.slice(0, start);\n\n    if (array) {\n      push.apply(otherArgs, array);\n    }\n    if (start != lastIndex) {\n      push.apply(otherArgs, args.slice(start + 1));\n    }\n    return func.apply(this, otherArgs);\n  };\n}\n\n/**\n * Creates a function that wraps `func` and uses `cloner` to clone the first\n * argument it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} cloner The function to clone arguments.\n * @returns {Function} Returns the new immutable function.\n */\nfunction wrapImmutable(func, cloner) {\n  return function() {\n    var length = arguments.length;\n    if (!length) {\n      return;\n    }\n    var args = Array(length);\n    while (length--) {\n      args[length] = arguments[length];\n    }\n    var result = args[0] = cloner.apply(undefined, args);\n    func.apply(undefined, args);\n    return result;\n  };\n}\n\n/**\n * The base implementation of `convert` which accepts a `util` object of methods\n * required to perform conversions.\n *\n * @param {Object} util The util object.\n * @param {string} name The name of the function to convert.\n * @param {Function} func The function to convert.\n * @param {Object} [options] The options object.\n * @param {boolean} [options.cap=true] Specify capping iteratee arguments.\n * @param {boolean} [options.curry=true] Specify currying.\n * @param {boolean} [options.fixed=true] Specify fixed arity.\n * @param {boolean} [options.immutable=true] Specify immutable operations.\n * @param {boolean} [options.rearg=true] Specify rearranging arguments.\n * @returns {Function|Object} Returns the converted function or object.\n */\nfunction baseConvert(util, name, func, options) {\n  var isLib = typeof name == 'function',\n      isObj = name === Object(name);\n\n  if (isObj) {\n    options = func;\n    func = name;\n    name = undefined;\n  }\n  if (func == null) {\n    throw new TypeError;\n  }\n  options || (options = {});\n\n  var config = {\n    'cap': 'cap' in options ? options.cap : true,\n    'curry': 'curry' in options ? options.curry : true,\n    'fixed': 'fixed' in options ? options.fixed : true,\n    'immutable': 'immutable' in options ? options.immutable : true,\n    'rearg': 'rearg' in options ? options.rearg : true\n  };\n\n  var defaultHolder = isLib ? func : fallbackHolder,\n      forceCurry = ('curry' in options) && options.curry,\n      forceFixed = ('fixed' in options) && options.fixed,\n      forceRearg = ('rearg' in options) && options.rearg,\n      pristine = isLib ? func.runInContext() : undefined;\n\n  var helpers = isLib ? func : {\n    'ary': util.ary,\n    'assign': util.assign,\n    'clone': util.clone,\n    'curry': util.curry,\n    'forEach': util.forEach,\n    'isArray': util.isArray,\n    'isError': util.isError,\n    'isFunction': util.isFunction,\n    'isWeakMap': util.isWeakMap,\n    'iteratee': util.iteratee,\n    'keys': util.keys,\n    'rearg': util.rearg,\n    'toInteger': util.toInteger,\n    'toPath': util.toPath\n  };\n\n  var ary = helpers.ary,\n      assign = helpers.assign,\n      clone = helpers.clone,\n      curry = helpers.curry,\n      each = helpers.forEach,\n      isArray = helpers.isArray,\n      isError = helpers.isError,\n      isFunction = helpers.isFunction,\n      isWeakMap = helpers.isWeakMap,\n      keys = helpers.keys,\n      rearg = helpers.rearg,\n      toInteger = helpers.toInteger,\n      toPath = helpers.toPath;\n\n  var aryMethodKeys = keys(mapping.aryMethod);\n\n  var wrappers = {\n    'castArray': function(castArray) {\n      return function() {\n        var value = arguments[0];\n        return isArray(value)\n          ? castArray(cloneArray(value))\n          : castArray.apply(undefined, arguments);\n      };\n    },\n    'iteratee': function(iteratee) {\n      return function() {\n        var func = arguments[0],\n            arity = arguments[1],\n            result = iteratee(func, arity),\n            length = result.length;\n\n        if (config.cap && typeof arity == 'number') {\n          arity = arity > 2 ? (arity - 2) : 1;\n          return (length && length <= arity) ? result : baseAry(result, arity);\n        }\n        return result;\n      };\n    },\n    'mixin': function(mixin) {\n      return function(source) {\n        var func = this;\n        if (!isFunction(func)) {\n          return mixin(func, Object(source));\n        }\n        var pairs = [];\n        each(keys(source), function(key) {\n          if (isFunction(source[key])) {\n            pairs.push([key, func.prototype[key]]);\n          }\n        });\n\n        mixin(func, Object(source));\n\n        each(pairs, function(pair) {\n          var value = pair[1];\n          if (isFunction(value)) {\n            func.prototype[pair[0]] = value;\n          } else {\n            delete func.prototype[pair[0]];\n          }\n        });\n        return func;\n      };\n    },\n    'nthArg': function(nthArg) {\n      return function(n) {\n        var arity = n < 0 ? 1 : (toInteger(n) + 1);\n        return curry(nthArg(n), arity);\n      };\n    },\n    'rearg': function(rearg) {\n      return function(func, indexes) {\n        var arity = indexes ? indexes.length : 0;\n        return curry(rearg(func, indexes), arity);\n      };\n    },\n    'runInContext': function(runInContext) {\n      return function(context) {\n        return baseConvert(util, runInContext(context), options);\n      };\n    }\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Casts `func` to a function with an arity capped iteratee if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @returns {Function} Returns the cast function.\n   */\n  function castCap(name, func) {\n    if (config.cap) {\n      var indexes = mapping.iterateeRearg[name];\n      if (indexes) {\n        return iterateeRearg(func, indexes);\n      }\n      var n = !isLib && mapping.iterateeAry[name];\n      if (n) {\n        return iterateeAry(func, n);\n      }\n    }\n    return func;\n  }\n\n  /**\n   * Casts `func` to a curried function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity of `func`.\n   * @returns {Function} Returns the cast function.\n   */\n  function castCurry(name, func, n) {\n    return (forceCurry || (config.curry && n > 1))\n      ? curry(func, n)\n      : func;\n  }\n\n  /**\n   * Casts `func` to a fixed arity function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity cap.\n   * @returns {Function} Returns the cast function.\n   */\n  function castFixed(name, func, n) {\n    if (config.fixed && (forceFixed || !mapping.skipFixed[name])) {\n      var data = mapping.methodSpread[name],\n          start = data && data.start;\n\n      return start  === undefined ? ary(func, n) : flatSpread(func, start);\n    }\n    return func;\n  }\n\n  /**\n   * Casts `func` to an rearged function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity of `func`.\n   * @returns {Function} Returns the cast function.\n   */\n  function castRearg(name, func, n) {\n    return (config.rearg && n > 1 && (forceRearg || !mapping.skipRearg[name]))\n      ? rearg(func, mapping.methodRearg[name] || mapping.aryRearg[n])\n      : func;\n  }\n\n  /**\n   * Creates a clone of `object` by `path`.\n   *\n   * @private\n   * @param {Object} object The object to clone.\n   * @param {Array|string} path The path to clone by.\n   * @returns {Object} Returns the cloned object.\n   */\n  function cloneByPath(object, path) {\n    path = toPath(path);\n\n    var index = -1,\n        length = path.length,\n        lastIndex = length - 1,\n        result = clone(Object(object)),\n        nested = result;\n\n    while (nested != null && ++index < length) {\n      var key = path[index],\n          value = nested[key];\n\n      if (value != null &&\n          !(isFunction(value) || isError(value) || isWeakMap(value))) {\n        nested[key] = clone(index == lastIndex ? value : Object(value));\n      }\n      nested = nested[key];\n    }\n    return result;\n  }\n\n  /**\n   * Converts `lodash` to an immutable auto-curried iteratee-first data-last\n   * version with conversion `options` applied.\n   *\n   * @param {Object} [options] The options object. See `baseConvert` for more details.\n   * @returns {Function} Returns the converted `lodash`.\n   */\n  function convertLib(options) {\n    return _.runInContext.convert(options)(undefined);\n  }\n\n  /**\n   * Create a converter function for `func` of `name`.\n   *\n   * @param {string} name The name of the function to convert.\n   * @param {Function} func The function to convert.\n   * @returns {Function} Returns the new converter function.\n   */\n  function createConverter(name, func) {\n    var realName = mapping.aliasToReal[name] || name,\n        methodName = mapping.remap[realName] || realName,\n        oldOptions = options;\n\n    return function(options) {\n      var newUtil = isLib ? pristine : helpers,\n          newFunc = isLib ? pristine[methodName] : func,\n          newOptions = assign(assign({}, oldOptions), options);\n\n      return baseConvert(newUtil, realName, newFunc, newOptions);\n    };\n  }\n\n  /**\n   * Creates a function that wraps `func` to invoke its iteratee, with up to `n`\n   * arguments, ignoring any additional arguments.\n   *\n   * @private\n   * @param {Function} func The function to cap iteratee arguments for.\n   * @param {number} n The arity cap.\n   * @returns {Function} Returns the new function.\n   */\n  function iterateeAry(func, n) {\n    return overArg(func, function(func) {\n      return typeof func == 'function' ? baseAry(func, n) : func;\n    });\n  }\n\n  /**\n   * Creates a function that wraps `func` to invoke its iteratee with arguments\n   * arranged according to the specified `indexes` where the argument value at\n   * the first index is provided as the first argument, the argument value at\n   * the second index is provided as the second argument, and so on.\n   *\n   * @private\n   * @param {Function} func The function to rearrange iteratee arguments for.\n   * @param {number[]} indexes The arranged argument indexes.\n   * @returns {Function} Returns the new function.\n   */\n  function iterateeRearg(func, indexes) {\n    return overArg(func, function(func) {\n      var n = indexes.length;\n      return baseArity(rearg(baseAry(func, n), indexes), n);\n    });\n  }\n\n  /**\n   * Creates a function that invokes `func` with its first argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function() {\n      var length = arguments.length;\n      if (!length) {\n        return func();\n      }\n      var args = Array(length);\n      while (length--) {\n        args[length] = arguments[length];\n      }\n      var index = config.rearg ? 0 : (length - 1);\n      args[index] = transform(args[index]);\n      return func.apply(undefined, args);\n    };\n  }\n\n  /**\n   * Creates a function that wraps `func` and applys the conversions\n   * rules by `name`.\n   *\n   * @private\n   * @param {string} name The name of the function to wrap.\n   * @param {Function} func The function to wrap.\n   * @returns {Function} Returns the converted function.\n   */\n  function wrap(name, func, placeholder) {\n    var result,\n        realName = mapping.aliasToReal[name] || name,\n        wrapped = func,\n        wrapper = wrappers[realName];\n\n    if (wrapper) {\n      wrapped = wrapper(func);\n    }\n    else if (config.immutable) {\n      if (mapping.mutate.array[realName]) {\n        wrapped = wrapImmutable(func, cloneArray);\n      }\n      else if (mapping.mutate.object[realName]) {\n        wrapped = wrapImmutable(func, createCloner(func));\n      }\n      else if (mapping.mutate.set[realName]) {\n        wrapped = wrapImmutable(func, cloneByPath);\n      }\n    }\n    each(aryMethodKeys, function(aryKey) {\n      each(mapping.aryMethod[aryKey], function(otherName) {\n        if (realName == otherName) {\n          var data = mapping.methodSpread[realName],\n              afterRearg = data && data.afterRearg;\n\n          result = afterRearg\n            ? castFixed(realName, castRearg(realName, wrapped, aryKey), aryKey)\n            : castRearg(realName, castFixed(realName, wrapped, aryKey), aryKey);\n\n          result = castCap(realName, result);\n          result = castCurry(realName, result, aryKey);\n          return false;\n        }\n      });\n      return !result;\n    });\n\n    result || (result = wrapped);\n    if (result == func) {\n      result = forceCurry ? curry(result, 1) : function() {\n        return func.apply(this, arguments);\n      };\n    }\n    result.convert = createConverter(realName, func);\n    result.placeholder = func.placeholder = placeholder;\n\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  if (!isObj) {\n    return wrap(name, func, defaultHolder);\n  }\n  var _ = func;\n\n  // Convert methods by ary cap.\n  var pairs = [];\n  each(aryMethodKeys, function(aryKey) {\n    each(mapping.aryMethod[aryKey], function(key) {\n      var func = _[mapping.remap[key] || key];\n      if (func) {\n        pairs.push([key, wrap(key, func, _)]);\n      }\n    });\n  });\n\n  // Convert remaining methods.\n  each(keys(_), function(key) {\n    var func = _[key];\n    if (typeof func == 'function') {\n      var length = pairs.length;\n      while (length--) {\n        if (pairs[length][0] == key) {\n          return;\n        }\n      }\n      func.convert = createConverter(key, func);\n      pairs.push([key, func]);\n    }\n  });\n\n  // Assign to `_` leaving `_.prototype` unchanged to allow chaining.\n  each(pairs, function(pair) {\n    _[pair[0]] = pair[1];\n  });\n\n  _.convert = convertLib;\n  _.placeholder = _;\n\n  // Assign aliases.\n  each(keys(_), function(key) {\n    each(mapping.realToAlias[key] || [], function(alias) {\n      _[alias] = _[key];\n    });\n  });\n\n  return _;\n}\n\nmodule.exports = baseConvert;\n","/** Used to map aliases to their real names. */\nexports.aliasToReal = {\n\n  // Lodash aliases.\n  'each': 'forEach',\n  'eachRight': 'forEachRight',\n  'entries': 'toPairs',\n  'entriesIn': 'toPairsIn',\n  'extend': 'assignIn',\n  'extendAll': 'assignInAll',\n  'extendAllWith': 'assignInAllWith',\n  'extendWith': 'assignInWith',\n  'first': 'head',\n\n  // Methods that are curried variants of others.\n  'conforms': 'conformsTo',\n  'matches': 'isMatch',\n  'property': 'get',\n\n  // Ramda aliases.\n  '__': 'placeholder',\n  'F': 'stubFalse',\n  'T': 'stubTrue',\n  'all': 'every',\n  'allPass': 'overEvery',\n  'always': 'constant',\n  'any': 'some',\n  'anyPass': 'overSome',\n  'apply': 'spread',\n  'assoc': 'set',\n  'assocPath': 'set',\n  'complement': 'negate',\n  'compose': 'flowRight',\n  'contains': 'includes',\n  'dissoc': 'unset',\n  'dissocPath': 'unset',\n  'dropLast': 'dropRight',\n  'dropLastWhile': 'dropRightWhile',\n  'equals': 'isEqual',\n  'identical': 'eq',\n  'indexBy': 'keyBy',\n  'init': 'initial',\n  'invertObj': 'invert',\n  'juxt': 'over',\n  'omitAll': 'omit',\n  'nAry': 'ary',\n  'path': 'get',\n  'pathEq': 'matchesProperty',\n  'pathOr': 'getOr',\n  'paths': 'at',\n  'pickAll': 'pick',\n  'pipe': 'flow',\n  'pluck': 'map',\n  'prop': 'get',\n  'propEq': 'matchesProperty',\n  'propOr': 'getOr',\n  'props': 'at',\n  'symmetricDifference': 'xor',\n  'symmetricDifferenceBy': 'xorBy',\n  'symmetricDifferenceWith': 'xorWith',\n  'takeLast': 'takeRight',\n  'takeLastWhile': 'takeRightWhile',\n  'unapply': 'rest',\n  'unnest': 'flatten',\n  'useWith': 'overArgs',\n  'where': 'conformsTo',\n  'whereEq': 'isMatch',\n  'zipObj': 'zipObject'\n};\n\n/** Used to map ary to method names. */\nexports.aryMethod = {\n  '1': [\n    'assignAll', 'assignInAll', 'attempt', 'castArray', 'ceil', 'create',\n    'curry', 'curryRight', 'defaultsAll', 'defaultsDeepAll', 'floor', 'flow',\n    'flowRight', 'fromPairs', 'invert', 'iteratee', 'memoize', 'method', 'mergeAll',\n    'methodOf', 'mixin', 'nthArg', 'over', 'overEvery', 'overSome','rest', 'reverse',\n    'round', 'runInContext', 'spread', 'template', 'trim', 'trimEnd', 'trimStart',\n    'uniqueId', 'words', 'zipAll'\n  ],\n  '2': [\n    'add', 'after', 'ary', 'assign', 'assignAllWith', 'assignIn', 'assignInAllWith',\n    'at', 'before', 'bind', 'bindAll', 'bindKey', 'chunk', 'cloneDeepWith',\n    'cloneWith', 'concat', 'conformsTo', 'countBy', 'curryN', 'curryRightN',\n    'debounce', 'defaults', 'defaultsDeep', 'defaultTo', 'delay', 'difference',\n    'divide', 'drop', 'dropRight', 'dropRightWhile', 'dropWhile', 'endsWith', 'eq',\n    'every', 'filter', 'find', 'findIndex', 'findKey', 'findLast', 'findLastIndex',\n    'findLastKey', 'flatMap', 'flatMapDeep', 'flattenDepth', 'forEach',\n    'forEachRight', 'forIn', 'forInRight', 'forOwn', 'forOwnRight', 'get',\n    'groupBy', 'gt', 'gte', 'has', 'hasIn', 'includes', 'indexOf', 'intersection',\n    'invertBy', 'invoke', 'invokeMap', 'isEqual', 'isMatch', 'join', 'keyBy',\n    'lastIndexOf', 'lt', 'lte', 'map', 'mapKeys', 'mapValues', 'matchesProperty',\n    'maxBy', 'meanBy', 'merge', 'mergeAllWith', 'minBy', 'multiply', 'nth', 'omit',\n    'omitBy', 'overArgs', 'pad', 'padEnd', 'padStart', 'parseInt', 'partial',\n    'partialRight', 'partition', 'pick', 'pickBy', 'propertyOf', 'pull', 'pullAll',\n    'pullAt', 'random', 'range', 'rangeRight', 'rearg', 'reject', 'remove',\n    'repeat', 'restFrom', 'result', 'sampleSize', 'some', 'sortBy', 'sortedIndex',\n    'sortedIndexOf', 'sortedLastIndex', 'sortedLastIndexOf', 'sortedUniqBy',\n    'split', 'spreadFrom', 'startsWith', 'subtract', 'sumBy', 'take', 'takeRight',\n    'takeRightWhile', 'takeWhile', 'tap', 'throttle', 'thru', 'times', 'trimChars',\n    'trimCharsEnd', 'trimCharsStart', 'truncate', 'union', 'uniqBy', 'uniqWith',\n    'unset', 'unzipWith', 'without', 'wrap', 'xor', 'zip', 'zipObject',\n    'zipObjectDeep'\n  ],\n  '3': [\n    'assignInWith', 'assignWith', 'clamp', 'differenceBy', 'differenceWith',\n    'findFrom', 'findIndexFrom', 'findLastFrom', 'findLastIndexFrom', 'getOr',\n    'includesFrom', 'indexOfFrom', 'inRange', 'intersectionBy', 'intersectionWith',\n    'invokeArgs', 'invokeArgsMap', 'isEqualWith', 'isMatchWith', 'flatMapDepth',\n    'lastIndexOfFrom', 'mergeWith', 'orderBy', 'padChars', 'padCharsEnd',\n    'padCharsStart', 'pullAllBy', 'pullAllWith', 'rangeStep', 'rangeStepRight',\n    'reduce', 'reduceRight', 'replace', 'set', 'slice', 'sortedIndexBy',\n    'sortedLastIndexBy', 'transform', 'unionBy', 'unionWith', 'update', 'xorBy',\n    'xorWith', 'zipWith'\n  ],\n  '4': [\n    'fill', 'setWith', 'updateWith'\n  ]\n};\n\n/** Used to map ary to rearg configs. */\nexports.aryRearg = {\n  '2': [1, 0],\n  '3': [2, 0, 1],\n  '4': [3, 2, 0, 1]\n};\n\n/** Used to map method names to their iteratee ary. */\nexports.iterateeAry = {\n  'dropRightWhile': 1,\n  'dropWhile': 1,\n  'every': 1,\n  'filter': 1,\n  'find': 1,\n  'findFrom': 1,\n  'findIndex': 1,\n  'findIndexFrom': 1,\n  'findKey': 1,\n  'findLast': 1,\n  'findLastFrom': 1,\n  'findLastIndex': 1,\n  'findLastIndexFrom': 1,\n  'findLastKey': 1,\n  'flatMap': 1,\n  'flatMapDeep': 1,\n  'flatMapDepth': 1,\n  'forEach': 1,\n  'forEachRight': 1,\n  'forIn': 1,\n  'forInRight': 1,\n  'forOwn': 1,\n  'forOwnRight': 1,\n  'map': 1,\n  'mapKeys': 1,\n  'mapValues': 1,\n  'partition': 1,\n  'reduce': 2,\n  'reduceRight': 2,\n  'reject': 1,\n  'remove': 1,\n  'some': 1,\n  'takeRightWhile': 1,\n  'takeWhile': 1,\n  'times': 1,\n  'transform': 2\n};\n\n/** Used to map method names to iteratee rearg configs. */\nexports.iterateeRearg = {\n  'mapKeys': [1],\n  'reduceRight': [1, 0]\n};\n\n/** Used to map method names to rearg configs. */\nexports.methodRearg = {\n  'assignInAllWith': [1, 0],\n  'assignInWith': [1, 2, 0],\n  'assignAllWith': [1, 0],\n  'assignWith': [1, 2, 0],\n  'differenceBy': [1, 2, 0],\n  'differenceWith': [1, 2, 0],\n  'getOr': [2, 1, 0],\n  'intersectionBy': [1, 2, 0],\n  'intersectionWith': [1, 2, 0],\n  'isEqualWith': [1, 2, 0],\n  'isMatchWith': [2, 1, 0],\n  'mergeAllWith': [1, 0],\n  'mergeWith': [1, 2, 0],\n  'padChars': [2, 1, 0],\n  'padCharsEnd': [2, 1, 0],\n  'padCharsStart': [2, 1, 0],\n  'pullAllBy': [2, 1, 0],\n  'pullAllWith': [2, 1, 0],\n  'rangeStep': [1, 2, 0],\n  'rangeStepRight': [1, 2, 0],\n  'setWith': [3, 1, 2, 0],\n  'sortedIndexBy': [2, 1, 0],\n  'sortedLastIndexBy': [2, 1, 0],\n  'unionBy': [1, 2, 0],\n  'unionWith': [1, 2, 0],\n  'updateWith': [3, 1, 2, 0],\n  'xorBy': [1, 2, 0],\n  'xorWith': [1, 2, 0],\n  'zipWith': [1, 2, 0]\n};\n\n/** Used to map method names to spread configs. */\nexports.methodSpread = {\n  'assignAll': { 'start': 0 },\n  'assignAllWith': { 'start': 0 },\n  'assignInAll': { 'start': 0 },\n  'assignInAllWith': { 'start': 0 },\n  'defaultsAll': { 'start': 0 },\n  'defaultsDeepAll': { 'start': 0 },\n  'invokeArgs': { 'start': 2 },\n  'invokeArgsMap': { 'start': 2 },\n  'mergeAll': { 'start': 0 },\n  'mergeAllWith': { 'start': 0 },\n  'partial': { 'start': 1 },\n  'partialRight': { 'start': 1 },\n  'without': { 'start': 1 },\n  'zipAll': { 'start': 0 }\n};\n\n/** Used to identify methods which mutate arrays or objects. */\nexports.mutate = {\n  'array': {\n    'fill': true,\n    'pull': true,\n    'pullAll': true,\n    'pullAllBy': true,\n    'pullAllWith': true,\n    'pullAt': true,\n    'remove': true,\n    'reverse': true\n  },\n  'object': {\n    'assign': true,\n    'assignAll': true,\n    'assignAllWith': true,\n    'assignIn': true,\n    'assignInAll': true,\n    'assignInAllWith': true,\n    'assignInWith': true,\n    'assignWith': true,\n    'defaults': true,\n    'defaultsAll': true,\n    'defaultsDeep': true,\n    'defaultsDeepAll': true,\n    'merge': true,\n    'mergeAll': true,\n    'mergeAllWith': true,\n    'mergeWith': true,\n  },\n  'set': {\n    'set': true,\n    'setWith': true,\n    'unset': true,\n    'update': true,\n    'updateWith': true\n  }\n};\n\n/** Used to map real names to their aliases. */\nexports.realToAlias = (function() {\n  var hasOwnProperty = Object.prototype.hasOwnProperty,\n      object = exports.aliasToReal,\n      result = {};\n\n  for (var key in object) {\n    var value = object[key];\n    if (hasOwnProperty.call(result, value)) {\n      result[value].push(key);\n    } else {\n      result[value] = [key];\n    }\n  }\n  return result;\n}());\n\n/** Used to map method names to other names. */\nexports.remap = {\n  'assignAll': 'assign',\n  'assignAllWith': 'assignWith',\n  'assignInAll': 'assignIn',\n  'assignInAllWith': 'assignInWith',\n  'curryN': 'curry',\n  'curryRightN': 'curryRight',\n  'defaultsAll': 'defaults',\n  'defaultsDeepAll': 'defaultsDeep',\n  'findFrom': 'find',\n  'findIndexFrom': 'findIndex',\n  'findLastFrom': 'findLast',\n  'findLastIndexFrom': 'findLastIndex',\n  'getOr': 'get',\n  'includesFrom': 'includes',\n  'indexOfFrom': 'indexOf',\n  'invokeArgs': 'invoke',\n  'invokeArgsMap': 'invokeMap',\n  'lastIndexOfFrom': 'lastIndexOf',\n  'mergeAll': 'merge',\n  'mergeAllWith': 'mergeWith',\n  'padChars': 'pad',\n  'padCharsEnd': 'padEnd',\n  'padCharsStart': 'padStart',\n  'propertyOf': 'get',\n  'rangeStep': 'range',\n  'rangeStepRight': 'rangeRight',\n  'restFrom': 'rest',\n  'spreadFrom': 'spread',\n  'trimChars': 'trim',\n  'trimCharsEnd': 'trimEnd',\n  'trimCharsStart': 'trimStart',\n  'zipAll': 'zip'\n};\n\n/** Used to track methods that skip fixing their arity. */\nexports.skipFixed = {\n  'castArray': true,\n  'flow': true,\n  'flowRight': true,\n  'iteratee': true,\n  'mixin': true,\n  'rearg': true,\n  'runInContext': true\n};\n\n/** Used to track methods that skip rearranging arguments. */\nexports.skipRearg = {\n  'add': true,\n  'assign': true,\n  'assignIn': true,\n  'bind': true,\n  'bindKey': true,\n  'concat': true,\n  'difference': true,\n  'divide': true,\n  'eq': true,\n  'gt': true,\n  'gte': true,\n  'isEqual': true,\n  'lt': true,\n  'lte': true,\n  'matchesProperty': true,\n  'merge': true,\n  'multiply': true,\n  'overArgs': true,\n  'partial': true,\n  'partialRight': true,\n  'propertyOf': true,\n  'random': true,\n  'range': true,\n  'rangeRight': true,\n  'subtract': true,\n  'zip': true,\n  'zipObject': true,\n  'zipObjectDeep': true\n};\n","/**\n * The default argument placeholder value for methods.\n *\n * @type {Object}\n */\nmodule.exports = {};\n","var isFunction = require('./function');\n\nmodule.exports = function isStamp(arg) {\n  return isFunction(arg) && isFunction(arg.compose);\n};\n","// More proper implementation would be\n// isDescriptor(obj) || isStamp(obj)\n// but there is no sense since stamp is function and function is object.\nmodule.exports = require('./object');\n","module.exports = Object.assign;\n","var isPlainObject = require('@stamp/is/plain-object');\nvar isObject = require('@stamp/is/object');\nvar isArray = require('@stamp/is/array');\n\n/**\n * The 'src' argument plays the command role.\n * The returned values is always of the same type as the 'src'.\n * @param dst The object to merge into\n * @param src The object to merge from\n * @returns {*}\n */\nfunction mergeOne(dst, src) {\n  if (src === undefined) return dst;\n\n  // According to specification arrays must be concatenated.\n  // Also, the '.concat' creates a new array instance. Overrides the 'dst'.\n  if (isArray(src)) return (isArray(dst) ? dst : []).concat(src);\n\n  // Now deal with non plain 'src' object. 'src' overrides 'dst'\n  // Note that functions are also assigned! We do not deep merge functions.\n  if (!isPlainObject(src)) return src;\n\n  // See if 'dst' is allowed to be mutated.\n  // If not - it's overridden with a new plain object.\n  var returnValue = isObject(dst) ? dst : {};\n\n  var keys = Object.keys(src);\n  for (var i = 0; i < keys.length; i += 1) {\n    var key = keys[i];\n\n    var srcValue = src[key];\n    // Do not merge properties with the 'undefined' value.\n    if (srcValue !== undefined) {\n      var dstValue = returnValue[key];\n      // Recursive calls to mergeOne() must allow only plain objects or arrays in dst\n      var newDst = isPlainObject(dstValue) || isArray(srcValue) ? dstValue : {};\n\n      // deep merge each property. Recursion!\n      returnValue[key] = mergeOne(newDst, srcValue);\n    }\n  }\n\n  return returnValue;\n}\n\nmodule.exports = function (dst) {\n  for (var i = 1; i < arguments.length; i++) {\n    dst = mergeOne(dst, arguments[i]);\n  }\n  return dst;\n};\n","module.exports = function isPlainObject(value) {\n  return Boolean(value) && typeof value === 'object' &&\n    Object.getPrototypeOf(value) === Object.prototype;\n};\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function () { /* empty */ };\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator' ?\n\t\t\t\t'[]=' :\n\t\t\t\t'=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tcase 'bracket-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[\\])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null ?\n\t\t\t\t\t[] :\n\t\t\t\t\tvalue.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], arrayValue);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","import createLogger from './logger'\nimport defaultLogHandler from './logHandler'\nimport { logLevels } from './constants'\nimport { checkLevel, checkHandler } from './validation'\n\nconst defaultType = Symbol('Default')\n\n/**\n * Creates a Log Manager.\n * @method createManager\n * @param  {Object}     [options={}]\n * @param  {Function}   [options.handler]      The default log handler used for\n *    Loggers that don't have a handler set.\n * @param  {string}     [options.level='INFO'] The default log level used for\n *    Loggers that don't have a level set.\n * @return {LogManager}\n */\nexport default function createManager (options = {}) {\n  const loggers = {}\n\n  /**\n   * Mapping between a Logger `type` and their default settings. Created Loggers\n   *    will use their `type` settings if they exist. Otherwise the \"global\"\n   *    options provided during Manager creation.\n   * @type {Object}\n   */\n  const settings = {\n    [defaultType]: {\n      handler: options.handler ? checkHandler(options.handler) : defaultLogHandler,\n      level: options.level ? checkLevel(options.level) : logLevels.INFO\n    }\n  }\n\n  /**\n   * Gets a specific logger. If the logger doesn't exist, a new one will be\n   *    created.\n   * @method getLogger\n   * @param  {string} type Human-readable type/name for the logger.\n   * @param  {string} [id] A unique identifier for the logger.\n   * @return {Logger}\n   */\n  function getLogger (type, id = '') {\n    id = String(id)\n\n    // Combine the name and ID to create the \"full\" logger name.\n    const loggerName = id ? `${type}-${id}` : type\n\n    let logger = loggers[loggerName]\n    // If the logger does not exist, create a new one.\n    if (!logger) {\n      // This logger logs items from a specific \"target\".\n      const target = { type, id, name: loggerName }\n      const options = {\n        level: getLevel(type),\n        handler: getHandler(type)\n      }\n\n      logger = createLogger(target, options)\n\n      // Save the new logger to be returned by future getter calls.\n      loggers[loggerName] = logger\n    }\n\n    return logger\n  }\n\n  /**\n   * Gets all created loggers, or Loggers of a specific type.\n   * @method getLoggers\n   * @param {string} [type] The type of Loggers to retrieve.\n   * @return {Array<Logger>} List of Loggers.\n   */\n  function getLoggers (type) {\n    if (type) {\n      return Object.values(loggers).filter(logger => logger.type === type)\n    } else {\n      return Object.values(loggers)\n    }\n  }\n\n  /**\n   * Sets the default `level` to be used when creating Loggers.\n   *\n   * Can set the level \"globally\" or per `type`, depending if `type` is provided\n   *    or not. When set for a specific type, only Loggers of that type will use\n   *    the set level. When set \"globally\", all Loggers without a set type will\n   *    use the level as a default.\n   *\n   * Setting the level only affects Loggers created after that point.\n   * @method setLevel\n   * @param  {string} type  The type of Logger to set the option for.\n   * @param  {string} level The logLevel to be set.\n   * @throws Throws an error if level is not a valid log level.\n   * @example\n   * const manager = createManager({ level: logLevels.WARN })\n   *\n   * // Setting the level for a type sets it for created Loggers of that type.\n   * manager.setLevel('Call', logLevels.DEBUG)\n   * const logger1 = manager.getLogger('Call')\n   * // logger1.getLevel() === logLevels.DEBUG\n   *\n   * // Loggers created of types without a set level uses the Manager's level.\n   * const logger2 = manager.getLogger('Auth')\n   * // logger2.getLevel() === logLevels.WARN\n   *\n   * // Setting the level without a type changes the Manager's level.\n   * manager.setLevel(logLevels.INFO)\n   * const logger3 = manager.getLogger('Messaging')\n   * // logger3.getLevel() === logLevels.INFO\n   *\n   * // Setting the level for a type does not affect previously created Loggers.\n   * manager.setLevel('Auth', logLevels.INFO)\n   * // logger2.getLevel() !== logLevels.INFO\n   * // logger2.getLevel() === logLevels.WARN\n   */\n  function setLevel (type, level) {\n    // Signature can be: `setLevel(type, level)` or `setLevel(level)`.\n    // Normalize the parameters to always be consistent.\n    if (level === undefined) {\n      level = type\n      type = defaultType\n    }\n\n    // Ensure `settings[type]` is an object.\n    if (!settings[type]) {\n      settings[type] = {}\n    }\n\n    // Set the level.\n    settings[type].level = checkLevel(level)\n  }\n\n  /**\n   * Gets the default `level` that is used when creating Loggers.\n   *\n   * Can get the level used \"globally\" or per `type`, depending if `type` is\n   *    provided or not.\n   *\n   * See the `setLevel` API for setting these values.\n   * See the Logger APIs for getting this value for an already created Logger.\n   * @method getLevel\n   * @param  {string} [type] A type of Logger.\n   * @return {LogLevel}\n   * @example\n   * const manager = createManager({ level: logLevels.WARN })\n   *\n   * // If a type's level has not been set, gets the \"global\" level.\n   * // manager.getLevel('Call') === logLevels.WARN\n   *\n   * // If a type's level has been set, gets its level.\n   * manager.setLevel('Auth', logLevels.DEBUG)\n   * // manager.getLevel('Auth') === logLevels.DEBUG\n   *\n   * // Can get the \"global\" level.\n   * manager.setLevel(logLevels.INFO)\n   * // manager.getLevel() === logLevels.INFO\n   */\n  function getLevel (type) {\n    // Signature can be: `getLevel(type)` or `getLevel()`.\n    // Normalize the parameters to always be consistent.\n    type = type || defaultType\n\n    return (settings[type] && settings[type].level) || settings[defaultType].level\n  }\n\n  /**\n   * Sets the default `handler` to be used when creating Loggers.\n   *\n   * Can set the handler \"globally\" or per `type`, depending if `type` is\n   *    provided or not. When set for a specific type, only Loggers of that type\n   *    will use the set handler. When set \"globally\", all Loggers without a set\n   *    type will use the handler as a default.\n   *\n   * Setting the handler only affects Loggers created after that point.\n   * @method setHandler\n   * @param  {string}     type    The type of Logger to set the option for.\n   * @param  {LogHandler} handler The log handler to be set.\n   * @throws Throws an error if handler is not a function.\n   * @example\n   * const manager = createManager({ handler: managerHandler })\n   *\n   * // Setting the handler for a type sets it for created Loggers of that type.\n   * manager.setHandler('Call', callHandler)\n   * const logger1 = manager.getLogger('Call')\n   * // logger1.getHandler() === callHandler\n   *\n   * // Loggers created of types without a set handler uses the Manager's handler.\n   * const logger2 = manager.getLogger('Auth')\n   * // logger2.getHandler() === managerHandler\n   *\n   * // Setting the handler without a type changes the Manager's handler.\n   * manager.setHandler(newHandler)\n   * const logger3 = manager.getLogger('Messaging')\n   * // logger3.getHandler() === newHandler\n   *\n   * // Setting the handler for a type does not affect previously created Loggers.\n   * manager.setHandler('Auth', authHandler)\n   * // logger2.getHandler() !== authHandler\n   * // logger2.getHandler() === managerHandler\n   */\n  function setHandler (type, handler) {\n    // Signature can be: `setHandler(type, handler)` or `setHandler(handler)`.\n    // Normalize the parameters to always be consistent.\n    if (typeof type === 'function' && handler === undefined) {\n      handler = type\n      type = defaultType\n    }\n\n    // Ensure `settings[type]` is an object.\n    if (!settings[type]) {\n      settings[type] = {}\n    }\n\n    // Set the handler.\n    settings[type].handler = checkHandler(handler)\n  }\n\n  /**\n   * Gets the default `handler` that is used when creating Loggers.\n   *\n   * Can get the handler used \"globally\" or per `type`, depending if `type` is\n   *    provided or not.\n   *\n   * See the `setHandler` API for setting these values.\n   * See the Logger APIs for getting this value for an already created Logger.\n   * @method getHandler\n   * @param  {string} [type] A type of Logger.\n   * @return {LogHandler}\n   * @example\n   * const manager = createManager({ handler: managerHandler })\n   *\n   * // If a type's handler has not been set, gets the \"global\" handler.\n   * // manager.getHandler('Call') === managerHandler\n   *\n   * // If a type's handler has been set, gets its handler.\n   * manager.setHandler('Auth', authHandler)\n   * // manager.getHandler('Auth') === authHandler\n   *\n   * // Can get the \"global\" handler.\n   * manager.setHandler(newHandler)\n   * // manager.getHandler() === newHandler\n   */\n  function getHandler (type) {\n    // Signature can be: `getHandler(type)` or `getHandler()`.\n    // Normalize the parameters to always be consistent.\n    type = type || defaultType\n\n    return (settings[type] && settings[type].handler) || settings[defaultType].handler\n  }\n\n  return {\n    getLogger,\n    getLoggers,\n    setLevel,\n    getLevel,\n    setHandler,\n    getHandler\n  }\n}\n","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","import { levelValues, logMethods, logLevels, timeLevel } from './constants'\nimport { checkLevel, checkHandler } from './validation'\nimport createTimer from './timer'\n\n/**\n * Creates a Logger.\n * @method createLogger\n * @param  {Object}   target          The subject of the logs from this logger.\n * @param  {Object}   options\n * @param  {Function} options.handler The function to receive/handle log entries.\n * @param  {string}   options.level   The log level to be set.\n * @return {Logger}\n */\nexport default function createLogger (target, options = {}) {\n  // Validate provided options. Do not let invalid options be set.\n  const level = checkLevel(options.level)\n  const handler = checkHandler(options.handler)\n\n  /**\n   * Logger data.\n   * @type {Object}\n   * @property {Object}   target  Metadata about the \"target\" of the Logger.\n   * @property {LogLevel} level   The currently set log level.\n   * @property {Function} handler The currently set Log Handler.\n   */\n  const logger = {\n    target,\n    level,\n    handler\n  }\n\n  /**\n   * Currying function to dynamically create the Logger's logging methods.\n   * @method logFunc\n   * @param  {string} method   Name of the logger method to create.\n   * @param  {string} logLevel The log level for the method.\n   * @param  {Object} [injectables] Other values to include in the LogEntry.\n   * @return {Function} A log method.\n   */\n  function logFunc (method, logLevel, injectables) {\n    /*\n     * Return the function that will be used as `log.<method>`.\n     */\n    return function (...args) {\n      // Compare the logged level and the configured level.\n      const shouldLog = levelValues[logLevel] >= levelValues[logger.level]\n      // If this entry shouldn't be logged, don't do anything.\n      if (!shouldLog) {\n        return\n      }\n\n      // Create the Log Entry to be handed off to the handler.\n      const entry = {\n        // Extra data to be added to the LogEntry.\n        ...injectables,\n        // Meta-info about the log.\n        method,\n        timestamp: Date.now(),\n        level: logLevel,\n        target: logger.target,\n        // The actual arguments logged.\n        messages: [...args]\n      }\n\n      logger.handler(entry)\n    }\n  }\n\n  /**\n   * Sets the Logger's current log level.\n   * @method setLevel\n   * @param  {string} level The logLevel to be set.\n   * @throws Throws an error if level is not a valid log level.\n   * @example\n   * logger.setLevel(logLevels.INFO)\n   * logger.info('This will be logged.')\n   * logger.debug('This will not be logged.')\n   */\n  function setLevel (level) {\n    logger.level = checkLevel(level)\n  }\n\n  /**\n   * Gets the Logger's current log level.\n   * @method getLevel\n   * @return {string} The log level.\n   * @example\n   * logger.setLevel(logLevels.DEBUG)\n   * const level = logger.getLevel()\n   * // level === logLevels.DEBUG\n   */\n  function getLevel () {\n    return logger.level\n  }\n\n  /**\n   * Sets the Logger's current log handler.\n   * @method setHandler\n   * @param  {Function} handler The log handler to be set.\n   * @throws Throws an error if handler is not a function.\n   * @example\n   * const logger = manager.getLogger('Test', '123')\n   * logger.setHandler((logEntry) => {\n   *    console.log(logEntry.target.name, ...logEntry.messages)\n   * })\n   * logger.info('I am a logged message.')\n   * // logs: \"Test-123 I am a logged message.\"\n   */\n  function setHandler (handler) {\n    logger.handler = checkHandler(handler)\n  }\n\n  /**\n   * Gets the Logger's current log handler.\n   * @method getHandler\n   * @return {Function} The log handler.\n   * @example\n   * logger.setHandler(customHandler)\n   * const handler = logger.getHandler()\n   * // handler === customHandler.DEBUG\n   */\n  function getHandler () {\n    return logger.handler\n  }\n\n  const api = {\n    getHandler,\n    setHandler,\n    getLevel,\n    setLevel,\n    get type () {\n      return logger.target.type\n    },\n    get id () {\n      return logger.target.id\n    },\n    get name () {\n      return logger.target.name\n    }\n  }\n\n  // For all supported log methods, create a function on the Logger for it.\n  for (const method in logMethods) {\n    api[method] = logFunc(method, logMethods[method])\n  }\n\n  // Create log functions for the Timer to use.\n  // Follows the same style as above logMethods, but curries it once more\n  //    to align the timer parameters as needed.\n  const timeLog = (message, data) => logFunc(data.event, timeLevel, { timer: data })(message)\n  const timeWarn = (message, data) => logFunc('warn', logLevels.WARN, { timer: data })(message)\n  const timer = createTimer(timeLog, timeWarn)\n\n  return {\n    ...api,\n    ...timer\n  }\n}\n","import { checkHandler } from './validation'\n\n/**\n * Timer factory function.\n * The Timer imitates the Console's Time APIs.\n * Ref: https://developer.mozilla.org/en-US/docs/Web/API/console#Timers\n * @method createTimer\n * @param  {Function} log  Function for logging timer information.\n * @param  {Function} warn Function for warning about timer misuse.\n * @return {Timer}\n */\nexport default function createTimer (log, warn) {\n  // Validate that params are a function.\n  //    Uses functions as `log(message, data)`.\n  checkHandler(log)\n  checkHandler(warn)\n\n  /**\n   * Mapping of on-going timers; <name>: <start>.\n   * @type {Object}\n   */\n  const timers = {}\n\n  /**\n   * Starts a timer. Logs a message to indicate it was started.\n   * Logs a warning if the timer has already been started.\n   * @method timeStart\n   * @param  {string} name Name to identify the timer.\n   */\n  function time (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'time',\n      name\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      data.start = timers[name]\n      warn(`Timer ${name} already started.`, data)\n    } else {\n      // Set the new timer.\n      timers[name] = now\n\n      data.start = now\n      log(`Timer ${name} started.`, data)\n    }\n  }\n\n  /**\n   * Ends a timer. Logs a message with the elapsed time.\n   * @method timeEnd\n   * @param  {string} name Name to identify the timer.\n   */\n  function timeEnd (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'timeEnd',\n      name,\n      start: timers[name]\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      const start = timers[name]\n      // End the timer.\n      delete timers[name]\n\n      const elapsed = now - start\n      data.end = now\n      data.elapsed = elapsed\n\n      log(`Timer ${name} ended, taking ${elapsed}ms.`, data)\n    } else {\n      warn(`Timer ${name} has not been started.`, data)\n    }\n  }\n\n  /**\n   * Adds a split to the timer. Logs a message with the elapsed time so far.\n   * Logs a warning if the timer has not been started.\n   * @method timeSplit\n   * @param  {string} name Name to identify the timer.\n   */\n  function timeLog (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'timeLog',\n      name,\n      start: timers[name]\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      const elapsed = now - timers[name]\n      data.split = now\n      data.elapsed = elapsed\n\n      log(`Timer ${name} split, at ${elapsed}ms so far.`, data)\n    } else {\n      warn(`Timer ${name} has not been started.`, data)\n    }\n  }\n\n  return {\n    time,\n    timeEnd,\n    timeLog\n  }\n}\n","import defaultLogFormatter from './logFormatter'\n/**\n * Default function for the SDK to use for logging.\n *    Uses entry information to form a prefix, then logs to console.\n * @method defaultLogHandler\n * @param  {LogEntry} entry\n */\nexport default function defaultLogHandler (entry) {\n  let { method } = entry\n\n  // For the time-related methods, don't actually use the console methods.\n  //    The Logger already did the timing, so simply log out the info.\n  if (method.includes('time')) {\n    method = 'debug'\n  }\n\n  const formattedString = defaultLogFormatter(entry)\n  const tail = entry.messages.slice(1)\n  console[method](formattedString, ...tail)\n}\n","/* Helper function for styling logs based on the log type.\n * This function will inspect the log entry and format the log\n * accordingly.\n */\nfunction styleLog (entry) {\n  const { timestamp, level } = entry\n  const logInfo = `${timestamp} - ACTION - ${level}`\n\n  let [logType, payload] = entry.messages\n\n  let prefix\n  let style = ''\n  if (logType.includes('state')) {\n    // If the log is for prev state / next state, display that in the prefix.\n    prefix = `${logInfo} - ${logType.toUpperCase()}`\n  } else if (logType.includes('ADDED') || logType.includes('DELETED') || logType.includes('ARRAY')) {\n    // If the log has added or removed keys from state, log the operation, keys affected and new values.\n    prefix = `${entry.messages[0]}: ${entry.messages[2]}`\n    style = entry.messages[1]\n    payload = entry.messages[3]\n  } else if (logType.includes('CHANGED')) {\n    // If the log has changed keys in state, log the operation, keys, old and new values.\n    prefix = `${entry.messages[0]}: ${entry.messages[2]}`\n    style = entry.messages[1]\n    payload = `${entry.messages[3]} ${entry.messages[4]} ${entry.messages[5]}`\n  } else if (logType.includes('no diff')) {\n    // If action results in no change in state, just log no diff.\n    prefix = `${logInfo} - NO DIFF`\n    payload = ''\n  } else {\n    // Else the log is the action itself, so use the action type.\n    prefix = `${logInfo} - ${payload.type} - ${logType}`\n  }\n\n  return { prefix, style, payload }\n}\n\n/**\n * Default function for the SDK to use for logging actions.\n * Action entries come in 4 different types:\n *    1. start: Log the message directly and \"open the group\".\n *    2. state: Log a prefix, state type, and state itself.\n *      (prev state and next state)\n *    3. payload: Log a prefix, action type, and payload.\n *    4. end: Close the group.\n * @method defaultActionHandler\n * @param  {LogEntry} entry\n */\nexport default function defaultActionHandler (entry) {\n  // Handle the \"start\" and \"stop\" action log entries specifically.\n  if (['group', 'groupCollapsed'].includes(entry.method)) {\n    console[entry.method](...entry.messages)\n    return\n  } else if (entry.method === 'groupEnd') {\n    console.groupEnd()\n    return\n  }\n\n  const { prefix, style, payload } = styleLog(entry)\n  console[entry.method](prefix, style, payload)\n}\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Rule = function () {\n  function Rule(name, fn, args, modifiers) {\n    classCallCheck(this, Rule);\n\n    this.name = name;\n    this.fn = fn;\n    this.args = args;\n    this.modifiers = modifiers;\n  }\n\n  createClass(Rule, [{\n    key: \"_test\",\n    value: function _test(value) {\n      var fn = this.fn;\n\n      try {\n        testAux(this.modifiers.slice(), fn)(value);\n      } catch (ex) {\n        fn = function fn() {\n          return false;\n        };\n      }\n\n      try {\n        return testAux(this.modifiers.slice(), fn)(value);\n      } catch (ex) {\n        return false;\n      }\n    }\n  }, {\n    key: \"_check\",\n    value: function _check(value) {\n      try {\n        testAux(this.modifiers.slice(), this.fn)(value);\n      } catch (ex) {\n        if (testAux(this.modifiers.slice(), function (it) {\n          return it;\n        })(false)) {\n          return;\n        }\n      }\n\n      if (!testAux(this.modifiers.slice(), this.fn)(value)) {\n        throw null;\n      }\n    }\n  }, {\n    key: \"_testAsync\",\n    value: function _testAsync(value) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        testAsyncAux(_this.modifiers.slice(), _this.fn)(value).then(function (valid) {\n          if (valid) {\n            resolve(value);\n          } else {\n            reject(null);\n          }\n        }).catch(function (ex) {\n          return reject(ex);\n        });\n      });\n    }\n  }]);\n  return Rule;\n}();\n\nfunction pickFn(fn) {\n  var variant = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"simple\";\n\n  return typeof fn === \"object\" ? fn[variant] : fn;\n}\n\nfunction testAux(modifiers, fn) {\n  if (modifiers.length) {\n    var modifier = modifiers.shift();\n    var nextFn = testAux(modifiers, fn);\n    return modifier.perform(nextFn);\n  } else {\n    return pickFn(fn);\n  }\n}\n\nfunction testAsyncAux(modifiers, fn) {\n  if (modifiers.length) {\n    var modifier = modifiers.shift();\n    var nextFn = testAsyncAux(modifiers, fn);\n    return modifier.performAsync(nextFn);\n  } else {\n    return function (value) {\n      return Promise.resolve(pickFn(fn, \"async\")(value));\n    };\n  }\n}\n\nvar Modifier = function Modifier(name, perform, performAsync) {\n  classCallCheck(this, Modifier);\n\n  this.name = name;\n  this.perform = perform;\n  this.performAsync = performAsync;\n};\n\nvar ValidationError = function (_Error) {\n  inherits(ValidationError, _Error);\n\n  function ValidationError(rule, value, cause, target) {\n    classCallCheck(this, ValidationError);\n\n    for (var _len = arguments.length, remaining = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n      remaining[_key - 4] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, (ValidationError.__proto__ || Object.getPrototypeOf(ValidationError)).call(this, remaining));\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, ValidationError);\n    }\n    _this.rule = rule;\n    _this.value = value;\n    _this.cause = cause;\n    _this.target = target;\n    return _this;\n  }\n\n  return ValidationError;\n}(Error);\n\nvar Context = function () {\n  function Context() {\n    var chain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var nextRuleModifiers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    classCallCheck(this, Context);\n\n    this.chain = chain;\n    this.nextRuleModifiers = nextRuleModifiers;\n  }\n\n  createClass(Context, [{\n    key: \"_applyRule\",\n    value: function _applyRule(ruleFn, name) {\n      var _this = this;\n\n      return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this.chain.push(new Rule(name, ruleFn.apply(_this, args), args, _this.nextRuleModifiers));\n        _this.nextRuleModifiers = [];\n        return _this;\n      };\n    }\n  }, {\n    key: \"_applyModifier\",\n    value: function _applyModifier(modifier, name) {\n      this.nextRuleModifiers.push(new Modifier(name, modifier.simple, modifier.async));\n      return this;\n    }\n  }, {\n    key: \"_clone\",\n    value: function _clone() {\n      return new Context(this.chain.slice(), this.nextRuleModifiers.slice());\n    }\n  }, {\n    key: \"test\",\n    value: function test(value) {\n      return this.chain.every(function (rule) {\n        return rule._test(value);\n      });\n    }\n  }, {\n    key: \"testAll\",\n    value: function testAll(value) {\n      var err = [];\n      this.chain.forEach(function (rule) {\n        try {\n          rule._check(value);\n        } catch (ex) {\n          err.push(new ValidationError(rule, value, ex));\n        }\n      });\n      return err;\n    }\n  }, {\n    key: \"check\",\n    value: function check(value) {\n      this.chain.forEach(function (rule) {\n        try {\n          rule._check(value);\n        } catch (ex) {\n          throw new ValidationError(rule, value, ex);\n        }\n      });\n    }\n  }, {\n    key: \"testAsync\",\n    value: function testAsync(value) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        executeAsyncRules(value, _this2.chain.slice(), resolve, reject);\n      });\n    }\n  }]);\n  return Context;\n}();\n\nfunction executeAsyncRules(value, rules, resolve, reject) {\n  if (rules.length) {\n    var rule = rules.shift();\n    rule._testAsync(value).then(function () {\n      executeAsyncRules(value, rules, resolve, reject);\n    }, function (cause) {\n      reject(new ValidationError(rule, value, cause));\n    });\n  } else {\n    resolve(value);\n  }\n}\n\nfunction v8n() {\n  return proxyContext(new Context());\n}\n\n// Custom rules\nvar customRules = {};\n\nv8n.extend = function (newRules) {\n  Object.assign(customRules, newRules);\n};\n\nv8n.clearCustomRules = function () {\n  customRules = {};\n};\n\nfunction proxyContext(context) {\n  return new Proxy(context, {\n    get: function get(obj, prop) {\n      if (prop in obj) {\n        return obj[prop];\n      }\n\n      var newContext = proxyContext(context._clone());\n\n      if (prop in availableModifiers) {\n        return newContext._applyModifier(availableModifiers[prop], prop);\n      }\n      if (prop in customRules) {\n        return newContext._applyRule(customRules[prop], prop);\n      }\n      if (prop in availableRules) {\n        return newContext._applyRule(availableRules[prop], prop);\n      }\n    }\n  });\n}\n\nvar availableModifiers = {\n  not: {\n    simple: function simple(fn) {\n      return function (value) {\n        return !fn(value);\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.resolve(fn(value)).then(function (result) {\n          return !result;\n        }).catch(function (e) {\n          return true;\n        });\n      };\n    }\n  },\n\n  some: {\n    simple: function simple(fn) {\n      return function (value) {\n        return split(value).some(function (item) {\n          try {\n            return fn(item);\n          } catch (ex) {\n            return false;\n          }\n        });\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.all(split(value).map(function (item) {\n          try {\n            return fn(item).catch(function (e) {\n              return false;\n            });\n          } catch (ex) {\n            return false;\n          }\n        })).then(function (result) {\n          return result.some(Boolean);\n        });\n      };\n    }\n  },\n\n  every: {\n    simple: function simple(fn) {\n      return function (value) {\n        return split(value).every(fn);\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.all(split(value).map(fn)).then(function (result) {\n          return result.every(Boolean);\n        });\n      };\n    }\n  }\n};\n\nfunction split(value) {\n  if (typeof value === \"string\") {\n    return value.split(\"\");\n  }\n  return value;\n}\n\nvar availableRules = {\n  // Value\n\n  equal: function equal(expected) {\n    return function (value) {\n      return value == expected;\n    };\n  },\n\n  exact: function exact(expected) {\n    return function (value) {\n      return value === expected;\n    };\n  },\n\n  // Types\n\n  number: function number() {\n    var allowInfinite = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return function (value) {\n      return typeof value === \"number\" && (allowInfinite || isFinite(value));\n    };\n  },\n\n  integer: function integer() {\n    return function (value) {\n      var isInteger = Number.isInteger || isIntegerPolyfill;\n      return isInteger(value);\n    };\n  },\n\n  numeric: function numeric() {\n    return function (value) {\n      return !isNaN(parseFloat(value)) && isFinite(value);\n    };\n  },\n\n  string: function string() {\n    return testType(\"string\");\n  },\n\n  boolean: function boolean() {\n    return testType(\"boolean\");\n  },\n\n  undefined: function undefined() {\n    return testType(\"undefined\");\n  },\n\n  null: function _null() {\n    return testType(\"null\");\n  },\n\n  array: function array() {\n    return testType(\"array\");\n  },\n\n  object: function object() {\n    return testType(\"object\");\n  },\n\n  instanceOf: function instanceOf(instance) {\n    return function (value) {\n      return value instanceof instance;\n    };\n  },\n\n  // Pattern\n\n  pattern: function pattern(expected) {\n    return function (value) {\n      return expected.test(value);\n    };\n  },\n\n  lowercase: function lowercase() {\n    return function (value) {\n      return (/^([a-z]+\\s*)+$/.test(value)\n      );\n    };\n  },\n\n  uppercase: function uppercase() {\n    return function (value) {\n      return (/^([A-Z]+\\s*)+$/.test(value)\n      );\n    };\n  },\n\n  vowel: function vowel() {\n    return function (value) {\n      return (/^[aeiou]+$/i.test(value)\n      );\n    };\n  },\n\n  consonant: function consonant() {\n    return function (value) {\n      return (/^(?=[^aeiou])([a-z]+)$/i.test(value)\n      );\n    };\n  },\n\n  // Value at\n\n  first: function first(expected) {\n    return function (value) {\n      return value[0] == expected;\n    };\n  },\n\n  last: function last(expected) {\n    return function (value) {\n      return value[value.length - 1] == expected;\n    };\n  },\n\n  // Length\n\n  empty: function empty() {\n    return function (value) {\n      return value.length === 0;\n    };\n  },\n\n  length: function length(min, max) {\n    return function (value) {\n      return value.length >= min && value.length <= (max || min);\n    };\n  },\n\n  minLength: function minLength(min) {\n    return function (value) {\n      return value.length >= min;\n    };\n  },\n\n  maxLength: function maxLength(max) {\n    return function (value) {\n      return value.length <= max;\n    };\n  },\n\n  // Range\n\n  negative: function negative() {\n    return function (value) {\n      return value < 0;\n    };\n  },\n\n  positive: function positive() {\n    return function (value) {\n      return value >= 0;\n    };\n  },\n\n  between: function between(a, b) {\n    return function (value) {\n      return value >= a && value <= b;\n    };\n  },\n\n  range: function range(a, b) {\n    return function (value) {\n      return value >= a && value <= b;\n    };\n  },\n\n  lessThan: function lessThan(n) {\n    return function (value) {\n      return value < n;\n    };\n  },\n\n  lessThanOrEqual: function lessThanOrEqual(n) {\n    return function (value) {\n      return value <= n;\n    };\n  },\n\n  greaterThan: function greaterThan(n) {\n    return function (value) {\n      return value > n;\n    };\n  },\n\n  greaterThanOrEqual: function greaterThanOrEqual(n) {\n    return function (value) {\n      return value >= n;\n    };\n  },\n\n  // Divisible\n\n  even: function even() {\n    return function (value) {\n      return value % 2 === 0;\n    };\n  },\n\n  odd: function odd() {\n    return function (value) {\n      return value % 2 !== 0;\n    };\n  },\n\n  includes: function includes(expected) {\n    return function (value) {\n      return ~value.indexOf(expected);\n    };\n  },\n\n  schema: function schema(_schema) {\n    return testSchema(_schema);\n  },\n\n  // branching\n\n  passesAnyOf: function passesAnyOf() {\n    for (var _len = arguments.length, validations = Array(_len), _key = 0; _key < _len; _key++) {\n      validations[_key] = arguments[_key];\n    }\n\n    return function (value) {\n      return validations.some(function (validation) {\n        return validation.test(value);\n      });\n    };\n  },\n\n  optional: function optional(validation) {\n    var considerTrimmedEmptyString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return function (value) {\n      if (considerTrimmedEmptyString && typeof value === \"string\" && value.trim() === \"\") {\n        return true;\n      }\n\n      if (value !== undefined && value !== null) validation.check(value);\n      return true;\n    };\n  }\n};\n\nfunction testType(expected) {\n  return function (value) {\n    return Array.isArray(value) && expected === \"array\" || value === null && expected === \"null\" || typeof value === expected;\n  };\n}\n\nfunction isIntegerPolyfill(value) {\n  return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n}\n\nfunction testSchema(schema) {\n  return {\n    simple: function simple(value) {\n      var causes = [];\n      Object.keys(schema).forEach(function (key) {\n        var nestedValidation = schema[key];\n        try {\n          nestedValidation.check((value || {})[key]);\n        } catch (ex) {\n          ex.target = key;\n          causes.push(ex);\n        }\n      });\n      if (causes.length > 0) {\n        throw causes;\n      }\n      return true;\n    },\n    async: function async(value) {\n      var causes = [];\n      var nested = Object.keys(schema).map(function (key) {\n        var nestedValidation = schema[key];\n        return nestedValidation.testAsync((value || {})[key]).catch(function (ex) {\n          ex.target = key;\n          causes.push(ex);\n        });\n      });\n      return Promise.all(nested).then(function (values) {\n        if (causes.length > 0) {\n          throw causes;\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nexport default v8n;\n","import logs from '../../packages/kandy/src/logs/plugin'\nimport config from '../../packages/kandy/src/config'\nimport events from '../../packages/kandy/src/events'\n\n/**\n * This is a list of base plugins that most solutions will need. These plugins provide service-like capabilities\n * to the SDK.\n */\nexport default [\n  { name: 'logs', fn: logs },\n  { name: 'config', fn: config },\n  { name: 'events', fn: events }\n]\n","/**\nNote regarding this file's name:\n\nUsually plugins factories are in the index.js file of their corresponding folder.\nThis used to be the case. However this file was also being used to host the logManager\nthat is being used with the SDK.\n\nSince the logManager is being included in almost every file it was preferable to rename this\nfile rather than point 100s of files to a new place for the logManager.\n**/\n\n// Logs plugin.\nimport api from './interface/api'\nimport reducer from './interface/reducers'\nimport * as actions from './interface/actions'\n\nimport { defaultOptions, partialDefaultLogActions /*,  parseLogConfig */ } from './config'\nimport { setLevelEntry, setHandlerEntry, getLevelMap } from './sagas'\nimport createActionLogger from './actions'\n\n// Other plugins.\nimport { update as updateConfig } from '../config/interface/actions'\nimport { mergeValues } from '../common/utils'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { logLevels } from 'kandy-logger'\nimport { logManager } from './index'\n\n// Include the extra JSDoc items.\nimport './docs'\n\nexport default function logPlugin (options = {}) {\n  const name = 'logs'\n\n  const logger = logManager.getLogger('LOGS')\n\n  // Make sure the configured log handler was a function.\n  if (options.handler && typeof options.handler !== 'function') {\n    delete options.handler\n    logger.warn('Invalid log handler configuration provided; using default instead.')\n  }\n\n  // Make sure configured log level is supported.\n  if (options.logLevel && !Object.keys(logLevels).includes(options.logLevel.toUpperCase())) {\n    delete options.logLevel\n    logger.warn('Invalid log level configuration provided; using default instead.')\n  }\n\n  options = mergeValues(defaultOptions, options)\n\n  // Check if `logActions` is true and apply defaults for action logging\n  if (options.logActions !== false) {\n    if (options.logActions instanceof Object) {\n      options.logActions = mergeValues(partialDefaultLogActions, options.logActions)\n    } else {\n      options.logActions = partialDefaultLogActions\n    }\n  }\n\n  // Now that we have the application's log configs, update everything to\n  //    use those values instead of default values.\n  logManager.setLevel(options.logLevel)\n  if (options.handler) {\n    logManager.setHandler(options.handler)\n  }\n\n  Object.values(logManager.getLoggers()).forEach(logger => {\n    logger.setLevel(options.logLevel)\n    if (options.handler) {\n      logger.setHandler(options.handler)\n    }\n  })\n\n  function * init ({ webRTC }) {\n    // Send the provided options to the store.\n    // This will be `state.config[name]`.\n    yield put(updateConfig(options, name))\n    // Update state with the initial Logger levels.\n    yield put(actions.levelsChanged(getLevelMap(logManager)))\n\n    // Ensure the webRTC object exists. It won't in 3.X.\n    if (webRTC) {\n      // Update everything to\n      //    use those values from the application configs instead of default values in the webrtc Stack.\n      const webRTCLogManager = webRTC.managers.logs\n      if (options.handler) {\n        webRTCLogManager.setHandler(options.handler)\n      }\n      Object.values(webRTCLogManager.getLoggers()).forEach(logger => {\n        logger.setLevel(options.logLevel)\n        if (options.handler) {\n          logger.setHandler(options.handler)\n        }\n      })\n    }\n  }\n\n  const components = {\n    name,\n    capabilities: ['logs'],\n    init,\n    api,\n    reducer,\n    sagas: [setLevelEntry, setHandlerEntry]\n  }\n\n  options.logLevel = options.logLevel.toUpperCase()\n  const setLevel = logLevels[options.logLevel]\n  // Consider actions to be at the INFO log level.\n  // Only export a middleware (for actions) at the appropriate levels.\n  if (setLevel <= logLevels.INFO && options.logActions !== false) {\n    components.middleware = createActionLogger(options)\n  }\n\n  return components\n}\n","// Logs plugin.\nimport { logManager, API_LOG_TAG } from '../index'\nimport * as actions from './actions'\nimport { getLevel, getTypes } from './selectors'\n\n/**\n * The SDK has an internal logging system for providing information about its\n *    behaviour. The SDK will generate logs, at different levels for different\n *    types of information, which are routed to a\n *    \"{@link logger.LogHandler Log Handler}\" for consumption. An application\n *    can provide their own Log Handler (see\n *    {@link #configconfiglogs config.logs}) to customize how the logs are\n *    handled, or allow the default Log Handler to print the logs to the\n *    console.\n *\n * The SDK's default Log Handler is merely a thin wrapper around the browser's\n *    console API (ie. `window.console`). It receives the log generated by the\n *    SDK, called a \"{@link logger.LogEntry Log Entry}\", formats a\n *    human-readable message with it, then uses the console to log it at the\n *    appropriate level. This is important to be aware of, since your browser's\n *    console may affect how you see the SDK's default log messages. Since the\n *    default Log Handler uses the console's levels, the browser may filter\n *    which messages are shown depending on which levels it has configured. For\n *    a user that understands console log levels, this can be helpful for\n *    filtering the logs to only the relevant information. But it can equally\n *    be a hindrance by hiding the more detailed log messages (at the 'debug'\n *    level), since browser can have this level hidden by default. For this\n *    reason, we recommend providing a custom Log Handler to the SDK that is\n *    better suited for your application and its users.\n *\n * @public\n * @namespace logger\n * @requires logs\n */\n\nexport default function api ({ dispatch, getState }) {\n  const log = logManager.getLogger('LOGS')\n\n  const api = {\n    /**\n     * Possible levels for the SDK logger.\n     *\n     * The SDK will provide {@link logger.LogEntry Log Entries} to the\n     *    {@link logger.LogHandler Log Handler} for all logs at or above the set\n     *    log level. 'debug' is considered the lowest level and 'silent' the\n     *    highest level. For example, if the current level is 'info', then the\n     *    {@link logger.LogHandler Log Handler} will receive\n     *    {@link logger.LogEntry Log Entries} for logs at 'info', 'warn', and\n     *    'error', but not for the 'debug' level.\n     * @public\n     * @static\n     * @memberof logger\n     * @method levels\n     * @property {string} SILENT Nothing will be logged.\n     * @property {string} ERROR Unhandled error information will be logged. If\n     *    the SDK encounters an issue it cannot resolve, the error will be included\n     *    in the logs. This likely points to an issue with the SDK itself or an\n     *    issue with how the SDK is being used.\n     * @property {string} WARN Warning messages for the application developer will\n     *    be logged. If the SDK encounters an issue that it can recover and continue,\n     *    a warning about the issue will be included in the logs. These logs point\n     *    to issues that need to be handled by the application. For example, providing\n     *    an invalid configuration to the SDK will cause a warning log that explains\n     *    the issue.\n     * @property {string} INFO General information about the SDK's operations will\n     *    be logged, outlining how the SDK is handling the operations. Reading through\n     *    these logs should provide a high-level view of what the SDK is doing,\n     *    and why it is doing it.\n     * @property {string} DEBUG Detailed information about the SDK's operations,\n     *    meant for debugging issues, will be logged. Specific information and relevant\n     *    operation data are provided for understanding the scenario that the SDK\n     *    was in during the operation.\n     */\n    levels: {\n      SILENT: 'silent',\n      ERROR: 'error',\n      WARN: 'warn',\n      INFO: 'info',\n      DEBUG: 'debug'\n    },\n\n    /**\n     * Update the log level used by the SDK's loggers.\n     *\n     * Changing the log level will affect the amount of logs that the SDK will\n     *    output for debugging purposes.\n     *\n     * See {@link logger.levels} for valid log levels. Other values will not be\n     *    accepted. See the {@link logger.getTypes} API for valid logger types.\n     *    Other values will have no affect.\n     * @private\n     * @static\n     * @memberof logger\n     * @method setLevel\n     * @param  {string} level The log level to set.\n     * @param  {string} [type] An optional subset of loggers to update.\n     * @example\n     * // Set logs to be at the warn level.\n     * client.logger.setLevel(client.logger.levels.WARN)\n     */\n    setLevel (level, type) {\n      log.debug(API_LOG_TAG + 'logger.setLevel: ', level, type)\n\n      dispatch(actions.setLevel(level, type))\n    },\n\n    /**\n     * Get the currently set log level used by the SDK's loggers.\n     *\n     * @private\n     * @static\n     * @memberof logger\n     * @method getLevel\n     * @param  {string} [type] An optional subset of loggers.\n     * @return {logger.levels} A log level.\n     */\n    getLevel (type) {\n      log.debug(API_LOG_TAG + 'logger.getLevel: ', type)\n\n      return getLevel(getState(), type)\n    },\n\n    /**\n     * Updates the {@link logger.LogHandler LogHandler} used by the SDK's\n     *    loggers.\n     *\n     * Changing the log handler will change how the SDK's logs are handled by\n     *    the application.\n     *\n     * See {@link logger.LogHandler} and {@link logger.LogEntry} for information\n     *    about the handler. See the {@link logger.getTypes} API for valid\n     *    logger types. Other values will have no affect.\n     * @private\n     * @static\n     * @memberof logger\n     * @method setHandler\n     * @param  {logger.LogEntry} handler A {@link logger.LogHandler} function.\n     * @param  {string}   [type] An optional subset of loggers to update.\n     * @example\n     * // Change the SDK's Log Handler to a custom function.\n     * client.logger.setHandler((logEntry) => {\n     *    // Handle the SDK's logs in a custom way.\n     *    ...\n     * })\n     *\n     */\n    setHandler (handler, type) {\n      log.debug(API_LOG_TAG + 'logger.setHandler: ', handler, type)\n\n      dispatch(actions.setHandler(handler, type))\n    },\n\n    /**\n     * Get the list of logger types used by the SDK.\n     *\n     * Logs for different SDK features can be managed separately from one\n     *    another by specifying the type when using the {@link logger.setLevel}\n     *    and {@link logger.setHandler} APIs.\n     * @private\n     * @static\n     * @memberof logger\n     * @method getTypes\n     * @return {Array<string>} Logger types.\n     * @example\n     * const types = client.logger.getTypes()\n     * // types: ['DEFAULT', 'AUTH', 'CALL', ...]\n     *\n     * // Set the Call logs to be at the debug level.\n     * client.logger.setLevel('DEBUG', 'CALL')\n     */\n    getTypes () {\n      log.debug(API_LOG_TAG + 'logger.getTypes')\n\n      return getTypes(getState())\n    }\n  }\n\n  return {\n    logger: api\n  }\n}\n","// Libraries.\nimport { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves the log level for a specified logger type, or the default level.\n * @method getLevel\n * @param  {Object} state            SDK redux state.\n * @param  {String} [type='DEFAULT'] A type of Logger.\n * @return {string} A log level.\n */\nexport function getLevel (state, type = 'DEFAULT') {\n  const clonedState = cloneDeep(state)\n  return clonedState.logs[type]\n}\n\n/**\n * Retrieves a list of all of the SDK's Logger types.\n * @method getTypes\n * @param  {Object} state  SDK redux state.\n * @return {Array<string>}\n */\nexport function getTypes (state) {\n  const clonedState = cloneDeep(state)\n  return Object.keys(clonedState.logs)\n}\n","import * as actionTypes from './actionTypes'\n\n// Libraries\nimport { handleActions } from 'redux-actions'\n\n/**\n * Logs state is a mapping between every Logger type (and the default type)\n *    and its set log level.\n * eg. {\n *    DEFAULT: 'DEBUG',\n *    AUTH: 'DEBUG',\n *    CALL: 'INFO',\n *    ...\n * }\n */\n\nconst reducers = {}\n\nreducers[actionTypes.LEVELS_CHANGE] = {\n  next (state, action) {\n    // Replace all levels that have been changed.\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","\nvar clean = require('to-no-case')\n\n/**\n * Export.\n */\n\nmodule.exports = toSpaceCase\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSpaceCase(string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : ''\n  }).trim()\n}\n","\n/**\n * Export.\n */\n\nmodule.exports = toNoCase\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/\nvar hasSeparator = /(_|-|\\.|:)/\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase(string) {\n  if (hasSpace.test(string)) return string.toLowerCase()\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()\n  return string.toLowerCase()\n}\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate(string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : ''\n  })\n}\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize(string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ')\n  })\n}\n","// Logs plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { logManager } from './index'\n\n// Libraries.\nimport { put, takeEvery } from 'redux-saga/effects'\n\n// The SDK's name for the default/global log level.\nconst defaultType = 'DEFAULT'\n\n/**\n * Taker saga for \"set log level\" actions.\n * @method setLevelEntry\n */\nexport function * setLevelEntry () {\n  yield takeEvery(actionTypes.SET_LEVEL, setLogLevel)\n}\n\n/**\n * Taker saga for \"set log handler\" actions.\n * @method setHandlerEntry\n */\nexport function * setHandlerEntry () {\n  yield takeEvery(actionTypes.SET_HANDLER, setLogHandler)\n}\n\n/**\n * Functionality saga for \"set log level\" actions.\n * @method setLogLevel\n * @param  {Object} action\n * @param  {string} action.level\n * @param  {string} [action.type]\n */\nexport function * setLogLevel (action) {\n  const { level, type } = action.payload\n\n  try {\n    if (!type || type === defaultType) {\n      // Update the Manager's default level.\n      logManager.setLevel(level)\n      // Update all Loggers' levels.\n      logManager.getLoggers().forEach(logger => {\n        logger.setLevel(level)\n      })\n\n      // Update all Logger levels in state, because changing the default level\n      //    will affect all Loggers without their own explicit level set.\n      yield put(actions.levelsChanged(getLevelMap(logManager)))\n    } else {\n      // Update the Manager's default level for this type.\n      logManager.setLevel(type, level)\n      // Update all Loggers of this type.\n      logManager.getLoggers(type).forEach(logger => {\n        logger.setLevel(level)\n      })\n\n      // Update the one type's level in state.\n      yield put(actions.levelsChanged({ [type]: level }))\n    }\n  } catch (err) {\n    const log = logManager.getLogger('LOGS')\n    log.error(err.message)\n  }\n}\n\n/**\n * Functionality saga for \"set log handler\" actions.\n * @method setLogHandler\n * @param  {Object}   action\n * @param  {Function} action.handler\n * @param  {string}   [action.type]\n */\nexport function * setLogHandler (action) {\n  const { handler, type } = action.payload\n\n  try {\n    if (!type || type === defaultType) {\n      // Update the Manager's default level.\n      logManager.setHandler(handler)\n      // Update all Loggers' handlers.\n      logManager.getLoggers().forEach(logger => {\n        logger.setHandler(handler)\n      })\n\n      // Notify that all Logger handlers [may] have changed (because changing\n      //    the default handler will affect all Loggers without their own\n      //    handler explicitly set).\n      yield put(actions.handlersChanged(getHandlerMap(logManager)))\n    } else {\n      // Update the Manager's default handler for this type.\n      logManager.setHandler(type, handler)\n      // Update all Loggers of this type.\n      logManager.getLoggers(type).forEach(logger => {\n        logger.setHandler(handler)\n      })\n\n      // Notify that the one type's handler has changed.\n      yield put(actions.handlersChanged({ [type]: handler }))\n    }\n  } catch (err) {\n    const log = logManager.getLogger('LOGS')\n    log.error(err.message)\n  }\n}\n\n/**\n * Helper function.\n * Gets the log levels for every Logger type (and default).\n * @method getLevelMap\n * @return {Object} Mapping of Logger type to its log level.\n */\nexport function getLevelMap (logManager) {\n  // Get unique types from all Loggers.\n  const loggers = logManager.getLoggers()\n  const types = [...new Set(loggers.map(logger => logger.type))]\n\n  const levels = {}\n  // Add the default level to the beginning.\n  levels[defaultType] = logManager.getLevel()\n\n  // Get the level for each Logger type.\n  types.forEach(type => {\n    levels[type] = logManager.getLevel(type)\n  })\n\n  return levels\n}\n\n/**\n * Helper function.\n * Gets the log handler for every Logger type (and default).\n * @method getHandlerMap\n * @return {Object} Mapping of Logger type to its log handler.\n */\nexport function getHandlerMap (logManager) {\n  // Get unique types from all Loggers.\n  const loggers = logManager.getLoggers()\n  const types = [...new Set(loggers.map(logger => logger.type))]\n\n  const handlers = {}\n  // Add the default level to the beginning.\n  handlers[defaultType] = logManager.getHandler()\n\n  // Get the handler for each Logger type.\n  types.forEach(type => {\n    handlers[type] = logManager.getHandler(type)\n  })\n\n  return handlers\n}\n","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","// Logs plugin.\nimport { logManager } from '../index'\nimport { logLevels } from 'kandy-logger/src/constants'\n// Action specific.\nimport setupTransformers from './transformers'\nimport { titleFormatter } from './utils'\n\n// Libraries.\nimport { createLogger } from 'redux-logger'\n\n/**\n * Creates a redux middleware for logging actions.\n * @method createActionLogger\n * @param  {Object}     options\n * @return {Middleware}\n */\nexport default function createActionLogger (options) {\n  // Create a Logger for handling the action logs.\n  const logger = logManager.getLogger('ACTION')\n  logger.setHandler(options.logActions.handler)\n  logger.setLevel(options.logActions.level)\n\n  const setLevel = logLevels[options.logLevel]\n\n  let actionOptions = {}\n  // Use different options for redux-logger depending on log level.\n  if (setLevel === logLevels.INFO) {\n    // At the INFO level, hide everything except the action name.\n    actionOptions.level = false\n    actionOptions.diff = false\n  } else {\n    // At the DEBUG+ levels, use the configs.\n    actionOptions = {\n      ...options.logActions\n    }\n  }\n\n  if (options.logActions.actionOnly) {\n    // Hide prevState and nextState.\n    // Log action and error at info level, so the browser won't hide it by default.\n    actionOptions.level = {\n      prevState: false,\n      action: 'info',\n      error: 'info',\n      nextState: false\n    }\n  }\n\n  if (options.logActions.excludeActions) {\n    actionOptions.predicate = excludeActions(options.logActions.excludeActions)\n  }\n\n  // ALWAYS use our own logger\n  actionOptions.logger = logger\n  // ALWAYS remove theming/styling from the action log messages\n  actionOptions.titleFormatter = titleFormatter\n  actionOptions.colors = false\n\n  // Setup the transformers based on the options.\n  const transformers = setupTransformers(options.logActions)\n  // Create the logger middleware.\n\n  return createLogger({\n    ...actionOptions,\n    ...transformers\n  })\n}\n\n/**\n * Logger predicate function that will take an array of action types\n * and exclude them from logs\n * @param {Array} actions An array of action types to exclude from logs\n * @returns {function} A predicate function\n */\nfunction excludeActions (actions) {\n  return (getState, action) => !actions.includes(action.type)\n}\n","// Libraries\nimport { omit } from 'lodash/fp'\n\n/**\n * Determines which redux-logger transformers we need based on options.\n * @method setupTransformers\n * @param  {Object} options\n * @return {Object} An object of transformers to be provided to redux-logger.\n */\nexport default function setupTransformers (options) {\n  // A \"pipeline\" of all redux-logger action transformers.\n  function actionPipeline (transformers) {\n    return function (action) {\n      transformers.forEach(function (transformer) {\n        action = transformer(action)\n      })\n      return action\n    }\n  }\n\n  const transformers = {}\n  const actionTransformers = []\n  if (!options.exposePayloads) {\n    // If exposePayloads is disabled, include the removePayloads transformer\n    actionTransformers.push(removePayloads)\n  } else {\n    // Otherwise, we should still hide passwords\n    actionTransformers.push(passwordHider)\n  }\n  // Create the actionTransformer pipeline with the included transformers.\n  transformers.actionTransformer = actionPipeline(actionTransformers)\n\n  return transformers\n}\n\n// Redux-logger actionTransformer to prevent passwords from being logged.\nfunction passwordHider (action) {\n  if (action.meta && action.meta.isSensitive) {\n    // Only log the action name for actions that have sensitive data in them.\n    return omit('payload', action)\n  }\n  return action\n}\n\n/**\n * Helper function removes secure data if secure mode is enabled\n * @param {Object} action\n */\nfunction removePayloads (action) {\n  if (!(action.meta && action.meta.isSafe)) {\n    return omit('payload', action)\n  }\n  return action\n}\n","/**\n * Standard title formatter function is almost identical to the defaultTitleFormatter found in redux-logger\n * but removes placeholder characters previously used for styling, which is not being used in the logging\n * configuration\n *\n * @param action\n * @param time\n * @param took\n * @returns {string}\n */\nexport function titleFormatter (action, time, took) {\n  var parts = ['action']\n  parts.push(action.type)\n  parts.push('@ ' + time)\n  parts.push('(in ' + took.toFixed(2) + ' ms)')\n\n  return parts.join(' ')\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.reduxLogger=e.reduxLogger||{})}(this,function(e){\"use strict\";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,\"kind\",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,\"path\",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,\"E\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0}),Object.defineProperty(this,\"rhs\",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,\"N\",e),Object.defineProperty(this,\"rhs\",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,\"D\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0})}function a(e,t,r){a.super_.call(this,\"A\",e),Object.defineProperty(this,\"index\",{value:t,enumerable:!0}),Object.defineProperty(this,\"item\",{value:r,enumerable:!0})}function f(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=\"undefined\"==typeof e?\"undefined\":N(e);return\"object\"!==t?t:e===Math?\"math\":null===e?\"null\":Array.isArray(e)?\"array\":\"[object Date]\"===Object.prototype.toString.call(e)?\"date\":\"function\"==typeof e.toString&&/^\\/.*\\//.test(e.toString())?\"regexp\":\"object\"}function l(e,t,r,c,s,d,p){s=s||[],p=p||[];var g=s.slice(0);if(\"undefined\"!=typeof d){if(c){if(\"function\"==typeof c&&c(g,d))return;if(\"object\"===(\"undefined\"==typeof c?\"undefined\":N(c))){if(c.prefilter&&c.prefilter(g,d))return;if(c.normalize){var h=c.normalize(g,d,e,t);h&&(e=h[0],t=h[1])}}}g.push(d)}\"regexp\"===u(e)&&\"regexp\"===u(t)&&(e=e.toString(),t=t.toString());var y=\"undefined\"==typeof e?\"undefined\":N(e),v=\"undefined\"==typeof t?\"undefined\":N(t),b=\"undefined\"!==y||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(d),m=\"undefined\"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(d);if(!b&&m)r(new o(g,t));else if(!m&&b)r(new i(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if(\"date\"===u(e)&&e-t!==0)r(new n(g,e,t));else if(\"object\"===y&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&r(new n(g,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var w;e.length;for(w=0;w<e.length;w++)w>=t.length?r(new a(g,w,new i(void 0,e[w]))):l(e[w],t[w],r,c,g,w,p);for(;w<t.length;)r(new a(g,w,new o(void 0,t[w++])))}else{var x=Object.keys(e),S=Object.keys(t);x.forEach(function(n,o){var i=S.indexOf(n);i>=0?(l(e[n],t[n],r,c,g,n,p),S=f(S,i)):l(e[n],void 0,r,c,g,n,p)}),S.forEach(function(e){l(void 0,t[e],r,c,g,e,p)})}p.length=p.length-1}else e!==t&&(\"number\"===y&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function c(e,t,r,n){return n=n||[],l(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function s(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":s(o[r.path[n]],r.index,r.item);break;case\"D\":delete o[r.path[n]];break;case\"E\":case\"N\":o[r.path[n]]=r.rhs}}else switch(r.kind){case\"A\":s(e[t],r.index,r.item);break;case\"D\":e=f(e,t);break;case\"E\":case\"N\":e[t]=r.rhs}return e}function d(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,i=r.path?r.path.length-1:0;++o<i;)\"undefined\"==typeof n[r.path[o]]&&(n[r.path[o]]=\"number\"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case\"A\":s(r.path?n[r.path[o]]:n,r.index,r.item);break;case\"D\":delete n[r.path[o]];break;case\"E\":case\"N\":n[r.path[o]]=r.rhs}}}function p(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":p(o[r.path[n]],r.index,r.item);break;case\"D\":o[r.path[n]]=r.lhs;break;case\"E\":o[r.path[n]]=r.lhs;break;case\"N\":delete o[r.path[n]]}}else switch(r.kind){case\"A\":p(e[t],r.index,r.item);break;case\"D\":e[t]=r.lhs;break;case\"E\":e[t]=r.lhs;break;case\"N\":e=f(e,t)}return e}function g(e,t,r){if(e&&t&&r&&r.kind){var n,o,i=e;for(o=r.path.length-1,n=0;n<o;n++)\"undefined\"==typeof i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case\"A\":p(i[r.path[n]],r.index,r.item);break;case\"D\":i[r.path[n]]=r.lhs;break;case\"E\":i[r.path[n]]=r.lhs;break;case\"N\":delete i[r.path[n]]}}}function h(e,t,r){if(e&&t){var n=function(n){r&&!r(e,t,n)||d(e,t,n)};l(e,t,n)}}function y(e){return\"color: \"+F[e].color+\"; font-weight: bold\"}function v(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case\"E\":return[r.join(\".\"),n,\"\",o];case\"N\":return[r.join(\".\"),o];case\"D\":return[r.join(\".\")];case\"A\":return[r.join(\".\")+\"[\"+i+\"]\",a];default:return[]}}function b(e,t,r,n){var o=c(e,t);try{n?r.groupCollapsed(\"diff\"):r.group(\"diff\")}catch(e){r.log(\"diff\")}o?o.forEach(function(e){var t=e.kind,n=v(e);r.log.apply(r,[\"%c \"+F[t].text,y(t)].concat(P(n)))}):r.log(\" no diff \");try{r.groupEnd()}catch(e){r.log(\" diff end  \")}}function m(e,t,r,n){switch(\"undefined\"==typeof e?\"undefined\":N(e)){case\"object\":return\"function\"==typeof e[n]?e[n].apply(e,P(r)):e[n];case\"function\":return e(t);default:return e}}function w(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var i=[\"action\"];return i.push(\"%c\"+String(e.type)),t&&i.push(\"%c@ \"+n),r&&i.push(\"%c(in \"+o.toFixed(2)+\" ms)\"),i.join(\" \")}}function x(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,i=void 0===o?w(t):o,a=t.collapsed,f=t.colors,u=t.level,l=t.diff,c=\"undefined\"==typeof t.titleFormatter;e.forEach(function(o,s){var d=o.started,p=o.startedTime,g=o.action,h=o.prevState,y=o.error,v=o.took,w=o.nextState,x=e[s+1];x&&(w=x.prevState,v=x.started-d);var S=n(g),k=\"function\"==typeof a?a(function(){return w},g,o):a,j=D(p),E=f.title?\"color: \"+f.title(S)+\";\":\"\",A=[\"color: gray; font-weight: lighter;\"];A.push(E),t.timestamp&&A.push(\"color: gray; font-weight: lighter;\"),t.duration&&A.push(\"color: gray; font-weight: lighter;\");var O=i(S,j,v);try{k?f.title&&c?r.groupCollapsed.apply(r,[\"%c \"+O].concat(A)):r.groupCollapsed(O):f.title&&c?r.group.apply(r,[\"%c \"+O].concat(A)):r.group(O)}catch(e){r.log(O)}var N=m(u,S,[h],\"prevState\"),P=m(u,S,[S],\"action\"),C=m(u,S,[y,h],\"error\"),F=m(u,S,[w],\"nextState\");if(N)if(f.prevState){var L=\"color: \"+f.prevState(h)+\"; font-weight: bold\";r[N](\"%c prev state\",L,h)}else r[N](\"prev state\",h);if(P)if(f.action){var T=\"color: \"+f.action(S)+\"; font-weight: bold\";r[P](\"%c action    \",T,S)}else r[P](\"action    \",S);if(y&&C)if(f.error){var M=\"color: \"+f.error(y,h)+\"; font-weight: bold;\";r[C](\"%c error     \",M,y)}else r[C](\"error     \",y);if(F)if(f.nextState){var _=\"color: \"+f.nextState(w)+\"; font-weight: bold\";r[F](\"%c next state\",_,w)}else r[F](\"next state\",w);l&&b(h,w,r,k);try{r.groupEnd()}catch(e){r.log(\" log end \")}})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},L,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,f=t.diffPredicate;if(\"undefined\"==typeof r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error(\"[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\\n// Logger with default options\\nimport { logger } from 'redux-logger'\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\\nimport createLogger from 'redux-logger'\\nconst logger = createLogger({\\n  // ...options\\n});\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n\"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(l){if(\"function\"==typeof i&&!i(r,l))return e(l);var c={};u.push(c),c.started=O.now(),c.startedTime=new Date,c.prevState=n(r()),c.action=l;var s=void 0;if(a)try{s=e(l)}catch(e){c.error=o(e)}else s=e(l);c.took=O.now()-c.started,c.nextState=n(r());var d=t.diff&&\"function\"==typeof f?f(r,l):t.diff;if(x(u,Object.assign({},t,{diff:d})),u.length=0,c.error)throw c.error;return s}}}}var k,j,E=function(e,t){return new Array(t+1).join(e)},A=function(e,t){return E(\"0\",t-e.toString().length)+e},D=function(e){return A(e.getHours(),2)+\":\"+A(e.getMinutes(),2)+\":\"+A(e.getSeconds(),2)+\".\"+A(e.getMilliseconds(),3)},O=\"undefined\"!=typeof performance&&null!==performance&&\"function\"==typeof performance.now?performance:Date,N=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},C=[];k=\"object\"===(\"undefined\"==typeof global?\"undefined\":N(global))&&global?global:\"undefined\"!=typeof window?window:{},j=k.DeepDiff,j&&C.push(function(){\"undefined\"!=typeof j&&k.DeepDiff===c&&(k.DeepDiff=j,j=void 0)}),t(n,r),t(o,r),t(i,r),t(a,r),Object.defineProperties(c,{diff:{value:c,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:h,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:g,enumerable:!0},isConflict:{value:function(){return\"undefined\"!=typeof j},enumerable:!0},noConflict:{value:function(){return C&&(C.forEach(function(e){e()}),C=null),c},enumerable:!0}});var F={E:{color:\"#2196F3\",text:\"CHANGED:\"},N:{color:\"#4CAF50\",text:\"ADDED:\"},D:{color:\"#F44336\",text:\"DELETED:\"},A:{color:\"#2196F3\",text:\"ARRAY:\"}},L={level:\"log\",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return\"inherit\"},prevState:function(){return\"#9E9E9E\"},action:function(){return\"#03A9F4\"},nextState:function(){return\"#4CAF50\"},error:function(){return\"#F20404\"}},diff:!1,diffPredicate:void 0,transformer:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return\"function\"==typeof t||\"function\"==typeof r?S()({dispatch:t,getState:r}):void console.error(\"\\n[redux-logger v3] BREAKING CHANGE\\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\\n[redux-logger v3] Change\\n[redux-logger v3] import createLogger from 'redux-logger'\\n[redux-logger v3] to\\n[redux-logger v3] import { createLogger } from 'redux-logger'\\n\")};e.defaults=L,e.createLogger=S,e.logger=T,e.default=T,Object.defineProperty(e,\"__esModule\",{value:!0})});\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","// Other plugins.\nimport { logManager } from '../../logs'\n\nconst log = logManager.getLogger('SDPHANDLER')\n\n/**\n * SDP handler function that should be passed into session object's `processOffer` and `processAnswer` function.\n * This function disables old media encryption method SDES (Modifies sdp by removing crypto).\n * However, if only SDES is available, don't disable it.\n *\n * @method sanitizeSdesFromSdp\n * @param {Object} newSdp The SDP so far (could have been modified by previous handlers).\n * @param {Object} info Information about the session description.\n * @param {RTCSdpType} info.type The session description's type.\n * @param {string} info.step The step that will occur after the Pipeline is run.\n * @param {string} info.endpoint Which end of the connection created the SDP.\n * @param {Object} originalSdp The SDP in its initial state.\n * @return {Object} The sanitized SDP with crypto removed (if fingerprint exists)\n */\nexport function sanitizeSdesFromSdp (newSdp, info, originalSdp) {\n  for (const mLine of newSdp.media) {\n    if (mLine.crypto && mLine.fingerprint) {\n      log.debug('Removing SDES line from SDP media section.')\n      delete mLine.crypto\n    }\n  }\n  return newSdp\n}\n\n/**\n * Function generator for an SDP handler function that changes the DTLS role of the SDP.\n * @method changeDtlsRoleTo\n * @param  {string} role\n * @return {Function} SDP handler.\n */\nexport function changeDtlsRoleTo (role) {\n  return function changeDtlsRole (newSdp, info, originalSdp) {\n    // Grab the original DTLS role for logging purposes.\n    //    Assumed that the DTLS role is the same in every media section.\n    const original = newSdp.media[0].setup\n    log.debug(`Changing SDP DTLS role from ${original} to ${role}.`)\n\n    // Change the DTLS role in every media section.\n    newSdp.media.map(media => {\n      media.setup = role\n      return media\n    })\n\n    return newSdp\n  }\n}\n\n/**\n * An SDP handler that adds bandwidth options to the SDP.\n * Supports Chrome & Firefox by generating 2 types of configs:\n *  - 'AS' for Chrome in kilobits per second\n *  - 'TIAS' for Firefox in bits per second\n * @method modifySdpBandwidth\n * @param {BandwidthControls} bandwidthControls\n * @return {Function} SDP handler.\n */\nexport function modifySdpBandwidth (newSdp, info, originalSdp) {\n  /**\n   * Generates bandwidth configs that Chrome & Firefox can recognize.\n   * @param {number} limit The bandwidth limit in kilobits per second.\n   */\n  function generateBandwidthConfigs (limit) {\n    return [\n      {\n        type: 'AS', // Chrome supports this (in kilobits per second)\n        limit\n      },\n      {\n        type: 'TIAS', // Firefox supports this (in bits per second)\n        limit: limit * 1000\n      }\n    ]\n  }\n\n  if (info.bandwidth) {\n    // For more details on bandwidth controls, see here https://webrtchacks.com/limit-webrtc-bandwidth-sdp/.\n\n    if (info.bandwidth.call) {\n      // Set session level bandwidth limit\n      newSdp.bandwidth = generateBandwidthConfigs(info.bandwidth.call)\n    }\n\n    if (info.bandwidth.audio) {\n      // Set audio bandwidth limit\n      newSdp.media\n        .filter(media => media.type === 'audio')\n        .forEach(media => {\n          media.bandwidth = generateBandwidthConfigs(info.bandwidth.audio)\n        })\n    }\n\n    if (info.bandwidth.video) {\n      // Set video bandwidth limit\n      newSdp.media\n        .filter(media => media.type === 'video')\n        .forEach(media => {\n          media.bandwidth = generateBandwidthConfigs(info.bandwidth.video)\n        })\n    }\n  }\n  return newSdp\n}\n\n/**\n * Generates extra informational parameters for ending a call.\n *\n * @method generateEndParams\n * @param {string}  currentCallState The state of the current call, before it was ended.\n * @param {boolean} isLocal Specifies if end operation was caused by the local side.\n * @param {Object}  params Extra context information related to the call.\n * @param {string}  [params.reasonText]  Human-readable explanation for the call change.\n * @param {string}  [params.statusCode] Code representing the reason for the call change.\n * @param {string}  params.remoteName   Name of the remote participant.\n * @param {string}  params.remoteNumber Number of the remote participant.\n */\nexport function generateEndParams (currentCallState, isLocal, params) {\n  const endParams = {\n    isLocal,\n    remoteParticipant: {\n      displayNumber: params.remoteNumber,\n      displayName: params.remoteName\n    },\n    transition: {\n      prevState: currentCallState\n    }\n  }\n  if (params.statusCode) {\n    endParams.transition.statusCode = params.statusCode\n  }\n  if (params.reasonText) {\n    endParams.transition.reasonText = params.reasonText\n  }\n  return endParams\n}\n","/*\n * This file contains SDK documentation for stuff defined by the Logger package.\n * They are here to 1) ensure they are picked up by our documentation tool and\n *    2) ensure they are written from the perspective of the SDK (not the Logger\n *    library).\n */\n\n/**\n * A LogEntry object is the data that the SDK compiles when information is\n *    logged. It contains both the logged information and meta-info about when\n *    and who logged it.\n *\n * A {@link logger.LogHandler LogHandler} provided to the SDK (see\n *    {@link #configconfiglogs config.logs}) will need to handle LogEntry\n *    objects.\n *\n * @public\n * @static\n * @typedef {Object} LogEntry\n * @memberof logger\n * @requires logs\n * @property {number} timestamp When the log was created, based on UNIX epoch.\n * @property {string} method The log function that was used to create the log.\n * @property {string} level The level of severity the log.\n * @property {Object} target The subject that the log is about.\n * @property {string} target.type The type of the target. This is also\n *    used as part of the name of the Logger.\n * @property {string} [target.id] A unique identifier for the target.\n * @property {string} target.name A combination of the target type and ID. If no\n *    id was provided, this will be the same as the type.\n * @property {Array} messages The logged information, given to the Logger\n *    method as parameters.\n * @property {Object} [timer] Timing data, if the log method was a timer method.\n * @example\n * function defaultLogHandler (logEntry) {\n *   // Compile the meta info of the log for a prefix.\n *   const { timestamp, level, target } = logEntry\n *   let { method } = logEntry\n *   const logInfo = `${timestamp} - ${target.type} - ${level}`\n *\n *   // Assume that the first message parameter is a string.\n *   const [log, ...extra] = logEntry.messages\n *\n *   // For the timer methods, don't actually use the console methods.\n *   //    The Logger already did the timing, so simply log out the info.\n *   if (['time', 'timeLog', 'timeEnd'].includes(method)) {\n *     method = 'debug'\n *   }\n *\n *   console[method](`${logInfo} - ${log}`, ...extra)\n * }\n */\n\n/**\n * A LogHandler can be used to customize how the SDK should log information. By\n *    default, the SDK will log information to the console, but a LogHandler can\n *    be configured to change this behaviour.\n *\n * A LogHandler can be provided to the SDK as part of its configuration (see\n *    {@link #configconfiglogs config.logs}). The SDK will then provide this\n *    function with the logged information.\n *\n * @public\n * @static\n * @typedef {Function} LogHandler\n * @memberof logger\n * @requires logs\n * @param {Object} LogEntry The LogEntry to be logged.\n * @example\n * // Define a custom function to handle logs.\n * function logHandler (logEntry) {\n *   // Compile the meta info of the log for a prefix.\n *   const { timestamp, level, target } = logEntry\n *   let { method } = logEntry\n *   const logInfo = `${timestamp} - ${target.type} - ${level}`\n *\n *   // Assume that the first message parameter is a string.\n *   const [log, ...extra] = logEntry.messages\n *\n *   // For the timer methods, don't actually use the console methods.\n *   //    The Logger already did the timing, so simply log out the info.\n *   if (['time', 'timeLog', 'timeEnd'].includes(method)) {\n *     method = 'debug'\n *   }\n *\n *   console[method](`${logInfo} - ${log}`, ...extra)\n * }\n *\n * // Provide the LogHandler as part of the SDK configurations.\n * const configs = { ... }\n * configs.logs.handler = logHandler\n * const client = create(configs)\n */\n","/**\n * This file is a plugin for the \"Config\" plugin\n * Reference info: https://confluence.genband.com/display/KSDK/Plugins\n */\nimport pluginInterface from './interface'\n\n/**\n * Config Plugin\n *\n * @method configImplementation\n * @return {Object} An instance of the \"Config\" plugin.\n */\n\n// yarn lint:docs complains if this isn't defined in a plugin.\n/**\n * @module config\n */\nexport default function configImplementation () {\n  return {\n    // Interface Components:\n    name: pluginInterface.name,\n    capabilities: ['config'],\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer\n  }\n}\n","import api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a Config plugin.\n * @type {string}\n */\nconst name = 'config'\n\nexport default {\n  reducer,\n  name,\n  api\n}\n","import * as actions from './actions'\nimport { getConfiguration } from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CONFIG')\n\nexport default function api (context) {\n  const configApi = {\n    /**\n     * Gets the current configuration Object. This is the object that is initially set as part of SDK creation using 'create' function.\n     *\n     * @public\n     * @memberof api\n     * @requires config\n     * @method getConfig\n     * @returns {Object} A configuration Object.\n     */\n    getConfig: function () {\n      log.debug(API_LOG_TAG + 'getConfig')\n      return getConfiguration(context.getState())\n    },\n\n    /**\n     * Update values in the global Config section of the store. The values pertain to the SDK configuration.\n     *\n     * @public\n     * @static\n     * @memberof api\n     * @requires config\n     * @method updateConfig\n     * @param {Object} newConfigValues Key-value pairs that will be placed into the store. See {@link config} for details on what key-value pairs are available for use.\n     */\n    updateConfig: function (newConfigValues) {\n      log.debug(API_LOG_TAG + 'updateConfig: ', newConfigValues)\n      context.dispatch(actions.update(newConfigValues))\n    }\n  }\n\n  return configApi\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { mergeValues } from '../../common/utils'\n\nconst reducers = {}\n\nreducers[actionTypes.CONFIG_UPDATE] = {\n  next (state, action) {\n    return mergeValues(state, action.payload)\n  }\n}\n\nreducers[actionTypes.SET_SDP_HANDLERS] = {\n  next (state, action) {\n    return {\n      ...state,\n      call: {\n        ...state.call,\n        sdpHandlers: action.payload.sdpHandlers\n      }\n    }\n  }\n}\n\n// Config default state is an empty Object\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","// Events plugin.\nimport pluginInterface from './interface'\nimport { emitEvent } from './interface/actions'\nimport * as actionTypes from './interface/actionTypes'\n\nimport eventEmitter from './eventEmitter'\n\n// Logs\nimport { logManager } from '../logs'\nconst log = logManager.getLogger('EVENTS')\n\n/**\n * Event Emitter Implementation.\n * Factory function to create the Event Emitter Implementation.\n * Defines the functionality exposed by an Event Emitter Interface.\n */\nexport default function eventsImplementation () {\n  return {\n    name: pluginInterface.name,\n    middleware: middleware,\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer\n  }\n}\n\n/**\n * Implementation of Event Emitter Interface.\n * @return {Middleware} middleware Middleware to be applied to the redux store.\n */\nfunction middleware (context) {\n  var emitter = eventEmitter()\n  var eventMap = {}\n\n  /**\n   * Middleware to handle Event Emitter Interface actions.\n   * Redirects Interface actions to the Plugin functionality, and dispatches\n   *      actions to update the store if needed.\n   * @type {Function}\n   */\n  return next => action => {\n    switch (action.type) {\n      case actionTypes.EVENTS_ON:\n        emitter.on(action.payload.eventType, action.payload.listener)\n        break\n      case actionTypes.EVENTS_OFF:\n        emitter.off(action.payload.eventType, action.payload.listener)\n        break\n      case actionTypes.EVENTS_SUBSCRIBE:\n        emitter.subscribe(action.payload)\n        break\n      case actionTypes.EVENTS_UNSUBSCRIBE:\n        emitter.unsubscribe(action.payload)\n        break\n      case actionTypes.EVENTS_ALIAS:\n        emitter.alias(action.payload.eventType, action.payload.alias)\n        break\n      case actionTypes.EVENTS_EMIT:\n        log.info(`Emitting event: ${action.payload.eventType}`, action.payload.args[0])\n        emitter.emit(action.payload.eventType, ...action.payload.args)\n        break\n      case actionTypes.MAP_EVENTS:\n        for (const actionType in action.payload) {\n          if (action.payload.hasOwnProperty(actionType)) {\n            const mapper = action.payload[actionType]\n            if (eventMap.hasOwnProperty(actionType)) {\n              eventMap[actionType].push(mapper)\n            } else {\n              eventMap[actionType] = [mapper]\n            }\n          }\n        }\n        break\n      default:\n        if (eventMap.hasOwnProperty(action.type)) {\n          // Get state both before and after allowing the action to go through\n          //    the reducers. This lets events have compare state changes.\n          const prevState = context.getState()\n          let result = next(action)\n          const state = context.getState()\n\n          // make this compatible with promise middleware by ensuring we\n          // wait for the promise to resolve. It's easier to just always\n          // use a promise, as opposed to handling cases.\n          if (!result || !result.then) {\n            result = Promise.resolve(result)\n          }\n          result.then(function () {\n            for (const mapper of eventMap[action.type]) {\n              // Use the mapper(s) for this specific event to create the event object(s).\n              // Event mappings have access to the action and states pre+post reducer.\n              let events = mapper(action, { prevState, state })\n              if (!events) {\n                events = []\n              } else if (!Array.isArray(events)) {\n                events = [events]\n              }\n              for (const event of events) {\n                if (!event.args) {\n                  event.args = {}\n                }\n                context.dispatch(emitEvent(event.type, event.args))\n              }\n            }\n          })\n          return result\n        }\n        break\n    }\n\n    return next(action)\n  }\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for an events plugin.\n * @type {string}\n */\nconst name = 'events'\n\nexport default {\n  name,\n  api,\n  reducer\n}\n","// Actions the interface uses.\nimport { on, off, subscribe, unsubscribe } from './actions'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('EVENTS')\n\n/**\n * API for Event Emitter plugin.\n * Defines the public end-points exposed by event plugins.\n * @param  {Object} context The sdk instance context.\n * @returns {Object} api     The interface object.\n */\nexport default function api ({ dispatch }) {\n  var api = {}\n\n  /**\n   * Add an event listener for the specified event type. The event is emitted by the SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method on\n   * @param {string} type The event type for which to add the listener.\n   * @param {Function} listener The listener for the event type. The parameters of the listener depend on the event type.\n   * @throws {Error} Invalid event type\n   * @example\n   * // Listen for events of a specific type emitted by the SDK.\n   * client.on('dummy:event', function (params) {\n   *    // Handle the event.\n   * })\n   */\n  api.on = function (type, listener) {\n    log.debug(API_LOG_TAG + 'on: ', type)\n    dispatch(on(type, listener))\n  }\n\n  /**\n   * Removes an event listener for the specified event type. The event is emitted by the SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method off\n   * @param {string} type The event type for which to remote the listener.\n   * @param {Function} listener The listener to remove.\n   * @throws {Error} Invalid event type\n   */\n  api.off = function (type, listener) {\n    log.debug(API_LOG_TAG + 'off: ', type)\n    dispatch(off(type, listener))\n  }\n\n  /**\n   * Adds a global event listener to SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method subscribe\n   * @param {Function} listener The event listener to add. The parameters are (type, ...args), where args depend on the event type.\n   * @throws {Error} Listener not a function\n   */\n  api.subscribe = function (listener) {\n    log.debug(API_LOG_TAG + 'subscribe')\n    dispatch(subscribe(listener))\n  }\n\n  /**\n   * Removes a global event listener from SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method unsubscribe\n   * @param {Function} listener The event listener to remove.\n   * @throws {Error} Listener not a function\n   */\n  api.unsubscribe = function (listener) {\n    log.debug(API_LOG_TAG + 'unsubscribe')\n    dispatch(unsubscribe(listener))\n  }\n\n  return api\n}\n","// Events plugin.\nimport * as actionTypes from './actionTypes'\n\n// Libraries.\nimport { update, add, concat, contains } from 'lodash/fp'\n\nfunction eventReducer (state = { aliases: [], count: 0 }, action) {\n  switch (action.type) {\n    case actionTypes.EVENTS_ON:\n      return update('count', add(1), state)\n    case actionTypes.EVENTS_OFF:\n      return update('count', add(-1), state)\n    case actionTypes.EVENTS_ALIAS:\n      return update('aliases', concat(action.payload.alias), state)\n    default:\n      return state\n  }\n}\n\n/**\n * Reducer for Event Emitter plugin.\n * Defines the events an Event plugin should dispatch to modify state.\n * @param  {Object} [state={}] The events substate.\n * @param  {Object} action     A Flux Standard action.\n * @returns {Object} state      The new event substate.\n */\nexport default function reducer (state = {}, action) {\n  // Only handle event types.\n  if (!contains(action.type, actionTypes)) {\n    return state\n  }\n\n  return {\n    ...state,\n    [action.payload.eventType]: eventReducer(state[action.payload.eventType], action)\n  }\n}\n","/*\n * Event emitter module. Can be used as a standalone factory or as a mixin.\n *\n * @private\n * @class emitter\n * @example\n * ``` javascript\n * var eventEmitter = emitter(); // Create a new emitter.\n * emitter(myEmittingObject.prototype); // Mixin to an existing object.\n * ```\n */\nexport default function eventEmitter (prototype = {}) {\n  var eventMap = []\n  var subscribeMap = []\n  var strictMode = false\n\n  /*\n   * Check if the event is a valid event type.\n   */\n  function checkEvent (type) {\n    if (strictMode && !eventMap[type]) {\n      throw new Error('Invalid event type: ' + type)\n    }\n  }\n\n  return Object.assign(prototype, {\n    /*\n     * Define an event type with the event emitter.\n     *\n     * @method define\n     * @param {String} type The name for the event type.\n     */\n    define: function (type) {\n      eventMap[type] = eventMap[type] || []\n    },\n\n    /*\n     * Define an alias for an event type.\n     *\n     * @method alias\n     * @param {String} type The event type for which to add an alias.\n     * @param {String} alias The alias name for the event type.\n     * @throws {Error} Invalid event type\n     */\n    alias: function (type, alias) {\n      checkEvent(type)\n\n      eventMap[alias] = eventMap[type] = eventMap[type] || []\n    },\n\n    /*\n     * Add an event listener for the specified event type.\n     *\n     * @method on\n     * @param {String} type The event type for which to add the listener.\n     * @param {Function} listener The listener for the event type. The parameters\n     *                            of the listener depend on the event type.\n     * @throws {Error} Invalid event type\n     */\n    on: function (type, listener) {\n      checkEvent(type)\n      ;(eventMap[type] = eventMap[type] || []).push(listener)\n    },\n\n    /*\n     * Removes an event listener for the specified event type.\n     *\n     * @method off\n     * @param {String} type The event type for which to remote the listener.\n     * @param {Function} listener The listener to remove.\n     * @throws {Error} Invalid event type\n     */\n    off: function (type, listener) {\n      checkEvent(type)\n\n      var list = eventMap[type] || []\n      var i = list.length\n      while (i--) {\n        if (listener === list[i]) {\n          list.splice(i, 1)\n        }\n      }\n    },\n\n    /*\n     * Emits an event of the specified type.\n     *\n     * @method emit\n     * @param {String} type The event type to emit.\n     * @param {any} [...args] The arguments to pass to the listeners of the event.\n     * @throws {Error} Invalid event type\n     */\n    emit: function (type) {\n      checkEvent(type)\n\n      var args = Array.prototype.slice.call(arguments, 1)\n      var list = eventMap[type] || []\n      var i = 0\n\n      for (; i < list.length; i++) {\n        list[i].apply(undefined, args)\n      }\n      for (var j = 0; j < subscribeMap.length; j++) {\n        subscribeMap[j].call(undefined, type, args)\n      }\n    },\n\n    /*\n     * Add a subscription for all event types.\n     *\n     * @method subscribe\n     * @param {Function} listener The listener for all event types.\n     * @throws {Error} Listener not a function\n     */\n    subscribe: function (listener) {\n      if (typeof listener === 'function') {\n        subscribeMap.push(listener)\n      } else {\n        throw new Error('Listener not a function')\n      }\n    },\n\n    /*\n     * Remove a subscription for all event types.\n     *\n     * @method unsubscribe\n     * @param {Function} listener The listener for all event types.\n     * @throws {Error} Listener not a function\n     */\n    unsubscribe: function (listener) {\n      if (typeof listener === 'function') {\n        var i = subscribeMap.length\n        while (i--) {\n          if (listener === subscribeMap[i]) {\n            subscribeMap.splice(i, 1)\n          }\n        }\n      } else {\n        throw new Error('Listener not a function')\n      }\n    },\n\n    /*\n     * Sets the emitter in strict mode where it only allows events that have been defined or aliases.\n     *\n     * @method setStrictMode\n     * @param {Boolean} strict Whether to set strict mode for the emitter.\n     */\n    setStrictMode: function (strict) {\n      strictMode = strict\n    }\n  })\n}\n","// Redux-Saga\nimport { put } from 'redux-saga/effects'\n// Events\nimport eventsMap from '../interface/events'\nimport { mapEvents } from '../../events/interface/actions'\n\nimport { logManager } from '../../logs'\n\n// The interface to follow.\nimport { api, reducer, name } from '../interface'\n\n// State setters.\nimport { update as updateConfig } from '../../config/interface/actions'\n\n// Utilities.\nimport { mergeValues } from '../../common/utils'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\nimport { connectFlow, updateTokenSaga, extendSubscription, onConnectionLostEntry, onSubscriptionGone } from './sagas'\n\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Configuration options for the Authentication feature.\n * @public\n * @name config.authentication\n * @memberof config\n * @instance\n * @param {Object} authentication Authentication configs.\n * @param {Object} authentication.subscription\n * @param {string} authentication.subscription.server Hostname of the server to be used for subscription requests.\n * @param {string} [authentication.subscription.protocol='https'] Protocol to be used for subscription requests.\n * @param {Number} [authentication.subscription.port=443] Port to be used for subscription requests.\n * @param {Number} [authentication.subscription.expires=3600] Time duration, in seconds, until a subscription should expire.\n * @param {Array} [authentication.subscription.service] Services to subscribe to for notifications. Default value is ['call', 'IM', 'presence'].\n * @param {string} [authentication.subscription.localization=English_US]\n * @param {Boolean} [authentication.subscription.useTurn=true]\n * @param {string} [authentication.subscription.notificationType=Websocket]\n * @param {Object} authentication.websocket\n * @param {string} authentication.websocket.server Hostname of the server to be used for websocket notifications.\n * @param {string} [authentication.websocket.protocol='wss'] Protocol to be used for websocket notifications.\n * @param {Number} [authentication.websocket.port=443] Port to be used for websocket notifications.\n * @param {Number} [authentication.earlyRefreshMargin=300]\n */\n\n/**\n * Authentication implementation factory.\n * @method authCpaas\n * @param {Object} options - Configuration options for authentication. See above.\n * @return {Object} plugin - An authentication plugin.\n */\nconst defaultOptions = {\n  subscription: {\n    server: null,\n    protocol: 'https',\n    version: 'v2.0', // not documented, but important\n    port: 443,\n    expires: 3600,\n    service: ['call', 'IM', 'Presence'],\n    localization: 'English_US',\n    useTurn: true,\n    notificationType: 'WebSocket'\n  },\n  websocket: {\n    server: null,\n    protocol: 'wss',\n    port: 443\n  },\n  earlyRefreshMargin: 300\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  subscription: v8n.schema({\n    server: v8n.string(),\n    protocol: enums(['http', 'https']),\n    version: enums(['v2.0']), // not documented, but important\n    port: v8n.positive(),\n    expires: v8n.positive(),\n    service: v8n.array().every.string(),\n    localization: v8n.string(), // TODO: write an enum for this\n    useTurn: v8n.boolean(),\n    notificationType: v8n.string()\n  }),\n  websocket: v8n.schema({\n    server: v8n.string(),\n    protocol: v8n.string(),\n    port: v8n.positive()\n  }),\n  earlyRefreshMargin: v8n.positive()\n})\nconst parseOptions = parse('authentication', v8nValidation)\n\nexport default function authCpaas (options = {}) {\n  options = mergeValues(defaultOptions, options)\n  parseOptions(options)\n\n  if (!options.subscription.server) {\n    log.error('No server configuration provided. Please provide proper authentication configurations.')\n  }\n\n  function * init () {\n    // Send the provided options to the store.\n    // This will be `state.config[name]`.\n    yield put(updateConfig(options, name))\n    yield put(mapEvents(eventsMap))\n  }\n\n  const capabilities = ['connect', 'userCredentialsAuth', 'accessTokenAuth', 'services', 'oauthToken']\n\n  return {\n    sagas: [connectFlow, updateTokenSaga, extendSubscription, onConnectionLostEntry, onSubscriptionGone],\n    capabilities,\n    init,\n    api,\n    reducer,\n    name\n  }\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nfunction authChangedEvent (action) {\n  return {\n    type: action.error ? eventTypes.AUTH_ERROR : eventTypes.AUTH_CHANGE,\n    args: action.error ? { error: action.payload } : {}\n  }\n}\n\nconst eventsMap = {}\n\neventsMap[actionTypes.CONNECT_FINISHED] = authChangedEvent\neventsMap[actionTypes.USER_DETAILS_RECEIVED] = authChangedEvent\neventsMap[actionTypes.CONNECT] = authChangedEvent\neventsMap[actionTypes.DISCONNECT] = authChangedEvent\neventsMap[actionTypes.REFRESH_TOKENS_FINISHED] = authChangedEvent\neventsMap[actionTypes.UPDATE_SUBSCRIPTION_FINISH] = authChangedEvent\neventsMap[actionTypes.SET_CREDENTIALS_FINISH] = authChangedEvent\n\neventsMap[actionTypes.DISCONNECT_FINISHED] = function (action) {\n  const discEvent = authChangedEvent(action)\n  if (action.payload.reason === 'GONE') {\n    discEvent.args.forced = true\n  }\n  if (action.payload.retryAfter) {\n    discEvent.args.retryAfter = action.payload.retryAfter\n  }\n\n  discEvent.args.reason = action.payload.reason\n  return discEvent\n}\n\neventsMap[actionTypes.RESUBSCRIPTION_FINISHED] = function (action) {\n  const resubEvent = {\n    type: eventTypes.AUTH_RESUB,\n    args: {\n      attemptNum: action.payload.attemptNum,\n      isFailure: action.error || false\n    }\n  }\n\n  if (action.error) {\n    resubEvent.args.error = action.payload\n  }\n  return resubEvent\n}\n\neventsMap[actionTypes.SET_CONNECTION_INFO] = function (action) {\n  return {\n    type: eventTypes.AUTH_CREDENTIALS_SET\n  }\n}\n\nexport default eventsMap\n","/**\n * Authentication state has changed. You can get the new state by calling `getConnection()`.\n *\n * @public\n * @memberof api\n * @requires connect\n * @event auth:change\n * @param {Object} params\n * @param {string} params.reason The cause of the authentication change, provided in the event of an unsolicited disconnection. See the `disconnectReasons` API for possible values.\n */\nexport const AUTH_CHANGE = 'auth:change'\n\n/**\n * There was an error with authentication.\n *\n * @public\n * @memberof api\n * @requires connect\n * @event auth:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n *\n */\nexport const AUTH_ERROR = 'auth:error'\n\n/**\n * An attempt to extend the current user's subscription was made.\n *\n * In a failure scenario, the current user is still connected, and further\n * resubscription attempts will be made, but may become disconnected if the\n * session expires.\n * @public\n * @memberof api\n * @requires connect\n * @event auth:resub\n * @param {Object} params\n * @param {number} params.attemptNum The attempt number of this resubscription.\n * @param {boolean} params.isFailure Whether the resubscription failed or not.\n * @param {api.BasicError} [params.error] The Basic error object.\n */\nexport const AUTH_RESUB = 'auth:resub'\n\n/**\n * The information (credentials) needed for connecting have been set.\n *\n * @public\n * @memberof api\n * @requires connect\n * @event auth:credentialsSet\n */\nexport const AUTH_CREDENTIALS_SET = 'auth:credentialsSet'\n","import reducer from './reducers'\nimport name from './name'\nimport api from './api'\n\nexport { reducer, name, api }\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\n\nimport { merge } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.CONNECT] = {\n  next (state) {\n    return {\n      ...state,\n      isPending: true,\n      error: undefined\n    }\n  }\n}\n\nreducers[actionTypes.SET_CONNECTION_INFO] = {\n  next (state, action) {\n    return {\n      ...state,\n      platform: action.meta.platform,\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      },\n      userInfo: action.payload.userInfo\n    }\n  }\n}\n\nreducers[actionTypes.CONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      ...state,\n      isConnected: true,\n      isPending: false,\n      error: undefined,\n      isSSO: action.meta.isSSO,\n      platform: action.meta.platform,\n      // Separate subscription, connection info based on the platform used.\n      // Store platform subscription information.\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: action.payload.subscription\n      },\n      // Store platform connection information to be provided to other plugins.\n      connection: action.payload.connection\n        ? { ...state.connection, [action.meta.platform]: action.payload.connection }\n        : { ...state.connection },\n      // Store user information to be provided to developers.\n      userInfo: action.payload.userInfo ? action.payload.userInfo : state.userInfo\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isConnected: false,\n      isPending: false,\n      error: action.payload\n    }\n  }\n}\n\n// On connection occurred, store the connection information into state, but do\n// not update any status state. The connection has not yet finished.\nreducers[actionTypes.CONNECTION_OCCURRED] = {\n  next (state, action) {\n    return {\n      ...state,\n      // Separate subscription, connection info based on the platform used.\n      // Store platform subscription information.\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: action.payload.subscription\n      },\n      // Store platform connection information to be provided to other plugins.\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      }\n    }\n  }\n}\n\nreducers[actionTypes.DISCONNECT] = {\n  next (state) {\n    return {\n      ...state,\n      isPending: true,\n      error: undefined\n    }\n  }\n}\n\n/*\n * Clear the authentication state when we disconnect.\n * Note: This should only be for 3.X (and 4.X backwards-compatible connect API)\n *    authentication.\n */\nreducers[actionTypes.DISCONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      isConnected: false,\n      isPending: false,\n      error: undefined\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      // Treat an error as if we are still disconnected.\n      isConnected: false,\n      isPending: false,\n      error: action.payload\n    }\n  }\n}\n\nreducers[actionTypes.REFRESH_TOKENS_FINISHED] = {\n  next (state, action) {\n    // Merge the updated requestOptions into the current state.\n    const requestOptions = merge(\n      state.connection[action.meta.platform].requestOptions,\n      action.payload.connection.requestOptions\n    )\n\n    return {\n      ...state,\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: {\n          ...state.connection[action.meta.platform],\n          ...action.payload.connection,\n          requestOptions\n        }\n      },\n      userInfo: {\n        ...state.userInfo,\n        accessToken: action.payload.connection.accessToken,\n        refreshToken: action.payload.connection.refreshToken\n      }\n    }\n  }\n}\n\n/*\n * Updates the subscription information for a specified platform.\n */\nreducers[actionTypes.UPDATE_SUBSCRIPTION_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: {\n          ...state.subscription[action.meta.platform],\n          ...action.payload\n        }\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SET_TOKEN] = {\n  next (state, action) {\n    // We received an idToken which is a JWT token that represents the identity of\n    // the user. This token contains information about the user. For now we only need\n    // the username. In the future we might use more from this token.\n    const idTokenPayload = action.payload.idToken\n    return {\n      ...state,\n      userInfo: {\n        ...state.userInfo,\n        accessToken: action.payload.accessToken,\n        username: idTokenPayload.preferred_username,\n        identity: idTokenPayload['services-identity']\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SET_CREDENTIALS_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      error: undefined,\n      platform: action.meta.platform,\n      // Store platform connection information to be provided to other plugins.\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      },\n      // Store user information to be provided to developers.\n      userInfo: action.payload.userInfo\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      error: action.payload\n    }\n  }\n}\n\n/*\n * Remove the x-token from the request header after subscription is successful.\n */\nreducers[actionTypes.UPDATE_HMAC_TOKEN] = {\n  next (state, action) {\n    const { 'x-token': _removed, ...removeXtoken } = state.connection[action.meta.platform].requestOptions.headers\n\n    const headers = {\n      ...removeXtoken,\n      'x-session': action.payload\n    }\n\n    return {\n      ...state,\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: {\n          ...state.connection[action.meta.platform],\n          requestOptions: {\n            ...state.connection[action.meta.platform].requestOptions,\n            headers\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Auth Interface reducer\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n * @example\n * Auth state structure example; connected.\n * authState = {\n *     isConnected: true,\n *     isPending: false,\n *     error: undefined,\n *     subscription: { ... },\n *     connection: { ... },\n *     userInfo: { ... }\n * }\n */\nconst reducer = handleActions(reducers, {\n  isConnected: false,\n  isPending: false\n})\nexport default reducer\n","/**\n * This interface is for an authentication plugin.\n * @type {string}\n */\nconst name = 'authentication'\nexport default name\n","import * as actions from './actions'\nimport { getUserInfo as selectUserInfo, getServices } from './selectors'\nimport { SUBSCRIPTION_STATE, DISCONNECT_REASONS } from '../constants'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\nimport jwtDecode from 'jwt-decode'\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Authentication API.\n * @method api\n * @param  {Function} $0\n * @param  {Function} $0.dispatch - The redux store's dispatch function.\n * @param  {Function} $0.getState - The redux store's getState function.\n * @return {Object} api - The authentication API object.\n */\nexport default function api ({ dispatch, getState }) {\n  return {\n    /**\n     * Connect with user credentials to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires userCredentialsAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username including the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {string} [credentials.authname] The user's authorization name.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {boolean} [options.forceLogOut] Force the oldest connection to log out if too many simultaneous connections. Link only.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   password: '********'\n     *   authname: '********'\n     * }, {\n     *   forceLogOut: true\n     * });\n     */\n    /**\n     * Connect with user credentials to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires userCredentialsDAKAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.domainApiKey The Api key for the application's domain.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   domainApiKey: 'DAK1111111111111111111',\n     *   username: 'alfred',\n     *   password: '********'\n     * });\n     */\n    /**\n     * Connect by providing an access token to any backend services that the SDK instance deals with.\n     * You can optionally provide a refresh token and the SDK will automatically get new access tokens.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires accessTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.accessToken An access token for the user with the provided user Id.\n     * @param {string} [credentials.refreshToken] A refresh token for the same user.\n     * @param {number} [credentials.expires] The time in seconds until the access token will expire.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   accessToken: 'AT0V1fswAiJadokx1iJMQdG04pRf',\n     *   refreshToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT',\n     *   expires: 3600\n     * });\n     */\n    /**\n     * Connect by providing a username and HMAC token. This connects to any backend services that the SDK instance deals with.\n     * An HMAC token is used to verify a user via the user's authorization within an organization.\n     * HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object\n     * containing an `authenticationTokenRequest` object with the following properties:\n     * - subscriberId - The user's subscriber ID in the organization.\n     * - organizationId - The ID of the organization the user is a part of.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires hmacTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username.\n     * @param {string} credentials.hmacToken An HMAC token for the user with the provided user ID.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {boolean} [options.forceLogOut] Force the oldest connection to log out if too many simultaneous connections.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * const hmacToken = HmacSHA1Algorithm({\n     *   authenticationTokenRequest: {\n     *     subscriberId: 'alfred',\n     *     organizationId: 'example.com'\n     *   }\n     * }, key)\n     *\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   hmacToken\n     * }, {\n     *   forceLogOut: true\n     * });\n     */\n    /**\n     * Connect by providing a refresh token, to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires accessTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.refreshToken A refresh token for the same user.\n     * @param {number} [credentials.expires] The time in seconds until the access token will expire.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   refreshToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     *   expires: 3600\n     * });\n     */\n    /**\n     * Connect by providing an OAuth token, to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires oauthToken\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.oauthToken An OAuth token provided by an outside service.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   oauthToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     * });\n     */\n    connect (credentials, options) {\n      // We won't expose oauthToken because it essentially acts as a password being used in conjunction with username\n      // ..and passwords should NOT be logged.\n      log.debug(API_LOG_TAG + 'connect: ', credentials.username)\n      dispatch(actions.connect(credentials, options))\n    },\n\n    /**\n     * Disconnects from the backend. This will close the websocket and you will stop receiving events.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link services.unsubscribe unsubscribe} for new method of disconnecting.\n     * @requires userCredentialsAuth\n     * @requires userCredentialsDAKAuth\n     * @requires accessTokenAuth\n     * @memberof api\n     * @method disconnect\n     */\n    disconnect () {\n      log.debug(API_LOG_TAG + 'disconnect')\n      dispatch(actions.disconnect())\n    },\n\n    /**\n     * If you're authenticating with tokens that expire and have not provided a refresh token to the `connect` function, you can update your access token with `updateToken` before it expires to stay connected.\n     *\n     * @public\n     * @memberof api\n     * @requires accessTokenAuth\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.accessToken The new access token.\n     * @method updateToken\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.accessToken An access token for the user with the provided user Id.\n     */\n    /**\n     * If you're authenticating with tokens that expire and have not provided a refresh token to the `connect` function, you can update your access token with `updateToken` before it expires to stay connected.\n     *\n     * @public\n     * @memberof api\n     * @requires oauthToken\n     * @method updateToken\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.oauthToken An OAuth token provided by an outside service.\n     * @example\n     * client.updateToken({\n     *   username: 'alfred@example.com',\n     *   oauthToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     * });\n     */\n    updateToken (credentials) {\n      // We won't expose oauthToken because it essentially acts as a password being used in conjunction with username\n      // ..and passwords should NOT be logged.\n      log.debug(API_LOG_TAG + 'updateToken: ', credentials.username)\n      dispatch(actions.refreshTokens(credentials))\n    },\n\n    /**\n     * Updates the current connection.\n     *\n     * @public\n     * @memberof api\n     * @requires updateConnection\n     * @method updateConnection\n     * @param {Object} connection\n     * @param {Array} connection.services Services to subscribe to for notifications.\n     * @example\n     * client.updateConnection({\n     *   services: ['IM', 'Presence', 'call']\n     * })\n     */\n    updateConnection (connection) {\n      log.debug(API_LOG_TAG + 'updateConnection: ', connection)\n      dispatch(actions.updateSubscription(connection))\n    },\n\n    /**\n     * Retrieves information about the current user.\n     *\n     * @public\n     * @memberof api\n     * @method getUserInfo\n     * @returns {Object} user The user data.\n     * @returns {string} user.username The username of the current user. Note that this username can take different encoded forms.\n     *                                 It's not meant to be displayed to a user.\n     * @returns {string} user.token The current access token.\n     */\n    getUserInfo () {\n      log.debug(API_LOG_TAG + 'getUserInfo')\n      return selectUserInfo(getState())\n    },\n\n    /**\n     * Get the connection state.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @method getConnection\n     * @returns {Object} connection The connection state.\n     * @returns {boolean} connection.isConnected Whether the authenticated user is currently connected.\n     * @returns {boolean} connection.isPending Whether the authenticated user's connection is currently pending.\n     * @returns {Object} connection.error The error object if an error occurred.\n     * @returns {string} connection.error.message The error message.\n     * @returns {string} connection.error.stack The stack trace of the error.\n     */\n    getConnection () {\n      log.debug(API_LOG_TAG + 'getConnection')\n      const { isConnected, isPending, error } = getState().authentication\n      return {\n        isConnected,\n        isPending,\n        error,\n        subscription: getServices(getState())\n      }\n    },\n\n    /**\n     * Retrieves the services that the user is subscribed for.\n     *\n     * @public\n     * @memberof api\n     * @requires services\n     * @method getServices\n     * @return {Array} A list of subscribed-to services.\n     */\n    getServices () {\n      log.debug(API_LOG_TAG + 'getServices')\n      return getServices(getState())\n    },\n\n    /**\n     * Possible subscription states of the user.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @property {string} FULL All requested feature subscriptions exist.\n     * @property {string} PARTIAL Some feature subscriptions exist.\n     * @property {string} NONE No feature subscriptions exist.\n     */\n    subscriptionStates: SUBSCRIPTION_STATE,\n\n    /**\n     * Possible reasons for disconnecting.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @property {string} GONE Connection was terminated by the server\n     * @property {string} LOST_CONNECTION Internet connection was lost\n     * @property {string} WS_OVERRIDDEN WebSocket was overridden by the server\n     */\n    disconnectReasons: DISCONNECT_REASONS,\n\n    /**\n     * Sets the authentication tokens necessary to make requests to the platform. The access token\n     * provided establishes what can be accessed by the SDK. The identity token represents who is authenticated.\n     *\n     * @public\n     * @memberof api\n     * @requires cpaasAuth\n     * @method setTokens\n     * @param {Object} params Dictionary object of parameters.\n     * @param {string} params.accessToken An access token retrieved using the authentication APIs of the platform.\n     * @param {string} params.idToken An identity token retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setTokens({\n     *   accessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n     *   idToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * })\n     */\n    setTokens ({ accessToken, idToken }) {\n      // We won't log both tokens, just the id one, so that we can still be able to debug.\n      log.debug(API_LOG_TAG + 'setTokens: ', idToken)\n\n      // validate token\n      try {\n        const jwt = jwtDecode(idToken)\n        dispatch(actions.setTokens({ accessToken, idToken: jwt }))\n      } catch (error) {\n        log.error(`${idToken} is not a valid JWT`)\n      }\n    },\n\n    /**\n     * Sets the user credentials necessary to make requests to the platform.\n     *\n     * @public\n     * @memberof api\n     * @requires userCredentialsAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username including the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {string} [credentials.authname] The user's authorization name.\n     * @example\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   password: '********'\n     *   authname: '********'\n     * });\n     */\n    /**\n     * Sets the username and HMAC token necessary to make requests to the platform.\n     * An HMAC token is used to verify a user via the user's authorization within an of organization.\n     * HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object\n     * containing an `authenticationTokenRequest` object with the following properties:\n     * - subscriberId - The user's subscriber ID in the organization.\n     * - organizationId - The ID of the organization the user is a part of.\n     *\n     * @public\n     * @memberof api\n     * @requires hmacTokenAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username.\n     * @param {string} credentials.hmacToken An HMAC token for the user with the provided user ID.\n     * @example\n     * const hmacToken = HmacSHA1Algorithm({\n     *   authenticationTokenRequest: {\n     *     subscriberId: 'alfred',\n     *     organizationId: 'example.com'\n     *   }\n     * }, key)\n     *\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   hmacToken\n     * });\n     */\n    /**\n     * Provides a bearerAccessToken to any backend services that the SDK instance deals with.\n     * The bearerAccessToken provided establishes what can be accessed by the SDK.\n     *\n     * @public\n     * @memberof api\n     * @requires bearerAccessTokenAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.bearerAccessToken A bearerAccessToken retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   bearerAccessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * });\n     */\n    /**\n     * Sets the authentication tokens necessary to make requests to the platform. The bearerAccessToken\n     * provided establishes what can be accessed by the SDK. The identity token represents who is authenticated.\n     *\n     * @public\n     * @memberof api\n     * @requires cpaasAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.bearerAccessToken A bearerAccessToken retrieved using the authentication APIs of the platform.\n     *                                               The bearerAccessToken is same as the access token for the cpaas platform.\n     * @param {string} credentials.idToken An identity token retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setCredentials({\n     *   bearerAccessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n     *   idToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * });\n     */\n    setCredentials ({ username, password, authname, hmacToken, bearerAccessToken, idToken }) {\n      log.debug(API_LOG_TAG + 'setCredentials: ', username)\n      // TODO: Refactor into multiple actions for each credential mode\n      // TODO: Validation of two authentication possibility scenario\n      dispatch(\n        actions.setCredentials({\n          username,\n          password,\n          authname,\n          hmacToken,\n          bearerAccessToken,\n          idToken\n        })\n      )\n    }\n  }\n}\n","function e(e){this.message=e}e.prototype=new Error,e.prototype.name=\"InvalidCharacterError\";var r=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,\"\");if(t.length%4==1)throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var n,o,a=0,i=0,c=\"\";o=t.charAt(i++);~o&&(n=a%4?64*n+o:o,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(o);return c};function t(e){var t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t=\"0\"+t),\"%\"+t})))}(t)}catch(e){return r(t)}}function n(e){this.message=e}function o(e,r){if(\"string\"!=typeof e)throw new n(\"Invalid token specified\");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(t(e.split(\".\")[o]))}catch(e){throw new n(\"Invalid token specified: \"+e.message)}}n.prototype=new Error,n.prototype.name=\"InvalidTokenError\";export default o;export{n as InvalidTokenError};\n//# sourceMappingURL=jwt-decode.esm.js.map\n","// Auth plugin.\nimport * as actions from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport { getAuthConfig, getConnectionInfo, getSubscriptionInfo } from '../interface/selectors'\nimport { refreshToken, createToken } from '../tokens/uc'\nimport { subscribe as gatewaySubscribe, unsubscribe, resubscribe } from '../subscription/requests'\n\n// Other plugins.\nimport * as connectivityActionTypes from '../../connectivity/interface/actionTypes'\nimport { NOTIFICATION_RECEIVED } from '../../notifications/interface/actionTypes'\nimport { connectWebsocket, disconnectWebsocket } from '../../connectivity/interface/effects'\nimport { getConnectionState } from '../../connectivity/interface/selectors'\nimport { logManager } from '../../logs'\n\n// Helpers.\nimport BasicError, { authCodes } from '../../errors'\nimport { DISCONNECT_REASONS } from '../constants'\nimport request from '../../request/effects'\n\n// Libraries.\nimport {\n  call,\n  put,\n  select,\n  take,\n  fork,\n  cancel,\n  cancelled,\n  race,\n  actionChannel,\n  delay,\n  takeEvery\n} from 'redux-saga/effects'\n\n// Constants\nimport { platforms } from '../../constants'\n\nconst platform = platforms.UC\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Top level saga that acts as an \"entry point\" for authentication.\n * Handles the flow for connecting and disconnecting users.\n * @method connectFlow\n */\nexport function * connectFlow () {\n  while (true) {\n    // Wait for a CONNECT action.\n    const action = yield take(actionTypes.CONNECT)\n\n    // Fork a non-blocking task for the connection process.\n    const task = yield fork(connect, action)\n\n    // Take the actions for if an error or disconnect occurs.\n    const finishOrError = yield take([actionTypes.CONNECT_FINISHED, actionTypes.DISCONNECT])\n\n    if (finishOrError.type === actionTypes.DISCONNECT) {\n      // If disconnect was called before connect finished, then cancel the connect.\n      yield cancel(task)\n    } else if (finishOrError.type === actionTypes.CONNECT_FINISHED && finishOrError.error) {\n      // If an error occurred during connection, then connect flow resets\n      continue\n    } else if (finishOrError.type === actionTypes.CONNECT_FINISHED && !finishOrError.error) {\n      // If connection finished successfully, then wait for a disconnect.\n      const disconnectAction = yield take([actionTypes.DISCONNECT, actionTypes.DISCONNECT_FINISHED])\n\n      // if disconnect has finished, we dont need to do a teardown of auth state, or disconnect the websocket, so reset connectFlow\n      if (disconnectAction.type === actionTypes.DISCONNECT_FINISHED) {\n        continue\n      }\n\n      yield call(disconnect)\n    }\n  }\n}\n\n/**\n * Handles the connection process for username/password and token scenarios.\n * @method connect\n * @param  {Object} action A CONNECT action.\n */\nexport function * connect (action) {\n  const { credentials, options } = action.payload\n\n  // Retrieve the connection info.\n  const config = yield select(getAuthConfig)\n\n  let tokenInfo\n  if (credentials.username && credentials.password) {\n    log.info('Attempting to connect using Username / Password')\n    // If this is a username/password connect scenario, we need to generate\n    //      the token ourselves.\n    tokenInfo = yield call(createToken, action, config)\n\n    if (tokenInfo.error) {\n      // If token generation failed, stop the connection process.\n      yield put(actions.connectFinished(tokenInfo))\n      return\n    }\n  } else if (credentials.accessToken) {\n    log.info('Attempting to connect using an AccessToken')\n    // In a token scenario, all the information is provided to us.\n    tokenInfo = {\n      accessToken: credentials.accessToken,\n      refreshToken: credentials.refreshToken,\n      tokenExpires: credentials.expires,\n      username: credentials.username\n    }\n  } else if (!credentials.accessToken && credentials.refreshToken && credentials.username) {\n    log.info('Attempting to connect using a RefreshToken')\n    // The user is attempting to log in with a refreshToken (and username).\n\n    tokenInfo = yield call(refreshToken, action, config)\n\n    if (tokenInfo.error) {\n      // If token generation failed, stop the connection process.\n      log.info(\n        'Something went wrong while attempting to create an accessToken from the supplied refreshToken. Error: ',\n        tokenInfo.error\n      )\n      yield put(actions.connectFinished(tokenInfo))\n      return\n    }\n  } else if (credentials.oauthToken && credentials.username) {\n    /**\n     * OAuth token handling\n     * Unlike the conventional authToken method, we won't be making use of the refreshToken\n     */\n\n    log.info('Setting Connection with OAuth in UC')\n    tokenInfo = {\n      oauthToken: credentials.oauthToken,\n      username: credentials.username\n    }\n  } else {\n    log.info('The login signature is not valid.')\n    // Other connect scenarios not supported.\n    yield put(\n      actions.connectFinished({\n        error: new BasicError({\n          message: 'This login signature is not valid.',\n          code: authCodes.INVALID_CREDENTIALS\n        })\n      })\n    )\n    return\n  }\n\n  try {\n    // Use the token to subscribe.\n    yield call(subscribe, config, tokenInfo, options)\n  } catch (error) {\n    log.info('Failed to connect. Error: ', error)\n    yield put(actions.connectFinished({ error }))\n  } finally {\n    if (yield cancelled()) {\n      log.info('Disconnecting.')\n      yield call(disconnect)\n    }\n  }\n}\n\n/**\n * This subscribe function makes a request to the UC gateway for a subscription.\n * If successful it triggers a connectFinished action containing subscription and connection information.\n * @method subscribe\n * @param  {Object}    config       Config values.\n * @param  {Object}    tokenInfo\n * @param  {string}    tokenInfo.username     Username passed in by user.\n * @param  {string}    tokenInfo.accessToken  Access Token either from the user or the server.\n * @param  {string}    tokenInfo.refreshToken Refresh Token either from the user or the server.\n * @param  {number}    tokenInfo.tokenExpires Expires time for the access token.\n * @param  {Object}    [options] Options provided as part of the API.\n * @param  {boolean}   [options.forceLogout]\n * @param  {string}    [options.clientCorrelator]\n */\nexport function * subscribe (config, tokenInfo, options) {\n  const { username, accessToken, refreshToken, tokenExpires, oauthToken } = tokenInfo\n\n  let requestOptions = {}\n  // UC requires a token attached to every request.\n  if (oauthToken && !accessToken) {\n    // For subscription requests using an OAuth Token, attach it as a header.\n    requestOptions = {\n      headers: {\n        Authorization: `Bearer ${oauthToken}`\n      }\n    }\n  } else {\n    // For a usual token, attach it to the URL.\n    requestOptions = {\n      queryParams: {\n        token: accessToken\n      }\n    }\n  }\n\n  const connection = {\n    ...config.subscription,\n    // Hardcode the version number for SPiDR requests, since it is\n    //      different than the Gateway version number in configs.\n    version: '1'\n  }\n\n  const connectionInfo = {\n    // Information for other plugins to make requests.\n    server: {\n      protocol: config.subscription.protocol,\n      server: config.subscription.server,\n      port: config.subscription.port,\n      version: config.subscription.version\n    },\n    accessToken,\n    oauthToken,\n    refreshToken,\n    tokenExpires,\n    username,\n    // Request options that all other plugins will use.\n    requestOptions\n  }\n  const userInfo = {\n    username,\n    accessToken,\n    refreshToken\n  }\n  yield put(\n    actions.setConnectionInfo(\n      {\n        connection: connectionInfo,\n        userInfo\n      },\n      platform,\n      false\n    )\n  )\n\n  /*\n   * Merge the API options together with the requestOptions. This doesn't make\n   *    sense, but this is how the `gatewaySubscribe` function takes these\n   *    parameters.\n   */\n  const extras = {\n    ...options,\n    ...requestOptions\n  }\n\n  log.info(`Subscribing user ${username}.`)\n  const response = yield call(gatewaySubscribe, connection, { username }, extras)\n\n  // If the subscription failed, dispatch an error action and stop here.\n  if (response.error) {\n    log.info('Failed to subscribe user. Error: ', response.error)\n    yield put(actions.connectFinished(response))\n    return\n  }\n\n  // WS stuff\n  const subscription = {\n    ...response.subscriptionParams,\n    servicesInfo: response.servicesInfo,\n    url: response.subscription\n  }\n\n  const params = {}\n\n  if (oauthToken && !accessToken) {\n    log.debug('We have an OAuth token but no Access token. Adding OAuth token to parameters as \"access_token\"')\n    // If using OAuth token, set the param token property to its value\n    params.access_token = oauthToken\n  } else {\n    // Otherwise, use the normal access token\n    params.token = accessToken\n  }\n  const websocketInfo = {\n    ...config.websocket,\n    url: subscription.notificationChannel,\n    params: params\n  }\n\n  log.info('Connecting to websocket.')\n  // Request the websocket connection.\n  const wsOpenOrError = yield connectWebsocket(websocketInfo, platform)\n\n  if (wsOpenOrError.error) {\n    log.info('Failed to connect to websocket. Error: ', wsOpenOrError.error)\n    yield put(\n      actions.connectFinished({\n        error: new BasicError({\n          message: 'Websocket connection failed.',\n          code: authCodes.CONNECT_FAIL_WS_ERROR\n        })\n      })\n    )\n  } else {\n    // Filter out null values from subscribed services before storing in state.\n    subscription.service = subscription.service.filter(service => service !== null)\n    log.info('Subscribed to following services: ', subscription.service)\n\n    yield put(\n      actions.connectFinished(\n        {\n          connection: connectionInfo,\n          userInfo,\n          // Information about the current subscription.\n          subscription\n        },\n        platform,\n        false\n      )\n    )\n\n    if (refreshToken) {\n      log.debug('Refreshing token')\n      yield fork(refreshTokenSaga)\n    }\n  }\n}\n\n/**\n * Saga that handles a \"subscription gone\" notification.\n * Treat the notification as a forced disconnect.\n * @method onSubscriptionGone\n */\nexport function * onSubscriptionGone () {\n  // Redux-saga take() pattern.\n  // Take notifications about the subscription being 'gone'.\n  function takeGoneNotification (action) {\n    return (\n      action.type === NOTIFICATION_RECEIVED &&\n      action.payload.notificationMessage &&\n      action.payload.notificationMessage.eventType === 'gone'\n    )\n  }\n\n  // Take \"resubscription failed\" actions caused by the subscription not existing.\n  function takeResubGoneSubscription (action) {\n    return (\n      action.type === actionTypes.RESUBSCRIPTION_FINISHED &&\n      action.error &&\n      // Magic number: 4 is the statusCode KL/CIM returns when a resub request\n      //    fails with a 404.\n      action.payload.code === 4\n    )\n  }\n\n  while (true) {\n    const action = yield take([takeGoneNotification, takeResubGoneSubscription])\n    // Dispatch an action to disconnect the websocket (and let the connectivity\n    //      plugin know we expect it to be disconnected).\n    const wsState = yield select(getConnectionState, platform)\n    if (wsState.connected) {\n      yield disconnectWebsocket(undefined, platform)\n    }\n\n    // Dispatch a disconnect finished action to trigger \"user disconnected\" logic.\n    const content =\n      action.payload.notificationMessage && action.payload.notificationMessage.retryAfter\n        ? { reason: DISCONNECT_REASONS.GONE, retryAfter: action.payload.notificationMessage.retryAfter }\n        : { reason: DISCONNECT_REASONS.GONE }\n    yield put(actions.disconnectFinished(content))\n  }\n}\n\n/**\n * Saga for extending a user's subscription.\n * When triggered, make a resub request to SPiDR for a specific subscription.\n * @method extendSubscription\n */\nexport function * extendSubscription () {\n  // TODO: Refactor and combine with Link subscription logic. Parameterize everything.\n  // Re-subscription timer is triggered by a successful connect or a previous resub finishing.\n  // Use a channel to queue the triggers (so it can catch the put resub action at the end).\n  const resubTriggers = yield actionChannel([actionTypes.CONNECT_FINISHED, actionTypes.RESUBSCRIPTION_FINISHED])\n  while (true) {\n    const action = yield take(resubTriggers)\n\n    // If the action was a connection error, ignore it.\n    if (action.type === actionTypes.CONNECT_FINISHED && action.error) {\n      continue\n    }\n\n    const subscription = yield select(getSubscriptionInfo, platform)\n\n    let attemptNum\n    // If the action was a failed resubscription, increment the attempt number.\n    if (action.type === actionTypes.RESUBSCRIPTION_FINISHED && action.error) {\n      attemptNum = action.payload.attemptNum + 1\n    } else {\n      attemptNum = 1\n    }\n\n    // Set the delay to be halfway between now and when the subscription expires.\n    let resubDelay = (subscription.expires * 1000) / Math.pow(2, attemptNum)\n    // Don't try to resub more often than every 5 minutes.\n    resubDelay = resubDelay > 30000 ? resubDelay : 30000\n\n    // Wait for either the resub delay or a disconnect action.\n    const { expiry } = yield race({\n      expiry: delay(resubDelay),\n      disconnect: take(actionTypes.DISCONNECT_FINISHED)\n    })\n\n    // If the resubDelay expired, attempt resubscription\n    if (expiry) {\n      log.info('Extending user subscription.')\n      const connection = yield select(getConnectionInfo, platform)\n      const subscription = yield select(getSubscriptionInfo)\n\n      const response = yield call(resubscribe, connection, subscription)\n\n      if (response.error) {\n        log.info('Failed to resubscribe user. Error: ', response.error)\n        yield put(\n          actions.resubscribeFinished(\n            {\n              error: response.error,\n              attemptNum\n            },\n            platform\n          )\n        )\n      } else {\n        log.info('Successfully resubscribed user.')\n        // TODO: Check response.serviceInfo for full/partial resubscription.\n        yield put(actions.resubscribeFinished({ attemptNum }, platform))\n      }\n    }\n  }\n}\n\n/**\n * The logic for disconnecting from the server. This includes token revocation.\n * @method disconnect\n */\nexport function * disconnect () {\n  const connection = yield select(getConnectionInfo, platform)\n\n  const wsState = yield select(getConnectionState, platform)\n  if (wsState.connected) {\n    log.info('Disconnecting websocket.')\n    // Dispatch a WS disconnect action and wait for a response\n    yield disconnectWebsocket(undefined, platform)\n  }\n\n  const subscription = yield select(getSubscriptionInfo)\n\n  log.info('Unsubscribing user.')\n  yield call(unsubscribe, connection, subscription.url)\n\n  log.info('Successfully unsubscribed user.')\n  yield put(actions.disconnectFinished())\n}\n\n/**\n * The logic for refreshing accessToken / refreshToken. Adds new tokens to the store.\n * @method refreshTokenSaga\n */\nfunction * refreshTokenSaga () {\n  while (true) {\n    const connection = yield select(getConnectionInfo, platform)\n    const authConfig = yield select(getAuthConfig)\n    const { protocol, server, version, port } = connection.server\n\n    const { disconnect } = yield race({\n      disconnect: take(actionTypes.DISCONNECT_FINISHED),\n      expiry: delay((connection.tokenExpires - authConfig.earlyRefreshMargin) * 1000)\n    })\n\n    // On disconnection we need to end this saga. Since it is not a root saga, it will get re-triggered\n    // after the next connection.\n    if (disconnect) {\n      return\n    } else {\n      log.info('Refreshing user token.')\n      const response = yield request({\n        url: `${protocol}://${server}:${port}/${version}/auth/refresh_token`,\n        queryParams: {\n          token: connection.refreshToken,\n          expires: connection.tokenExpires\n        }\n      })\n\n      if (response.error) {\n        const info = response.payload.body ? response.payload.body : response.payload.result\n        log.info(\n          `Attempt to refresh the accessToken failed. Error: ${response.error} This may be due to server or permissions issues. Info: `,\n          info\n        )\n        yield put(actions.disconnect())\n        return\n      } else {\n        log.info('Successfully refreshed user token.')\n        const {\n          access_token: accessToken,\n          refresh_token: refreshToken,\n          expires: tokenExpires\n        } = response.payload.body.success\n        yield put(\n          actions.refreshTokensFinished(\n            {\n              connection: {\n                accessToken,\n                refreshToken,\n                tokenExpires,\n                // Ensure the extra options for requests is updated\n                //      with the new token.\n                requestExtras: {\n                  queryParams: {\n                    token: accessToken\n                  }\n                }\n              }\n            },\n            platform\n          )\n        )\n      }\n    }\n  }\n}\n/**\n * The logic for updating the store's tokens by the user.\n * @method updateTokenSaga\n */\nexport function * updateTokenSaga () {\n  const tokenChannel = yield actionChannel([actionTypes.REFRESH_TOKENS])\n  while (true) {\n    const action = yield take(tokenChannel)\n\n    const { username, accessToken, oauthToken } = action.payload.credentials\n\n    let requestOptions = {}\n\n    if (oauthToken && username && !accessToken) {\n      // For subscription requests using an OAuth Token, attach it as a header.\n      requestOptions = {\n        headers: {\n          Authorization: `Bearer ${oauthToken}`\n        }\n      }\n    } else if (accessToken && username && !oauthToken) {\n      // Ensure the extra options for requests is updated with the new token.\n      requestOptions.queryParams = {\n        token: action.payload.credentials.accessToken\n      }\n    } else {\n      log.debug('updateToken called without the necessary parameters')\n    }\n\n    log.info('Refreshing token for platform: ', platform)\n    yield put(\n      actions.refreshTokensFinished(\n        {\n          connection: {\n            ...action.payload.credentials,\n            requestOptions\n          }\n        },\n        platform\n      )\n    )\n  }\n}\n\n/**\n * Triggers onConnectionLost saga when a WS_RECONNECT_FAILED actionType occurs\n * @method onConnectionLostEntry\n */\nexport function * onConnectionLostEntry () {\n  yield takeEvery(connectivityActionTypes.WS_RECONNECT_FAILED, onConnectionLost)\n}\n\n/**\n * Handles lost connections from the connectivity plugin\n * @method onConnectionLost\n */\nexport function * onConnectionLost () {\n  yield put(actions.disconnectFinished({ reason: DISCONNECT_REASONS.LOST_CONNECTION }))\n}\n","// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport base64 from 'base-64'\nimport utf8 from 'utf8'\n\n// Helpers.\nimport BasicError, { authCodes } from '../../errors'\nimport request from '../../request/effects'\n\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Generates a token using the user credentials.\n * @method createToken\n * @param  {Object} action A CONNECT action.\n * @param  {Object} config Authentication configurations.\n * @return {Object} Token information or error object.\n */\nexport function * createToken (action, config) {\n  const { protocol, server, version, port } = config.subscription\n  const credentials = action.payload.credentials\n\n  log.info(`Generating access token for user ${credentials.username}.`)\n  const response = yield request({\n    url: `${protocol}://${server}:${port}/${version}/auth/mk_token`,\n    queryParams: {\n      refresh: 'y',\n      expires: credentials.expires\n    },\n    headers: {\n      Authorization: 'basic ' + base64.encode(utf8.encode(credentials.username + ':' + credentials.password))\n    }\n  })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      log.debug('Failed to generate access token.', response.payload.body)\n      return {\n        error: new BasicError({\n          message: `There was an error connecting. Error: ${response.payload.body.error.human}`,\n          code: authCodes.UC_CREATE_TOKEN_FAIL\n        })\n      }\n    } else {\n      // Handle errors from the request plugin.\n      log.debug('Failed to generate access token.', response.payload.result)\n      return {\n        error: new BasicError({\n          message: 'Login request failed. Check your credentials.',\n          code: authCodes.UC_CREATE_TOKEN_FAIL\n        })\n      }\n    }\n  } else {\n    log.debug('Successfully generated access token.')\n    // Return the token information.\n    return {\n      accessToken: response.payload.body.success.access_token,\n      refreshToken: response.payload.body.success.refresh_token,\n      tokenExpires: response.payload.body.success.expires,\n      username: credentials.username\n    }\n  }\n}\n\nexport function * refreshToken (action, config) {\n  const { protocol, server, version, port } = config.subscription\n  const credentials = action.payload.credentials\n\n  const queryParams = {\n    token: credentials.refreshToken\n  }\n  if (credentials.expires) {\n    queryParams.expires = credentials.expires\n  }\n\n  log.info('Refreshing access token ...')\n\n  const response = yield request({\n    url: `${protocol}://${server}:${port}/${version}/auth/refresh_token`,\n    queryParams\n  })\n\n  if (response.error) {\n    const info = response.payload.body ? response.payload.body : response.payload.result\n    log.debug('Failed to refresh token.', info)\n\n    return {\n      error: new BasicError({\n        message: 'Something went wrong while attempting to create an accessToken from the supplied refreshToken.',\n        code: authCodes.UC_CREATE_TOKEN_FAIL\n      })\n    }\n  } else {\n    log.debug('Successfully generated access token.')\n    // Return the token information.\n    return {\n      accessToken: response.payload.body.success.access_token,\n      refreshToken: response.payload.body.success.refresh_token,\n      tokenExpires: response.payload.body.success.expires,\n      username: credentials.username\n    }\n  }\n}\n","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","/**\n * Error codes for the Auth plugin.\n * @name authCodes\n */\nexport const authCodes = {\n  INVALID_CREDENTIALS: 'authentication:1',\n  CONNECT_FAIL_WS_ERROR: 'authentication:2',\n  LINK_UNSUBSCRIBE_FAIL: 'authentication:3',\n  LINK_SUBSCRIBE_FAIL: 'authentication:4',\n  LINK_EXTEND_SUBSCRIPTION_FAIL: 'authentication:5',\n  LINK_UPDATE_SUBSCRIPTION_FAIL: 'authentication:6',\n  UC_SUBSCRIBE_FAIL: 'authentication:7',\n  UC_REFRESH_TOKEN_FAIL: 'authentication:8',\n  UC_CREATE_TOKEN_FAIL: 'authentication:9',\n  UC_EXTEND_SUBSCRIPTION_FAIL: 'authentication:10',\n  UC_DISCONNECT_FAIL: 'authentication:11',\n  MISSING_SERVICE: 'authentication:12'\n}\n\n/**\n * Error codes for the Call plugin.\n * @name callCodes\n */\nexport const callCodes = {\n  UNKNOWN_ERROR: 'call:1',\n  GENERIC_ERROR: 'call:2',\n  INIT_MEDIA_FAILED: 'call:3',\n  USER_MEDIA_ERROR: 'call:4',\n  NOT_SUPPORTED: 'call:5',\n  // The call is in the wrong state.\n  INVALID_STATE: 'call:6',\n  // A provided parameter is not valid.\n  INVALID_PARAM: 'call:7',\n  // There is a desync between components' state.\n  STATE_DESYNC: 'call:8',\n  // Offer could not be generated\n  INVALID_OFFER: 'call:9',\n  // No ICE candidates found\n  NO_ICE_CANDIDATES: 'call:10'\n}\n\n/**\n * Error codes for the Call History plugin.\n * @name callHistoryCodes\n */\nexport const callHistoryCodes = {\n  UNKNOWN_ERROR: 'callHistory:1',\n  BAD_REQUEST: 'callHistory:2',\n  NOT_FOUND: 'callHistory:3',\n  NOT_AUTHENTICATED: 'callHistory:4',\n  FORBIDDEN: 'callHistory:5'\n}\n/**\n * @name clickToCallCodes\n */\nexport const clickToCallCodes = {\n  MISSING_ARGS: 'clickToCall:1',\n  RESPONSE_ERROR: 'clickToCall:2'\n}\n/**\n * Error codes for the Groups plugin.\n * @name groupsCodes\n */\nexport const groupsCodes = {\n  UNKNOWN_ERROR: 'groups:1',\n  GENERIC_ERROR: 'groups:2',\n  MISSING_PARAMETERS: 'groups:3'\n}\n\n/**\n * Error codes for the Message plugin.\n * @name messagingCodes\n */\nexport const messagingCodes = {\n  CREATE_GROUP_FAIL: 'messaging:1',\n  MARK_READ_FAIL: 'messaging:2',\n  REMOVE_MEMBERS_FAIL: 'messaging:3',\n  ADD_MEMBERS_FAIL: 'messaging:4',\n  SEND_MESSAGE_FAIL: 'messaging:5',\n  FETCH_MESSAGES_FAIL: 'messaging:6',\n  FILE_UPLOAD_FAIL: 'messaging:7',\n  FETCH_CONVERSATIONS_FAIL: 'messaging:8',\n  INVALID_DESTINATION: 'messaging:9',\n  INVALID_FILE_PARTS: 'messaging:10',\n  SET_IS_TYPING_FAIL: 'messaging:11'\n}\n\n/**\n * Error codes for the Message Waiting Indicator plugin.\n * @name mwiCodes\n */\nexport const mwiCodes = {\n  FETCH_MWI_FAIL: 'mwi:1'\n}\n\n/**\n * Error codes from the Sip Events plugin.\n * @name sipEventCodes\n */\nexport const sipEventCodes = {\n  UNKNOWN_ERROR: 'sipEvents:1',\n  // The user did not subscribe/connect for the specified sip event service.\n  NOT_PROVISIONED: 'sipEvents:2',\n  // The user is not subscribed for the specified sip event.\n  NOT_SUBSCRIBED: 'sipEvents:3'\n}\n\n/**\n * Error codes for the audio bridge portion of the call plugin.\n * @name bridgeCodes\n */\nexport const bridgeCodes = {\n  UNKNOWN_ERROR: 'audioBridge:1',\n  // TODO: Make \"invalid input\" (and others) a generic code.\n  INVALID_INPUT: 'audioBridge:2',\n  ALREADY_EXISTS: 'audioBridge:3',\n  NOT_FOUND: 'audioBridge:4',\n  NOT_SUPPORTED: 'audioBridge:5',\n  MEDIA_NOT_FOUND: 'audioBridge:6',\n  INVALID_STATE: 'audioBridge:7'\n}\n\n/**\n * Error codes for the subscription plugin.\n * @name subscriptionCodes\n */\nexport const subscriptionCodes = {\n  WS_CONNECTION_ERROR: 'subscription:1',\n  CPAAS_WSREQUEST_FAIL: 'subscription:2',\n  CPAAS_WSREVOKE_FAIL: 'subscription:3',\n  CPAAS_WSREFRESH_FAIL: 'subscription:4',\n  CPAAS_SERVICE_SUB_FAIL: 'subscription:5',\n  CPAAS_SERVICE_UNSUB_FAIL: 'subscription:6',\n  CPAAS_UNSUBSCRIBE_FAIL: 'subscription:7'\n}\n/**\n * Error codes for the Presence plugin.\n * @name presenceCodes\n */\nexport const presenceCodes = {\n  INVALID_STATUS: 'presence:1',\n  INVALID_ACTIVITY: 'presence:2'\n}\n\n/**\n * Error codes for the Users plugin\n * @name usersCodes\n */\nexport const usersCodes = {\n  UNKNOWN: 'users:1',\n  REFRESH_CONTACTS_FAIL: 'users:2',\n  DIRECTORY_REQUEST_FAIL: 'users:3',\n  INVALID_PARAM: 'users:4'\n}\n\n/**\n * Error codes for the Webrtc plugin\n * @name webrtcCodes\n */\nexport const webrtcCodes = {\n  INVALID_PARAM: 'webrtc:1'\n}\n","/**\n * Retrieves the flag which specifies wether or not this SDK should use a custom header as part of any requests being sent to server.\n * This custom header refers to the current agent version,\n * but it may also contain additional custom information (see customAgentVersionHeaderSuffix).\n * @param {Object} state  The current Redux state object.\n * @return {boolean} True if custom header should be used, false otherwise.\n */\nexport function injectAgentVersionHeader (state) {\n  return state.config.requests.injectAgentVersionHeader\n}\n\n/**\n * Retrieves a custom suffix value which specifies any extra information that can be appended to the custom header.\n * This custom header is sent by the SDK, as part of any requests being sent to server.\n * @param {Object} state  The current Redux state object.\n * @return {string} The suffix value.\n */\nexport function customAgentVersionHeaderSuffix (state) {\n  return state.config.requests.customAgentVersionHeaderSuffix\n}\n","// Authentication plugin.\nimport { parseSpidrServices } from './services'\n\n// Other plugins.\nimport request from '../../request/effects'\nimport BasicError, { authCodes } from '../../errors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call } from 'redux-saga/effects'\nimport { mergeValues } from '../../common/utils'\n\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Subscribe to SPiDR with the provided information.\n * @method subscribe\n * @param  {Object} connection Server information.\n * @param  {Object} credentials User information.\n * @return {Object} Subscription response.\n */\nexport function * subscribe (connection, credentials, extras = {}) {\n  /*\n   * TODO: Clean-up / fix the function signature. The requestOptions (eg. headers)\n   *    are mixed with the API options (eg. client correlator) when they're used\n   *    for unrelated purposes.\n   */\n  const subscribeType = connection.isAnonymous ? 'anonymous' : 'user'\n  let requestOptions = {}\n  requestOptions.method = 'POST'\n\n  requestOptions.url =\n    `${connection.protocol}://${connection.server}:${connection.port}` +\n    `/rest/version/${connection.version}` +\n    `/${subscribeType}/${credentials.username}/subscription`\n\n  requestOptions.body = JSON.stringify({\n    subscribeRequest: {\n      expires: connection.expires,\n      service: connection.service,\n      localization: connection.localization || 'English_US',\n      useTurn: connection.useTurn || true,\n      notificationType: connection.notificationType || 'WebSocket',\n      supported: ['RingingFeedback'],\n      forceLogOut: (extras.forceLogOut || false).toString(),\n      clientCorrelator: extras.clientCorrelator\n    }\n  })\n\n  // If there were any extra request options, merge them into the\n  //      options for this request. Priority is for the options defined here.\n  requestOptions = mergeValues(extras, requestOptions)\n\n  log.info(`Subscribing user ${credentials.username}`)\n  // Send the subscription request.\n  const response = yield request(requestOptions)\n\n  if (response.error) {\n    if (response.payload.body) {\n      const body = response.payload.body\n\n      let statusCode\n      if (body.statusCode && body.reason) {\n        /*\n         * In some cases, the response is not wrapped in a `subscribeResponse`\n         *    property. This seems to be when using a pre-provisioned user (stored\n         *    as part of KL?) rather than a dynamically created user (retrieved\n         *    from AS?).\n         * Reference: ABE-23981 (and KAA-1937)\n         */\n        statusCode = body.statusCode\n      } else if (body.authorizationResponse && body.authorizationResponse.statusCode) {\n        /*\n         * In other cases, the response is wrapped in a `authorizationResponse`\n         *    property instead. This seems to be when an anonymous user\n         *    subscription fails (a success has `subscribeResponse`).\n         * Reference: KAA-2440\n         */\n        statusCode = body.authorizationResponse.statusCode\n      } else {\n        statusCode = body.subscribeResponse.statusCode\n      }\n      log.debug(`Failed user subscription with status code ${statusCode}.`)\n\n      // Handle errors from the server.\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Failed to subscribe user. Code: ${statusCode}.`,\n          code: authCodes.LINK_SUBSCRIBE_FAIL\n        })\n      }\n    } else {\n      log.debug('Failed user subscription.', response.payload.result.message)\n      // Handle errors from the request plugin.\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Subscribe request failed: ${response.payload.result.message}.`,\n          // TODO: Shared error codes.\n          code: authCodes.LINK_SUBSCRIBE_FAIL\n        })\n      }\n    }\n  } else {\n    // Request was successful.\n    const subscribeResponse = response.payload.body.subscribeResponse\n\n    const subscribedServices = subscribeResponse.subscriptionParams.service\n    const servicesInfo = yield call(parseSpidrServices, connection.service, subscribedServices)\n    log.debug(`Successfully subscribed user. Service subscription status: ${servicesInfo.status}`)\n\n    return {\n      error: false,\n      servicesInfo,\n      ...subscribeResponse\n    }\n  }\n}\n\n/**\n * Unsubscribe from SPiDR with the provided subscription info.\n * @method unsubscribe\n * @param  {Object}    connection Server information for the service in use.\n * @param  {string}    connection.server Server information for generating the URL.\n * @param  {string}    connection.requestOptions Common request options to be added.\n * @param  {string}    subscriptionURL URL of the user's subscription instance.\n */\nexport function * unsubscribe (connection, subscriptionURL) {\n  const requestOptions = {}\n  requestOptions.method = 'DELETE'\n\n  requestOptions.url =\n    `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` + subscriptionURL\n\n  log.info('Unsubscribing user.')\n  // Send the unsubscribe request.\n  const response = yield request(requestOptions)\n\n  /*\n   * No matter what the response was, we still want to handle the user as\n   *    unsubscribed afterwards. If the request fails, there isn't a point to\n   *    keep the user subscribed since they want to unsubscribe anyway.\n   * For debug purposes, log what the response was but handle it as a success.\n   */\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.subscribeResponse\n      log.debug(`Encountered error unsubscribing user with status code ${statusCode}.`)\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug('Encountered error unsubscribing user.', message)\n    }\n  } else {\n    // Request was successful.\n    log.debug('User unsubscribed successfully.')\n  }\n}\n\n/**\n * Resubscribe to SPiDR to extend an existing subscription.\n * @method resubscribe\n * @param  {Object}    connection Server information for the service in use.\n * @param  {string}    connection.server Server information for generating the URL.\n * @param  {string}    connection.requestOptions Common request options to be added.\n * @param  {Object}    subscription Information about the subscription instance.\n * @param  {string}    subscription.expires - The time (in seconds) until subscription expiry.\n * @param  {Array}     subscription.service - The SPiDR services to resubscribe to.\n * @param  {Array}     subscription.url - The URL of the user's subscription instance.\n * @return {Object}    Resubscription response.\n */\nexport function * resubscribe (connection, subscription) {\n  const requestOptions = {}\n  requestOptions.method = 'PUT'\n\n  if (subscription.clientCorrelator) {\n    requestOptions.url =\n      `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` +\n      `/rest/version/${connection.server.version}` +\n      `/user/${connection.username}/subscription/clientCorrelator/${subscription.clientCorrelator}`\n  } else {\n    requestOptions.url =\n      `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` + subscription.url\n  }\n\n  // TODO: Don't hardcode the defaults here. Should be shared with\n  //      the subscribe request as well.\n  requestOptions.body = JSON.stringify({\n    subscribeRequest: {\n      expires: subscription.expires,\n      service: subscription.service,\n      localization: subscription.localization || 'English_US',\n      useTurn: subscription.useTurn || true,\n      notificationType: subscription.notificationType || 'WebSocket'\n    }\n  })\n\n  log.info('Resubscribing user.')\n  // Send the subscription update request.\n  const response = yield request(requestOptions)\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.subscribeResponse\n      log.debug(`Failed to update user subscription with status code ${statusCode}.`)\n\n      let message, errorCode\n      if (response.payload.result.code === 404 && [4, 39].includes(statusCode)) {\n        /*\n         * Special case: Status code 39 (for KL) or 4 (for UC) means the subscription\n         *    does not exist (ie. the request 404'd). We want to treat this error\n         *    differently because it is a \"subscription gone\" scenario and we need\n         *    to clear the SDK's subscription info.\n         */\n        message = `Subscription no longer exists. Code ${statusCode}.`\n        // TODO: We shouldn't be assigning arbitrary codes to BasicError (ie. only\n        //    use the codes pre-defined) because the application also gets access\n        //    to this, but we don't have a good way to pass specific error info\n        //    around for side-effects (ie. subscription gone).\n        errorCode = statusCode\n      } else {\n        message = `Failed to update user subscription with status code ${statusCode}.`\n        errorCode = authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n      }\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({ message, code: errorCode })\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug('User subscription update request failed.', message)\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Update subscription request failed.: ${message}.`,\n          // TODO: Shared error codes.\n          code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n        })\n      }\n    }\n  } else {\n    // Request was successful.\n    const resubResponse = response.payload.body.subscribeResponse\n\n    if (resubResponse.statusCode === 0 || resubResponse.statusCode === 2) {\n      const subscribedServices = resubResponse.subscriptionParams.service\n      const servicesInfo = yield call(parseSpidrServices, subscription.service, subscribedServices)\n      log.debug(`Successfully resubscribed user. Service resubscription status: ${servicesInfo.status}`)\n\n      // Success.\n      return {\n        error: false,\n        servicesInfo,\n        ...resubResponse\n      }\n    } else {\n      log.info('Failed to resubscribe user. Status Code: ', resubResponse.statusCode)\n      // Unknown statusCode, consider as failure.\n      return {\n        error: new BasicError({\n          message: `Unknown error; statusCode: ${resubResponse.statusCode}.`,\n          code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n        })\n      }\n    }\n  }\n}\n","import { SUBSCRIPTION_STATE } from '../constants'\n\n/**\n * Uses the requested and received SPiDR [subscription] services to determine\n *      the SDK subscription status for each service.\n * @method parseSpidrServices\n * @param  {Array}  requested The list of requested SPiDR services.\n * @param  {Array}  received The list of received SPiDR services.\n * @return {Object} Information about the SDK's subscriptions.\n */\nexport function parseSpidrServices (requested, received) {\n  // UC platform is not case-sensitive (Link is), so filter without caring about case.\n  const upperReceived = received.map(service => service.toUpperCase())\n\n  // Find the missing services.\n  const missing = requested.filter(function (reqService) {\n    // If the requested service was received (not caring about case),\n    //      it is not missing.\n    return upperReceived.indexOf(reqService.toUpperCase()) === -1\n  })\n\n  const subscriptions = {\n    requested,\n    received,\n    missing,\n    status: 'UNKNOWN',\n    services: {}\n  }\n\n  // Determine the overall subscription status.\n  if (received.length === 0) {\n    subscriptions.status = SUBSCRIPTION_STATE.NONE\n  } else if (received.length > 0 && missing.length > 0) {\n    subscriptions.status = SUBSCRIPTION_STATE.PARTIAL\n  } else if (received.length > 0 && requested.length === received.length) {\n    subscriptions.status = SUBSCRIPTION_STATE.FULL\n  } else {\n    // Should never reach this case.\n  }\n\n  // List the individual service statuses.\n  received.forEach(function (service) {\n    subscriptions.services[service] = true\n  })\n  missing.forEach(function (service) {\n    subscriptions.services[service] = false\n  })\n\n  return subscriptions\n}\n","// Connectivity.\nimport { wsAttemptConnect, wsDisconnect } from './actions'\nimport { WS_CONNECT_FINISHED, WS_DISCONNECT_FINISHED, WS_ERROR } from './actionTypes'\nimport { getConnectionState } from './selectors'\n\n// Other plugins.\nimport { getPlatform } from '../../auth/interface/selectors'\nimport { UNSUBSCRIBE_FINISHED } from '../../subscription/interface/actionTypes'\n\n// Libraries.\nimport { delay, put, race, select, take } from 'redux-saga/effects'\n\n/**\n * Custom redux-saga effect.\n * Wraps \"communication\" between the connectivity plugin and another plugin\n *     for connecting to a websocket.\n * @method connectWebsocket\n * @param {Object} websocketInfo Information needed to create the websocket.\n * @param {string} websocketInfo.protocol\n * @param {string} websocketInfo.server\n * @param {string} websocketInfo.port\n * @param {string} websocketInfo.url\n * @param {Object} [websocketInfo.params]\n * @param {string} platform The backend platform being connected to.\n * @return {Object} The response action of type `WS_CONNECT_FINISHED`.\n */\nexport function * connectWebsocket (websocketInfo, platform) {\n  // Dispatch the action that triggers a saga to connect to a websocket.\n  yield put(wsAttemptConnect(websocketInfo, platform))\n\n  // Wait for the action that signifies the result of the above action.\n  const responseAction = yield take(action => {\n    return action.type === WS_CONNECT_FINISHED && action.meta.platform === platform\n  })\n\n  // Return the response.\n  return responseAction\n}\n\n/**\n * Effect for disconnecting a websocket to a platform.\n * @method disconnectWebsocket\n * @param  {Object} payload\n * @param  {string} platform The backend platform being disconnected from.\n * @return {Object} The response action of type `WS_DISCONNECT_FINISHED`.\n */\nexport function * disconnectWebsocket (payload, platform) {\n  // Dispatch the action that triggers a saga to disconnect the websocket.\n  yield put(wsDisconnect(payload, platform))\n\n  // Wait for the action that signifies the result of the above action.\n  const responseAction = yield take(action => {\n    return (action.type === WS_DISCONNECT_FINISHED || action.type === WS_ERROR) && action.meta.platform === platform\n  })\n\n  // Return the response.\n  return responseAction\n}\n\n/**\n * Effect for waiting for the websocket / subscription to reconnect.\n * Assumption is that the websocket is in the middle of reconnect attempts. This\n *    is why the timeout is so long; one of the two scenarios should be guaranteed\n *    to happen before then.\n * @param {number} timeout The time, in milliseconds, to wait before timing out.\n * @return {boolean} Whether the websocket has reconnected or not.\n */\nexport function * waitForReconnect (timeout = 60000) {\n  const platform = yield select(getPlatform)\n  const { connected: isConnected } = yield select(getConnectionState, platform)\n\n  if (isConnected) {\n    return true\n  }\n\n  const { reconnected } = yield race({\n    // If websocket reconnects, then we're reconnected (...duh).\n    reconnected: take(action => action.type === WS_CONNECT_FINISHED && !action.error),\n    // If the user unsubscribes (ie. ws reconnect fails), then we're disconnected.\n    disconnected: take(action => action.type === UNSUBSCRIBE_FINISHED && !action.error),\n    timeout: delay(timeout)\n  })\n\n  return Boolean(reconnected)\n}\n","const prefix = '@@KANDY/SUBSCRIPTION/'\n\nexport const SUBSCRIBE = prefix + 'SUBSCRIBE'\nexport const SUBSCRIBE_FINISHED = prefix + 'SUBSCRIBE_FINISHED'\n\nexport const UNSUBSCRIBE = prefix + 'UNSUBSCRIBE'\nexport const UNSUBSCRIBE_FINISHED = prefix + 'UNSUBSCRIBE_FINISHED'\n\nexport const RESUBSCRIPTION_FINISHED = prefix + 'RESUBSCRIPTION_FINISHED'\n\nexport const REGISTER_SUB_SERVICE = prefix + 'REGISTER_SUB_SERVICE'\nexport const PLUGIN_SUBSCRIPTION = prefix + 'PLUGIN_SUBSCRIPTION'\nexport const PLUGIN_SUBSCRIPTION_FINISHED = prefix + 'PLUGIN_SUBSCRIPTION_FINISHED'\nexport const PLUGIN_UNSUBSCRIPTION = prefix + 'PLUGIN_UNSUBSCRIPTION'\nexport const PLUGIN_UNSUBSCRIPTION_FINISHED = prefix + 'PLUGIN_UNSUBSCRIPTION_FINISHED'\n\nexport const CHANNEL_OPENED = prefix + 'CHANNEL_OPENED'\nexport const CHANNEL_CLOSED = prefix + 'CHANNEL_CLOSED'\n","// Import a call shim between FCS calls and Next version of SDK.\n// It is used to handle FCS' call object, since we cannot put it in sate.\nimport callShimFactory from './callShim'\n\nimport { fork, put } from 'redux-saga/effects'\nimport * as authActionTypes from '../../auth/interface/actionTypes'\nimport * as notiActionTypes from '../../notifications/interface/actionTypes'\nimport * as connActionTypes from '../../connectivity/interface/actionTypes'\nimport {\n  getPlatform,\n  getRequestInfo,\n  getAuthConfig,\n  getUserInfo,\n  getConnectionInfo\n} from '../../auth/interface/selectors'\nimport { update as updateConfig } from '../../config/interface/actions'\n\nimport { checkMediaDevices, watchCheckMediaDevices, onDeviceChange } from './sagas'\nimport { mapEvents } from '../../events/interface/actions'\nimport BasicError, { callCodes } from '../../errors'\n\n// Utilities.\nimport { defaults, isFunction, omit, pick } from 'lodash/fp'\nimport { logManager as logMgr } from '../../logs'\nimport { getCpaasAgentHeaderValue } from '../../request/utils'\n\n// Import the interface to implement.\nimport pluginInterface from '../interface'\nimport { callsActions, devicesActions, localVideoActions, mediaActions, audioBridgeActions } from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport { getCallById, getCallConfig, getMediaInfo } from '../interface/selectors'\nimport events from '../interface/events'\n\n// Constants\nimport { platforms } from '../../constants'\n\n// get logger\nconst log = logMgr.getLogger('CALL')\nconst fcsLog = logMgr.getLogger('FCS')\n\n// eslint-disable-next-line no-warning-comments\n/**\n * Configuration options for the call feature.\n * @public\n * @name config.call\n * @memberof config\n * @instance\n * @param {Object} call The call configuration object.\n * @param {Object} [call.callDefaults] Default options to be used when making/answering a call.\n * @param {boolean} [call.callDefaults.isAudioEnabled=true] Specifies whether audio is enabled or not.\n * @param {boolean} [call.callDefaults.isVideoEnabled=true] Specifies whether video is enabled or not.\n * @param {boolean} [call.callDefaults.sendInitialVideo=false] Specifies whether to send an initial video stream or not.\n * @param {Object} [call.callDefaults.remoteVideoContainer] Specifies the container where video (coming from remote party) is rendered.\n * @param {Object} [call.callDefaults.localVideoContainer] Specifies the container where video (coming from local party) is rendered.\n * @param {string} [call.chromeExtensionId] ID of the screenshare extension being used for screenshare of Google Chrome.\n * @param {boolean} [call.recordCallStats=false] Whether to enable the recording of call statistics as part of app's local storage.\n * @param {boolean} [call.earlyMedia=false] Whether to use early media (e.g. for playing incoming tones) as part of an outgoing call.\n * @param {number} [call.callAuditTimer=30000] Audit time value for calls, as a positive number in milliseconds.\n * @param {number} [call.activeCallTimeoutMS=120000] Timeout for an existing ringing call before it gets terminated, as a positive number in milliseconds.\n * @param {boolean} [call.ringingFeedback] When enabled, inform Spidr that RingingFeedback is supported.\n * @param {string} [call.codecsToReplace] Specifies alternative audio/video codecs to use for a given call. It has been deprecated so pipeline parameter should be used instead.\n * @param {boolean} [call.videoInactiveOnHold=false] Sets the video as \"inactive\" instead of \"sendonly\" when holding a call.\n * @param {boolean} [call.forceDisableMediaOnHold=false] Disables any type of media (e.g. Comfort Noise) from transmitting when call is held locally.\n * @param {number} [call.iceCandidateCollectionTimeoutInterval=3000] When provided (in milliseconds), ice candidate collection is assumed to be completed if at least one candidate is received within the interval.\n * @param {boolean} [call.relayCandidateCollectionTimeoutCycle=false] When enabled, iceCandidateCollectionTimeoutInterval is restarted until receiving first relay candidate. If the provided cycle limit is reached, ice candidate collection assumed to be completed.\n * @param {boolean} [call.recordCallStats=false] When enabled, call statistics are recorded in app's localstorage after the call is terminated.\n * @param {Object} [call.callConstraints] Custom RTCPeerConnection constraints to use for calls. Will cause errors if malformed.\n * @param {Object} [call.callConstraints.chrome] Custom constraints to be used on Google Chrome.\n * @param {Object} [call.callConstraints.firefox] Custom constraints to be used on Mozilla Firefox.\n * @param {string} [call.bundlePolicy='DISABLED'] The bundle policy to use for peer connections. Value can be fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_COMPAT, fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_BUNDLE, fcs.SDP_CONSTANTS.BUNDLE_POLICY.BALANCED or fcs.SDP_CONSTANTS.BUNDLE_POLICY.DISABLED. The DISABLED option means that bundle group lines will be removed from every SDP.\n * @param {Object} [call.opusConfig] Bandwidth controls to add for Opus audio codec.\n * @param {number} [call.opusConfig.maxPlaybackRate] Maximum playback rate, in bits per second. Must be a positive value between 8000 and 48000.\n * @param {number} [call.opusConfig.maxAverageBitrate] A bitrate encoding value between 6000 and 510000 bits per second.\n * @param {number} [call.opusConfig.fec] Specifies whether Forward Error Correction is enabled or not. When enabled, FEC provides robustness against packet loss. Acceptable values can only be 0 or 1.\n * @param {number} [call.opusConfig.dtx] Specifies whether Discontinuous Transmission mode is enabled or not. When enabled, DTX reduces the bitrate during silence or background noise. Acceptable values can only be 0 or 1.\n * @param {number} [call.opusConfig.ptime] Packet (i.e. frame) duration in milliseconds. Frames will be combined into packets to achieve the maximum of 120 ms duration. A positive value between 2.5 and 120.\n * @param {number} [call.webrtcLogCollectionInterval=3000] Interval at which to collect WebRTC logs for calls, in milliseconds.\n * @param {boolean} [call.useRelay=false] Whether we should force connection through the relay candidates (i.e. TURN server). Mostly used for testing.\n * @param {string} [call.trickleIceSupport='none'] Whether we should advertise and use Trickle ICE. Accepted value is one of: 'none', 'half' or 'full'.\n * @param {boolean} [call.continuity=false] Whether an existing voice call can be persisted, as a mobile phone moves between circuit switched and packet switched domains (e.g. GSM to WiFi).\n * @param {boolean} [call.resyncOnConnect=false] Whether all active calls should be resynched upon connecting or reconnecting to the websocket (requires Kandy Link 4.7.1+).\n */\n\n/**\n * CallsLink factory. For call-related configs, see the makeCall API documentation.\n * @method callsLink\n * @param {Object} [options={}] Plugin configs. See above.\n * @return {Object} Call plugin.\n */\nexport default function callsLink (options = {}) {\n  const defaultOptions = {\n    // Values used as defaults for making/answering a call.\n    callDefaults: {\n      isAudioEnabled: true,\n      isVideoEnabled: true,\n      sendInitialVideo: false,\n      remoteVideoContainer: undefined,\n      localVideoContainer: undefined\n    },\n    // Values passed to FCS.\n    webrtcdtls: true,\n    chromeExtensionId: undefined,\n    serverProvidedTurnCredentials: false,\n    iceserver: [],\n    recordCallStats: false\n  }\n\n  const callDefaults = defaults(defaultOptions.callDefaults, options.callDefaults)\n  options = defaults(defaultOptions, options)\n  options.callDefaults = callDefaults\n\n  function * init () {\n    // Send the provided options to the store.\n    // This will be `state.config[name]`.\n    yield put(updateConfig(options, pluginInterface.name))\n    yield put(mapEvents(events))\n\n    // Check media devices on setup. Do this as a non-blocking effect,\n    //      since there is an async portion to it.\n    yield fork(checkMediaDevices)\n  }\n\n  return {\n    middleware,\n    api: pluginInterface.api,\n    capabilities: ['call'],\n    name: pluginInterface.name,\n    reducer: pluginInterface.reducer,\n    init,\n    sagas: [watchCheckMediaDevices, onDeviceChange]\n  }\n}\n\nfunction middleware ({ dispatch, getState }) {\n  var config = {}\n  const shimContext = {\n    // Provide the values as a function, so that we\n    // don't call getState before the store is created.\n    getUsername: function () {\n      return getUserInfo(getState()).username\n    }\n  }\n  const callShim = callShimFactory(shimContext)\n\n  // FCS logger.\n  function fcsLogger (loggerName, level, logObject) {\n    const msg = logObject.timestamp + ' - ' + loggerName + ' - ' + level + ' - ' + logObject.message\n\n    // Protect against args being undefined.\n    const extras = logObject.args || []\n\n    fcsLog.debug(msg, ...extras)\n  }\n\n  /*\n   * Register a listener on FCS to dispatch an action when we receive a call.\n   * @method onReceived\n   * @param  {Object} call An FCS call object.\n   */\n  callShim.onIncomingCall = function (callId, callInfo) {\n    dispatch(callsActions.callIncoming(callId, callInfo))\n  }\n\n  callShim.onCallStateChange = function (callId, state, transition, callInfo = {}) {\n    // Add information about the transition that we can determine using\n    //      previous state and new state.\n    const prevCallState = getCallById(getState(), callId)\n    transition.prevState = prevCallState.state\n    transition.newState = state\n\n    // TODO: Once this if/else chain grows, move this as a utility.\n    if (prevCallState.state === 'RINGING' && state === 'IN_CALL') {\n      // Call is first established.\n      callInfo.startTime = Date.now()\n      transition.event = 'callEstablished'\n    } else if (prevCallState.state === state && prevCallState.remoteVideoState !== callInfo.remoteVideoState) {\n      // If only the remoteVideoState property changed...\n      transition.event = 'remoteVideoChange'\n    } else if (state === 'ENDED') {\n      const now = Date.now()\n      callInfo.endTime = now\n      // If there isn't a start time, then the call was never completed.\n      //      Meaning it's duration was 0, so set the start time appropriately.\n      if (!prevCallState.startTime) {\n        callInfo.startTime = now\n      }\n    }\n\n    // Dispatch an action on state change.\n    dispatch(callsActions.callStateChange(callId, state, transition, callInfo))\n  }\n\n  callShim.onMediaStateChange = function (callId, mediaState) {\n    // Dispatch an action on media state change.\n    dispatch(callsActions.callMediaStateChange(callId, mediaState))\n  }\n\n  callShim.onBridgeCallsChanged = function (bridgeId, calls) {\n    // Dispatch an action on bridge state change\n    dispatch(audioBridgeActions.updateAudioBridgeCalls(bridgeId, calls))\n  }\n\n  return next => action => {\n    switch (action.type) {\n      case actionTypes.SET_DEFAULT_DEVICES: {\n        log.debug('Setting default call devices.', action.payload)\n        const devices = pick(['camera', 'microphone', 'speaker'], action.payload)\n        callShim\n          .setDefaultDevices(devices)\n          .then(function (setDevices) {\n            dispatch(devicesActions.setDefaultDevicesFinish({ devices: setDevices }))\n          })\n          .catch(function (error) {\n            dispatch(devicesActions.setDefaultDevicesFinish({ error }))\n          })\n        break\n      }\n\n      case actionTypes.PROMPT_USER_MEDIA: {\n        log.debug('Getting user media.')\n        callShim\n          .promptUserMedia(action.payload)\n          .then(function ({ params }) {\n            dispatch(mediaActions.promptUserMediaFinish(params))\n          })\n          .catch(function ({ params, basicError }) {\n            dispatch(mediaActions.promptUserMediaFinish(params, basicError))\n          })\n        break\n      }\n\n      case actionTypes.CHANGE_SPEAKER: {\n        log.debug('Change current speaker used for call audio.', action.payload)\n        callShim\n          .changeSpeaker(action.payload)\n          .then(function (speakerId) {\n            dispatch(devicesActions.changeSpeakerFinish({ speakerId }))\n          })\n          .catch(function ({ speakerId, error }) {\n            dispatch(devicesActions.changeSpeakerFinish({ speakerId, error }))\n          })\n        break\n      }\n\n      case actionTypes.CHANGE_INPUT_DEVICES: {\n        log.debug('Changing current camera/microphone used for call.', action.payload.callId)\n        callShim\n          .changeInputDevices(action.payload.callId)\n          .then(function (callId) {\n            dispatch(devicesActions.changeInputDevicesFinish({ callId }))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(devicesActions.changeInputDevicesFinish({ callId, error }))\n          })\n        break\n      }\n\n      case authActionTypes.CONNECT: {\n        // Set up FCS logging if enabled.\n        // Do it here since it's the earliest not-at-store-creation point\n        //      where we use FCS.\n        // TODO: Selector for logs state?\n        if (getState().config.logs.enableFcsLogs) {\n          // Set the fcsLog handler to directly log to console. The fcsLogger\n          //    should have already formatted the messages. An application won't\n          //    have a chance to handle these logs directly, but that's v3.X ...\n          fcsLog.logHandler = entry => {\n            console.debug(...entry.messages)\n          }\n          // Set the fcsLog level to debug.\n          fcsLog.level = 'DEBUG'\n\n          // Provide the fcsLogger (which calls the above fcsLog) to FCS.\n          callShim.initLogging(fcsLogger, true)\n        }\n\n        const { username, password, authname } = action.payload.credentials\n        // Do this here since it's the last point we have access to the password.\n        callShim.setUserAuth(username, password, authname)\n\n        // Retrieve configs for use within the middleware scope.\n        // This has to be done after init*, hence after connect, but only\n        //      needed once, so not at the base of the middleware scope.\n        config = getCallConfig(getState())\n\n        // Set connection info in FCS\n        const authConfig = getAuthConfig(getState())\n        var connectionInfo = {\n          protocol: authConfig.subscription.protocol,\n          restUrl: authConfig.subscription.server,\n          restPort: authConfig.subscription.port,\n          websocketProtocol: authConfig.websocket.protocol,\n          websocketIP: authConfig.websocket.server,\n          websocketPort: authConfig.websocket.port,\n          // Need to set callResyncOnConnect into FCS config here\n          callResyncOnConnect: config.resyncOnConnect,\n          // Hook into FCS Call requests\n          ajaxHook: function (xhr, unusedWindow, { url, headers }) {\n            const platform = getPlatform(getState())\n\n            // Get and set the X-Cpaas-Agent header value to be sent with all call\n            // control requests.  NOTE: X-Cpaas-Agent is already set for non call\n            // related requests in the request plugin.\n            const cpaasAgentHeaderValue = getCpaasAgentHeaderValue(platform, url)\n            headers['X-Cpaas-Agent'] = cpaasAgentHeaderValue\n\n            // Request headers/urls are populated differently depending on whether it is Link or UC\n            if (platform === platforms.LINK) {\n              const requestInfo = getRequestInfo(getState(), platform)\n              const customHeaders = requestInfo.requestOptions.headers\n              // Include custom x-session header if it exists.\n              // (Used by subsequent requests after authenticated & subscribed via HMAC token)\n              if (customHeaders['x-session']) {\n                headers['x-session'] = customHeaders['x-session']\n              }\n              return {\n                url: url,\n                headers: headers\n              }\n            } else if (platform === platforms.UC) {\n              const { oauthToken, accessToken } = getConnectionInfo(getState(), platforms.UC)\n              if (oauthToken) {\n                // For OAuth handling, add the Bearer token to the Request Header\n                headers = {\n                  ...headers,\n                  Authorization: `Bearer ${oauthToken}`\n                }\n              } else {\n                // For regular Access Token handling, add the token to the URL string\n                const tokenString = `token=${accessToken}`\n                if (url.indexOf('?') === -1) {\n                  url += '?' + tokenString\n                } else {\n                  url += '&' + tokenString\n                }\n              }\n              return {\n                url: url,\n                headers: headers\n              }\n            }\n          }\n        }\n        log.debug('Setting connection info configs in FCS', connectionInfo)\n        callShim.setConnectionInfo(connectionInfo)\n        break\n      }\n\n      case authActionTypes.CONNECT_FINISHED: {\n        if (action.error) {\n          // Don't setup FCS if the login failed.\n          break\n        }\n\n        const hasCallService =\n          action.payload.subscription.service.indexOf('call') > -1 ||\n          action.payload.subscription.service.indexOf('callMe') > -1\n\n        // Log a warning if the user isn't subscribed for calls.\n        if (!hasCallService) {\n          // TODO: An event should be emitted from this. So the app knows to check services /\n          //      update services to try and get calls.\n          log.error('Error: Setting up for calls without a call service subscription. Calls will likely fail.')\n        }\n\n        if (action.meta.isSSO) {\n          // If we are in an SSO scenario we first have to call fcs' setTokenAuth endpoint.\n          // For normal CONNECT scenario's the equivalent is setUserAuth in the CONNECT middleware above.\n          // For SSO we do it here since we don't get the username until after the connect server response.\n          callShim.setTokenAuth(action.payload.userInfo.username, action.payload.userInfo.token)\n\n          // This call tells FCS to use UAT's instead of basic auth for all future rest calls.\n          callShim.setKandyUAT(action.payload.userInfo.token)\n        }\n\n        // Pull out the FCS' setup configs from the plugin configs.\n        const fcsConfig = omit(['callDefaults', 'chromeExtensionId'], config)\n\n        // Update the ice server info provided to FCS with the turn credentials\n        //      retrieved from subscription.\n        if (fcsConfig.serverProvidedTurnCredentials && fcsConfig.hasOwnProperty('iceserver')) {\n          const turnCredentials = action.payload.subscription.turnCredentials || {}\n          if (turnCredentials.username && turnCredentials.password) {\n            log.debug('Using server provided turn credentials.')\n            fcsConfig.iceserver = fcsConfig.iceserver.map(function (iceInfo) {\n              return {\n                ...iceInfo,\n                username: turnCredentials.username,\n                credential: turnCredentials.password\n              }\n            })\n          } else {\n            // TODO: Should this dispatch an error action? Or is a warning\n            //      enough, since an error will be encountered when calling?\n            log.warn('Warning: Server turn credentials not found.')\n          }\n        }\n\n        if (config.chromeExtensionId) {\n          fcsConfig.screenSharing = {\n            chromeExtensionId: config.chromeExtensionId\n          }\n        }\n\n        // If there are plugin configs not present in setupVars,\n        // add them in now.\n        var setupVars = fcsConfig\n        if (action.payload.connection.isAnonymous) {\n          setupVars.anonymous = true\n        }\n        if (action.payload.connection.realm) {\n          setupVars.realm = action.payload.connection.realm\n          callShim.setRealm(action.payload.connection.realm)\n        }\n\n        // Don't log passwords.\n        const toLog = defaults(setupVars, {\n          iceserver: setupVars.iceserver.map(function (server) {\n            return {\n              ...server,\n              credential: '********'\n            }\n          })\n        })\n        log.debug('Setting up FCS with configs (connection info, including hooks, already set): ', toLog)\n\n        // Setup the callstack.\n        callShim.setup(setupVars)\n\n        // Initialize media.\n        dispatch(mediaActions.initMedia(setupVars))\n        break\n      }\n      case actionTypes.MAKE_CALL: {\n        const callId = action.payload.callId\n        const options = defaults(config.callDefaults, action.payload.callInfo)\n        if (!options.from) {\n          // If no `from` is provided, use the current user.\n          options.from = getUserInfo(getState()).username\n        }\n        log.debug('Making call with options: ', options)\n\n        // Call the shim's makeCall function.\n        callShim\n          .makeCall(callId, options)\n          // FCS' startCall success callback.\n          .then(function ({ options }) {\n            dispatch(callsActions.makeCallFinish(callId, options))\n          })\n          // Failure scenario for either startCall or initMedia.\n          .catch(function ({ error, options }) {\n            dispatch(callsActions.makeCallFinish(callId, options, error))\n          })\n\n        break\n      }\n\n      case actionTypes.ANSWER_CALL: {\n        const options = defaults(config.callDefaults, action.payload.callInfo)\n        options.to = getUserInfo(getState()).username\n        log.debug('Answering call with options: ', options)\n\n        callShim\n          .answerCall(action.payload.callId, options)\n          .then(function ({ callId }) {\n            dispatch(callsActions.answerCallFinish(callId, options))\n          })\n          .catch(function ({ error, callId }) {\n            dispatch(callsActions.answerCallFinish(callId, options, error))\n          })\n        break\n      }\n\n      case actionTypes.IGNORE_CALL: {\n        log.debug('Ignoring call.', action.payload.callId)\n        callShim\n          .ignoreCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.ignoreCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.ignoreCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.REJECT_CALL: {\n        log.debug('Rejecting call.', action.payload.callId)\n        callShim\n          .rejectCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.rejectCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.rejectCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.END_CALL: {\n        log.debug('Ending call.', action.payload.callId)\n        callShim\n          .endCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.endCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.endCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.MUTE_CALL: {\n        log.debug('Muting call.', action.payload.callId)\n        callShim\n          .muteCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.muteCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.muteCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.UNMUTE_CALL: {\n        log.debug('Unmuting call.', action.payload.callId)\n        callShim\n          .unMuteCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.unMuteCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.unMuteCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.SILENCE_CALL: {\n        log.debug('Silencing call.', action.payload.callId)\n        callShim\n          .silenceCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.silenceCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.silenceCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.UNSILENCE_CALL: {\n        log.debug('Unsilencing call.', action.payload.callId)\n        callShim\n          .unSilenceCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.unSilenceCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.unSilenceCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.SET_CUSTOM_PARAMETERS: {\n        log.debug('Setting custom parameters.')\n        callShim.setCustomParameters(action.payload.callId, action.payload.customParameters)\n        break\n      }\n\n      case actionTypes.START_VIDEO: {\n        log.debug('Starting call video.', action.payload.callId)\n        callShim\n          .startVideo(action.payload.callId, action.payload.callInfo)\n          .then(function ({ callId, params }) {\n            dispatch(callsActions.startVideoFinish(callId, params))\n          })\n          .catch(function ({ callId, params, error }) {\n            dispatch(callsActions.startVideoFinish(callId, params, error))\n          })\n        break\n      }\n\n      case actionTypes.STOP_VIDEO: {\n        log.debug('Stopping call video.', action.payload.callId)\n        callShim\n          .stopVideo(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.stopVideoFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.stopVideoFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.HOLD_CALL: {\n        log.debug('Hold call.', action.payload.callId)\n        callShim\n          .holdCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.holdCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.holdCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.UNHOLD_CALL: {\n        log.debug('Unhold call.', action.payload.callId)\n        callShim\n          .unHoldCall(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.unHoldCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.unHoldCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.SEND_DTMF: {\n        log.debug('Sending DTMF tone to call.', action.payload.callId)\n        callShim\n          .sendDTMF(action.payload.callId, action.payload.params.tone)\n          .then(function () {\n            log.info('DTMF tone sent.')\n            // Nothing to be stored in state for DTMF tone.\n          })\n          .catch(function ({ callId, error }) {\n            log.info('DTMF tone could not be sent.')\n            dispatch(callsActions.sendDTMFFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.SEND_CUSTOM_PARAMETERS: {\n        log.debug('Sending custom parameters.', action.payload.callId)\n        callShim\n          .sendCustomParameters(action.payload.callId)\n          .then(function () {\n            log.info('Custom parameters sent.')\n            // Nothing to be stored in state.\n          })\n          .catch(function ({ callId, error }) {\n            log.info('Custom parameters could not be sent.')\n            dispatch(callsActions.sendCustomParametersFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.START_SCREENSHARE: {\n        log.debug('Starting screenshare on call.', action.payload.callId)\n\n        /**\n         * Special case callback function.\n         * Triggers when screensharing is stopped by the browser.\n         * Defined in this scope so that it knows about the redux level.\n         */\n        const onScreenshareStop = function () {\n          log.debug('Screenshare stopped manually.')\n          dispatch(callsActions.stopScreenshareFinish(action.payload.callId))\n        }\n\n        callShim\n          .startScreenshare(action.payload.callId, action.payload.callInfo.screenshareOptions, onScreenshareStop)\n          .then(function ({ callId, params }) {\n            dispatch(callsActions.startScreenshareFinish(callId, params))\n          })\n          .catch(function ({ callId, params, error }) {\n            dispatch(callsActions.startScreenshareFinish(callId, params, error))\n          })\n        break\n      }\n\n      case actionTypes.STOP_SCREENSHARE: {\n        log.debug('Stopping screenshare on call.', action.payload.callId)\n        callShim\n          .stopScreenshare(action.payload.callId)\n          .then(function ({ callId }) {\n            dispatch(callsActions.stopScreenshareFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.stopScreenshareFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.FORWARD_CALL: {\n        log.debug(`Forwarding call to user ${action.payload.params.destination}`, action.payload.callId)\n        callShim\n          .forwardCall(action.payload.callId, action.payload.params.destination)\n          .then(function ({ callId }) {\n            dispatch(callsActions.forwardCallFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.forwardCallFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.DIRECT_TRANSFER: {\n        log.debug(`Transferring call (direct) to user ${action.payload.params.destination}`, action.payload.callId)\n        callShim\n          .directTransfer(action.payload.callId, action.payload.params.destination)\n          .then(function ({ callId }) {\n            dispatch(callsActions.directTransferFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.directTransferFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.CONSULTATIVE_TRANSFER: {\n        log.debug(\n          `Transferring call (consultative) to destination ${action.payload.params.destination}`,\n          action.payload.callId\n        )\n        callShim\n          .consultativeTransfer(action.payload.callId, action.payload.params.destination)\n          .then(function ({ callId }) {\n            dispatch(callsActions.consultativeTransferFinish(callId))\n          })\n          .catch(function ({ callId, error }) {\n            dispatch(callsActions.consultativeTransferFinish(callId, error))\n          })\n        break\n      }\n\n      case actionTypes.JOIN_CALL: {\n        log.debug(`Joining call ${action.payload.params.destination}`, action.payload.callId)\n        callShim\n          .joinCall(action.payload.callId, action.payload.params.destination)\n          .then(function ({ callId: joinedCallId, joinedCalls, callState }) {\n            const state = getState()\n            const username = getUserInfo(state).username\n            const joinedCallTo = joinedCalls.map(function (callId) {\n              const call = getCallById(state, callId)\n              return call.to === username ? call.from : call.to\n            })\n            // Add as much info as we can to the joined call.\n            const callInfo = {\n              state: callState,\n              from: username,\n              to: 'Joined Call',\n              participants: joinedCallTo,\n              // Mark this call as \"special\".\n              isJoinedCall: true,\n              joinedCalls,\n              // TODO: These values are assumed...\n              isAudioEnabled: true,\n              isVideoEnabled: false,\n              muted: false\n            }\n\n            dispatch(\n              callsActions.joinCallFinish(joinedCallId, joinedCalls, {\n                callInfo\n              })\n            )\n          })\n          .catch(function ({ callId: joinedCallId, joinedCalls, error }) {\n            dispatch(callsActions.joinCallFinish(joinedCallId, joinedCalls, { error }))\n          })\n        break\n      }\n\n      case actionTypes.START_LOCAL_VIDEO: {\n        log.debug('Starting local video.')\n        const videoContainer = action.payload || config.localVideoContainer\n        callShim\n          .startLocalVideo(videoContainer)\n          .then(function (container) {\n            dispatch(localVideoActions.startLocalVideoFinish(container))\n          })\n          .catch(function ({ error }) {\n            let basicError\n            // Convert the callShim error object into a BasicError.\n            if (error.type === 'media') {\n              basicError = new BasicError({\n                message: error.message,\n                code: callCodes.INIT_MEDIA_FAILED\n              })\n            } else if (error.type === 'video') {\n              basicError = new BasicError({\n                message: error.message,\n                code: callCodes.USER_MEDIA_ERROR\n              })\n            } else if (error.type === 'generic') {\n              basicError = new BasicError({\n                message: error.message,\n                code: callCodes.GENERIC_ERROR\n              })\n            } else {\n              basicError = new BasicError({\n                message: 'An error occurred when starting local video.',\n                code: callCodes.UNKNOWN_ERROR\n              })\n            }\n\n            dispatch(localVideoActions.startLocalVideoFinish(null, basicError))\n          })\n        break\n      }\n\n      case actionTypes.STOP_LOCAL_VIDEO: {\n        log.debug('Stopping local video.')\n        callShim\n          .stopLocalVideo()\n          .then(function () {\n            dispatch(localVideoActions.stopLocalVideoFinish())\n          })\n          .catch(function (error) {\n            const basicError = new BasicError({\n              message: error.message,\n              code: callCodes.GENERIC_ERROR\n            })\n            dispatch(localVideoActions.stopLocalVideoFinish(basicError))\n          })\n        break\n      }\n\n      case actionTypes.INIT_MEDIA: {\n        // Move around the extension ID to be where FCS will look for it.\n        //      Done the same way as before setup is done.\n        if (action.payload.chromeExtensionId) {\n          action.payload.screenSharing = {\n            chromeExtensionId: action.payload.chromeExtensionId\n          }\n        }\n\n        const callState = defaults(getCallConfig(getState()), action.payload)\n        const { isConnected } = getState().authentication\n\n        const mediaResults = getMediaInfo(getState())\n        // Only allow initMedia before connecting. Doing initMedia will\n        //      override any settings used the last time initMedia was called,\n        //      so only allow manual initMedia before connection, since\n        //      connection is where iceserver settings are retrieved from server.\n        // TODO: Fix \"this\" properly (ie. fix FCS' initMedia).\n        // Side-note: FCS' results from second+ attempt may not be accurate.\n        if (!isConnected) {\n          log.debug('Initializing media.')\n          callShim.initMedia(callState).then(function (result) {\n            dispatch(mediaActions.initMediaFinish(result))\n          })\n        } else {\n          log.debug('Media already initialized; re-using results.')\n          dispatch(mediaActions.initMediaFinish(mediaResults))\n        }\n        break\n      }\n\n      case actionTypes.CREATE_AUDIO_BRIDGE: {\n        log.debug('Creating audio bridge.', action.payload.bridgeId)\n        callShim\n          .createLocalAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.createAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.createAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      case actionTypes.CLOSE_AUDIO_BRIDGE: {\n        log.debug('Closing audio bridge.', action.payload.bridgeId)\n        callShim\n          .closeAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.closeAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.closeAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      /*\n       * BRIDGE_ADD_CALL action is fired without .then(), as the bridge's active list of calls is kept up to date\n       * in the state through the UPDATE_AUDIO_BRIDGE_CALLS action, which is emitted by the bridge itself.\n       * UPDATE_AUDIO_BRIDGE_CALLS is mapped to the BRIDGE_CHANGE event.\n       *\n       * `addCallToBridge.catch()` is still used for error handling.\n       */\n      case actionTypes.BRIDGE_ADD_CALL: {\n        const { bridgeId, callId } = action.payload\n        log.debug('Adding call to bridge.', bridgeId)\n        callShim.addCallToBridge(bridgeId, callId).catch(function (error) {\n          dispatch(audioBridgeActions.addCallToBridgeFinish(bridgeId, callId, error))\n        })\n        break\n      }\n\n      /*\n       * BRIDGE_REMOVE_CALL action is fired without .then(), as the bridge's active list of calls is kept up to date\n       * in the state through the UPDATE_AUDIO_BRIDGE_CALLS action, which is emitted by the bridge itself.\n       * UPDATE_AUDIO_BRIDGE_CALLS is mapped to the BRIDGE_CHANGE event.\n       *\n       * `removeCallFromBridge.catch()` is still used for error handling.\n       */\n      case actionTypes.BRIDGE_REMOVE_CALL: {\n        const { bridgeId, callId } = action.payload\n        log.debug('Removing call to bridge.', bridgeId)\n        callShim.removeCallFromBridge(bridgeId, callId).catch(function (error) {\n          dispatch(audioBridgeActions.removeCallFromBridgeFinish(bridgeId, callId, error))\n        })\n        break\n      }\n\n      case actionTypes.MUTE_AUDIO_BRIDGE: {\n        log.debug('Muting audio bridge.', action.payload.bridgeId)\n        callShim\n          .muteAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.muteAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.muteAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      case actionTypes.UNMUTE_AUDIO_BRIDGE: {\n        log.debug('Unmuting audio bridge.', action.payload.bridgeId)\n        callShim\n          .unmuteAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.unmuteAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.unmuteAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      case actionTypes.SILENCE_AUDIO_BRIDGE: {\n        log.debug('Silencing audio bridge.', action.payload.bridgeId)\n        callShim\n          .silenceAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.silenceAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.silenceAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      case actionTypes.UNSILENCE_AUDIO_BRIDGE: {\n        log.debug('Unsilencing audio bridge.', action.payload.bridgeId)\n        callShim\n          .unsilenceAudioBridge(action.payload.bridgeId)\n          .then(function () {\n            dispatch(audioBridgeActions.unsilenceAudioBridgeFinish(action.payload.bridgeId))\n          })\n          .catch(function (error) {\n            dispatch(audioBridgeActions.unsilenceAudioBridgeFinish(action.payload.bridgeId, error))\n          })\n        break\n      }\n\n      case notiActionTypes.NOTIFICATION_RECEIVED: {\n        // TODO: Limit this to only handle call related messages.\n        //      Or generalize this to another plugin/handler.\n        const data = action.payload.notificationMessage\n        if (data) {\n          const callbacks = callShim.getNotificationCallbacks()\n          if (isFunction(callbacks[data.eventType])) {\n            const channel = action.meta.channel\n            log.debug(`${channel} notification message received: ${data.eventType}`)\n            // Handle websocket messages by forwarding them to FCS' notification system.\n            callbacks[data.eventType](data)\n          }\n        }\n        break\n      }\n\n      case connActionTypes.LOST_CONNECTION: {\n        const globalBroadcaster = callShim.getGlobalBroadcaster()\n        globalBroadcaster.publish('NOTIFICATION_CHANNEL_LOST', {})\n        break\n      }\n\n      case connActionTypes.WS_CONNECT_FINISHED: {\n        const globalBroadcaster = callShim.getGlobalBroadcaster()\n        globalBroadcaster.publish('DEVICE_SUBSCRIPTION_STARTED', {})\n        break\n      }\n\n      default:\n        break\n    }\n\n    return next(action)\n  }\n}\n","// TODO: Fix this?\n/* eslint-disable prefer-promise-reject-errors */\n\n// Import the \"Next\" version of FCS.\nimport { createFcs } from 'fcs/next'\nimport { FCS_CALL_STATES, FCS_ICE_MEDIA_STATES } from '../constants'\n\nimport BasicError, { bridgeCodes } from '../../errors'\nimport { logManager } from '../../logs'\nimport { v4 as uuidV4 } from 'uuid'\n\n// Get the logger\nconst log = logManager.getLogger('CALL')\n\n/**\n * Shim for interactions between FCS calls and Redux middleware.\n * Because FCS uses layered callbacks, it becomes either complicated or tedious\n * quite quickly when trying to implement all call features.\n * This shim is meant to remove the callback-bloat from the middleware.\n * It wraps FCS' multiple step async calls into a single step.\n * This also handles the FCS call objects, since they cannot be stored in state.\n * @method shim\n * @param  {Object} context [description]\n * @return {Object} api - Functions wrapped by the shim.\n */\nexport default function shim (context) {\n  const { getUsername } = context\n  const fcs = createFcs()\n\n  /**\n   * Map of on-going calls in FCS.\n   * Keyed by the ID as it exists in the SDK\n   * @type {Object}\n   */\n  var ongoingCalls = {}\n\n  /**\n   * Map of audio bridges in FCS.\n   * Keyed by the ID as it exists in the SDK\n   * @type {Object}\n   */\n  var audioBridges = {}\n\n  /*\n   * Information about the local, non-call video stream.\n   */\n  var localStream = null\n\n  /**\n   * Utility function to retrieve the corresponding SDK Call IDs for\n   * a list of FCS call object IDs\n   *\n   * @param {Array} fcsCalls - FCS call objects\n   * @returns {Array} - SDK call ID strings\n   */\n  function getUnifiedSdkCalls (fcsCalls) {\n    const map = {}\n    const callIds = []\n    if (fcsCalls.length > 0) {\n      for (const k in ongoingCalls) {\n        map[ongoingCalls[k].getId()] = k\n      }\n      fcsCalls.forEach(call => {\n        if (map[call.id]) {\n          callIds.push(map[call.id])\n          delete map[call.id]\n        }\n      })\n    }\n    return callIds\n  }\n\n  /**\n   * Handler for initMedia's failure scenario.\n   * Generates an error object based on the error code.\n   * @method processMediaError\n   * @param  {number} errorCode [description]\n   * @return {Object} Error object.\n   */\n  function processMediaError (errorCode) {\n    const mediaErrors = fcs.call.MediaErrors\n    // TODO: Don't hardcode these here.\n    const pluginUrls = {\n      urlWin32bit: 'https://kandy-portal.s3.amazonaws.com/public/plugin/3.1.524/Kandy_Plugin_3.1.524.exe',\n      urlWin64bit: 'https://kandy-portal.s3.amazonaws.com/public/plugin/3.1.524/Kandy_Plugin_3.1.524_x86_64.exe',\n      urlMacUnix: 'https://kandy-portal.s3.amazonaws.com/public/plugin/3.1.524/Kandy_Plugin_3.1.524.pkg'\n    }\n\n    var error\n    switch (errorCode) {\n      case mediaErrors.WRONG_VERSION:\n        error = {\n          code: mediaErrors.WRONG_VERSION,\n          message: 'Media Plugin Version Not Supported'\n        }\n        break\n      case mediaErrors.NEW_VERSION_WARNING:\n        error = {\n          code: mediaErrors.NEW_VERSION_WARNING,\n          message: 'New Plugin Version is available,',\n          pluginUrls\n        }\n        break\n      case mediaErrors.NOT_INITIALIZED:\n        error = {\n          code: mediaErrors.NOT_INITIALIZED,\n          message: \"Media couldn't be initialized.\"\n        }\n        break\n      case mediaErrors.NOT_FOUND:\n        error = {\n          code: mediaErrors.NOT_FOUND,\n          message: \"Plugin couldn't be found!\",\n          pluginUrls\n        }\n        break\n      case mediaErrors.NO_SCREENSHARING_WARNING:\n        error = {\n          code: mediaErrors.NO_SCREENSHARING_WARNING,\n          message: 'ScreenShare extension could not be found.'\n        }\n    }\n\n    // TODO: Provide a better error object. See PR #692 comments.\n    return error\n  }\n\n  /**\n   * Attempts to initialize media.\n   * @method initMedia\n   * @param {Object} options FCS options for initMedia.\n   * @return {Promise}\n   */\n  function initializeMedia (options) {\n    return new Promise(function (resolve) {\n      function initMediaSuccess () {\n        log.info('Media initialized successfully.')\n        resolve({\n          code: 0,\n          message: 'Media initialized.',\n          error: false\n        })\n      }\n      function initMediaFailure (errorCode) {\n        var result = processMediaError(errorCode)\n        result.error = true\n        resolve(result)\n      }\n\n      fcs.call.initMedia(initMediaSuccess, initMediaFailure, options)\n    })\n  }\n\n  /**\n   * Helper function for retrieving an ongoing call.\n   * @method getInternalCall\n   */\n  function getInternalCall (callId) {\n    var call = ongoingCalls[callId]\n    if (!call) {\n      log.info('Specified call Id does not match an on-going call.', callId)\n      return false\n    } else {\n      log.debug('Internal call retrieved.', call)\n      return call\n    }\n  }\n\n  /**\n   * Helper function for retrieving current audio bridges.\n   * @method getInternalBridge\n   */\n  function getInternalBridge (bridgeId) {\n    var bridge = audioBridges[bridgeId]\n    if (!bridge) {\n      log.info('Specified bridge Id does not match any current bridge.', bridgeId)\n      return false\n    } else {\n      log.debug('Internal bridge retrieved.', bridge)\n      return bridge\n    }\n  }\n\n  /**\n   * Handles a call state change.\n   * Curried function so that it has the callId.\n   * @method onStateChange\n   * @param  {string} callId - ID of the call that changed state.\n   * @return {Function} - Function that gets attached to fcsCall.onStateChange function.\n   */\n  function onStateChange (callId) {\n    // @param {number} state - New state of the call.\n    // @param {string} statusCode - Code representing the reason for the state change.\n    // @param {string} reasonText - Explanation of the status code.\n    // @param {Object} localStatusAndReason - Context from local side. Uses different codes/texts.\n    // @param {string} localStatusAndReason.localStatusCode - Local equivalent to statusCode.\n    // @param {string} localStatusAndReason.localReasonText - Local equivalent to reasonText.\n    return function (state, statusCode, reasonText, localStatusAndReason) {\n      // Treat \"renegotiating\" state changes as \"in call\" state.\n      if (state === fcs.call.States.RENEGOTIATION) {\n        log.debug('Renegotiating call state change. Treating as \"in call\".', callId)\n        state = fcs.call.States.IN_CALL\n      }\n\n      // Restructure FCS' state change context objects.\n      // Only one side ever has useful information.\n      var transition\n      if (statusCode && reasonText) {\n        transition = {\n          code: statusCode,\n          reasonText: reasonText\n        }\n      } else if (localStatusAndReason) {\n        transition = {\n          code: localStatusAndReason.localStatusCode,\n          reasonText: localStatusAndReason.localReasonText\n        }\n      } else {\n        transition = {}\n      }\n\n      // If the state change was an end, remove the call internally.\n      //      FCS has already dereference the call.\n      if (state === fcs.call.States.ENDED) {\n        log.debug(`Call state is ended, removing internal call reference: ${callId}`)\n        delete ongoingCalls[callId]\n      } else {\n        // Retrieve other call info that may have changed.\n        var call = getInternalCall(callId)\n        var callInfo = {\n          remoteParticipant: call.remoteParticipant,\n          isVideoNegotiationAvailable: call.isVideoNegotiationAvailable ? call.isVideoNegotiationAvailable() : false\n        }\n\n        // If the FCS call has updated participant info, update the\n        //      redux call with it. Try to ensure they have domains.\n        const domain = getUsername() ? '@' + getUsername().split('@')[1] : ''\n        if (call.callerNumber) {\n          callInfo.from = call.callerNumber\n          if (callInfo.from.indexOf('@') === -1) {\n            callInfo.from += domain\n          }\n        }\n        if (call.calleeNumber) {\n          callInfo.to = call.calleeNumber\n          if (callInfo.to.indexOf('@') === -1) {\n            callInfo.to += domain\n          }\n        }\n        if (call.callerName) {\n          callInfo.callerName = call.callerName\n        }\n        if (call.calleeName) {\n          callInfo.calleeName = call.calleeName\n        }\n\n        // Don't try things on a joined call. They're \"special\".\n        if (!call.getJoin()) {\n          callInfo.remoteVideoState = call.getRemoteVideoState()\n        }\n      }\n      log.debug(`Call state change. ID: ${callId}, state: ${FCS_CALL_STATES[state]}, context: ${transition}`)\n      // Go to the redux level.\n      api.onCallStateChange(callId, FCS_CALL_STATES[state], transition, callInfo)\n    }\n  }\n\n  /**\n   * Handles a call media state change.\n   * Curried function so that it has the callId.\n   * @method onStateChange\n   * @param  {string} callId - ID of the call that changed state.\n   * @return {Function} - Function that gets attached to fcsCall.onMediaStateChange function.\n   */\n  function onMediaStateChange (callId) {\n    // @param {number} mediaState New media state of the call.\n    return function (mediaState) {\n      log.debug(`Call media state change. ID: ${callId}, state: ${FCS_ICE_MEDIA_STATES[mediaState]}.`)\n      // Go to the redux level.\n      api.onMediaStateChange(callId, FCS_ICE_MEDIA_STATES[mediaState])\n    }\n  }\n\n  /*\n   * Register a listener to FCS for incoming calls.\n   * Process the call as needed by the shim,\n   *      then go to the redux level.\n   * @method onReceived\n   * @param  {Object}   call - FCS call object.\n   */\n  fcs.call.onReceived = function (call) {\n    // Create our own call ID for storing in state.\n    const callId = uuidV4()\n    ongoingCalls[callId] = call\n\n    const callInfo = {\n      from: call.callerNumber,\n      callerName: call.callerName,\n      to: getUsername(),\n      remoteVideoState: call.getRemoteVideoState(),\n      remoteParticipant: call.remoteParticipant,\n      wrtcsSessionId: call.getId(),\n      isVideoNegotiationAvailable: call.isVideoNegotiationAvailable ? call.isVideoNegotiationAvailable() : false\n      // TODO: Get more info from the call.\n      // TODO: Make call info consistent between\n      //      making call and receiving call.\n    }\n    // Register for state changes.\n    call.onStateChange = onStateChange(callId)\n    call.onMediaStateChange = onMediaStateChange(callId)\n\n    // Go to the redux level.\n    api.onIncomingCall(callId, callInfo)\n  }\n\n  var api = {\n    /**\n     * Endpoint for registering a listener.\n     * Equivalent to FCS' fcs.call.onReceived.\n     * @method onIncomingCall\n     * @param {Object} callInfo - Information about the incoming call.\n     */\n    onIncomingCall: null,\n    /**\n     * Endpoint for registering a listener\n     * @method onBridgeCallsChanged\n     * @param {Object} bridgeId - ID of the bridge whose call list has changed\n     * * @param {Array} calls - list of call IDs\n     */\n    onBridgeCallsChanged: null,\n\n    /**\n     * Endpoint for registering a listener for call state changes.\n     * Equivalent to FCS' call.onStateChange.\n     * @method onCallStateChange\n     * @param {string} callId - SDK call ID.\n     * @param {string} state\n     * @param {Object} transition\n     */\n    onCallStateChange: null,\n\n    /**\n     * Endpoint for registering a listener for call media state changes.\n     * Equivalent to FCS' call.onMediaStateChange.\n     * @method onCallMediaStateChange\n     * @param {string} callId - SDK call ID.\n     * @param {number} mediaState\n     */\n    onCallMediaStateChange: null,\n\n    // Expose some fcs methods directly.\n    setUserAuth: fcs.setUserAuth.bind(fcs),\n    setTokenAuth: fcs.setTokenAuth.bind(fcs),\n    setKandyUAT: fcs.setKandyUAT.bind(fcs),\n    setRealm: fcs.setRealm.bind(fcs),\n    initLogging: fcs.logManager.initLogging.bind(fcs),\n    getNotificationCallbacks () {\n      return fcs.NotificationCallbacks\n    },\n    getGlobalBroadcaster () {\n      return fcs.GlobalBroadcaster\n    },\n\n    setConnectionInfo (connectionInfo) {\n      fcs.setConnectionInfo(connectionInfo)\n    },\n\n    setup (fcsConfig) {\n      // true = delayInitMedia, because FCS doesn't provide an initMedia\n      // response when done on setup, but all subsequent initMedias will\n      // be returned as a success.\n      fcs.setup(fcsConfig, true)\n    },\n\n    /**\n     * Starts a call.\n     * Equivalent to initializing media then starting a call.\n     *\n     * @method makeCall\n     * @param  {string} callId - call Id\n     * @param  {Object} options - Call options.\n     * @return {Promise}\n     */\n    makeCall (callId, options) {\n      return new Promise(function (resolve, reject) {\n        /**\n         * Callback provided to FCS' startCall.\n         * @method startCallSuccess\n         */\n        function startCallSuccess (fcsCall) {\n          log.debug('Successful call start.', fcsCall)\n\n          // Save an internal reference to the call.\n          ongoingCalls[callId] = fcsCall\n\n          // Register for state changes.\n          fcsCall.onStateChange = onStateChange(callId)\n          fcsCall.onMediaStateChange = onMediaStateChange(callId)\n          options.wrtcsSessionId = fcsCall.getId()\n          options.isVideoNegotiationAvailable = fcsCall.isVideoNegotiationAvailable\n            ? fcsCall.isVideoNegotiationAvailable()\n            : false\n\n          // Go back to the redux level.\n          resolve({ callId, options })\n        }\n\n        /**\n         * Callback provided to FCS' startCall.\n         * @method startCallFailure\n         */\n        function startCallFailure (errorCode) {\n          log.debug('Failed to start call.', errorCode)\n          const message = errorCode === 38 ? 'No media specified for call.' : 'Failed to initialize call.'\n          const error = {\n            code: errorCode,\n            message: message,\n            type: 'call'\n          }\n          // Go back to the redux level.\n          reject({ error, options })\n        }\n\n        /**\n         * Callback provided to FCS' initMedia.\n         * @method mediaSuccess\n         */\n        function mediaSuccess () {\n          log.info('Call media initialized successfully.')\n          log.debug('Starting call with FCS options', options)\n\n          fcs.call.startCall(\n            options.from,\n            options.contact,\n            options.to,\n            startCallSuccess,\n            startCallFailure,\n            options.isVideoEnabled,\n            options.sendInitialVideo,\n            options.videoResolution,\n            {\n              isAudioEnabled: options.isAudioEnabled,\n              sendScreenShare: options.sendScreenShare,\n              mediaSourceId: options.mediaSourceId,\n              customParameters: options.customParameters\n            }\n          )\n        }\n\n        /**\n         * Callback provided to FCS' initMedia.\n         * @method initMediaFailure\n         */\n        function initMediaFailure (errorCode) {\n          const error = processMediaError(errorCode)\n          if (error.code === fcs.call.MediaErrors.NO_SCREENSHARING_WARNING) {\n            // This is not a failure case, just a warning.\n            log.warn('Media initialized, but could not detect extension for screensharing.')\n            mediaSuccess()\n          } else {\n            log.debug('Call media failed to initialize. Check media support.', error)\n            error.type = 'media'\n            reject({ error, options })\n          }\n        }\n\n        // Options specifically for fcs.call.initMedia.\n        const mediaOptions = {\n          // TODO: Let default options be passed-in to plugin.\n          remoteVideoContainer: options.remoteVideoContainer,\n          localVideoContainer: options.localVideoContainer\n        }\n\n        log.debug('Initializing call media.', mediaOptions)\n        // Start by calling FCS' initMedia.\n        // Then go into the shim's success / failure callback.\n        // Then we go to the middleware's success / failure callback.\n        // TODO: Don't call this directly here; use the api.initMedia function.\n        //      Change it when the middleware is refactored into sagas.\n        fcs.call.initMedia(mediaSuccess, initMediaFailure, mediaOptions)\n      })\n    },\n\n    /**\n     * Answers an incoming call.\n     * @method answerCall\n     * @param  {string}   callId  Id of the call to answer.\n     * @param  {Object}   options Call options.\n     * @return {Promise}\n     */\n    answerCall (callId, options) {\n      return new Promise(function (resolve, reject) {\n        var call = ongoingCalls[callId]\n        if (!call) {\n          log.info('Specified call Id does not match an on-going call.', callId)\n          reject({\n            type: 'call',\n            callId,\n            error: 'Invalid call id.'\n          })\n        }\n\n        // Callback provided to FCS' call.answer.\n        function answerSuccess () {\n          log.debug('Successful answer call.', call)\n          resolve({ callId })\n        }\n\n        // Callback provided to FCS' call.answer.\n        function answerFailure (errorCode) {\n          log.debug('Failed to answer call.', errorCode)\n          const error = {\n            code: errorCode,\n            message: 'Failed to answer call.',\n            type: 'call'\n          }\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        // Callback provided to FCS' initMedia\n        function mediaSuccess () {\n          log.info('Call media initialized successfully.')\n          log.debug('Answering call with FCS options', {\n            isVideoEnabled: options.isVideoEnabled,\n            isAudioEnabled: options.isAudioEnabled,\n            videoResolution: options.videoResolution,\n            sendInitialVideo: options.sendInitialVideo\n          })\n\n          call.answer(answerSuccess, answerFailure, options.sendInitialVideo, options.videoResolution, {\n            isAudioEnabled: options.isAudioEnabled,\n            isVideoEnabled: options.isVideoEnabled,\n            customParameters: options.customParameters\n          })\n        }\n\n        // Callback provided to FCS' initMedia\n        function mediaFailure (errorCode) {\n          const error = processMediaError(errorCode)\n          if (error.code === fcs.call.MediaErrors.NO_SCREENSHARING_WARNING) {\n            // This is not a failure case, just a warning.\n            log.warn('Media initialized, but could not detect extension for screensharing.')\n            mediaSuccess()\n          } else {\n            log.debug('Call media failed to initialize. Check media support.', error)\n            error.type = 'media'\n            reject({ error, options })\n          }\n        }\n\n        // Options specifically for fcs.call.initMedia.\n        const mediaOptions = {\n          // TODO: Let default options be passed-in to plugin/shim.\n          remoteVideoContainer: options.remoteVideoContainer,\n          localVideoContainer: options.localVideoContainer\n        }\n\n        log.debug('Initializing call media.', mediaOptions)\n        // Start by calling FCS' initMedia.\n        // Then go into the shim's success / failure callback.\n        // Then we go to the middleware's success / failure callback.\n        // TODO: Don't call this directly here; use the api.initMedia function.\n        //      Change it when the middleware is refactored into sagas.\n        fcs.call.initMedia(mediaSuccess, mediaFailure, mediaOptions)\n      })\n    },\n\n    /**\n     * Ignore an incoming call.\n     * @method ignoreCall\n     * @param  {string}   callId FCS id of the call to ignore.\n     * @return {Promise}\n     */\n    ignoreCall (callId) {\n      return new Promise(function (resolve, reject) {\n        function ignoreSuccess () {\n          log.info('Successfully ignored call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n\n        function ignoreFailure (error) {\n          log.info('Failed to ignore call.')\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.ignore(ignoreSuccess, ignoreFailure)\n        } else {\n          reject({ callId, error: 'Call not found. ' })\n        }\n      })\n    },\n\n    /**\n     * Reject an incoming call.\n     * @method rejectCall\n     * @param  {string}   callId FCS id of the call to reject.\n     * @return {Promise}\n     */\n    rejectCall (callId) {\n      return new Promise(function (resolve, reject) {\n        function rejectSuccess () {\n          log.info('Successfully rejected call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n\n        function rejectFailure (error) {\n          log.info('Failed to reject call.')\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.reject(rejectSuccess, rejectFailure)\n        } else {\n          reject({ callId, error: 'Call not found. ' })\n        }\n      })\n    },\n\n    /**\n     * Ends a call.\n     * @method endCall\n     * @param  {string} callId Id of the call to end.\n     * @return {Promise}\n     */\n    endCall (callId) {\n      return new Promise(function (resolve, reject) {\n        function endSuccess () {\n          log.info('Successfully ended call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function endFailure (error) {\n          log.info('Failed to end call.')\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.end(endSuccess, endFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /** Mutes a call.\n     * @method muteCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    muteCall (callId) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n        if (call) {\n          // FCS' mute function does not take callbacks.\n          call.mute()\n          log.info('Call muted.')\n          resolve({ callId })\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Unmutes a call.\n     * @method unMuteCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    unMuteCall (callId) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n        if (call) {\n          // FCS' unmute function does not take callbacks.\n          call.unmute()\n          log.info('Call unmuted.')\n          resolve({ callId })\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Silences a call.\n     * @method silenceCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    silenceCall (callId) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n        if (call) {\n          // FCS' silence function does not take callbacks.\n          call.silence()\n          log.info('Call silenced.')\n          resolve({ callId })\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Unsilences a call.\n     * @method unSilenceCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    unSilenceCall (callId) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n        if (call) {\n          // FCS' unsilence function does not take callbacks.\n          call.unsilence()\n          log.info('Call unsilenced.')\n          resolve({ callId })\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Gets custom parameters of call.\n     * @method getCustomParameters\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Array.<{name: string, value:string}>} Custom parameters of the call.\n     */\n    getCustomParameters (callId) {\n      const call = getInternalCall(callId)\n      if (call) {\n        return call.getCustomParameters()\n      }\n    },\n\n    /**\n     * Sets custom parameters of call.\n     * @method setCustomParameters\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {Array.<{name: string, value:string}>} customParameters Custom parameters for the call.\n     */\n    setCustomParameters (callId, customParameters) {\n      const call = getInternalCall(callId)\n      if (call) {\n        call.setCustomParameters(customParameters)\n      }\n    },\n\n    /**\n     * Starts video for a call.\n     * @method startVideo\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {Object} params\n     * @param  {Object} params.videoResolution\n     *  @return {Promise}\n     */\n    startVideo (callId, params) {\n      return new Promise(function (resolve, reject) {\n        function startVideoSuccess () {\n          log.info('Call video started successfully.')\n          // Go back to the redux level.\n          resolve({ callId, params })\n        }\n        function startVideoFailure (error) {\n          log.info('Failed to start call video.')\n          // Go back to the redux level.\n          reject({ callId, params, error })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.videoStart(startVideoSuccess, startVideoFailure, params.videoResolution)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Stops video for a call.\n     * @method stopVideo\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    stopVideo (callId) {\n      return new Promise(function (resolve, reject) {\n        function stopVideoSuccess () {\n          log.info('Call video stopped successfully.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function stopVideoFailure (error) {\n          log.info('Failed to stop call video.')\n          // Go back to the redux level.\n          reject({ callId, error })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.videoStop(stopVideoSuccess, stopVideoFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Holds a call.\n     * @method holdCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    holdCall (callId) {\n      return new Promise(function (resolve, reject) {\n        function holdSuccess () {\n          log.info('Successfully held call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function holdFailure (error) {\n          log.info('Failed to hold call.')\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.hold(holdSuccess, holdFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * UnHolds a call.\n     * @method unHoldCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    unHoldCall (callId) {\n      return new Promise(function (resolve, reject) {\n        function unHoldSuccess () {\n          log.info('Successfully unheld call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function unHoldFailure (error) {\n          log.info('Failed to unhold call.')\n          // Go back to the redux level.\n          reject({ error, callId })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.unhold(unHoldSuccess, unHoldFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Starts screensharing.\n     * @param  {string} callId Id of the call being acted on.\n     * @param  {Object} params\n     * @param  {string} params.mediaSourceId Id of the media screen to share.\n     * @param  {number} [params.width=1024] The width of the screen to request.\n     * @param  {number} [params.height=768] The height of the screen to request.\n     * @param  {number} [params.frameRate=15] The number of frames per second to request.\n     * @param  {Function} screensharingStopped Callback function for when media is stopped manually.\n     */\n    startScreenshare (callId, params, screensharingStopped) {\n      return new Promise(function (resolve, reject) {\n        function startScreenshareSuccess () {\n          log.info('Successfully shared screen.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function startScreenshareFailure (error) {\n          log.info('Failed to share screen.')\n          // Go back to the redux level.\n          reject({ callId, params, error })\n        }\n\n        // The mediaSourceId property is required.\n        if (!params.hasOwnProperty('mediaSourceId')) {\n          reject({ callId, error: 'No media source ID provided.' })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.screenSharingStart(startScreenshareSuccess, startScreenshareFailure, screensharingStopped, params)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Stops screensharing.\n     * @param  {string} callId Id of the call being acted on.\n     */\n    stopScreenshare (callId) {\n      return new Promise(function (resolve, reject) {\n        function stopScreenshareSuccess () {\n          log.info('Successfully stopped screenshare.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function stopScreenshareFailure (error) {\n          log.info('Failed to stop screenshare.')\n          // Go back to the redux level.\n          reject({ callId, error })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.screenSharingStop(stopScreenshareSuccess, stopScreenshareFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Sends a DTMF tone over a call.\n     * @method sendDTMF\n     * @param  {string} callId The ID of the call being acted on.\n     * @param {string} tone DTMF tone to send.\n     * @return {Promise}\n     */\n    sendDTMF (callId, tone) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n        if (call) {\n          // FCS' sendDTMF does not take callbacks.\n          call.sendDTMF(tone)\n          resolve()\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Explicitly sends custom parameters of a call.\n     * @method sendCustomParameters\n     * @param  {string} callId The ID of the call being acted on.\n     * @return {Promise}\n     */\n    sendCustomParameters (callId) {\n      return new Promise(function (resolve, reject) {\n        var call = getInternalCall(callId)\n\n        function sendCustomParametersSuccess () {\n          log.info('Successfully sent custom parameters.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function sendCustomParametersFailure (error) {\n          log.info('Failed to send custom parameters.')\n          // Go back to the redux level.\n          reject({ callId, error })\n        }\n\n        if (call) {\n          // FCS' sendCustomParameters.\n          call.sendCustomParameters(sendCustomParametersSuccess, sendCustomParametersFailure)\n        } else {\n          reject({ callId, error: 'Call not found.' })\n        }\n      })\n    },\n\n    /**\n     * Forwards a call to another user.\n     * @method forwardCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {string} destination Full user ID of another user.\n     * @return {Promise}\n     */\n    forwardCall (callId, destination) {\n      return new Promise(function (resolve, reject) {\n        function forwardSuccess () {\n          log.info('Successfully forwarded call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function forwardFailure (errorCode) {\n          log.info('Failed to forward call.')\n          // Go back to the redux level.\n          const error = {\n            code: errorCode,\n            message: 'Failed to forward call.'\n          }\n          reject({ callId, error })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.forward(destination, forwardSuccess, forwardFailure)\n        } else {\n          reject({ callId, error: { message: 'Failed to forward call.' } })\n        }\n      })\n    },\n\n    /**\n     * Transfers a call to another user.\n     * @method directTransfer\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {string} destination Full user ID of another user.\n     * @return {Promise}\n     */\n    directTransfer (callId, destination) {\n      return new Promise(function (resolve, reject) {\n        function transferSuccess () {\n          log.info('Successfully transferred call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function transferFailure (errorCode) {\n          log.info('Failed to transfer call.')\n          // Go back to the redux level.\n          const error = {\n            code: errorCode,\n            message: 'Failed to transfer call.'\n          }\n          reject({ callId, error })\n        }\n\n        var call = getInternalCall(callId)\n        if (call) {\n          call.directTransfer(destination, transferSuccess, transferFailure)\n        } else {\n          reject({ callId, error: { message: 'Failed to transfer call.' } })\n        }\n      })\n    },\n\n    /**\n     * Transfers a call to another call.\n     * @method consultativeTransfer\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {string} destination The callId of another call.\n     * @return {Promise}\n     */\n    consultativeTransfer (callId, destination) {\n      return new Promise(function (resolve, reject) {\n        function transferSuccess () {\n          log.info('Successfully transferred call.')\n          // Go back to the redux level.\n          resolve({ callId })\n        }\n        function transferFailure (errorCode) {\n          log.info('Failed to transfer call.')\n          // Go back to the redux level.\n          const error = {\n            code: errorCode,\n            message: 'Failed to transfer call.'\n          }\n          reject({ callId, error })\n        }\n\n        var call = getInternalCall(callId)\n        var dest = getInternalCall(destination)\n        if (call && dest) {\n          call.consultativeTransfer(dest.getId(), transferSuccess, transferFailure)\n        } else if (!call) {\n          reject({ callId, error: { message: 'Invalid call id.' } })\n        } else {\n          reject({ callId, error: { message: 'Invalid destination.' } })\n        }\n      })\n    },\n\n    /**\n     * Joins a call with another call.\n     * @method joinCall\n     * @param  {string} callId The ID of the call being acted on.\n     * @param  {string} destination The callId of another call.\n     * @param  {Object} options - Media options.\n     * @return {Promise}\n     */\n    joinCall (callId, destination, options) {\n      return new Promise(function (resolve, reject) {\n        function joinSuccess (joinedCall) {\n          log.info('Successfully joined call.')\n          // Create our own call ID for storing in state.\n          const joinedCallId = uuidV4()\n          ongoingCalls[joinedCallId] = joinedCall\n\n          // Register for state changes.\n          joinedCall.onStateChange = onStateChange(joinedCallId)\n          joinedCall.onMediaStateChange = onMediaStateChange(joinedCallId)\n\n          // Go back to the redux level.\n          resolve({\n            callId: joinedCallId,\n            joinedCalls: [callId, destination],\n            callState: FCS_CALL_STATES[joinedCall.callState]\n          })\n        }\n        function joinFailure (errorCode) {\n          log.info('Failed to join call.')\n          // Go back to the redux level.\n          const error = {\n            code: errorCode,\n            message: 'Failed to join call.'\n          }\n          reject({\n            callId,\n            joinedCalls: [callId, destination],\n            error\n          })\n        }\n\n        initializeMedia(options).then(function (result) {\n          if (result.code === 0 || result.code === fcs.call.MediaErrors.NO_SCREENSHARING_WARNING) {\n            // Media initialized, perform the join operation.\n            var call = getInternalCall(callId)\n            var dest = getInternalCall(destination)\n            if (call && dest) {\n              const withVideo = call.localVideo || dest.localVideo\n              call.join(dest, joinSuccess, joinFailure, withVideo)\n            } else if (!call) {\n              reject({ callId, error: { message: 'Invalid call id.' } })\n            } else {\n              reject({\n                callId: destination,\n                error: { message: 'Invalid destination.' }\n              })\n            }\n          } else {\n            // Failed to initialize media; return an error.\n            reject({\n              callId,\n              error: {\n                message: `Failed to initialize call media: ${result.message}`,\n                type: 'media',\n                code: result.code\n              }\n            })\n          }\n        })\n      })\n    },\n\n    /**\n     * Sets the default devices for FCS to use for new calls.\n     * @method setDefaultDevices\n     * @param  {Object} devices\n     * @return {Promise}\n     */\n    setDefaultDevices (devices) {\n      return new Promise(function (resolve, reject) {\n        function onSpeakerSuccess () {\n          if (devices.speaker) {\n            log.info(`Set selected speaker as default: ${devices.speaker}.`)\n          }\n          if (devices.camera) {\n            fcs.call.setSelectedCameraId(devices.camera)\n            log.info(`Set selected camera as default: ${devices.camera}.`)\n          }\n          if (devices.microphone) {\n            fcs.call.setSelectedMicrophoneId(devices.microphone)\n            log.info(`Set selected microphone as default: ${devices.microphone}.`)\n          }\n          resolve(devices)\n        }\n        function onSpeakerFailure (error) {\n          log.info('Failed to set default speaker.', error)\n          reject({\n            device: 'speaker',\n            deviceId: devices.speaker,\n            error\n          })\n        }\n\n        // Only setSelectedSpeakerId has callbacks, so do that one first.\n        if (devices.speaker) {\n          fcs.call.setSelectedSpeakerId(devices.speaker, onSpeakerSuccess, onSpeakerFailure)\n        } else {\n          // If we aren't setting the speaker, go straight to the success callback.\n          onSpeakerSuccess()\n        }\n      })\n    },\n\n    /**\n     * Prompts for permission to use media.\n     * @method promptUserMedia\n     * @param  {Object} params\n     * @param  {boolean} params.video\n     * @param  {boolean} params.audio\n     *  @return {Promise}\n     */\n    promptUserMedia (params) {\n      return new Promise(function (resolve, reject) {\n        function promptUserMediaSuccess () {\n          // Go back to the redux level.\n          log.info('Media permissions granted.')\n          resolve({ params })\n        }\n\n        function promptUserMediaFailure (error) {\n          // Go back to the redux level.\n          log.info('Media permissions not granted.', error)\n\n          // Convert the callShim error object into a BasicError.\n          const basicError = new BasicError({\n            message: 'Media permissions not granted.',\n            code: error\n          })\n\n          reject({ params, basicError })\n        }\n        fcs.call.getUserMedia(promptUserMediaSuccess, promptUserMediaFailure, params)\n      })\n    },\n\n    /**\n     * Changes speaker for on-going calls.\n     * @method changeSpeaker\n     * @param  {string} speakerId\n     * @return {Promise}\n     */\n    changeSpeaker (speakerId) {\n      return new Promise(function (resolve, reject) {\n        function changeSpeakerSuccess () {\n          log.info('Successfully changed speaker.')\n          resolve(speakerId)\n        }\n\n        function changeSpeakerFailure (error) {\n          log.info('Failed to change speaker.', error)\n          reject({ speakerId, error })\n        }\n\n        if (speakerId) {\n          fcs.call.changeSpeaker(speakerId, changeSpeakerSuccess, changeSpeakerFailure)\n        } else {\n          reject({ error: 'Invalid speaker id provided.' })\n        }\n      })\n    },\n\n    /**\n     * Changes the camera/microphone used for the specified call.\n     * @method changeInputDevices\n     * @param  {string} callId\n     * @return {Promise}\n     */\n    changeInputDevices (callId) {\n      return new Promise(function (resolve, reject) {\n        function changeDevicesSuccess () {\n          resolve(callId)\n        }\n        function changeDevicesFailure (fcsError) {\n          reject({ callId, error: fcsError })\n        }\n\n        const call = getInternalCall(callId)\n        if (call) {\n          /*\n           * FCS' API says the first parameter should be { call }, but internally\n           *    FCS checks for `params.callid` as if the first parameter is just\n           *    `call`. Change how the shim behaves to \"fix\" this, instead of\n           *    changing FCS, to prevent any other issues.\n           */\n          fcs.call.changeDevices({ callid: call.getId() }, changeDevicesSuccess, changeDevicesFailure)\n        } else {\n          reject({ callId, error: 'Call not found. ' })\n        }\n      })\n    },\n\n    /**\n     * Starts the local video stream and displays it to the user.\n     * @method startLocalVideo\n     * @param  {HTMLElement} container The container to use for local video.\n     * @return {Promise}\n     */\n    startLocalVideo (container) {\n      return new Promise(function (resolve, reject) {\n        function getUserMediaSuccess (streamInfo) {\n          // Render the local video into the container.\n          fcs.call.createStreamRenderer(streamInfo.stream, container, {\n            audio: false\n          })\n          // Store the local stream's info.\n          localStream = {\n            stream: streamInfo,\n            container: container\n          }\n          log.info('Started local video stream.')\n          resolve(container)\n        }\n        function getUserMediaFailure () {\n          log.info('Failed to start local video.')\n          const error = {\n            message: 'Could not start local video.',\n            type: 'video'\n          }\n          reject({ error })\n        }\n\n        if (localStream) {\n          log.info('Local video is already being displayed.')\n          const error = {\n            message: 'Local video is already being displayed. Stop local video before re-starting.',\n            type: 'generic'\n          }\n          reject({ error })\n          return\n        } else if (!container) {\n          const error = {\n            message: 'No video container provided; cannot start local video.',\n            type: 'generic'\n          }\n          reject({ error })\n          return\n        }\n\n        // Re-use the callShim's initMedia functionality.\n        initializeMedia().then(function (result) {\n          if (result.code === 0 || result.code === fcs.call.MediaErrors.NO_SCREENSHARING_WARNING) {\n            // Get the local user video media.\n            fcs.call.getUserMedia(getUserMediaSuccess, getUserMediaFailure, {\n              audio: false,\n              video: true\n            })\n          } else {\n            // initMedia error.\n            const error = {\n              message: 'Could not initialize media. Please check initMedia.',\n              type: 'media'\n            }\n            reject({ error })\n          }\n        })\n      })\n    },\n\n    /**\n     * Stops the local video stream created in `startLocalVideo`.\n     * @method stopLocalVideo\n     * @return {Promise}\n     */\n    stopLocalVideo () {\n      return new Promise(function (resolve, reject) {\n        // Only act on the stream that was started earlier via `startLocalVideo`.\n        if (localStream) {\n          fcs.call.disposeStreamRenderer(localStream.container)\n          fcs.call.removeStreamById(localStream.stream.id)\n          // Remove the callShim's 'flag' for local video.\n          localStream = null\n          log.info('Local video stream stopped.')\n          resolve()\n        } else {\n          log.info('No local video stream to stop.')\n          reject({\n            message: 'No on-going local stream to stop.'\n          })\n        }\n      })\n    },\n\n    /**\n     * Attempts to initialize media.\n     * @method initMedia\n     * @param {Object} options FCS options for initMedia.\n     * @return {Promise}\n     */\n    initMedia: initializeMedia,\n\n    /**\n     * Creates a local bridge for audio calls.\n     * @method createLocalAudioBridge\n     * @param  {string} bridgeId\n     * @param  {Object} options\n     * @return {Promise}\n     */\n    createLocalAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        function createBridgeSuccess (bridge) {\n          log.debug('Successfully created bridge.', bridgeId)\n\n          /*\n           * Callback method allows FCS to send updated call lists\n           * after calls are added or removed, providing us with the opportunity\n           * to ensure the bridge's state is up to date in the SDK\n           *\n           * @param {Array} calls\n           */\n          bridge.onCallsChange = function (fcsCalls) {\n            const calls = getUnifiedSdkCalls(fcsCalls)\n            api.onBridgeCallsChanged(bridgeId, calls)\n          }\n\n          // Save an internal reference to the bridge.\n          audioBridges[bridgeId] = bridge\n          resolve()\n        }\n\n        function createBridgeFailure () {\n          log.debug('Failed to create bridge.', bridgeId)\n          // Error is either that the FCS media isn't set up (ie. user\n          //      not logged in) or feature not supported in browser.\n          const error = new BasicError({\n            message: 'Feature not supported by browser.',\n            code: bridgeCodes.NOT_SUPPORTED\n          })\n          reject(error)\n        }\n\n        fcs.call.createLocalAudioBridge(createBridgeSuccess, createBridgeFailure)\n      })\n    },\n\n    /**\n     * Closes an existing audio bridge.\n     * @method closeAudioBridge\n     * @param  {string} bridgeId\n     * @return {Promise}\n     */\n    closeAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        const bridge = getInternalBridge(bridgeId)\n        if (bridge) {\n          bridge.close()\n          resolve()\n        } else {\n          const error = new BasicError({\n            message: 'Provided ID does not match an existing bridge.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    addCallToBridge (bridgeId, callId) {\n      return new Promise(function (resolve, reject) {\n        function addCallSuccess () {\n          log.debug('Successfully added call to bridge.', bridgeId)\n          resolve()\n        }\n\n        function addCallFailure (errCode) {\n          log.debug('Failed to add call to bridge.', errCode)\n          let error\n          if (errCode === 29) {\n            // FCS' \"entry already exists\" code.\n            error = new BasicError({\n              message: 'Call already added to bridge.',\n              code: bridgeCodes.ALREADY_EXISTS\n            })\n          } else if (errCode === 24) {\n            // FCS' \"media not found\" code.\n            error = new BasicError({\n              message: 'Failed to find media.',\n              code: bridgeCodes.MEDIA_NOT_FOUND\n            })\n          } else if (errCode === 3) {\n            // FCS' \"state\" code.\n            error = new BasicError({\n              message: 'Invalid state.',\n              code: bridgeCodes.INVALID_STATE\n            })\n          } else {\n            error = new BasicError({\n              message: 'An unknown error occurred.',\n              code: bridgeCodes.UNKNOWN_ERROR\n            })\n          }\n          reject(error)\n        }\n\n        const bridge = getInternalBridge(bridgeId)\n        const call = getInternalCall(callId)\n\n        if (bridge && call) {\n          bridge.add(call, addCallSuccess, addCallFailure)\n        } else {\n          const error = new BasicError({\n            message: 'A provided ID did not match an existing bridge and/or call.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    /**\n     * Removes a call from the specified audio bridge.\n     * @method removeCallFromBridge\n     */\n    removeCallFromBridge (bridgeId, callId) {\n      return new Promise(function (resolve, reject) {\n        function removeCallSuccess () {\n          log.debug('Successfully removed call from bridge.', bridgeId)\n          resolve()\n        }\n        function removeCallFailure (err) {\n          log.debug('Failed to remove call from bridge.', err)\n          let error\n          if (err === 22) {\n            // FCS' \"invalid parameter\" code.\n            error = new BasicError({\n              message: 'Specified call not in bridge.',\n              code: bridgeCodes.NOT_FOUND\n            })\n          } else {\n            error = new BasicError({\n              message: 'An unknown error occurred.',\n              code: bridgeCodes.UNKNOWN_ERROR\n            })\n          }\n          reject(error)\n        }\n\n        const bridge = getInternalBridge(bridgeId)\n        const call = getInternalCall(callId)\n\n        if (bridge && call) {\n          bridge.remove(call, removeCallSuccess, removeCallFailure)\n        } else {\n          const error = new BasicError({\n            message: 'A provided ID did not match an existing bridge and/or call.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    /**\n     * Mutes local audio for all calls in the bridge.\n     * @method muteAudioBridge\n     */\n    muteAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        const bridge = getInternalBridge(bridgeId)\n        if (bridge) {\n          bridge.muteLocalAudio()\n          resolve()\n        } else {\n          const error = new BasicError({\n            message: 'Provided ID does not match an existing bridge.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    /**\n     * Unmutes local audio for all calls in the bridge.\n     * @method unmuteAudioBridge\n     */\n    unmuteAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        const bridge = getInternalBridge(bridgeId)\n        if (bridge) {\n          bridge.unmuteLocalAudio()\n          resolve()\n        } else {\n          const error = new BasicError({\n            message: 'Provided ID does not match an existing bridge.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    /**\n     * Silences remote audio for all calls in the bridge.\n     * @method silenceAudioBridge\n     */\n    silenceAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        const bridge = getInternalBridge(bridgeId)\n        if (bridge) {\n          bridge.silenceRemoteAudio()\n          resolve()\n        } else {\n          const error = new BasicError({\n            message: 'Provided ID does not match an existing bridge.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    },\n\n    /**\n     * Unsilences remote audio for all calls in the bridge.\n     * @method unsilenceAudioBridge\n     */\n    unsilenceAudioBridge (bridgeId) {\n      return new Promise(function (resolve, reject) {\n        const bridge = getInternalBridge(bridgeId)\n        if (bridge) {\n          bridge.unsilenceRemoteAudio()\n          resolve()\n        } else {\n          const error = new BasicError({\n            message: 'Provided ID does not match an existing bridge.',\n            code: bridgeCodes.INVALID_INPUT\n          })\n          reject(error)\n        }\n      })\n    }\n  }\n  return api\n}\n","import Bottle from 'bottlejs';\nimport loadModule from './src/loadModule';\n\n// Modules\nimport coreModule from './src/js/module';\nimport rccCallModule from './src/js/call/rcc/module';\nimport wamCallModule from './src/js/call/wam/module';\nimport callModule from './src/js/call/module';\nimport webRtcModule from './src/js/webrtc/module';\n\n\n\nconst modules = [\n    // Common modules, needed in all scenarios\n    coreModule,\n\n    // Feature modules\n    callModule,\n\n    // Modules needed for calls.\n    rccCallModule,\n    wamCallModule,\n\n    // WebRTC Adapter module.\n    webRtcModule\n];\n\n\nexport function createFcs() {\n    const bottle = new Bottle();\n\n    // Load all modules into bottle.\n    modules.forEach(loadModule.bind(bottle));\n\n    const container = bottle.container;\n    var fcs = bottle.container.Core;\n\n    // Build the namespaces.\n    fcs.logManager = container.LogManager;\n    fcs.notification = container.Notification;\n    fcs.call = container.Call;\n\n    // Convenience access to these.\n    fcs.NotificationCallbacks = container.NotificationCallbacks;\n    fcs.GlobalBroadcaster = container.GlobalBroadcaster;\n\n    // Run any initialization code setup by the modules.\n    bottle.resolve(container);\n\n    return fcs;\n}\n",";(function(undefined) {\n    'use strict';\n    /**\n     * BottleJS v1.7.2 - 2019-02-07\n     * A powerful dependency injection micro container\n     *\n     * Copyright (c) 2019 Stephen Young\n     * Licensed MIT\n     */\n    var Bottle;\n    \n    /**\n     * String constants\n     */\n    var DELIMITER = '.';\n    var FUNCTION_TYPE = 'function';\n    var STRING_TYPE = 'string';\n    var GLOBAL_NAME = '__global__';\n    var PROVIDER_SUFFIX = 'Provider';\n    \n    /**\n     * Unique id counter;\n     *\n     * @type Number\n     */\n    var id = 0;\n    \n    /**\n     * Local slice alias\n     *\n     * @type Functions\n     */\n    var slice = Array.prototype.slice;\n    \n    /**\n     * Iterator used to walk down a nested object.\n     *\n     * If Bottle.config.strict is true, this method will throw an exception if it encounters an\n     * undefined path\n     *\n     * @param Object obj\n     * @param String prop\n     * @return mixed\n     * @throws Error if Bottle is unable to resolve the requested service.\n     */\n    var getNested = function getNested(obj, prop) {\n        var service = obj[prop];\n        if (service === undefined && Bottle.config.strict) {\n            throw new Error('Bottle was unable to resolve a service.  `' + prop + '` is undefined.');\n        }\n        return service;\n    };\n    \n    /**\n     * Get a nested bottle. Will set and return if not set.\n     *\n     * @param String name\n     * @return Bottle\n     */\n    var getNestedBottle = function getNestedBottle(name) {\n        var bottle;\n        if (!this.nested[name]) {\n            bottle = Bottle.pop();\n            this.nested[name] = bottle;\n            this.factory(name, function SubProviderFactory() {\n                return bottle.container;\n            });\n        }\n        return this.nested[name];\n    };\n    \n    /**\n     * Get a service stored under a nested key\n     *\n     * @param String fullname\n     * @return Service\n     */\n    var getNestedService = function getNestedService(fullname) {\n        return fullname.split(DELIMITER).reduce(getNested, this);\n    };\n    \n    /**\n     * Function used by provider to set up middleware for each request.\n     *\n     * @param Number id\n     * @param String name\n     * @param Object instance\n     * @param Object container\n     * @return void\n     */\n    var applyMiddleware = function applyMiddleware(middleware, name, instance, container) {\n        var descriptor = {\n            configurable : true,\n            enumerable : true\n        };\n        if (middleware.length) {\n            descriptor.get = function getWithMiddlewear() {\n                var index = 0;\n                var next = function nextMiddleware(err) {\n                    if (err) {\n                        throw err;\n                    }\n                    if (middleware[index]) {\n                        middleware[index++](instance, next);\n                    }\n                };\n                next();\n                return instance;\n            };\n        } else {\n            descriptor.value = instance;\n            descriptor.writable = true;\n        }\n    \n        Object.defineProperty(container, name, descriptor);\n    \n        return container[name];\n    };\n    \n    /**\n     * Register middleware.\n     *\n     * @param String name\n     * @param Function func\n     * @return Bottle\n     */\n    var middleware = function middleware(fullname, func) {\n        var parts, name;\n        if (typeof fullname === FUNCTION_TYPE) {\n            func = fullname;\n            fullname = GLOBAL_NAME;\n        }\n    \n        parts = fullname.split(DELIMITER);\n        name = parts.shift();\n        if (parts.length) {\n            getNestedBottle.call(this, name).middleware(parts.join(DELIMITER), func);\n        } else {\n            if (!this.middlewares[name]) {\n                this.middlewares[name] = [];\n            }\n            this.middlewares[name].push(func);\n        }\n        return this;\n    };\n    \n    /**\n     * Used to process decorators in the provider\n     *\n     * @param Object instance\n     * @param Function func\n     * @return Mixed\n     */\n    var reducer = function reducer(instance, func) {\n        return func(instance);\n    };\n    \n    \n    /**\n     * Get decorators and middleware including globals\n     *\n     * @return array\n     */\n    var getWithGlobal = function getWithGlobal(collection, name) {\n        return (collection[name] || []).concat(collection.__global__ || []);\n    };\n    \n    \n    /**\n     * Create the provider properties on the container\n     *\n     * @param String name\n     * @param Function Provider\n     * @return Bottle\n     */\n    var createProvider = function createProvider(name, Provider) {\n        var providerName, properties, container, id, decorators, middlewares;\n    \n        id = this.id;\n        container = this.container;\n        decorators = this.decorators;\n        middlewares = this.middlewares;\n        providerName = name + PROVIDER_SUFFIX;\n    \n        properties = Object.create(null);\n        properties[providerName] = {\n            configurable : true,\n            enumerable : true,\n            get : function getProvider() {\n                var instance = new Provider();\n                delete container[providerName];\n                container[providerName] = instance;\n                return instance;\n            }\n        };\n    \n        properties[name] = {\n            configurable : true,\n            enumerable : true,\n            get : function getService() {\n                var provider = container[providerName];\n                var instance;\n                if (provider) {\n                    // filter through decorators\n                    instance = getWithGlobal(decorators, name).reduce(reducer, provider.$get(container));\n    \n                    delete container[providerName];\n                    delete container[name];\n                }\n                return instance === undefined ? instance : applyMiddleware(getWithGlobal(middlewares, name),\n                    name, instance, container);\n            }\n        };\n    \n        Object.defineProperties(container, properties);\n        return this;\n    };\n    \n    \n    /**\n     * Register a provider.\n     *\n     * @param String fullname\n     * @param Function Provider\n     * @return Bottle\n     */\n    var provider = function provider(fullname, Provider) {\n        var parts, name;\n        parts = fullname.split(DELIMITER);\n        if (this.providerMap[fullname] && parts.length === 1 && !this.container[fullname + PROVIDER_SUFFIX]) {\n            return console.error(fullname + ' provider already instantiated.');\n        }\n        this.originalProviders[fullname] = Provider;\n        this.providerMap[fullname] = true;\n    \n        name = parts.shift();\n    \n        if (parts.length) {\n            getNestedBottle.call(this, name).provider(parts.join(DELIMITER), Provider);\n            return this;\n        }\n        return createProvider.call(this, name, Provider);\n    };\n    \n    /**\n     * Register a factory inside a generic provider.\n     *\n     * @param String name\n     * @param Function Factory\n     * @return Bottle\n     */\n    var factory = function factory(name, Factory) {\n        return provider.call(this, name, function GenericProvider() {\n            this.$get = Factory;\n        });\n    };\n    \n    /**\n     * Private helper for creating service and service factories.\n     *\n     * @param String name\n     * @param Function Service\n     * @return Bottle\n     */\n    var createService = function createService(name, Service, isClass) {\n        var deps = arguments.length > 3 ? slice.call(arguments, 3) : [];\n        var bottle = this;\n        return factory.call(this, name, function GenericFactory() {\n            var serviceFactory = Service; // alias for jshint\n            var args = deps.map(getNestedService, bottle.container);\n    \n            if (!isClass) {\n                return serviceFactory.apply(null, args);\n            }\n            return new (Service.bind.apply(Service, [null].concat(args)))();\n        });\n    };\n    \n    /**\n     * Register a class service\n     *\n     * @param String name\n     * @param Function Service\n     * @return Bottle\n     */\n    var service = function service(name, Service) {\n        return createService.apply(this, [name, Service, true].concat(slice.call(arguments, 2)));\n    };\n    \n    /**\n     * Register a function service\n     */\n    var serviceFactory = function serviceFactory(name, factoryService) {\n        return createService.apply(this, [name, factoryService, false].concat(slice.call(arguments, 2)));\n    };\n    \n    /**\n     * Define a mutable property on the container.\n     *\n     * @param String name\n     * @param mixed val\n     * @return void\n     * @scope container\n     */\n    var defineValue = function defineValue(name, val) {\n        Object.defineProperty(this, name, {\n            configurable : true,\n            enumerable : true,\n            value : val,\n            writable : true\n        });\n    };\n    \n    /**\n     * Iterator for setting a plain object literal via defineValue\n     *\n     * @param Object container\n     * @param string name\n     */\n    var setValueObject = function setValueObject(container, name) {\n        var nestedContainer = container[name];\n        if (!nestedContainer) {\n            nestedContainer = {};\n            defineValue.call(container, name, nestedContainer);\n        }\n        return nestedContainer;\n    };\n    \n    \n    /**\n     * Register a value\n     *\n     * @param String name\n     * @param mixed val\n     * @return Bottle\n     */\n    var value = function value(name, val) {\n        var parts;\n        parts = name.split(DELIMITER);\n        name = parts.pop();\n        defineValue.call(parts.reduce(setValueObject, this.container), name, val);\n        return this;\n    };\n    \n    /**\n     * Define an enumerable, non-configurable, non-writable value.\n     *\n     * @param String name\n     * @param mixed value\n     * @return undefined\n     */\n    var defineConstant = function defineConstant(name, value) {\n        Object.defineProperty(this, name, {\n            configurable : false,\n            enumerable : true,\n            value : value,\n            writable : false\n        });\n    };\n    \n    /**\n     * Register a constant\n     *\n     * @param String name\n     * @param mixed value\n     * @return Bottle\n     */\n    var constant = function constant(name, value) {\n        var parts = name.split(DELIMITER);\n        name = parts.pop();\n        defineConstant.call(parts.reduce(setValueObject, this.container), name, value);\n        return this;\n    };\n    \n    /**\n     * Register decorator.\n     *\n     * @param String fullname\n     * @param Function func\n     * @return Bottle\n     */\n    var decorator = function decorator(fullname, func) {\n        var parts, name;\n        if (typeof fullname === FUNCTION_TYPE) {\n            func = fullname;\n            fullname = GLOBAL_NAME;\n        }\n    \n        parts = fullname.split(DELIMITER);\n        name = parts.shift();\n        if (parts.length) {\n            getNestedBottle.call(this, name).decorator(parts.join(DELIMITER), func);\n        } else {\n            if (!this.decorators[name]) {\n                this.decorators[name] = [];\n            }\n            this.decorators[name].push(func);\n        }\n        return this;\n    };\n    \n    /**\n     * Register a function that will be executed when Bottle#resolve is called.\n     *\n     * @param Function func\n     * @return Bottle\n     */\n    var defer = function defer(func) {\n        this.deferred.push(func);\n        return this;\n    };\n    \n    \n    /**\n     * Immediately instantiates the provided list of services and returns them.\n     *\n     * @param Array services\n     * @return Array Array of instances (in the order they were provided)\n     */\n    var digest = function digest(services) {\n        return (services || []).map(getNestedService, this.container);\n    };\n    \n    /**\n     * Register an instance factory inside a generic factory.\n     *\n     * @param {String} name - The name of the service\n     * @param {Function} Factory - The factory function, matches the signature required for the\n     * `factory` method\n     * @return Bottle\n     */\n    var instanceFactory = function instanceFactory(name, Factory) {\n        return factory.call(this, name, function GenericInstanceFactory(container) {\n            return {\n                instance : Factory.bind(Factory, container)\n            };\n        });\n    };\n    \n    /**\n     * A filter function for removing bottle container methods and providers from a list of keys\n     */\n    var byMethod = function byMethod(name) {\n        return !/^\\$(?:decorator|register|list)$|Provider$/.test(name);\n    };\n    \n    /**\n     * List the services registered on the container.\n     *\n     * @param Object container\n     * @return Array\n     */\n    var list = function list(container) {\n        return Object.keys(container || this.container || {}).filter(byMethod);\n    };\n    \n    /**\n     * Named bottle instances\n     *\n     * @type Object\n     */\n    var bottles = {};\n    \n    /**\n     * Get an instance of bottle.\n     *\n     * If a name is provided the instance will be stored in a local hash.  Calling Bottle.pop multiple\n     * times with the same name will return the same instance.\n     *\n     * @param String name\n     * @return Bottle\n     */\n    var pop = function pop(name) {\n        var instance;\n        if (typeof name === STRING_TYPE) {\n            instance = bottles[name];\n            if (!instance) {\n                bottles[name] = instance = new Bottle();\n                instance.constant('BOTTLE_NAME', name);\n            }\n            return instance;\n        }\n        return new Bottle();\n    };\n    \n    /**\n     * Clear all named bottles.\n     */\n    var clear = function clear(name) {\n        if (typeof name === STRING_TYPE) {\n            delete bottles[name];\n        } else {\n            bottles = {};\n        }\n    };\n    \n    /**\n     * Register a service, factory, provider, or value based on properties on the object.\n     *\n     * properties:\n     *  * Obj.$name   String required ex: `'Thing'`\n     *  * Obj.$type   String optional 'service', 'factory', 'provider', 'value'.  Default: 'service'\n     *  * Obj.$inject Mixed  optional only useful with $type 'service' name or array of names\n     *  * Obj.$value  Mixed  optional Normally Obj is registered on the container.  However, if this\n     *                       property is included, it's value will be registered on the container\n     *                       instead of the object itsself.  Useful for registering objects on the\n     *                       bottle container without modifying those objects with bottle specific keys.\n     *\n     * @param Function Obj\n     * @return Bottle\n     */\n    var register = function register(Obj) {\n        var value = Obj.$value === undefined ? Obj : Obj.$value;\n        return this[Obj.$type || 'service'].apply(this, [Obj.$name, value].concat(Obj.$inject || []));\n    };\n    \n    /**\n     * Deletes providers from the map and container.\n     *\n     * @param String name\n     * @return void\n     */\n    var removeProviderMap = function resetProvider(name) {\n        delete this.providerMap[name];\n        delete this.container[name];\n        delete this.container[name + PROVIDER_SUFFIX];\n    };\n    \n    /**\n     * Resets providers on a bottle instance. If 'names' array is provided, only the named providers will be reset.\n     *\n     * @param Array names\n     * @return void\n     */\n    var resetProviders = function resetProviders(names) {\n        var tempProviders = this.originalProviders;\n        var shouldFilter = Array.isArray(names);\n    \n        Object.keys(this.originalProviders).forEach(function resetProvider(originalProviderName) {\n            if (shouldFilter && names.indexOf(originalProviderName) === -1) {\n                return;\n            }\n            var parts = originalProviderName.split(DELIMITER);\n            if (parts.length > 1) {\n                parts.forEach(removeProviderMap, getNestedBottle.call(this, parts[0]));\n            }\n            removeProviderMap.call(this, originalProviderName);\n            this.provider(originalProviderName, tempProviders[originalProviderName]);\n        }, this);\n    };\n    \n    \n    /**\n     * Execute any deferred functions\n     *\n     * @param Mixed data\n     * @return Bottle\n     */\n    var resolve = function resolve(data) {\n        this.deferred.forEach(function deferredIterator(func) {\n            func(data);\n        });\n    \n        return this;\n    };\n    \n    \n    /**\n     * Bottle constructor\n     *\n     * @param String name Optional name for functional construction\n     */\n    Bottle = function Bottle(name) {\n        if (!(this instanceof Bottle)) {\n            return Bottle.pop(name);\n        }\n    \n        this.id = id++;\n    \n        this.decorators = {};\n        this.middlewares = {};\n        this.nested = {};\n        this.providerMap = {};\n        this.originalProviders = {};\n        this.deferred = [];\n        this.container = {\n            $decorator : decorator.bind(this),\n            $register : register.bind(this),\n            $list : list.bind(this)\n        };\n    };\n    \n    /**\n     * Bottle prototype\n     */\n    Bottle.prototype = {\n        constant : constant,\n        decorator : decorator,\n        defer : defer,\n        digest : digest,\n        factory : factory,\n        instanceFactory: instanceFactory,\n        list : list,\n        middleware : middleware,\n        provider : provider,\n        resetProviders : resetProviders,\n        register : register,\n        resolve : resolve,\n        service : service,\n        serviceFactory : serviceFactory,\n        value : value\n    };\n    \n    /**\n     * Bottle static\n     */\n    Bottle.pop = pop;\n    Bottle.clear = clear;\n    Bottle.list = list;\n    \n    /**\n     * Global config\n     */\n    Bottle.config = {\n        strict : false\n    };\n    \n    /**\n     * Exports script adapted from lodash v2.4.1 Modern Build\n     *\n     * @see http://lodash.com/\n     */\n    \n    /**\n     * Valid object type map\n     *\n     * @type Object\n     */\n    var objectTypes = {\n        'function' : true,\n        'object' : true\n    };\n    \n    (function exportBottle(root) {\n    \n        /**\n         * Free variable exports\n         *\n         * @type Function\n         */\n        var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n    \n        /**\n         * Free variable module\n         *\n         * @type Object\n         */\n        var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n    \n        /**\n         * CommonJS module.exports\n         *\n         * @type Function\n         */\n        var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n    \n        /**\n         * Free variable `global`\n         *\n         * @type Object\n         */\n        var freeGlobal = objectTypes[typeof global] && global;\n        if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n            root = freeGlobal;\n        }\n    \n        /**\n         * Export\n         */\n        if (typeof define === FUNCTION_TYPE && typeof define.amd === 'object' && define.amd) {\n            root.Bottle = Bottle;\n            define(function() { return Bottle; });\n        } else if (freeExports && freeModule) {\n            if (moduleExports) {\n                (freeModule.exports = Bottle).Bottle = Bottle;\n            } else {\n                freeExports.Bottle = Bottle;\n            }\n        } else {\n            root.Bottle = Bottle;\n        }\n    }((objectTypes[typeof window] && window) || this));\n    \n}.call(this));","/**\n * Mixin function for loading a module into a factory container. The function expects 'this' to be bound\n * to the container that supports an interface like so:\n * ```\n * {\n *     factory: (name: string, factoryFunction: (container) => any) => void\n *     defer: ((data: any) => any) => void\n *  }\n *  ```\n *\n *  @param {Object} module An where the keys are the name of services, and the values are factory functions. Also supports\n *                         a special key `$defer` that allows registering deffered functions.\n */\nexport default function loadModule(module) {\n    for (let service in module) {\n        if (module.hasOwnProperty(service)) {\n            if (service === '$init') {\n                this.defer(module[service]);\n            } else {\n                this.factory(service, module[service]);\n            }\n        }\n    }\n    return this;\n}\n","import {LogManagerImpl} from './logmanager/logManager';\nimport {Utils} from './utils';\nimport {Config} from './config';\nimport {Cache} from './cache';\nimport {SdpParserImpl} from './sdpparser';\nimport {ChallengeManagerFactory} from './challenge';\nimport {CoreImpl} from './core';\nimport {LocaleService} from './locale';\n\nimport httpModule from './http/module';\nimport globalBroadcasterModule from './globalbroadcaster/module';\nimport turnCredentialsModule from './turncredentials/module';\nimport sdpModule from './sdp/module';\n\nexport default {\n    ... httpModule,\n    ... globalBroadcasterModule,\n    ... turnCredentialsModule,\n    ... sdpModule,\n\n    Config: () => Config(),\n    LogManager: container => new LogManagerImpl(container),\n    Utils: container => new Utils(container),\n    Cache: container => new Cache(container),\n    SdpParser: container => new SdpParserImpl(container),\n    LocaleService: container => new LocaleService(container),\n    ChallengeManager: ChallengeManagerFactory,\n    Core: container => new CoreImpl(container),\n    NotificationCallbacks: () => { return {}; },\n\n    // Some globals\n    Navigator: () => navigator,\n    Global: () => window\n};\n","/**\n *\n * LogManager provides javascript logging framework.<br />\n *\n * <br />The logging level strategy is as follows:<br />\n *\n * <br />DEBUG: Used for development and detailed debugging logs<br />\n * INFO: Messages that provide information about the high level flow<br />\n * through. Contain basic information about the actions being performed<br />\n * by the user and/or the system<br />\n * WARN: Things that shouldn't happen but don't have any immediate effect, and should be flagged<br />\n * ERROR: Errors and Exceptions<br />\n * FATAL: Anything that causes the system to enter into an unstable and unusable state<br />\n *\n *\n * @name logManager\n * @namespace\n * @memberOf fcs\n *\n * @version @{spidr.jsl.version}\n * @since 3.0.0\n *\n */\nexport function LogManagerImpl({ Core: _core}) {\n    var loggers = {},\n        enabled = false,\n        Level = {\n            OFF: 'OFF',\n            FATAL: 'FATAL',\n            ERROR: 'ERROR',\n            WARN: 'WARN',\n            INFO: 'INFO',\n            DEBUG: 'DEBUG',\n            TRACE: 'TRACE',\n            ALL: 'ALL'\n        },\n        _logHandler = null;\n\n    /**\n     *\n     * Log object.\n     *\n     * @typedef {Object} logObject\n     * @readonly\n     * @since 3.0.0\n     *\n     * @property {String}  user - the user registered to fcs library.\n     * @property {String}  timestamp - the time stamp of the log.\n     * @property {String}  logger - the name of the logger.\n     * @property {String}  level - the level of message.\n     * @property {String}  message -  the message string.\n     * @property {Object}  args - the arguments.\n     *\n     */\n\n    /**\n     *\n     * Log handler function.\n     *\n     * @typedef {function} logHandler\n     * @param {string} loggerName Name of the logger\n     * @param {string} level Level of message\n     * @param {logObject} logObject Log object\n     * @since 3.0.0\n     */\n\n    /**\n     *\n     * Initializes logging using user-provided log handler.\n     * @name fcs.logManager#initLogging\n     * @since 3.0.0\n     * @function\n     *\n     * @param {logHandler} logHandler, Function that will receive log entries\n     * @param {boolean} enableDebug, Flag defining whether debugging should be enabled or not\n     * @returns {undefined}\n     *\n     * @example\n     *\n     * function jslLogHandler(loggerName, level, logObject) {\n     *     var LOG_LEVEL = fcs.logManager.Level,\n     *         msg = logObject.timestamp + \" - \" + loggerName + \" - \" + level + \" - \" + logObject.message;\n     *\n     *     switch(level) {\n     *         case LOG_LEVEL.DEBUG:\n     *             window.console.debug(msg, logObject.args);\n     *             break;\n     *         case LOG_LEVEL.INFO:\n     *             window.console.info(msg, logObject.args);\n     *             break;\n     *         case LOG_LEVEL.ERROR:\n     *             window.console.error(msg, logObject.args);\n     *             break;\n     *             default:\n     *             window.console.log(msg, logObject.args);\n     *     }\n     * }\n     *\n     * fcs.logManager.initLogging(jslLogHandler, true);\n     */\n    this.initLogging = function(logHandler, enableDebug) {\n        if (!logHandler || typeof logHandler !== 'function') {\n            return false;\n        }\n        _logHandler = logHandler;\n        enabled = enableDebug === true ? true : false;\n        return true;\n    };\n\n    /**\n     *\n     * Enumerates all possible log levels.\n     * @name fcs.logManager#Level\n     * @enum {string}\n     * @since 3.0.0\n     * @readonly\n     * @property {string} [OFF=OFF] string representation of the Off level.\n     * @property {string} [FATAL=FATAL]  string representation of the Fatal level.\n     * @property {string} [ERROR=ERROR] string representation of the Error level.\n     * @property {string} [WARN=WARN] string representation of the Warn level.\n     * @property {string} [INFO=INFO] string representation of the Info level.\n     * @property {string} [DEBUG=DEBUG] string representation of the Debug level.\n     * @property {string} [TRACE=TRACE] string representation of the Trace level.\n     * @property {string} [ALL=ALL] string representation of the All level.\n     */\n    this.Level = Level;\n\n    /**\n     * Returns true or false depending on whether logging is enabled.\n     *\n     * @name fcs.logManager#isEnabled\n     * @function\n     *\n     * @returns {Boolean}\n     * @since 3.0.0\n     *\n     * @example\n     *\n     * fcs.logManager.isEnabled();\n     *\n     */\n    this.isEnabled = function() {\n        return enabled;\n    };\n\n    function Logger(loggerName) {\n        var name = loggerName;\n\n        this.getName = function() {\n            return name;\n        };\n\n        function log(level, message, argument) {\n            if (enabled) {\n                var logObject = {};\n\n                logObject.user = _core.getUser();\n                logObject.timestamp = new Date().getTime();\n                logObject.logger = name;\n                logObject.level = level;\n                logObject.message = message;\n                logObject.args = argument;\n\n\n                if (_logHandler) {\n                    try {\n                        _logHandler(logObject.logger, logObject.level, logObject);\n                    } catch (e) {\n                        return undefined;\n                    }\n                }\n            }\n            return false;\n        }\n\n        this.trace = function trace(msg, argument) {\n            return log(Level.TRACE, msg, argument);\n        };\n\n        this.debug = function debug(msg, argument) {\n            return log(Level.DEBUG, msg, argument);\n        };\n\n        this.info = function info(msg, argument) {\n            return log(Level.INFO, msg, argument);\n        };\n\n        this.warn = function warn(msg, argument) {\n            return log(Level.WARN, msg, argument);\n        };\n\n        this.error = function error(msg, argument) {\n            return log(Level.ERROR, msg, argument);\n        };\n\n        this.fatal = function fatal(msg, argument) {\n            return log(Level.FATAL, msg, argument);\n        };\n    }\n\n    this.getLogger = function(loggerName) {\n        var logger, _loggerName;\n        _loggerName = loggerName ? loggerName.trim().length !== 0 ? loggerName : 'Default' : 'Default';\n        if (loggers[_loggerName]) {\n            logger = loggers[_loggerName];\n        } else {\n            logger = new Logger(_loggerName);\n            loggers[logger.getName()] = logger;\n        }\n\n        return logger;\n    };\n}\n","import constants from './constants';\n\nexport function Config() {\n    return {\n        polling: 30,\n        iceCandidateCollectionTimeoutInterval: 3000,\n        pluginMode: {\n            mode: 'auto',\n            h264: true\n        },\n        sdpHandlers: [],\n        bundlePolicy: constants.WEBRTC.SDP.BUNDLE_POLICY.DISABLED\n    };\n}\n","export function Cache({\n    Core: _fcs,\n    Config: _config,\n    Global: _global\n}) {\n\n    function getPrefix() {\n        const username = _fcs.getUser() || '';\n        const cachePrefix = _config.cachePrefix || 'FCS';\n        return `${cachePrefix}_${username}_`;\n    }\n\n    Object.assign(this, {\n        setItem(keyName, keyValue) {\n            return _global.localStorage.setItem(getPrefix() + keyName, keyValue);\n        },\n\n        getItem(keyName) {\n            return _global.localStorage.getItem(getPrefix() + keyName);\n        },\n\n        removeItem(keyName) {\n            return _global.localStorage.removeItem(getPrefix()  + keyName);\n        },\n\n        clear() {\n            for(let i = 0; i < _global.localStorage.length; ++i) {\n                const fullKeyName = localStorage.key(i);\n\n                // If the key name starts with the prefix, remove it.\n                if (fullKeyName.indexOf(getPrefix()) === 0) {\n                    _global.localStorage.removeItem(fullKeyName);\n                }\n            }\n        }\n    });\n}\n","import constants from '../constants';\n\nexport function SdpParserImpl({\n    LogManager: _logManager,\n    Config: _fcsConfig\n}) {\n    var logger = _logManager.getLogger('sdpParser'),\n        self, nl = '\\n', lf = '\\r';\n\n    this.init = function(sdpData) {\n        self = this;\n        self.sessionDescription = {};\n        self.mediaDescriptions = [];\n        self.sdp = sdpData;\n        self.parseSDP();\n        self.setSessionDescriptionAttributes();\n        self.setMediaDescriptionsAttributes();\n    };\n\n    this.parseSDP = function() {\n        var descriptions = [],\n            index = 1,\n            mediaDescription;\n        descriptions = self.sdp.split(/^(?=m=)/m);\n        self.sessionDescription.data = descriptions[0];\n        for (index; index < descriptions.length; index++) {\n            mediaDescription = {};\n            mediaDescription.data = descriptions[index];\n            self.mediaDescriptions.push(mediaDescription);\n        }\n    };\n\n    this.setSessionDescriptionAttributes = function() {\n        var line = 0,\n            sessionDescriptions = self.sessionDescription.data.split(/\\r\\n|\\r|\\n/),\n            connectionData;\n\n        for (line; line < sessionDescriptions.length; line++) {\n            if ((sessionDescriptions[line].match('^e='))) {\n                self.sessionDescription.email = sessionDescriptions[line].split('=')[1];\n            } else if ((sessionDescriptions[line].match('^c='))) {\n                connectionData = sessionDescriptions[line].split('=')[1];\n                self.sessionDescription.connection = connectionData;\n                self.sessionDescription.ip = connectionData.split(' ')[2];\n            }\n        }\n    };\n\n    this.setMediaDescriptionsAttributes = function() {\n        var line = 0,\n            mediaDescriptionIndex, mediaDescriptionAttributes, mediaData, connectionData;\n\n        for (mediaDescriptionIndex in self.mediaDescriptions) {\n            if (self.mediaDescriptions.hasOwnProperty(mediaDescriptionIndex)) {\n                mediaDescriptionAttributes = self.mediaDescriptions[mediaDescriptionIndex].data.split(/\\r\\n|\\r|\\n/);\n                this.mediaDescriptions[mediaDescriptionIndex].direction = 'sendrecv';\n                for (line in mediaDescriptionAttributes) {\n                    if (mediaDescriptionAttributes.hasOwnProperty(line)) {\n                        //direction default sendrcv setle\n                        if ((mediaDescriptionAttributes[line].match('^m='))) {\n                            mediaData = mediaDescriptionAttributes[line].split('=')[1];\n                            self.mediaDescriptions[mediaDescriptionIndex].media = mediaData;\n                            self.mediaDescriptions[mediaDescriptionIndex].port = mediaData.split(' ')[1];\n                        } else if ((mediaDescriptionAttributes[line].match('^a=sendrecv')) || (mediaDescriptionAttributes[line].match('^a=sendonly')) || (mediaDescriptionAttributes[line].match('^a=recvonly')) || (mediaDescriptionAttributes[line].match('^a=inactive'))) {\n                            self.mediaDescriptions[mediaDescriptionIndex].direction = mediaDescriptionAttributes[line].split('=')[1];\n                        } else if ((mediaDescriptionAttributes[line].match('^c='))) {\n                            connectionData = mediaDescriptionAttributes[line].split('=')[1];\n                            self.mediaDescriptions[mediaDescriptionIndex].connection = connectionData;\n                            self.mediaDescriptions[mediaDescriptionIndex].ip = connectionData.split(' ')[2];\n                        }\n                    }\n                }\n            }\n        }\n\n    };\n\n    this.isHold = function(isRemote) {\n        var isHold = false,\n            ip, media_index = 0,\n            mediaDesc;\n        for (media_index in self.mediaDescriptions) {\n            if (self.mediaDescriptions.hasOwnProperty(media_index)) {\n                mediaDesc = this.mediaDescriptions[media_index];\n                if (mediaDesc.ip) {\n                    ip = mediaDesc.ip;\n                } else {\n                    if (self.sessionDescription.ip) {\n                        ip = self.sessionDescription.ip;\n                    }\n                }\n\n                // some time ago port was set to 0 if sdp didn't have any candidates\n                // now port is set to 9\n                // adding port != 9 check, will prevent issues while trickle ice is enabled\n                if (mediaDesc.port !== '0' && mediaDesc.port !== '9') {\n                    if ((mediaDesc.direction === 'inactive') ||\n                        ((mediaDesc.direction === 'sendonly') && isRemote) ||\n                        ((mediaDesc.direction === 'recvonly') && !isRemote) ||\n                        (ip === '0.0.0.0')) {\n                        isHold = true;\n                    } else {\n                        isHold = false;\n                        break;\n                    }\n                }\n            }\n        }\n        return isHold;\n    };\n\n    this.isRemoteHold = function() {\n        return this.isHold(true);\n    };\n\n    this.isLocalHold = function() {\n        return this.isHold(false);\n    };\n\n    this.getSessionDescription = function() {\n        return self.sessionDescription;\n    };\n\n    this.getMediaDescriptions = function() {\n        return self.mediaDescriptions;\n    };\n\n    this.isSdpHas = function(pSdp, type) {\n        var result = false;\n\n        if (pSdp === null || pSdp === undefined) {\n            return result;\n        }\n\n        if (pSdp.indexOf(constants.SDP.M_LINE + type) !== -1) {\n            result = true;\n            return result;\n        }\n\n        return result;\n    };\n\n    this.isSdpHasAudio = function(pSdp) {\n        return this.isSdpHas(pSdp, constants.STRING.AUDIO);\n    };\n\n    this.isSdpHasVideo = function(pSdp) {\n        return this.isSdpHas(pSdp, constants.STRING.VIDEO);\n    };\n\n    this.isSdpHasUfrag = function(pSdp) {\n        var result = false;\n\n        if (pSdp === null || pSdp === undefined) {\n            return result;\n        }\n\n        if (pSdp.indexOf(constants.SDP.A_LINE + constants.SDP.ICE_UFRAG) !== -1) {\n            result = true;\n            return result;\n        }\n\n        return result;\n    };\n\n    this.isSdpHasMediaWithExpectedPort = function(pSdp, type, port) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        return pSdp.indexOf(constants.SDP.M_LINE + type + ' ' + port) !== -1;\n    };\n\n    this.isSdpHasAudioWithZeroPort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.AUDIO, 0);\n    };\n\n    this.isSdpHasVideoWithZeroPort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.VIDEO, 0);\n    };\n\n    this.isSdpHasAudioWithOnePort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.AUDIO, 1);\n    };\n\n    this.isSdpHasVideoWithOnePort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.VIDEO, 1);\n    };\n\n    this.isSdpHasAudioWithNinePort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.AUDIO, 9);\n    };\n\n    this.isSdpHasVideoWithNinePort = function(pSdp) {\n        return this.isSdpHasMediaWithExpectedPort(pSdp, constants.STRING.VIDEO, 9);\n    };\n\n    this.replaceZeroVideoPortWithOne = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n        if (this.isSdpHasVideoWithZeroPort(pSdp)) {\n            pSdp = pSdp.replace(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 0 ', constants.SDP.M_LINE + constants.STRING.VIDEO + ' 1 ');\n        }\n        return pSdp;\n    };\n\n    this.getSdpDirection = function(pSdp, type) {\n        var substr = '',\n            descriptions = [],\n            index,\n            direction = constants.WEBRTC.MEDIA_STATE.INACTIVE,\n            logmsg;\n\n        logmsg = function(state) {\n            logger.info('getSdpDirection: type= ' + type + ' state= ' + state);\n        };\n\n        if (!this.isSdpHas(pSdp, type)) {\n            logmsg(direction);\n            return direction;\n        }\n\n        if (this.isSdpHasMediaWithExpectedPort(pSdp, type, 0)) {\n            // return if media port is 0\n            logmsg(direction);\n            return direction;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (substr.indexOf(constants.SDP.M_LINE + type) !== -1) {\n                if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_ONLY) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.SEND_ONLY;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.INACTIVE) !== -1) {\n                    logmsg(direction);\n                    return direction;\n                }\n                direction = constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n                return direction;\n            }\n        }\n        direction = constants.WEBRTC.MEDIA_STATE.NOT_FOUND;\n        logmsg(direction);\n        return direction;\n    };\n\n    this.getAudioSdpDirection = function(pSdp) {\n        return this.getSdpDirection(pSdp, constants.STRING.AUDIO);\n    };\n\n    this.getVideoSdpDirection = function(pSdp) {\n        return this.getSdpDirection(pSdp, constants.STRING.VIDEO);\n    };\n\n    this.isAudioSdpDirectionInactive = function(pSdp) {\n        return this.getAudioSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.INACTIVE;\n    };\n\n    this.isAudioSdpDirectionSendrecv = function(pSdp) {\n        return this.getAudioSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n    };\n\n    this.isAudioSdpDirectionSendonly = function(pSdp) {\n        return this.getAudioSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.SEND_ONLY;\n    };\n\n    this.isAudioSdpDirectionRecvonly = function(pSdp) {\n        return this.getAudioSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n    };\n\n    this.isSdpContainsAudioDirection = function(pSdp) {\n        return this.getAudioSdpDirection(pSdp) !== constants.WEBRTC.MEDIA_STATE.NOT_FOUND;\n    };\n\n    this.isVideoSdpDirectionInactive = function(pSdp) {\n        return this.getVideoSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.INACTIVE;\n    };\n\n    this.isVideoSdpDirectionSendrecv = function(pSdp) {\n        return this.getVideoSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n    };\n\n    this.isVideoSdpDirectionSendonly = function(pSdp) {\n        return this.getVideoSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.SEND_ONLY;\n    };\n\n    this.isVideoSdpDirectionRecvonly = function(pSdp) {\n        return this.getVideoSdpDirection(pSdp) === constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n    };\n\n    this.isSdpContainsVideoDirection = function(pSdp) {\n        return this.getVideoSdpDirection(pSdp) !== constants.WEBRTC.MEDIA_STATE.NOT_FOUND;\n    };\n\n    this.changeDirection = function(pSdp, directionBefore, directionAfter, type) {\n        var sdp = '',\n            substr, descriptions = [],\n            index;\n\n\n        if (!type) {\n            logger.error('changeDirection: called without a type.');\n        }\n\n        if (directionBefore === directionAfter) {\n            //no need to change direction\n            return pSdp;\n        }\n\n        if (directionBefore !== this.getSdpDirection(pSdp, type)) {\n            //Ignore changing the direction if the \"directionBefore\" and existing directions do not match\n            return pSdp;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (substr.indexOf(constants.SDP.M_LINE + type) !== -1) {\n                if (substr.indexOf(constants.SDP.A_LINE + directionBefore) === -1) {\n                    substr = substr.concat(constants.SDP.A_LINE + directionAfter + lf + nl);\n                } else {\n                    substr = substr.replace(constants.SDP.A_LINE + directionBefore, constants.SDP.A_LINE + directionAfter);\n                }\n            }\n            sdp = sdp + substr;\n        }\n\n        return sdp;\n    };\n\n    this.updateSdpDirection = function(pSdp, type, direction) {\n        logger.info('updateSdpDirection: type= ' + type + ' direction= ' + direction);\n        var beforeDirection = this.getSdpDirection(pSdp, type);\n        return this.changeDirection(pSdp, beforeDirection, direction, type);\n    };\n\n    this.updateAudioSdpDirection = function(pSdp, direction) {\n        logger.info('updateSdpDirection: type= ' + constants.STRING.AUDIO + ' direction= ' + direction);\n        var beforeDirection = this.getSdpDirection(pSdp, constants.STRING.AUDIO);\n        return this.changeDirection(pSdp, beforeDirection, direction, constants.STRING.AUDIO);\n    };\n\n    this.updateVideoSdpDirection = function(pSdp, direction) {\n        logger.info('updateSdpDirection: type= ' + constants.STRING.VIDEO + ' direction= ' + direction);\n        var beforeDirection = this.getSdpDirection(pSdp, constants.STRING.VIDEO);\n        return this.changeDirection(pSdp, beforeDirection, direction, constants.STRING.VIDEO);\n    };\n\n    this.updateAudioSdpDirectionToInactive = function(pSdp) {\n        return this.updateAudioSdpDirection(pSdp, constants.WEBRTC.MEDIA_STATE.INACTIVE);\n    };\n\n    this.updateVideoSdpDirectionToInactive = function(pSdp) {\n        return this.updateVideoSdpDirection(pSdp, constants.WEBRTC.MEDIA_STATE.INACTIVE);\n    };\n\n    this.isSdpHasDirection = function(pSdp) {\n        var sr_indx, so_indx, ro_indx, in_indx;\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n\n        sr_indx = pSdp.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE, 0);\n        so_indx = pSdp.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_ONLY, 0);\n        ro_indx = pSdp.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, 0);\n        in_indx = pSdp.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.INACTIVE, 0);\n        return (sr_indx + 1) + (so_indx + 1) + (ro_indx + 1) + (in_indx + 1) === 0 ? false : true;\n    };\n\n    this.isSdpEnabled = function(pSdp, type) {\n        var direction, msg = 'isSdpEnabled for type ' + type + ': ',\n            result = false;\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n\n        if (this.isSdpHasMediaWithExpectedPort(pSdp, type, 0)) {\n            // return if media port is 0\n            logger.info(msg + result);\n            return result;\n        }\n        if (type === constants.STRING.VIDEO) {\n            direction = this.getVideoSdpDirection(pSdp);\n            if (direction === constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY || direction === constants.WEBRTC.MEDIA_STATE.INACTIVE) {\n                logger.info(msg + result);\n                return result;\n            }\n        }\n        if (this.isSdpHas(pSdp, type)) {\n            result = true;\n        }\n        logger.info(msg + result);\n        return result;\n    };\n\n    this.isAudioSdpEnabled = function(pSdp) {\n        return this.isSdpEnabled(pSdp, constants.STRING.AUDIO);\n    };\n\n    this.isVideoSdpEnabled = function(pSdp) {\n        return this.isSdpEnabled(pSdp, constants.STRING.VIDEO);\n    };\n\n    this.isSdpVideoReceiveEnabled = function(pSdp) {\n        var direction, msg = 'isSdpVideoReceiveEnabled: ',\n            result = false;\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n\n        if (pSdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 0') !== -1) {\n            logger.info(msg + result);\n            return result;\n        }\n\n        direction = this.getVideoSdpDirection(pSdp);\n        if (direction === constants.WEBRTC.MEDIA_STATE.SEND_ONLY || direction === constants.WEBRTC.MEDIA_STATE.INACTIVE) {\n            logger.info(msg + result);\n            return result;\n        }\n\n        if (pSdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO) !== -1) {\n            result = true;\n            logger.info(msg + result);\n            return result;\n        }\n\n        logger.info(msg + result);\n        return result;\n    };\n\n    this.updateH264Level = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            video_arr, i, new_substr = '',\n            elm, elm_array;\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (substr.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO) !== -1) {\n                video_arr = substr.split(reg);\n                for (i = 0; i < video_arr.length; i++) {\n                    elm = video_arr[i];\n                    if (elm && elm.indexOf('a=rtpmap:') !== -1 && elm.indexOf('H264') !== -1) {\n                        elm_array = elm.split(/\\:| /m);\n                        elm = elm + constants.STRING.CARRIAGE_RETURN + constants.STRING.NEW_LINE;\n                        elm = elm + 'a=fmtp:' + elm_array[1] + ' profile-level-id=428014;';\n                        elm = elm + constants.STRING.CARRIAGE_RETURN + constants.STRING.NEW_LINE;\n                        // Workaround for issue 1603.\n                    } else if (elm && elm !== '') {\n                        elm = elm + constants.STRING.CARRIAGE_RETURN + constants.STRING.NEW_LINE;\n                    }\n                    new_substr = new_substr + elm;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n    /*\n     * Firefox only accepts 42E0xx and above profile-id-level.\n     * In order not to get setRemoteDescription failure we fix the H264 level\n     * This snippet changes all H264 levels with 4280xx to 42E0xx\n     */\n    this.updateH264LevelTo42E01F = function(pSdp, isH264Enabled) {\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n        if (isH264Enabled) {\n            logger.debug('Updating the H264 profile-level-id to 42e01f');\n            pSdp = pSdp.replace(/profile-level-id=.{4}/g, 'profile-level-id=42e0');\n        }\n        return pSdp;\n    };\n\n    this.isSdpVideoCandidateEnabled = function(pSdp) {\n        var msg = 'isSdpVideoCandidateEnabled: ',\n            result = false;\n\n        if (this.isSdpHasVideoWithZeroPort(pSdp) ||\n            this.isVideoSdpDirectionInactive(pSdp)) {\n            logger.info(msg + result);\n            return result;\n        } else if (!this.isSdpHasVideo(pSdp)) {\n            result = true;\n            logger.info(msg + result);\n            return true;\n        }\n\n        logger.info(msg + result);\n        return result;\n    };\n\n    this.deleteFingerprintFromSdp = function(sdp, isDtlsEnabled) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        if (isDtlsEnabled) {\n            return sdp;\n        }\n        while (sdp.indexOf('a=fingerprint:') !== -1) {\n            sdp = sdp.replace(/(a=fingerprint:[\\w\\W]*?(:\\r|\\n))/, '');\n            logger.debug('Deleting fingerprint');\n        }\n        while (sdp.indexOf('a=setup:') !== -1) {\n            sdp = sdp.replace(/(a=setup:[\\w\\W]*?(:\\r|\\n))/, '');\n        }\n        return sdp;\n    };\n\n    this.getFingerprintFromSdp = function(sdp) {\n        var fingerprint;\n        if (sdp === null || sdp === undefined) {\n            return;\n        }\n        if (sdp.indexOf('a=fingerprint:') !== -1) {\n            fingerprint = ((/a=fingerprint:([\\w\\W]*?)(:\\r|\\n)/g).exec(sdp))[1];\n            logger.debug('SDP fingerprint:' + fingerprint);\n            return fingerprint;\n        }\n        return;\n    };\n\n    this.deleteCryptoFromSdp = function(sdp, isDtlsEnabled) {\n        if (sdp === null || sdp === undefined) {\n            return;\n        }\n        if (!isDtlsEnabled) {\n            return sdp;\n        }\n        while (sdp.indexOf('a=crypto:') !== -1) {\n            sdp = sdp.replace(/(a=crypto:[\\w\\W]*?(:\\r|\\n))/, '');\n            logger.debug('Deleting crypto line');\n        }\n        return sdp;\n    };\n\n    this.deleteCryptoZeroFromSdp = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        if (sdp.indexOf('a=crypto:1') === -1) {\n            while (sdp.indexOf('a=crypto:0') !== -1) {\n                sdp = sdp.replace('a=crypto:0', 'a=crypto:1');\n            }\n        } else {\n            while (sdp.indexOf('a=crypto:0') !== -1) {\n                sdp = sdp.replace(/(a=crypto:0[\\w\\W]*?(:\\r|\\n))/, '');\n            }\n        }\n        return sdp;\n    };\n\n    /*\n     * updateAudioCodec: removes codecs listed in config file from codec list.\n     * @param {type} pSdp\n     */\n    this.updateAudioCodec = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            audio_arr, i, new_substr = '',\n            attrLine, partialMLine,\n            remcodec, regExpCodec, codecsToRemove = [],\n            j;\n\n        codecsToRemove = _fcsConfig.codecsToRemove;\n        if (codecsToRemove === undefined) {\n            return pSdp;\n        }\n\n        logger.debug('Updating Audio Codecs');\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasAudio(substr)) {\n                audio_arr = substr.split(reg);\n                for (i = 0; i < audio_arr.length; i++) {\n                    attrLine = audio_arr[i];\n                    for (j = 0; j < codecsToRemove.length; j++) {\n                        remcodec = codecsToRemove[j];\n                        if (attrLine && this.isSdpHasAudio(attrLine)) {\n                            // remove audio codecs given in config file from m=audio line\n                            regExpCodec = new RegExp(' ' + remcodec + '($| )', 'm');\n                            partialMLine = attrLine.split(/(\\m=audio+)\\s(\\w+)/);\n                            attrLine = attrLine.replace(/(\\m=audio+)\\s(\\w+)/, '');\n                            attrLine = attrLine.trim();\n                            attrLine = attrLine.replace(regExpCodec, ' ');\n                            attrLine = partialMLine[1] + ' ' + partialMLine[2] + ' ' + attrLine + lf + nl;\n                        } else if (attrLine && attrLine.indexOf('a=fmtp:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=fmtp[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine.indexOf('a=rtcp-fb:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=rtcp-fb[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine.indexOf('a=rtpmap:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=rtpmap[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine !== '' && j === 0) {\n                            attrLine = attrLine + lf + nl;\n                        }\n                    }\n                    new_substr = new_substr + attrLine;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n\n    /*\n     * updateVideoCodec: removes codecs listed in config file from codec list.\n     * @param {type} pSdp\n     */\n    this.updateVideoCodec = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            video_arr, i, new_substr = '',\n            attrLine, partialMLine,\n            remcodec, regExpCodec, codecsToRemoveForVideo = [],\n            j;\n\n        codecsToRemoveForVideo = _fcsConfig.codecsToRemoveForVideo;\n        if (codecsToRemoveForVideo === undefined) {\n            return pSdp;\n        }\n\n        logger.debug('Updating Video Codecs');\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasVideo(substr)) {\n                video_arr = substr.split(reg);\n                for (i = 0; i < video_arr.length; i++) {\n                    attrLine = video_arr[i];\n                    for (j = 0; j < codecsToRemoveForVideo.length; j++) {\n                        remcodec = codecsToRemoveForVideo[j];\n                        if (attrLine && this.isSdpHasVideo(attrLine)) {\n                            // remove video codecs given in config file from m=video line\n                            regExpCodec = new RegExp(' ' + remcodec + '($| )', 'm');\n                            partialMLine = attrLine.split(/(\\m=video+)\\s(\\w+)/);\n                            attrLine = attrLine.replace(/(\\m=video+)\\s(\\w+)/, '');\n                            attrLine = attrLine.trim();\n                            attrLine = attrLine.replace(regExpCodec, ' ');\n                            attrLine = partialMLine[1] + ' ' + partialMLine[2] + ' ' + attrLine + lf + nl;\n                        } else if (attrLine && attrLine.indexOf('a=fmtp:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=fmtp[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine.indexOf('a=rtcp-fb:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=rtcp-fb[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine.indexOf('a=rtpmap:' + remcodec) !== -1) {\n                            attrLine = attrLine.replace(/a=rtpmap[\\w\\W]*/, '');\n                        } else if (attrLine && attrLine !== '' && j === 0) {\n                            attrLine = attrLine + lf + nl;\n                        }\n                    }\n                    new_substr = new_substr + attrLine;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n\n    /*\n     * removeAudioCodec: removes given codec type from sdp.\n     * @param {type} pSdp\n     * @param {type} codecToRemove\n     */\n    this.removeAudioCodec = function(pSdp, codecToRemove) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            audio_arr, i,\n            new_substr = '',\n            elm, elm2, regExpCodec;\n\n        logger.debug('Removing Audio Codec:' + codecToRemove);\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasAudio(substr)) {\n                audio_arr = substr.split(reg);\n                for (i = 0; i < audio_arr.length; i++) {\n                    elm = audio_arr[i];\n                    if (elm && this.isSdpHasAudio(elm)) {\n                        // remove given audio codec from m=audio line\n                        regExpCodec = new RegExp(' ' + codecToRemove + '($| )', 'm');\n                        elm2 = audio_arr[i].split(/RTP[\\w\\W]*/);\n                        elm = elm.replace(/(\\m=audio+)\\s(\\w+)/, '');\n                        elm = elm.trim();\n                        elm = elm.replace(regExpCodec, ' ');\n                        elm = elm2[0] + elm + lf + nl;\n                        // Workaround for issue 1603.\n                    } else if (elm && elm.indexOf('a=fmtp:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=fmtp[\\w\\W]*/, '');\n                    } else if (elm && elm.indexOf('a=rtpmap:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=rtpmap[\\w\\W]*/, '');\n                    } else if (elm && elm.indexOf('a=rtcp-fb:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=rtcp-fb[\\w\\W]*/, '');\n                    } else if (elm && elm !== '') {\n                        elm = elm + lf + nl;\n                    }\n                    new_substr = new_substr + elm;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n\n    /*\n     * removeRTXCodec: this function will remove rtx video codec\n     */\n    this.removeRTXCodec = function(pSdp) {\n        var rtxPayloadType, vp8SSRC, rtxSSRC;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        vp8SSRC = this.getVp8Ssrc(pSdp);\n        logger.debug('vp8SSRC = ' + vp8SSRC);\n\n        rtxSSRC = this.getRtxSsrc(pSdp);\n        logger.debug('rtxSSRC = ' + rtxSSRC);\n\n        pSdp = this.removeSsrcId(pSdp, rtxSSRC);\n\n        pSdp = pSdp.replace(/(a=ssrc-group:FID[\\w\\W]*?(:\\r|\\n))/g, '');\n\n        if (pSdp.indexOf('rtx/90000') === -1) {\n            return pSdp;\n        }\n\n        rtxPayloadType = this.getRTXPayloadType(pSdp);\n\n        logger.debug('removeRTXCodec : Removing rtx video codec ' + rtxPayloadType);\n        pSdp = this.removeVideoCodec(pSdp, rtxPayloadType);\n\n        return pSdp;\n    };\n\n    this.getVp8Ssrc = function(pSdp) {\n        var splitArray, ssrcGroupArray, ssrcArray, i, reg = /\\r\\n|\\r|\\n/m;\n        if (pSdp === null || pSdp === undefined) {\n            return -1;\n        }\n\n        if (pSdp.indexOf('a=ssrc-group:FID ') === -1) {\n            return -1;\n        }\n\n        splitArray = pSdp.split('a=ssrc-group:FID ');\n        ssrcGroupArray = splitArray[1].split(reg);\n        ssrcArray = ssrcGroupArray[0].split(' ');\n\n        for (i = 0; i < ssrcArray.length; i++) {\n            logger.debug('ssrcArray[' + i + '] : ' + ssrcArray[i]);\n        }\n\n        return ssrcArray[0];\n    };\n\n    this.getRtxSsrc = function(pSdp) {\n        var splitArray, ssrcGroupArray, ssrcArray, i, reg = /\\r\\n|\\r|\\n/m;\n        if (pSdp === null || pSdp === undefined) {\n            return -1;\n        }\n\n        if (pSdp.indexOf('a=ssrc-group:FID ') === -1) {\n            return -1;\n        }\n\n        splitArray = pSdp.split('a=ssrc-group:FID ');\n        ssrcGroupArray = splitArray[1].split(reg);\n        ssrcArray = ssrcGroupArray[0].split(' ');\n\n        for (i = 0; i < ssrcArray.length; i++) {\n            logger.debug('ssrcArray[' + i + '] : ' + ssrcArray[i]);\n        }\n\n        return ssrcArray[1];\n    };\n\n    /*\n     * removeSsrcId: removes given SSRC ID from sdp.\n     */\n    this.removeSsrcId = function(pSdp, ssrcId) {\n        var sdp = '',\n            reg = /\\r\\n|\\r|\\n/m,\n            ssrc_arr, i, new_substr = '',\n            elm;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        ssrc_arr = pSdp.split(reg);\n        for (i = 0; i < ssrc_arr.length; i++) {\n            elm = ssrc_arr[i];\n            if (elm && elm.indexOf('a=ssrc:' + ssrcId) !== -1) {\n                elm = elm.replace(/a=ssrc:[\\w\\W]*/, '');\n            } else if (elm && elm !== '') {\n                elm = elm + lf + nl;\n            }\n            new_substr = new_substr + elm;\n        }\n        sdp = new_substr;\n\n        return sdp;\n    };\n\n    /*\n     * removeG722Codec: this function will remove G722 audio codec\n     * @param {type} pSdp\n     */\n    this.removeG722Codec = function(pSdp) {\n        return pSdp;\n    };\n\n    this.getPayloadTypeOf = function(codecString, pSdp) {\n        var rtpMapNumber, rtpMapArray, payloadTypeArray = [],\n            index;\n\n        if (pSdp.indexOf(codecString) === -1) {\n            return -1;\n        }\n        rtpMapArray = pSdp.match(/(a=rtpmap[\\w\\W]*?(:\\r|\\n))/g);\n        for (index = 0; index < rtpMapArray.length; index++) {\n            if (rtpMapArray[index].search(new RegExp(codecString, 'i')) !== -1) {\n                /*jslint regexp: false*/\n                rtpMapNumber = rtpMapArray[index].match(/^[^\\d]*(\\d+)/g);\n                rtpMapNumber = rtpMapNumber[0].split(':');\n                payloadTypeArray.push(rtpMapNumber[1]);\n                /*jslint regexp: true*/\n            }\n        }\n\n        logger.debug('getPayloadTypeOf(' + codecString + ') = ' + payloadTypeArray[0]);\n\n        if (payloadTypeArray.length < 2) {\n            // if codec has just one match, then returns it as String for compatibility of old methods\n            return payloadTypeArray[0];\n        } else {\n            return payloadTypeArray;\n        }\n    };\n\n    /*\n     * Replaces new telephone event code in pSdp with the oldCode\n     * This is needed for WebRTC engine compatibility\n     * If an offer has a different telephone event code than what is already negotiated in that session, webrtc engine gives error\n     * Ex: Negotitation is firstly done with 126, but then the call server sends an offer with 96\n     * @param {type} pSdp\n     * @param {type} oldCode\n     * @param {type} newCode\n     */\n    this.replaceTelephoneEventPayloadType = function(pSdp, oldCode, newCode) {\n        var finalsdp, regex, matches, tempAudioLine, descriptions, index, substr, partialsdp = '',\n            number = '';\n\n        if (!pSdp || (pSdp.indexOf('telephone-event') === -1)) {\n            return pSdp;\n        }\n\n        regex = /^\\.*(a=rtpmap:)(\\d*)( telephone-event[ \\w+ ]*[ \\/+ ]*[ \\w+ ]*)\\r\\n?/m;\n\n        /* example: matches= [\"a=rtpmap:96 telephone-event/8000\\r\\n\", \"a=rtpmap:\", \"96\", \" telephone-event/8000\"] */\n\n        if (oldCode === newCode) { // telephone event has not changed\n            // nothing has changed, return without any changes\n            return pSdp;\n        }\n\n        // telephone event has changed\n        finalsdp = pSdp;\n\n        // replace rtpmap\n        regex = new RegExp('^\\\\.*a=rtpmap:' + newCode + ' telephone-event[ \\\\/+ ]*([ \\\\w+ ]*)\\\\r\\n', 'm');\n        matches = finalsdp.match(regex);\n        if (matches !== null && matches.length >= 2 && matches[1] !== '') {\n            number = matches[1];\n        } else {\n            number = 8000;\n        }\n        finalsdp = finalsdp.replace(regex, 'a=rtpmap:' + oldCode + ' telephone-event/' + number + '\\r\\n');\n\n        // replace audio line\n        regex = new RegExp('^\\\\.*(m=audio )[ \\\\w+ ]*[ \\\\/+ ]*[ \\\\w+ ]*( ' + newCode + ')', 'mg');\n        matches = finalsdp.match(regex);\n\n        if (matches !== null && matches.length >= 1 && matches[0] !== '') {\n            tempAudioLine = matches[0];\n            tempAudioLine = tempAudioLine.replace(newCode, oldCode);\n            finalsdp = finalsdp.replace(regex, tempAudioLine);\n        }\n\n        // replace fmtp\n        // only audio section needs to be considered, do not change video section\n        descriptions = finalsdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasAudio(substr)) {\n                regex = new RegExp('^\\\\.*a=fmtp:' + newCode, 'mg');\n                substr = substr.replace(regex, 'a=fmtp:' + oldCode);\n            }\n            partialsdp = partialsdp + substr;\n        }\n        if (partialsdp !== '') {\n            finalsdp = partialsdp;\n        }\n        logger.debug('replaceTelephoneEventPayloadType: newcode ' + newCode + ' is replaced with oldcode ' + oldCode);\n        return finalsdp;\n    };\n\n    /*\n     * Replaces opus codec in pSdp with the default codec number 109\n     * (TODO: get the codec from config.json)\n     * This is needed for trancoder enabled peer-to-peer scenarios\n     * transcoder only accepts opus codec that it offers\n     * @param {type} pSdp\n     */\n    this.replaceOpusCodec = function(pSdp) {\n        var regex, matches, tempAudioLine, oldCodecNumber = '',\n            defaultCodecNumber = 109,\n            descriptions, index, substr, partialsdp = '';\n\n        if (!pSdp || (pSdp.indexOf('opus') === -1)) {\n            return pSdp;\n        }\n\n        regex = /^\\.*(a=rtpmap:)(\\d*)( opus)/m;\n        /* example: matches= [\"a=rtpmap:109 opus/48000/2\\r\\n\", \"a=rtpmap:\", \"111\", \" opus/48000/2\"] */\n\n        matches = pSdp.match(regex);\n        if (matches !== null && matches.length >= 3 && matches[2] !== '') {\n            oldCodecNumber = matches[2];\n        } else {\n            logger.warn('sdp has opus without codec number');\n        }\n        // replace rtpmap\n        pSdp = pSdp.replace(regex, 'a=rtpmap:' + defaultCodecNumber + ' opus');\n\n        // replace audio line\n        regex = new RegExp('^\\\\.*(m=audio )[ \\\\w+ ]*[ \\\\/+ ]*[ \\\\w+ ]*( ' + oldCodecNumber + ')', 'mg');\n        matches = pSdp.match(regex);\n\n        if (matches !== null && matches.length >= 1 && matches[0] !== '') {\n            tempAudioLine = matches[0];\n            tempAudioLine = tempAudioLine.replace(oldCodecNumber, defaultCodecNumber);\n            pSdp = pSdp.replace(regex, tempAudioLine);\n        }\n\n        // replace fmtp\n        // only audio section needs to be considered, do not change video section\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasAudio(substr)) {\n                regex = new RegExp('^\\\\.*a=fmtp:' + oldCodecNumber, 'mg');\n                substr = substr.replace(regex, 'a=fmtp:' + defaultCodecNumber);\n            }\n            partialsdp = partialsdp + substr;\n        }\n        if (partialsdp !== '') {\n            pSdp = partialsdp;\n        }\n        logger.debug('replaceOpusCodec: new codec= ' + defaultCodecNumber);\n        return pSdp;\n    };\n\n    this.updateOpusConfig = function (pSdp, opusConfig) {\n\n        if (opusConfig === undefined) {\n            logger.debug('No control values for bandwidth control were added. Proceeding...');\n            return pSdp;\n        } else {\n            if (!pSdp || pSdp === undefined) {\n                return pSdp;\n            }\n\n            var opusBandwidthLine = '',\n                opusPayload = this.getOpusPayloadType(pSdp),\n                searchParam = 'a=fmtp:' + opusPayload,\n                untilFtmpLine = '',\n                opusFmtpLine = '',\n                aFmtp = '';\n\n            // fmtpLine format: a=fmtp:111 minptime=10;useinbandfec=1\n            // aFmtp format: a=fmtp:111\n\n            // values are set via the fcsConfig\n            var maxPlaybackRate = opusConfig.maxPlaybackRate,\n                maxAverageBitrate = opusConfig.maxAverageBitrate,\n                fec = opusConfig.fec,\n                dtx = opusConfig.dtx,\n                ptime = opusConfig.ptime;\n\n            // if the fmtp line with the opus payload exists, parse it to obtain the line with the opus codec\n            if (pSdp.indexOf(searchParam) !== -1) {\n                untilFtmpLine = pSdp.substring(pSdp.indexOf(searchParam), pSdp.length);\n                opusFmtpLine = untilFtmpLine.substring(0, untilFtmpLine.indexOf(lf + nl));\n\n                // fmtp line format is now a=fmtp:111 minptime=10;useinbandfec=1\n                aFmtp = opusFmtpLine.split(' ')[0];\n                opusBandwidthLine = aFmtp + ' '; // bandwidthLine starts with a=fmtp:[codec value]\n\n                // append the audio controls\n                opusBandwidthLine += this.createControlText(constants.SDP.BANDWIDTH.MAXPLAYBACKRATE, maxPlaybackRate);\n                opusBandwidthLine += this.createControlText(constants.SDP.BANDWIDTH.MAXAVERAGEBITRATE, maxAverageBitrate);\n                opusBandwidthLine += this.createControlText(constants.SDP.BANDWIDTH.FEC, fec);\n                opusBandwidthLine += this.createControlText(constants.SDP.BANDWIDTH.DTX, dtx);\n\n                // bandwidthLine.endsWith(';') workaround for IE\n                if (opusBandwidthLine.lastIndexOf(';') === opusBandwidthLine.length - 1) {\n                    opusBandwidthLine = opusBandwidthLine.slice(0, -1);\n                }\n\n                if (this.isValidOpusControl(constants.SDP.BANDWIDTH.PTIME, ptime)) {\n                    var ptimeSearchParam = 'a=' + constants.SDP.BANDWIDTH.PTIME;\n\n                    // check if ptime property is already in sdp\n                    if (pSdp.indexOf(ptimeSearchParam) !== -1) {\n                        var ptimeAndRest = pSdp.substring(pSdp.indexOf(ptimeSearchParam), pSdp.length);\n                        var ptimeLine = ptimeAndRest.substring(0, ptimeAndRest.indexOf(lf + nl)); // format: a=ptime:40\n                        pSdp = pSdp.replace(ptimeLine, ptimeSearchParam + ':' + ptime);\n                    } else {\n                        opusBandwidthLine += lf + nl + 'a=' + constants.SDP.BANDWIDTH.PTIME + ':' + ptime;\n                    }\n                }\n\n                // if there are more than 1 equal signs, then at least one of the provided control values were valid\n                // and we should replace the fmtp line for opus. otherwise the line should stay as default\n                if (opusBandwidthLine.split('=').length - 1 > 1) {\n                    pSdp = pSdp.replace(opusFmtpLine, opusBandwidthLine);\n                    logger.debug('Bandwidth control handled. Opus codec control values are updated.');\n                } else {\n                    logger.debug('Provided control parameters were invalid. Keeping default opus codec control values.');\n                }\n            } else {\n                logger.debug(`Search parameter ${searchParam} not found in sdp.`);\n            }\n        }\n\n        return pSdp;\n    };\n\n    this.createControlText = function (audioControlPropertyName, audioControlPropertyValue) {\n        var controlLine = '';\n\n        // if a value for a control was set, use it. otherwise discard the control value\n        if (typeof audioControlPropertyValue !== 'undefined') {\n            if (this.isValidOpusControl(audioControlPropertyName, audioControlPropertyValue)) {\n                controlLine = audioControlPropertyName + '=' + audioControlPropertyValue + ';';\n            }\n        }\n\n        return controlLine;\n    };\n\n    this.isValidOpusControl = function (controlName, controlValue) {\n        var val = parseInt(controlValue);\n        switch (controlName) {\n        case constants.SDP.BANDWIDTH.MAXPLAYBACKRATE:\n            return (8000 <= val && val <= 48000);\n        case constants.SDP.BANDWIDTH.MAXAVERAGEBITRATE:\n            return (6000 <= val && val <= 510000);\n        case constants.SDP.BANDWIDTH.FEC:\n        case constants.SDP.BANDWIDTH.DTX:\n            return (val === 0 || val === 1);\n        case constants.SDP.BANDWIDTH.PTIME:\n            return (2.5 < val && val <= 120);\n        default:\n            return false;\n        }\n    };\n\n    this.getG7228000PayloadType = function(pSdp) {\n        return this.getPayloadTypeOf('G722/8000', pSdp);\n    };\n\n    this.getVP8PayloadType = function(pSdp) {\n        return this.getPayloadTypeOf('VP8/90000', pSdp);\n    };\n\n    this.getG72216000PayloadType = function(pSdp) {\n        return this.getPayloadTypeOf('G722/16000', pSdp);\n    };\n\n    this.getRTXPayloadType = function(pSdp) {\n        return this.getPayloadTypeOf('rtx/90000', pSdp);\n    };\n\n    this.getH264PayloadType = function(pSdp) {\n        return this.getPayloadTypeOf('H264/90000', pSdp);\n    };\n\n    this.getOpusPayloadType = function (pSdp) {\n        return this.getPayloadTypeOf('opus/48000', pSdp);\n    };\n\n    this.isSdpHasTelephoneEventWithRate = function(pSdp, rate) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        return pSdp.indexOf('telephone-event/' + rate) !== -1;\n    };\n\n    this.isSdpHasTelephoneEvent = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        return pSdp.indexOf('telephone-event/') !== -1;\n    };\n\n    this.isSdpHasVP8Codec = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        return pSdp.indexOf('VP8/90000') !== -1;\n    };\n\n    this.isSdpHasH264Codec = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        return pSdp.indexOf('H264/90000') !== -1;\n    };\n\n    /*\n     * checkSupportedVideoCodecs\n     *\n     * checks video codec support status and remove video m-line if no supported video codec is available\n     * @param {type} pSdp\n     * @param {type} localOfferSdp\n     */\n    this.checkSupportedVideoCodecs = function(pSdp, localOfferSdp, isH264Enabled) {\n        var newSdp;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n        if (this.isVideoCodecsSupported(pSdp, isH264Enabled)) {\n            return pSdp;\n        } else {\n            if (localOfferSdp) {\n                newSdp = this.removeAllVideoCodecs(pSdp);\n                newSdp = this.addVP8Codec(newSdp, localOfferSdp);\n                newSdp = this.updateSdpVideoPort(newSdp, false);\n                newSdp = this.performVideoPortZeroWorkaround(newSdp);\n            } else {\n                //******************************************************\n                //Changing video port to 0 when there is no supported\n                //video codecs is not working in webrtc library\n                //******************************************************\n                if (!this.isSdpHasVP8Codec(pSdp)) {\n                    if (pSdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 0 ', 0) !== -1) {\n                        newSdp = this.addVP8Codec(pSdp, newSdp);\n                    } else {\n                        //this is required for PCC and meetme with video\n                        newSdp = this.updateSdpVideoPort(pSdp, false);\n                        newSdp = this.addVP8Codec(newSdp, newSdp);\n                    }\n                } else {\n                    //this is required for PCC and meetme with video\n                    newSdp = this.removeVideoDescription(pSdp);\n                }\n            }\n\n            return newSdp;\n        }\n    };\n\n    /*\n     * isVideoCodecsSupported: this function checks supported video codecs are listed in m=video line\n     * Supported video codecs are :\n     *      VP8     default supported codec\n     *      H264    if h264 is enabled with plugin\n     *      @param {type} pSdp\n     */\n    this.isVideoCodecsSupported = function(pSdp, isH264Enabled) {\n        if (this.isSdpHasVP8Codec(pSdp)) {\n            return true;\n        }\n        if (isH264Enabled) {\n            if (this.isSdpHasH264Codec(pSdp)) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    this.removeAllVideoCodecs = function(pSdp) {\n        var regex, matches, codecs, newSdp, index;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        //TODO: The RegExp below has invalid control character of \\n. Don't think we should have that\n        // but i'm leaving it for now since it might be dangerous to fix. Also need to disable the eslint.\n        //\n        //eslint-disable-next-line no-control-regex\n        regex = new RegExp('^\\\\.*(m=video )(\\\\d*)( RTP/SAVPF )([ \\\\w+ ]*[ \\\\/+ ]*[ \\\\w+ ])\\\\r\\n', 'm');\n\n        newSdp = pSdp;\n        matches = newSdp.match(regex);\n\n        if (matches !== null && matches.length >= 5 && matches[0] !== '') {\n            codecs = matches[4].split(' ');\n            for (index = 0; index < codecs.length; index++) {\n                logger.debug('codec[' + index + '] : ' + codecs[index]);\n                newSdp = this.removeVideoCodec(newSdp, codecs[index]);\n            }\n        }\n\n        return newSdp;\n    };\n\n    /*\n     * removeVideoCodec: removes given codec type from sdp.\n     * @param {type} pSdp\n     * @param {type} codecToRemove\n     */\n    this.removeVideoCodec = function(pSdp, codecToRemove) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            video_arr, i,\n            new_substr = '',\n            elm, regExpCodec;\n        if (pSdp === null || pSdp === undefined || !codecToRemove) {\n            return pSdp;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasVideo(substr)) {\n                video_arr = substr.split(reg);\n                for (i = 0; i < video_arr.length; i++) {\n                    elm = video_arr[i];\n                    if (elm && this.isSdpHasVideo(elm)) {\n                        // remove given video codec from m=video line\n                        regExpCodec = new RegExp(' ' + codecToRemove, 'g');\n                        elm = elm.replace(regExpCodec, '');\n                        elm = elm + lf + nl;\n                        // Workaround for issue 1603.\n                    } else if (elm && elm.indexOf('a=fmtp:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=fmtp[\\w\\W]*/, '');\n                    } else if (elm && elm.indexOf('a=rtpmap:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=rtpmap[\\w\\W]*/, '');\n                    } else if (elm && elm.indexOf('a=rtcp-fb:' + codecToRemove) !== -1) {\n                        elm = elm.replace(/a=rtcp-fb[\\w\\W]*/, '');\n                    } else if (elm && elm !== '') {\n                        elm = elm + lf + nl;\n                    }\n                    new_substr = new_substr + elm;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n\n    /*\n     * addVP8Codec: adds missing VP8 Codec\n     * @param {type} pSdp\n     * @param {type} offerSdp\n     */\n    this.addVP8Codec = function(pSdp, offerSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index,\n            reg = /\\r\\n|\\r|\\n/m,\n            video_arr, i, new_substr = '',\n            vp8PayloadType, codecType, elm,\n            videoUFRAGParam, videoPWDParam, ice_ufrag, ice_pwd;\n\n        if (this.isSdpHasVP8Codec(pSdp)) {\n            return pSdp;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasVideo(substr)) {\n                if (offerSdp &&\n                    this.isSdpHasVideo(offerSdp) &&\n                    this.isSdpHasVP8Codec(offerSdp)) {\n                    vp8PayloadType = this.getVP8PayloadType(offerSdp);\n                    if (substr.indexOf('a=rtpmap:' + vp8PayloadType) !== -1) {\n                        this.removeSdpLineContainingText(substr, 'a=rtpmap:' + vp8PayloadType);\n                    }\n                } else {\n                    codecType = 100;\n                    while (substr.indexOf('a=rtpmap:' + codecType) !== -1) {\n                        codecType = codecType + 1;\n                    }\n                    vp8PayloadType = codecType;\n                }\n                video_arr = substr.split(reg);\n                for (i = 0; i < video_arr.length; i++) {\n                    elm = video_arr[i];\n                    if (elm && this.isSdpHasVideo(elm)) {\n                        if (elm.indexOf(vp8PayloadType) === -1) {\n                            elm = elm + ' ' + vp8PayloadType;\n                        }\n                        elm = elm + lf + nl + 'a=rtpmap:' + vp8PayloadType + ' VP8/90000' + lf + nl;\n                    } else if (elm && elm !== '') {\n                        elm = elm + lf + nl;\n                    }\n                    new_substr = new_substr + elm;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n\n        videoUFRAGParam = this.checkICEParams(sdp, 'video', constants.SDP.ICE_UFRAG);\n        if (videoUFRAGParam < 2) {\n            ice_ufrag = this.getICEParams(sdp, constants.SDP.ICE_UFRAG, false);\n            if (ice_ufrag) {\n                sdp = this.restoreICEParams(sdp, 'video', constants.SDP.ICE_UFRAG, ice_ufrag);\n            }\n        }\n        videoPWDParam = this.checkICEParams(sdp, 'video', constants.SDP.ICE_PWD);\n        if (videoPWDParam < 2) {\n            ice_pwd = this.getICEParams(sdp, constants.SDP.ICE_PWD, false);\n            if (ice_pwd) {\n                sdp = this.restoreICEParams(sdp, 'video', constants.SDP.ICE_PWD, ice_pwd);\n            }\n        }\n\n        return sdp;\n    };\n\n    this.removeSdpLineContainingText = function(pSdp, containing_text) {\n        var i, splitArray;\n\n        if (pSdp === null || pSdp === undefined || !containing_text) {\n            return pSdp;\n        }\n\n        splitArray = pSdp.split(nl);\n        pSdp = splitArray[0] + nl;\n        for (i = 1; i < splitArray.length - 1; i++) {\n            if (splitArray[i].indexOf(containing_text) !== -1) {\n                logger.debug('removed line which contains ' + containing_text);\n            } else {\n                pSdp += splitArray[i] + nl;\n            }\n        }\n        return pSdp;\n    };\n\n    this.removeVideoDescription = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (!this.isSdpHasVideo(substr)) {\n                sdp = sdp + substr;\n            } else {\n                logger.debug('removeVideoDescription : m=video description removed');\n            }\n        }\n        return sdp;\n    };\n\n    /*\n     * updateSdpVideoPort\n     * @param {type} pSdp\n     * @param {type} status\n     */\n    this.updateSdpVideoPort = function(pSdp, status) {\n        var r_sdp, port_text;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        logger.debug('updateSdpVideoPort: status= ' + status);\n\n        r_sdp = pSdp;\n\n        if (status) {\n            port_text = constants.SDP.M_LINE + constants.STRING.VIDEO + ' 1';\n        } else {\n            port_text = constants.SDP.M_LINE + constants.STRING.VIDEO + ' 0';\n            r_sdp = this.updateSdpDirection(r_sdp, constants.STRING.VIDEO, constants.WEBRTC.MEDIA_STATE.INACTIVE);\n        }\n\n        if (this.isSdpHasVideo(r_sdp)) {\n            r_sdp = r_sdp.replace(/m=video [0-9]+/, port_text);\n        }\n\n        return r_sdp;\n    };\n\n    /*\n     * performVideoPortZeroWorkaround - apply this when term side sends an answer with video port 0\n     * @param {type} pSdp\n     */\n    this.performVideoPortZeroWorkaround = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        if (!this.isSdpHasVideoWithZeroPort(pSdp)) {\n            return pSdp;\n        }\n        pSdp = this.addSdpMissingCryptoLine(pSdp);\n        pSdp = this.replaceZeroVideoPortWithOne(pSdp);\n\n        //chrome38 fix\n        pSdp = this.updateVideoSdpDirectionToInactive(pSdp);\n\n        return pSdp;\n    };\n\n    // Issue      : Meetme conference failed due to a webrtc bug\n    //              When video is sent in SDP with 0 without a=crypto line(SDES) in SDP,\n    //              hold scenario for meetme failed.\n    // Workaround : Add dummy a=crypto or a=fingerprint line to solve the issue with a workaround\n    // Note       : fingerprint(DTLS enabled) may still fails on meetme. This is known issue as below:\n    //              https://code.google.com/p/webrtc/issues/detail?id=2316\n    //              Check with Chrome 37\n    this.addSdpMissingCryptoLine = function(sdp) {\n        var mediaSplit, audioLines, cryptLine = null,\n            reg = /\\r\\n|\\r|\\n/m,\n            i;\n\n        // If there is no \"m=video 0\" line, sdp should not be modified\n        if (sdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 0 ', 0) === -1) {\n            return sdp;\n        }\n\n        mediaSplit = sdp.split(constants.SDP.M_LINE + constants.STRING.VIDEO);\n\n        audioLines = mediaSplit[0].split(reg);\n        for (i = 0; i < audioLines.length; i++) {\n            if ((audioLines[i].indexOf(constants.SDP.A_LINE + constants.SDP.CRYPTO) !== -1) || (audioLines[i].indexOf(constants.SDP.A_LINE + constants.SDP.FINGERPRINT) !== -1)) {\n                cryptLine = audioLines[i];\n                break;\n            }\n        }\n\n        if (cryptLine === null) {\n            return sdp;\n        }\n\n        if (mediaSplit[0].indexOf(constants.SDP.A_LINE + constants.SDP.CRYPTO) !== -1) {\n            if (mediaSplit[1].indexOf(constants.SDP.A_LINE + constants.SDP.CRYPTO, 0) === -1) {\n                mediaSplit[1] += cryptLine + '\\n';\n                logger.debug('addSdpMissingCryptoLine : crypto line is added : ' + cryptLine);\n            }\n        } else if (mediaSplit[0].indexOf(constants.SDP.A_LINE + constants.SDP.FINGERPRINT, 0) !== -1) {\n            if (mediaSplit[1].indexOf(constants.SDP.A_LINE + constants.SDP.FINGERPRINT, 0) === -1) {\n                //DTLS is enabled, even adding fingerprint line in SDP,\n                //meetme scenario fails. This is known issue and followed\n                //by webrtc for DTLS enabled scenarios :\n                //https://code.google.com/p/webrtc/issues/detail?id=2316\n                mediaSplit[1] += cryptLine + '\\na=setup:passive\\n';\n                logger.debug('addSdpMissingCryptoLine : dtls lines are added : ' + cryptLine + 'and a=setup:passive');\n                logger.debug('dtls enabled: known issue by webrtc may be fixed! Check it');\n            }\n        }\n        sdp = mediaSplit.join(constants.SDP.M_LINE + constants.STRING.VIDEO);\n        return sdp;\n    };\n\n    this.checkICEParams = function(pSdp, mediaType, type) {\n        var parse1, parse2;\n\n        if (pSdp === null || pSdp === undefined) {\n            return 0;\n        }\n\n        parse1 = pSdp.split('m=video');\n        if (parse1.length < 2) {\n            return 0;\n        }\n\n        switch (type) {\n        case constants.SDP.ICE_UFRAG:\n            if (mediaType === 'audio') {\n                parse2 = parse1[0].split('a=ice-ufrag:');\n            } else {\n                parse2 = parse1[1].split('a=ice-ufrag:');\n            }\n            break;\n        case constants.SDP.ICE_PWD:\n            if (mediaType === 'audio') {\n                parse2 = parse1[0].split('a=ice-pwd:');\n            } else {\n                parse2 = parse1[1].split('a=ice-pwd:');\n            }\n            break;\n        default:\n            return 0;\n        }\n\n        return parse2.length;\n    };\n\n    this.getICEParams = function(pSdp, type, isVideo) {\n        var parse1, parse2, parse3, param;\n        if (pSdp === null || pSdp === undefined) {\n            return;\n        }\n\n        switch (type) {\n        case constants.SDP.ICE_UFRAG:\n            parse1 = pSdp.split('a=ice-ufrag:');\n            break;\n        case constants.SDP.ICE_PWD:\n            parse1 = pSdp.split('a=ice-pwd:');\n            break;\n        default:\n            return undefined;\n        }\n\n        if (isVideo) {\n            if (parse1[2] !== undefined) { /*\"....a=ice-....a=ice-....\"*/\n                parse2 = parse1[2];\n                parse3 = parse2.split('a=');\n                param = parse3[0];\n                return param; /*return video ice params*/\n            } else {\n                return undefined;\n            }\n        } else {\n            if (parse1[1] !== undefined) { /*\"....a=ice-....a=ice-....\"*/\n                parse2 = parse1[1];\n                parse3 = parse2.split('a=');\n                param = parse3[0];\n                return param;\n            } else {\n                return undefined;\n            }\n        }\n    };\n\n    this.restoreICEParams = function(pSdp, mediaType, type, new_value) {\n        var sdp = '',\n            substr, index, parse1;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        parse1 = pSdp.split('m=video');\n        if (parse1.length < 2) {\n            return pSdp;\n        }\n\n        for (index = 0; index < parse1.length; index++) {\n            substr = parse1[index];\n            if (index === 0) {\n                if (mediaType === 'audio') {\n                    substr = substr + 'a=' + type + new_value;\n                }\n                sdp = sdp + substr;\n            }\n            if (index === 1) {\n                if (mediaType === 'video') {\n                    substr = substr + 'a=' + type + new_value;\n                }\n                sdp = sdp + 'm=video' + substr;\n            }\n        }\n        return sdp;\n    };\n\n    this.updateICEParams = function(pSdp, type, new_value) {\n        var sdp = '',\n            subsdp = '',\n            substr, index, num,\n            parse1, parse2;\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        switch (type) {\n        case constants.SDP.ICE_UFRAG:\n            parse1 = pSdp.split('a=ice-ufrag:');\n            break;\n        case constants.SDP.ICE_PWD:\n            parse1 = pSdp.split('a=ice-pwd:');\n            break;\n        default:\n            return pSdp;\n        }\n\n        for (index = 0; index < parse1.length; index++) {\n            substr = parse1[index];\n            if (index === 2) {\n                parse2 = substr.split('a=');\n\n                for (num = 0; num < parse2.length; num++) {\n                    if (num === 0) {\n                        parse2[num] = new_value;\n                        subsdp = subsdp + parse2[num];\n                    } else {\n                        subsdp = subsdp + 'a=' + parse2[num];\n                    }\n                }\n                substr = subsdp;\n                sdp = sdp + substr;\n            } else {\n                sdp = sdp + substr + 'a=' + type;\n            }\n        }\n        return sdp;\n    };\n\n    this.checkIceParamsLengths = function(newSdp, oldSdp) {\n        var ice_ufrag, ice_pwd;\n        ice_ufrag = this.getICEParams(newSdp, constants.SDP.ICE_UFRAG, true);\n        ice_pwd = this.getICEParams(newSdp, constants.SDP.ICE_PWD, true);\n\n        if (ice_ufrag && ice_ufrag.length < 4) { /*RFC 5245 the ice-ufrag attribute can be 4 to 256 bytes long*/\n            ice_ufrag = this.getICEParams(oldSdp, constants.SDP.ICE_UFRAG, true);\n            if (ice_ufrag) {\n                newSdp = this.updateICEParams(newSdp, constants.SDP.ICE_UFRAG, ice_ufrag);\n            }\n        }\n\n        if (ice_pwd && ice_pwd.length < 22) { /*RFC 5245 the ice-pwd attribute can be 22 to 256 bytes long*/\n            ice_pwd = this.getICEParams(oldSdp, constants.SDP.ICE_PWD, true);\n            if (ice_pwd) {\n                newSdp = this.updateICEParams(newSdp, constants.SDP.ICE_PWD, ice_pwd);\n            }\n        }\n        return newSdp;\n    };\n\n    /*\n     * isSdpVideoSendEnabled\n     * @param {type} pSdp\n     */\n    this.isSdpVideoSendEnabled = function(pSdp) {\n        var direction,\n            msg = 'isSdpVideoSendEnabled: ',\n            result = false;\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n\n        if (!this.isSdpEnabled(pSdp, constants.STRING.VIDEO)) {\n            logger.debug(msg + result);\n            return result;\n        }\n\n        direction = this.getSdpDirectionLogging(pSdp, constants.STRING.VIDEO, false);\n        if (direction === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE ||\n            direction === constants.WEBRTC.MEDIA_STATE.SEND_ONLY) {\n            result = true;\n            logger.debug(msg + result);\n            return result;\n        }\n\n        logger.debug(msg + result);\n        return result;\n    };\n\n    this.getSdpDirectionLogging = function(pSdp, type, logging) {\n        var substr = '',\n            descriptions = [],\n            index,\n            direction = constants.WEBRTC.MEDIA_STATE.INACTIVE,\n            logmsg;\n\n        logmsg = function(state) {\n            if (logging) {\n                logger.debug('getSdpDirection: type= ' + type + ' state= ' + state);\n            }\n        };\n\n        if (pSdp.indexOf(constants.SDP.M_LINE + type) === -1) {\n            logmsg(direction);\n            return direction;\n        }\n\n        if (pSdp.indexOf(constants.SDP.M_LINE + type + ' 0') !== -1) {\n            logmsg(direction);\n            return direction;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (substr.indexOf(constants.SDP.M_LINE + type) !== -1) {\n                if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.SEND_ONLY) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.SEND_ONLY;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) !== -1) {\n                    direction = constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n                    logmsg(direction);\n                    return direction;\n                } else if (substr.indexOf(constants.SDP.A_LINE + constants.WEBRTC.MEDIA_STATE.INACTIVE) !== -1) {\n                    logmsg(direction);\n                    return direction;\n                }\n                direction = constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE;\n                return direction;\n            }\n        }\n        direction = constants.WEBRTC.MEDIA_STATE.NOT_FOUND;\n        logmsg(direction);\n        return direction;\n    };\n\n    /*\n     * remove only video ssrc from the sdp\n     * this is a workaround to hear audio in a peer-to-peer call\n     * @param {type} pSdp\n     */\n    this.deleteInactiveVideoSsrc = function(pSdp) {\n        var videoSdp = [];\n\n        if (this.isSdpHas(pSdp, constants.STRING.VIDEO)) {\n            videoSdp = pSdp.split(constants.SDP.M_LINE + constants.STRING.VIDEO);\n            if (videoSdp[1] !== null) {\n                videoSdp[1] = this.deleteSsrcFromSdp(videoSdp[1]);\n            }\n        } else {\n            return pSdp;\n        }\n        return videoSdp[0] + constants.SDP.M_LINE + constants.STRING.VIDEO + videoSdp[1];\n    };\n\n    /*\n     * deleteSsrcFromSdp - delete ssrc from the sdp, use it when there is video continuity issue\n     * @param {type} sdp\n     */\n    this.deleteSsrcFromSdp = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        while (sdp.indexOf('a=ssrc') !== -1) {\n            sdp = sdp.replace(/(a=ssrc[\\w\\W]*?(:\\r|\\n))/, '');\n        }\n        return sdp;\n    };\n\n    this.getTcpSetupAttribute = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return;\n        }\n\n        if (sdp.indexOf(constants.SDP.SETUP_ACTIVE) !== -1) {\n            return 'active';\n        } else if (sdp.indexOf(constants.SDP.SETUP_PASSIVE) !== -1) {\n            return 'passive';\n        } else if (sdp.indexOf(constants.SDP.SETUP_ACTPASS) !== -1) {\n            return 'actpass';\n        }\n    };\n\n    this.setTcpSetupAttribute = function(sdp, newSetupAttribute) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n\n        if (newSetupAttribute !== 'active') {\n            while (sdp.indexOf(constants.SDP.SETUP_ACTIVE) !== -1) {\n                logger.debug('a=setup:active to ' + newSetupAttribute);\n                sdp = sdp.replace(constants.SDP.SETUP_ACTIVE, 'a=setup:' + newSetupAttribute);\n            }\n        }\n\n        if (newSetupAttribute !== 'passive') {\n            while (sdp.indexOf(constants.SDP.SETUP_PASSIVE) !== -1) {\n                logger.debug('a=setup:passive to ' + newSetupAttribute);\n                sdp = sdp.replace(constants.SDP.SETUP_PASSIVE,  'a=setup:' + newSetupAttribute);\n            }\n        }\n\n        if (newSetupAttribute !== 'actpass') {\n            while (sdp.indexOf(constants.SDP.SETUP_ACTPASS) !== -1) {\n                logger.debug('a=setup:actpass to ' + newSetupAttribute);\n                sdp = sdp.replace(constants.SDP.SETUP_ACTPASS,  'a=setup:' + newSetupAttribute);\n            }\n        }\n        return sdp;\n    };\n\n    /*\n     *\n     * @param {type} pSdp\n     * @param {type} oSdp\n     * @returns pSdp\n     */\n    this.checkAndRestoreICEParams = function(pSdp, oSdp) {\n        var audioUFRAGParam, audioPWDParam, videoUFRAGParam, videoPWDParam, ice_ufrag, ice_pwd;\n\n        audioUFRAGParam = this.checkICEParams(pSdp, constants.STRING.AUDIO, constants.SDP.ICE_UFRAG);\n        if (audioUFRAGParam < 2) {\n            ice_ufrag = this.getICEParams(oSdp, constants.SDP.ICE_UFRAG, false);\n            if (ice_ufrag) {\n                pSdp = this.restoreICEParams(pSdp, constants.STRING.AUDIO, constants.SDP.ICE_UFRAG, ice_ufrag);\n            }\n        }\n        audioPWDParam = this.checkICEParams(pSdp, constants.STRING.AUDIO, constants.SDP.ICE_PWD);\n        if (audioPWDParam < 2) {\n            ice_pwd = this.getICEParams(oSdp, constants.SDP.ICE_PWD, false);\n            if (ice_pwd) {\n                pSdp = this.restoreICEParams(pSdp, constants.STRING.AUDIO, constants.SDP.ICE_PWD, ice_pwd);\n            }\n        }\n        videoUFRAGParam = this.checkICEParams(pSdp, constants.STRING.VIDEO, constants.SDP.ICE_UFRAG);\n        if (videoUFRAGParam < 2) {\n            ice_ufrag = this.getICEParams(oSdp, constants.SDP.ICE_UFRAG, false);\n            if (ice_ufrag) {\n                pSdp = this.restoreICEParams(pSdp, constants.STRING.VIDEO, constants.SDP.ICE_UFRAG, ice_ufrag);\n            }\n        }\n        videoPWDParam = this.checkICEParams(pSdp, constants.STRING.VIDEO, constants.SDP.ICE_PWD);\n        if (videoPWDParam < 2) {\n            ice_pwd = this.getICEParams(oSdp, constants.SDP.ICE_PWD, false);\n            if (ice_pwd) {\n                pSdp = this.restoreICEParams(pSdp, constants.STRING.VIDEO, constants.SDP.ICE_PWD, ice_pwd);\n            }\n        }\n        return pSdp;\n    };\n\n    this.incrementVersion = function(pSdp) {\n        var oLineAsArray = [],\n            newoLine = '',\n            index, version, actualoLine;\n        logger.debug('incrementVersion');\n\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        // o=- 937770930552268055 2 IN IP4 127.0.0.1\n        // o=mozilla...THIS_IS_SDPARTA-37.0.1 4294967295 0 IN IP4 0.0.0.0\n        // get o line\n        actualoLine = pSdp.match(/(o=[\\w\\W]*?(:\\r|\\n))/);\n\n        if (!actualoLine) {\n            return pSdp;\n        }\n\n        // get o line\n        oLineAsArray = actualoLine[0].split(' ');\n\n        //getting version and convering it to int\n        version = +oLineAsArray[2];\n        //incrementing the version\n        version = version + 1;\n\n        for (index = 0; index < oLineAsArray.length; index++) {\n            if (index !== 0) {\n                // prevents adding unnecessary space before the o line\n                newoLine = newoLine + ' ';\n            }\n            if (index === 2) {\n                // 2nd index is version index\n                newoLine = newoLine + version;\n            } else {\n                newoLine = newoLine + oLineAsArray[index];\n            }\n        }\n\n        pSdp = pSdp.replace(actualoLine[0], newoLine);\n\n        return pSdp;\n    };\n\n    /*\n     * escalateSdpDirection for type:audio or video\n     * @param {type} pSdp\n     * @param {type} type\n     */\n    this.escalateSdpDirection = function(pSdp, type) {\n        var direction = this.getSdpDirectionLogging(pSdp, type, false);\n        logger.debug('escalateSdpDirection: type= ' + type + ' direction= ' + direction);\n        if (direction === constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            return this.changeDirection(pSdp, direction, constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE, type);\n        } else if (direction === constants.WEBRTC.MEDIA_STATE.INACTIVE) {\n            return this.changeDirection(pSdp, direction, constants.WEBRTC.MEDIA_STATE.SEND_ONLY, type);\n        }\n        return pSdp;\n    };\n\n    /*\n     * deescalateSdpDirection for type:audio or video\n     * @param {type} pSdp\n     * @param {type} type\n     */\n    this.deescalateSdpDirection = function(pSdp, type) {\n        var direction = this.getSdpDirectionLogging(pSdp, type, false);\n        logger.debug('deescalateSdpDirection: type= ' + type + ' direction= ' + direction);\n        if (direction === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            return this.changeDirection(pSdp, direction, constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, type);\n        } else if (direction === constants.WEBRTC.MEDIA_STATE.SEND_ONLY) {\n            return this.changeDirection(pSdp, direction, constants.WEBRTC.MEDIA_STATE.INACTIVE, type);\n        }\n        return pSdp;\n    };\n\n    this.isIceLite = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        if (pSdp && pSdp.indexOf('a=ice-lite') !== -1) {\n            return true;\n        }\n        return false;\n    };\n\n    this.getSessionIdFromSdp = function(sdp) {\n        var oLine;\n\n        if (!sdp) {\n            return -1;\n        }\n        oLine = sdp.match(/(o=[\\w\\W]*?(:\\r|\\n))/);\n\n        if (!oLine) {\n            return -1;\n        }\n\n        oLine = oLine[0].split(' ');\n\n        if (oLine[1]) {\n            logger.info('getSessionIdFromSdp = ' + oLine[1]);\n            return oLine[1];\n        } else {\n            logger.warn('getSessionIdFromSdp called with wrong sdp!!');\n            return -1;\n        }\n    };\n\n    /*\n     * Updates the version in tosdp with the one retrieved from fromsdp with incrementing\n     */\n    this.updateVersion = function(fromSdp, toSdp) {\n        var fromOline = [],\n            toOline = [],\n            newoLine = '',\n            index, version, actualtoOline = '';\n\n        if (fromSdp === null || fromSdp === undefined) {\n            return toSdp;\n        }\n\n        logger.debug(' updateVersion called...');\n\n        // o=- 937770930552268055 2 IN IP4 127.0.0.1\n        // get o line\n        fromOline = fromSdp.match(/(o=[\\w\\W]*?(:\\r|\\n))/);\n\n        if (!fromOline) {\n            return toSdp;\n        }\n\n        fromOline = fromOline[0].split(' ');\n\n        // get o line\n        actualtoOline = toSdp.match(/(o=[\\w\\W]*?(:\\r|\\n))/);\n        toOline = actualtoOline[0].split(' ');\n\n        if (fromOline) {\n            version = fromOline[2];\n        } else {\n            logger.warn('updateVersion called with wrong fromSdp!!');\n            return toSdp;\n        }\n\n        // convert to int and increment\n        version = (+version) + 1;\n\n        logger.debug(' updateVersion fromVersion incremented: ' + version);\n\n        for (index = 0; index < toOline.length; index++) {\n            if (index !== 0) {\n                // prevents adding unnecessary space before the o line\n                newoLine = newoLine + ' ';\n            }\n            if (index === 2) {\n                // 2nd index is version index\n                newoLine = newoLine + version;\n            } else {\n                newoLine = newoLine + toOline[index];\n            }\n        }\n        toSdp = toSdp.replace(actualtoOline[0], newoLine);\n\n        return toSdp;\n    };\n\n    // TODO: Method below assumes to receive only one video m-line, need to correct this logic.\n    this.copyCandidatesToTheNewLocalSdp = function(oldSdp, newSdp) {\n        var oldSplitSdp = [],\n            newSplitSdp = [],\n            oldVideoSdp, newVideoSdp,\n            oldAudioSdp, newAudioSdp;\n\n        oldSplitSdp = oldSdp.split(constants.SDP.M_LINE + constants.STRING.VIDEO);\n        newSplitSdp = newSdp.split(constants.SDP.M_LINE + constants.STRING.VIDEO);\n\n        oldAudioSdp = oldSplitSdp[0];\n        oldVideoSdp = oldSplitSdp[1] !== undefined ? constants.SDP.M_LINE + constants.STRING.VIDEO + oldSplitSdp[1] : undefined;\n        newAudioSdp = newSplitSdp[0];\n        newVideoSdp = newSplitSdp[1] !== undefined ? constants.SDP.M_LINE + constants.STRING.VIDEO + newSplitSdp[1] : undefined;\n\n        newAudioSdp = this.copyCandidates(oldAudioSdp, newAudioSdp);\n\n        if (oldVideoSdp !== undefined && newVideoSdp !== undefined) {\n            newVideoSdp = this.copyCandidates(oldVideoSdp, newVideoSdp);\n        }\n\n        if (newVideoSdp !== undefined) {\n            return newAudioSdp + newVideoSdp;\n        } else {\n            return newAudioSdp;\n        }\n    };\n\n    this.copyCandidates = function(oldSdp, newSdp) {\n        var mediaLines, reg = /\\r\\n|\\r|\\n/m,\n            i, port;\n\n        mediaLines = oldSdp.split(reg);\n\n        for (i = 0; i < mediaLines.length; i++) {\n            if (mediaLines[i].indexOf('a=candidate') !== -1 && newSdp.indexOf(('a=candidate') === -1)) {\n                newSdp += mediaLines[i] + '\\r\\n';\n            } else if (mediaLines[i].indexOf('c=IN') !== -1 && newSdp.indexOf(('c=IN IP4 0.0.0.0') !== -1)) {\n                newSdp = newSdp.replace(/(c=[\\w\\W]*?(:\\r|\\n))/, mediaLines[i] + '\\r\\n');\n            } else if ((mediaLines[i].indexOf('m=audio') !== -1) &&\n                (newSdp.indexOf(constants.SDP.M_LINE + constants.STRING.AUDIO + ' 1 ') !== -1 ||\n                    newSdp.indexOf(constants.SDP.M_LINE + constants.STRING.AUDIO + ' 9 ') !== -1)) {\n                port = mediaLines[i].split(' ')[1];\n\n                newSdp = newSdp.replace(/m=audio \\d/, constants.SDP.M_LINE + constants.STRING.AUDIO + ' ' + port);\n            } else if ((mediaLines[i].indexOf('m=video') !== -1) &&\n                (newSdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 1 ') !== -1 ||\n                    newSdp.indexOf(constants.SDP.M_LINE + constants.STRING.VIDEO + ' 9 ') !== -1)) {\n                port = mediaLines[i].split(' ')[1];\n\n                newSdp = newSdp.replace(/m=video \\d/, constants.SDP.M_LINE + constants.STRING.VIDEO + ' ' + port);\n            }\n        }\n        return newSdp;\n    };\n\n    /*\n     * getSdpFromObject\n     * There is a webrtc bug in Plugin.\n     * sendrecv direction changed to recvonly for offer type sdps\n     * This function is the workaround solution to get the correct sdp from the object\n     * until webrtc bug in plugin is fixed.\n     */\n    this.getSdpFromObject = function(oSdp) {\n        var sdp;\n        sdp = oSdp.sdp;\n\n        return sdp;\n    };\n\n    /*\n     * deleteGoogleIceFromSdp - delete google-ice option from the sdp\n     */\n    this.deleteGoogleIceFromSdp = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        sdp = sdp.replace(/(a=ice-options:google-ice[\\w\\W]*?(:\\r|\\n))/g, '');\n        return sdp;\n    };\n\n    this.respondToRemoteSdpDirections = function(localSdp, remoteSdp) {\n        localSdp = this.respondToRemoteMediaSdpDirection(localSdp, remoteSdp, constants.STRING.AUDIO);\n        localSdp = this.respondToRemoteMediaSdpDirection(localSdp, remoteSdp, constants.STRING.VIDEO);\n\n        return localSdp;\n    };\n\n    this.respondToRemoteMediaSdpDirection = function(localSdp, remoteSdp, type) {\n        var remoteDirection;\n\n        if (this.isSdpHas(remoteSdp, type)) {\n            remoteDirection = this.getSdpDirection(remoteSdp, type);\n\n            if (this.hasZeroConnectionIP(remoteSdp)) {\n                if (remoteDirection === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                } else {\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.INACTIVE);\n                }\n            } else {\n                if (remoteDirection === constants.WEBRTC.MEDIA_STATE.SEND_ONLY) {\n                    logger.debug(type + ' sendonly -> recvonly');\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                } else if (remoteDirection === constants.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n                    logger.debug(type + ' recvonly -> sendonly');\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                } else if (remoteDirection === constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n                    logger.debug(type + ' sendrecv -> sendrecv');\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else if (remoteDirection === constants.WEBRTC.MEDIA_STATE.INACTIVE) {\n                    logger.debug(type + ' inactive -> inactive');\n                    localSdp = this.updateSdpDirection(localSdp, type, constants.WEBRTC.MEDIA_STATE.INACTIVE);\n                }\n            }\n        }\n        return localSdp;\n    };\n\n    this.hasCandidates = function(sdp, relayCandidateCycle, relayCandidateConfigCycle) {\n        if (this.checkRelayCandidateCollectionTimeout(relayCandidateCycle, relayCandidateConfigCycle)) {\n            return true;\n        }\n        const candidateParser = this.getCandidateType(relayCandidateCycle, relayCandidateConfigCycle);\n\n        const [ , ...mLines] = sdp.split('m=');\n        return mLines.every(mline => mline.indexOf(candidateParser) !== -1);\n    };\n\n    this.getCandidateType = function(relayCandidateCycle, relayCandidateConfigCycle) {\n        var candidateParser;\n        if (relayCandidateCycle) {\n            if (relayCandidateCycle <= relayCandidateConfigCycle) {\n                candidateParser = 'relay';\n            } else {\n                candidateParser = 'a=candidate';\n            }\n        } else {\n            candidateParser = 'a=candidate';\n        }\n        return candidateParser;\n    };\n\n    this.checkRelayCandidateCollectionTimeout = function(relayCandidateCycle, relayCandidateConfigCycle) {\n        if (relayCandidateCycle) {\n            if (relayCandidateCycle > relayCandidateConfigCycle) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    // spidr sends both fingerprint and crypto at incoming call to the term side\n    // delete the unnecessary one before setting remote description\n    this.deleteFingerprintOrCrypto = function(sdp, isDtlsEnabled) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        if (sdp.indexOf('a=crypto:') === -1 || sdp.indexOf('a=fingerprint:') === -1) {\n            return sdp;\n        }\n        sdp = this.deleteCryptoFromSdp(sdp, isDtlsEnabled);\n        sdp = this.deleteFingerprintFromSdp(sdp, isDtlsEnabled);\n\n        return sdp;\n    };\n\n    function addRtpmapForCodec(sdp, payload, rtpmapString) {\n        var audioCodecList;\n        if (sdp === null || sdp === undefined) {\n            return;\n        }\n\n        audioCodecList = sdp.match(/m=audio [\\w\\W]*?(\\r|\\n)/);\n        if (!audioCodecList) {\n            return sdp;\n        }\n\n        audioCodecList = audioCodecList[0].split(' ');\n        // shift \"m=audio\" out\n        // shift audio port out\n        // shift RTP/SAVPF out\n        audioCodecList.shift();\n        audioCodecList.shift();\n        audioCodecList.shift();\n\n        if (audioCodecList.indexOf(payload) === -1) {\n            return sdp;\n        }\n\n        if (sdp.indexOf(rtpmapString) !== -1) {\n            return sdp;\n        }\n\n        sdp = sdp.split(constants.SDP.M_LINE + constants.STRING.VIDEO);\n\n        sdp[0] = sdp[0] + rtpmapString + lf + nl;\n\n        if (sdp[1]) {\n            sdp = sdp[0] + constants.SDP.M_LINE + constants.STRING.VIDEO + sdp[1];\n        } else {\n            sdp = sdp[0];\n        }\n\n        return sdp;\n    }\n\n    /*\n     *  This is only required for Firefox Native webrtc.\n     *  If PCMU exists in codec list but its rtpmap is missing in sdp,\n     *  firefox native webrtc does not collect ice canditates.\n     *  Scenario: C2C when FF is originating client\n     *            (Broker without Transcoder config)\n     */\n    this.addRtpmapForPCMU = function(sdp) {\n        return addRtpmapForCodec(sdp, '0', 'a=rtpmap:0 PCMU/8000');\n    };\n\n    /*\n     *  This is only required for Firefox Native webrtc.\n     *  If PCMA exists in codec list but its rtpmap is missing in sdp,\n     *  firefox native webrtc does not collect ice canditates.\n     *  Scenario: C2C when FF is originating client\n     *            (Broker without Transcoder config)\n     */\n    this.addRtpmapForPCMA = function(sdp) {\n        return addRtpmapForCodec(sdp, '8', 'a=rtpmap:8 PCMA/8000');\n    };\n\n    /*\n     * This is only required for Firefox Native webRTC.\n     * Firefox native adds curly brackets to msid and cname properties(maybe more)\n     * This leads to problem in multi - peer to peer configurated lab.\n     * TODO : Unit test cases should be written\n     */\n    this.deleteCurlyBracketsSDP = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        logger.debug('Deleting curly brackets from sdp');\n        sdp = sdp.replace(/(\\{|\\})/g, '');\n        return sdp;\n    };\n\n    /*\n     * If inactive video m-line has bandwith attribute in SDP(occurs in Chrome to PCC call),\n     * Chrome's webRTC Engine rejects it\n     * This workaround removes the b:AS line\n     * TODO : Unit test cases should be written\n     */\n    this.deleteBandwidthLineFromSdp = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n\n        if (this.isVideoSdpDirectionInactive(sdp)) {\n            logger.debug('Deleting b:AS line from SDP');\n            sdp = sdp.replace(/(b=AS:[\\w\\W]*?(:\\r|\\n))/g, '');\n        }\n        return sdp;\n    };\n    /*\n     * Firefox 38.0.1 does not accept uppercase opus codec and cause basic call problem with GCFIOS.\n     * The following is a workaround for this problem.\n     * Feel free to remove it when Firefox 38.0.1 is updated to 38.0.5.\n     */\n    this.setOpusCodecToLowerCase = function(sdp) {\n        if (sdp === null || sdp === undefined) {\n            return sdp;\n        }\n        logger.debug('Setting OPUS codec to lower case');\n        return sdp.replace('OPUS', 'opus');\n    };\n\n    /*\n     * Replaces audio m line of codec\n     * @sdp Sdp to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceAudioMlineOfCodec = function(sdp, prevValue, newValue) {\n        if (this.isSdpHasAudio(sdp)) {\n            sdp = this.replaceMlineOfCodec(sdp, constants.STRING.AUDIO, prevValue, newValue);\n        }\n        return sdp;\n    };\n\n    /*\n     * Replaces video m line of codec\n     * @sdp Sdp to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceVideoMlineOfCodec = function(sdp, prevValue, newValue) {\n        if (this.isSdpHasVideo(sdp)) {\n            sdp = this.replaceMlineOfCodec(sdp, constants.STRING.VIDEO, prevValue, newValue);\n        }\n        return sdp;\n    };\n\n    /*\n     * Replaces m line of codec\n     * @sdp Sdp to be processed\n     * @option m line to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceMlineOfCodec = function(sdp, option, prevValue, newValue) {\n        var prevMline, newMline = '',\n            mLineRegex, index;\n        mLineRegex = new RegExp('m=' + option + ' [\\\\w\\\\W]*?(\\\\r|\\\\n)', 'g');\n        prevMline = sdp.match(mLineRegex);\n        prevMline = prevMline[0].split(' ');\n        for (index = 0; index < prevMline.length; index++) {\n            // index[1] is actual port and we should not change it.\n            if ((index !== 1) && prevMline[index] && (prevMline[index].indexOf(prevValue) !== -1)) {\n                prevMline[index] = prevMline[index].replace(prevValue, newValue);\n            }\n            // This if check is necessary in order not to put an space at the end of m line\n            if (index === (prevMline.length - 1)) {\n                newMline += prevMline[index];\n            } else {\n                newMline += prevMline[index] + ' ';\n            }\n        }\n        return sdp.replace(mLineRegex, newMline);\n    };\n\n    /*\n     * Replaces RTPMap of codec\n     * @sdp Sdp to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceRTPMapOfCodec = function(sdp, prevValue, newValue) {\n        var regex = new RegExp('a=rtpmap:' + prevValue, 'g');\n        return sdp.replace(regex, 'a=rtpmap:' + newValue);\n    };\n\n    /*\n     * Replaces RTCP of codec\n     * @sdp Sdp to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceRTCPOfCodec = function(sdp, prevValue, newValue) {\n        var regex = new RegExp('a=rtcp-fb:' + prevValue, 'g');\n        return sdp.replace(regex, 'a=rtcp-fb:' + newValue);\n    };\n\n    /*\n     * Replaces FMTP of codec\n     * @sdp Sdp to be processed\n     * @prevValue previous telephony event value\n     * @newValue new telephony event value\n     * @returns processed SDP\n     */\n    this.replaceFMTPOfCodec = function(sdp, prevValue, newValue) {\n        var regex = new RegExp('a=fmtp:' + prevValue, 'g');\n        return sdp.replace(regex, 'a=fmtp:' + newValue);\n    };\n\n    /*\n     * Replaces the codec with new value\n     * @sdp Sdp to be processed\n     * @codec Codec to be replaced\n     * @newValue new value of codec\n     */\n    this.replaceCodecValue = function(sdp, codec, newValue) {\n        var payloadType, prevValue;\n        payloadType = this.getPayloadTypeOf(codec, sdp);\n        if (payloadType) {\n            // If multiple payload types returned, change first of them\n            if (Array.isArray(payloadType)) {\n                prevValue = payloadType[0];\n            } else {\n                prevValue = payloadType;\n            }\n            // Since we don't know which m-line contains this codec, we apply in both m-lines\n            // If an m line does not have this codec, then it will simply return the sdp itself\n            sdp = this.replaceAudioMlineOfCodec(sdp, prevValue, newValue);\n            sdp = this.replaceVideoMlineOfCodec(sdp, prevValue, newValue);\n            sdp = this.replaceRTPMapOfCodec(sdp, prevValue, newValue);\n            sdp = this.replaceRTCPOfCodec(sdp, prevValue, newValue);\n            sdp = this.replaceFMTPOfCodec(sdp, prevValue, newValue);\n        }\n        return sdp;\n    };\n\n    /*\n     * Replaces codecs\n     * @sdp Sdp to be used\n     * @codecMap codecMap to be replaced\n     * @returns processed SDP\n     */\n    this.replaceCodecs = function(sdp, codecMap) {\n        var index;\n        if (codecMap && codecMap.length) {\n            for (index = 0; index < codecMap.length; index++) {\n                sdp = this.replaceCodecValue(sdp, codecMap[index].name, codecMap[index].value);\n            }\n        }\n        return sdp;\n    };\n\n    /*\n     * Removes H264 codec from SDP\n     * @sdp Sdp to be used\n     * @returns processed SDP\n     */\n    this.removeH264Codec = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n        logger.debug('Removing H264 codec from SDP');\n        var h264PayloadType, index;\n\n        if (pSdp.indexOf('H264/90000') === -1) {\n            return pSdp;\n        }\n\n        h264PayloadType = this.getH264PayloadType(pSdp);\n\n        if (h264PayloadType !== -1) {\n            for (index = 0; index < h264PayloadType.length; index++) {\n                logger.debug('removeH264Codec : Removing H264/90000 video codec ' + h264PayloadType[index]);\n                pSdp = this.removeVideoCodec(pSdp, h264PayloadType[index]);\n            }\n        }\n        return pSdp;\n    };\n\n    this.hasZeroConnectionIP = function(pSdp) {\n        if (pSdp === null || pSdp === undefined) {\n            return false;\n        }\n        if (pSdp.indexOf('c=IN IP4 0.0.0.0') !== -1) {\n            return true;\n        }\n        return false;\n    };\n\n    this.findZeroConnectionIPandModify = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, type;\n\n        logger.debug('findZeroConnectionIPandModify received SDP: ' + pSdp);\n        if (pSdp === null || pSdp === undefined) {\n            return pSdp;\n        }\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (this.isSdpHasVideo(substr)) {\n                type = constants.STRING.VIDEO;\n            } else {\n                type = constants.STRING.AUDIO;\n            }\n            if (this.hasZeroConnectionIP(substr) && this.getSdpDirection(pSdp, type) !== constants.WEBRTC.MEDIA_STATE.INACTIVE) {\n                substr = substr.replace('c=IN IP4 0.0.0.0', 'c=IN IP4 1.1.1.1');\n            }\n            sdp = sdp + substr;\n        }\n        logger.debug('findZeroConnectionIPandModify updated SDP: ' + sdp);\n        return sdp;\n    };\n\n    // this is needed to check\n    // if telephone-event payload changed\n    // fixed scenario: meetme is sending a different TE payload after call setup\n    this.hasCodecPayloadChanged = function(oldSdp, newSdp) {\n        if (!oldSdp || !newSdp) {\n            return false;\n        }\n\n        if (!this.isSdpHasTelephoneEvent(oldSdp) || !this.isSdpHasTelephoneEvent(newSdp)) {\n            return false;\n        }\n\n        var oldTEPayloadCodec = this.getPayloadTypeOf('telephone-event/8000', oldSdp),\n            newTEPayloadCodec = this.getPayloadTypeOf('telephone-event/8000', newSdp);\n\n        return oldTEPayloadCodec !== newTEPayloadCodec;\n    };\n\n    this.isVideoHasSsrc = function(sdp) {\n        var mLineRegex = new RegExp('m=[\\\\w\\\\W]*?(?=(m=|$))', 'g'),\n            mLines, videoLine, i;\n\n        if (!sdp) {\n            return false;\n        }\n\n        mLines = sdp.match(mLineRegex);\n        for (i = 0; i < mLines.length; i++) {\n            if (this.isSdpHasVideo(mLines[i])) {\n                videoLine = mLines[i];\n                break;\n            }\n        }\n\n        if (!videoLine) {\n            return false;\n        }\n\n        if (videoLine.indexOf('ssrc') !== -1) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /*\n     * Checks and replaces APT value. Remove after Chrome 51 release.\n     * @sdp Sdp to be processed\n     * @option m line to be processed\n     * @returns processed SDP\n     */\n    this.checkandReplaceAPTValue = function(pSdp) {\n        var sdp = '',\n            substr = '',\n            descriptions = [],\n            index, reg = /\\r\\n|\\r|\\n/m,\n            substr_arr, i, new_substr = '',\n            elm, option, numOfAPT, APTIndex = 0,\n            mLineRegex, sdpMline, splitArray, APTValue;\n\n        descriptions = pSdp.split(/^(?=m=)/m);\n        for (index = 0; index < descriptions.length; index++) {\n            substr = descriptions[index];\n            if (substr.indexOf('apt=') !== -1) {\n                if (this.isSdpHasAudio(substr)) {\n                    option = 'audio';\n                } else if (this.isSdpHasVideo(substr)) {\n                    option = 'video';\n                }\n                numOfAPT = substr.split('apt=').length - 1;\n                mLineRegex = new RegExp('m=' + option + ' [\\\\w\\\\W]*?(\\\\r|\\\\n)', 'g');\n                sdpMline = pSdp.match(mLineRegex);\n                sdpMline = sdpMline[0].split(' ');\n\n                substr_arr = substr.split(reg);\n                for (i = 0; i < substr_arr.length; i++) {\n                    elm = substr_arr[i];\n                    if (elm && elm.indexOf('apt=') !== -1) {\n                        APTIndex++;\n                        splitArray = elm.split('apt=');\n                        APTValue = splitArray[1];\n\n                        for (index = 0; index < sdpMline.length; index++) {\n                            // index[1] is actual port and we should not check it.\n                            if ((index !== 1) && sdpMline[index] && (sdpMline[index].indexOf(APTValue) !== -1)) {\n                                // APT value is found in codec list. Return the original SDP.\n                                return pSdp;\n                            }\n                        }\n                        if (APTIndex === numOfAPT) {\n                            elm = elm.replace('apt=' + APTValue, 'apt=' + sdpMline[3] + lf + nl);\n                        }\n                    } else if (elm && elm !== '') {\n                        elm = elm + lf + nl;\n                    }\n                    new_substr = new_substr + elm;\n                }\n                substr = new_substr;\n            }\n            sdp = sdp + substr;\n        }\n        return sdp;\n    };\n\n    /*\n     * Checks if trickle is enabled in sdp\n     * @sdp Sdp to be inspected\n     * @returns trickle status\n     */\n    this.isSdpHasTrickle = function (sdp){\n\n        if (!sdp) {\n            return false;\n        }\n\n        if (sdp.indexOf('a=ice-options:trickle') !== -1) {\n            return true;\n        }\n\n        return false;\n\n    };\n\n    /*\n     * Checks and sets trickle option in sdp\n     * @sdp Sdp to be processed\n     * @addTrickle Whether the trickle ICE option should be added or removed.\n     * @returns processed SDP\n     */\n    this.setTrickleOption = function (sdp, addTrickle){\n        logger.debug('Setting trickle ICE option?: ' + !!addTrickle);\n\n        if(!sdp) {\n            // No SDP was provided.\n            return sdp;\n\n        } else if(addTrickle) {\n            // Option should be added.\n            if(this.isSdpHasTrickle(sdp)) {\n                return sdp;\n            } else {\n                logger.debug('Adding trickle ICE option to SDP.');\n                var descriptions = sdp.split(/^(?=m=)/m);\n                // descriptions will be ['v=0 s=123...', 'm=audio 9 ...'] or\n                // it will be ['v=0 s=123...', 'm=audio 9 ...', 'm=video 9 ...'] if video is enabled\n                // add trickle option before media descriptions into the session description\n                return descriptions[0] + 'a=ice-options:trickle' + lf + nl + descriptions.slice(1).join('');\n            }\n\n        } else {\n            // Option should be removed.\n            if(this.isSdpHasTrickle(sdp)) {\n                logger.debug('Removing trickle ICE option from SDP.');\n                return sdp.replace(/a=ice-options:trickle\\r\\n/g, '');\n            } else {\n                return sdp;\n            }\n        }\n    };\n\n    /*\n     * Compare the SDP from the current stable remote sdp, with the newly sdp received\n     * @sdp1 the call stable remote sdp\n     * @sdp2 the new sdp that was received\n     * @returns true if the SDP didn't change except for the sendrecv and the session id\n     */\n    this.compareSDPForEarlyMedia = function(sdp1, sdp2) {\n        var lineIndex = 0, originalLines = sdp1.split('\\n'), newLines = sdp2.split('\\n');\n\n        for (lineIndex; lineIndex < originalLines.length; lineIndex++) {\n            if(originalLines[lineIndex].indexOf('o=') === -1){\n                if(sdp2.indexOf(originalLines[lineIndex]) === -1){\n                    return false;\n                }\n            }\n        }\n        lineIndex = 0;\n        for (lineIndex; lineIndex < newLines.length; lineIndex++) {\n            if(newLines[lineIndex].indexOf('o=') === -1){\n                if(sdp1.indexOf(newLines[lineIndex]) === -1 && newLines[lineIndex].trim() !== 'a=sendrecv'){\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n\n    this.isRemoteEndFirefox = function(sdp) {\n        if (!sdp) {\n            return false;\n        }\n        return sdp.indexOf('SDPARTA') !== -1;\n    };\n}\n","import once from 'lodash/once';\nimport Promise from 'promiscuous';\nimport {always} from './utils';\n\n\nexport function ChallengeManagerFactory() {\n    const challengeManager = {};\n\n    /*\n     * Set the challenge handler which is a function that will receive challenges.\n     * @param {Function} handler A function which will receive authentication challenges.\n     * @param {Function} handler.retry A function which once called, will give resume the execution queue where it left\n     *                                 off before the challenge using the answer to the challenge.\n     * @param {any}      handler.retry.answer The challenge answer to pass to the retry function that will resolve the challenge.\n     * @param {Function} handler.cancel A function which once called with resume the execution where it left of but will\n     *                                  let it down the error path since the challenge was not answered.\n     */\n    challengeManager.setChallengeHandler = function(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Challenge handler is not a function.');\n        }\n        challengeManager.challengeHandler = handler;\n    };\n\n    /*\n     * Sets an answer handler to give a chance for the anybody using challenges to get notified whenever\n     * a challenge gets answered. This allows to store the challenge answer by the app.\n     *\n     * @param {Function} handler Answer handler which will be called whenever a challenge is answered.\n     * @param {any}      handler.answer The answer to the challenge.\n     */\n    challengeManager.setAnswerHandler = function(handler) {\n        if (typeof handler !== 'function') {\n            throw new TypeError('Challenge handler is not a function.');\n        }\n        challengeManager.challengeAnswerHandler = handler;\n    };\n\n    /*\n     * Starts a challenge to the application. A challenge can be anything that the application needs to provide\n     * for execution to continue. A challenge creates a promise for an answer. At which point it is up\n     * to the challenger to interpret the result of the challenge.\n     *\n     * @return {Promise} A promise for an answer to the challenge. The promise will reject if the challenge is\n     *                   canceled by the application.\n     */\n    challengeManager.challenge = function() {\n        if (challengeManager.challengeSuspensions > 0) {\n            return new Promise.reject();\n        }\n\n        // If we don't already have a challenge to the application in progress, create one.\n        if (!challengeManager.currentChallenge) {\n            challengeManager.currentChallenge = always(new Promise((resolve, reject) => {\n                if (challengeManager.challengeHandler) {\n                    var retry = once(function(params) {\n\n                        if (challengeManager.challengeAnswerHandler) {\n                            challengeManager.challengeAnswerHandler(params);\n                        }\n\n                        // Resolve the challenge and allow continuation of paused requests.\n                        resolve(params);\n                    });\n\n                    var cancel = once(function() {\n                        // Reject the challenge\n                        reject();\n                    });\n\n                    challengeManager.challengeHandler(retry, cancel);\n                } else {\n                    reject();\n                }\n            }), () => challengeManager.currentChallenge = undefined);\n        }\n\n        return challengeManager.currentChallenge;\n    };\n\n\n    /*\n     * Temporarily suspend any challenges.\n     * @param  {Promise} waitOn Promise on which to wait for being settled before resuming challenges\n     * @return {Promise}        Continuation of the original promise which will resolve once the challenges\n     *                          have been resumed.\n     */\n    challengeManager.suspendChallenges = function(waitOn) {\n        challengeManager.challengeSuspensions++;\n        return always(waitOn, () => challengeManager.challengeSuspensions -= 1);\n    };\n\n    challengeManager.challengeSuspensions = 0;\n\n    return challengeManager;\n}\n","var before = require('./before');\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nmodule.exports = once;\n","var toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nmodule.exports = before;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","/**@license MIT-promiscuous-Ruben Verborgh*/\n(function (func, obj) {\n  // Type checking utility function\n  function is(type, item) { return (typeof item)[0] == type; }\n\n  // Creates a promise, calling callback(resolve, reject), ignoring other parameters.\n  function Promise(callback, handler) {\n    // The `handler` variable points to the function that will\n    // 1) handle a .then(resolved, rejected) call\n    // 2) handle a resolve or reject call (if the first argument === `is`)\n    // Before 2), `handler` holds a queue of callbacks.\n    // After 2), `handler` is a finalized .then handler.\n    handler = function pendingHandler(resolved, rejected, value, queue, then, i) {\n      queue = pendingHandler.q;\n\n      // Case 1) handle a .then(resolved, rejected) call\n      if (resolved != is) {\n        return Promise(function (resolve, reject) {\n          queue.push({ p: this, r: resolve, j: reject, 1: resolved, 0: rejected });\n        });\n      }\n\n      // Case 2) handle a resolve or reject call\n      // (`resolved` === `is` acts as a sentinel)\n      // The actual function signature is\n      // .re[ject|solve](<is>, success, value)\n\n      // Check if the value is a promise and try to obtain its `then` method\n      if (value && (is(func, value) | is(obj, value))) {\n        try { then = value.then; }\n        catch (reason) { rejected = 0; value = reason; }\n      }\n      // If the value is a promise, take over its state\n      if (is(func, then)) {\n        try { then.call(value, transferState(1), rejected = transferState(0)); }\n        catch (reason) { rejected(reason); }\n      }\n      // The value is not a promise; handle resolve/reject\n      else {\n        // Replace this handler with a finalized resolved/rejected handler\n        handler = function (Resolved, Rejected) {\n          // If the Resolved or Rejected parameter is not a function,\n          // return the original promise (now stored in the `callback` variable)\n          if (!is(func, (Resolved = rejected ? Resolved : Rejected)))\n            return callback;\n          // Otherwise, return a finalized promise, transforming the value with the function\n          return Promise(function (resolve, reject) { finalize(this, resolve, reject, value, Resolved); });\n        };\n        // Resolve/reject pending callbacks\n        i = 0;\n        while (i < queue.length) {\n          then = queue[i++];\n          // If no callback, just resolve/reject the promise\n          if (!is(func, resolved = then[rejected]))\n            (rejected ? then.r : then.j)(value);\n          // Otherwise, resolve/reject the promise with the result of the callback\n          else\n            finalize(then.p, then.r, then.j, value, resolved);\n        }\n      }\n      // Returns a function that transfers the state of the promise\n      function transferState(resolved) {\n        return function (value) { then && (then = 0, pendingHandler(is, resolved, value)); };\n      }\n    };\n    // The queue of pending callbacks; garbage-collected when handler is resolved/rejected\n    handler.q = [];\n\n    // Create and return the promise (reusing the callback variable)\n    callback.call(callback = { then:    function (resolved, rejected) { return handler(resolved, rejected); },\n                               \"catch\": function (rejected)           { return handler(0,        rejected); } },\n                  function (value)  { handler(is, 1,  value); },\n                  function (reason) { handler(is, 0, reason); });\n    return callback;\n  }\n\n  // Finalizes the promise by resolving/rejecting it with the transformed value\n  function finalize(promise, resolve, reject, value, transform) {\n    setImmediate(function () {\n      try {\n        // Transform the value through and check whether it's a promise\n        value = transform(value);\n        transform = value && (is(obj, value) | is(func, value)) && value.then;\n        // Return the result if it's not a promise\n        if (!is(func, transform))\n          resolve(value);\n        // If it's a promise, make sure it's not circular\n        else if (value == promise)\n          reject(TypeError());\n        // Take over the promise's state\n        else\n          transform.call(value, resolve, reject);\n      }\n      catch (error) { reject(error); }\n    });\n  }\n\n  // Export the main module\n  module.exports = Promise;\n\n  // Creates a resolved promise\n  Promise.resolve = ResolvedPromise;\n  function ResolvedPromise(value) { return Promise(function (resolve) { resolve(value); }); }\n\n  // Creates a rejected promise\n  Promise.reject = function (reason) { return Promise(function (resolve, reject) { reject(reason); }); };\n\n  // Transforms an array of promises into a promise for an array\n  Promise.all = function (promises) {\n    return Promise(function (resolve, reject, count, values) {\n      // Array of collected values\n      values = [];\n      // Resolve immediately if there are no promises\n      count = promises.length || resolve(values);\n      // Transform all elements (`map` is shorter than `forEach`)\n      promises.map(function (promise, index) {\n        ResolvedPromise(promise).then(\n          // Store the value and resolve if it was the last\n          function (value) {\n            values[index] = value;\n            --count || resolve(values);\n          },\n          // Reject if one element fails\n          reject);\n      });\n    });\n  };\n\n  // Returns a promise that resolves or rejects as soon as one promise in the array does\n  Promise.race = function (promises) {\n    return Promise(function (resolve, reject) {\n      // Register to all promises in the array\n      promises.map(function (promise) {\n        ResolvedPromise(promise).then(resolve, reject);\n      });\n    });\n  };\n})('f', 'o');\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import constants from './constants';\nimport errors from './errors';\n\n/**\n * @name fcs\n * @namespace\n * @param _server\n * @param _globalBroadcaster\n */\nexport function CoreImpl({\n    GlobalBroadcaster: _globalBroadcaster,\n    Config: _config,\n}) {\n\n    var dev = null,\n        pluginVer = null,\n        services = {},\n        un = null,\n        tkn = null,\n        authorizationName = null,\n        connected = true,\n        tokenRealm = null,\n        kandyUAT = null,\n        DEFAULT_SUBSCRIPTION_EXPIRY_VALUE = 3600,\n        MIN_SUBSCRIPTION_EXPIRY_VALUE = 60;\n\n\n    /**\n     * This function creates a new instance of the library. This allows multiple users to be logged in an using\n     * the library at the same time.\n     *\n     * @name fcs#createInstance\n     * @function\n     * @returns {fcs}\n     *\n     * @example\n     * var fcs2 = fcs.createInstance();\n     * fcs2.setup(...);\n     * fcs2.call.startCall(...);\n     */\n\n    /**\n     * This function returns value of async paramater of $.ajax requests\n     *\n     * @name fcs#isAsync\n     * @function\n     * @returns {Boolean} true/false\n     * @deprecated\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.isAsync();\n     */\n    this.isAsync = function() {\n    };\n\n    /**\n     * This function sets async option of $.ajax() requests.\n     * If It is set to false, ajax requests will be sent synchronously\n     * otherwise ajax requests will be sent asynchronously.\n     *\n     * @name fcs#setAsync\n     * @function\n     * @param {Boolean} value\n     * @return {Boolean} true/false\n     * @deprecated\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.setAsync(false);\n     */\n    this.setAsync = function() {\n    };\n\n    /**\n     * This function returns username of authenticated user in user@domain format.\n     *\n     * @name fcs#getUser\n     * @function\n     * @returns {string} Username of current user\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.getUser();\n     */\n    this.getUser = function(){\n        return un;\n    };\n\n    /**\n     * This function returns authorization name of authenticated user\n     *\n     * @name fcs#getAuthUser\n     * @function\n     * @returns {String} Authorization name of current user\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.getAuthUser();\n     */\n    this.getAuthUser = function() {\n        if (authorizationName) {\n            return authorizationName;\n        } else {\n            return un;\n        }\n    };\n\n    /**\n     * This function returns current domain name of authenticated user\n     *\n     * @name fcs#getDomain\n     * @function\n     * @returns {string} Current domain name\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.getDomain();\n     */\n    this.getDomain = function() {\n        return un.split('@')[1];\n    };\n\n    /**\n     * This function returns the version of the JSL-API\n     *\n     * @name fcs#getVersion\n     * @function\n     * @returns {string} Version of the JSL-API\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.getVersion();\n     */\n    this.getVersion = function() {\n        return '@{spidr.jsl.version}';\n    };\n\n    /**\n     * This fucntion returns current device.\n     *\n     * @name fcs#getDevice\n     * @function\n     * @returns {string} Device specified for communicating with the server\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.getDevice();\n     */\n    this.getDevice = function() {\n        return dev;\n    };\n\n    /**\n     * This function sets the user as authentication mode and cancels device authentication (if such exists),\n     * as user and device modes are mutually exclusive.\n     * authname parameter is optional.\n     *\n     * @name fcs#setUserAuth\n     * @function\n     * @param {string} user User name to be used for communicating with the server\n     * @param {string} password Password to be used for communicating with the server\n     * @param {string} authname If provided authname is used instead of user name for authentication\n     *\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.setUserAuth(\"Username\", \"Password\",\"Authname\");\n     */\n    this.setUserAuth = function(user, password, authname) {\n        un = user;\n        dev = null;\n        var data = {\n            'username': user,\n            'password': password\n        };\n        if ((typeof authname === 'string') && (authname.trim().length > 0)) {\n            data.authname = authname;\n            authorizationName = authname;\n        } else {\n            authorizationName = null;\n        }\n        _globalBroadcaster.publish(constants.EVENT.BASIC_AUTH_STARTED, data);\n    };\n\n    /**\n     * This function sets the user as token mode authentication and cancels user authentication or/and device authentication (if such exists),\n     * token authentication has priority over other authentications\n     *\n     * @name fcs#setTokenAuth\n     * @function\n     * @param {string} user to be used for communicating with the server\n     * @param {string} token to be used for communicating with the server\n     *\n     * @since 3.0.0\n     *\n     * @example\n     * fcs.setTokenAuth(\"Username\", \"Token\");\n     */\n    this.setTokenAuth = function(user, token) {\n        un = user;\n        tkn = token;\n        _globalBroadcaster.publish(constants.EVENT.TOKEN_AUTH_STARTED, {\n            'username': user,\n            'token': token\n        });\n    };\n\n    this.getTokenAuth = function() {\n        return tkn;\n    };\n\n    /**\n     * This function sets the device as authentication mode and cancels user authentication (if such exists),\n     * as user and device modes are mutually exclusive.\n     *\n     * @name fcs#setDeviceAuth\n     * @function\n     * @since 3.0.0\n     * @param {string} deviceID The device to be used for communicating with the server\n     *\n     * @example\n     * fcs.setDeviceAuth(\"DeviceID\");\n     */\n    this.setDeviceAuth = function(deviceID) {\n        dev = deviceID;\n        un = null;\n    };\n\n    /**\n     * This function sets the authentication realm for time limited token authentication.\n     *\n     * @name fcs.setRealm\n     * @function\n     * @since 3.0.4\n     * @param {string} realm The realm for the time limited token auth\n     *\n     * @example\n     * fcs.setRealm(\"realmname\");\n     */\n    this.setRealm = function(realm) {\n        tokenRealm = realm;\n    };\n\n    /**\n     * This function gets the authentication realm for time limited token authentication.\n     *\n     * @name fcs.getRealm\n     * @function\n     * @since 3.0.4\n     * @returns {string} The realm for the time limited token auth\n     *\n     * @example\n     * var realm = fcs.getRealm();\n     */\n    this.getRealm = function() {\n        return tokenRealm;\n    };\n\n    /**\n     * This function sets the authentication UAT for kandy Authentication.\n     *\n     * @name fcs.setKandyUAT\n     * @function\n     * @since 3.0.4\n     * @param {string} uat The User Access Token\n     *\n     * @example\n     * fcs.setKandyUAT(\"uat\");\n     */\n    this.setKandyUAT = function(uat) {\n        kandyUAT = uat;\n    };\n\n    /**\n     * This function gets the authentication UAT for kandy Authentication.\n     *\n     * @name fcs.getKandyUAT\n     * @function\n     * @since 3.0.4\n     * @returns {string} The User Access Token\n     *\n     * @example\n     * var uat = fcs.getKandyUAT();\n     */\n    this.getKandyUAT = function() {\n        return kandyUAT;\n    };\n\n    /**\n     * List of Authentication Types.\n     * @see setDeviceAuth\n     * @see setUserAuth\n     * @name fcs#AuthenticationType\n     * @property {number} USER User authentication\n     * @property {number} DEVICE Device authentication\n     * @readonly\n     */\n    this.AuthenticationType = {\n        USER: 1,\n        DEVICE: 2\n    };\n\n    /**\n     * List of Error Types\n     *\n     * @name fcs#Errors\n     * @property {number} NETWORK Network failures\n     * @property {number} AUTH Authentication / Authorization failures\n     * @property {number} STATE Invalid state\n     * @property {number} PRIV Privilege failures\n     * @property {number} UNKNOWN Unknown failures\n     * @property {number} LOGIN_LIMIT Login limit exceeded\n     * @property {number} INCORRECT_LOGIN_PASS Incorrect identifier\n     * @property {number} INVALID_LOGIN Invalid username\n     * @property {number} TOKEN_NOT_FOUND Token provided is not valid\n     * @property {number} SESSION_EXPIRED Session generated from token is expired\n     * @property {number} VIDEO_SESSION_NOT_AVAILABLE Video Session is not available\n     * @property {number} PENDING_REQUEST There is a pending request.\n     * @property {number} NOT_ALLOWED_SERVICE Service is not allowed.\n     * @property {number} NOT_ALLOWED_METHOD Method is not allowed.\n     * @property {number} NOT_ALLOWED_INSTANCE Instance is not allowed.\n     * @property {number} INVALID_PARAMETER Parameter is invalid.\n     * @property {number} CONNECTION_ISSUE Connection problem.\n     * @property {number} MEDIA_NOT_FOUND Media not found error.\n     * @property {number} MEDIA_NOT_ALLOWED Media not allowed error.\n     * @property {number} CALL_FAILED Call failed.\n     * @property {number} CALL_ENDED Call ended.\n     * @property {number} MAXIMUM_ENTRIES Maximum entries error.\n     * @property {number} ENTRY_ALREADY_EXISTS Entry already exists error.\n     * @property {number} SERVICE_NOT_AUTHORIZED Service authorization error.\n     * @property {number} DB_EXCEPTION Database exception Error.\n     * @property {number} INSUFFICIENT_INFO Insufficient error.\n     * @property {number} NOT_FOUND Not Found error.\n     * @property {number} INTERNAL_SERVER_ERROR Internal server  error.\n     * @property {number} SERVICE_UNAVAILABLE Service unavaible error.\n     * @property {number} SESSION_NOT_FOUND The device's session was not found.\n     * @property {number} CANNOT_SUBSCRIBE Device cannot subscribe.\n     * @property {number} MEDIA_REQUIRED The call media to use was not specified.\n     *\n     * @readonly\n     * @example\n     * if (e === fcs.Errors.AUTH)\n     * {\n     *     console.log(\"Authentication error occured\")\n     * }\n     */\n    this.Errors = errors;\n\n    /**\n     * @typedef modifiedValues\n     * @type Object\n     * @property {number} url Modified url to replace xhr original url\n     * @property {object} headers Mofied headers object to replace original xhr headers\n     * @since 3.1.2\n     */\n\n    /**\n     * Ajax hook to intercept outgoing xhr request to modify url and headers\n     *\n     * @since 3.1.2\n     *\n     * @callback ajaxHook\n     * @param {Object} xhr XMLHttpRequest object\n     * @param {window} window window object\n     * @param {object} params object containing parameters\n     * @param {string} [params.type] The HTTP method to use, such as \"GET\", \"POST\", \"PUT\", \"DELETE\", etc\n     * @param {string} [params.url] The URL to send the request to\n     * @param {string} [params.headers] Request headers\n     * @param {string} [params.data] Request body\n     *\n     * @return {modifiedValues} object containing modified url and headers\n     *\n     */\n\n    /**\n     * Establishes bandwidth control functionalities based on provided audio codecs and values\n     * @typedef opusConfig\n     * @type Object\n     *\n     * @property {string} [maxPlaybackRate] value between 8000 and 48000\n     * @property {string} [maxAverageBitrate] value between 6000 and 510000\n     * @property {string} [fec] 0 or 1\n     * @property {string} [dtx] 0 or 1\n     * @property {string} [ptime] integer value between 2.5 and 120\n     *\n     * @example\n     *\n     * opusConfig: {\n     *      maxPlaybackRate: 16000,\n     *      maxAverageBitrate: 20000,\n     *      fec: 1,\n     *      dtx: 1,\n     *      ptime: 40\n     * }\n     */\n\n    /**\n     * Configures plugin mode (as 'webrtc' or 'auto') and h264 status as browser-specific with version restriction (for Chrome and Firefox) or as general default values.\n     * @typedef {Object} fcsSetupConfigParamsPluginMode\n\n     * @property {string} [mode=\"auto\"] General plugin mode. 'webrtc' for default webrtc plugin, 'auto' for the usage of native chrome and firefox or the usage of default webrtc plugin for the others.\n     * @property {boolean} [h264=true] General H264 codec status.\n     * @property {object} [chrome] Chrome-specific configurations\n     * @property {string} [chrome.mode] Chrome-specific plugin mode. Overrides the general one.\n     * @property {boolean} [chrome.h264] Chrome-specific H264 codec status. Overrides the general one.\n     * @property {string} [chrome.version] Version lowerbound for Chrome configurations. Ex: \"40+\". Includes all the versions if not given.\n     * @property {object} [firefox] Firefox-specific configurations\n     * @property {string} [firefox.mode] Firefox-specific plugin mode. Overrides the general one.\n     * @property {boolean} [firefox.h264] Firefox-specific H264 codec status. Overrides the general one.\n     * @property {string} [firefox.version] Version lowerbound for Firefox configurations. Ex: \"40+\". Includes all the versions if not given.\n     *\n     * @example\n     *\n     * pluginMode: {\n     *     mode: 'webrtc',\n     *     h264: true,\n     *     chrome: {\n     *         mode: 'auto'\n     *     },firefox: {\n     *         version: '38+',\n     *         mode: 'auto'\n     *     }\n     * }\n     */\n\n    /**\n     * Array of servers to be tried to for notification subscription.\n     * @typedef {Object[]} fcsSetupConfigParamsServers\n     *\n     * @property {string} [protocol=window.location.protocol] HTTP protocol to be used. Ex: Http, Https\n     * @property {string} [restUrl=window.location.hostname] The URL of REST server http://ip:port.\n     * @property {string} [restPort=window.location.port] The port of REST server http://ip:port.\n     * @property {string} [websocketProtocol=ws] Determines if the websocketProtocol is secure or non-secure.\n     * @property {string} [websocketIP=window.location.hostname] Holds the websocket connection's IP adress.\n     * @property {string} [websocketPort=8581] Holds the websocket connection's port value. By defult, it is 8581.\n     *\n     * @example\n     * \"servers\": [{\n     *     \"protocol\": \"https\",\n     *     \"restUrl\": \"spidrdomain.com\",\n     *     \"restPort\": \"443\",\n     *     \"websocketProtocol\": \"wss\",\n     *     \"websocketIP\": \"spidrdomain.com\",\n     *     \"websocketPort\": \"443\"\n     * }],\n     */\n\n    /**\n     * A handler function that is given a chance to make modificaitons to a given SDP before and/or after a local and/or remote description is set.\n     *\n     * @callback sdpHandler\n     * @param {Object} params The object of parameters for the function.\n     * @param {Object} params.currentSdp The current SDP provided by the last handler which may be modified from the original SDP. You can check if currentSdp has been modified by comparing it against originalSdp for referential equality. You cannot modify this object.\n     * @param {Object} params.originalSdp The original SDP provided to the pipeline of handlers. You cannot modify this object.\n     * @param {string} params.operation The call operation being done that requires the SDP. Values are in fcs.SDP_CONSTANTS.OPERATION.\n     * @param {string} params.step The step at which the pipeline is being called. Values are in fcs.SDP_CONSTANTS.STEP.\n     * @param {string} params.type The type of sdp. Values are in fcs.SDP_CONSTANTS.TYPE.\n     * @param {string} params.callId The Id of the call this Sdp is for. It may be undefined if this is a start call operation since it will not have an Id yet.\n     * @param {function} params.next Handlers should return the value of calling `next` with the modified SDP as its only parameter. If no modifications are made, the handler should return the value of calling next with `currentSdp`. Not calling `next` will force the pipeline to ignore the rest of the handlers.\n     * @example\n     * ``` javascript\n     * function forceH264({next, currentSDP, originalSDP, operation, step, type, callId}) {\n     *     const nextSDP = Object.assign({}, currentSDP, {propertyName: 'value'});\n     *\n     *     return next(nextSDP);\n     *\n     *     // or, if you want to end the pipeline\n     *     return nextSDP;\n     * }\n     * ```\n     */\n\n    /**\n     * JSL library setup\n     * @typedef {Object} fcsSetupConfigParams\n     * @property {string} [notificationType=LONGPOLLING] The notification type to be used {@link fcs.notification#NotificationTypes}\n     * @property {string} [serverRetryNumber=5] Server retry number is used when websocket failure. The current websocket will be tried for the given parameter (Between 0 and 10)\n     * @property {string} [serverRetryInterval] Server retry time interval is the current failed websocket retry interval. Default value is 5000. (Between 1000 and 10000)\n     * @property {Object[]} [servers=[]] servers config {@link fcsSetupConfigParamsServers}.\n     * @property {string} [restUrl] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [restPort] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [websocketProtocol] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [websocketIP] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [websocketPort] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [protocol] Deprecated. please use {@link fcsSetupConfigParamsServers}\n     * @property {string} [polling=30] Polling time value in seconds.\n     * @property {number} [expires=3600] Expire time value in seconds.Default value is 3600.(60  and bigger than 60 ).\n     * @property {string} [codecsToRemove] Audio codesc to be removed.\n     * @property {string} [codecsToRemoveForVideo] Video codesc to be removed.\n     * @property {Object} [opusConfig] Bandwidth controls to add for Opus audio codec\n     * @property {string} [callAuditTimer=30000] Audit time value for calls.\n     * @property {boolean} [cors=false] True if Cross-Origin Request Sharing supported.\n     * @property {string} [services=\"IM, Presence, Call\"] Defines the enabled services for client.\n     * @property {boolean} [serverProvidedTurnCredentials=false] Provide TURN server credentials from server or not.\n     * @property {number} [iceCandidateCollectionTimeoutInterval=3000] When provided (in milliseconds), ice candidate collection assumed to be completed if at least one candidate is received within the interval.\n     * @property {number} [relayCandidateCollectionTimeoutCycle] When provided, iceCandidateCollectionTimeoutInterval is restarted until receiving first relay candidate. if the provided cycle limit is reached, ice candidate collection assumed to be completed.\n     * @property {boolean} [useRelayOnly] Forces the ICE Agent to only use relay candidate by setting the iceTransportPolicy to relay\n     * @property {Object} [pluginMode] plugin mode config {@link fcsSetupConfigParamsPluginMode}.\n     * @property {string} [connectivityInterval=10000] Connectivity check interval time value. If it is 0 connectivity check is diabled. Recommended to use values greater than 10000, due to performance issues.\n     * @property {string} [connectivityLostRetry=false] Connectivity check will retry when the connectivity fails until it succeed on the following default patern 10s, 20s, 40s, 80s, ... 640s, 640s, ...\n     * @property {string} [connectivityRetryStart=10000] Initial time (ms) after the connectity is retried.\n     * @property {string} [connectivityRetryLimit=640000] Maximum time (ms) between retries.\n     * @property {string} [connectivityRetryMultiplier=2] Multiplier that will be applied for the next retry.\n     * @property {string} [websocketInterval=10000] Websocket health check interval. If the websocketInterval parameter value is 0, websocket health check will be disabled.\n     * @property {string} [backgroundWebsocketInterval=60000] Websocket health check interval for mobile when the device is running in the background.\n     * @property {string} [pluginLogLevel=\"2\"] The log level of webrtc plugin\n     * @property {string} [staggeredTimerMin=\"300\"] Minimum value for staggered timer. (Timer used to prevent all devices to reconnect at the same time)\n     * @property {string} [staggeredTimerMax=\"5000\"] Maximum value for staggered timer.\n     * @property {string} [videoContainer] html node in which to inject the video\n     * @property {string} [remoteVideoContainer] html node in which to inject the remote video\n     * @property {string} [localVideoContainer] html node in which to inject the preview of the user camera\n     * @property {string} [iceserver=\"\"] ice server ip address\n     * @property {boolean} [webrtcdtls=false] webrtc dtls status\n     * @property {boolean} [recordCallStats=false] When enabled, call statistics are recorded in app's localstorage after the call is terminated.\n     * @property {boolean} [dscpEnabled=false] Enabled experimental DSCP markings on supported platforms (Chrome only).\n     * @property {string} [language=\"en\"] language setting of the plugin\n     * @property {ajaxHook} [ajaxHook] ajax hook to intercept outgoing xhr request to modify url and headers\n     * @property {boolean} [callReplace=false] When enabled, inform Spidr that replaceCall is supported\n     * @property {boolean} [ringingFeedback=false] When enabled, inform Spidr that RingingFeedback is supported\n     * @property {boolean} [trickleIceSupport=\"none\"] Specifies trickle ice support. \"none\" is default value and trickle ice isn't supported. \"half\" means half trickle is supported. \"full\" means full trickle is supported.\n     * @property {string} [cachePrefix=\"\"] Allows the user to specify a unique prefix for keys stored in localStorage.\n     * @property {boolean} [forceDisableMediaOnHold=false] Disables any type of media (e.g. Comfort Noise) from transmitting when call is held locally.\n     * @property {boolean} [videoInactiveOnHold=false] Sets the video as \"inactive\" instead of \"sendonly\" when holding a call.\n     * @property {boolean} [performVideoStartWorkaround=false] Enable the video start workaround for Chrome < 63, now disabled by default.\n     * @property {sdpHandler[]} [sdpHandlers=[]] The array of handlers for SDP manipulations.\n     * @property {string} [bundlePolicy=DISABLED] The bundle policy to use for peer connections. Value can be fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_COMPAT, fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_BUNDLE,  fcs.SDP_CONSTANTS.BUNDLE_POLICY.BALANCED or fcs.SDP_CONSTANTS.BUNDLE_POLICY.DISABLED. The DISABLED option means that bundle group lines will be removed from every SDP.\n     * @property {Object} [callConstraints] Custom RTCPeerConnection constraints to use for calls. Will cause errors if malformed.\n     * @property {Object} [callConstraints.chrome] Custom constraints to be used on Google Chrome.\n     * @property {Object} [callConstraints.firefox] Custom constraints to be used on Mozilla Firefox.\n     * @property {Object} [callConstraints.plugin] Custom constraints to be used with the WebRTC Plugin.\n     * @property {boolean} [callResyncOnConnect=false] Resync all active call states upon connecting (requires Kandy Link 4.7.1+).\n     */\n\n    /**\n     * This function is used to set up JSL library\n     *\n     * @name fcs#setup\n     * @function\n     * @param {fcsSetupConfigParams} config configuration parameters\n     * @since 3.0.0\n     * @example\n     *\n     * fcs.setup(\n     *   {\n     *       notificationType: fcs.notification.NotificationTypes.WEBSOCKET,\n     *       \"servers\": [{\n     *           \"protocol\": \"https\",\n     *           \"restUrl\": \"spidrdomain.com\",\n     *           \"restPort\": \"443\",\n     *           \"websocketProtocol\": \"wss\",\n     *           \"websocketIP\": \"spidrdomain.com\",\n     *           \"websocketPort\": \"443\"\n     *       }],\n     *       callAuditTimer: 30000,\n     *       clientControlled : true,\n     *       pluginMode: {\n     *          mode: 'webrtc',\n     *          h264: true,\n     *          chrome: {\n     *              mode: 'auto'\n     *          },\n     *          firefox: {\n     *              version: '38+',\n     *              mode: 'auto'\n     *          }\n     *       },\n     *       connectivityInterval: '20000',\n     *       \"iceserver\": [{\n     *           \"urls\": \"turns:turn1.spidrdomain.com:443?transport=tcp\",\n     *           \"credential\": \"\"\n     *           }, {\n     *              \"urls\": \"turns:turn2.spidrdomain.com:443?transport=tcp\",\n     *              \"credential\": \"\"\n     *       }],\n     *       webrtcdtls: true,\n     *       recordCallStats: true,\n     *       videoContainer: document.getElementById(\"defaultVideoContainer\")\n     *   }\n     * );\n     *\n     * // example for multiple server\n     *\n     * fcs.setup(\n     *   {\n     *       notificationType: fcs.notification.NotificationTypes.WEBSOCKET_ONLY,\n     *       servers: [{protocol: 'http',\n     *                   restUrl: '1.1.1.1',\n     *                   restPort: '8580',\n     *                   websocketProtocol: 'ws',\n     *                   websocketIP: '1.1.1.1',\n     *                   websocketPort: '8578'},\n     *                  {protocol: 'http',\n     *                   restUrl: '1.1.1.1',\n     *                   restPort: '8580',\n     *                   websocketProtocol: 'ws',\n     *                   websocketIP: '1.1.1.1',\n     *                   websocketPort: '8581'}],\n     *      serverRetryNumber: '2',\n     *      serverRetryInterval: '3000',\n     *       pluginMode: {\n     *          mode: 'webrtc',\n     *          h264: true,\n     *          chrome: {\n     *              mode: 'auto'\n     *          },\n     *          firefox: {\n     *              version: '38+',\n     *              mode: 'auto'\n     *          }\n     *       },\n     *       connectivityInterval: '20000'\n     *       websocketInterval: '20000',\n     *       iceserver: [{\"urls\":\"stun:206.165.51.69:3478\"},\n     *                     {\"urls\":\"turn:206.165.51.69:3478\",\n     *                       \"credential\":\"dummyCredential\",\n     *                       \"password\":\"dummyPwd\"}]\n     *       webrtcdtls: true,\n     *       recordCallStats: true,\n     *       videoContainer: document.getElementById(\"defaultVideoContainer\")\n     *   }\n     * );\n     *\n     *\n     */\n    this.setup = function(configParams, delayInitMedia) {\n        delayInitMedia = delayInitMedia === undefined ? false : delayInitMedia;\n        var param, i, j, codecsToReplaceDefaultFound, paramFields;\n        for (param in configParams) {\n            if (configParams.hasOwnProperty(param)) {\n                if (param === 'codecsToReplace') {\n                    if (typeof _config[param] === 'undefined') {\n                        _config[param] = [];\n                    }\n                    for (i in configParams[param]) {\n                        if (configParams[param].hasOwnProperty(i)) {\n                            codecsToReplaceDefaultFound = false;\n                            for (j in _config[param]) {\n                                if (_config[param].hasOwnProperty(j) &&\n                                    _config[param][j].name === configParams[param][i].name) {\n                                    codecsToReplaceDefaultFound = true;\n                                    _config[param][j].value = configParams[param][i].value;\n                                }\n                            }\n\n                            if (!codecsToReplaceDefaultFound) {\n                                _config[param].push(configParams[param][i]);\n                            }\n                        }\n                    }\n                } else if (param === 'pluginMode') {\n                    paramFields = Object.keys(configParams[param]);\n                    for (i in paramFields) {\n                        if (paramFields.hasOwnProperty(i)) {\n                            _config[param][paramFields[i]] = configParams[param][paramFields[i]];\n                        }\n                    }\n                } else {\n                    _config[param] = configParams[param];\n                }\n            }\n        }\n\n        // This function checks the expiration date.\n        // It should not be a very small value.\n        // Otherwise, the api enters the loop.There is no upper limit.\n        var handleValidSubscriptionExpiryTimerValue = function(time) {\n            if (time && parseInt(time) >= MIN_SUBSCRIPTION_EXPIRY_VALUE) {\n                return time;\n            } else {\n                return DEFAULT_SUBSCRIPTION_EXPIRY_VALUE;\n            }\n        };\n\n        _config.trickleIceSupport = (Object.values(constants.TRICKLE).indexOf(_config.trickleIceSupport) !== -1) ? _config.trickleIceSupport : 'none';\n        _config.expires = handleValidSubscriptionExpiryTimerValue(configParams ? configParams.expires : undefined);\n        if (!delayInitMedia) {\n            _globalBroadcaster.publish(constants.EVENT.FCS_SETUP_COMPLETED, _config);\n        }\n    };\n\n    // This function can be used to set conenction info parameters into the config\n    this.setConnectionInfo = function (connectionParams) {\n        for (var param in connectionParams) {\n            if (connectionParams.hasOwnProperty(param)) {\n                _config[param] = connectionParams[param];\n            }\n        }\n    };\n\n    /**\n     * This is an object of constants for advanced use only. Use these constants in your SDP handlers. See fcs.setup() to see how to set SDP handlers.\n     *\n     * @name fcs#SDP_CONSTANTS\n     * @property {Object} SDP_CONSTANTS The object of constants for use in SDP handlers.\n     * @property {Object} SDP_CONSTANTS.TYPE The type of SDP.\n     * @property {string} SDP_CONSTANTS.TYPE.OFFER Offer sdp type.\n     * @property {string} SDP_CONSTANTS.TYPE.ANSWER Answer sdp type.\n     * @property {string} SDP_CONSTANTS.TYPE.PRANSWER Pranswer sdp type.\n     * @property {Object} SDP_CONSTANTS.OPERATION The operation for which the sdp will be used.\n     * @property {string} SDP_CONSTANTS.OPERATION.START_CALL A call start operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.ANSWER_CALL A call answer operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.HOLD A hold operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.UPDATE An update operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.REOFFER A reoffer operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.RESPOND A respond operation.\n     * @property {string} SDP_CONSTANTS.OPERATION.DATA_CHANNEL A data channel operation.\n     * @property {Object} SDP_CONSTANTS.STEP The step in the process that the SDP is at.\n     * @property {string} SDP_CONSTANTS.STEP.PRE_SET_LOCAL The local SDP is about to be set.\n     * @property {string} SDP_CONSTANTS.STEP.PRE_SET_REMOTE The remote SDP is about to be set.\n     * @property {string} SDP_CONSTANTS.STEP.PRE_SEND_LOCAL The local SDP is about to be sent to the other peer.\n     */\n    this.SDP_CONSTANTS = constants.WEBRTC.SDP;\n\n    /**\n     * Plugin required event will be fired in case that plug-in not found or version is outdated\n     *\n     * @name fcs#onPluginRequired\n     * @event\n     * @param {fcs.call#MediaErrors} event media initialization error\n     * @since 3.0.0\n     * @example\n     *\n     * fcs.onPluginRequired = function(error) {\n     *     switch (error) {\n     *         case fcs.call.MediaErrors.WRONG_VERSION:\n     *             // Media Plugin Version Not Supported\n     *             // Download plugin\n     *             break;\n     *         case fcs.call.MediaErrors.NEW_VERSION_WARNING:\n     *             // New Media Version Available Wanrning\n     *             break;\n     *         case fcs.call.MediaErrors.NOT_INITIALIZED:\n     *             // Media couldn't be initialized\n     *             break;\n     *         case fcs.call.MediaErrors.NOT_FOUND:\n     *             // Plugin couldn't be found!\n     *             // Download plugin\n     *             break;\n     *     }\n     * }\n     */\n\n    /**\n     * This function sets version of plugin\n     *\n     * @name fcs#setPluginVersion\n     * @function\n     * @param {string} version\n     * @since 3.0.0\n     * @example\n     *\n     * fcs.setPluginVersion(version);\n     */\n    this.setPluginVersion = function(version) {\n        pluginVer = version;\n    };\n\n    /**\n     * This function returns version of plugin\n     *\n     * @name fcs#getPluginVersion\n     * @function\n     * @returns {String} Version of Current Plugin\n     * @since 3.0.0\n     * @example\n     *\n     * fcs.getPluginVersion();\n     */\n    this.getPluginVersion = function() {\n        return pluginVer;\n    };\n\n    /**\n     * This function returns assigned services of authenticated user.\n     *\n     * @name fcs#getServices\n     * @function\n     * @returns {object} The assigned services of authenticated user\n     * @since 3.0.0\n     * @example\n     *\n     * fcs.getServices();\n     */\n    this.getServices = function() {\n        return services;\n    };\n\n    /**\n     * This function assigns determined services to current user\n     *\n     * @name fcs#setServices\n     * @function\n     * @param {array} serviceParam The list of assigned services for the user\n     * @since 3.0.0\n     * @example\n     * fcs.setServices([\"CallControl\", \"RestfulClient\"]);\n     */\n    this.setServices = function(serviceParam) {\n        var i;\n        // for each element in serviceParam array, we create the service with value \"true\" in \"services\" object\n        if (serviceParam) {\n            services = {};\n            for (i = 0; i < serviceParam.length; i++) {\n                switch (serviceParam[i]) {\n                case 'CallDisplay':\n                    services.callDisplay = true;\n                    break;\n                case 'CallDisposition':\n                    services.callDisposition = true;\n                    break;\n                case 'RestfulClient':\n                    services.restfulClient = true;\n                    break;\n                case 'call':\n                    services.callControl = true;\n                    services.remoteCallControl = false;\n                    break;\n                case 'CallControl':\n                    services.callControl = true;\n                    services.remoteCallControl = false;\n                    break;\n                case 'RCC':\n                    services.callControl = false;\n                    services.remoteCallControl = true;\n                    break;\n                case 'CallMe':\n                    services.callMe = true;\n                    break;\n                case 'Directory':\n                    services.directory = true;\n                    break;\n                case 'ClickToCall':\n                    services.clickToCall = true;\n                    break;\n                case 'Presence':\n                    services.presence = true;\n                    break;\n                case 'AddressBook':\n                    services.contacts = true;\n                    break;\n                case 'CallLog':\n                    services.history = true;\n                    break;\n                case 'Custom':\n                    services.custom = true;\n                    break;\n                case 'IM':\n                    services.IM = true;\n                    break;\n                case 'Route':\n                    services.routes = true;\n                    break;\n                case 'DataChannel':\n                    services.dataChannel = true;\n                    break;\n                default:\n                    break;\n                }\n            }\n        }\n    };\n\n    /**\n     * Returns network connectivity status.\n     *\n     * @name fcs#isConnected\n     * @function\n     *\n     * @returns {Boolean}, true if connection is up otherwise false.\n     */\n    this.isConnected = function() {\n        return connected;\n    };\n\n    this.setConnected = function(connectionStatus) {\n        connected = connectionStatus === true ? true : false;\n    };\n}\n","export function LocaleService({\n    Http: _server,\n    Utils: _utils\n}) {\n    this.getUserLocale = function(onSuccess, onFailure) {\n        _server.sendGetRequest({\n            'url': _server.getWAMUrl(1, '/localization', false)\n        },\n        function(data) {\n            _utils.callFunctionIfExist(onSuccess, data);\n        },\n        onFailure\n        );\n    };\n}\n","import {HttpImpl} from './http';\nimport {XHRImpl} from './xhr';\n\nexport default {\n    XHR: container => new XHRImpl(container),\n    Http: container =>  new HttpImpl(container)\n};\n","import CONSTANTS from '../constants';\nimport { base64_encode } from '../../lib/base64';\nimport errors from '../errors';\n\nexport function HttpImpl({\n    XHR: _xhr,\n    GlobalBroadcaster: _globalBroadcaster,\n    Core: _core,\n    Config: _config\n}) {\n\n    var REQUEST_TYPE_PUT = 'PUT',\n        REQUEST_TYPE_POST = 'POST',\n        REQUEST_TYPE_GET = 'GET',\n        REQUEST_TYPE_DELETE = 'DELETE',\n        username, password, session, authname;\n\n    function onSubscriptionStarted(data) {\n        session = data.session;\n    }\n\n    // In order to delete previous session\n    function onSubscriptionEnded() {\n        session = null;\n    }\n\n    function onTokenAuth(data) {\n        username = data.username;\n    }\n\n    function onBasicAuth(data) {\n        username = data.username;\n        password = data.password;\n        authname = data.authname;\n    }\n\n    function manipulateHeader(header) {\n        if (!header) {\n            header = {};\n        }\n        if (!header.Accept) {\n            header.Accept = 'application/json';\n        }\n        if (!header['Content-Type']) {\n            header['Content-Type'] = 'application/json';\n        }\n\n        if (!_core.getKandyUAT()) {\n            //Check whether auth or basic auth\n            if (session) {\n                header['x-session'] = session;\n                delete header.Authorization;\n            } else {\n                if (authname && password) {\n                    header.Authorization = 'basic ' + base64_encode(authname + ':' + password);\n                } else if (username && password) {\n                    header.Authorization = 'basic ' + base64_encode(username + ':' + password);\n                }\n                delete header['x-session'];\n            }\n        }\n        return header;\n    }\n\n    function sendRequest(method, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header) {\n        var kandyUAT = _core.getKandyUAT();\n\n        var failureHandler = function(statusCode) {\n            if (statusCode === errors.TOKEN_NOT_FOUND) {\n                _globalBroadcaster.publish(CONSTANTS.EVENT.TOKEN_NOT_FOUND);\n                session = null;\n            } else if (statusCode === errors.SESSION_EXPIRED) {\n                _globalBroadcaster.publish(CONSTANTS.EVENT.SESSION_EXPIRED);\n                session = null;\n            }\n\n            if (errorHandler && typeof errorHandler === 'function') {\n                errorHandler(statusCode);\n            }\n        };\n\n        if (kandyUAT) {\n            if (callParams.url.indexOf('?') === -1) {\n                callParams.url += '?key=' + kandyUAT;\n            } else {\n                callParams.url += '&key=' + kandyUAT;\n            }\n        }\n\n        return _xhr.call(method, callParams, successHandler, failureHandler, successParser, errorParser, responseType, header);\n    }\n\n    function sendPostRequestTokenAuth(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header, token) {\n        if (!header) {\n            header = {};\n        }\n        if (!header.Accept) {\n            header.Accept = 'application/json';\n        }\n        if (!header['Content-Type']) {\n            header['Content-Type'] = 'application/json';\n        }\n        //Check whether auth or basic auth\n        if (header['x-session']) {\n            delete header['x-session'];\n        }\n        if (header.Authorization) {\n            delete header.Authorization;\n        }\n        if (!header['x-token']) {\n            header['x-token'] = token;\n        }\n        return sendRequest(REQUEST_TYPE_POST, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n    }\n\n    this.call = function(method, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header) {\n        header = manipulateHeader(header);\n        return sendRequest(method, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n    };\n\n    this.sendPostRequest = function(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header, token) {\n        if (token) {\n            return sendPostRequestTokenAuth(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header, token);\n        } else {\n            header = manipulateHeader(header);\n            return sendRequest(REQUEST_TYPE_POST, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n        }\n    };\n\n    this.sendGetRequest = function(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header) {\n        header = manipulateHeader(header);\n        return sendRequest(REQUEST_TYPE_GET, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n    };\n\n    this.sendDeleteRequest = function(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header) {\n        header = manipulateHeader(header);\n        return sendRequest(REQUEST_TYPE_DELETE, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n    };\n\n    this.sendPutRequest = function(callParams, successHandler, errorHandler, successParser, errorParser, responseType, header) {\n        header = manipulateHeader(header);\n        return sendRequest(REQUEST_TYPE_PUT, callParams, successHandler, errorHandler, successParser, errorParser, responseType, header);\n    };\n\n    this.getUrl = function() {\n        var url = '';\n\n        if (!_config.protocol || !_config.restUrl || !_config.restPort) {\n            return url;\n        }\n        return url + _config.protocol + '://' + _config.restUrl + ':' + _config.restPort;\n    };\n\n    this.getWAMUrl = function(version, url, authNeeded) {\n        if (authNeeded === false) {\n            // Authentcation is not needed.\n            return this.getUrl() + '/rest/version/' + (version ? version : 'latest') + url;\n        } else {\n            // Authentcation is needed for the rest request\n            if (_core.notification || _config.anonymous) {\n                return this.getUrl() + '/rest/version/' + (version ? version : 'latest') + (_config.anonymous ? '/anonymous/' : '/user/') + _core.getUser() + url;\n            } else {\n                return this.getUrl() + '/rest/version/' + (version ? version : 'latest') + '/user/' + _core.getUser() + url;\n            }\n        }\n    };\n\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.TOKEN_AUTH_STARTED, onTokenAuth, 9);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.BASIC_AUTH_STARTED, onBasicAuth, 10);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.DEVICE_SUBSCRIPTION_STARTED, onSubscriptionStarted);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.DEVICE_SUBSCRIPTION_ENDED, onSubscriptionEnded);\n\n    //@{test-methods}\n    this.manipulateHeader = manipulateHeader;\n    this.setSession = function(value) {\n        session = value;\n    };\n    this.setUsernamePassword = function(user, pass, auth) {\n        username = user;\n        password = pass;\n        authname = auth;\n    };\n    //@{test-methods}\n}\n","\nimport errors from '../errors';\nimport {serialize, extend} from '../utils';\nimport CONSTANTS from '../constants';\n\nexport function XHRImpl({\n    Core: _core,\n    GlobalBroadcaster: _globalBroadcaster,\n    LogManager: _logManager,\n    Config: _config,\n    Utils: _utils,\n    ChallengeManager: _challenger,\n    GoneNotifier: _goneNotifier\n}) {\n\n    var DEFAULT_LONGPOLLING_TOLERANCE = 30000,\n        DEFAULT_AJAX_TIMEOUT = 40000,\n        XHR_READY_STATE = {\n            REQUEST_NOT_INITIALIZED: 0,\n            REQUEST_DONE: 4\n        },\n        self = this;\n\n    function getLogger() {\n        return _logManager.getLogger('jQrestful');\n    }\n\n    function composeAjaxRequestResponseLog(context, xhr, errorThrown, data) {\n        var responseLog = context;\n        if (data) {\n            responseLog.data = data;\n        }\n        if (errorThrown) {\n            responseLog.errorThrown = errorThrown;\n        }\n        if (xhr) {\n            responseLog.status = xhr.status;\n            responseLog.statusText = xhr.statusText;\n            responseLog.responseText = xhr.responseText;\n            responseLog.readyState = xhr.readyState;\n        }\n        return responseLog;\n    }\n\n    function parseError(x, e) {\n        var returnResult, statusCode;\n        getLogger().error('parseError:\\'' + e + '\\' Status:\\'' + x.status + '\\' ResponseText:\\'' + x.responseText + '\\'');\n\n        if (x.responseText && x.responseText.search('statusCode') !== -1) {\n            if (JSON.parse(x.responseText).subscribeResponse !== undefined) {\n                statusCode = JSON.parse(x.responseText).subscribeResponse.statusCode;\n            } else if (JSON.parse(x.responseText).authorizationResponse !== undefined) {\n                statusCode = JSON.parse(x.responseText).authorizationResponse.statusCode;\n            }\n        }\n\n        statusCode = statusCode ? statusCode : x.status;\n\n        switch (statusCode) {\n        case 401:\n            returnResult = errors.AUTH;\n            break;\n        case 403:\n            returnResult = errors.INCORRECT_LOGIN_PASS;\n            break;\n        case 19:\n            returnResult = errors.LOGIN_LIMIT_CLIENT;\n            break;\n        case 20:\n            returnResult = errors.LOGIN_LIMIT_TABLET;\n            break;\n        case 39:\n            returnResult = errors.SESSION_NOT_FOUND;\n            break;\n        case 44:\n            returnResult = errors.FORCE_LOGOUT_ERROR;\n            break;\n        case 46:\n            returnResult = errors.TOKEN_NOT_FOUND;\n            break;\n        case 47:\n            returnResult = errors.SESSION_EXPIRED;\n            break;\n        default:\n            returnResult = errors.NETWORK;\n        }\n        return returnResult;\n    }\n\n    // TODO: tolga: remove parseError when all of the responseTypes are added\n    function parseErrorStatusCode(x, e, responseType) {\n        getLogger().error('parseErrorStatusCode:\\'' + e + '\\' Status:\\'' + x.status + '\\' ResponseText:\\'' + x.responseText + '\\'');\n\n        if (x.responseText && x.responseText.search('statusCode') !== -1 && JSON.parse(x.responseText)[responseType] !== undefined) {\n\n            return JSON.parse(x.responseText)[responseType].statusCode;\n        }\n\n        return (x.status === 401 || x.status === 403) ? x.status : 400;\n    }\n\n\n    /*\n     * @ignore\n     */\n    self.call = function(method, callParams, successHandler, errorHandler, successParser, errorParser, responseType, headers) {\n        var data,\n            timeout = DEFAULT_AJAX_TIMEOUT,\n            url = callParams.url,\n            origHeaders = headers,\n            urlWithoutRestVersion = url.split('/rest/version/')[1],\n            resourceString,\n            logger = getLogger(),\n            xhr,\n            queryString,\n            finalHeaders,\n            headerKey,\n            responseLogContext,\n            handleSuccess,\n            handleError,\n            isSuccess,\n            modValues;\n\n        if (callParams && callParams.data) {\n            data = callParams.data;\n        }\n\n        if (_config.polling) {\n            timeout = _config.polling * 1000;\n            if (_config.longpollingTolerans) {\n                timeout = timeout + _config.longpollingTolerans;\n            } else {\n                timeout = timeout + DEFAULT_LONGPOLLING_TOLERANCE;\n            }\n        }\n\n        // do not log isAlive requests\n        if (urlWithoutRestVersion && urlWithoutRestVersion.indexOf('isAlive') === -1) {\n            // extracting rest resource from url.\n            // \".../rest/version/<ver>/<user/anonymous>/<userName>/restResource/...\"\n            resourceString = urlWithoutRestVersion.split('/')[3];\n            if (!resourceString) {\n                // rest resource string not found, get last string in the url\n                resourceString = url.substring(url.lastIndexOf('/') + 1, url.length);\n            }\n            // remove \"?\" if exists\n            resourceString = resourceString.split('?')[0];\n\n            if (data && !data.imRequest) {\n                logger.info('Send ajax request: ' + resourceString, data);\n            } else {\n                logger.info('Send ajax request: ' + resourceString);\n            }\n        }\n\n        if (method === 'GET') {\n            // Take the data parameters and append them to the URL.\n            queryString = serialize(data);\n\n            if (queryString.length > 0) {\n                if (url.indexOf('?') === -1) {\n                    url += '?' + queryString;\n                } else {\n                    url += '&' + queryString;\n                }\n            }\n\n            // Remove data so that we don't add it to the body.\n            data = null;\n        }\n\n        xhr = new XMLHttpRequest();\n\n        // TODO: Kadir Goktas\n        // listeners below are functional expect for IE9.\n        // we can replace xhr.onstatechange handler\n        // accordingly, once IE9 is deprecated.\n\n        xhr.onload = function() {\n            handleSuccess(xhr);\n        };\n        xhr.onabort = function() {\n            logger.trace('Ajax request aborted internally. not calling failure callback');\n        };\n        xhr.onerror = function() {\n            logger.error('Ajax request error! Handle the error');\n            handleError(xhr);\n        };\n\n        // ajax hook to modify url and headers\n        if (_config.ajaxHook) {\n            modValues = _utils.callFunctionIfExist(_config.ajaxHook, xhr, window, {\n                type: method,\n                url: url,\n                headers: headers,\n                data: data\n            });\n            if (modValues) {\n                url = modValues.url ? modValues.url : url;\n                headers = modValues.headers ? modValues.headers : headers;\n            }\n        }\n\n        xhr.open(method, url);\n\n        xhr.withCredentials = _config.cors ? true : false;\n        xhr.timeout = timeout;\n\n        finalHeaders = {\n            // Old implementation used jQuery without changing content type. Doing the same here for\n            // backwards compatibility.\n            'Content-Type': 'application/x-www-form-urlencoded',\n\n            // JQuery always adds this header by default. Adding here for backwards compatibility.\n            'X-Requested-With': 'XMLHttpRequest'\n        };\n\n        finalHeaders = extend(finalHeaders, headers);\n\n        // Set the headers.\n        for (headerKey in finalHeaders) {\n            if (finalHeaders.hasOwnProperty(headerKey)) {\n                xhr.setRequestHeader(headerKey, finalHeaders[headerKey]);\n            }\n        }\n\n        if (typeof data !== 'string') {\n            data = JSON.stringify(data);\n        }\n\n        xhr.send(data);\n\n        // Used for logging information,\n        responseLogContext = {\n            type: method,\n            url: url,\n            dataType: 'json',\n            async: true,\n            jsonp: false,\n            crossDomain: _config.cors ? true : false,\n            timeout: timeout\n        };\n\n        function checkIE9HackForAbortedAjaxRequest(xhr) {\n            // IE9 hack: identifying internally aborted ajax requests.\n            try {\n                isSuccess = (xhr.status >= 200 && xhr.status < 300) || xhr.status === 304;\n            } catch (err) {\n                // when an ajax request is aborted by javascript, accessing xhr.status will throw\n                // exception. \"c00c023f\" is the exact code that IE9 throws.\n                // but all exceptions are considered as same.\n                if (err instanceof Error) {\n                    if (err.description === 'Could not complete the operation due to error c00c023f.') {\n                        logger.trace('Ajax request aborted internally. not calling failure callback');\n                    }\n                }\n                return -1;\n            }\n            return isSuccess;\n        }\n\n        handleSuccess = function(xhr) {\n\n            if (xhr.readyState === XHR_READY_STATE.REQUEST_DONE) {\n\n                isSuccess = checkIE9HackForAbortedAjaxRequest(xhr);\n                if (isSuccess === -1) {\n                    return;\n                }\n\n                // onload hack: need to handle both success and failure in xhr load event\n                if (!isSuccess) {\n                    handleError(xhr);\n                    return;\n                }\n\n                var val = {};\n                try {\n                    // Make sure that the response isn't empty before parsing. Empty is considered\n                    // an empty object.\n                    if (typeof xhr.responseText === 'string' && xhr.responseText.length) {\n                        val = JSON.parse(xhr.responseText);\n                    }\n\n                    // do not log success response for isAlive requests\n                    if (typeof xhr.responseURL === 'string' && xhr.responseURL.indexOf('isAlive') === -1) {\n                        logger.info('ajax success: ' + xhr.status + ' ' + xhr.statusText,\n                            composeAjaxRequestResponseLog(responseLogContext, xhr, undefined, val));\n                    }\n                } catch (e) {\n                    if (e instanceof SyntaxError) {\n                        logger.error('Failed to parse json ajax response into object:' + xhr.responseText,\n                            composeAjaxRequestResponseLog(responseLogContext, xhr, undefined, val));\n                    } else {\n                        logger.error('Unknown error:' + xhr.status + ' ' + xhr.statusText,\n                            composeAjaxRequestResponseLog(responseLogContext, xhr, undefined, val));\n                    }\n\n                    handleError(xhr);\n                    return;\n                }\n\n                if (successParser && typeof successParser === 'function') {\n                    val = successParser(val);\n                }\n                if (successHandler && typeof successHandler === 'function') {\n                    successHandler(val);\n                }\n            }\n        };\n\n        handleError = function(xhr) {\n            // TODO: Error Thrown\n            logger.error('ajax error: ' + xhr.status + ' ' + xhr.statusText,\n                composeAjaxRequestResponseLog(responseLogContext, xhr, xhr.statusText));\n\n            var reportError = function() {\n                if (xhr.status === 410) {\n                    logger.error('410 Gone received');\n                    _utils.callFunctionIfExist(_goneNotifier.onGoneReceived);\n                    return;\n                }\n\n                if (xhr.readyState === XHR_READY_STATE.REQUEST_NOT_INITIALIZED) {\n                    _globalBroadcaster.publish(CONSTANTS.EVENT.XHR_REQUEST_NOT_INITIALIZED);\n                    logger.debug('Ajax request cannot be sent, this is a connection problem.');\n                }\n\n                if (errorHandler && typeof errorHandler === 'function') {\n                    //TODO after unit tests moved to addressbook class, responseType parameter should be removed\n                    if (responseType === 'addressBookResponse') {\n                        errorHandler(parseErrorStatusCode(xhr, xhr.statusText, responseType));\n                    } else {\n                        if (errorParser && typeof errorParser === 'function') {\n                            errorHandler(errorParser(xhr, xhr.statusText));\n                        } else {\n                            errorHandler(parseError(xhr, xhr.statusText));\n                        }\n                    }\n                } else {\n                    logger.trace('Error handler is not defined or not a function');\n                }\n            };\n\n            if (xhr.status === 403 && _core.getKandyUAT() && _config.enableAuthChallenge) {\n                _challenger.challenge()\n                    .then(function(newUAT) {\n                        // Replace the key parameter with the new user access token.\n                        callParams.url = callParams.url.replace(/([\\?\\&]key=)uat[0-9a-f]{32}/gi, `$1${newUAT}`);\n                        self.call(method, callParams, successHandler, errorHandler, successParser, errorParser, responseType, origHeaders);\n                    })\n                    .catch(reportError);\n            } else {\n                reportError();\n            }\n        };\n\n        if (xhr.readyState === 4) {\n            // If the request already completed, just fire the callback asynchronously\n            setTimeout(function() {\n                handleSuccess(xhr);\n            });\n        } else {\n            // sucess and fail scenarios are handled with \"load\" and \"error\" event listeners\n            // onreadystatechange is only need for IE9 hack\n            xhr.onreadystatechange = function() {\n                if (checkIE9HackForAbortedAjaxRequest(xhr) === -1) {\n                    return;\n                }\n            };\n        }\n\n        return xhr;\n    };\n}\n","import {GlobalBroadcaster} from './globalBroadcaster';\n\nexport default {\n    GlobalBroadcaster: () => new GlobalBroadcaster()\n};\n","export function GlobalBroadcaster() {\n    var MAX_PRIORITY = 10,\n        MIN_PRIORITY = 1,\n        topics = {},\n        subUid = -1;\n\n    function unsubscribeFromTopic(token) {\n        var m, i, j;\n        for (m in topics) {\n            if (topics[m] && topics.hasOwnProperty(m)) {\n                j = topics[m].length;\n                for (i = 0; i < j; i++) {\n                    if (topics[m][i].token === token) {\n                        topics[m].splice(i, 1);\n                        return token;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    function subscribeToTopic(topic, func, priority, temporary) {\n        var token, prio = MAX_PRIORITY,\n            temp = false;\n\n        if (typeof topic !== 'string') {\n            throw new Error('First parameter must be a string topic name.');\n        }\n\n        if (typeof func !== 'function') {\n            throw new Error('Second parameter must be a function.');\n        }\n\n        if (typeof priority !== 'undefined') {\n            if (typeof priority !== 'number') {\n                throw new Error('Priority must be a number.');\n            } else {\n                if (priority > MAX_PRIORITY ||\n                    priority < MIN_PRIORITY) {\n                    throw new Error('Priority must be between 1-10.');\n                } else {\n                    prio = priority;\n                }\n            }\n        }\n\n        if (temporary === true) {\n            temp = temporary;\n        }\n\n        if (!topics[topic]) {\n            topics[topic] = [];\n        }\n\n        token = (++subUid).toString();\n        topics[topic].push({\n            token: token,\n            prio: prio,\n            func: func,\n            temp: temp\n        });\n\n        topics[topic].sort(function(a, b) {\n            return parseFloat(b.prio) - parseFloat(a.prio);\n        });\n\n        return token;\n    }\n\n    function publishTopic() {\n        var subscribers, len, _args, _topic;\n\n        if (arguments.length === 0) {\n            throw new Error('First parameter must be a string topic name.');\n        }\n\n        _args = Array.prototype.slice.call(arguments);\n        _topic = _args.shift();\n\n        subscribers = topics[_topic];\n        len = subscribers ? subscribers.length : 0;\n        while (len--) {\n            subscribers[len].func.apply(null, _args);\n            if (subscribers[len].temp) {\n                unsubscribeFromTopic(subscribers[len].token);\n            }\n        }\n    }\n\n    /*\n     *\n     * Publish events of interest\n     * with a specific topic name and arguments\n     * such as the data to pass along\n     *\n     * @param {string} topic - Topic name.\n     * @param {...*} [args] - arguments.\n     *\n     * @returns {undefined}\n     */\n    this.publish = publishTopic;\n\n    /*\n     *\n     * Subscribe to events of interest\n     * with a specific topic name and a\n     * callback function, to be executed\n     * when the topic/event is observed.\n     * Default priority 10.\n     * Priority must be between 1-10.\n     * Functions with lower priority\n     * will be executed first.\n     *\n     * @param {string} topic - Topic name.\n     * @param {type} func - function to be executed when the topic/event is observed\n     * @param {number} [priority] - function with higher priority will be executed first\n     * @param {boolean} [temporary] - if set to true, subscriber will unsubcribe automatically after first execution.\n     *\n     * @returns {string} token - reference to subscription\n     */\n    this.subscribe = subscribeToTopic;\n\n    /*\n     *\n     * Unsubscribe from a specific\n     * topic, based on a tokenized reference\n     * to the subscription\n     *\n     * @param {string} token - reference to subscription\n     *\n     * @returns {false|string} - returns token if successfull,\n     * otherwise returns false.\n     */\n    this.unsubscribe = unsubscribeFromTopic;\n}\n","import {TurnCredentialsManagerImpl} from './turnCredentialsManager';\n\nexport default {\n    TurnCredentialsManager: container => new TurnCredentialsManagerImpl(container)\n};\n","import { base64_encode, base64_decode } from '../../lib/base64';\n\nexport function TurnCredentialsManagerImpl({\n    Cache: _cache,\n    Utils: _utils\n}) {\n    var self = this,\n        CREDENTIALS_CACHE_KEY = 'JSL/VHVybkNyZWRlbnRpYWxz';\n\n    self.get = function() {\n        return JSON.parse(base64_decode(_cache.getItem(CREDENTIALS_CACHE_KEY)));\n    };\n\n    self.save = function(data) {\n        _cache.setItem(CREDENTIALS_CACHE_KEY, base64_encode(JSON.stringify(data)));\n        _utils.callFunctionIfExist(self.onCredentialsReceived);\n    };\n\n    self.remove = function() {\n        _cache.removeItem(CREDENTIALS_CACHE_KEY);\n    };\n}\n","import { createConvertedSdpPipeline } from './pipeline';\nimport createSdpLogger from './logger';\nimport createBundleHandler from './bundleHandler';\n\nexport default {\n    SdpPipeline: container => {\n        const builtinHandlers = [\n            createBundleHandler(() => container.Config)\n        ];\n\n        return createConvertedSdpPipeline(\n            () => [...container.Config.sdpHandlers, ...builtinHandlers],\n            createSdpLogger(container.LogManager.getLogger('sdpLogger'))\n        );\n    }\n};\n","import {sdpParse, sdpWrite} from './parser';\n\n/*\n * @method createSdpPipeline\n * @param {function[]} handlers An array of sdp handlers. These are functions that are given the sdp and a change to return a modified sdp.\n * @param {function} sdpLogger The logger for the sdp pipeline. This function is called like a handler, with the same params, but is guaranteed to be called at the end of the pipeline.\n * @returns {function} sdpPipeline The sdpPipeline that will call all of the handlers in order\n */\nexport function createSdpPipeline(getHandlers, sdpLogger) {\n    /*\n     * @method sdpPipeline\n     * @param {Object} sdp The sdp to put through the pipeline\n     * @param {string} operation The operation this sdp will be used for. Values can be found in js/webrtc/adaptor/constants.js\n     * @param {string} step The step at which the pipeline is being called. Can be 'PRE_LOCAL', 'POST_LOCAL', 'PRE_REMOTE' and 'POST_REMOTE'.\n     * @param {string} type The type of sdp. Can be 'offer' or 'answer'.\n     * @returns {Object} sdp The possibly modified sdp.\n     */\n    return (callId, sdp, operation, step, type) => {\n        const handlers = getHandlers();\n        const originalSdp = Object.freeze(sdp);\n        let newSdp = originalSdp;\n\n        // Function that is provided to handlers that needs to be called\n        // to enable the next handler to be called.\n        let nextCalled = false;\n        function next(sdp) {\n            nextCalled = true;\n            return sdp;\n        }\n\n        function callHandler(handler) {\n            return handler({\n                next,\n                originalSdp,\n                currentSdp: newSdp,\n                operation,\n                step,\n                type,\n                callId\n            });\n        }\n\n        for (let i=0; i<handlers.length; i++) {\n            // Rest the flag back for each handler\n            nextCalled = false;\n\n            newSdp = callHandler(handlers[i]);\n\n            if (!newSdp) {\n                throw new Error('An SDP handler failed to return an sdp');\n            }\n\n            // If the next function was not called, we exit the pipeline\n            if (!nextCalled) {\n                break;\n            }\n        }\n\n        newSdp = callHandler(sdpLogger);\n\n        return newSdp;\n    };\n}\n\n// This is a utility function that wraps the sdp pipeline. The wrapper will\n// convert an sdp string to provide an sdp object to the pipeline and it will\n// convert the return value back to a string.\nexport function createConvertedSdpPipeline(getHandlers, sdpLogger) {\n    const pipeline = createSdpPipeline(getHandlers, sdpLogger);\n\n    return (callId, sdpString, operation, step, type) => {\n        const sdpObject = sdpParse(sdpString);\n        const newSdp = pipeline(callId, sdpObject, operation, step, type);\n\n        // Optimization: no need to write the string if the sdp hasn't changed\n        if (sdpObject === newSdp) {\n            return sdpString;\n        }\n\n        return sdpWrite(newSdp);\n    };\n}\n","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","import transform from 'sdp-transform';\n\n/*\n * This library is wrapped by functions in this module so that we can change\n * the way that SDP is parsed later if we need to.\n */\n\nexport function sdpParse(sdpString) {\n    return transform.parse(sdpString);\n}\n\nexport function sdpWrite(sdpObject) {\n    return transform.write(sdpObject);\n}\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","export default function createSdpLogger(logger) {\n    return function sdpLogger({next, currentSdp, originalSdp, operation, step, type, callId}) {\n        logger.info('SDP Pipeline - Call Id: ' + callId + ' step: ' + step + ' operation: ' + operation + ' type: ' + type);\n\n        if (currentSdp === originalSdp) {\n            logger.info('Unmodified SDP');\n        } else {\n            logger.info('Original SDP:', originalSdp);\n            logger.info('Modified SDP:', currentSdp);\n        }\n\n        return next(currentSdp);\n    };\n}\n","import { cloneDeep } from 'lodash/fp';\nimport constants from '../constants';\n\n// Our ice candidate timeout logic does not support bundling. There are cases\n// where we should be interupting ice candidate collection but restart the\n// timeout instead because the vide mline does not have any candidates. In a\n// case where the browser is bundling, you would expect that there wouldn't\n// be any candidates in the video mline. Removing the bundle line from the SDP\n// ensures that we never bundle candidates. This shouldn't be necessary when we\n// support trickle ICE since you wouldn't expect the SDP to have all of its\n// candidates up front anyways.\nexport default function createBundleHandler(getConfig) {\n    return function bundleHandler({next, currentSdp}) {\n        if (getConfig().bundlePolicy !== constants.WEBRTC.SDP.BUNDLE_POLICY.DISABLED || currentSdp.groups === undefined) {\n            return next(currentSdp);\n        }\n\n        const newSdp = cloneDeep(currentSdp);\n\n        delete newSdp.groups;\n        return next(newSdp);\n    };\n}\n","import {RccFSMImpl} from './rccFsm';\nimport {RccManagerImpl} from './rccManager';\nimport {RccControlServiceImpl} from './wamrcc';\n\nexport default {\n    RccFSM: container => new RccFSMImpl(container),\n    RccManager: container => new RccManagerImpl(container),\n    RccControlService: container => new RccControlServiceImpl(container)\n};\n","/*\n * Finite State machine that defines state transition of basic call model.\n * State machine fires events during state transitions.\n * Components should register to FSM  in order to receive transition events\n *\n */\n\nexport function RccFSMImpl({\n    LogManager: _logManager\n}) {\n\n    this.CallFSMState = {\n        INIT: 'INIT',\n        MAKING_CALL: 'MAKING_CALL',\n        CALL_IN_PROGRESS: 'CALL_IN_PROGRESS',\n        RINGING: 'RINGING',\n        ANSWERED: 'ANSWERED',\n        CALL_RECEIVED: 'CALL_RECEIVED',\n        DEFLECTING_CALL: 'DEFLECTING_CALL',\n        ENDING_CALL: 'ENDING_CALL',\n        CALL_ENDED: 'CALL_ENDED',\n        HOLDING_CALL: 'HOLDING_CALL',\n        LOCAL_HOLD: 'LOCAL_HOLD',\n        REMOTE_HOLD: 'REMOTE_HOLD',\n        BOTH_HOLD: 'BOTH_HOLD',\n        RETRIEVING_CALL: 'RETRIEVING_CALL',\n        BLIND_TRANSFERING: 'BLIND_TRANSFERING',\n        ANSWERING_CALL: 'ANSWERING_CALL',\n        MAKING_CONSULTATIVE_TRANSFER: 'MAKING_CONSULTATIVE_TRANSFER',\n        CONFERENCING_CALL: 'CONFERENCING_CALL',\n        CONFERENCED_CALL: 'CONFERENCED_CALL'\n    };\n\n    //CallFSM returns TransferEvent after state change\n    this.TransferEvent = {\n        unknownNotification_fsm: 'unknownNotification_fsm',\n        makeCall_fsm: 'makeCall_fsm',\n        callInProgress_fsm: 'callInProgress_fsm',\n        ringing_fsm: 'ringing_fsm',\n        answered_fsm: 'answered_fsm',\n        callReceived_fsm: 'callReceived_fsm',\n        callFailed_fsm: 'callFailed_fsm',\n        callEnded_fsm: 'callEnded_fsm',\n        endCall_fsm: 'endCall_fsm',\n        blind_transfering_fsm: 'blind_transfering_fsm',\n        holdCall_fsm: 'holdCall_fsm',\n        callHeldLocally_fsm: 'callHeldLocally_fsm',\n        callRetrievedLocally_fsm: 'callRetrievedLocally_fsm',\n        callHeldRemotely_fsm: 'callHeldRemotely_fsm',\n        callRetrievedRemotely_fsm: 'callRetrievedRemotely_fsm',\n        callHeldBoth_fsm: 'callHeldBoth_fsm',\n        answerCall_fsm: 'answerCall_fsm',\n        deflectCall_fsm: 'deflectCall_fsm',\n        consultativeTransfer_fsm: 'consultativeTransfer_fsm',\n        redirected_fsm: 'redirected_fsm',\n        callBlindTransferred_fsm: 'callBlindTransferred_fsm',\n        callConsultativeTransferred_fsm: 'callConsultativeTransferred_fsm',\n        callTransferred_fsm: 'callTransferred_fsm',\n        conferencing_fsm: 'conferencing_fsm',\n        conferenced_fsm: 'conferenced_fsm',\n        blindTransferFailed_fsm: 'blindTransferFailed_fsm',\n        consultativeTransferFailed_fsm:'consultativeTransferFailed_fsm',\n        conferenceCallFailed_fsm:'conferenceCallFailed_fsm'\n    };\n\n    //CallFSM receives NotificationEvent\n    this.NotificationEvent = {\n        unknowNotify: 'unknowNotify',\n        callInProgress: 'callInProgress',\n        ringing: 'ringing',\n        answered: 'answered',\n        callHeldRemotely: 'callHeldRemotely',\n        callRetrievedRemotely: 'callRetrievedRemotely',\n        callHeldLocally: 'callHeldLocally',\n        callRetrievedLocally: 'callRetrievedLocally',\n        callTransferred: 'callTransferred',\n        callReceived: 'callReceived',\n        redirected: 'redirected',\n        callFailed: 'callFailed',\n        callEnded: 'callEnded',\n        makeCall_GUI: 'makeCall_GUI',\n        deflectCall_GUI: 'deflectCall_GUI',\n        endCall_GUI: 'endCall_GUI',\n        holdCall_GUI: 'holdCall_GUI',\n        blind_transfering_GUI: 'blind_transfering_GUI',\n        retrieveCall_GUI: 'retrieveCall_GUI',\n        answerCall_GUI: 'answerCall_GUI',\n        consultativeTransfer_GUI: 'consultativeTransfer_GUI',\n        conferenceCall_GUI: 'conferenceCall_GUI',\n        conferenced: 'conferenced',\n        blindTransferFailed: 'blindTransferFailed',\n        consultativeTransferFailed:'consultativeTransferFailed',\n        conferenceCallFailed:'conferenceCallFailed'\n    };\n    var self = this,\n        logger = _logManager.getLogger('rccFSM');\n\n    function FSM(call, event, onSuccess, onFailure) {\n        //TODO move sessionProgress somewhere else?\n        var callState = self.getCurrentState(call);\n\n        switch (callState) {\n        case self.CallFSMState.INIT:\n            switch (event) {\n            case self.NotificationEvent.makeCall_GUI:\n                call.currentState = self.CallFSMState.MAKING_CALL;\n                onSuccess(call, self.TransferEvent.makeCall_fsm);\n                break;\n            // This is server RCC wrong notification workaround code.\n            // ringing implemantation for init call state\n            case self.NotificationEvent.ringing:\n                call.currentState = self.CallFSMState.RINGING;\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.callInProgress:\n                call.currentState = self.CallFSMState.CALL_IN_PROGRESS;\n                onSuccess(call, self.TransferEvent.callInProgress_fsm);\n                break;\n            case self.NotificationEvent.callReceived:\n                call.currentState = self.CallFSMState.CALL_RECEIVED;\n                onSuccess(call, self.TransferEvent.callReceived_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.MAKING_CALL:\n            switch (event) {\n            case self.NotificationEvent.callInProgress:\n                call.currentState = self.CallFSMState.CALL_IN_PROGRESS;\n                onSuccess(call, self.TransferEvent.callInProgress_fsm);\n                break;\n                // This is server RCC wrong notification workaround code.\n                // ringing implemantation for making call state\n            case self.NotificationEvent.ringing:\n                call.currentState = self.CallFSMState.RINGING;\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.CALL_IN_PROGRESS:\n            switch (event) {\n            case self.NotificationEvent.ringing:\n                call.currentState = self.CallFSMState.RINGING;\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.answered:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.answered_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n\n            break;\n        case self.CallFSMState.RINGING:\n            switch (event) {\n            case self.NotificationEvent.answered:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.answered_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.CALL_RECEIVED:\n            switch (event) {\n            case self.NotificationEvent.deflectCall_GUI:\n                call.currentState = self.CallFSMState.DEFLECTING_CALL;\n                onSuccess(call, self.TransferEvent.deflectCall_fsm);\n                break;\n            case self.NotificationEvent.redirected:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.redirected_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.answered:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.answered_fsm);\n                break;\n            case self.NotificationEvent.answerCall_GUI:\n                call.currentState = self.CallFSMState.ANSWERING_CALL;\n                onSuccess(call, self.TransferEvent.answerCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.ANSWERING_CALL:\n            switch (event) {\n            case self.NotificationEvent.answered:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.answered_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.CONFERENCING_CALL:\n            switch (event) {\n            case self.NotificationEvent.conferenced:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.conferenced_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.conferenceCallFailed:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.conferenceCallFailed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.DEFLECTING_CALL:\n            switch (event) {\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.redirected:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.redirected_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.ANSWERED:\n            switch (event) {\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.holdCall_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.HOLDING_CALL;\n                onSuccess(call, self.TransferEvent.holdCall_fsm);\n                break;\n            case self.NotificationEvent.callHeldLocally:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_HOLD;\n                onSuccess(call, self.TransferEvent.callHeldLocally_fsm);\n                break;\n            case self.NotificationEvent.blind_transfering_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.BLIND_TRANSFERING;\n                onSuccess(call, self.TransferEvent.blind_transfering_fsm);\n                break;\n            case self.NotificationEvent.callHeldRemotely:\n                call.currentState = self.CallFSMState.REMOTE_HOLD;\n                onSuccess(call, self.TransferEvent.callHeldRemotely_fsm);\n                break;\n            case self.NotificationEvent.consultativeTransfer_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.MAKING_CONSULTATIVE_TRANSFER;\n                onSuccess(call, self.TransferEvent.consultativeTransfer_fsm);\n                break;\n            case self.NotificationEvent.conferenceCall_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.CONFERENCING_CALL;\n                onSuccess(call, self.TransferEvent.conferencing_fsm);\n                break;\n            case self.NotificationEvent.conferenced:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.conferenced_fsm);\n                break;\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callTransferred_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.ENDING_CALL:\n            switch (event) {\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.BLIND_TRANSFERING:\n            switch (event) {\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callBlindTransferred_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.blindTransferFailed:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.blindTransferFailed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REMOTE_HOLD:\n            switch (event) {\n            case self.NotificationEvent.callRetrievedRemotely:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.callRetrievedRemotely_fsm);\n                break;\n            case self.NotificationEvent.blind_transfering_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.BLIND_TRANSFERING;\n                onSuccess(call, self.TransferEvent.blind_transfering_fsm);\n                break;\n            case self.NotificationEvent.holdCall_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.HOLDING_CALL;\n                onSuccess(call, self.TransferEvent.holdCall_fsm);\n                break;\n            case self.NotificationEvent.callHeldLocally:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.BOTH_HOLD;\n                onSuccess(call, self.TransferEvent.callHeldBoth_fsm);\n                break;\n            case self.NotificationEvent.callHeldRemotely:\n                onSuccess(call, self.TransferEvent.callHeldRemotely_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callTransferred_fsm);\n                break;\n            case self.NotificationEvent.conferenced:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.conferenced_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.HOLDING_CALL:\n            switch (event) {\n            case self.NotificationEvent.callHeldLocally:\n                call.currentState = self.CallFSMState.LOCAL_HOLD;\n                if (call.previousState === self.CallFSMState.REMOTE_HOLD) {\n                    call.currentState = self.CallFSMState.BOTH_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.callHeldLocally_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_HOLD:\n            switch (event) {\n            case self.NotificationEvent.retrieveCall_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.RETRIEVING_CALL;\n                onSuccess(call, self.TransferEvent.retrieveCall_fsm);\n                break;\n            case self.NotificationEvent.callRetrievedLocally:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.callRetrievedLocally_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.callHeldRemotely:\n                call.currentState = self.CallFSMState.BOTH_HOLD;\n                onSuccess(call, self.TransferEvent.callHeldBoth_fsm);\n                break;\n            case self.NotificationEvent.callHeldLocally:\n                onSuccess(call, self.TransferEvent.callHeldLocally_fsm);\n                break;\n            case self.NotificationEvent.blind_transfering_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.BLIND_TRANSFERING;\n                onSuccess(call, self.TransferEvent.blind_transfering_fsm);\n                break;\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callTransferred_fsm);\n                break;\n            case self.NotificationEvent.conferenced:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.conferenced_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.MAKING_CONSULTATIVE_TRANSFER:\n            switch (event) {\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callConsultativeTransferred_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.consultativeTransferFailed:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.consultativeTransferFailed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.RETRIEVING_CALL:\n            switch (event) {\n            case self.NotificationEvent.callRetrievedLocally:\n                call.currentState = self.CallFSMState.ANSWERED;\n                if (call.previousState === self.CallFSMState.BOTH_HOLD) {\n                    call.currentState = self.CallFSMState.REMOTE_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.callRetrievedLocally_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.BOTH_HOLD:\n            switch (event) {\n            case self.NotificationEvent.callRetrievedRemotely:\n                call.currentState = self.CallFSMState.LOCAL_HOLD;\n                onSuccess(call, self.TransferEvent.callRetrievedRemotely_fsm);\n                break;\n            case self.NotificationEvent.callHeldLocally:\n                onSuccess(call, self.TransferEvent.callHeldBoth_fsm);\n                break;\n            case self.NotificationEvent.retrieveCall_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.RETRIEVING_CALL;\n                onSuccess(call, self.TransferEvent.retrieveCall_fsm);\n                break;\n            case self.NotificationEvent.callRetrievedLocally:\n                call.currentState = self.CallFSMState.REMOTE_HOLD;\n                onSuccess(call, self.TransferEvent.callRetrievedLocally_fsm);\n                break;\n            case self.NotificationEvent.callHeldRemotely:\n                onSuccess(call, self.TransferEvent.callHeldBoth_fsm);\n                break;\n            case self.NotificationEvent.endCall_GUI:\n                call.currentState = self.CallFSMState.ENDING_CALL;\n                onSuccess(call, self.TransferEvent.endCall_fsm);\n                break;\n            case self.NotificationEvent.callEnded:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callEnded_fsm);\n                break;\n            case self.NotificationEvent.callFailed:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callFailed_fsm);\n                break;\n            case self.NotificationEvent.blind_transfering_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.BLIND_TRANSFERING;\n                onSuccess(call, self.TransferEvent.blind_transfering_fsm);\n                break;\n            case self.NotificationEvent.callTransferred:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.callTransferred_fsm);\n                break;\n            case self.NotificationEvent.conferenced:\n                call.currentState = self.CallFSMState.ANSWERED;\n                onSuccess(call, self.TransferEvent.conferenced_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        }\n    }\n\n    self.getCurrentState = function(call) {\n        return (call.currentState ? call.currentState : self.CallFSMState.INIT);\n    };\n\n    this.handleEvent = function(call, event, handler) {\n        var initialCallState;\n        if (call) {\n            initialCallState = self.getCurrentState(call);\n            logger.info('FSM received NotificationEvent: ' + event + ' @ ' +\n                initialCallState + ' state' + '. Call Id: ' + call.id);\n\n            FSM(call, event,\n                function(call, transferEvent) {\n                    logger.debug('FSM handleEvent successful. (Call FSM) State Passed from ' +\n                        initialCallState + ' to ' +\n                        self.getCurrentState(call) + '. TransferEvent: ' +\n                        transferEvent + '. Call Id: ' + call.id);\n                    handler(call, transferEvent);\n                },\n                function(call, transferEvent) {\n                    logger.error('FSM handleEvent failure: ' + transferEvent +\n                        ' @ ' + self.getCurrentState(call) + '. Call Id: ' +\n                        call.id);\n                    handler(call, transferEvent);\n                });\n        } else {\n            logger.info('Not a call object. Ignore this event. ' + event);\n        }\n    };\n}\n","import errors from '../../errors';\nimport CONSTANTS from '../../constants';\nimport {Queue} from '../../utils';\n\nexport function RccManagerImpl({\n    RccFSM: _rccFSM,\n    RccControlService: _rccControlService,\n    LogManager: _logManager,\n    GlobalBroadcaster: _globalBroadcaster,\n    Utils: _utils,\n    Core: _core,\n    Config: _config,\n    NotificationCallbacks: _notificationCallbacks\n}) {\n\n    /* AUDIT_KICKOFF_TIMEOUT is the interval we use to kickoff call audit after the call is setup.\n     * The timeout is there to ensure we do not hit call setup race conditions when we try to kickoff the call audit */\n    var calls = {},\n        logger = _logManager.getLogger('rccManager'),\n        fsmNotificationEvent = _rccFSM.NotificationEvent,\n        fsmState = _rccFSM.CallFSMState,\n        self = this,\n        CALL_STATES = {\n            IN_CALL: 0,\n            ON_HOLD: 1,\n            RINGING: 2,\n            ENDED: 3,\n            REJECTED: 4,\n            OUTGOING: 5,\n            INCOMING: 6,\n            ANSWERING: 7,\n            JOINED: 8,\n            RENEGOTIATION: 9,\n            TRANSFERRED: 10,\n            ON_REMOTE_HOLD: 11,\n            CALL_IN_PROGRESS: 12,\n            EARLY_MEDIA: 13,\n            TRANSFER_FAILURE: 14\n        },\n        CALL_HOLD_STATES = {\n            LOCAL_HOLD: 0,\n            REMOTE_HOLD: 1,\n            BOTH_HOLD: 2\n        },\n        extendMonitorDeviceTimer = null,\n        isMonitorStarted = false,\n        isSubscription = false,\n        sessionParam = {},\n        onMonitorSessionLost,\n        monitorSessionLostNotification = {\n            monitorSessionRefreshed: 'monitorSessionRefreshed',\n            monitorSessionTerminated: 'monitorSessionTerminated'\n        },\n        onMonitorSessionRefreshed,\n        onMonitorSessionTerminated;\n\n    this.IncomingCall = function(callid, opts, callee, caller) {\n        var id = callid,\n            options = opts,\n            sendVideo = true,\n            isJoin = false,\n            buttonDisabler = false,\n            btnTimeout, auditTimer, calledParty = callee,\n            callingParty = caller;\n\n        this.notificationQueue = new Queue();\n        this.onLocalStreamAdded = null;\n        this.onStreamAdded = null;\n        this.mute = function() {\n            var param = {\n                callid: id,\n                mute: true\n            };\n\n            return self.mute(param);\n        };\n        this.unmute = function() {\n            var param = {\n                callid: id,\n                mute: false\n            };\n\n            return self.mute(param);\n        };\n\n        this.answer = function(onSuccess, onFailure, isVideoEnabled, videoResolution) {\n            var param = {\n                callid: id,\n                isVideoEnabled: isVideoEnabled,\n                videoResolution: videoResolution\n            };\n\n            if (options.answer) {\n                return self.answer(param, onSuccess, onFailure);\n            } else {\n                onFailure();\n            }\n        };\n\n        this.reject = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            if (options.reject) {\n                return self.reject(param, onSuccess, onFailure);\n            } else {\n                onFailure();\n            }\n        };\n\n        this.ignore = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.ignore(param, onSuccess, onFailure);\n        };\n\n        this.forward = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            if (options.forward) {\n                return self.forward(param, onSuccess, onFailure);\n            } else {\n                onFailure();\n            }\n        };\n\n        this.canReject = function() {\n            return options.reject === true;\n        };\n\n        this.canForward = function() {\n            return options.forward === true;\n        };\n\n        this.canAnswer = function() {\n            return options.answer === true;\n        };\n\n        this.canSendVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorSendLocalVideo(param);\n        };\n\n        this.canReceiveVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorReceiveRemoteVideo(param);\n        };\n\n        this.getHoldState = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getHoldStateOfCall(param);\n\n        };\n\n        this.getCalledParty = function() {\n            return calledParty;\n        };\n\n        this.getCallingParty = function() {\n            return callingParty;\n        };\n\n        this.getId = function() {\n            return id;\n        };\n\n        this.end = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.end(param, onSuccess, onFailure);\n        };\n\n        this.hold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.hold(param, onSuccess, onFailure);\n        };\n\n        this.unhold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.unhold(param, onSuccess, onFailure);\n        };\n\n        this.directTransfer = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            return self.directTransfer(param, onSuccess, onFailure);\n        };\n\n        this.consultativeTransfer = function(transferredCallId, onSuccess, onFailure) {\n            var param = {\n                currentCallId: id,\n                targetCallId: transferredCallId\n            };\n\n            return self.consultativeTransfer(param, onSuccess, onFailure);\n        };\n\n        this.videoStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isVideoStart: false\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.videoStart = function(onSuccess, onFailure, videoResolution) {\n            var param = {\n                callid: id,\n                isVideoStart: true,\n                videoResolution: videoResolution\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.join = function(anotherCall, onSuccess, onFailure) {\n            var param = {\n                callid1: id,\n                callid2: anotherCall.getId()\n            };\n\n            return self.join(param, onSuccess, onFailure);\n        };\n\n        this.sendDTMF = function(tone) {\n            var param = {\n                callid: id,\n                tone: tone\n            };\n\n            return self.sendDTMF(param);\n        };\n\n        this.sendIntraFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            if (sendVideo) {\n                return self.sendIntraFrame(param);\n            }\n        };\n        this.sendBlackFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.sendBlackFrame(param);\n        };\n\n        this.refreshVideoRenderer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.refreshVideoRenderer(param);\n        };\n\n        this.getJoin = function() {\n            return isJoin;\n        };\n\n        this.setJoin = function(join) {\n            isJoin = join;\n        };\n\n        this.getButtonDisabler = function() {\n            return buttonDisabler;\n        };\n\n        this.setButtonDisabler = function(disable) {\n            buttonDisabler = disable;\n            if (buttonDisabler) {\n                btnTimeout = setTimeout(function() {\n                    buttonDisabler = false;\n                },\n                4000);\n            }\n        };\n\n        this.clearBtnTimeout = function() {\n            clearTimeout(btnTimeout);\n        };\n\n        this.setAuditTimer = function(audit) {\n            auditTimer = setInterval(function() {\n                audit();\n            },\n            _config.callAuditTimer ? _config.callAuditTimer : 30000);\n        };\n\n        this.clearAuditTimer = function() {\n            clearInterval(auditTimer);\n        };\n\n        this.isCallMuted = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isCallMuted(param);\n        };\n\n        /* DEPRECIATED */\n        this.isVideoNegotationAvailable = function(id) {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotationAvailable(param);\n        };\n\n        this.isVideoNegotiationAvailable = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotiationAvailable(param);\n        };\n    };\n    this.OutgoingCall = function(callid, callee, caller) {\n        var id = callid,\n            sendVideo = true,\n            isJoin = false,\n            buttonDisabler = false,\n            btnTimeout, auditTimer, calledParty = callee,\n            callingParty = caller;\n\n        this.notificationQueue = new Queue();\n\n        this.onLocalStreamAdded = null;\n\n        this.onStreamAdded = null;\n\n        this.canSendVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorSendLocalVideo(param);\n        };\n\n        this.canReceiveVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorReceiveRemoteVideo(param);\n        };\n\n        this.getHoldState = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getHoldStateOfCall(param);\n        };\n\n        this.getId = function() {\n            return id;\n        };\n\n        this.getCalledParty = function() {\n            return calledParty;\n        };\n\n        this.getCallingParty = function() {\n            return callingParty;\n        };\n\n        this.sendIntraFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            if (sendVideo) {\n                return self.sendIntraFrame(param);\n            }\n        };\n\n        this.sendBlackFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.sendBlackFrame(param);\n        };\n\n        this.refreshVideoRenderer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.refreshVideoRenderer(param);\n        };\n\n        this.mute = function() {\n            var param = {\n                callid: id,\n                mute: true\n            };\n\n            return self.mute(param);\n        };\n\n        this.unmute = function() {\n            var param = {\n                callid: id,\n                mute: false\n            };\n\n            return self.mute(param);\n        };\n\n        this.end = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.end(param, onSuccess, onFailure);\n        };\n\n        this.hold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.hold(param, onSuccess, onFailure);\n        };\n\n        this.unhold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.unhold(param, onSuccess, onFailure);\n        };\n\n        this.directTransfer = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            return self.directTransfer(param, onSuccess, onFailure);\n        };\n\n        this.consultativeTransfer = function(transfaredCallId, onSuccess, onFailure) {\n            var param = {\n                currentCallId: id,\n                targetCallId: transfaredCallId\n            };\n\n            return self.consultativeTransfer(param, onSuccess, onFailure);\n        };\n\n        this.videoStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isVideoStart: false\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.videoStart = function(onSuccess, onFailure, videoResolution) {\n            var param = {\n                callid: id,\n                isVideoStart: true,\n                videoResolution: videoResolution\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.join = function(anotherCall, onSuccess, onFailure) {\n            var param = {\n                callid1: id,\n                callid2: anotherCall.getId()\n            };\n\n            return self.join(param, onSuccess, onFailure);\n        };\n\n        this.sendDTMF = function(tone) {\n            var param = {\n                callid: id,\n                tone: tone\n            };\n\n            return self.sendDTMF(param);\n        };\n\n        this.getJoin = function() {\n            return isJoin;\n        };\n\n        this.setJoin = function(join) {\n            isJoin = join;\n        };\n\n        this.getButtonDisabler = function() {\n            return buttonDisabler;\n        };\n\n        this.setButtonDisabler = function(disable) {\n            buttonDisabler = disable;\n            if (buttonDisabler) {\n                btnTimeout = setTimeout(function() {\n                    buttonDisabler = false;\n                },\n                4000);\n            }\n        };\n\n        this.clearBtnTimeout = function() {\n            clearTimeout(btnTimeout);\n        };\n\n        this.setAuditTimer = function(audit) {\n            auditTimer = setInterval(function() {\n                audit();\n            },\n            _config.callAuditTimer ? _config.callAuditTimer : 30000);\n        };\n\n        this.clearAuditTimer = function() {\n            clearInterval(auditTimer);\n        };\n\n        this.isCallMuted = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isCallMuted(param);\n        };\n\n        /* DEPRECIATED */\n        this.isVideoNegotationAvailable = function(id) {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotationAvailable(param);\n        };\n\n        this.isVideoNegotiationAvailable = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotiationAvailable(param);\n        };\n    };\n\n    self.mute = function() {\n        return;\n    };\n    self.reject = function() {\n        return;\n    };\n    self.ignore = function() {\n        return;\n    };\n    self.canOriginatorSendLocalVideo = function() {\n        return;\n    };\n    self.canOriginatorReceiveRemoteVideo = function() {\n        return;\n    };\n    self.videoStopStart = function() {\n        return;\n    };\n    self.sendDTMF = function() {\n        return;\n    };\n    self.sendIntraFrame = function() {\n        return;\n    };\n    self.sendBlackFrame = function() {\n        return;\n    };\n    self.refreshVideoRenderer = function() {\n        return;\n    };\n    self.isCallMuted = function() {\n        return;\n    };\n    /* DEPRECIATED */\n    self.isVideoNegotationAvailable = function() {\n        return;\n    };\n    self.isVideoNegotiationAvailable = function() {\n        return;\n    };\n\n    function setDeviceID(deviceid) {\n        sessionParam.deviceID = deviceid;\n    }\n\n    function setSessionID(sessionid) {\n        sessionParam.sessionID = sessionid;\n    }\n\n    function setExpiryTime(expirytime) {\n        sessionParam.expiryTime = expirytime;\n    }\n\n    function setMonitorSessionParam(deviceid, sessionid, expirytime) {\n        setDeviceID(deviceid);\n        setSessionID(sessionid);\n        setExpiryTime(expirytime);\n    }\n\n    function getMonitorSessionParam() {\n        return sessionParam;\n    }\n\n    function removeMonitorSessionParam() {\n        delete sessionParam.deviceID;\n        delete sessionParam.sessionID;\n        delete sessionParam.expiryTime;\n    }\n\n    /*\n     * clear call resources\n     * @param call call object\n     * @param state state that will be returned to web part\n     */\n    function clearResources(id) {\n        delete calls[id];\n    }\n\n    function clearAllResources() {\n        var id;\n        logger.info('Clear all call resource from JSL Api');\n        for (id in calls) {\n            if (calls.hasOwnProperty(id)) {\n                clearResources(id);\n                logger.info('Clear call resource from JSL Api - ' + id);\n            }\n        }\n    }\n\n    function stopExtendMonitorDeviceTimer() {\n        logger.info('extend monitor device subscription timer is stopped.');\n        isMonitorStarted = false;\n        clearInterval(extendMonitorDeviceTimer);\n        extendMonitorDeviceTimer = null;\n        clearAllResources();\n    }\n\n    function extendMonitorDeviceSubscription() {\n        var param = {\n            deviceID: getMonitorSessionParam().deviceID,\n            sessionID: getMonitorSessionParam().sessionID\n        };\n        _rccControlService.extendMonitor(param, function() {\n            logger.info('extend monitor device subscription request success.');\n        }, function(e) {\n            stopExtendMonitorDeviceTimer();\n            removeMonitorSessionParam();\n            _utils.callFunctionIfExist(onMonitorSessionLost, e);\n            logger.info('extend monitor device subscription request failure.');\n        });\n    }\n\n    function startExtendMonitorDeviceTimer(timer) {\n        logger.info('extend monitor device subscription timer is started.');\n        isMonitorStarted = true;\n        extendMonitorDeviceTimer = setInterval(extendMonitorDeviceSubscription, timer);\n    }\n\n    self.setOnMonitorSessionLost = function(data) {\n        onMonitorSessionLost = data.callback;\n    };\n\n    self.setOnMonitorSessionRefreshed = function(data) {\n        onMonitorSessionRefreshed = data.callback;\n    };\n\n    self.setOnMonitorSessionTerminated = function(data) {\n        onMonitorSessionTerminated = data.callback;\n    };\n\n    self.CALL_STATES = CALL_STATES;\n    self.CALL_HOLD_STATES = CALL_HOLD_STATES;\n\n    self.hasGotCalls = function() {\n        var callid, internalCall;\n        for (callid in calls) {\n            if (calls.hasOwnProperty(callid)) {\n                internalCall = calls[callid];\n                if (internalCall) {\n                    logger.info('has got call - id: ' + callid + ' - state: ' + _rccFSM.getCurrentState(internalCall));\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    self.getCalls = function() {\n        return calls;\n    };\n\n    function isCall(id) {\n        if (self.getCalls()[id]) {\n            return true;\n        }\n        return false;\n    }\n\n    self.delegateToCallFSM = function(call, stateMessage) {\n        _rccFSM.handleEvent(call, stateMessage, self.onStateChange);\n    };\n\n    function monitorStarted() {\n        return isMonitorStarted;\n    }\n\n    self.isSubscribed = function isSubscribed() {\n        return isSubscription;\n    };\n\n    function subscriptionStarted() {\n        isSubscription = true;\n    }\n\n    function subscriptionStopped() {\n        if (monitorStarted()) {\n            stopExtendMonitorDeviceTimer();\n            removeMonitorSessionParam();\n        }\n        isSubscription = false;\n    }\n\n    function isDeviceMonitor(deviceID) {\n        return (typeof deviceID === 'string') && (deviceID.length > 0);\n    }\n\n    self.start = function(data, onSuccess, onFailure) {\n        var internalCall = {},\n            param = {\n                destination: data.to,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('start call... to: ' + data.to);\n\n        if (!monitorStarted()) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        _rccControlService.makeCall(param, function(reponse) {\n\n            internalCall.call = new self.OutgoingCall(reponse.rccCallResponse.callId);\n            internalCall.id = reponse.rccCallResponse.callId;\n\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.makeCall_GUI);\n            calls[reponse.rccCallResponse.callId] = internalCall;\n            _utils.callFunctionIfExist(onSuccess, internalCall.call);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n    };\n\n    self.startMonitorDevice = function(data, onSuccess, onFailure) {\n\n        logger.info('Called start Monitor Device function with ' + data.deviceID);\n\n        if (!self.isSubscribed()) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        // if string with length greater than 0 device monitor, otherwise\n        // user monitor will be started.\n        if (!isDeviceMonitor(data.deviceID)) {\n            // null is used in internal logic for user monitor.\n            data.deviceID = null;\n        }\n\n        var param = {\n            deviceID: data.deviceID\n        };\n\n        _rccControlService.startMonitor(param, function(response) {\n            setMonitorSessionParam(data.deviceID, response.rccSessionResponse.sessionId, response.rccSessionResponse.expires);\n            startExtendMonitorDeviceTimer(response.rccSessionResponse.expires / 2 * 1000);\n            _utils.callFunctionIfExist(onSuccess);\n            logger.info('Start monitor device request successfuly');\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n            logger.info('Start monitor device request failure : ' + e);\n        });\n    };\n\n    self.stopMonitorDevice = function(onSuccess, onFailure) {\n        var param = {\n            deviceID: getMonitorSessionParam().deviceID,\n            sessionID: getMonitorSessionParam().sessionID\n        };\n\n        logger.info('Called stop monitor device function');\n\n        if (!monitorStarted()) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        _rccControlService.stopMonitor(param, function() {\n            stopExtendMonitorDeviceTimer();\n            removeMonitorSessionParam();\n            _utils.callFunctionIfExist(onSuccess);\n            logger.info('Stop monitor device request successfuly');\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n            logger.info('Stop monitor device request failure : ' + e);\n        });\n    };\n\n\n    self.answer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            param = {\n                callId: data.callid,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call answer function.Call id : ' + data.callid);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        // Answer call is supported for only device level monitoring\n        if (!isDeviceMonitor(getMonitorSessionParam().deviceID)) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(internalCall);\n\n        if (currentCallState === fsmState.CALL_RECEIVED) {\n            internalCall.answerSuccessCallback = onSuccess;\n            internalCall.answerFailureCallback = onFailure;\n            //send answer call\n            _rccControlService.answerCall(\n                param,\n                function() {\n                    // If monitered device does not support auto answer, SPiDR returns rest request success and\n                    // does not return any negative notifications. Server side solution was not available.\n                    // New design is as follows: In the RCC case, JSL shall not invoke success\n                    // or failure callback until established Event or endCall event is received.\n                    self.delegateToCallFSM(internalCall, fsmNotificationEvent.answerCall_GUI);\n                    logger.info('Call answer request successfuly.');\n                },\n                function(e) {\n                    logger.info('Call answer request failure. ' + e);\n                });\n        } else {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    self.hold = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            param = {\n                callId: data.callid,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call hold function.Call id : ' + data.callid);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(internalCall);\n\n        if (currentCallState === fsmState.ANSWERED ||\n            currentCallState === fsmState.REMOTE_HOLD) {\n            _rccControlService.holdCall(param,\n                function() {\n                    self.delegateToCallFSM(internalCall, fsmNotificationEvent.holdCall_GUI);\n                    _utils.callFunctionIfExist(onSuccess);\n                    logger.info('Call hold request successfuly.');\n                },\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, e);\n                    logger.info('Call hold request failure. ' + e);\n                }\n            );\n        } else {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    self.unhold = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            param = {\n                callId: data.callid,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call unhold function.Call id : ' + data.callid);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(internalCall);\n\n        if (currentCallState === fsmState.LOCAL_HOLD ||\n            currentCallState === fsmState.BOTH_HOLD) {\n\n            _rccControlService.retrieveCall(param,\n                function() {\n                    self.delegateToCallFSM(internalCall, fsmNotificationEvent.retrieveCall_GUI);\n                    _utils.callFunctionIfExist(onSuccess);\n                    logger.info('Call unhold request successfuly.');\n                },\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, e);\n                    logger.info('Call unhold request failure. ' + e);\n                }\n            );\n        } else {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    self.end = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            _currentState,\n            param = {\n                callId: data.callid,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call end function.Call id : ' + data.callid);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        _currentState = _rccFSM.getCurrentState(internalCall);\n        //check with the state machine if the current state would accept an endCall.\n        if (_currentState === fsmState.INIT || _currentState === fsmState.ENDING_CALL) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        } else {\n            _rccControlService.endCall(\n                param,\n                function() {\n                    self.delegateToCallFSM(internalCall, fsmNotificationEvent.endCall_GUI);\n                    _utils.callFunctionIfExist(onSuccess);\n                    logger.info('Call end request successfuly.');\n                },\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, e);\n                    logger.info('Call end request failure. ' + e);\n                }\n            );\n        }\n    };\n\n    self.forward = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            param = {\n                callId: data.callid,\n                destination: data.address,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call forward function.Call id : ' + data.callid + ' ,address : ' + data.address);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(internalCall);\n        if (currentCallState === fsmState.CALL_RECEIVED) {\n            _rccControlService.deflectCall(param,\n                function() {\n                    self.delegateToCallFSM(internalCall, fsmNotificationEvent.deflectCall_GUI);\n                    _utils.callFunctionIfExist(onSuccess);\n                    logger.info('Call forward request successfuly.');\n                },\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, e);\n                    logger.info('Call forward request failure. ' + e);\n                });\n        } else {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    self.consultativeTransfer = function(data, onSuccess, onFailure) {\n        var currentInternalCall = calls[data.currentCallId],\n            targetInternalCall = calls[data.targetCallId],\n            currentCallState,\n            targetCallState,\n            param = {\n                currentCallId: data.currentCallId,\n                targetCallId: data.targetCallId,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call consultativeTransfer function.Current Call Id : ' + data.currentCallId + ' ,Target Call Id : ' + data.targetCallId);\n\n        if (!currentInternalCall || !targetInternalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(currentInternalCall);\n        targetCallState = _rccFSM.getCurrentState(targetInternalCall);\n        if (currentCallState !== fsmState.ANSWERED) {\n            logger.error('consultativeTransfer current call is not in correct state: ' + currentCallState);\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        } else if (targetCallState !== fsmState.LOCAL_HOLD &&\n            targetCallState !== fsmState.BOTH_HOLD) {\n            logger.error('consultativeTransfer target call is not in correct state: ' + targetCallState);\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        } else {\n            _rccControlService.consultativeTransfer(param, function() {\n                self.delegateToCallFSM(currentInternalCall, fsmNotificationEvent.consultativeTransfer_GUI);\n                _utils.callFunctionIfExist(onSuccess);\n                logger.info('Call consultativeTransfer request successfuly.');\n            }, function(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n                logger.info('Call consultativeTransfer request failure. ' + e);\n            });\n        }\n    };\n\n    self.join = function(data, onSuccess, onFailure) {\n        var currentCall = calls[data.callid1],\n            currentCallState, targetCallState,\n            targetCall = calls[data.callid2],\n            param = {\n                currentCall: data.callid1,\n                targetCall: data.callid2,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n        if (!currentCall && targetCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(currentCall);\n        targetCallState = _rccFSM.getCurrentState(targetCall);\n        if (currentCallState === fsmState.ANSWERED &&\n            (targetCallState === fsmState.LOCAL_HOLD || targetCallState === fsmState.BOTH_HOLD)) {\n            logger.info('Called call join function. CallId1 : ' + data.callid1 + ' CallId2 : ' + data.callid2);\n            _rccControlService.conferenceCall(param, function() {\n                self.delegateToCallFSM(currentCall, fsmNotificationEvent.conferenceCall_GUI);\n                _utils.callFunctionIfExist(onSuccess);\n                logger.info('Join conference request successfly. ');\n            }, function(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else {\n            logger.error('conference call is not in correct state: ' + currentCallState);\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    self.getDeviceList = function(onSuccess, onFailure) {\n        if (!self.isSubscribed()) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n        logger.info('Called getDeviceList function.');\n        _rccControlService.getDeviceList(function(responseData) {\n            _utils.callFunctionIfExist(onSuccess, responseData.rccDeviceResponse.deviceList);\n            logger.info('GetDeviceList request successfuly.');\n            logger.debug('Response data: ' + JSON.stringify(responseData));\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n            logger.info('GetDeviceList request failure.');\n        });\n    };\n\n\n    self.directTransfer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            param = {\n                callId: data.callid,\n                destination: data.address,\n                deviceID: getMonitorSessionParam().deviceID,\n                sessionID: getMonitorSessionParam().sessionID\n            };\n\n        logger.info('Called call directTransfer function.Call Id : ' + data.callid + ' ,Destination : ' + data.destination);\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _rccFSM.getCurrentState(internalCall);\n        if (currentCallState === fsmState.LOCAL_HOLD ||\n            currentCallState === fsmState.REMOTE_HOLD ||\n            currentCallState === fsmState.ANSWERED ||\n            currentCallState === fsmState.BOTH_HOLD) {\n            //TODO: force localhold - if the user is not on hold\n            logger.info('[rccManager.directTransfer->sendTransfer : transfer target ]' + data.address);\n            _rccControlService.blindTransfer(param, function() {\n                self.delegateToCallFSM(internalCall, fsmNotificationEvent.blind_transfering_GUI);\n                _utils.callFunctionIfExist(onSuccess);\n                logger.info('[rccManager.directTransfer->sentTransfer : transfer target ]' + data.address);\n            }, function(e) {\n                logger.info('Call directTransfer request failure. ' + e);\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else {\n            logger.error('directTransfer call is not in correct state: ' + currentCallState);\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n    };\n\n    //TODO sessionParams attributes\n    self.onNotificationEvent = function(type, sessionParams) {\n        var callid = sessionParams.callId,\n            statusCode = sessionParams.statusCode,\n            internalCall = calls[callid];\n\n        logger.debug('Notification received ' + type + ' callid:' + callid);\n\n        if (internalCall) {\n            internalCall.statusCode = statusCode;\n        }\n        self.delegateToCallFSM(internalCall, type);\n    };\n\n    self.onStateChange = function(call, event) {\n        var transferEvent = _rccFSM.TransferEvent;\n        calls[call.id] = call;\n\n        function triggerCallState(state, data) {\n            logger.debug('triggerCallState:  state =   ' + state + '    call.statusCode =  ' + call.statusCode + '   call.reasonText =  ' + call.reasonText + ' data = ' + JSON.stringify(data));\n            call.call.callState = state;\n            _utils.callFunctionIfExist(call.call.onStateChange, state, call.statusCode, call.reasonText, data);\n        }\n\n        function getCallerAndCalleeData(call) {\n            return {\n                calledParty: call.calledParty,\n                callingParty: call.callingParty\n            };\n        }\n\n        logger.info('Transfer Event: ' + event + '. callId: ' + call.id);\n        switch (event) {\n        case transferEvent.makeCall_fsm:\n        case transferEvent.endCall_fsm:\n        case transferEvent.deflectCall_fsm:\n        case transferEvent.blind_transfering_fsm:\n        case transferEvent.holdCall_fsm:\n        case transferEvent.retrieveCall_fsm:\n        case transferEvent.answerCall_fsm:\n        case transferEvent.consultativeTransfer_fsm:\n            break;\n        case transferEvent.callInProgress_fsm:\n            triggerCallState(CALL_STATES.CALL_IN_PROGRESS, getCallerAndCalleeData(call));\n            break;\n        case transferEvent.ringing_fsm:\n            triggerCallState(CALL_STATES.RINGING, getCallerAndCalleeData(call));\n            break;\n        case transferEvent.answered_fsm:\n            triggerCallState(CALL_STATES.IN_CALL, getCallerAndCalleeData(call));\n            break;\n        case transferEvent.conferenced_fsm:\n            triggerCallState(CALL_STATES.JOINED);\n            break;\n        case transferEvent.callReceived_fsm:\n            triggerCallState(CALL_STATES.INCOMING, getCallerAndCalleeData(call));\n            break;\n        case transferEvent.callFailed_fsm:\n            clearResources(call.id);\n            triggerCallState(CALL_STATES.REJECTED);\n            break;\n        case transferEvent.blindTransferFailed_fsm:\n            triggerCallState(CALL_STATES.TRANSFER_FAILURE);\n            break;\n        case transferEvent.consultativeTransferFailed_fsm:\n            triggerCallState(CALL_STATES.TRANSFER_FAILURE);\n            break;\n        case transferEvent.conferenceCallFailed_fsm:\n            triggerCallState(CALL_STATES.TRANSFER_FAILURE);\n            break;\n        case transferEvent.callEnded_fsm:\n            clearResources(call.id);\n            triggerCallState(CALL_STATES.ENDED);\n            break;\n        case transferEvent.callHeldLocally_fsm:\n        case transferEvent.callHeldBoth_fsm:\n            triggerCallState(CALL_STATES.ON_HOLD);\n            break;\n        case transferEvent.callHeldRemotely_fsm:\n            triggerCallState(CALL_STATES.ON_REMOTE_HOLD);\n            break;\n        case transferEvent.callRetrievedRemotely_fsm:\n            switch (_rccFSM.getCurrentState(call)) {\n            case fsmState.LOCAL_HOLD:\n                triggerCallState(CALL_STATES.ON_HOLD);\n                break;\n            case fsmState.ANSWERED:\n                triggerCallState(CALL_STATES.IN_CALL);\n                break;\n            default:\n                logger.error('Undefined transition event: ' + event + ' for ' + call.id);\n                break;\n            }\n            break;\n        case transferEvent.callRetrievedLocally_fsm:\n            switch (_rccFSM.getCurrentState(call)) {\n            case fsmState.REMOTE_HOLD:\n                triggerCallState(CALL_STATES.ON_REMOTE_HOLD);\n                break;\n            case fsmState.ANSWERED:\n                triggerCallState(CALL_STATES.IN_CALL);\n                break;\n            }\n            break;\n        case transferEvent.callBlindTransferred_fsm:\n        case transferEvent.callConsultativeTransferred_fsm:\n        case transferEvent.redirected_fsm:\n        case transferEvent.callTransferred_fsm:\n            clearResources(call.id);\n            triggerCallState(CALL_STATES.TRANSFERRED);\n            break;\n        default:\n            logger.error('Undefined transition event: ' + event + ' for ' + call.id);\n            break;\n        }\n\n    };\n\n    self.getHoldStateOfCall = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            return CALL_HOLD_STATES[_rccFSM.getCurrentState(internalCall)];\n        }\n        return undefined;\n    };\n\n    //TODO data attributes sessionParams=>notificationMessage\n    function handleCallControlNotification(type, data) {\n        if (type && data) {\n            self.onNotificationEvent(type, data);\n            logger.info('RemoteCallControl notification received: ' + 'type:' + type);\n        }\n    }\n\n    _notificationCallbacks.RemoteCallControl = function(data) {\n        var rccEvent = data.rccNotificationParams.rccEvent,\n            rccNotifyData = data.rccNotificationParams,\n            rccNotifySecondData = {},\n            incomingCall = {},\n            newOutgoingCall = {},\n            options, internalCall = calls[rccNotifyData.callId];\n\n        rccNotifyData.statusCode = data.statusCode;\n\n        logger.debug('rccNotifyData: ' + JSON.stringify(rccNotifyData));\n\n        if (isDeviceMonitor(getMonitorSessionParam().deviceID)) {\n            options = {\n                reject: false,\n                forward: true,\n                answer: true\n            };\n        } else {\n            options = {\n                reject: false,\n                forward: true,\n                answer: false\n            };\n        }\n\n        //---------------------------------------------------------------//\n        // This method workaround for RCC conferenced notify.\n        //\n        // Recaive Notify Example : {statusCode : 0,rccEvent: \"conferenced\",callId : \"joined callId\",endedCallId : \"endedCallId\"}\n        //\n        // Create new notify data  for ended call and launch double handleCallControlNotification().\n        // For joined call : handleCallControlNotification(rccNotifyData).\n        // For ended call : handleCallControlNotification(rccNotifySecondData);\n        function copyNotifyDataForConferencedDoubleCallID(data) {\n            rccNotifySecondData.rccEvent = 'callEnded';\n            rccNotifySecondData.callId = data.endedCallId;\n            rccNotifySecondData.statusCode = data.statusCode;\n            delete data.endedCallId;\n\n            return rccNotifySecondData;\n        }\n        //----------------------------------------------------------------//\n\n        function addCallerAndCalleeToTheCall(rccNotifyData) {\n            internalCall = calls[rccNotifyData.callId];\n            if (internalCall) {\n                internalCall.calledParty = rccNotifyData.calledParty;\n                internalCall.callingParty = rccNotifyData.callingParty;\n            }\n        }\n\n        switch (rccEvent) {\n        case fsmNotificationEvent.callRetrievedRemotely:\n            handleCallControlNotification(fsmNotificationEvent.callRetrievedRemotely, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callHeldRemotely:\n            handleCallControlNotification(fsmNotificationEvent.callHeldRemotely, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callRetrievedLocally:\n            handleCallControlNotification(fsmNotificationEvent.callRetrievedLocally, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callHeldLocally:\n            handleCallControlNotification(fsmNotificationEvent.callHeldLocally, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callTransferred:\n            handleCallControlNotification(fsmNotificationEvent.callTransferred, rccNotifyData);\n            break;\n        case fsmNotificationEvent.redirected:\n            handleCallControlNotification(fsmNotificationEvent.redirected, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callFailed:\n            if (internalCall) {\n                _utils.callFunctionIfExist(internalCall.answerFailureCallback, errors.CALL_FAILED);\n            }\n            handleCallControlNotification(fsmNotificationEvent.callFailed, rccNotifyData);\n            break;\n        case fsmNotificationEvent.answered:\n            addCallerAndCalleeToTheCall(rccNotifyData);\n            if (internalCall) {\n                _utils.callFunctionIfExist(internalCall.answerSuccessCallback);\n                // No need to trigger failure callback once answered successfully (answered event is received)\n                if (internalCall.answerFailureCallback) {\n                    internalCall.answerFailureCallback = undefined;\n                }\n            }\n            handleCallControlNotification(fsmNotificationEvent.answered, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callReceived:\n            incomingCall.call = new self.IncomingCall(rccNotifyData.callId, options, rccNotifyData.calledParty, rccNotifyData.callingParty);\n            incomingCall.id = rccNotifyData.callId;\n            calls[rccNotifyData.callId] = incomingCall;\n            _utils.callFunctionIfExist(_core.call.onReceived, incomingCall.call);\n            addCallerAndCalleeToTheCall(rccNotifyData);\n            handleCallControlNotification(fsmNotificationEvent.callReceived, rccNotifyData);\n            break;\n        case fsmNotificationEvent.ringing:\n            if (!isCall(rccNotifyData.callId)) {\n                newOutgoingCall.call = new self.OutgoingCall(rccNotifyData.callId, rccNotifyData.calledParty, rccNotifyData.callingParty);\n                newOutgoingCall.id = rccNotifyData.callId;\n                calls[rccNotifyData.callId] = newOutgoingCall;\n                _utils.callFunctionIfExist(_core.call.onOutgoingCall, newOutgoingCall.call);\n            }\n            addCallerAndCalleeToTheCall(rccNotifyData);\n            handleCallControlNotification(fsmNotificationEvent.ringing, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callInProgress:\n            if (!isCall(rccNotifyData.callId)) {\n                newOutgoingCall.call = new self.OutgoingCall(rccNotifyData.callId, rccNotifyData.calledParty, rccNotifyData.callingParty);\n                newOutgoingCall.id = rccNotifyData.callId;\n                calls[rccNotifyData.callId] = newOutgoingCall;\n                _utils.callFunctionIfExist(_core.call.onOutgoingCall, newOutgoingCall.call);\n            }\n            addCallerAndCalleeToTheCall(rccNotifyData);\n            handleCallControlNotification(fsmNotificationEvent.callInProgress, rccNotifyData);\n            break;\n        case fsmNotificationEvent.conferenced:\n            handleCallControlNotification(fsmNotificationEvent.callEnded, copyNotifyDataForConferencedDoubleCallID(rccNotifyData));\n            handleCallControlNotification(fsmNotificationEvent.conferenced, rccNotifyData);\n            break;\n        case fsmNotificationEvent.callEnded:\n            if (internalCall) {\n                _utils.callFunctionIfExist(internalCall.answerFailureCallback, errors.CALL_ENDED);\n            }\n            handleCallControlNotification(fsmNotificationEvent.callEnded, rccNotifyData);\n            break;\n        case fsmNotificationEvent.blindTransferFailed:\n            handleCallControlNotification(fsmNotificationEvent.blindTransferFailed, rccNotifyData);\n            break;\n        case fsmNotificationEvent.consultativeTransferFailed:\n            handleCallControlNotification(fsmNotificationEvent.consultativeTransferFailed, rccNotifyData);\n            break;\n        case fsmNotificationEvent.conferenceCallFailed:\n            handleCallControlNotification(fsmNotificationEvent.conferenceCallFailed, rccNotifyData);\n            break;\n        case monitorSessionLostNotification.monitorSessionRefreshed:\n            _utils.callFunctionIfExist(onMonitorSessionRefreshed);\n            break;\n        case monitorSessionLostNotification.monitorSessionTerminated:\n            stopExtendMonitorDeviceTimer();\n            removeMonitorSessionParam();\n            _utils.callFunctionIfExist(onMonitorSessionTerminated);\n            break;\n        default:\n            handleCallControlNotification(fsmNotificationEvent.unknowNotify, rccNotifyData);\n            break;\n        }\n    };\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.DEVICE_SUBSCRIPTION_STARTED, subscriptionStarted);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.DEVICE_SUBSCRIPTION_ENDED, subscriptionStopped);\n}\n","export function RccControlServiceImpl({ Http: _server }) {\n\n    function genericErrorParser(jqXHR, property) {\n        try {\n            return JSON.parse(jqXHR.responseText)[property];\n        } catch (e) {\n            return jqXHR.status;\n        }\n    }\n\n    // the following 5 response syntaxes are defined in the REST API.\n    function callRequestPostPutErrorParser(jqXHR) {\n        return genericErrorParser(jqXHR, 'rccCallResponse');\n    }\n\n    function callRequestDeleteErrorParser(jqXHR) {\n        return genericErrorParser(jqXHR, 'rccCallResponse');\n    }\n\n    function getDeviceListRequestErrorParser(jqXHR) {\n        return genericErrorParser(jqXHR, 'rccDeviceResponse');\n    }\n\n    function sessionRequestPostPutErrorParser(jqXHR) {\n        return genericErrorParser(jqXHR, 'rccSessionResponse');\n    }\n\n    function sessionRequestDeleteErrorParser(jqXHR) {\n        return genericErrorParser(jqXHR, 'rccSessionResponse');\n    }\n\n    // TODO: For now in rest error response cases, given error handler is\n    // called with an empty argument list. Can be refactored to map to an fcs.Errors\n    // if overall JSL rest error refactoring is being done.\n\n    function isUserMonitor(deviceID) {\n        return deviceID === null;\n    }\n\n    function rccToRccDevice() {\n        return '/rcc/rccdevice';\n    }\n\n    function rccToSession(deviceID) {\n        if (isUserMonitor(deviceID)) {\n            return '/rcc/session';\n        } else {\n            return '/rcc/rccdevice/' + deviceID + '/session';\n        }\n    }\n\n    function rccToSessionID(deviceID, sessionID) {\n        return rccToSession(deviceID) + '/' + sessionID;\n    }\n\n    function rccToCall(deviceID, sessionID) {\n        return rccToSessionID(deviceID, sessionID) + '/call';\n    }\n\n    function rccToCallID(deviceID, sessionID, callID) {\n        return rccToCall(deviceID, sessionID) + '/' + callID;\n    }\n\n    this.startMonitor = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccSessionRequest': {\n                'eventType': 'generic'\n            }\n        };\n\n        urlPostfix = rccToSession(requestData.deviceID);\n\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, sessionRequestPostPutErrorParser);\n    };\n    this.extendMonitor = function(requestData, onSuccess, onFailure) {\n        var data = null,\n            urlPostfix;\n\n        urlPostfix = rccToSessionID(requestData.deviceID, requestData.sessionID);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, sessionRequestPostPutErrorParser);\n\n    };\n    this.stopMonitor = function(requestData, onSuccess, onFailure) {\n        var urlPostfix;\n\n        urlPostfix = rccToSessionID(requestData.deviceID, requestData.sessionID);\n\n        _server.sendDeleteRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': {}\n        }, onSuccess, function() {\n            onFailure();\n        }, null, sessionRequestDeleteErrorParser);\n\n    };\n    this.makeCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'makeCall',\n                'destination': requestData.destination\n            }\n        };\n\n        urlPostfix = rccToCall(requestData.deviceID, requestData.sessionID);\n\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n    this.holdCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'holdCall'\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n\n    this.retrieveCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'retrieveCall'\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n    this.endCall = function(requestData, onSuccess, onFailure) {\n        var urlPostfix;\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendDeleteRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': {}\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestDeleteErrorParser);\n\n    };\n    this.deflectCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'deflectCall',\n                'destination': requestData.destination\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n    this.blindTransfer = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'blindTransfer',\n                'destination': requestData.destination\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n\n    this.consultativeTransfer = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'consultativeTransfer',\n                'callId': requestData.targetCallId\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.currentCallId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n\n    this.answerCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'answerCall'\n            }\n        };\n\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.callId);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, function() {\n            onFailure();\n        }, null, callRequestPostPutErrorParser);\n\n    };\n\n    this.conferenceCall = function(requestData, onSuccess, onFailure) {\n\n        var urlPostfix, data = {\n            'rccCallRequest': {\n                'action': 'conferenceCall',\n                'callId': requestData.targetCall\n            }\n        };\n        urlPostfix = rccToCallID(requestData.deviceID, requestData.sessionID, requestData.currentCall);\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, urlPostfix),\n            'data': data\n        }, onSuccess, onFailure, null, callRequestPostPutErrorParser);\n    };\n\n    this.getDeviceList = function(onSuccess, onFailure) {\n        var urlPostfix;\n\n        urlPostfix = rccToRccDevice();\n\n        _server.sendGetRequest({\n            'url': _server.getWAMUrl(1, urlPostfix)\n        }, onSuccess, function() {\n            onFailure();\n        }, null, getDeviceListRequestErrorParser);\n    };\n}\n","import {CallFSMImpl} from './callFsm';\nimport {CallManagerImpl} from './callManager';\nimport {CallControlServiceImpl} from './wamcall';\n\nexport default {\n    CallFSM: container => new CallFSMImpl(container),\n    CallManager: container => new CallManagerImpl(container),\n    CallControlService: container => new CallControlServiceImpl(container)\n};\n","/*\n * Finite State machine that defines state transition of basic call model.\n * State machine fires events during state transitions.\n * Components should register to FSM  in order to receive transition events\n *\n */\n\nexport function CallFSMImpl({ LogManager: _logManager }) {\n\n    this.CallFSMState = {\n        INIT: 'INIT',\n        RINGING: 'RINGING',\n        TRYING: 'TRYING',\n        ANSWERING: 'ANSWERING',\n        COMPLETED: 'COMPLETED',\n        RINGING_SLOW: 'RINGING_SLOW',\n        LOCAL_HOLD: 'LOCAL_HOLD',\n        LOCAL_HOLDING: 'LOCAL_HOLDING',\n        LOCAL_UNHOLDING: 'LOCAL_UNHOLDING',\n        LOCAL_VIDEO_STOP_START: 'LOCAL_VIDEO_STOP_START',\n        REMOTE_OFFER: 'REMOTE_OFFER',\n        REMOTE_HOLD: 'REMOTE_HOLD',\n        REMOTE_HOLDING: 'REMOTE_HOLDING',\n        REMOTE_UNHOLDING: 'REMOTE_UNHOLDING',\n        BOTH_HOLD: 'BOTH_HOLD',\n        JOINING: 'JOINING',\n        PROVISIONRECEIVED: 'PROVISIONRECEIVED',\n        REFER: 'REFER',\n        TRANSFERING: 'TRANSFERING',\n        LOCAL_SLOW_START_OFFER: 'LOCAL_SLOW_START_OFFER',\n        LOCAL_REOFFER: 'LOCAL_REOFFER',\n        REPLACING: 'REPLACING',\n        LOCAL_REJECTING: 'LOCAL_REJECTING',\n        LOCAL_ENDING: 'LOCAL_ENDING'\n    };\n\n    //CallFSM returns TransferEvent after state change\n    this.TransferEvent = {\n        unknownNotification_fsm: 'unknownNotification_fsm',\n        ignoredNotification_fsm: 'ignoredNotification_fsm',\n        callStart_fsm: 'callStart_fsm',\n        callReceived_fsm: 'callReceived_fsm',\n        answer_fsm: 'answer_fsm',\n        reject_GUI: 'reject_GUI',\n        rejectWithoutClearCallObject_GUI: 'rejectWithoutClearCallObject_GUI',\n        ignore_GUI: 'ignore_GUI',\n        callCompleted_fsm: 'callCompleted_fsm',\n        noAnswer_fsm: 'noAnswer_fsm',\n        localEnding_fsm: 'localEnding_fsm',\n        localEndingWithoutClearCallObject_fsm: 'localEndingWithoutClearCallObject_fsm',\n        localEnd_fsm: 'localEnd_fsm',\n        localReject_fsm: 'localReject_fsm',\n        remoteEnd_fsm: 'remoteEnd_fsm',\n        answeringRingingSlow_fsm: 'answeringRingingSlow_fsm',\n        callCompletedAnswering_fsm: 'callCompletedAnswering_fsm',\n        localHold_fsm: 'localHold_fsm',\n        localHolding_fsm: 'localHolding_fsm',\n        remoteHold_fsm: 'remoteHold_fsm',\n        remoteHolding_fsm: 'remoteHolding_fsm',\n        localUnHold_fsm: 'localUnHold_fsm',\n        localUnHolding_fsm: 'localUnHolding_fsm',\n        remoteUnHold_fsm: 'remoteUnHold_fsm',\n        remoteUnHolding_fsm: 'remoteUnHolding_fsm',\n        localVideoStopStart_fsm: 'localVideoStopStart_fsm',\n        remoteOffer_fsm: 'remoteOffer_fsm',\n        joining_fsm: 'joining_fsm',\n        sessionComplete_fsm: 'sessionComplete_fsm',\n        joiningSuccess_fsm: 'joiningSuccess_fsm',\n        sessionFail_fsm: 'sessionFail_fsm',\n        ringing_fsm: 'ringing_fsm',\n        respondCallUpdate_fsm: 'respondCallUpdate_fsm',\n        remoteCallUpdate_fsm: 'remoteCallUpdate_fsm',\n        remotePranswer_fsm: 'remotePranswer_fsm',\n        forward_fsm: 'forward_fsm',\n        refer_fsm: 'refer_fsm',\n        accepted_fsm: 'accepted_fsm',\n        transfering_fsm: 'transfering_fsm',\n        transferSuccess_fsm: 'transferSuccess_fsm',\n        transferFail_fsm: 'transferFail_fsm',\n        respondCallHoldUpdate_fsm: 'respondCallHoldUpdate_fsm',\n        remoteOfferDuringLocalHold_fsm: 'remoteOfferDuringHold_fsm',\n        renegotiationCompleted_fsm: 'renegotiationCompleted_fsm',\n        slowStartOfferDuringRemoteHold_fsm: 'slowStartOfferDuringRemoteHold_fsm',\n        slowStartOfferDuringOnCall_fsm: 'slowStartOfferDuringOnCall_fsm',\n        stateReverted_fsm: 'stateReverted_fsm',\n        glareCondition_fsm: 'glareCondition_fsm',\n        slowStartOfferProcessed_fsm: 'slowStartOfferProcessed_fsm',\n        performReconnectWorkaround_fsm: 'performReconnectWorkaround_fsm',\n        consultativeTransfer_fsm: 'consultativeTransfer_fsm',\n        performCreateNewPeerWorkaround_fsm: 'performCreateNewPeerWorkaround_fsm',\n        startCallReplace_fsm: 'startCallReplace_fsm',\n        startCallReplaceRejected_fsm: 'startCallReplaceRejected_fsm',\n        respondedFromAnotherDevice_fsm: 'respondedFromAnotherDevice_fsm',\n        deviceChange_fsm: 'deviceChange_fsm'\n    };\n\n    //CallFSM receives NotificationEvent\n    this.NotificationEvent = {\n        callStart_GUI: 'callStart_GUI',\n        callNotify: 'callNotify',\n        ringing_Notify: 'ringing_Notify',\n        answer_GUI: 'answer_GUI',\n        end_GUI: 'end_GUI',\n        respondCallUpdate_Notify: 'respondCallUpdate_Notify',\n        respondCallUpdate_Notify_sendOnly: 'respondCallUpdate_Notify_sendOnly',\n        respondCallUpdate_glareCondition_Notify: 'respondCallUpdate_glareCondition_Notify',\n        callCompleted_fsm: 'callCompleted_fsm',\n        callEnd_Notify: 'callEnd_Notify',\n        callNotify_noSDP: 'callNotify_noSDP',\n        startCallUpdate_slowStart_Notify: 'startCallUpdate_slowStart_Notify',\n        startCallUpdate_remoteHold_Notify: 'startCallUpdate_remoteHold_Notify',\n        startCallUpdate_remoteOffer_Notify: 'startCallUpdate_remoteOffer_Notify',\n        joining_Notify: 'joining_Notify',\n        sessionComplete_Notify: 'sessionComplete_Notify',\n        joiningSuccess_Notify: 'joiningSuccess_Notify',\n        sessionFail_Notify: 'sessionFail_Notify',\n        hold_GUI: 'hold_GUI',\n        unhold_GUI: 'unhold_GUI',\n        videoStopStart_GUI: 'videoStopStart_GUI',\n        sessionProgress: 'sessionProgress',\n        callCancel_Notify: 'callCancel_Notify',\n        forward_GUI: 'forward_GUI',\n        refer_JSL: 'refer_JSL',\n        accepted_Notify: 'accepted_Notify',\n        transfering: 'transfering',\n        requestFailure_JSL: 'requestFailure_JSL',\n        webrtcFailure_JSL: 'webrtcFailure_JSL',\n        remoteOfferProcessed_JSL: 'remoteOfferProcessed_JSL',\n        remoteHoldProcessed_JSL: 'remoteHoldProcessed_JSL',\n        remoteUnHoldProcessed_JSL: 'remoteUnHoldProcessed_JSL',\n        slowStartOfferProcessed_JSL: 'slowStartOfferProcessed_JSL',\n        performReconnectWorkaround_JSL: 'performReconnectWorkaround_JSL',\n        consultativeTransfer_GUI: 'consultativeTransfer_GUI',\n        performCreateNewPeerWorkaround_JSL: 'performCreateNewPeerWorkaround_JSL',\n        startCallReplace_Notify: 'startCallReplace_Notify',\n        endReject_GUI: 'endReject_GUI',\n        endIgnore_GUI: 'endIgnore_GUI',\n        revertState_JSL: 'revertState_JSL',\n        deviceChange_GUI: 'deviceChange_GUI'\n    };\n\n    var self = this,\n        logger = _logManager.getLogger('callFsm');\n\n    function FSM(call, event, onSuccess, onFailure) {\n        var callState = self.getCurrentState(call);\n        switch (callState) {\n        case self.CallFSMState.INIT:\n            switch (event) {\n            case self.NotificationEvent.callStart_GUI:\n                call.currentState = self.CallFSMState.TRYING;\n                onSuccess(call, self.TransferEvent.callStart_fsm);\n                break;\n            case self.NotificationEvent.callNotify:\n                call.currentState = self.CallFSMState.RINGING;\n                onSuccess(call, self.TransferEvent.callReceived_fsm);\n                break;\n            case self.NotificationEvent.callNotify_noSDP:\n                call.currentState = self.CallFSMState.RINGING_SLOW;\n                onSuccess(call, self.TransferEvent.callReceived_fsm);\n                break;\n            case self.NotificationEvent.joiningSuccess_Notify:\n                call.currentState = self.CallFSMState.PROVISIONRECEIVED;\n                onSuccess(call, self.TransferEvent.joiningSuccess_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REPLACING:\n            switch (event) {\n            case self.NotificationEvent.startCallReplace_Notify:\n                onSuccess(call, self.TransferEvent.startCallReplace_fsm);\n                break;\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.startCallReplaceRejected_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n            case self.NotificationEvent.callCancel_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.startCallReplaceRejected_fsm);\n                break;\n            case self.NotificationEvent.sessionProgress:\n            case self.NotificationEvent.ringing_Notify:\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.callCompleted_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.RINGING:\n            switch (event) {\n            case self.NotificationEvent.answer_GUI:\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.answer_fsm);\n                break;\n            case self.NotificationEvent.endReject_GUI:\n                call.currentState = self.CallFSMState.LOCAL_REJECTING;\n                onSuccess(call, self.TransferEvent.rejectWithoutClearCallObject_GUI);\n                break;\n            case self.NotificationEvent.endIgnore_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.ignore_GUI);\n                break;\n            case self.NotificationEvent.callNotify_noSDP:\n                call.currentState = self.CallFSMState.RINGING_SLOW;\n                onSuccess(call, self.TransferEvent.callReceived_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.callCancel_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.respondedFromAnotherDevice_fsm);\n                break;\n            case self.NotificationEvent.forward_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.forward_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.RINGING_SLOW:\n            switch (event) {\n            case self.NotificationEvent.answer_GUI:\n                call.currentState = self.CallFSMState.ANSWERING;\n                onSuccess(call, self.TransferEvent.answerRingingSlow_fsm);\n                break;\n            case self.NotificationEvent.endReject_GUI:\n                call.currentState = self.CallFSMState.LOCAL_REJECTING;\n                onSuccess(call, self.TransferEvent.rejectWithoutClearCallObject_GUI);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n            case self.NotificationEvent.callCancel_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.forward_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.forward_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.ANSWERING:\n            switch (event) {\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.callCompletedAnswering_fsm);\n                break;\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.TRYING:\n            switch (event) {\n            case self.NotificationEvent.sessionProgress:\n                call.currentState = self.CallFSMState.PROVISIONRECEIVED;\n                onSuccess(call, self.TransferEvent.remotePranswer_fsm);\n                break;\n            case self.NotificationEvent.ringing_Notify:\n                call.currentState = self.CallFSMState.PROVISIONRECEIVED;\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.noAnswer_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.callCompleted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.PROVISIONRECEIVED:\n            switch (event) {\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.callCompleted_fsm);\n                break;\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.LOCAL_ENDING;\n                onSuccess(call, self.TransferEvent.localEndingWithoutClearCallObject_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.ringing_Notify:\n                onSuccess(call, self.TransferEvent.ringing_fsm);\n                break;\n            case self.NotificationEvent.sessionProgress:\n                onSuccess(call, self.TransferEvent.remotePranswer_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.COMPLETED:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteHold_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_HOLDING;\n                onSuccess(call, self.TransferEvent.remoteHolding_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_slowStart_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_SLOW_START_OFFER;\n                onSuccess(call, self.TransferEvent.slowStartOfferDuringOnCall_fsm);\n                break;\n            case self.NotificationEvent.hold_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_HOLDING;\n                onSuccess(call, self.TransferEvent.localHolding_fsm);\n                break;\n            case self.NotificationEvent.videoStopStart_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_VIDEO_STOP_START;\n                onSuccess(call, self.TransferEvent.localVideoStopStart_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteOffer_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_OFFER;\n                onSuccess(call, self.TransferEvent.remoteOffer_fsm);\n                break;\n            case self.NotificationEvent.transfering:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.TRANSFERING;\n                onSuccess(call, self.TransferEvent.transfering_fsm);\n                break;\n            case self.NotificationEvent.callCancel_Notify:\n                onSuccess(call, self.TransferEvent.ignoredNotification_fsm);\n                break;\n            case self.NotificationEvent.performReconnectWorkaround_JSL:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.performReconnectWorkaround_fsm);\n                break;\n            case self.NotificationEvent.performCreateNewPeerWorkaround_JSL:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.performCreateNewPeerWorkaround_fsm);\n                break;\n            case self.NotificationEvent.deviceChange_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.deviceChange_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_REOFFER:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.respondCallUpdate_fsm);\n                break;\n            case self.NotificationEvent.webrtcFailure_JSL:\n            case self.NotificationEvent.requestFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REMOTE_OFFER:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.remoteOfferProcessed_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.renegotiationCompleted_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_VIDEO_STOP_START:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.respondCallUpdate_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_glareCondition_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.glareCondition_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_HOLDING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.LOCAL_HOLD;\n                if (call.previousState === self.CallFSMState.REMOTE_HOLD) {\n                    call.currentState = self.CallFSMState.BOTH_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.respondCallHoldUpdate_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_glareCondition_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.glareCondition_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_UNHOLDING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.currentState = self.CallFSMState.COMPLETED;\n                if (call.previousState === self.CallFSMState.BOTH_HOLD) {\n                    call.currentState = self.CallFSMState.REMOTE_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.respondCallHoldUpdate_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_glareCondition_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.glareCondition_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_HOLD:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteHold_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_HOLDING;\n                onSuccess(call, self.TransferEvent.remoteHolding_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteOffer_Notify:\n                onSuccess(call, self.TransferEvent.remoteOfferDuringLocalHold_fsm);\n                break;\n            case self.NotificationEvent.unhold_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_UNHOLDING;\n                onSuccess(call, self.TransferEvent.localUnHolding_fsm);\n                break;\n            case self.NotificationEvent.joining_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.JOINING;\n                onSuccess(call, self.TransferEvent.joining_fsm);\n                break;\n            case self.NotificationEvent.transfering:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.TRANSFERING;\n                onSuccess(call, self.TransferEvent.transfering_fsm);\n                break;\n            case self.NotificationEvent.performReconnectWorkaround_JSL:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.performReconnectWorkaround_fsm);\n                break;\n            case self.NotificationEvent.consultativeTransfer_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.TRANSFERING;\n                onSuccess(call, self.TransferEvent.transfering_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REMOTE_HOLDING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.remoteHoldProcessed_JSL:\n                call.currentState = self.CallFSMState.REMOTE_HOLD;\n                if (call.previousState === self.CallFSMState.LOCAL_HOLD) {\n                    call.currentState = self.CallFSMState.BOTH_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.remoteHold_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REMOTE_UNHOLDING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.remoteUnHoldProcessed_JSL:\n                call.currentState = self.CallFSMState.COMPLETED;\n                if (call.previousState === self.CallFSMState.BOTH_HOLD) {\n                    call.currentState = self.CallFSMState.LOCAL_HOLD;\n                }\n                call.previousState = callState;\n                onSuccess(call, self.TransferEvent.remoteUnHold_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REMOTE_HOLD:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteHold_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_HOLDING;\n                onSuccess(call, self.TransferEvent.remoteHolding_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteOffer_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_UNHOLDING;\n                onSuccess(call, self.TransferEvent.remoteUnHolding_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_slowStart_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_SLOW_START_OFFER;\n                onSuccess(call, self.TransferEvent.slowStartOfferDuringRemoteHold_fsm);\n                break;\n            case self.NotificationEvent.hold_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_HOLDING;\n                onSuccess(call, self.TransferEvent.localHolding_fsm);\n                break;\n            case self.NotificationEvent.joining_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.JOINING;\n                onSuccess(call, self.TransferEvent.joining_fsm);\n                break;\n            case self.NotificationEvent.performReconnectWorkaround_JSL:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.performReconnectWorkaround_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.BOTH_HOLD:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_remoteHold_Notify:\n            case self.NotificationEvent.startCallUpdate_remoteOffer_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_UNHOLDING;\n                onSuccess(call, self.TransferEvent.remoteUnHolding_fsm);\n                break;\n            case self.NotificationEvent.unhold_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_UNHOLDING;\n                onSuccess(call, self.TransferEvent.localUnHolding_fsm);\n                break;\n            case self.NotificationEvent.joining_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.JOINING;\n                onSuccess(call, self.TransferEvent.joining_fsm);\n                break;\n            case self.NotificationEvent.transfering:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.TRANSFERING;\n                onSuccess(call, self.TransferEvent.transfering_fsm);\n                break;\n            case self.NotificationEvent.performReconnectWorkaround_JSL:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_REOFFER;\n                onSuccess(call, self.TransferEvent.performReconnectWorkaround_fsm);\n                break;\n            case self.NotificationEvent.consultativeTransfer_GUI:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.TRANSFERING;\n                onSuccess(call, self.TransferEvent.transfering_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_slowStart_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.LOCAL_SLOW_START_OFFER;\n                onSuccess(call, self.TransferEvent.slowStartOfferDuringRemoteHold_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_SLOW_START_OFFER:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.COMPLETED;\n                onSuccess(call, self.TransferEvent.respondCallUpdate_fsm);\n                break;\n            case self.NotificationEvent.respondCallUpdate_Notify_sendOnly:\n                call.previousState = call.currentState;\n                call.currentState = self.CallFSMState.REMOTE_HOLD;\n                onSuccess(call, self.TransferEvent.respondCallUpdate_fsm);\n                break;\n            case self.NotificationEvent.requestFailure_JSL:\n            case self.NotificationEvent.webrtcFailure_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            case self.NotificationEvent.slowStartOfferProcessed_JSL:\n                onSuccess(call, self.TransferEvent.slowStartOfferProcessed_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.JOINING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.sessionComplete_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.sessionComplete_fsm);\n                break;\n            case self.NotificationEvent.sessionFail_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.sessionFail_fsm);\n                break;\n            case self.NotificationEvent.refer_JSL:\n                call.currentState = self.CallFSMState.REFER;\n                onSuccess(call, self.TransferEvent.refer_fsm);\n                break;\n            case self.NotificationEvent.revertState_JSL:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.stateReverted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.REFER:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.sessionComplete_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.sessionComplete_fsm);\n                break;\n            case self.NotificationEvent.sessionFail_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.sessionFail_fsm);\n                break;\n                //TODO Tolga - talk with lale\n            case self.NotificationEvent.accepted_Notify:\n                onSuccess(call, self.TransferEvent.accepted_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.TRANSFERING:\n            switch (event) {\n            case self.NotificationEvent.end_GUI:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnding_fsm);\n                break;\n            case self.NotificationEvent.callEnd_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.remoteEnd_fsm);\n                break;\n            case self.NotificationEvent.sessionComplete_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.transferSuccess_fsm);\n                break;\n            case self.NotificationEvent.sessionFail_Notify:\n                call.currentState = call.previousState;\n                onSuccess(call, self.TransferEvent.transferFail_fsm);\n                break;\n                //TODO this notification is consumed for now - it is there for completeness\n            case self.NotificationEvent.accepted_Notify:\n                onSuccess(call, self.TransferEvent.accepted_fsm);\n                break;\n            case self.NotificationEvent.startCallUpdate_slowStart_Notify:\n            case self.NotificationEvent.startCallUpdate_remoteHold_Notify:\n            case self.NotificationEvent.startCallUpdate_remoteOffer_Notify:\n                // Some client send hold during transfer\n                onSuccess(call, self.TransferEvent.remoteCallUpdate_fsm);\n                break;\n            default:\n                onFailure(call, self.TransferEvent.unknownNotification_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_ENDING:\n            switch (event) {\n            case self.NotificationEvent.callEnd_Notify:\n            case self.NotificationEvent.callCancel_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localEnd_fsm);\n                break;\n            }\n            break;\n        case self.CallFSMState.LOCAL_REJECTING:\n            switch (event) {\n            case self.NotificationEvent.callEnd_Notify:\n            case self.NotificationEvent.callCancel_Notify:\n                call.currentState = self.CallFSMState.INIT;\n                onSuccess(call, self.TransferEvent.localReject_fsm);\n                break;\n            }\n        }\n    }\n\n    self.getCurrentState = function(call) {\n        return (call.currentState ? call.currentState : self.CallFSMState.INIT);\n    };\n\n    this.handleEvent = function(call, event, handler) {\n        var initialCallState;\n        if (call) {\n            initialCallState = self.getCurrentState(call);\n            logger.info('FSM received NotificationEvent: ' + event + ' @ ' +\n                initialCallState + ' state' + '. Call Id: ' + call.id);\n\n            FSM(call, event,\n                function(call, transferEvent) {\n                    logger.debug('FSM handleEvent successful. (Call FSM) State Passed from ' +\n                        initialCallState + ' to ' +\n                        self.getCurrentState(call) + '. TransferEvent: ' +\n                        transferEvent + '. Call Id: ' + call.id);\n                    handler(call, transferEvent);\n                },\n                function(call, transferEvent) {\n                    logger.error('FSM handleEvent failure: ' + transferEvent +\n                        ' @ ' + self.getCurrentState(call) + '. Call Id: ' +\n                        call.id);\n                    handler(call, transferEvent);\n                });\n        }\n    };\n}\n","import CONSTANTS from '../../constants';\nimport {Queue, getProperty, parseAddress, extend} from '../../utils';\nimport errors from '../../errors';\nimport {find} from 'lodash/fp';\n\nexport function CallManagerImpl({\n    WebRtcManager: _webRtcManager,\n    CallFSM: _callFSM,\n    CallControlService: _callControlService,\n    SdpParser: _sdpParser,\n    LogManager: _logManager,\n    GlobalBroadcaster: _globalBroadcaster,\n    Utils: _utils,\n    Core: _core,\n    Config: _config,\n    Cache: _cache,\n    NotificationCallbacks: _notificationCallBacks\n}) {\n\n    /* AUDIT_KICKOFF_TIMEOUT is the interval we use to kickoff call audit after the call is setup.\n     * The timeout is there to ensure we do not hit call setup race conditions when we try to kickoff the call audit */\n    var calls = {},\n        bridges = [],\n        logger = _logManager.getLogger('callManager'),\n        AUDIT_KICKOFF_TIMEOUT = 3000,\n        isReconnected = false,\n        fsmNotificationEvent = _callFSM.NotificationEvent,\n        fsmState = _callFSM.CallFSMState,\n        self = this,\n        isQueueEnabled = true,\n        startCallInProgress = 0,\n        startCallQueue = [],\n        NOTIFICATION_STATE = {\n            BUSY: 0,\n            IDLE: 1\n        },\n        CALL_STATES = {\n            IN_CALL: 0,\n            ON_HOLD: 1,\n            RINGING: 2,\n            ENDED: 3,\n            REJECTED: 4,\n            OUTGOING: 5,\n            INCOMING: 6,\n            ANSWERING: 7,\n            JOINED: 8,\n            RENEGOTIATION: 9,\n            TRANSFERRED: 10,\n            ON_REMOTE_HOLD: 11,\n            CALL_IN_PROGRESS: 12,\n            EARLY_MEDIA: 13,\n            TRANSFER_FAILURE: 14,\n            REPLACING: 15\n        },\n        CALL_HOLD_STATES = {\n            LOCAL_HOLD: 0,\n            REMOTE_HOLD: 1,\n            BOTH_HOLD: 2\n        },\n        LOCAL_STATUS_CODES = {\n            STATUS_CODE_NOT_PROVIDED: '9900',\n            ENDED_BY_LOCAL: '9901',\n            REJECTED_BY_LOCAL: '9902',\n            IGNORED_BY_LOCAL: '9903',\n            RESPONDED_FROM_ANOTHER_DEVICE: '9904',\n            SESSION_COMPLETED: '9905',\n            JOIN_COMPLETED: '9906',\n            TRANSFERRED: '9907'\n        },\n        LOCAL_REASON_TEXTS = {\n            STATUS_CODE_NOT_PROVIDED: 'Reason not provided',\n            ENDED_BY_LOCAL: 'Ended by local user',\n            REJECTED_BY_LOCAL: 'Rejected by local user',\n            IGNORED_BY_LOCAL: 'Ignored by local user',\n            RESPONDED_FROM_ANOTHER_DEVICE: 'Responded from another device',\n            SESSION_COMPLETED: 'Session completed',\n            JOIN_COMPLETED: 'Join operation has completed',\n            TRANSFERRED: 'Transferred by remote user'\n        };\n\n    this.IncomingCall = function(callid, data) {\n        var id = callid,\n            options = data,\n            sendVideo = true,\n            isJoin = false,\n            buttonDisabler = false,\n            btnTimeout, auditTimer;\n\n        this.isOutgoing = false;\n        this.notificationQueue = new Queue();\n        this.onLocalStreamAdded = null;\n        this.onStreamAdded = null;\n        this.onMute = null;\n        this.onStateChange = null;\n        this.timestamp = Date.now();\n\n        this.getRemoteVideoState = function() {\n            return self.getRemoteVideoState(callid);\n        };\n\n        this.mute = function() {\n            var param = {\n                callid: id,\n                mute: true\n            };\n\n            return self.mute(param);\n        };\n        this.unmute = function() {\n            var param = {\n                callid: id,\n                mute: false\n            };\n\n            return self.mute(param);\n        };\n\n        this.silence = function() {\n            var param = {\n                callid: id,\n                silence: true\n            };\n\n            return self.silence(param);\n        };\n        this.unsilence = function() {\n            var param = {\n                callid: id,\n                silence: false\n            };\n\n            return self.silence(param);\n        };\n\n        this.isSilenced = function() {\n            return self.isSilenced({callid: id});\n        };\n\n        this.answer = function(onSuccess, onFailure, sendInitialVideo, videoResolution, params) {\n            var param = {\n                callid: id,\n                sendInitialVideo: sendInitialVideo,\n                videoResolution: videoResolution\n            };\n\n            param = extend(param, params);\n\n            if (options.answer) {\n                return self.answer(param, onSuccess, onFailure);\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.NOT_ALLOWED_SERVICE);\n            }\n        };\n\n        this.reject = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            if (options.reject) {\n                return self.reject(param, onSuccess, onFailure);\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.NOT_ALLOWED_SERVICE);\n            }\n        };\n\n        this.ignore = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.ignore(param, onSuccess, onFailure);\n        };\n\n        this.forward = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            if (options.forward) {\n                return self.forward(param, onSuccess, onFailure);\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.NOT_ALLOWED_SERVICE);\n            }\n        };\n\n        this.canReject = function() {\n            return options.reject === true;\n        };\n\n        this.canForward = function() {\n            return options.forward === true;\n        };\n\n        this.canAnswer = function() {\n            return options.answer === true;\n        };\n\n        this.canSendVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorSendLocalVideo(param);\n        };\n\n        this.canReceiveVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorReceiveRemoteVideo(param);\n        };\n\n        this.getHoldState = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getHoldStateOfCall(param);\n\n        };\n\n        this.getCustomParameters = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getCustomParametersOfCall(param);\n        };\n\n        this.setCustomParameters = function(customParams) {\n            var param = {\n                callid: id,\n                customParams: customParams\n            };\n\n            return self.setCustomParametersOfCall(param);\n        };\n\n        this.getId = function() {\n            return id;\n        };\n\n        this.end = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.end(param, onSuccess, onFailure);\n        };\n\n        this.hold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.hold(param, onSuccess, onFailure);\n        };\n\n        this.unhold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.unhold(param, onSuccess, onFailure);\n        };\n\n        this.getWebRtcStats = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.getWebRtcStats(param, onSuccess, onFailure);\n        };\n\n        this.getNativeWebRtcStats = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.getNativeWebRtcStats(param, onSuccess, onFailure);\n        };\n\n        this.startWebRtcStatsTimer = function(interval, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                interval: interval\n            };\n\n            return self.startWebRtcStatsTimer(param, onSuccess, onFailure);\n        };\n\n        this.stopWebRtcStatsTimer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.stopWebRtcStatsTimer(param);\n        };\n\n        this.directTransfer = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            return self.directTransfer(param, onSuccess, onFailure);\n        };\n\n        this.consultativeTransfer = function(transferredCallId, onSuccess, onFailure) {\n            var param = {\n                currentCallId: id,\n                targetCallId: transferredCallId\n            };\n\n            return self.consultativeTransfer(param, onSuccess, onFailure);\n        };\n\n        this.videoStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isVideoStart: false\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.videoStart = function(onSuccess, onFailure, videoResolution) {\n            var param = {\n                callid: id,\n                isVideoStart: true,\n                videoResolution: videoResolution\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.getMediaStream = function() {\n            return self.getMediaStream(id);\n        };\n\n        /**\n         * Start sharing the screen for this call after the call is established.\n         *\n         * @name fcs.call.IncomingCall#screenSharingStart\n         * @function\n         * @param {function} [onSuccess] The onSuccess() to be called when the screen sharing is started\n         * @param {function} [onFailure] The onFailure() to be called when the screen sharing could not be started\n         * @param {function} [onStopped] The onStopped() to be called when the user has clicked to stop sharing the screen.\n         * @param {object} [options] The screen sharing options\n         * @param {number} [options.width=1024] The width of the screen to request.\n         * @param {number} [options.height=768] The height of the screen to request.\n         * @param {number} [options.frameRate=15] The number of frames per second to request.\n         */\n        this.screenSharingStart = function(onSuccess, onFailure, onStopped, options) {\n            var param = {\n                callid: id,\n                isScreenStart: true,\n                options: options\n            };\n            self.screenStopStart(param, onSuccess, onFailure, onStopped);\n        };\n\n        /**\n         * Stop sharing the screen for this call after the call is established.\n         *\n         * @name fcs.call.OutgoingCall#screenSharingStop\n         * @function\n         * @param {function} [onSuccess] The onSuccess() to be called when the screen sharing is stopped.\n         * @param {function} [onFailure] The onFailure() to be called when the screen sharing could not be stopped.\n         */\n        this.screenSharingStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isScreenStart: false,\n                options: {}\n            };\n            self.screenStopStart(param, onSuccess, onFailure, null);\n        };\n\n        this.join = function(anotherCall, onSuccess, onFailure, isVideoEnabled, videoResolution) {\n            var param = {\n                callid1: id,\n                callid2: anotherCall.getId()\n            };\n\n            return self.join(param, onSuccess, onFailure, isVideoEnabled, videoResolution);\n        };\n\n        this.sendDTMF = function(tone) {\n            var param = {\n                callid: id,\n                tone: tone\n            };\n\n            return self.sendDTMF(param);\n        };\n\n        this.sendCustomParameters = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.sendCustomParameters(param, onSuccess, onFailure);\n        };\n\n        this.sendIntraFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            if (sendVideo) {\n                return self.sendIntraFrame(param);\n            }\n        };\n\n        this.sendBlackFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.sendBlackFrame(param);\n        };\n\n        this.refreshVideoRenderer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.refreshVideoRenderer(param);\n        };\n\n        this.getJoin = function() {\n            return isJoin;\n        };\n\n        this.setJoin = function(join) {\n            isJoin = join;\n        };\n\n        this.getButtonDisabler = function() {\n            return buttonDisabler;\n        };\n\n        this.setButtonDisabler = function(disable) {\n            buttonDisabler = disable;\n            if (buttonDisabler) {\n                btnTimeout = setTimeout(function() {\n                    buttonDisabler = false;\n                }, 4000);\n            }\n        };\n\n        this.clearBtnTimeout = function() {\n            clearTimeout(btnTimeout);\n        };\n\n        this.setAuditTimer = function(audit) {\n            auditTimer = setInterval(function() {\n                audit();\n            }, _config.callAuditTimer ? _config.callAuditTimer : 30000);\n        };\n\n        this.clearAuditTimer = function() {\n            clearInterval(auditTimer);\n        };\n\n        this.isCallMuted = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isCallMuted(param);\n        };\n\n        /* DEPRECIATED */\n        this.isVideoNegotationAvailable = function(id) {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotationAvailable(param);\n        };\n\n        this.isVideoNegotiationAvailable = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotiationAvailable(param);\n        };\n\n        this.changeDevices = function () {\n            var param = {\n                callid: id\n            };\n\n            return self.changeDevices(param);\n        };\n    };\n    this.OutgoingCall = function(callid) {\n        var id = callid,\n            sendVideo = true,\n            isJoin = false,\n            buttonDisabler = false,\n            btnTimeout, auditTimer;\n\n        this.isOutgoing = true;\n        this.notificationQueue = new Queue();\n        this.onLocalStreamAdded = null;\n        this.onStreamAdded = null;\n        this.onMute = null;\n        this.onStateChange = null;\n        this.timestamp = Date.now();\n\n        this.canSendVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorSendLocalVideo(param);\n        };\n\n        this.getRemoteVideoState = function() {\n            return self.getRemoteVideoState(callid);\n        };\n\n        this.canSendVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorSendLocalVideo(param);\n        };\n\n        this.canReceiveVideo = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.canOriginatorReceiveRemoteVideo(param);\n        };\n\n        this.getHoldState = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getHoldStateOfCall(param);\n        };\n\n        this.getCustomParameters = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.getCustomParametersOfCall(param);\n        };\n\n        this.setCustomParameters = function(customParams) {\n            var param = {\n                callid: id,\n                customParams: customParams\n            };\n\n            return self.setCustomParametersOfCall(param);\n        };\n\n        this.getId = function() {\n            return id;\n        };\n\n        this.sendIntraFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            if (sendVideo) {\n                return self.sendIntraFrame(param);\n            }\n        };\n\n        this.sendBlackFrame = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.sendBlackFrame(param);\n        };\n\n        this.refreshVideoRenderer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.refreshVideoRenderer(param);\n        };\n\n        this.mute = function() {\n            var param = {\n                callid: id,\n                mute: true\n            };\n\n            return self.mute(param);\n        };\n\n        this.unmute = function() {\n            var param = {\n                callid: id,\n                mute: false\n            };\n\n            return self.mute(param);\n        };\n\n        this.silence = function() {\n            var param = {\n                callid: id,\n                silence: true\n            };\n\n            return self.silence(param);\n        };\n\n        this.unsilence = function() {\n            var param = {\n                callid: id,\n                silence: false\n            };\n\n            return self.silence(param);\n        };\n\n        this.isSilenced = function() {\n            return self.isSilenced({callid: id});\n        };\n\n        this.end = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.end(param, onSuccess, onFailure);\n        };\n\n        this.hold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.hold(param, onSuccess, onFailure);\n        };\n\n        this.unhold = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.unhold(param, onSuccess, onFailure);\n        };\n\n        this.getWebRtcStats = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.getWebRtcStats(param, onSuccess, onFailure);\n        };\n\n        this.getNativeWebRtcStats = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.getNativeWebRtcStats(param, onSuccess, onFailure);\n        };\n\n        this.startWebRtcStatsTimer = function(interval, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                interval: interval\n            };\n\n            return self.startWebRtcStatsTimer(param, onSuccess, onFailure);\n        };\n\n        this.stopWebRtcStatsTimer = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.stopWebRtcStatsTimer(param);\n        };\n\n        this.directTransfer = function(address, onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                address: address\n            };\n\n            return self.directTransfer(param, onSuccess, onFailure);\n        };\n\n        this.consultativeTransfer = function(transfaredCallId, onSuccess, onFailure) {\n            var param = {\n                currentCallId: id,\n                targetCallId: transfaredCallId\n            };\n            return self.consultativeTransfer(param, onSuccess, onFailure);\n        };\n\n        this.videoStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isVideoStart: false\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.videoStart = function(onSuccess, onFailure, videoResolution) {\n            var param = {\n                callid: id,\n                isVideoStart: true,\n                videoResolution: videoResolution\n            };\n\n            return self.videoStopStart(param, onSuccess, onFailure);\n        };\n\n        this.getMediaStream = function() {\n            return self.getMediaStream(id);\n        };\n\n        /**\n         * Start sharing the screen for this call after the call is established.\n         *\n         * @name fcs.call.OutgoingCall#screenSharingStart\n         * @function\n         * @param {function} [onSuccess] The onSuccess() to be called when the screen sharing is started\n         * @param {function} [onFailure] The onFailure() to be called when the screen sharing could not be started\n         * @param {function} [onStopped] The onStopped() to be called when the user has clicked to stop sharing the screen.\n         * @param {object} [options] The screen sharing options\n         * @param {number} [options.width=1024] The width of the screen to request.\n         * @param {number} [options.height=768] The height of the screen to request.\n         * @param {number} [options.frameRate=15] The number of frames per second to request.\n         */\n        this.screenSharingStart = function(onSuccess, onFailure, onStopped, options) {\n            var param = {\n                callid: id,\n                isScreenStart: true,\n                options: options\n            };\n            self.screenStopStart(param, onSuccess, onFailure, onStopped);\n        };\n\n        /**\n         * Stop sharing the screen for this call after the call is established.\n         *\n         * @name fcs.call.OutgoingCall#screenSharingStop\n         * @function\n         * @param {function} [onSuccess] The onSuccess() to be called when the screen sharing is stopped.\n         * @param {function} [onFailure] The onFailure() to be called when the screen sharing could not be stopped.\n         */\n        this.screenSharingStop = function(onSuccess, onFailure) {\n            var param = {\n                callid: id,\n                isScreenStart: false,\n                options: {}\n            };\n            self.screenStopStart(param, onSuccess, onFailure, null);\n        };\n\n        this.join = function(anotherCall, onSuccess, onFailure, isVideoEnabled, videoResolution) {\n            var param = {\n                callid1: id,\n                callid2: anotherCall.getId()\n            };\n\n            return self.join(param, onSuccess, onFailure, isVideoEnabled, videoResolution);\n        };\n\n        this.sendDTMF = function(tone) {\n            var param = {\n                callid: id,\n                tone: tone\n            };\n\n            return self.sendDTMF(param);\n        };\n\n        this.sendCustomParameters = function(onSuccess, onFailure) {\n            var param = {\n                callid: id\n            };\n\n            return self.sendCustomParameters(param, onSuccess, onFailure);\n        };\n\n        this.getJoin = function() {\n            return isJoin;\n        };\n\n        this.setJoin = function(join) {\n            isJoin = join;\n        };\n\n        this.getButtonDisabler = function() {\n            return buttonDisabler;\n        };\n\n        this.setButtonDisabler = function(disable) {\n            buttonDisabler = disable;\n            if (buttonDisabler) {\n                btnTimeout = setTimeout(function() {\n                    buttonDisabler = false;\n                }, 4000);\n            }\n        };\n\n        this.clearBtnTimeout = function() {\n            clearTimeout(btnTimeout);\n        };\n\n        this.setAuditTimer = function(audit) {\n            auditTimer = setInterval(function() {\n                audit();\n            }, _config.callAuditTimer ? _config.callAuditTimer : 30000);\n        };\n\n        this.clearAuditTimer = function() {\n            clearInterval(auditTimer);\n        };\n\n        this.isCallMuted = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isCallMuted(param);\n        };\n\n        /* DEPRECIATED */\n        this.isVideoNegotationAvailable = function(id) {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotationAvailable(param);\n        };\n\n        this.isVideoNegotiationAvailable = function() {\n            var param = {\n                callid: id\n            };\n\n            return self.isVideoNegotiationAvailable(param);\n        };\n\n        this.changeDevices = function () {\n            var param = {\n                callid: id\n            };\n\n            return self.changeDevices(param);\n        };\n    };\n\n    this.LocalAudioBridge = function() {\n        var bridgedCalls = [];\n\n        /**\n         * This reserves a property name for a callback method which keeps\n         * the state of the Kandy SDK informed about which active calls exist\n         * in this bridge\n         *\n         * @type {Function}\n         */\n        this.onCallsChange = null;\n\n        this.muteLocalAudio = function() {\n            bridgedCalls.forEach(function(bridgedCall) {\n                _webRtcManager.muteAudioTrack(bridgedCall, true);\n            });\n        };\n\n        this.unmuteLocalAudio = function() {\n            bridgedCalls.forEach(function(bridgedCall) {\n                _webRtcManager.muteAudioTrack(bridgedCall, false);\n            });\n        };\n\n        this.silenceRemoteAudio = function() {\n            bridgedCalls.forEach(function(bridgedCall) {\n                bridgedCall.silenced = true;\n                _webRtcManager.updateSilenceStatus(bridgedCall);\n            });\n        };\n\n        this.unsilenceRemoteAudio = function() {\n            bridgedCalls.forEach(function(bridgedCall) {\n                bridgedCall.silenced = false;\n                _webRtcManager.updateSilenceStatus(bridgedCall);\n            });\n        };\n\n        this.add = function(call, onSuccess, onFailure ) {\n            var internalCall;\n            if (!(call instanceof self.IncomingCall) && !(call instanceof self.OutgoingCall)){\n                logger.error('LocalAudioBridge failure to add a non call object');\n                _utils.callFunctionIfExist(onFailure, errors.INVALID_PARAMETER);\n                return;\n            }\n\n            internalCall = calls[call.getId()];\n\n            if(!internalCall) {\n                logger.error('LocalAudioBridge failure to add a call which does not exist');\n                _utils.callFunctionIfExist(onFailure, errors.INVALID_PARAMETER);\n                return;\n            }\n\n            if (internalCall.currentState === fsmState.LOCAL_HOLD) {\n                logger.error('LocalAudioBridge failure to add a call which is on hold');\n                _utils.callFunctionIfExist(onFailure, errors.STATE);\n                return;\n            }\n\n            if (internalCall.bridge){\n                logger.error('LocalAudioBridge failure to add a call which is already bridged');\n                _utils.callFunctionIfExist(onFailure, errors.ENTRY_ALREADY_EXISTS);\n                return;\n            }\n\n            logger.info('LocalAudioBridge adding call:' + internalCall.id);\n\n            try {\n                bridgedCalls.forEach(function(bridgedCall) {\n                    //verify if the call is not ended before merging\n                    if(bridgedCall.currentState && bridgedCall.currentState !== fsmState.INIT) {\n                        _webRtcManager.mergeAudioStream(bridgedCall, internalCall);\n                    } else {\n                        logger.debug('Cannot merge audio of calls with init State:' + bridgedCall.id);\n                    }\n                });\n            } catch(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n                return;\n            }\n\n            bridgedCalls.push(internalCall);\n            internalCall.bridge = this;\n            // Notify the SDK that the bridge's call list has changed, by accessing a callback method on the bridge\n            _utils.callFunctionIfExist(this.onCallsChange, bridgedCalls);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        this.remove = function(call, onSuccess, onFailure) {\n            var internalCall;\n            if (!(call instanceof self.IncomingCall) && !(call instanceof self.OutgoingCall)){\n                logger.error('LocalAudioBridge failure to remove a non call object');\n                _utils.callFunctionIfExist(onFailure, errors.INVALID_PARAMETER);\n                return;\n            }\n\n            internalCall = calls[call.getId()];\n\n            var bridgeIndex = bridgedCalls.indexOf(internalCall);\n            if (bridgeIndex === -1){\n                logger.error('LocalAudioBridge failure to remove a call which is not in the bridge');\n                _utils.callFunctionIfExist(onFailure, errors.INVALID_PARAMETER);\n                return;\n            }\n\n            logger.info('LocalAudioBridge removing call:' + internalCall.id);\n\n            bridgedCalls.splice(bridgeIndex, 1);\n            delete internalCall.bridge;\n            // Notify the SDK that the bridge's call list has changed, by accessing a callback method on the bridge\n            _utils.callFunctionIfExist(this.onCallsChange, bridgedCalls);\n\n            try {\n                bridgedCalls.forEach(function(bridgedCall) {\n                    if(bridgedCall.currentState && bridgedCall.currentState !== fsmState.INIT) {\n                        _webRtcManager.unMergeAudioStream(bridgedCall, internalCall);\n                    }\n                });\n            } catch(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n            }\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        this.close = function() {\n            var call;\n            logger.info('Closing LocalAudioBridge');\n            while(bridgedCalls.length > 0) {\n                call = bridgedCalls.pop();\n                if (call.currentState && call.currentState !== fsmState.INIT) {\n                    bridgedCalls.forEach(function(bridgedCall) {\n                        if(bridgedCall.currentState && bridgedCall.currentState !== fsmState.INIT) {\n                            try {\n                                _webRtcManager.unMergeAudioStream(bridgedCall, call);\n                            } catch(e){\n                                logger.info('Could not unmerge stream for call:' + call.id);\n                            }\n                        }\n                    });\n                }\n                delete call.bridge;\n            }\n            var bridgeIndex = bridges.indexOf(this);\n            bridges.splice(bridgeIndex, 1);\n        };\n\n        this.cleanInternalCall = function(internalCall) {\n            logger.debug('Cleaning bridged call');\n            var callIndex = bridgedCalls.indexOf(internalCall);\n            // This check used to compare for callIndex > 0, but it was determined that the call should be removed\n            // even if it is the only call in the bridge\n            if(callIndex > -1) {\n                bridgedCalls.splice(callIndex, 1);\n                delete internalCall.bridge;\n                // Notify the SDK that the bridge's call list has changed, by accessing a callback method on the bridge\n                _utils.callFunctionIfExist(this.onCallsChange, bridgedCalls);\n            }\n        };\n    };\n\n    self.consultativeTransfer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.currentCallId],\n            targetCall = calls[data.targetCallId],\n            currentCallState, targetCallState;\n        internalCall.targetCallId = data.targetCallId;\n        if (targetCall.callerNumber) {\n            internalCall.targetAddress = targetCall.callerNumber;\n        } else {\n            internalCall.targetAddress = targetCall.call.callerNumber;\n        }\n        currentCallState = _callFSM.getCurrentState(internalCall);\n        targetCallState = _callFSM.getCurrentState(targetCall);\n        if ((currentCallState === fsmState.LOCAL_HOLD ||\n                currentCallState === fsmState.BOTH_HOLD) &&\n            (targetCallState === fsmState.LOCAL_HOLD ||\n                targetCallState === fsmState.BOTH_HOLD)) {\n            _callControlService.transfer(internalCall.id, internalCall.targetAddress, internalCall.targetCallId, function() {\n                logger.info('consultative transfer successful. callId: ' + internalCall.id);\n                self.delegateToCallFSM(internalCall, fsmNotificationEvent.consultativeTransfer_GUI);\n                _utils.callFunctionIfExist(onSuccess);\n            }, function(e) {\n                logger.error('consultative transfer failed. callId: ' + internalCall.id);\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else if (currentCallState === fsmState.LOCAL_HOLDING) {\n            if (!internalCall.transferTrigger) {\n                internalCall.transferTrigger = function() {\n                    self.consultativeTransfer(data, onSuccess, onFailure);\n                    delete this.transferTrigger;\n                };\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            }\n        } else if (targetCallState === fsmState.LOCAL_HOLDING) {\n            if (!targetCall.transferTrigger) {\n                targetCall.transferTrigger = function() {\n                    self.consultativeTransfer(data, onSuccess, onFailure);\n                    delete this.transferTrigger;\n                };\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            }\n        } else {\n            logger.error('Cannot consultative transfer in INIT callstate :' + _core.Errors.STATE);\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n        }\n    };\n\n    /*\n     * When connection re-establishes sets isReconnected flag true\n     */\n    function onConnectionLost() {\n        isReconnected = true;\n    }\n\n    /*\n     * clear call resources\n     * clear long call audit\n     * clear webrtc resources\n     * triger web part\n     *\n     * @param call call object\n     * @param state state that will be returned to web part\n     */\n    function clearResources(call, preserveCallObject) {\n        var onSuccess, onFailure, callStats = call, bridge;\n        if (call.call) {\n            call.call.clearAuditTimer();\n            call.isAuditing = false;\n        }\n        if (call.pendingRequestTimer) {\n            clearTimeout(call.pendingRequestTimer);\n        }\n        _webRtcManager.stopWebRtcStatsTimer(call);\n        callStats.cache = true;\n        _webRtcManager.getWebRtcStats(callStats, onSuccess, onFailure);\n        //clear webRTC resources\n        _webRtcManager.processEnd(call);\n        bridge = call.bridge;\n        if (bridge) {\n            bridge.cleanInternalCall(call);\n        }\n        if (typeof preserveCallObject === 'undefined') {\n            clearCallObject(call);\n        }\n    }\n\n    function clearCallObject(call) {\n        //clear call object\n        delete calls[call.id];\n    }\n\n    function setNotificationStateOfCallToBusy(internalCall) {\n        logger.debug('Setting notification state to BUSY for call: ' + internalCall.id);\n        internalCall.notificationState = NOTIFICATION_STATE.BUSY;\n    }\n\n    function setNotificationStateOfCallToIdle(internalCall) {\n        logger.debug('Setting notification state to IDLE for call: ' + internalCall.id);\n        internalCall.notificationState = NOTIFICATION_STATE.IDLE;\n    }\n\n    function isNotificationStateOfCallBusy(internalCall) {\n        return internalCall.notificationState === NOTIFICATION_STATE.BUSY;\n    }\n\n    function triggerQueue(call) {\n        if (!isQueueEnabled) {\n            return;\n        }\n        logger.debug('NOTIFICATION_QUEUE: Process completed, notification queue state changed to IDLE');\n        setNotificationStateOfCallToIdle(call);\n        if (call.call.notificationQueue.size() > 0) {\n            logger.debug('NOTIFICATION_QUEUE: New notification found in queue, processing it!');\n            var notificationObj = call.call.notificationQueue.dequeue();\n            self.onNotificationEvent(notificationObj.type, notificationObj.sessionParams, notificationObj.callNotificationParams);\n        }\n    }\n\n    function processStartCallQueue(internalCall){\n        //put the notification for the same call id that were received before the answer into the\n        //call notificationQueue and remove any expired notifications.\n        logger.info('Processing startCallQueue');\n        startCallQueue = startCallQueue.filter(function(notification){\n            if (notification.expires < Date.now()) {\n                return false;\n            } else if(notification.sessionParams.sessionData === internalCall.id){\n                internalCall.call.notificationQueue.enqueue(notification);\n                return false;\n            }\n            return true;\n        });\n        if(internalCall.call.notificationQueue.size() > 0){\n            setTimeout(function(){\n                triggerQueue(internalCall);\n            },1);\n        }\n    }\n\n    function onSubscriptionReEstablished() {\n        var id, internalCall;\n        if (isReconnected) {\n            isReconnected = false;\n            for (id in calls) {\n                if (calls.hasOwnProperty(id)) {\n                    internalCall = calls[id];\n\n                    if (internalCall) {\n                        const defaultActiveCallTimeoutMS = 120000; // 2 minutes\n                        var activeCallTimeout = (typeof(_config.activeCallTimeoutMS)!== 'undefined')? _config.activeCallTimeoutMS: defaultActiveCallTimeoutMS;\n                        var callAge = (Date.now() - internalCall.call.timestamp);\n\n                        // if there is a call, it's ringing, and it's old, end it.\n                        // Otherwise, process it.\n                        if (_callFSM.getCurrentState(internalCall) === fsmState.RINGING && callAge > activeCallTimeout ) {\n                            // Send 0 to delete the call\n                            internalCall.call.onStateChange(CALL_STATES.ENDED, 0);\n                            clearResources(internalCall);\n                        } else {\n                            setNotificationStateOfCallToBusy(internalCall);\n                            self.delegateToCallFSM(internalCall, fsmNotificationEvent.performReconnectWorkaround_JSL);\n                        }\n                    }\n                }\n            }\n        }\n        /*\n        * For all internal calls, GET the status of the calls and update their state accordignly if required\n        * Assumptions:\n        *  1. Signalling server supports Kandy Link 4.7.1+\n        * Responsibilities:\n        *  1. Update the call state if the call is out of sync (call's status does not match response from server)\n        */\n        if (!_config.callResyncOnConnect) {\n            return;\n        }\n        for (id in calls) {\n            if (calls.hasOwnProperty(id) && calls[id]) {\n                internalCall = calls[id];\n                var callStateOnConnect = _callFSM.getCurrentState(internalCall);\n                // Only need to proceed if the call is active (i.e., not ended) and there is no ongoing operation.\n                if (internalCall.notificationState !== NOTIFICATION_STATE.BUSY && callStateOnConnect !== fsmState.ENDED && callStateOnConnect !== fsmState.REJECTED) {\n                    _callControlService.getSession(id,\n                        function(response) {\n                            /*\n                                * If the current call state is ringing OR if the state of the call was connected/on hold before we\n                                * did the GET, look at the response of the GET request.\n                                * If call is ringing and GET session returns ringing, we don't need to do anything\n                                * Also, if we were previously connected, but GET returns ringing, this could be due to an operation that was resolved\n                                * between the GET request and response. In any case, no need to look at GET response for this scenario.\n                                */\n                            if (\n                                internalCall.notificationState !== NOTIFICATION_STATE.BUSY &&\n                                _callFSM.getCurrentState(internalCall) === fsmState.RINGING &&\n                                response.callControlResponse.state === 'ANSWERED'\n                            ) {\n                                internalCall.localStatusCode = LOCAL_STATUS_CODES.RESPONDED_FROM_ANOTHER_DEVICE;\n                                internalCall.localReasonText = LOCAL_REASON_TEXTS.RESPONDED_FROM_ANOTHER_DEVICE;\n                                internalCall.call.onStateChange(CALL_STATES.ENDED, 0);\n                                clearResources(internalCall);\n                            }\n                        },\n                        function(response) {\n                            var currentCallState = _callFSM.getCurrentState(internalCall);\n                            if (\n                                currentCallState !== fsmState.ENDED && currentCallState !== fsmState.REJECTED &&\n                                response && response.statusCode === 47\n                            ) {\n                                // Call not found on server, end call.\n                                if (!internalCall.localStatusCode) {\n                                    internalCall.localStatusCode = LOCAL_STATUS_CODES.STATUS_CODE_NOT_PROVIDED;\n                                }\n                                if (!internalCall.localReasonText) {\n                                    internalCall.localReasonText = LOCAL_REASON_TEXTS.STATUS_CODE_NOT_PROVIDED;\n                                }\n                                internalCall.call.onStateChange(CALL_STATES.ENDED, 0);\n                                clearResources(internalCall);\n                            } else {\n                                logger.info(`Unable to sync call ${id} due to an error. Error: ${response}`);\n                            }\n                        });\n                }\n            }\n        }\n    }\n\n    self.CALL_STATES = CALL_STATES;\n    self.CALL_HOLD_STATES = CALL_HOLD_STATES;\n    self.LOCAL_STATUS_CODES = LOCAL_STATUS_CODES;\n    self.LOCAL_REASON_TEXTS = LOCAL_REASON_TEXTS;\n\n    self.initMedia = function(data, onSuccess, onFailure) {\n        _webRtcManager.initMedia(function() {\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        }, data.options);\n    };\n\n    self.set_logSeverityLevel = function(data) {\n        _webRtcManager.set_logSeverityLevel(data.level);\n    };\n\n    self.enable_logCallback = function() {\n        _webRtcManager.enable_logCallback();\n    };\n\n    self.disable_logCallback = function() {\n        _webRtcManager.disable_logCallback();\n    };\n\n    self.get_audioInDeviceCount = function() {\n        return _webRtcManager.get_audioInDeviceCount();\n    };\n\n    self.get_audioOutDeviceCount = function() {\n        return _webRtcManager.get_audioOutDeviceCount();\n    };\n\n    self.get_videoDeviceCount = function() {\n        return _webRtcManager.get_videoDeviceCount();\n    };\n\n    function mapGetUserMediaErrorToFcsError(e) {\n        switch (e) {\n        case _core.call.MediaErrors.NOT_FOUND:\n            return _core.Errors.MEDIA_NOT_FOUND;\n        case _core.call.MediaErrors.NOT_ALLOWED:\n            return _core.Errors.MEDIA_NOT_ALLOWED;\n        case _core.call.MediaErrors.INVALID_PARAMETER:\n            return _core.Errors.INVALID_PARAMETER;\n        default:\n            return e;\n        }\n    }\n\n    self.getUserMedia = function(data, onSuccess, onFailure) {\n        if (data.privateStream) {\n\n            _webRtcManager.privateGetUserMedia(\n                onSuccess,\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, mapGetUserMediaErrorToFcsError(e));\n                }, data);\n        } else {\n            _webRtcManager.getUserMedia(\n                onSuccess,\n                function(e) {\n                    _utils.callFunctionIfExist(onFailure, mapGetUserMediaErrorToFcsError(e));\n                }, data);\n        }\n    };\n\n    self.getWebRtcStats = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n\n        return _webRtcManager.getWebRtcStats(internalCall, onSuccess, onFailure);\n    };\n\n    self.getNativeWebRtcStats = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n\n        return _webRtcManager.getNativeWebRtcStats(internalCall, onSuccess, onFailure);\n    };\n\n    self.startWebRtcStatsTimer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            interval;\n\n        if (data.interval !== parseInt(data.interval, 10)) {\n            return;\n        }\n        // Change interval value(seconds) to miliseconds\n        interval = parseInt(data.interval) * 1000;\n        return _webRtcManager.startWebRtcStatsTimer(internalCall, interval, onSuccess, onFailure);\n    };\n\n    self.stopWebRtcStatsTimer = function(data) {\n        var internalCall = calls[data.callid];\n\n        return _webRtcManager.stopWebRtcStatsTimer(internalCall);\n    };\n\n    self.showSettingsWindow = function(data, onSuccess, onFailure) {\n        _webRtcManager.showSettingsWindow(function() {\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        }, data.options);\n    };\n\n    self.createStreamRenderer = function(data) {\n        return _webRtcManager.createStreamRenderer(data.stream, data.container, data.options);\n    };\n\n    self.disposeStreamRenderer = function(data) {\n        _webRtcManager.disposeStreamRenderer(data.container);\n    };\n\n    self.createLocalAudioBridge = function(options, onSuccess, onFailure) {\n        if (_webRtcManager.canMergeAudio()) {\n            var bridge = new self.LocalAudioBridge(options);\n            bridges.push(bridge);\n            _utils.callFunctionIfExist(onSuccess, bridge);\n        } else {\n            logger.error('LocalAudioBridge not supported in this browser');\n            _utils.callFunctionIfExist(onFailure);\n        }\n    };\n\n    self.isPluginEnabled = function() {\n        return _webRtcManager.isPluginEnabled();\n    };\n\n    self.hasGotCalls = function() {\n        var callid, internalCall;\n        for (callid in calls) {\n            if (calls.hasOwnProperty(callid)) {\n                internalCall = calls[callid];\n                if (internalCall) {\n                    logger.info('has got call - id: ' + callid + ' - state: ' + _callFSM.getCurrentState(internalCall));\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    self.getCalls = function() {\n        return calls;\n    };\n\n    self.sendIntraFrame = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            _webRtcManager.sendIntraFrame(internalCall);\n        }\n    };\n\n    self.sendBlackFrame = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            _webRtcManager.sendBlackFrame(internalCall);\n        }\n    };\n\n    self.delegateToCallFSM = function(call, stateMessage) {\n        _callFSM.handleEvent(call, stateMessage, self.onStateChange);\n    };\n\n    self.setUpdateCandidateCallbackToCall = function(call) {\n        call.updateCandidates = function(candidateArray) {\n            _callControlService.updateIceCandidate({\n                id: call.id,\n                iceCandidates: candidateArray\n            });\n        };\n    };\n\n    self.answer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            videoNegotiationAvailable = self.isVideoNegotiationAvailable(data),\n            opts = {\n                videoResolution: data.videoResolution\n            },\n            offerToReceiveVideo;\n        opts.isAudioEnabled = data.isAudioEnabled === false ? false : true;\n\n        logger.info('Answering ' + (videoNegotiationAvailable ? 'video' : 'audio') + ' call with microphone ' + (opts.isAudioEnabled ? 'on' : 'off') + ' and camera' + (opts.sendInitialVideo ? 'on' : 'off'));\n\n        if (internalCall) {\n            if (internalCall.sdp) {\n                //check with the state machine if the current state would accept an answer.\n                if (_callFSM.getCurrentState(internalCall) !== fsmState.RINGING) {\n                    _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n                } else {\n                    opts.isVideoEnabled = videoNegotiationAvailable === false ? false : data.sendInitialVideo;\n                    self.getUserMedia(opts, function getUserMediaSuccessCallback(mediaInfo) {\n                        internalCall.isVideoSourceAllowed = mediaInfo.video;\n                        internalCall.isVideoEnabled = data.sendInitialVideo;\n                        internalCall.customParameters = data.customParameters;\n                        _webRtcManager.storeLocalStreamToCall(internalCall, mediaInfo.id);\n\n                        _webRtcManager.createAnswer(internalCall, function createAnswerSuccessCallback(sdp) {\n                            logger.info('[callManager.answer : sdp ]' + sdp);\n\n                            //change call state\n                            self.delegateToCallFSM(internalCall, fsmNotificationEvent.answer_GUI);\n\n                            //send answer call\n                            _callControlService.answerCall(internalCall.id, sdp, function() {\n                                _utils.callFunctionIfExist(onSuccess);\n                                _webRtcManager.addLocalStream(internalCall);\n                            }, function(e) {\n                                _utils.callFunctionIfExist(onFailure, e);\n                            },\n                            data.customParameters);\n                        }, function createAnswerFailureCallback(e) {\n                            logger.error('[callManager.answer] Error : ' + e);\n                            //Change state when the call have failed\n                            //This will trigger send reject\n                            self.delegateToCallFSM(internalCall, fsmNotificationEvent.end_GUI);\n                            // Call the failure callback, so the application knows it was\n                            //      an error that occurred.\n                            _utils.callFunctionIfExist(onFailure, e);\n                        }, data.sendInitialVideo);\n                    }, function getUserMediaFailureCallback(e) {\n                        _utils.callFunctionIfExist(onFailure, e);\n                    });\n                }\n            } else {\n                //slow start case\n                if (_callFSM.getCurrentState(internalCall) !== fsmState.RINGING_SLOW) {\n                    _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n                } else {\n                    offerToReceiveVideo = data.sendInitialVideo ? true : data.isVideoEnabled;\n                    opts.isVideoEnabled = data.sendInitialVideo;\n                    logger.info('[callManager.answer] Answering call in slow start scenario.');\n                    self.getUserMedia(opts, function getUserMediaSuccessCallback(mediaInfo) {\n                        internalCall.isVideoSourceAllowed = mediaInfo.video;\n                        internalCall.isVideoEnabled = data.sendInitialVideo;\n                        internalCall.customParameters = data.customParameters;\n                        _webRtcManager.storeLocalStreamToCall(internalCall, mediaInfo.id);\n\n                        _webRtcManager.createOffer(internalCall, function createOfferSuccessCallback(sdp) {\n                            internalCall.sdp = sdp;\n\n                            self.delegateToCallFSM(internalCall, fsmNotificationEvent.answer_GUI);\n\n                            _callControlService.answerCall(internalCall.id, sdp, function() {\n                                _utils.callFunctionIfExist(onSuccess);\n                                _webRtcManager.addLocalStream(internalCall);\n                            }, function(e) {\n                                _utils.callFunctionIfExist(onFailure, e);\n                            },\n                            data.customParameters);\n                        }, function createOfferFailureCallback(e) {\n                            logger.error('[callManager.offer] Error : ' + e);\n                            //Change state when the call have failed\n                            //This will trigger send reject\n                            self.delegateToCallFSM(internalCall, fsmNotificationEvent.end_GUI);\n                            // Call the failure callback, so the application knows it was\n                            //      an error that occurred.\n                            _utils.callFunctionIfExist(onFailure, e);\n                        }, data.sendInitialVideo, offerToReceiveVideo, true);\n                    }, function getUserMediaFailureCallback(e) {\n                        _utils.callFunctionIfExist(onFailure, e);\n                    });\n\n                }\n            }\n        }\n    };\n\n    self.getIncomingCallById = function(data) {\n        var call = null,\n            cachedCall, internalCall;\n\n        cachedCall = JSON.parse(_cache.getItem(data.callid));\n        if (cachedCall) {\n\n            call = new self.IncomingCall(data.callid, {\n                reject: cachedCall.optionReject,\n                forward: cachedCall.optionForward,\n                answer: cachedCall.optionAnswer\n            });\n\n            call.canOrigReceiveVideo = _sdpParser.isSdpHasVideo(cachedCall.sdp);\n\n            call.callerNumber = cachedCall.callerNumber;\n            call.callerName = cachedCall.callerName;\n            call.calleeNumber = cachedCall.calleeNumber;\n            call.primaryContact = cachedCall.primaryContact;\n\n            internalCall = {\n                'call': call,\n                'sdp': cachedCall.sdp,\n                'id': data.callid\n            };\n\n            calls[data.callid] = internalCall;\n\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.callNotify);\n        }\n\n        return call;\n    };\n\n    function cacheCall(internalCall) {\n        var callToCache = {\n            'sdp': internalCall.sdp,\n            'callerNumber': internalCall.call.callerNumber,\n            'callerName': internalCall.call.callerName,\n            'calleeNumber': internalCall.call.calleeNumber,\n            'primaryContact': internalCall.call.primaryContact,\n            'optionReject': internalCall.call.canReject(),\n            'optionForward': internalCall.call.canForward(),\n            'optionAnswer': internalCall.call.canAnswer()\n        };\n\n        _cache.setItem(internalCall.id, JSON.stringify(callToCache));\n    }\n\n    self.start = function(data, onSuccess, onFailure) {\n        var internalCall = {},\n            screenShare = data.sendScreenShare,\n            sendInitialVideo = (data.sendInitialVideo || screenShare),\n            offerToReceiveVideo = sendInitialVideo ? true : data.isVideoEnabled,\n            opts = {\n                isVideoEnabled: data.sendInitialVideo,\n                videoResolution: data.videoResolution,\n                isAudioEnabled: data.isAudioEnabled === false ? false : (screenShare ? false : true),\n                requestScreenShare: screenShare,\n                mediaSourceId: data.mediaSourceId\n            };\n\n        //We should not allow to make a call without media\n        if(!opts.isAudioEnabled && !opts.isVideoEnabled && !screenShare){\n            logger.error('Cannot make a call without media.');\n            _utils.callFunctionIfExist(onFailure, errors.MEDIA_REQUIRED);\n            return;\n        }\n\n        logger.info('start call... with data: ' +  JSON.stringify(data));\n\n        self.getUserMedia(opts, function getUserMediaSuccessCallback(mediaInfo) {\n            internalCall.isVideoSourceAllowed = mediaInfo.video ? true : false;\n            internalCall.isVideoEnabled = sendInitialVideo;\n            internalCall.isScreenShared = screenShare;\n            _webRtcManager.storeLocalStreamToCall(internalCall, mediaInfo.id);\n            self.setUpdateCandidateCallbackToCall(internalCall);\n            _webRtcManager.createOffer(internalCall, function createOfferSuccessCallback(sdp) {\n                logger.info('[callManager.start : sdp ]' + sdp);\n\n                internalCall.sdp = sdp;\n                startCallInProgress ++;\n                _callControlService.startCall(\n                    parseAddress(data.from, data.contact),\n                    parseAddress(data.to),\n                    sdp,\n                    function(callid) {\n\n                        internalCall.call = new self.OutgoingCall(callid);\n                        internalCall.id = callid;\n                        internalCall.callerNumber = data.to;\n                        internalCall.customParameters = data.customParameters;\n\n                        // Track the remote participant for an outgoing call.\n                        internalCall.call.remoteParticipant = {\n                            displayNumber: data.to\n                        };\n\n                        self.delegateToCallFSM(internalCall, fsmNotificationEvent.callStart_GUI);\n                        calls[callid] = internalCall;\n\n                        startCallInProgress --;\n                        if(startCallQueue.length > 0){\n                            processStartCallQueue(internalCall);\n                        }\n\n                        // we need to wait until call variable to be created\n                        setTimeout(function() {\n                            _webRtcManager.addLocalStream(internalCall);\n                        }, 10);\n                        _utils.callFunctionIfExist(onSuccess, internalCall.call);\n                    },\n                    function(e) {\n                        startCallInProgress --;\n                        //TODO: update call state\n                        _utils.callFunctionIfExist(onFailure, e);\n                    },\n                    data.customParameters);\n            }, function createOfferFailureCallback(e) {\n                logger.error('[callManager.start] Error : ' + e);\n                _utils.callFunctionIfExist(onFailure, e);\n            }, sendInitialVideo, offerToReceiveVideo);\n        }, function getUserMediaFailureCallback(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n    };\n\n    self.reject = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        self.delegateToCallFSM(internalCall, fsmNotificationEvent.endReject_GUI);\n\n        _callControlService.reject(data.callid, function() {\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n\n    };\n\n    self.sendCustomParameters = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        var customParameters = internalCall.customParameters;\n\n        if (customParameters) {\n            _callControlService.sendCustomParameters(data.callid, customParameters, function() {\n                _utils.callFunctionIfExist(onSuccess);\n            }, function(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n        }\n    };\n\n    self.ignore = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        self.delegateToCallFSM(internalCall, fsmNotificationEvent.endIgnore_GUI);\n        _utils.callFunctionIfExist(onSuccess);\n    };\n    self.forward = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid];\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        _callControlService.forward(data.callid, data.address, function() {\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.forward_GUI);\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n    };\n\n    function handleFailure(internalCall, failureHandler, failureEvent, retry) {\n        setNotificationStateOfCallToBusy(internalCall);\n        _webRtcManager.revertRtcState(internalCall, triggerQueue, triggerQueue);\n\n        if (failureEvent) {\n            self.delegateToCallFSM(internalCall, failureEvent);\n        }\n\n        if (retry && retry.timeout) {\n            internalCall.pendingRequestTimer = setTimeout(function() {\n                internalCall.pendingRequestTimer = null;\n                retry.args.push(true);\n                retry.handler.apply(null, retry.args);\n            }, retry.timeout * 1000);\n        } else {\n            if (failureHandler) {\n                // TODO: need to add an error code\n                _utils.callFunctionIfExist(failureHandler);\n            }\n        }\n    }\n\n    function handleRequestFailure(internalCall, failureHandler, retry) {\n        handleFailure(internalCall, failureHandler,\n            fsmNotificationEvent.requestFailure_JSL, retry);\n    }\n\n    function handleWebrtcFailure(internalCall, failureHandler) {\n        handleFailure(internalCall, failureHandler,\n            fsmNotificationEvent.webrtcFailure_JSL);\n    }\n\n    self.getMediaStream = function(callId) {\n        var internalCall = calls[callId];\n        if(internalCall.localMedia){\n            return internalCall.localMedia.originalStream;\n        } else {\n            return null;\n        }\n    };\n\n    self.hold = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState;\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (isNotificationStateOfCallBusy(internalCall)) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        currentCallState = _callFSM.getCurrentState(internalCall);\n\n        if (currentCallState !== fsmState.COMPLETED &&\n            currentCallState !== fsmState.REMOTE_HOLD) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (internalCall.pendingRequestTimer) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.PENDING_REQUEST);\n            return;\n        }\n\n        internalCall.lastUpdateRequest = {\n            handler: self.hold,\n            args: [data, onSuccess, onFailure]\n        };\n\n        setNotificationStateOfCallToBusy(internalCall);\n\n        self.delegateToCallFSM(internalCall, fsmNotificationEvent.hold_GUI);\n        _webRtcManager.createHoldUpdate(internalCall,\n            true,\n            (currentCallState === fsmState.REMOTE_HOLD),\n            function(sdp) {\n                logger.debug('[callManager.hold->createHoldUpdate : sdp ]' + sdp);\n                _callControlService.hold(internalCall.id, sdp,\n                    function() {\n                        triggerQueue(internalCall);\n                        _utils.callFunctionIfExist(onSuccess);\n                    },\n                    function(err) {\n                        handleRequestFailure(internalCall, onFailure, {\n                            handler: self.hold,\n                            args: [data, onSuccess, onFailure],\n                            timeout: err.retryAfter\n                        });\n                    },\n                    internalCall.customParameters);\n            },\n            function() {\n                handleWebrtcFailure(internalCall, onFailure);\n            });\n    };\n\n    self.unhold = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState;\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (isNotificationStateOfCallBusy(internalCall)) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        currentCallState = _callFSM.getCurrentState(internalCall);\n\n        if (currentCallState !== fsmState.LOCAL_HOLD &&\n            currentCallState !== fsmState.BOTH_HOLD) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (internalCall.pendingRequestTimer) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.PENDING_REQUEST);\n            return;\n        }\n\n        internalCall.lastUpdateRequest = {\n            handler: self.unhold,\n            args: [data, onSuccess, onFailure]\n        };\n\n        setNotificationStateOfCallToBusy(internalCall);\n\n        self.delegateToCallFSM(internalCall, fsmNotificationEvent.unhold_GUI);\n        _webRtcManager.createHoldUpdate(internalCall, false,\n            (currentCallState === fsmState.BOTH_HOLD),\n            function(sdp) {\n                logger.debug('[callManager.unhold->createHoldUpdate : sdp ]' + sdp);\n                _callControlService.unhold(internalCall.id, sdp,\n                    function() {\n                        triggerQueue(internalCall);\n                        _webRtcManager.addLocalStream(internalCall);\n                        _utils.callFunctionIfExist(onSuccess);\n                    },\n                    function(err) {\n                        handleRequestFailure(internalCall, onFailure, {\n                            handler: self.unhold,\n                            args: [data, onSuccess, onFailure],\n                            timeout: err.retryAfter\n                        });\n                    },\n                    internalCall.customParameters);\n            },\n            function() {\n                handleWebrtcFailure(internalCall, onFailure);\n            });\n    };\n\n    self.directTransfer = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState;\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        currentCallState = _callFSM.getCurrentState(internalCall);\n\n        if (currentCallState === fsmState.LOCAL_HOLD || currentCallState === fsmState.BOTH_HOLD || currentCallState === fsmState.COMPLETED) {\n            //TODO: force localhold - if the user is not on hold\n            logger.info('[callManager.directTransfer->sendTransfer : transfer target ]' + data.address);\n            _callControlService.transfer(internalCall.id, parseAddress(data.address), undefined, function() {\n                self.delegateToCallFSM(internalCall, fsmNotificationEvent.transfering);\n                _utils.callFunctionIfExist(onSuccess);\n                logger.info('[callManager.directTransfer->sentTransfer : transfer target ]' + data.address);\n            }, function(e) {\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else if (currentCallState === fsmState.LOCAL_HOLDING) {\n            if (!internalCall.transferTrigger) {\n                internalCall.transferTrigger = function() {\n                    self.directTransfer(data, onSuccess, onFailure);\n                    delete this.transferTrigger;\n                };\n            }\n        } else {\n            logger.error('directTransfer call is not in correct state: ' + currentCallState);\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n        }\n\n    };\n\n    self.videoUpdate = function(data, onSuccess, onFailure, retryCallback) {\n        var internalCall = calls[data.callid],\n            isVideoStart;\n\n        isVideoStart = internalCall.isVideoEnabled || internalCall.isScreenShared;\n\n        self.delegateToCallFSM(internalCall, fsmNotificationEvent.videoStopStart_GUI);\n        _webRtcManager.createUpdate(\n            internalCall,\n            function(sdp) {\n                _callControlService.reinvite(internalCall.id, sdp,\n                    function() {\n                        setNotificationStateOfCallToIdle(internalCall);\n                        _webRtcManager.addLocalStream(internalCall);\n                        _utils.callFunctionIfExist(onSuccess);\n                    },\n                    function(err) {\n                        handleRequestFailure(internalCall, onFailure, {\n                            handler: retryCallback,\n                            args: [data, onSuccess, onFailure],\n                            timeout: err.retryAfter\n                        });\n                    },\n                    internalCall.customParameters);\n            },\n            function() {\n                logger.error('reinvite->createUpdate ');\n                handleWebrtcFailure(internalCall, onFailure);\n            },\n            isVideoStart\n        );\n    };\n\n    self.videoStopStart = function(data, onSuccess, onFailure) {\n        var internalCall = calls[data.callid],\n            currentCallState,\n            opts = {\n                isVideoEnabled: true,\n                videoResolution: data.videoResolution\n            };\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (isNotificationStateOfCallBusy(internalCall)) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        currentCallState = _callFSM.getCurrentState(internalCall);\n        if (currentCallState !== fsmState.COMPLETED) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            return;\n        }\n\n        if (internalCall.pendingRequestTimer) {\n            _utils.callFunctionIfExist(onFailure, _core.Errors.PENDING_REQUEST);\n            return;\n        }\n\n        internalCall.lastUpdateRequest = {\n            handler: self.videoStopStart,\n            args: [data, onSuccess, onFailure]\n        };\n\n        setNotificationStateOfCallToBusy(internalCall);\n\n        if (!internalCall.isVideoSourceAllowed && data.isVideoStart) {\n            self.getUserMedia(opts, function getUserMediaSuccessCallback(mediaInfo) {\n                internalCall.isVideoSourceAllowed = true;\n                internalCall.isVideoEnabled = true;\n                _webRtcManager.storeLocalStreamToCall(internalCall, mediaInfo.id);\n\n                // If the screen is shared, we don't need to do an update since the\n                // video state won't have changed.\n                if (!internalCall.isScreenShared) {\n                    self.videoUpdate(data, onSuccess, onFailure, self.videoStopStart);\n                }\n            }, function getUserMediaFailureCallback(e) {\n                // Reset busy flag to be able to receive further notifications\n                setNotificationStateOfCallToIdle(internalCall);\n                _utils.callFunctionIfExist(onFailure, e);\n            });\n        } else {\n            internalCall.isVideoEnabled = data.isVideoStart;\n\n            // If the screen is shared, we don't need to do an update since the\n            // video state won't have changed.\n            if (!internalCall.isScreenShared) {\n                self.videoUpdate(data, onSuccess, onFailure, self.videoStopStart);\n            }\n        }\n    };\n\n    self.screenStopStart = function(data, onSuccess, onFailure, onScreenStop) {\n        var internalCall = calls[data.callid],\n            currentCallState;\n\n        if (!internalCall) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        if (isNotificationStateOfCallBusy(internalCall)) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        currentCallState = _callFSM.getCurrentState(internalCall);\n        if (currentCallState !== fsmState.COMPLETED) {\n            _utils.callFunctionIfExist(onFailure, errors.STATE);\n            return;\n        }\n\n        if (internalCall.pendingRequestTimer) {\n            _utils.callFunctionIfExist(onFailure, errors.PENDING_REQUEST);\n            return;\n        }\n\n        if (data.isScreenStart) {\n\n            // If we are already in the process of starting screensharing, don't\n            // try again until it's done.\n            if (internalCall.isStartingScreenMedia) {\n                _utils.callFunctionIfExist(onFailure);\n                return;\n            }\n\n            internalCall.isStartingScreenMedia = true;\n\n            _webRtcManager.startScreenMedia(function(mediaInfo) {\n                internalCall.isScreenShared = true;\n                internalCall.isStartingScreenMedia = false;\n                _webRtcManager.updateLocalStreamToCall(internalCall, mediaInfo.id);\n                self.videoUpdate(data, onSuccess, onFailure, self.screenStopStart);\n            },\n            function() {\n                internalCall.isScreenShared = false;\n                internalCall.isStartingScreenMedia = false;\n                _utils.callFunctionIfExist(onFailure);\n            },\n            data.options,\n            function() {\n                if (_callFSM.getCurrentState(internalCall) === fsmState.COMPLETED) {\n                    //Screen sharing video stream has been stopped, act as if someone called screenStopStart\n                    //but pass the result to onScreenStop instead.\n                    self.screenStopStart({...data, isScreenStart:false}, onScreenStop, function() {\n                        logger.error('Failed to stop screen properly after user stopped the stream via' +\n                                ' the browser controls');\n                    }, false);\n                } else if (internalCall.isScreenShared) {\n                    internalCall.isScreenShared = false;\n                    _webRtcManager.stopScreenMedia();\n                    _utils.callFunctionIfExist(onScreenStop);\n                }\n            });\n        } else if (internalCall.isScreenShared) {\n            internalCall.isScreenShared = false;\n            _webRtcManager.stopScreenMedia();\n\n            self.videoUpdate(data, onSuccess, onFailure, self.screenStopStart);\n        }\n    };\n\n    self.mute = function(data) {\n        var call = calls[data.callid];\n        if (call) {\n            _webRtcManager.muteAudioTrack(call, data.mute);\n            _utils.callFunctionIfExist(call.call.onMute, data.mute);\n        }\n    };\n\n    self.silence = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            internalCall.silenced = data.silence;\n            _webRtcManager.updateSilenceStatus(internalCall);\n        }\n    };\n\n    self.isSilenced = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            return internalCall.silenced;\n        }\n    };\n\n    self.sendDTMF = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            _webRtcManager.sendDTMF(internalCall, data.tone);\n        }\n    };\n\n    self.join = function(data, onSuccess, onFailure, isVideoEnabled, videoResolution) {\n        var internalCall1 = calls[data.callid1],\n            internalCall2 = calls[data.callid2],\n            newInternalCall = {},\n            currentCallState1,\n            currentCallState2,\n            opts = {\n                isVideoEnabled: isVideoEnabled,\n                videoResolution: videoResolution\n            };\n\n        if ((internalCall1) && (internalCall2)) {\n            currentCallState1 = _callFSM.getCurrentState(internalCall1);\n            currentCallState2 = _callFSM.getCurrentState(internalCall2);\n            if (currentCallState1 === fsmState.LOCAL_HOLDING ||\n                currentCallState2 === fsmState.LOCAL_HOLDING) {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.PENDING_REQUEST);\n                return;\n            }\n            if ((currentCallState1 === fsmState.LOCAL_HOLD ||\n                    currentCallState1 === fsmState.REMOTE_HOLD ||\n                    currentCallState1 === fsmState.BOTH_HOLD) &&\n                (currentCallState2 === fsmState.LOCAL_HOLD ||\n                    currentCallState2 === fsmState.REMOTE_HOLD ||\n                    currentCallState2 === fsmState.BOTH_HOLD)) {\n\n                self.getUserMedia(opts, function(mediaInfo) {\n                    newInternalCall.isVideoSourceAllowed = mediaInfo.video;\n                    _webRtcManager.storeLocalStreamToCall(newInternalCall, mediaInfo.id);\n                    self.setUpdateCandidateCallbackToCall(newInternalCall);\n                    _webRtcManager.createOffer(newInternalCall,\n                        function(sdp) {\n                            logger.info('join->doOffer : sdp ' + sdp);\n                            newInternalCall.sdp = sdp;\n                            _callControlService.join(\n                                internalCall1.id,\n                                internalCall2.id,\n                                sdp,\n                                function(callid) {\n\n                                    newInternalCall.call = new self.OutgoingCall(callid);\n                                    newInternalCall.id = callid;\n                                    // Mark the call as a joined call.\n                                    newInternalCall.call.setJoin(true);\n                                    // Since we setJoin(true), we need to pretend that this is a thing apparently.\n                                    newInternalCall.call.onJoin = function() {\n                                        logger.debug('Default onJoin called for call. ' + callid);\n                                    };\n                                    newInternalCall.firstInternalCallId = internalCall1.id;\n                                    newInternalCall.secondInternalCallId = internalCall2.id;\n\n                                    // refer will be handled by client. We are going to need callID of partyB and partyC\n                                    if (_config.clientControlled === 'true') {\n                                        newInternalCall.isReferer = true;\n                                        newInternalCall.refer1ID = internalCall1.id;\n                                        newInternalCall.refer2ID = internalCall2.id;\n                                    }\n\n                                    self.delegateToCallFSM(internalCall1, fsmNotificationEvent.joining_Notify);\n                                    self.delegateToCallFSM(internalCall2, fsmNotificationEvent.joining_Notify);\n                                    self.delegateToCallFSM(newInternalCall, fsmNotificationEvent.joiningSuccess_Notify);\n                                    calls[callid] = newInternalCall;\n\n                                    _utils.callFunctionIfExist(onSuccess, newInternalCall.call);\n                                },\n                                function(e) {\n                                    logger.error('callControlService.join Failed!! sdp ' + sdp);\n                                    _utils.callFunctionIfExist(onFailure, e);\n                                },\n                                internalCall1.customParameters);\n                        },\n                        function(e) {\n                            logger.error('doOffer Failed!!');\n                            _utils.callFunctionIfExist(onFailure, e);\n                        }, isVideoEnabled);\n                }, function(e) {\n                    _utils.callFunctionIfExist(onFailure, e);\n                });\n            } else {\n                _utils.callFunctionIfExist(onFailure, _core.Errors.STATE);\n            }\n        }\n    };\n\n    self.transfer = function() {\n\n    };\n\n    self.end = function(data, onSuccess) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            //check with the state machine if the current state would accept an endCall.\n            if (_callFSM.getCurrentState(internalCall) === fsmState.INIT) {\n                logger.error('Cannot end call in INIT callstate :' + _core.Errors.STATE);\n            } else {\n                //send the end call to webrtc abstraction, change call state\n                //this will trigger the send endcall or reject call\n                self.delegateToCallFSM(internalCall, fsmNotificationEvent.end_GUI);\n\n                clearResources(internalCall, true);\n                _utils.callFunctionIfExist(onSuccess);\n            }\n        }\n\n    };\n\n    self.clickToCall = function(data, onSuccess, onFailure) {\n        _callControlService.clickToCall(data.callingParty, data.calledParty, function() {\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n    };\n\n    self.getIMRN = function(data, onSuccess, onFailure) {\n        _callControlService.getIMRN(data.realm, data.source, data.destination, function() {\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(e) {\n            _utils.callFunctionIfExist(onFailure, e);\n        });\n    };\n\n    self.cerateIncomingCallInFSM = function(call, sdp) {\n\n        logger.info('incomingCall : sdp = ' + sdp);\n        var internalCall = {\n            'call': call,\n            'sdp': sdp,\n            'id': call.getId(),\n            'supportTrickle': _sdpParser.isSdpHasTrickle(sdp) && (_config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE)\n        };\n        logger.info('incomingCall: ' + call.getId());\n\n        if (_config.continuity && call.canAnswer()) {\n            cacheCall(internalCall);\n        }\n        self.setUpdateCandidateCallbackToCall(internalCall);\n\n        calls[call.getId()] = internalCall;\n        if (!sdp) {\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.callNotify_noSDP);\n        } else {\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.callNotify);\n        }\n    };\n\n\n\n    self.onNotificationEvent = function(type, sessionParams, notificationParams) {\n        var callid = sessionParams.sessionData,\n            statusCode = sessionParams.statusCode,\n            reasonText = sessionParams.reasonText,\n            sdp = sessionParams.sdp,\n            referTo = sessionParams.referTo,\n            referredBy = sessionParams.referredBy,\n            retryAfter = sessionParams.retryAfter,\n            internalCall = calls[callid];\n\n        logger.debug('Notification received ' + type + ' callid:' + callid);\n        if(sdp){\n            logger.debug('onNotificationEvent', sdp);\n        }\n        if (internalCall) {\n            if (isQueueEnabled && isNotificationStateOfCallBusy(internalCall) &&\n                (type !== fsmNotificationEvent.callEnd_Notify) && (type !== fsmNotificationEvent.callCancel_Notify)) {\n                logger.debug('NOTIFICATION_QUEUE: notification state is busy, adding process to the queue!');\n                internalCall.call.notificationQueue.enqueue({\n                    type: type,\n                    sessionParams: sessionParams\n                });\n                logger.debug('NOTIFICATION_QUEUE: queue size is now ' + internalCall.call.notificationQueue.size());\n                return;\n            }\n\n            if (isQueueEnabled) {\n                setNotificationStateOfCallToBusy(internalCall);\n            }\n\n            if (sdp) {\n                internalCall.prevRemoteSdp = internalCall.stableRemoteSdp;\n                internalCall.supportTrickle = _sdpParser.isSdpHasTrickle(sdp) && (_config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n                sdp = _sdpParser.deleteGoogleIceFromSdp(sdp);\n                internalCall.sdp = sdp;\n            }\n            if (referTo && referredBy) {\n                internalCall.referTo = referTo;\n                internalCall.referredBy = referredBy;\n            }\n            if(notificationParams) {\n                // Update the exposed call object so it has the remote participant info.\n                if(internalCall.call.isOutgoing) {\n                    if(notificationParams.remoteDisplayNumber) {\n                        internalCall.call.calleeNumber = notificationParams.remoteDisplayNumber;\n                    }\n                    if(notificationParams.remoteName) {\n                        internalCall.call.calleeName = notificationParams.remoteName;\n                    }\n                } else {\n                    if(notificationParams.remoteDisplayNumber) {\n                        internalCall.call.callerNumber = notificationParams.remoteDisplayNumber;\n                    }\n                    if(notificationParams.remoteName) {\n                        internalCall.call.callerName = notificationParams.remoteName;\n                    }\n                }\n\n                // Keep the remote participant info on the exposed call up-to-date if there is new info.\n                if(notificationParams.remoteDisplayNumber) {\n                    if (!internalCall.call.hasOwnProperty('remoteParticipant')) {\n                        internalCall.call.remoteParticipant = {};\n                    }\n                    internalCall.call.remoteParticipant.displayNumber = notificationParams.remoteDisplayNumber;\n\n                    if(notificationParams.remoteName) {\n                        internalCall.call.remoteParticipant.displayName = notificationParams.remoteName;\n                    }\n                }\n            }\n\n            internalCall.retryAfter = retryAfter;\n            internalCall.statusCode = statusCode;\n            internalCall.reasonText = reasonText;\n            self.delegateToCallFSM(internalCall, type);\n        } else if(startCallInProgress > 0) {\n            //If the call does not exist it could mean the event was received out of order, and that the call is not yet created.\n            logger.info('Pushing event to startCallQueue');\n            startCallQueue.push({\n                type: type,\n                sessionParams: sessionParams,\n                expires: Date.now() + 30000 //lets expire in 30 seconds.\n            });\n        }\n    };\n\n    self.onStateChange = function(call, event) {\n        var callStates = CALL_STATES,\n            transferEvent = _callFSM.TransferEvent,\n            i, isJoin, isLocalHold, auditTimerDelay, startAuditTimer,\n            internalCall1, internalCall2;\n\n        calls[call.id] = call;\n\n        function triggerCallState(state, doNotTriggerQueue) {\n            const stateText = find(stateName => CALL_STATES[stateName] === state, Object.keys(CALL_STATES));\n            logger.debug('triggerCallState:  stateCode =   ' + state + '   state =   ' + stateText + '    call.statusCode =  ' + call.statusCode + '   call.reasonText =  ' + call.reasonText);\n            call.call.callState = state;\n            _utils.callFunctionIfExist(call.call.onStateChange, state, call.statusCode, call.reasonText, {\n                localStatusCode: call.localStatusCode,\n                localReasonText: call.localReasonText\n            });\n            if (!doNotTriggerQueue) {\n                triggerQueue(call);\n            }\n        }\n\n        function triggerCallStateWithoutQueue(state) {\n            triggerCallState(state, true);\n        }\n\n        auditTimerDelay = function() {\n            setTimeout(function() {\n                if (_core.isConnected()) {\n                    _callControlService.audit(call.id, function() {\n                        logger.info('Audit kicked off: Success for: ' + call.id);\n                    }, function() {\n                        logger.error('Audit: Fail for: ' + call.id);\n                        // no need to end the call after audit fail\n                    });\n                }\n            }, AUDIT_KICKOFF_TIMEOUT);\n        };\n\n        startAuditTimer = function() {\n            if (!call.isAuditing) {\n                call.call.setAuditTimer(function() {\n                    if (_core.isConnected()) {\n                        _callControlService.audit(call.id, function() {\n                            logger.info('Audit: Success for: ' + call.id);\n                        }, function() {\n                            logger.error('Audit: Fail for: ' + call.id);\n                            // no need to end the call after audit fail\n                            triggerQueue(call);\n                        });\n                    }\n                });\n                call.isAuditing = true;\n            }\n        };\n\n        logger.info('Transfer Event: ' + event + '. callId: ' + call.id);\n        switch (event) {\n        case transferEvent.startCallReplace_fsm:\n            triggerCallState(callStates.REPLACING);\n            break;\n        case transferEvent.joiningSuccess_fsm:\n            // Emit a state change event for the new joined call.\n            call.localStatusCode = LOCAL_STATUS_CODES.JOIN_COMPLETED;\n            call.localReasonText = LOCAL_REASON_TEXTS.JOIN_COMPLETED;\n            triggerCallState(callStates.IN_CALL);\n            break;\n        case transferEvent.callStart_fsm:\n        case transferEvent.localHolding_fsm:\n        case transferEvent.localUnHolding_fsm:\n        case transferEvent.localVideoStopStart_fsm:\n        case transferEvent.slowStartOfferProcessed_fsm:\n        case transferEvent.rejectWithoutClearCallObject_GUI:\n            break;\n        case transferEvent.deviceChange_fsm:\n        case transferEvent.ignoredNotification_fsm:\n        case transferEvent.answeringRingingSlow_fsm:\n        case transferEvent.localHold_fsm:\n        case transferEvent.localUnHold_fsm:\n        case transferEvent.answerRingingSlow_fsm:\n        case transferEvent.transfering_fsm:\n            triggerQueue(call);\n            break;\n        case transferEvent.ringing_fsm:\n            triggerCallState(callStates.RINGING);\n            break;\n        case transferEvent.callReceived_fsm:\n            //TODO maybe set that this is a slow start\n            triggerCallState(callStates.INCOMING);\n            break;\n        case transferEvent.answer_fsm:\n            auditTimerDelay();\n            startAuditTimer();\n            triggerCallState(callStates.IN_CALL);\n            break;\n        case transferEvent.ignore_GUI:\n            call.localStatusCode = LOCAL_STATUS_CODES.IGNORED_BY_LOCAL;\n            call.localReasonText = LOCAL_REASON_TEXTS.IGNORED_BY_LOCAL;\n            clearCallObject(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.respondedFromAnotherDevice_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.RESPONDED_FROM_ANOTHER_DEVICE;\n            call.localReasonText = LOCAL_REASON_TEXTS.RESPONDED_FROM_ANOTHER_DEVICE;\n            clearCallObject(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.reject_GUI:\n        case transferEvent.forward_fsm:\n            clearResources(call);\n            break;\n        case transferEvent.sessionComplete_fsm:\n            _callControlService.endCall(call.id, function() {\n                logger.info('callControlService.endCall successful. callId: ' + call.id);\n            }, function() {\n                logger.error('callControlService.endCall FAILED!!.callId: ' + call.id);\n            });\n            clearResources(call);\n            // Emit a state change event with \"transition\" explanation.\n            call.localStatusCode = LOCAL_STATUS_CODES.JOIN_COMPLETED;\n            call.localReasonText = LOCAL_REASON_TEXTS.JOIN_COMPLETED;\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.sessionFail_fsm:\n        case transferEvent.transferFail_fsm:\n            call.forceNewPeer = true;\n            triggerCallState(callStates.TRANSFER_FAILURE);\n            break;\n        case transferEvent.replaceCallCompleted_fsm:\n        case transferEvent.callCompleted_fsm:\n            // Workaround for webrtc dtls and firefox pranswer support bug. Can be removed when fixed by browsers.\n            // dtls is enabled listened early media as answer. Now has to create a new peer for actual answer sdp, only if the sdp is different.\n            if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n                if(_sdpParser.compareSDPForEarlyMedia(call.stableRemoteSdp, call.sdp)){\n                    logger.info('Early Media with same sdp on DTLS');\n                    auditTimerDelay();\n                    startAuditTimer();\n                    triggerCallState(callStates.IN_CALL);\n                } else {\n                    logger.info('Handle answer sdp after session progress when dtls is enabled. Create new peer workaround.');\n                    self.delegateToCallFSM(call, fsmNotificationEvent.performCreateNewPeerWorkaround_JSL);\n                }\n                break;\n            }\n\n            auditTimerDelay();\n            _webRtcManager.processAnswer(call,\n                function() {\n                    startAuditTimer();\n                    triggerCallState(callStates.IN_CALL);\n                },\n                function(err) {\n                    if (err === CONSTANTS.WEBRTC.ERROR.ICE_ICELITE) {\n                        logger.info('ice-lite - ice change. Create new peer workaround.');\n                        self.delegateToCallFSM(call, fsmNotificationEvent.performCreateNewPeerWorkaround_JSL);\n                    } else {\n                        clearResources(call);\n                        triggerCallState(callStates.ENDED);\n                    }\n                });\n            //if client is handling the refers, we need to trigger the refers for partyB and partyC from referer\n            if (call.isReferer) {\n                for (i in calls) {\n                    if (calls.hasOwnProperty(i)) {\n                        if (calls[i] && (calls[i].id === call.refer1ID || calls[i].id === call.refer2ID)) {\n                            calls[i].referCall(call.referTo, call.referredBy);\n                        }\n                    }\n                }\n            }\n            break;\n        case transferEvent.startCallReplaceRejected_fsm:\n        case transferEvent.noAnswer_fsm:\n            clearResources(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.remoteEnd_fsm:\n            if ((call.firstInternalCallId) && (call.secondInternalCallId)) {\n                internalCall1 = calls[call.firstInternalCallId];\n                self.delegateToCallFSM(internalCall1, fsmNotificationEvent.revertState_JSL);\n                internalCall2 = calls[call.secondInternalCallId];\n                self.delegateToCallFSM(internalCall2, fsmNotificationEvent.revertState_JSL);\n            }\n            // if call's previous call state is RINGING check replacingCallId value\n            if (call.previousState === fsmState.RINGING && call.replacingCallId) {\n                var replacingCall = calls[call.replacingCallId];\n                // if there us replacingCallId and replacing call 's state is active then unmute it\n                if (replacingCall) {\n                    logger.info('[onStateChange] replacing call\\'s state: ' + replacingCall.currentState);\n                    if (replacingCall.currentState === fsmState.COMPLETED) {\n                        logger.info('[onStateChange] replacing call has unmuted: ' + replacingCall.currentState);\n                        replacingCall.call.unmute();\n                    }\n                } else {\n                    logger.info('[onStateChange] replacing call has not found, replacingCallId: ' + call.replacingCallId);\n                }\n            }\n\n            if (!call.localStatusCode && !call.localReasonText) {\n                call.localStatusCode = LOCAL_STATUS_CODES.STATUS_CODE_NOT_PROVIDED;\n                call.localReasonText = LOCAL_REASON_TEXTS.STATUS_CODE_NOT_PROVIDED;\n            }\n\n            clearResources(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.localEnding_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.ENDED_BY_LOCAL;\n            call.localReasonText = LOCAL_REASON_TEXTS.ENDED_BY_LOCAL;\n            _callControlService.endCall(call.id, function() {\n                logger.info('CallControlService endCall successful. callId: ' + call.id);\n            }, function() {\n                logger.error('Cannot callControlService endCall. callId: ' + call.id);\n            }, call.localReasonText);\n            clearCallObject(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.localEndingWithoutClearCallObject_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.ENDED_BY_LOCAL;\n            call.localReasonText = LOCAL_REASON_TEXTS.ENDED_BY_LOCAL;\n            _callControlService.endCall(call.id, function() {\n                logger.info('CallControlService endCall successful. callId: ' + call.id);\n            }, function() {\n                logger.error('Cannot callControlService endCall. callId: ' + call.id);\n            }, call.localReasonText);\n            break;\n        case transferEvent.localEnd_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.ENDED_BY_LOCAL;\n            call.localReasonText = LOCAL_REASON_TEXTS.ENDED_BY_LOCAL;\n            clearCallObject(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.localReject_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.REJECTED_BY_LOCAL;\n            call.localReasonText = LOCAL_REASON_TEXTS.REJECTED_BY_LOCAL;\n            clearCallObject(call);\n            triggerCallState(callStates.ENDED);\n            break;\n        case transferEvent.callCompletedAnswering_fsm:\n            logger.info('callManager: Call Completed Answering Event. callId: ' + call.id);\n            var isRemoteHold;\n            if (call.sdp) {\n                _sdpParser.init(call.sdp);\n                isRemoteHold = _sdpParser.isRemoteHold();\n            }\n            _webRtcManager.processAnswer(call, function () {\n                if (isRemoteHold) {\n                    call.currentState =  fsmState.REMOTE_HOLD;\n                    triggerCallState(callStates.ON_REMOTE_HOLD);\n                } else {\n                    triggerCallState(callStates.IN_CALL);\n                }\n                auditTimerDelay();\n                startAuditTimer();\n            }, function () {\n                clearResources(call);\n                triggerCallState(callStates.ENDED);\n            }, true);\n            break;\n        case transferEvent.remoteHold_fsm:\n            switch (_callFSM.getCurrentState(call)) {\n            case fsmState.REMOTE_HOLD:\n                triggerCallState(callStates.ON_REMOTE_HOLD);\n                break;\n            case fsmState.BOTH_HOLD:\n                triggerCallState(callStates.ON_HOLD);\n                break;\n            default:\n                triggerQueue(call);\n                break;\n            }\n            break;\n        case transferEvent.remoteUnHold_fsm:\n\n            // If the remote user changed, then this unhold was due to a transfer.\n            if(call.remoteParticipantChanged) {\n                call.remoteEndPointChanged = undefined;\n                call.localStatusCode = LOCAL_STATUS_CODES.TRANSFERRED;\n                call.localReasonText = LOCAL_REASON_TEXTS.TRANSFERRED;\n            }\n\n            switch (_callFSM.getCurrentState(call)) {\n            case fsmState.LOCAL_HOLD:\n                triggerCallState(callStates.ON_HOLD);\n                break;\n            case fsmState.COMPLETED:\n                triggerCallState(callStates.IN_CALL);\n                break;\n            default:\n                triggerQueue(call);\n                break;\n            }\n            break;\n        case transferEvent.remoteHolding_fsm:\n            isLocalHold = (_callFSM.getCurrentState(call) === fsmState.LOCAL_HOLD) || (_callFSM.getCurrentState(call) === fsmState.BOTH_HOLD);\n            _webRtcManager.processHold(call, true, isLocalHold, function(sdp) {\n                logger.info('[callManager.onStateChange.transferEvent.remoteHold_fsm->processHold : sdp ]' + sdp);\n                _callControlService.respondToRemoteHold(call.id, sdp, function() {\n                    logger.info('Remote Hold Transfer Event Successful. callId: ' + call.id);\n                    self.delegateToCallFSM(call, fsmNotificationEvent.remoteHoldProcessed_JSL);\n                }, function(errorStr) {\n                    logger.error('Remote Hold Transfer Event FAILED!! - ' + errorStr);\n                    handleRequestFailure(call);\n                },\n                call.customParameters);\n            }, function(errorStr) {\n                logger.error('Remote Hold FAILED!! - ' + errorStr);\n                handleWebrtcFailure(call);\n            });\n            break;\n        case transferEvent.remoteOfferDuringLocalHold_fsm:\n            _webRtcManager.processRemoteOfferOnLocalHold(call, function(sdp) {\n                logger.info('onStateChange.transferEvent.remoteOfferDuringLocalHold_fsm : sdp ' + sdp);\n                _callControlService.respondCallUpdate(call.id, sdp, function() {\n                    logger.info('Remote Offer During Local Hold Transfer Event successful. callId: ' + call.id);\n                    triggerQueue(call);\n                }, function(errorStr) {\n                    handleRequestFailure(call);\n                    logger.error('Remote Offer During Local Hold  Transfer Event FAILED!! - ' + errorStr);\n                },\n                call.customParameters);\n            }, function(errorStr) {\n                logger.error('Remote Offer During Local Hold FAILED!! - ' + errorStr);\n                handleWebrtcFailure(call);\n            });\n            break;\n        case transferEvent.slowStartOfferDuringOnCall_fsm:\n        case transferEvent.slowStartOfferDuringRemoteHold_fsm:\n            _webRtcManager.createReOffer(call, function(sdp) {\n                logger.info('onStateChange.transferEvent.createReOffer: sdp ' + sdp);\n                _callControlService.respondCallUpdate(call.id, sdp, function() {\n                    logger.info('Slow Start Offer respondCallUpdate successful. callId: ' + call.id);\n                    self.delegateToCallFSM(call, fsmNotificationEvent.slowStartOfferProcessed_JSL);\n                    triggerQueue(call);\n                }, function(errorStr) {\n                    logger.error('Slow Start Offer respondCallUpdate FAILED!! - ' + errorStr);\n                    handleRequestFailure(call);\n                },\n                call.customParameters);\n            }, function(errorStr) {\n                logger.error('Slow Start Offer createReOffer FAILED!! - ' + errorStr);\n                handleWebrtcFailure(call);\n            }, false);\n            break;\n        case transferEvent.performReconnectWorkaround_fsm:\n            _webRtcManager.createReOffer(call, function createReOfferSuccessCallback(sdp) {\n                logger.info('onStateChange.transferEvent.createReOffer : sdp ' + sdp);\n                _callControlService.reinvite(call.id, sdp, function reInviteSuccessCallback() {\n                    setNotificationStateOfCallToIdle(call);\n                    _webRtcManager.addLocalStream(call);\n                    logger.info('callControlService.reinvite successful. callId: ' + call.id);\n                }, function (e) {\n                    //statusCode 42 =  RESOURCE_IDENTIFIER_DOES_NOT_EXIST\n                    if (e.statusCode === 42) {\n                        // Call object removed and  onStateChange event triggered with ENDED state.\n                        // Because call session already ended on call server.\n                        // Operation can not be on this call.\n                        // Call object must be removed and should be given information to the web application side.\n                        logger.info('Call is ended.Because call session is not active. callId: ' + call.id);\n                        clearResources(call);\n                        triggerCallState(callStates.ENDED);\n                    } else {\n                        self.delegateToCallFSM(call, fsmNotificationEvent.requestFailure_JSL);\n                    }\n                },\n                call.customParameters);\n            }, function() {\n                handleWebrtcFailure(call);\n            }, true);\n            break;\n        case transferEvent.performCreateNewPeerWorkaround_fsm:\n            logger.info('performCreateNewPeerWorkaround_fsm');\n            _webRtcManager.createReOffer(call,\n                function createReOfferSuccessCallback(sdp) {\n                    logger.info('createReOfferSuccessCallback: sdp ' + sdp);\n                    _callControlService.reinvite(call.id, sdp,\n                        function reInviteSuccessCallback() {\n                            logger.info('reInviteSuccessCallback.');\n                            _webRtcManager.addLocalStream(call);\n                            startAuditTimer();\n                            triggerQueue(call);\n                        },\n                        function reInviteFailureCallback() {\n                            logger.info('reInviteFailureCallback.');\n                            self.end({\n                                callid: call.id\n                            }, function() {\n                                logger.info('end success.');\n                                clearResources(call);\n                                triggerCallState(callStates.ENDED);\n                            });\n                        },\n                        call.customParameters);\n                },\n                function createReOfferFailureCallback() {\n                    self.end({\n                        callid: call.id\n                    }, function() {\n                        logger.info('end success.');\n                        clearResources(call);\n                        triggerCallState(callStates.ENDED);\n                    });\n                }, false);\n            break;\n        case transferEvent.remoteUnHolding_fsm:\n            isLocalHold = (call.previousState === fsmState.LOCAL_HOLD) || (call.previousState === fsmState.BOTH_HOLD);\n            _webRtcManager.processHold(call, false, isLocalHold, function(sdp) {\n                logger.info('onStateChange.transferEvent.remoteUnHold_fsm->processHold : sdp ' + sdp);\n                _callControlService.respondToRemoteUnhold(call.id, sdp, function() {\n                    logger.info('Remote UnHold Transfer Event successful. callId: ' + call.id);\n                    self.delegateToCallFSM(call, fsmNotificationEvent.remoteUnHoldProcessed_JSL);\n                }, function(errorStr) {\n                    logger.error('Remote UnHold Transfer Event FAILED!! - ' + errorStr);\n                    handleRequestFailure(call);\n                },\n                call.customParameters);\n            }, function(errorStr) {\n                logger.error('Remote UnHold FAILED!! - ' + errorStr);\n                handleWebrtcFailure(call);\n            });\n            break;\n        case transferEvent.renegotiationCompleted_fsm:\n            triggerCallState(callStates.RENEGOTIATION);\n            break;\n        case transferEvent.remoteOffer_fsm:\n        case transferEvent.remoteCallUpdate_fsm:\n            _webRtcManager.processUpdate(call, function(sdp) {\n                logger.info('onStateChange.transferEvent.remoteCallUpdate_fsm->processUpdate : sdp ' + sdp);\n                _callControlService.respondCallUpdate(call.id, sdp, function() {\n                    logger.info('Remote Call Update Transfer Event Successful. callId: ' + call.id);\n                    self.delegateToCallFSM(call, fsmNotificationEvent.remoteOfferProcessed_JSL);\n                }, function(errorStr) {\n                    logger.error('Remote Call Update Transfer Event FAILED!! - ' + errorStr);\n                    handleRequestFailure(call);\n                },\n                call.customParameters);\n            }, function(errorStr) {\n                logger.error('Remote Call Update FAILED!! - ' + errorStr);\n                handleWebrtcFailure(call);\n            }, call.currentState === fsmState.LOCAL_HOLD ? true : false);\n            break;\n        case transferEvent.respondCallHoldUpdate_fsm:\n            isJoin = call.call.getJoin();\n            _webRtcManager.processHoldRespond(call, function() {\n                logger.info('Respond Call Hold Update Event Successful. callId: ' + call.id);\n                switch (_callFSM.getCurrentState(call)) {\n                case fsmState.REMOTE_HOLD:\n                    triggerCallState(callStates.ON_REMOTE_HOLD);\n                    break;\n                case fsmState.LOCAL_HOLD:\n                case fsmState.BOTH_HOLD:\n                    triggerCallState(callStates.ON_HOLD);\n                    if (typeof call.transferTrigger === 'function') {\n                        call.transferTrigger();\n                    }\n                    break;\n                case fsmState.COMPLETED:\n                    triggerCallState(callStates.IN_CALL);\n                    break;\n                }\n            }, function(e) {\n                logger.error('Respond Call Hold Update Event FAILED: ' + e);\n                triggerQueue(call);\n            }, isJoin);\n\n            //enable clicking\n            call.call.setButtonDisabler(false);\n            call.call.clearBtnTimeout();\n\n            if (isJoin === true) {\n                call.call.onJoin();\n            }\n\n            break;\n        case transferEvent.respondCallUpdate_fsm:\n            isJoin = call.call.getJoin();\n\n            //enable clicking\n            call.call.setButtonDisabler(false);\n            call.call.clearBtnTimeout();\n\n            //If this is a join call we need to send join request\n            //onJoin() function is created at callController.js\n            if (isJoin === true) {\n                _webRtcManager.processRespond(call, function() {\n                    logger.info('Respond Call Update Event Successful. callId: ' + call.id);\n                    triggerCallState(callStates.RENEGOTIATION);\n                }, function(e) {\n                    logger.error('Respond Call Update Event FAILED: ' + e);\n                    triggerQueue(call);\n                }, isJoin);\n\n                call.call.onJoin();\n            } else {\n                _webRtcManager.processRespond(call, function() {\n                    logger.info('Respond Call Update Event Successful. callId: ' + call.id);\n                    switch (_callFSM.getCurrentState(call)) {\n                    case fsmState.REMOTE_HOLD:\n                        triggerCallState(callStates.ON_REMOTE_HOLD);\n                        break;\n                    case fsmState.BOTH_HOLD:\n                        triggerCallState(callStates.ON_HOLD);\n                        break;\n                    case fsmState.LOCAL_HOLD:\n                        triggerCallState(callStates.ON_HOLD);\n                        break;\n                    case fsmState.COMPLETED:\n                        triggerCallState(callStates.IN_CALL);\n                        break;\n                    }\n                }, function(e) {\n                    logger.error('Respond Call Update Event FAILED: ' + e);\n                    triggerQueue(call);\n                }, isJoin);\n            }\n            break;\n        case transferEvent.remotePranswer_fsm:\n            // Workaround for webrtc dtls and firefox pranswer support bug. Can be removed when fixed by browsers.\n            // https://code.google.com/p/webrtc/issues/detail?id=3349\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1004510\n            if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n                logger.info('Only first sessionProgress notification is processed, so ignoring this one.');\n                triggerQueue(call);\n            } else {\n                _webRtcManager.processAnswer(call,\n                    function() {\n                        triggerCallState(callStates.EARLY_MEDIA);\n                    },\n                    function(e) {\n                        logger.error('Process answer for session progress FAILED: ' + e);\n                        triggerQueue(call);\n                    });\n            }\n            break;\n        case transferEvent.joining_fsm:\n            //if client is handling the refers from referer we need to trigger the refers for partyB and partyC\n            if (_config.clientControlled === 'true') {\n                call.referCall = function(referTo, referredBy) {\n                    _callControlService.refer(call.id, referTo, referredBy, function() {\n                        logger.info('Joining Event Successful. callId: ' + call.id);\n                        self.delegateToCallFSM(call, fsmNotificationEvent.refer_JSL);\n                    }, function(errorStr) {\n                        logger.error('Joining Event FAILED!!' + errorStr);\n                    });\n                };\n            }\n            triggerQueue(call);\n            break;\n        case transferEvent.transferSuccess_fsm:\n            call.localStatusCode = LOCAL_STATUS_CODES.SESSION_COMPLETED;\n            call.localReasonText = LOCAL_REASON_TEXTS.SESSION_COMPLETED;\n            _callControlService.endCall(call.id, function() {\n                logger.info('callControlService.endCall successful. callId: ' + call.id);\n            }, function() {\n                logger.error('callControlService.endCall FAILED!! callId: ' + call.id);\n            });\n            triggerCallState(callStates.TRANSFERRED);\n            triggerCallState(callStates.ENDED);\n            clearResources(call);\n            logger.info('endCall successful. callId: ' + call.id);\n            break;\n        case transferEvent.stateReverted_fsm:\n            //enable clicking\n            call.call.setButtonDisabler(false);\n            call.call.clearBtnTimeout();\n\n            switch (_callFSM.getCurrentState(call)) {\n            case fsmState.REMOTE_HOLD:\n                triggerCallStateWithoutQueue(callStates.ON_REMOTE_HOLD);\n                break;\n            case fsmState.BOTH_HOLD:\n                triggerCallStateWithoutQueue(callStates.ON_HOLD);\n                break;\n            case fsmState.LOCAL_HOLD:\n                triggerCallStateWithoutQueue(callStates.ON_HOLD);\n                break;\n            case fsmState.COMPLETED:\n                triggerCallStateWithoutQueue(callStates.IN_CALL);\n                break;\n            default:\n                logger.error('CANNOT REVERT THE STATE: ' + _callFSM.getCurrentState(call) + '. callId: ' + call.id);\n                break;\n            }\n            break;\n        case transferEvent.glareCondition_fsm:\n            handleFailure(call, null, null, {\n                handler: call.lastUpdateRequest.handler,\n                args: call.lastUpdateRequest.args,\n                timeout: call.retryAfter\n            });\n            break;\n        default:\n            logger.error('Undefined transition event: ' + event + ' for ' + call.id);\n            triggerQueue(call);\n            break;\n\n        }\n\n    };\n\n    self.refreshVideoRenderer = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            _webRtcManager.refreshVideoRenderer(internalCall);\n        }\n    };\n\n    self.hasVideoDevice = function() {\n        return _webRtcManager.isVideoSourceAvailable();\n    };\n\n    self.hasAudioDevice = function() {\n        return _webRtcManager.isAudioSourceAvailable();\n    };\n\n    self.hasScreenSharing = function() {\n        return _webRtcManager.isScreenSourceAvailable();\n    };\n\n    self.getLocalVideoResolutions = function() {\n        return _webRtcManager.getLocalVideoResolutions();\n    };\n\n    self.getRemoteVideoResolutions = function() {\n        return _webRtcManager.getRemoteVideoResolutions();\n    };\n\n    self.isCallMuted = function(data) {\n        return _webRtcManager.isAudioMuted(calls[data.callid]);\n    };\n\n    /* DEPRECIATED */\n    self.isVideoNegotationAvailable = function(data) {\n        var call = calls[data.callid];\n        if (call.sdp) {\n            return _sdpParser.isSdpHasVideo(call.sdp);\n        } else {\n            return false;\n        }\n    };\n\n    self.isVideoNegotiationAvailable = function(data) {\n        var call = calls[data.callid];\n        if (call.sdp) {\n            return _sdpParser.isSdpHasVideo(call.sdp);\n        } else {\n            return false;\n        }\n    };\n\n    self.getRemoteVideoState = function(callid) {\n        var call = calls[callid];\n        if (call.sdp) {\n            return call.remoteVideoState;\n        } else {\n            return false;\n        }\n    };\n\n    self.isSendInitialVideoEnabled = function(data) {\n        var call = calls[data.callid];\n        if (call.sdp) {\n            return _sdpParser.isSdpVideoSendEnabled(call.sdp);\n        } else {\n            return false;\n        }\n    };\n\n    self.getHoldStateOfCall = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            return CALL_HOLD_STATES[_callFSM.getCurrentState(internalCall)];\n        }\n        return undefined;\n    };\n\n    self.getCustomParametersOfCall = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall && internalCall.customParameters) {\n            return internalCall.customParameters;\n        }\n        return [];\n    };\n\n    self.setCustomParametersOfCall = function(data) {\n        var internalCall = calls[data.callid];\n        if (internalCall) {\n            internalCall.customParameters = data.customParams;\n            return true;\n        }\n        return false;\n    };\n\n    self.canOriginatorSendLocalVideo = function(data) {\n        var call = calls[data.callid];\n        if (call) {\n            return _webRtcManager.canOriginatorSendLocalVideo(call);\n        }\n        return false;\n    };\n\n    self.canOriginatorReceiveRemoteVideo = function(data) {\n        var call = calls[data.callid];\n        if (call) {\n            return _webRtcManager.canOriginatorReceiveRemoteVideo(call);\n        }\n        return false;\n    };\n\n    self.getStreamById = function(data) {\n        return _webRtcManager.getStreamById(data.streamId);\n    };\n\n    self.removeStreamById = function(data) {\n        _webRtcManager.removeStreamById(data.streamId);\n    };\n\n    self.setSelectedMicrophoneId = function(data) {\n        _webRtcManager.setSelectedMicrophoneId(data.microphoneId);\n    };\n\n    self.setSelectedSpeakerId = function(data, onSuccess, onFailure) {\n        _webRtcManager.setSelectedSpeakerId(data.speakerId, onSuccess, onFailure);\n    };\n\n    self.setSelectedCameraId = function(data) {\n        _webRtcManager.setSelectedCameraId(data.cameraId);\n    };\n\n    self.getCameraList = function(params) {\n        _webRtcManager.getCameraList(function(cameraList) {\n            _utils.callFunctionIfExist(params.onSuccess, cameraList);\n        });\n    };\n\n    self.getMicrophoneList = function(params) {\n        _webRtcManager.getMicrophoneList(function(microphoneList) {\n            _utils.callFunctionIfExist(params.onSuccess, microphoneList);\n        });\n    };\n\n    self.getSpeakerList = function(params) {\n        _webRtcManager.getSpeakerList(function(speakerList) {\n            _utils.callFunctionIfExist(params.onSuccess, speakerList);\n        });\n    };\n\n    self.changeDevices = function(data, onSuccess, onFailure) {\n        var internalCall, internalCallId;\n\n        function reInviteFailureCallback() {\n            logger.info('reInviteFailureCallback.');\n            setNotificationStateOfCallToIdle(internalCall);\n            self.end({\n                callid: internalCall.id\n            }, function() {\n                logger.info('end success.');\n\n            });\n        }\n\n        function reInviteSuccessCallback() {\n            logger.info('reInviteSuccessCallback.');\n            self.delegateToCallFSM(internalCall, fsmNotificationEvent.deviceChange_GUI);\n            setNotificationStateOfCallToIdle(internalCall);\n            _webRtcManager.addLocalStream(internalCall);\n            _utils.callFunctionIfExist(onSuccess);\n        }\n\n        function createReOfferSuccessCallback(sdp) {\n            internalCall.sdp = sdp;\n            logger.info('createReOfferSuccessCallback: sdp ' + sdp);\n            setNotificationStateOfCallToBusy(internalCall);\n            _callControlService.reinvite(internalCall.id, sdp,\n                reInviteSuccessCallback, reInviteFailureCallback, internalCall.customParameters\n            );\n        }\n\n        function createReOfferFailureCallback(e) {\n            logger.error('[callManager.offer] Error : ' + e);\n        }\n\n        function getUserMediaFailureCallback(e) {\n            logger.error('[getUserMedia] Error : ' + e);\n            _utils.callFunctionIfExist(onFailure, e);\n        }\n\n        function getUserMediaSuccessCallback(mediaInfo) {\n            internalCall.isVideoSourceAllowed = mediaInfo.video;\n            _webRtcManager.storeLocalStreamToCall(internalCall, mediaInfo.id);\n\n            _webRtcManager.createReOffer(internalCall, createReOfferSuccessCallback, createReOfferFailureCallback, true);\n        }\n\n        function replaceStream(call) {\n            var opts = {\n                isVideoEnabled: self.isVideoNegotiationAvailable({callid: call.id})\n            };\n            // below line is added as a workaround for mobile clients.\n            // there must be one active camera stream on mobile,\n            // that's why the old one must be deleted before getting access to the new one.\n            _webRtcManager.deleteLocalStream(call);\n\n            self.getUserMedia(opts, getUserMediaSuccessCallback, getUserMediaFailureCallback);\n        }\n\n        if (data.callid) {\n            internalCall = calls[data.callid];\n            replaceStream(internalCall);\n        } else {\n            for (internalCallId in calls) {\n                if (internalCallId) {\n                    internalCall = calls[internalCallId];\n                    replaceStream(internalCall);\n                }\n            }\n        }\n    };\n\n    /**\n     * Forward the function call to the webRtcManager.\n     */\n    self.changeSpeaker = function(params, onSuccess, onFailure) {\n        _webRtcManager.changeSpeaker(params.speakerId, onSuccess, onFailure);\n    };\n\n    self.handleIncomingIceCandidate = function(data) {\n        logger.debug('handleIncomingIceCandidate  ');\n        var sessionParams = data.sessionParams;\n\n        if (!data.sessionParams) {\n            logger.warn('incomingIceCandidate received without any parameters');\n            return;\n        }\n\n        var internalCall = calls[sessionParams.sessionData],\n            candidates = sessionParams.iceCandidates;\n\n        if (!internalCall || !candidates){\n            logger.warn('incomingIceCandidate received without a call id or any candidates ');\n            return;\n        }\n\n        _webRtcManager.addRemoteCandidates(internalCall, candidates);\n    };\n\n\n    _notificationCallBacks.call = function handleIncomingCall(data) {\n        // disabling the notifications for verizon demo\n        if (!_config.anonymous) {\n            var sdp, actions, params, calls,\n                call = null,\n                callid = null,\n                options = {},\n                callParams = data.callNotificationParams || {},\n                dispositionParams = data.callDispositionParams,\n                sessionParams = data.sessionParams,\n                callerName, callerNumber, calleeNumber, primaryContact;\n\n            //Since session also include disposition use it as default\n            params = sessionParams ? sessionParams : (dispositionParams ? dispositionParams : null);\n            logger.info('params: ' + params);\n\n            // send ringing notify to Spidr once a call is received\n            if(_config.ringingFeedback) {\n                _callControlService.ringing(params.sessionData);\n            }\n\n            if (params) {\n                actions = params.actions;\n                logger.info('actions: ' + actions);\n                if (params.sessionData) {\n                    callid = params.sessionData;\n                    calls = self.getCalls();\n                    if (calls[callid] !== undefined) {\n                        logger.info('call already exists: ' + callid);\n                        return;\n                    }\n                    logger.info('sessionData: ' + callid);\n                }\n                if (actions) {\n                    options.reject = (actions.indexOf('reject', 0) > -1);\n                    options.forward = (actions.indexOf('forward', 0) > -1);\n                    options.answer = (actions.indexOf('answer', 0) > -1);\n                }\n                if (params.sdp) {\n                    sdp = params.sdp;\n                }\n            }\n\n            call = new self.IncomingCall(callid, options);\n\n            //Let's not overwrite values that are undefined\n\n            callerNumber = getProperty(callParams, 'callerDisplayNumber');\n            if(callerNumber) {\n                call.callerNumber = callerNumber;\n            }\n            callerName = getProperty(callParams, 'callerName');\n            if(callerName) {\n                call.callerName = callerName;\n            }\n\n            calleeNumber = getProperty(callParams, 'calleeDisplayNumber');\n            if(calleeNumber) {\n                call.calleeNumber = calleeNumber;\n            }\n\n            primaryContact = getProperty(callParams, 'primaryContact');\n            if (primaryContact) {\n                call.primaryContact = primaryContact.split(';')[0];\n            }\n\n            // Track the remote participant information when a call is received.\n            call.remoteParticipant = {\n                displayNumber: getProperty(callParams, 'callerDisplayNumber'),\n                displayName: getProperty(callParams, 'callerName')\n            };\n\n            // Note: Some of our clients (KCS) need access to all the custom parameters received on an\n            // incoming call. Here we add a catch-all rawParameters that includes everything passed in.\n            call.rawParameters = params;\n\n            self.cerateIncomingCallInFSM(call, sdp);\n\n            //notify the callback\n            _utils.callFunctionIfExist(_core.call.onReceived, call);\n        }\n    };\n\n    function handleCallControlNotification(type, data) {\n        var sessionParams = data.sessionParams;\n        var callNotificationParams = data.callNotificationParams;\n        logger.info('CallControl notification received ' + type + ' sessionData:' + sessionParams.sessionData);\n        if (sessionParams.referTo) {\n            logger.info('CallControl notification received: ' + 'referTo:' + sessionParams.referTo + ' referredBy: ' + sessionParams.referredBy);\n        }\n        if (sessionParams) {\n            self.onNotificationEvent(type, sessionParams, callNotificationParams);\n        }\n    }\n\n    self.handleReplacesFailure = function(newlyCreatedCall) {\n        self.delegateToCallFSM(newlyCreatedCall, fsmNotificationEvent.callEnd_Notify);\n        self.sendRejectCallReplace(newlyCreatedCall);\n    };\n\n    self.handleReplacesWebrtcFailure = function(newlyCreatedCall) {\n        handleWebrtcFailure(newlyCreatedCall);\n        self.sendRejectCallReplace(newlyCreatedCall);\n    };\n\n    self.sendRejectCallReplace = function(newlyCreatedCall) {\n        _callControlService.rejectCallReplace(newlyCreatedCall, function() {\n            logger.info('[NotificationCallBacks.startCallReplace] rejectCallReplace has sent');\n        }, function() {\n            logger.info('[NotificationCallBacks.startCallReplace] rejectCallReplace could not sent');\n        });\n    };\n\n    self.createNewCall = function(notificationWithSdp, newlyCreatedCallId) {\n        if (notificationWithSdp) {\n            // notification with sdp is received, need to process the sdp and create an answer\n            return new self.IncomingCall(newlyCreatedCallId);\n        } else {\n            // slow start notification is received, need to create a new offer\n            return new self.OutgoingCall(newlyCreatedCallId);\n        }\n    };\n\n    self.handleStartCallReplaceNotification = function(data) {\n        var newlyCreatedSessionParams = data.sessionParams, // newly created session params\n            transferredCallId = data.replaces, // old session params that is being replaced by sessionParams\n            newlyCreatedCall = {},\n            remoteParty = data.remoteParty,\n            newlyCreatedCallId = newlyCreatedSessionParams.sessionData, // getting transfer target address\n            notificationWithSdp = !!newlyCreatedSessionParams.sdp;\n\n        newlyCreatedCall.call = self.createNewCall(notificationWithSdp, newlyCreatedCallId);\n        if (transferredCallId !== null && remoteParty !== null) {\n            logger.info('[NotificationCallBacks.handleStartCallReplaceNotification] notification received sessionData:' + newlyCreatedCallId);\n            var calls = self.getCalls(); // getting callid that is newly created\n            if (calls[newlyCreatedCallId] === undefined && calls[transferredCallId] !== undefined) {\n                // can be getting call object that is about to transferring\n                var transferredCall = calls[transferredCallId],\n                    transferredCallState = _callFSM.getCurrentState(transferredCall),\n                    isSendInitialVideo = self.isSendInitialVideoEnabled({\n                        'callid': transferredCallId\n                    });\n                newlyCreatedCall.id = newlyCreatedCallId;\n                newlyCreatedCall.sdp = newlyCreatedSessionParams.sdp;\n                newlyCreatedCall.currentState = fsmState.REPLACING;\n                _utils.callFunctionIfExist(_core.call.onCallReplaceReceived, newlyCreatedCall, transferredCall);\n                self.delegateToCallFSM(newlyCreatedCall, fsmNotificationEvent.startCallReplace_Notify);\n\n                if ((transferredCallState === fsmState.COMPLETED || transferredCallState === fsmState.REMOTE_HOLD)) {\n                    var opts = {\n                            isVideoEnabled: isSendInitialVideo\n                        }, successCallback = function () {\n                            // if previous call is an active call, mute it\n                            if (transferredCallState === fsmState.COMPLETED) {\n                                transferredCall.call.mute();\n                            }\n                            _callControlService.acceptCallReplace(newlyCreatedCall, function() {\n                                logger.info('[NotificationCallBacks.startCallReplace] onSuccess');\n                                newlyCreatedCall.callerNumber = remoteParty;\n                                newlyCreatedCall.replacingCallId = transferredCallId; // this will be used for unmuting previous call, when there occurs error while replacing call\n                                calls[newlyCreatedCallId] = newlyCreatedCall;\n                                setTimeout(function() {\n                                    _webRtcManager.addLocalStream(newlyCreatedCall);\n                                }, 10);\n                            }, function() {\n                                logger.info('[NotificationCallBacks.startCallReplace] onFailure');\n                                // unmute previousCall if previous call is active call, unmute it\n                                if (transferredCallState === fsmState.COMPLETED) {\n                                    transferredCall.call.unmute();\n                                }\n                                self.handleReplacesFailure(newlyCreatedCall);\n                            },\n                            data.customParameters);\n                        }, failureCallback = function () {\n                            logger.error('[NotificationCallBacks.handleStartCallReplaceNotification] webrtc error');\n                            self.handleReplacesWebrtcFailure(newlyCreatedCall);\n                        };\n\n                    self.getUserMedia(opts, function getUserMediaSuccessCallback(mediaInfo) {\n                        newlyCreatedCall.isVideoSourceAllowed = mediaInfo.video;\n                        _webRtcManager.storeLocalStreamToCall(newlyCreatedCall, mediaInfo.id);\n                        if (notificationWithSdp) {\n                            _webRtcManager.createAnswer(newlyCreatedCall, successCallback, failureCallback, isSendInitialVideo);\n                        } else {\n                            _webRtcManager.createOffer(newlyCreatedCall, successCallback, failureCallback, isSendInitialVideo);\n                        }\n                    }, function getUserMediaFailureCallback() {\n                        logger.error('[NotificationCallBacks.handleStartCallReplaceNotification] getUserMediaFailureCallback Error');\n                        self.handleReplacesFailure(newlyCreatedCall);\n                    });\n                } else {\n                    logger.info('[NotificationCallBacks.handleStartCallReplaceNotification] transferredCall is not in appropriate state: ' + transferredCallState);\n                    self.handleReplacesFailure(newlyCreatedCall);\n                }\n            } else {\n                logger.info('[NotificationCallBacks.handleStartCallReplaceNotification] newlyCreatedCallId already exists: ' + newlyCreatedCallId + ' or transferredCallId does not exists: ' + transferredCallId);\n                self.handleReplacesFailure(newlyCreatedCall);\n            }\n        } else {\n            logger.info('[NotificationCallBacks.handleStartCallReplaceNotification] replaces or remoteParty values is null');\n            self.handleReplacesFailure(newlyCreatedCall);\n        }\n    };\n\n    _notificationCallBacks.ringing = function(data) {\n        handleCallControlNotification(fsmNotificationEvent.ringing_Notify, data);\n    };\n\n    _notificationCallBacks.sessionProgress = function(data) {\n        //We are discarding the sessionProgress if the SDP is empty\n        if (data.sessionParams.sdp !== '') {\n            handleCallControlNotification(fsmNotificationEvent.sessionProgress, data);\n        } else {\n            logger.info('Warning: SDP of sessionProgress is empty.');\n        }\n    };\n\n    _notificationCallBacks.startCallUpdate = function handleStartCallUpdateNotification(data) {\n\n        // Helper function for getting info from callParams.\n        function getCallerInfo(callParams) {\n            var userId = callParams.callerDisplayNumber;\n            if(userId.indexOf('@') === -1) {\n                // Make sure the userId has a domain.\n                userId += _core.getDomain();\n            }\n            return {\n                // callParams has both number and name for caller.\n                displayNumber: userId,\n                displayName: callParams.callerName\n            };\n        }\n\n        // Helper function for getting info from callParams.\n        function getCalleeInfo(callParams) {\n            var userId = callParams.calleeDisplayNumber;\n            if(userId.indexOf('@') === -1) {\n                // Make sure the userId has a domain.\n                userId += _core.getDomain();\n            }\n            return {\n                // callParams only has number for callee.\n                displayNumber: userId\n            };\n        }\n\n        var sdp = data.sessionParams.sdp,\n            notificationEvent = fsmNotificationEvent.startCallUpdate_slowStart_Notify,\n\n            callid = data.sessionParams.sessionData,\n            callParams = data.callNotificationParams || {},\n            internalCall = calls[callid],\n            remoteCallParams = {\n                RemoteDisplayName: '',\n                RemoteDisplayNumber: ''\n            };\n\n        if (sdp) {\n            _sdpParser.init(sdp);\n            if (_sdpParser.isRemoteHold()) {\n                notificationEvent = fsmNotificationEvent.startCallUpdate_remoteHold_Notify;\n            } else {\n                notificationEvent = fsmNotificationEvent.startCallUpdate_remoteOffer_Notify;\n            }\n        }\n        if (internalCall) {\n            if (!internalCall.remoteDisplayNumber) {\n                internalCall.remoteDisplayNumber = getProperty(callParams, 'callerDisplayNumber');\n            }\n\n            if (internalCall.remoteDisplayNumber !== getProperty(callParams, 'callerDisplayNumber')) {\n                remoteCallParams.RemoteDisplayName = getProperty(callParams, 'callerName');\n                remoteCallParams.RemoteDisplayNumber = getProperty(callParams, 'callerDisplayNumber');\n\n                logger.info('Remote User has changed from :' + internalCall.call.callerName + '<' +\n                    internalCall.call.callerNumber + '> to ' + remoteCallParams.RemoteDisplayName + '<' +\n                    remoteCallParams.RemoteDisplayNumber + '>');\n\n                internalCall.remoteDisplayNumber = getProperty(callParams, 'callerDisplayNumber');\n                //This is for consultative transfer with slow start\n                internalCall.remoteEndPointChanged = true;\n\n                // Update the exposed call as well.\n                internalCall.call.calleeNumber = getProperty(callParams, 'calleeDisplayNumber');\n                internalCall.call.callerName = getProperty(callParams, 'callerName');\n                internalCall.call.callerNumber = getProperty(callParams, 'callerDisplayNumber');\n\n                _utils.callFunctionIfExist(_core.call.onRemoteEndPointChange, remoteCallParams);\n            }\n\n            var currentUser = _core.getUser();\n            var remoteParticipant;\n            // Outgoing call means the remote pariticpant is the callee.\n            if(internalCall.call.isOutgoing) {\n\n                // Double check that current user is the caller ...SPiDR switches\n                //      them during a transfer operation.\n                if(currentUser.indexOf(callParams.callerDisplayNumber) > -1) {\n                    remoteParticipant = getCalleeInfo(callParams);\n                } else {\n                    remoteParticipant = getCallerInfo(callParams);\n                }\n            } else {\n                // Incoming call means the remote participant is the caller.\n\n                // Double check that current user is the callee ...SPiDR switches\n                //      them during a transfer operation.\n                if(currentUser.indexOf(callParams.calleeDisplayNumber) > -1) {\n                    remoteParticipant = getCallerInfo(callParams);\n                } else {\n                    remoteParticipant = getCalleeInfo(callParams);\n                }\n            }\n\n            logger.info('Call remote participant:', remoteParticipant);\n\n            // If the remote participant changed, update it and notify the application.\n            if(remoteParticipant.displayNumber !== internalCall.call.remoteParticipant.displayNumber) {\n\n                // Edge-case: In a transfer operation, SPiDR switches the caller and callee users,\n                //      which triggers the \"changed remote\" logic. Ignore that case.\n                if(currentUser !== remoteParticipant.displayNumber) {\n                    internalCall.call.remoteParticipant = remoteParticipant;\n                    // Set a flag on the call to be used by the FSM.\n                    internalCall.remoteParticipantChanged = true;\n                    _utils.callFunctionIfExist(internalCall.call.onRemoteEndPointChange, remoteParticipant);\n                }\n            }\n        }\n\n        handleCallControlNotification(notificationEvent, data);\n    };\n\n    _notificationCallBacks.respondCallUpdate = function handleRespondCallUpdateNotification(data) {\n        if (data.sessionParams && data.sessionParams.retryAfter) {\n            handleCallControlNotification(fsmNotificationEvent.respondCallUpdate_glareCondition_Notify, data);\n        } else {\n            var sdp = data.sessionParams.sdp,\n                callid = data.sessionParams.sessionData,\n                internalCall = calls[callid],\n                notificationEvent = fsmNotificationEvent.respondCallUpdate_Notify;\n            if (internalCall && internalCall.previousState === fsmState.REMOTE_HOLD &&\n                _sdpParser.isAudioSdpDirectionSendonly(sdp)\n            ) {\n                notificationEvent = fsmNotificationEvent.respondCallUpdate_Notify_sendOnly;\n            }\n            handleCallControlNotification(notificationEvent, data);\n        }\n    };\n\n    _notificationCallBacks.sessionComplete = function handleSssionCompleteNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.sessionComplete_Notify, data);\n    };\n\n    _notificationCallBacks.sessionFail = function handleSessionFailNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.sessionFail_Notify, data);\n    };\n\n    _notificationCallBacks.callEnd = function handleCallEndNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.callEnd_Notify, data);\n    };\n\n    _notificationCallBacks.trying = function handleTryingNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.trying_Notify, data);\n    };\n\n    _notificationCallBacks.callCancel = function handleCallCancelNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.callCancel_Notify, data);\n    };\n\n    _notificationCallBacks.accepted = function handleAcceptedNotification(data) {\n        handleCallControlNotification(fsmNotificationEvent.accepted_Notify, data);\n    };\n\n    // here make parsing operations and then send sessionParams to the callManeger\n    _notificationCallBacks.startCallReplace = function(data) {\n        logger.debug('startCallReplace received: sdp: ' + data.sessionParams.sdp);\n        self.handleStartCallReplaceNotification(data);\n    };\n\n    _notificationCallBacks.IceCandidate = function(data) {\n        self.handleIncomingIceCandidate(data);\n    };\n\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.DEVICE_SUBSCRIPTION_STARTED, onSubscriptionReEstablished);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.CONNECTION_REESTABLISHED, onConnectionLost);\n    _globalBroadcaster.subscribe(CONSTANTS.EVENT.NOTIFICATION_CHANNEL_LOST, onConnectionLost);\n\n    //@{test-methods}\n    self.setCalls = function(_calls) {\n        calls = _calls;\n    };\n    self.setNotificationState = function(_notificationState) {\n        this.notificationState = _notificationState;\n    };\n\n    self.getStartCallQueue = function() {\n        return startCallQueue;\n    };\n    //@{test-methods}\n}\n","import {getProperty} from '../../utils';\nimport CONSTANTS from '../../constants';\n\nexport function CallControlServiceImpl({\n    Http: _server,\n    LogManager: _logManager,\n    Cache: _cache,\n    Config: _config,\n    SdpPipeline: _sdpPipeline\n}) {\n\n    var logger = _logManager.getLogger('callControlService');\n\n    function runSdpPipeline(callid, sdp, operation, type) {\n        return _sdpPipeline(callid, sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SEND_LOCAL, type);\n    }\n\n    function addNotificationChannel(data) {\n        if (_config.anonymous && _cache.getItem('NotificationId')) {\n            data.callMeRequest.notifyChannelId = _cache.getItem('NotificationId');\n        }\n    }\n\n    function errorParser(jqXHR) {\n        if (jqXHR && jqXHR.responseText) {\n            return JSON.parse(jqXHR.responseText).callControlResponse;\n        }\n    }\n\n    this.startCall = function(from, to, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(undefined, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        logger.info('Call Start Function: ' + from + ' --> ' + to);\n\n        // response of the startCall contains callid/sessionData\n        // callMe and callControl returns same response but object types have different namse\n        function parseCallStart(data) {\n            var callid, response = _config.anonymous ? data.callMeResponse : data.callControlResponse;\n            if (response) {\n                callid = response.sessionData;\n            }\n            return callid;\n        }\n\n        function dataType() {\n            var data;\n            if (_config.anonymous) {\n                data = {\n                    'callMeRequest': {\n                        'type': 'callStart',\n                        'from': from,\n                        'to': to,\n                        'sdp': modifiedSdp\n                    }\n                };\n                if (customParameters) {\n                    data.callMeRequest.customParameters = customParameters;\n                }\n            } else {\n                data = {\n                    'callControlRequest': {\n                        'type': 'callStart',\n                        'from': from,\n                        'to': to,\n                        'sdp': modifiedSdp\n                    }\n                };\n                if (customParameters) {\n                    data.callControlRequest.customParameters = customParameters;\n                }\n                if (_config.earlyMedia === true ||\n                    _config.callReplace === true) {\n                    data.callControlRequest.supported = [];\n                }\n                if (_config.earlyMedia === true) {\n                    data.callControlRequest.supported.push('earlymedia');\n                }\n                if (_config.callReplace === true) {\n                    data.callControlRequest.supported.push('replacecall');\n                }\n            }\n            return data;\n        }\n\n        var data = dataType(),\n            realm = _config.realm;\n        addNotificationChannel(data);\n\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, _config.anonymous ? '/callMe' + (realm ? ('?tokenrealm=' + realm) : '') : '/callControl'),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        parseCallStart,\n        errorParser\n        );\n    };\n\n    this.audit = function(callid, onSuccess, onFailure) {\n        var data, realm = _config.realm;\n\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest': {\n                    'type': 'audit'\n                }\n            };\n        } else {\n            data = {\n                'callControlRequest': {\n                    'type': 'audit'\n                }\n            };\n        }\n\n        //TODO JF verify if we need to always do that and not only for callMe realm;\n        if (realm) {\n            callid = callid.split('%0A')[0];\n        }\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm ? ('?tokenrealm=' + realm) : '')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.hold = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(callid, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        logger.info('Hold Function : sdp : ' + modifiedSdp);\n        var data, realm = _config.realm;\n\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callMeRequest.customParameters = customParameters;\n            }\n        }\n        else {\n            data = {\n                'callControlRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callControlRequest.customParameters = customParameters;\n            }\n        }\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm?('?tokenrealm=' + realm):'')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.unhold = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(callid, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        logger.info('UnHold Function : sdp : ' + modifiedSdp);\n        var data, realm = _config.realm;\n\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callMeRequest.customParameters = customParameters;\n            }\n        }\n        else {\n            data = {\n                'callControlRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callControlRequest.customParameters = customParameters;\n            }\n        }\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm?('?tokenrealm=' + realm):'')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.reinvite = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(callid, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        logger.info('reinvite Function : sdp : ' + modifiedSdp);\n\n        var data, realm = _config.realm;\n\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callMeRequest.customParameters = customParameters;\n            }\n        }\n        else {\n            data = {\n                'callControlRequest':\n                {\n                    'type':'startCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callControlRequest.customParameters = customParameters;\n            }\n        }\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm?('?tokenrealm=' + realm):'')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.respondCallUpdate = function(callid, sdp, onSuccess, onFailure, customParameters, operation=CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE) {\n        const modifiedSdp = runSdpPipeline(callid, sdp, operation, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n        logger.info('Respond Call Update Function : sdp : ' + modifiedSdp);\n        var data, realm = _config.realm;\n\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest':\n                {\n                    'type':'respondCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callMeRequest.customParameters = customParameters;\n            }\n        }\n        else {\n            data = {\n                'callControlRequest':\n                {\n                    'type':'respondCallUpdate',\n                    'sdp': modifiedSdp\n                }\n            };\n            if (customParameters) {\n                data.callControlRequest.customParameters = customParameters;\n            }\n        }\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm?('?tokenrealm=' + realm):'')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.respondToRemoteHold = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        this.respondCallUpdate(callid, sdp, onSuccess, onFailure, customParameters, CONSTANTS.WEBRTC.SDP.OPERATION.HOLD);\n    };\n\n    this.respondToRemoteUnhold = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        this.respondCallUpdate(callid, sdp, onSuccess, onFailure, customParameters, CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD);\n    };\n\n    this.join = function(firstSessionData, secondSessionData, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(undefined, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        logger.info('Join Function : sdp : ' + modifiedSdp);\n\n        function parseJoin(data) {\n            var callid, response = data.callControlResponse;\n\n            if (response) {\n                callid = response.sessionData;\n            }\n\n            return callid;\n        }\n\n        var data = {\n            'callControlRequest': {\n                'type': 'join',\n                'firstSessionData': firstSessionData,\n                'secondSessionData': secondSessionData,\n                'sdp': modifiedSdp\n            }\n        };\n        if (customParameters) {\n            data.callControlRequest.customParameters = customParameters;\n        }\n\n        if (_config.clientControlled === 'true') {\n            data.callControlRequest.clientControlled = 'true';\n        }\n\n\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, '/callControl/'),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        parseJoin,\n        errorParser\n        );\n    };\n\n    this.refer = function(callid, referTo, referredBy, onSuccess, onFailure) {\n        logger.info('Refer Function : refer to: ' + referTo);\n        var data = {\n            'callControlRequest': {\n                'type': 'refer',\n                'from': referredBy,\n                'to': referTo\n            }\n        };\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callid),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.endCall = function(callid, onSuccess, onFailure, localReasonText) {\n        var realm = _config.realm;\n        logger.info('endCall Function: ' + callid);\n\n        var endUrl = (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid;\n        var queryString = (localReasonText ? ('?reasonText=' + localReasonText) : '');\n        if(realm) {\n            let delimiter = queryString ? '&' : '?';\n            queryString += (realm ? (delimiter + 'tokenrealm=' + realm) : '');\n        }\n\n        _server.sendDeleteRequest({\n            'url': _server.getWAMUrl(1, endUrl + queryString),\n            'data': {}\n        },\n        onSuccess,\n        onFailure,\n        null,\n        errorParser\n        );\n    };\n\n    this.answerCall = function(callid, sdp, onSuccess, onFailure, customParameters) {\n        const modifiedSdp = runSdpPipeline(callid, sdp, CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n        logger.info('Answer Call Function : sdp : ' + modifiedSdp);\n\n        var data = {\n            'callControlRequest': {\n                'type': 'callAnswer',\n                'sdp': modifiedSdp\n            }\n        };\n        if (customParameters) {\n            data.callControlRequest.customParameters = customParameters;\n        }\n\n        if (_config.callReplace === true) {\n            data.callControlRequest.supported = ['replacecall'];\n        }\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callid),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    function makeRequest(action, sessionData, onSuccess, onFailure, address) {\n        logger.info('makeRequest Function with action : ' + action);\n        var data = {\n            'callDispositionRequest': {\n                'action': action,\n                'sessionData': sessionData\n            }\n        };\n        if (address) {\n            data.callDispositionRequest.address = address;\n        }\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, '/calldisposition'),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        null,\n        errorParser\n        );\n    }\n\n    this.sendCustomParameters = function(callid, customParameters, onSuccess, onFailure) {\n        logger.info('sendCustomParameters Function with parameters : ' + customParameters);\n        var data, realm = _config.realm;\n        if (_config.anonymous) {\n            data = {\n                'callMeRequest': {\n                    'type': 'sendCustomHeaders',\n                    'customParameters': customParameters\n                }\n            };\n        } else {\n            data = {\n                'callControlRequest': {\n                    'type': 'sendCustomHeaders',\n                    'customParameters': customParameters\n                }\n            };\n        }\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid + (realm?('?tokenrealm=' + realm):'')),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n\n    this.reject = function(callid, onSuccess, onFailure) {\n        var dummy;\n        logger.info('Reject Function: ' + callid);\n        makeRequest('reject', callid, onSuccess, onFailure, dummy);\n    };\n\n\n    this.forward = function(callid, address, onSuccess, onFailure) {\n        logger.info('Forward Function : address: ' + address);\n        makeRequest('forward', callid, onSuccess, onFailure, address);\n    };\n\n    this.transfer = function(callid, address, sessiondataToTransfer, onSuccess, onFailure) {\n        logger.info('Call Transfer Function : target address: ' + address);\n        var data = {\n            'callControlRequest': {\n                'type': 'transfer',\n                'address': address,\n                'sessionData': sessiondataToTransfer\n            }\n        };\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callid),\n            'data': data\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.clickToCall = function(callingParty, calledParty, onSuccess, onFailure) {\n        var data = {\n            'clickToCallRequest': {\n                'callingParty': callingParty,\n                'calledParty': calledParty\n            }\n        };\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, '/clicktocall'),\n            'data': data\n        },\n        onSuccess,\n        onFailure\n        );\n    };\n\n    this.getIMRN = function(realm, source, destination, onSuccess, onFailure) {\n        logger.info('(Wam Call) getIMRN Function ');\n\n        function parseIMRNResponse(IMRNdata) {\n            var receivedIMRN;\n            if (IMRNdata && IMRNdata.imrnResponse) {\n                receivedIMRN = getProperty(IMRNdata.imrnResponse, 'imrn');\n            }\n            return receivedIMRN;\n        }\n\n        if (destination.match('@')) {\n            if (destination.split(':')[0] !== 'sip') {\n                destination = 'sip:' + destination;\n            }\n        }\n\n        var data = {\n            'imrnRequest': {\n                'realm': realm,\n                'sourceAddress': source,\n                'destinationAddress': destination\n            }\n        };\n        _server.sendPostRequest({\n            'url': _server.getWAMUrl(1, '/imrn'),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        parseIMRNResponse\n        );\n    };\n\n    this.acceptCallReplace = function(callData, onSuccess, onFailure, customParameters) {\n        function parseAcceptCallReplaceData(data) {\n            logger.info('acceptCallReplace.data: ' + data);\n            return data;\n        }\n\n        function dataType() {\n            var data;\n            data = {\n                'callControlRequest': {\n                    'type': 'acceptCallReplace',\n                    'sdp': callData.sdp\n                }\n            };\n            if (customParameters) {\n                data.callControlRequest.customParameters = customParameters;\n            }\n\n            return data;\n        }\n        var data = dataType();\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callData.id),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        parseAcceptCallReplaceData,\n        errorParser\n        );\n    };\n\n    this.rejectCallReplace = function(callData, onSuccess, onFailure) {\n        function parseRejectCallReplaceData(data) {\n            logger.info('rejectCallReplace.data: ' + data);\n            return data;\n        }\n\n        function dataType() {\n            var data;\n            data = {\n                'callControlRequest': {\n                    'type': 'rejectCallReplace',\n                }\n            };\n            return data;\n        }\n        var data = dataType();\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callData.id),\n            'data': data\n        },\n        onSuccess,\n        onFailure,\n        parseRejectCallReplaceData,\n        errorParser\n        );\n    };\n\n    this.ringing = function(callid) {\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, '/callControl/callSessions/' + callid),\n            'data': {\n                'callControlRequest': {\n                    'type': 'ringing'\n                }\n            }\n        }, null, null, null, errorParser);\n    };\n\n    this.updateIceCandidate = function(callData, onSuccess, onFailure) {\n        var realm = _config.realm;\n\n        _server.sendPutRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callData.id + (realm ? ('?tokenrealm=' + realm) : '')),\n            'data': {\n                'callControlRequest': {\n                    'type': 'updateIceCandidate',\n                    'iceCandidates': callData.iceCandidates\n                }\n            }\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n    this.getSession = function(callid, onSuccess, onFailure) {\n        _server.sendGetRequest({\n            'url': _server.getWAMUrl(1, (_config.anonymous ? '/callMe/callSessions/' : '/callControl/callSessions/') + callid)\n        }, onSuccess, onFailure, null, errorParser);\n    };\n\n}\n","import {CallImpl} from './call';\n\nexport default {\n    Call: container => new CallImpl(container)\n};\n","import adaptorModule from './adaptor/module';\nimport decoratorModule from './decorator/module';\nimport modelModule from './model/module';\n\nimport { WebRtcManager } from './webRtcManager';\nimport { WebRtcAdaptorFactory } from './webRtcAdaptorFactory';\n\n\nexport default {\n    ... adaptorModule,\n    ... decoratorModule,\n    ... modelModule,\n\n    WebRtcAdaptorFactory: container => new WebRtcAdaptorFactory(container),\n    WebRtcManager: container => new WebRtcManager(container)\n};\n","import {WebRtcAdaptorImpl} from './webRtcAdaptor';\nimport {WebRtcChromeAdaptorImpl} from './webRtcChromeAdaptor';\nimport {WebRtcContainerAdaptorImpl} from './webRtcContainerAdaptor';\nimport {WebRtcFirefoxAdaptorImpl} from './webRtcFirefoxAdaptor';\nimport {WebRtcFirefoxEsrAdaptorImpl} from './webRtcFirefoxEsrAdaptor';\nimport {WebRtcPluginAdaptorImpl} from './webRtcPluginAdaptor';\nimport {WebRtcPluginv22AdaptorImpl} from './webRtcPluginv22Adaptor';\nimport {WebRtcPluginv31AdaptorImpl} from './webRtcPluginv31Adaptor';\n\nexport default {\n    WebRtcAdaptorBaseFactory: container =>\n        (decorator, model) =>\n            new WebRtcAdaptorImpl({decorator, model, ...container }),\n\n    WebRtcChromeAdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcChromeDecoratorFactory;\n            model = model || container.WebRtcChromeAdaptorModelFactory();\n            base = base || container.WebRtcAdaptorBaseFactory(decorator, model);\n\n            return new WebRtcChromeAdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcContainerAdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcChromeDecoratorFactory;\n            model = model || container.WebRtcChromeAdaptorModelFactory();\n            base = base || container.WebRtcAdaptorBaseFactory(decorator, model);\n\n            return new WebRtcContainerAdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcFirefoxAdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcFirefoxDecoratorFactory;\n            model = model || container.WebRtcFirefoxAdaptorModelFactory();\n            base = base || container.WebRtcAdaptorBaseFactory(decorator, model);\n\n            return new WebRtcFirefoxAdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcFirefoxEsrAdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcFirefoxDecoratorFactory;\n            model = model || container.WebRtcFirefoxAdaptorModelFactory();\n            base = base || container.WebRtcFirefoxAdaptorFactory(undefined, decorator, model);\n\n            return new WebRtcFirefoxEsrAdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcPluginAdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcDecoratorFactory;\n            model = model || container.WebRtcPluginAdaptorModelFactory();\n            base = base || container.WebRtcAdaptorBaseFactory(decorator, model);\n\n            return new WebRtcPluginAdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcPluginv22AdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcDecoratorFactory;\n            model = model || container.WebRtcPluginAdaptorModelFactory();\n            base = base || container.WebRtcPluginAdaptorFactory(decorator, model);\n\n            return new WebRtcPluginv22AdaptorImpl({ base, decorator, model, ...container });\n        },\n\n    WebRtcPluginv31AdaptorFactory: container =>\n        function(base, decorator, model) {\n\n            decorator = decorator || container.WebRtcDecoratorFactory;\n            model = model || container.WebRtcPluginAdaptorModelFactory();\n            base = base || container.WebRtcPluginAdaptorFactory(base, decorator, model);\n\n            return new WebRtcPluginv31AdaptorImpl({ base, decorator, model, ...container });\n        },\n};\n","import CONSTANTS from '../../constants';\nimport {mediaErrors} from '../../call/call';\nimport {getInteger, compose, makeSafeForCSS} from '../../utils';\nimport errors from '../../errors';\n\nexport function WebRtcAdaptorImpl({\n    decorator: _decorator,\n    model: _model,\n    LogManager: _logManager,\n    Utils: _utils,\n    SdpParser: _sdpParser,\n    Cache: _cache,\n    Core: _fcs,\n    Config: _config,\n    SdpPipeline: _sdpPipeline\n}) {\n    /*\n     * ABE-832: On MAC OS, Safari browser version 6.1 doesn't recognize array\n     * indices of integer type. Therefore, all [0] calls are changed to [\"0\"].\n     * All other browser types function correctly with both integer and string\n     * indices.\n     *\n     * Right now, this only affects arrays coming from the plugin.\n     *\n     * That's why we use zero = \"0\". Using \"0\" directly didn't work because\n     * minification replaces it with 0.\n     */\n    var self = this,\n        logger = _logManager.getLogger('WebRtcAdaptorImpl'),\n        zero = '0',\n        peerId = 0;\n\n    logger.debug('WebRtcAdaptor initializing');\n\n    compose(_model, self);\n\n    self.performSdpWorkaroundsBeforeProcessingIncomingSdp = function(sdp) {\n        sdp = _sdpParser.updateH264LevelTo42E01F(sdp, self.isH264Enabled());\n        sdp = _sdpParser.deleteBandwidthLineFromSdp(sdp);\n        sdp = _sdpParser.removeG722Codec(sdp);\n        return sdp;\n    };\n\n    self.setRemoteDescription = function(operation, call, peer, type, sdp, onSuccess, onFailure) {\n        var remoteDesc;\n\n        function storeRemoteSdp() {\n            call.stableRemoteSdp = sdp;\n            logger.debug('stored stable remote sdp');\n            if (typeof onSuccess === 'function') {\n                onSuccess();\n            }\n        }\n\n        if (peer) {\n            if (operation) {\n                sdp = _sdpPipeline(call.id, sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_REMOTE, type);\n            }\n\n            remoteDesc = self.getRtcLibrary().createRTCSessionDescription(type, sdp);\n            peer.setRemoteDescription(remoteDesc, storeRemoteSdp, onFailure);\n        } else {\n            storeRemoteSdp();\n        }\n    };\n\n    self.isVideoDirectionsSendRecv = function(localSdp, remoteSdp) {\n        return _sdpParser.isVideoSdpDirectionSendrecv(localSdp) &&\n            _sdpParser.isVideoSdpDirectionSendrecv(remoteSdp);\n    };\n\n    self.isAudioDirectionsSendRecv = function(localSdp, remoteSdp) {\n        return _sdpParser.isAudioSdpDirectionSendrecv(localSdp) &&\n            _sdpParser.isAudioSdpDirectionSendrecv(remoteSdp);\n    };\n\n    self.isSdpDirectionsSendRecv = function(localSdp, remoteSdp) {\n        var isAudioSdpDirectionsSendRecv = self.isAudioDirectionsSendRecv(localSdp, remoteSdp);\n        if (_sdpParser.isSdpHasVideo(localSdp)) {\n            return isAudioSdpDirectionsSendRecv && self.isVideoDirectionsSendRecv(localSdp, remoteSdp);\n        }\n\n        return isAudioSdpDirectionsSendRecv;\n    };\n\n    self.oldSolutionNeeded = function(oldSdp, newSdp) {\n        var oldVideoLine = _sdpParser.isSdpHasVideo(oldSdp),\n            newVideoLine = _sdpParser.isSdpHasVideo(newSdp),\n            oldSessionId = _sdpParser.getSessionIdFromSdp(oldSdp),\n            newSessionId = _sdpParser.getSessionIdFromSdp(newSdp),\n            telephoneEventPayloadChanged = _sdpParser.hasCodecPayloadChanged(oldSdp, newSdp);\n\n        logger.debug('telephoneEventPayloadChanged: ' + telephoneEventPayloadChanged + ' session changed: ' + (oldSessionId !== newSessionId) + ' video line changed: ' + (oldVideoLine !== newVideoLine));\n        if (telephoneEventPayloadChanged || oldSessionId !== newSessionId || oldVideoLine !== newVideoLine) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    self.iceCredentialsChanged = function(oldSdp, newSdp) {\n        var oldVideoUfrag = _sdpParser.getICEParams(oldSdp, CONSTANTS.SDP.ICE_UFRAG, true),\n            newVideoUfrag = _sdpParser.getICEParams(newSdp, CONSTANTS.SDP.ICE_UFRAG, true);\n\n        logger.debug('ufrag changed: ' + (oldVideoUfrag !== newVideoUfrag));\n        if (oldVideoUfrag !== newVideoUfrag) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    /*\n     * update codecs accordingly\n     */\n    self.updateCodecs = function(call, oSdp) {\n        oSdp = _sdpParser.replaceCodecs(oSdp, call.codecsToReplace ? call.codecsToReplace : _config.codecsToReplace);\n        oSdp = _sdpParser.updateAudioCodec(oSdp);\n        oSdp = _sdpParser.updateVideoCodec(oSdp);\n        return oSdp;\n    };\n\n    /*\n     * Overrides configured codec values with originators value, in this case, webRtc is terminator side\n     */\n    self.overrideConfiguredCodecValues = function(call, sdp) {\n        var index, newValue;\n        call.codecsToReplace = call.codecsToReplace ? call.codecsToReplace : JSON.parse(JSON.stringify(_config.codecsToReplace));\n        if (call.codecsToReplace) {\n            for (index = 0; index < call.codecsToReplace.length; index++) {\n                newValue = _sdpParser.getPayloadTypeOf(call.codecsToReplace[index].name, sdp);\n                if (newValue && (newValue !== -1)) {\n                    // getPayloadTypeOf method could return\n                    // either array or string\n                    // In such case, arrays first element will be used\n                    if (Array.isArray(newValue)) {\n                        newValue = newValue[0];\n                    }\n                    call.codecsToReplace[index].value = newValue;\n                }\n            }\n        }\n    };\n\n    //This function is called internally when we make a new call or hold/unhold scenario\n    // Native implementation lies on webRtcAdaptor.js\n    self.addLocalStream = function(internalCall) {\n        var stream, fireEvent = false,\n            isSendingLocalVideo = self.canOriginatorSendLocalVideo(internalCall);\n\n        if (internalCall.localMedia && internalCall.localMedia.stream) {\n            if (isSendingLocalVideo) {\n                stream = internalCall.localMedia.stream;\n\n                // Note: don't think this next assignment is needed.\n                internalCall.call.localStream = stream;\n                if (self.getDefaultVideoContainer()) {\n                    fireEvent = self.useDefaultRenderer(stream, true, true);\n                } else if (self.getLocalVideoContainer()) {\n                    fireEvent = self.createStreamRenderer(stream, self.getLocalVideoContainer(), {\n                        audio: false,\n                        video: true,\n                        split: true\n                    });\n                } else {\n                    fireEvent = true;\n                }\n\n                logger.debug('onLocalStreamAdded: ' + stream.id);\n                if (fireEvent) {\n                    self.fireOnLocalStreamAddedEvent(internalCall, stream);\n                }\n            } else {\n                if (self.getDefaultVideoContainer()) {\n                    if (self.getDefaultVideoContainer().lastElementChild) {\n                        self.disposeStreamRenderer(self.getDefaultVideoContainer().lastElementChild);\n                    }\n                } else if (self.getLocalVideoContainer()) {\n                    self.disposeStreamRenderer(self.getLocalVideoContainer());\n                }\n            }\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n\n    self.fireOnLocalStreamAddedEvent = function(call, stream) {\n        if (call && call.call && call.call.onLocalStreamAdded) {\n            _utils.callFunctionIfExist(call.call.onLocalStreamAdded, stream);\n        }\n    };\n\n    self.storeLocalStreamToCall = function(call, localStreamId) {\n        logger.debug('assigning local stream [' + localStreamId + '] to call: ' + call.id);\n        if (call.localMedia) {\n            self.endLocalMedia(call.localMedia);\n        }\n        self.updateLocalStreamToCall(call, localStreamId);\n    };\n\n    self.updateLocalStreamToCall = function(call, localStreamId) {\n        call.localMedia = self.getLocalStreamMap().get(localStreamId);\n    };\n\n    /*\n     * createNativeReOffer\n     */\n    self.createReOffer = function(call, onSuccess, onFailure, usePreviousMediaDirection) {\n        var peer = call.peer,\n            localDescObj, localAudioDirection, localVideoDirection,\n            prevLocalSdp = call.stableLocalSdp,\n            deleteVideoStream = false;\n\n        logger.debug('createReOffer:' + call.id);\n\n        if (!usePreviousMediaDirection) {\n            deleteVideoStream = !call.initialVideoState && _sdpParser.isSdpHasVideo(call.stableLocalSdp);\n        }\n\n        //TODO Why does a ReOffer absolutelty needs a new peer? There was no check here\n        if (self.createNewPeerForCall(call, deleteVideoStream)) {\n            peer = call.peer;\n        }\n\n        peer.createOffer(\n            function createReOfferCreateOfferSuccessCallback(oSdp) {\n\n                if (usePreviousMediaDirection) {\n                    localAudioDirection = _sdpParser.getAudioSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateAudioSdpDirection(oSdp.sdp, localAudioDirection);\n                    localVideoDirection = _sdpParser.getVideoSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, localVideoDirection);\n                }\n\n                oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n                oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n                oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n\n                oSdp.sdp = _sdpParser.updateVersion(prevLocalSdp, oSdp.sdp);\n                oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n                oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n                oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.REOFFER, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp);\n\n                logger.trace('createReOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n\n                peer.setLocalDescription(localDescObj, function createReOfferSetLocalDescriptionSuccessCallback() {\n                    logger.debug('createReOffer: setLocalDescription success' + call.id);\n                    if (_config.trickleIceSupport === CONSTANTS.TRICKLE.FULL) {\n                        _utils.callFunctionIfExist(onSuccess, oSdp.sdp);\n                    }\n                }, function createReOfferSetLocalDescriptionFailureCallback(e) {\n                    logger.debug('createReOffer: setLocalDescription failed!!' + e + call.id);\n                    _utils.callFunctionIfExist(onFailure);\n                });\n            },\n            function createReOfferCreateOfferFailureCallback(e) {\n                logger.error('createReOffer: createOffer failed!! ' + e);\n                _utils.callFunctionIfExist(onFailure);\n            });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.getLocalAudioTrack = function(peer) {\n        logger.debug('getLocalAudioTrack');\n        var audioTracks;\n\n        if(peer.getSenders) {\n            /**\n             * RTCPeerConnection.getLocalStreams is being deprecated.\n             * Prefer to use RTCPeerConnection.getSenders if present.\n             */\n            // Retrieve the relevant RTCRtpSender objects.\n            var audioSenders = peer.getSenders().filter(function(sender) {\n                return sender.track.kind === 'audio';\n            });\n            // Retrieve the tracks from the audio senders.\n            audioTracks = audioSenders.map(function(sender) {\n                return sender.track;\n            });\n\n            if (audioTracks && audioTracks.length > 0) {\n                return audioTracks[0];\n            }\n        } else if (peer.getLocalStreams) {\n            var streams = peer.getLocalStreams();\n            if (streams && streams.length > 0) {\n                audioTracks = streams[zero].getAudioTracks();\n                if (audioTracks && audioTracks.length > 0) {\n                    return audioTracks[zero];\n                }\n            }\n        }\n\n        return null;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.getLocalVideoTrack = function(peer) {\n        logger.debug('getLocalVideoTrack');\n        var streams, videoTracks;\n\n        if(peer.getSenders) {\n            /**\n             * RTCPeerConnection.getLocalStreams is being deprecated.\n             * Prefer to use RTCPeerConnection.getSenders if present.\n             */\n            // Retrieve the relevant RTCRtpSender objects.\n            var videoSenders = peer.getSenders().filter(function(sender) {\n                return sender.track.kind === 'video';\n            });\n            // Retrieve the tracks from the audio senders.\n            videoTracks = videoSenders.map(function(sender) {\n                return sender.track;\n            });\n\n            if (videoTracks && videoTracks.length > 0) {\n                return videoTracks[0];\n            }\n        } else if (peer.getLocalStreams) {\n            streams = peer.getLocalStreams();\n            if (streams && streams.length > 0){\n                videoTracks = streams[zero].getVideoTracks();\n                if (videoTracks && videoTracks.length > 0) {\n                    return videoTracks[zero];\n                }\n            }\n        }\n\n        return null;\n    };\n\n    self.getRemoteVideoTrack = function(peer) {\n        logger.debug('getRemoteVideoTrack');\n        var streams;\n\n        if (peer.getRemoteStreams) {\n            streams = peer.getRemoteStreams();\n            if (streams && streams[zero]) {\n                return streams[zero].getVideoTracks();\n            }\n        }\n\n        return [];\n    };\n\n    self.muteAudioTrack = function(call, mute, userAction) {\n        if (!self.isInitialized()) {\n            logger.warn('muteAudioTrack: Plugin is not installed');\n            return;\n        }\n\n        if (!call.peer) {\n            return;\n        }\n\n        if(call.localMedia) {\n\n            var newMuteState = call.audioMuted;\n\n            // Mute both the audio gain node and the original track. This will help in some cases\n            // where muting the track doesn't work.\n            if (call.localMedia.audioGain) {\n                logger.info('Setting mute state [' + mute + '] on gain node for call [' + call.id + ']');\n                call.localMedia.audioGain.gain.value = mute ? 0 : 1;\n                newMuteState = mute;\n            }\n\n            if (call.localMedia.originalStream) {\n                var audioTracks = call.localMedia.originalStream.getAudioTracks();\n                var localAudioTrack;\n\n                if (audioTracks && audioTracks.length > 0) {\n                    localAudioTrack = audioTracks[zero];\n                }\n\n                if (localAudioTrack) {\n                    logger.info('mute Audio Track [' + localAudioTrack.id + '], call [' + call.id + '] mute=' + mute);\n                    localAudioTrack.enabled = !mute;\n                    newMuteState = mute;\n                }\n            }\n\n            call.audioMuted = newMuteState;\n            if (userAction) {\n                call.fcsUserAudioMuteState = newMuteState;\n            }\n        }\n    };\n\n    self.muteVideoTrack = function(call, mute, userAction) {\n        var localVideoTrack, videoTracks;\n\n        if (!self.isInitialized()) {\n            logger.warn('muteVideoTrack: Plugin is not installed');\n            return;\n        }\n\n        if (!call.peer) {\n            return;\n        }\n\n        if(call.localMedia && call.localMedia.originalStream){\n            videoTracks = call.localMedia.originalStream.getVideoTracks();\n        }\n\n        if (videoTracks && videoTracks.length > 0) {\n            localVideoTrack = videoTracks[zero];\n        }\n\n        if (localVideoTrack) {\n            logger.info('mute Video Track [' + localVideoTrack.id + '], call [' + call.id + '] mute=' + mute);\n            localVideoTrack.enabled = !mute;\n            call.videoMuted = mute;\n            if (userAction) {\n                call.fcsUserVideoMuteState = mute;\n            }\n        }\n    };\n\n    self.updateSilenceStatus = function(call) {\n        if (!self.isInitialized()) {\n            logger.warn('muteAudioTrack: Plugin is not installed');\n            return;\n        }\n\n        if (!call.remoteStream) {\n            // We don't have a remote stream yet. Return, and later when the peer and stream is created we will update the silence.\n            return;\n        }\n\n        const safeStreamId = makeSafeForCSS(call.remoteStream.id);\n\n        // Find stream audio sinks for this stream and mute their volume. Do this via the DOM.\n        // Will only support <video> and <audio> tags created via `createStreamRenderer`\n        // Once found, set their muted state to the silence state.\n\n        const audioRenderer = document.querySelector('#audio-stream-id-' + safeStreamId);\n        if (audioRenderer) {\n            // Found matching audio renderer. Set the muted status.\n            audioRenderer.muted = call.silenced;\n        } else {\n            // Couldn't find an audio renderer, try to see if there is a video renderer. This is only\n            // possible in non-split mode (legacy). Or for local stream, which would be a different stream id.\n            const videoRenderer = document.querySelector('#video-stream-id-' + safeStreamId);\n            if (videoRenderer) {\n                videoRenderer.muted = call.silenced;\n            }\n        }\n    };\n\n    self.isAudioMuted = function(call) {\n        if (call && call.audioMuted) {\n            return call.audioMuted;\n        }\n        return false;\n    };\n\n    /**\n     * Sets the mute state of the call to last value specified by the user.\n     * For example, if a call was unmuted before a hold, it will go back to being unmuted after the call comes off of hold.\n     * @function\n     * @param {Object} call internalCall\n     *\n     */\n    self.restoreUserMuteStateOfCall = function(call) {\n        var previousMuteStateOfAudio = false,\n            previousMuteStateOfVideo = false;\n        if (!call.peer) {\n            return;\n        }\n\n        if (call.fcsUserAudioMuteState) {\n            previousMuteStateOfAudio = call.fcsUserAudioMuteState;\n        }\n\n        if (call.fcsUserVideoMuteState) {\n            previousMuteStateOfVideo = call.fcsUserVideoMuteState;\n        }\n\n        logger.debug('previous audio mute state of call: ' + previousMuteStateOfAudio);\n        logger.debug('previous video mute state of call: ' + previousMuteStateOfVideo);\n        self.muteAudioTrack(call, previousMuteStateOfAudio);\n        self.muteVideoTrack(call, previousMuteStateOfVideo);\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * Mutes audio and video tracks (to be used during Hold)\n     *\n     * @ignore\n     * @name rtc.mute\n     * @function\n     * @param {Object} call internalCall\n     * @param {boolean} mute true to mute, false to unmute\n     */\n    self.muteOnHold = function(call, mute) {\n        self.muteAudioTrack(call, mute);\n        self.muteVideoTrack(call, mute);\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // initNativeMedia\n    self.initMedia = function(onSuccess, onFailure, options) {\n        self.setInitialized(true);\n        _decorator(self.getRtcLibrary());\n\n        function setMediaSources() {\n            self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n                self.setMediaSources(mediaSourceInfo);\n            });\n        }\n\n        self.getRtcLibrary().initScreenSharing(function() {\n            // Regardless of success or error, set the media sources.\n            setMediaSources();\n\n            _utils.callFunctionIfExist(onSuccess);\n        }, function(error) {\n            // Regardless of success or error, set the media sources.\n            setMediaSources();\n\n            _utils.callFunctionIfExist(onFailure, error);\n        }, options);\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * performNativeVideoStartWorkaround - term side cannot see orig's video\n     */\n    self.performVideoStartWorkaround = function(operation, call, onSuccess, onFail) {\n        var peer = call.peer, remoteAudioState, remoteVideoState, localSdp;\n\n        //disable the workaround by default, as it is not necessairy in Chrome above version 62\n        // It is requiried in Electron 2.x\n        if(!_config.performVideoStartWorkaround){\n            onSuccess();\n            return;\n        }\n\n        if (!_sdpParser.isSdpHasVideo(call.sdp)) {\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        logger.debug('Workaround to play video');\n\n        localSdp = call.stableLocalSdp ? call.stableLocalSdp : call.peer.localDescription.sdp;\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n\n        remoteAudioState = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        call.sdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        call.sdp = _sdpParser.updateVideoSdpDirectionToInactive(call.sdp);\n\n        //TODO: not sure if needed since we don't do pvwa anymore\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n            function pvswFirstSetRemoteDescriptionSuccessCallback() {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription success');\n\n                // restore original values\n                call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, remoteAudioState);\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, remoteVideoState);\n\n                logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + call.sdp);\n                self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n                    function pvswSecondSetRemoteDescriptionSuccessCallback() {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription success');\n                        peer.createAnswer(\n                            function pvswCreateAnswerSuccessCallback(obj) {\n                                if (remoteAudioState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                                }\n\n                                if (remoteVideoState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                                } else if (self.canOriginatorSendLocalVideo(call)) {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                                } else {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                                }\n\n                                obj.sdp = _sdpParser.checkAndRestoreICEParams(obj.sdp, call.sdp);\n\n                                //Set role to what we should be\n                                obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n\n                                obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n                                obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n\n                                obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                                logger.trace('performVideoStartWorkaround: Setting local description with (answer) SDP: ' + obj.sdp);\n                                peer.setLocalDescription(\n                                    self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, obj.sdp),\n                                    function pvswSetLocalDescriptionSuccessCallback() {\n                                        logger.debug('performVideoStartWorkaround: setlocalDescription success');\n                                        _utils.callFunctionIfExist(onSuccess);\n                                    },\n                                    function pvswSetLocalDescriptionFailureCallback(e) {\n                                        logger.debug('performVideoStartWorkaround: setlocalDescription failed!!' + e);\n                                        _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: setlocalDescription failed!!');\n                                    }\n                                );\n                            },\n                            function pvswCreateAnswerFailureCallback(e) {\n                                logger.debug('performVideoStartWorkaround: createAnswer failed!! ' + e);\n                                _utils.callFunctionIfExist(onFail, 'Session cannot be created');\n                            }\n                        );\n                    },\n                    function pvswSecondSetRemoteDescriptionFailureCallback(e) {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription failed!!' + e);\n                        _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: second setRemoteDescription failed!!');\n                    }\n                );\n            },\n            function pvswFirstSetRemoteDescriptionFailureCallback(e) {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: first setRemoteDescription failed!!');\n            }\n        );\n    };\n\n    self.createAudioContext = function() {\n        window.AudioContext = window.AudioContext || window.webkitAudioContext ||\n            window.mozAudioContext || window.oAudioContext || window.msAudioContext;\n        /*\n         * Issues surrounding AudioContext usage/sharing: KAA-434 and KAA-2646\n         */\n        try {\n            var context = new window.AudioContext();\n            return context;\n        } catch (e) {\n            logger.error('Failed to create AudioContext:' + e);\n            return;\n        }\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getUserMedia = function(params) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            var mediaInfo, mediaStreamSource, mediaStreamDestination, constraints = {\n                    audio: false,\n                    video: false\n                },\n                localMedia;\n            self.setMediaSources(mediaSourceInfo);\n\n            if (mediaSourceInfo) {\n                if (!mediaSourceInfo.audioSourceAvailable) {\n                    logger.debug('No Audio Source available.');\n                    _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_FOUND);\n                    return;\n                }\n            }\n\n            var audioContext = self.createAudioContext();\n            if(!audioContext) {\n                _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_INITIALIZED);\n                return;\n            }\n\n            if (self.getVideoSourceAvailable()) {\n                constraints.video = params.options.videoConstraints;\n            }\n            if (self.getAudioSourceAvailable()) {\n                constraints.audio = params.options.audioConstraints;\n            }\n\n            logger.debug('getUserMedia - constraints: ', constraints);\n            self.getRtcLibrary().getUserMedia(constraints, function getUserMediaSuccessCallback(stream) {\n                var audioGain;\n                mediaStreamDestination = audioContext.createMediaStreamDestination();\n                if (stream.getAudioTracks() && stream.getAudioTracks()[zero]) {\n                    mediaStreamSource = audioContext.createMediaStreamSource(stream);\n                    audioGain = audioContext.createGain();\n                    mediaStreamSource.connect(audioGain);\n                    audioGain.connect(mediaStreamDestination);\n                }\n\n                if (stream.getVideoTracks() && stream.getVideoTracks()[zero]) {\n                    mediaStreamDestination.stream.addTrack(stream.getVideoTracks()[zero]);\n                }\n\n                localMedia = {\n                    audioContext: audioContext,\n                    audioGain: audioGain,\n                    mediaStreamDestination: mediaStreamDestination,\n                    stream: mediaStreamDestination.stream,\n                    mediaStreamSource: mediaStreamSource,\n                    mergedSources: {},\n                    originalStream: stream\n                };\n                self.setLocalMedia(localMedia);\n                self.getLocalStreamMap().add(localMedia.stream.id, localMedia);\n                self.setInitialized(true);\n\n                mediaInfo = {\n                    audio: constraints.audio,\n                    video: constraints.video,\n                    id: localMedia.stream.id,\n                    originalStream: stream\n                };\n\n                logger.debug('User has granted access to local media: ', localMedia);\n                _utils.callFunctionIfExist(params.onSuccess, mediaInfo);\n            }, function getUserMediaFailureCallback(error) {\n                logger.error('Failed to get access to local media. Error: ', error);\n                _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_ALLOWED);\n            });\n        });\n    };\n\n    self.replaceVideoStream = function(targetStream, sourceStream) {\n        if (targetStream && typeof targetStream.getVideoTracks === 'function') {\n            var targetVideoTracks = targetStream.getVideoTracks();\n            for (var i = 0; i < targetVideoTracks.length; ++i) {\n                targetStream.removeTrack(targetVideoTracks[i]);\n            }\n\n            if (sourceStream && typeof sourceStream.getVideoTracks === 'function') {\n                var sourceVideoTracks = sourceStream.getVideoTracks();\n                if (sourceVideoTracks && sourceVideoTracks.length) {\n                    targetStream.addTrack(sourceVideoTracks[zero]);\n                }\n            }\n        }\n\n        return {\n            id: targetStream.id\n        };\n    };\n\n    self.mergeAudioStream = function(call1, call2){\n        var remoteStream1, remoteStream2, source1, source2;\n\n        logger.info('Merging Audio Streams for Calls: ' + call1.id + ' and :' + call2.id);\n\n        remoteStream1 = call1.peer.getRemoteStreams()[0];\n        remoteStream2 = call2.peer.getRemoteStreams()[0];\n\n        if (typeof remoteStream1 === 'undefined' || typeof remoteStream2 === 'undefined') {\n            logger.debug('Failed to get access to audio media.');\n            throw errors.MEDIA_NOT_FOUND;\n        }\n\n        source1 = call2.localMedia.audioContext.createMediaStreamSource(remoteStream1);\n        source2 = call1.localMedia.audioContext.createMediaStreamSource(remoteStream2);\n\n        source1.connect(call2.localMedia.mediaStreamDestination);\n        source2.connect(call1.localMedia.mediaStreamDestination);\n\n        call1.localMedia.mergedSources[call2.id] = source2;\n        call2.localMedia.mergedSources[call1.id] = source1;\n    };\n\n    self.unMergeAudioStream = function(call1, call2){\n        var source1, source2;\n\n        logger.info('unMerging Audio Streams for Calls: ' + call1.id + ' and :' + call2.id);\n\n        source2 = call1.localMedia.mergedSources[call2.id];\n        if (source2) {\n            source2.disconnect();\n        }\n        delete call1.localMedia.mergedSources[call2.id];\n\n        source1 = call2.localMedia.mergedSources[call1.id];\n        if (source1) {\n            source1.disconnect();\n        }\n        delete call2.localMedia.mergedSources[call1.id];\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.startScreenMedia = function(onSuccess, onFailure, onEnded) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            var video_constraints;\n            self.setMediaSources(mediaSourceInfo);\n            if (self.getScreenSourceAvailable()) {\n                video_constraints = {\n                    mandatory: {\n                        'maxFrameRate': self.getScreenFrameRate(),\n                        'maxWidth': self.getScreenWidth(),\n                        'maxHeight': self.getScreenHeight()\n                    },\n                    mediaSource: 'screen'\n                };\n\n                self.getRtcLibrary().getUserMedia({\n                    video: video_constraints,\n                    audio: false\n                }, function(stream) {\n                    //TODO: This seems wrong since we are modifying the last stream and not the stream from the call, we should use call.localMedia.stream\n                    var mediaInfo = self.replaceVideoStream(self.getLocalMedia().stream, stream),\n                        oldStream = self.getScreenStream();\n\n                    // If there is an old screen stream, just stop it but prevent the stop from happening\n                    if (oldStream) {\n                        oldStream.getVideoTracks()[0].onended = null;\n                        self.getRtcLibrary().stopStream(oldStream);\n                    }\n\n                    stream.getVideoTracks()[0].onended = onEnded;\n                    self.setScreenStream(stream);\n\n                    logger.debug('User granted access to screen media.');\n                    _utils.callFunctionIfExist(onSuccess, mediaInfo);\n\n                }, function() {\n                    logger.debug('Failed to get access to screen media.');\n                    _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_ALLOWED);\n                }, onEnded);\n            } else {\n                _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_FOUND);\n            }\n        });\n    };\n\n    self.stopScreenMedia = function() {\n        var screenStream = self.getScreenStream();\n\n        //TODO: This seems wrong since we are modifying the last stream and not the stream from the call, we should use call.localMedia.stream and call.localMedia.originalStream\n        self.replaceVideoStream(self.getLocalMedia().stream, self.getLocalMedia().originalStream);\n\n        if (screenStream) {\n            self.getRtcLibrary().stopStream(screenStream);\n            self.setScreenStream(null);\n        }\n    };\n\n    self.createDataChannelOffer = function(call, successCallback, failureCallback) {\n        logger.debug('createDataChannelOffer: state= ' + call.peer.signalingState);\n        var peer = call.peer, localDesc;\n\n        peer.createOffer(function (oSdp) {\n            oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.DATA_CHANNEL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp);\n\n            logger.trace('createDataChannelOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n            peer.setLocalDescription(localDesc, function () {\n                //Due to stun requests, successCallback will be called by onIceCandidate()\n            }, function (error) {\n                logger.error('createDataChannelOffer: setLocalDescription failed : ' + error);\n                _utils.callFunctionIfExist(failureCallback, 'createDataChannelOffer: setLocalDescription failed');\n            });\n        }, function (e) {\n            logger.error('createDataChannelOffer: createOffer failed!! ' + e);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    self.createDataChannelAnswer = function (call, successCallback, failureCallback) {\n        logger.debug('createDataChannelAnswer: state= ' + call.peer.signalingState);\n        var peer = call.peer, remoteDesc, localDesc;\n\n        call.sdp = _sdpPipeline(call.id, call.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.DATA_CHANNEL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_REMOTE, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n        remoteDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp);\n        peer.setRemoteDescription(remoteDesc, function () {\n            peer.createAnswer(function (oSdp) {\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.DATA_CHANNEL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                localDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, oSdp.sdp);\n\n                logger.trace('createDataChannelAnswer: Setting local description with (answer) SDP: ' + oSdp.sdp);\n                peer.setLocalDescription(localDesc, function () {\n                    //Due to stun requests, successCallback will be called by onIceCandidate()\n                }, function (e) {\n                    logger.error('createDataChannelAnswer: setLocalDescription failed : ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'createDataChannelAnswer setLocalDescription failed');\n                });\n            }, function (e) {\n                logger.error('createDataChannelAnswer: failed!! Error: ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function (e) {\n            logger.error('createDataChannelAnswer: setRemoteDescription failed!! Error: ' + e);\n        });\n    };\n\n    self.processDataChannelAnswer = function (call, successCallback, failureCallback) {\n        logger.debug('processDataChannelAnswer: state= ' + call.peer.signalingState);\n        var peer = call.peer, remoteDesc;\n\n        call.sdp = _sdpPipeline(call.id, call.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.DATA_CHANNEL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_REMOTE, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n        remoteDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp);\n\n        peer.setRemoteDescription(remoteDesc, function () {\n            logger.debug('processDataChannelAnswer: setRemoteDescription success');\n            _utils.callFunctionIfExist(successCallback);\n        }, function (e) {\n            logger.error('processDataChannelAnswer: setRemoteDescription failed: ' + e);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    // createNativeOffer, Native implementation lies on webRtcAdaptor.js\n    self.createOffer = function(call, successCallback, failureCallback, sendInitialVideo, offerToReceiveVideo, isAnswer) {\n        logger.debug('createOffer: sendInitialVideo= ' + sendInitialVideo + ' offerToReceiveVideo= ' + offerToReceiveVideo + ' state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n        if(call.localMedia && call.localMedia.stream){\n            call.peer.addStream(call.localMedia.stream);\n        }\n\n        peer.createOffer(\n            function createOfferSuccessCallback(oSdp) {\n\n                sendInitialVideo = sendInitialVideo && self.getVideoSourceAvailable();\n                if (sendInitialVideo) {\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else {\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n\n                oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n\n                oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n\n                oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n\n                oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n                oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n                oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                // If it was specified that this SDP operation is a call answer operation, then\n                //      provide that to the SDP pipeline. This occurs during slow start scenarios,\n                //      but createOffer is most often a call start operation.\n                var operation = (isAnswer ? CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL : CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL);\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                logger.trace('createOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n                peer.setLocalDescription(\n                    self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp),\n                    function createOfferSetLocalDescriptionSuccessCallback() {\n                        if (_config.trickleIceSupport === CONSTANTS.TRICKLE.FULL) {\n                            _utils.callFunctionIfExist(successCallback, oSdp.sdp);\n                        }\n                        // ELSE due to stun requests, successCallback will be called by onIceCandidate()\n                    },\n                    function createOfferSetLocalDescriptionFailureCallback(error) {\n                        logger.error('createOffer: setLocalDescription failed : ' + error);\n                        _utils.callFunctionIfExist(failureCallback, 'createOffer: setLocalDescription failed');\n                    });\n            },\n            function createOfferFailureCallback(e) {\n                logger.error('createOffer: createOffer failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            }, { offerToReceiveVideo: offerToReceiveVideo ? 1 : 0 });\n    };\n\n    /*\n     *  Native implementation lies on webRtcAdaptor.js\n     *  createNativeAnswer to be used when native webrtc is enabled.\n     *  @param {type} call\n     *  @param {type} successCallback\n     *  @param {type} failureCallback\n     *  @param {type} isVideoEnabled\n     */\n    self.createAnswer = function(call, successCallback, failureCallback, isVideoEnabled) {\n        logger.debug('createAnswer: isVideoEnabled = ' + isVideoEnabled + ', state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        if(call.localMedia && call.localMedia.stream){\n            call.peer.addStream(call.localMedia.stream);\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.deleteFingerprintOrCrypto(call.sdp, self.isDtlsEnabled());\n\n        logger.trace('createAnswer: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n            function createAnswerSetRemoteDescriptionSuccessCallback() {\n                call.remoteVideoState = _sdpParser.getSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO);\n\n                peer.createAnswer(\n                    function(oSdp) {\n                        isVideoEnabled = isVideoEnabled && self.getVideoSourceAvailable() && _sdpParser.isSdpHasVideo(call.sdp);\n                        oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n                        if (isVideoEnabled) {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                if (_sdpParser.getVideoSdpDirection(call.sdp) !== CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                                } else {\n                                    oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                                }\n                            }\n                        } else {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            } else {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n\n                        self.muteOnHold(call, false);\n\n                        // createAnswer generates an sdp without ice params\n                        // copy ice params to the local sdp\n                        // scenario: incoming video call from pcc in brokeronly config\n                        oSdp.sdp = _sdpParser.checkAndRestoreICEParams(oSdp.sdp, call.sdp);\n\n                        oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                        oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                        logger.trace('createAnswer: Setting local description with (answer) SDP: ' + oSdp.sdp);\n                        peer.setLocalDescription(\n                            self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, oSdp.sdp),\n                            function createAnswerSetLocalDescriptionSuccessCallback() {\n                                if (_config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE && call.supportTrickle) {\n                                    _utils.callFunctionIfExist(successCallback, oSdp.sdp);\n                                }\n                                // ELSE due to stun requests, successCallback will be called by onIceCandidate()\n                            },\n                            function createAnswerSetLocalDescriptionFailureCallback(e) {\n                                logger.error('createAnswer: setLocalDescription failed : ' + e);\n                                _utils.callFunctionIfExist(failureCallback, 'createNativeAnswer setLocalDescription failed');\n                            });\n                    },\n                    function createAnswerFailureCallback(e) {\n                        logger.error('createAnswer: failed!! Error: ' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                    });\n            },\n            function createAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('createAnswer: setremotedescription failed!! Error: ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'createAnswer setRemoteDescription failed');\n            });\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * createNativeUpdate to be used when the video start or stop\n     */\n    self.createUpdate = function(call, successCallback, failureCallback, isVideoStart) {\n        logger.debug('createUpdate: isVideoStart= ' + isVideoStart + ' state= ' + call.peer.signalingState);\n        var peer, localDesc, localSdp = call.stableLocalSdp;\n\n        if(self.needNewPeer(call, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        self.getRtcLibrary().updateStream(peer, call);\n\n        peer.createOffer(function createUpdateCreateOfferSuccessCallback(obj) {\n            isVideoStart = isVideoStart && self.getVideoSourceAvailable();\n\n            if (isVideoStart) {\n                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                if (_sdpParser.isVideoSdpDirectionInactive(call.stableRemoteSdp)) {\n                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                } else {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n            }\n            obj.sdp = self.updateCodecs(call, obj.sdp);\n            obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n            obj.sdp = _sdpParser.removeG722Codec(obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoFromSdp(obj.sdp, self.isDtlsEnabled());\n            obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n            obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n            obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n            var createUpdateCreateOfferSetLocalDescriptionSuccessCallback = function() {\n                logger.debug('createUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                // The above process un-mutes the client. We must ensure it continues to be muted if necessary.\n                if(call.audioMuted){\n                    logger.debug('video started while muted, re-mute the microphone');\n                    self.muteAudioTrack(call, true, false);\n                }\n\n                if (call.supportTrickle) {\n                    logger.debug('Call supports Trickle ice not waiting for candidates');\n                    _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                } else if (peer.iceGatheringState === 'complete') {\n                    if (call.successCallback) {\n                        logger.debug('createUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                }\n            };\n\n            logger.trace('createUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n            peer.setLocalDescription(localDesc, function (){\n                // This is a workaround to prevent an issue with ordering of events in Chrome\n                // We add a delay so that the iceGatheringState reflects the real state.\n                // https://bugs.chromium.org/p/webrtc/issues/detail?id=1873\n                setTimeout(createUpdateCreateOfferSetLocalDescriptionSuccessCallback, 10);\n            }, function crateUpdateCreateOfferSetLocalDescriptionFailureCallback(e) {\n                logger.debug('createUpdate: createOffer setLocalDescription failed: ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n        }, function createUpdateCrateOfferFailureCallback(e) {\n            logger.debug('createUpdate: createOffer failed!!: ' + e);\n            failureCallback();\n        });\n    };\n\n    /*\n     * Reverts RTC engine's state\n     */\n    self.revertRtcState = function(call, successCallback, failureCallback) {\n        var peer = call.peer,\n            obj, localSdp = call.stableLocalSdp,\n            remoteSdp = call.stableRemoteSdp,\n            rtcState = peer.signalingState;\n        remoteSdp = _sdpParser.deleteGoogleIceFromSdp(remoteSdp);\n        switch (rtcState) {\n        case CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE:\n        case CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.HAVE_LOCAL_OFFER:\n            //TODO what should we do here?\n            localSdp = _sdpParser.setTcpSetupAttribute(localSdp, 'actpass');\n            obj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, localSdp);\n            logger.trace('revertRtcState[stable|local_offer]: Setting local description with (offer) SDP: ' + localSdp);\n            peer.setLocalDescription(\n                obj,\n                function revertRtcStateLocalDescriptionSuccessCallback() {\n                    logger.debug('revertRtcState[stable|local_offer]: setLocalDescription success');\n                    //TODO what should we do here? that seems to be the only place where the remoteTcpSetupAttribute is used.\n                    // it seems would so use the stable remote sdp to lookup or the stable local\n                    //remoteSdp = _sdpParser.setTcpSetupAttribute(remoteSdp, call.remoteTcpSetupAttribute);\n\n                    logger.trace('revertRtcState[stable|local_offer]: Setting remote description with (answer) SDP: ' + remoteSdp);\n                    self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.REVERT_RTC_STATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, remoteSdp,\n                        function revertRtcStateRemoteDescriptionSuccessCallback() {\n                            logger.debug('revertRtcState[stable|local_offer]: setRemoteDescription success');\n                            if (peer.iceGatheringState === 'complete') {\n                                _utils.callFunctionIfExist(successCallback);\n                            }\n                        },\n                        function revertRtcStateRemoteDescriptionFailureCallback(error) {\n                            logger.error('revertRtcState[stable|local_offer]: setRemoteDescription failed: ' + error);\n                            _utils.callFunctionIfExist(failureCallback, call);\n                        });\n                },\n                function revertRtcStateLocalDescriptionFailureCallback(error) {\n                    logger.error('revertRtcState[stable|local_offer]: setLocalDescription failed: ' + error);\n                    _utils.callFunctionIfExist(failureCallback, call);\n                }\n            );\n            break;\n        case CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.HAVE_REMOTE_OFFER:\n            //TODO what should we do here?\n            remoteSdp = _sdpParser.setTcpSetupAttribute(remoteSdp, 'actpass');\n            logger.trace('revertRtcState[remote_offer]: Setting remote description with (offer) SDP: ' + remoteSdp);\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.REVERT_RTC_STATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, remoteSdp,\n                function revertRtcStateRemoteDescriptionSuccessCallback() {\n                    logger.debug('revertRtcState[remote_offer]: setRemoteDescription success');\n                    //TODO what should we do here?\n                    localSdp = _sdpParser.setTcpSetupAttribute(localSdp, call.dtlsRole);\n                    obj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, localSdp);\n                    logger.trace('revertRtcState[remote_offer]: Setting local description with (answer) SDP: ' + localSdp);\n                    peer.setLocalDescription(\n                        obj,\n                        function revertRtcStateLocalDescriptionSuccessCallback() {\n                            logger.debug('revertRtcState[remote_offer]: setLocalDescription success');\n                            if (peer.iceGatheringState === 'complete') {\n                                _utils.callFunctionIfExist(successCallback);\n                            }\n                        },\n                        function revertRtcStateLocalDescriptionFailureCallback(error) {\n                            logger.error('revertRtcState[remote_offer]: setRemoteDescription failed: ' + error);\n                            _utils.callFunctionIfExist(failureCallback, call);\n                        }\n                    );\n                },\n                function revertRtcStateRemoteDescriptionFailureCallback(error) {\n                    logger.error('revertRtcState[remote_offer]: setLocalDescription failed: ' + error);\n                    _utils.callFunctionIfExist(failureCallback, call);\n                });\n            break;\n        default:\n            logger.debug('revertRtcState: not applicible for state: ' + rtcState);\n        }\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * createNativeHoldUpdate to be used when native webrtc is enabled\n     */\n    self.createHoldUpdate = function(call, hold, remote_hold_status, successCallback, failureCallback) {\n        logger.debug('createHoldUpdate: local hold= ' + hold + ' remote hold= ' + remote_hold_status + ' state= ' + call.peer.signalingState);\n        var peer, localDescObj, localSdp;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        localSdp = call.stableLocalSdp;\n\n        if(self.needNewPeer(call, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        peer.createOffer(function createHoldUpdateCreateOfferSuccessCallback(obj) {\n            if (hold) {\n                if (!remote_hold_status) {\n                    obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    if(_config.videoInactiveOnHold){\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                    } else {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    }\n                } else {\n                    obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                }\n            } else if (remote_hold_status) {\n                obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                if (self.canOriginatorSendLocalVideo(call)) {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n            }\n            obj.sdp = self.updateCodecs(call, obj.sdp);\n            obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n            obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n\n            //ABE-11044 workaround. Remove after Chrome 51 release.\n            obj.sdp = _sdpParser.checkandReplaceAPTValue(obj.sdp);\n            obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n            obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n            var createHoldUpdateSetLocalDescriptionSuccessCallback = function() {\n                logger.debug('createHoldUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                if (call.supportTrickle) {\n                    _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                } else if (peer.iceGatheringState === 'complete') {\n                    if (call.successCallback) {\n                        logger.debug('createHoldUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                }\n            };\n\n            logger.trace('createHoldUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n            peer.setLocalDescription(localDescObj, function (){\n                setTimeout(createHoldUpdateSetLocalDescriptionSuccessCallback, 10);\n            }, function createHoldUpdateSetLocalDescriptionFailureCallback(error) {\n                logger.error('createHoldUpdate: setLocalDescription failed: ' + error.message);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n        }, function createHoldUpdateCreateOfferFailureCallback(error) {\n            logger.error('createHoldUpdate: createOffer failed: ' + error.message);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // processNativeHold\n    self.processHold = function(call, hold, local_hold_status, successCallback, failureCallback) {\n        logger.debug('processHold: local hold= ' + local_hold_status + ' remote hold= ' + hold + ' state= ' + call.peer.signalingState);\n        var peer,\n            audioDirection, videoDirection,\n            peerLocalSdp, inactiveRemoteSdp, remoteSdp;\n        peerLocalSdp = call.stableLocalSdp;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        audioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        videoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (!local_hold_status && !hold) {\n            self.muteOnHold(call, false);\n        }\n\n        //we need to do something in this case because the remove might offer active or passive but chrome does not allow that\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        // This is required for PCC and meetme with video.\n        // PCC and meetme(Media Server) not supperted VP8/VP9 codec.\n        // so video calls can not be established\n        // local video should be set to false\n        if (!(_sdpParser.isVideoCodecsSupported(call.sdp, self.isH264Enabled())) && !(_sdpParser.isSdpHasVP8Codec(call.sdp)) && (call.sdp.indexOf(CONSTANTS.SDP.M_LINE + CONSTANTS.STRING.VIDEO + ' 0 ', 0) === -1)) {\n            self.setOriginatorSendLocalVideo(call, call.sdp, false);\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n\n        // chrome38 fix\n        inactiveRemoteSdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        inactiveRemoteSdp = _sdpParser.updateVideoSdpDirectionToInactive(inactiveRemoteSdp);\n\n        if(self.needNewPeer(call, true, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        if (_sdpParser.isSdpHasVideo(call.prevRemoteSdp) && (!_sdpParser.isSdpHasVideo(call.sdp))) {\n            self.setOriginatorSendLocalVideo(call, call.sdp, false);\n        }\n\n        // 1st setRemoteDescription to make webrtc remove the audio and/or video streams\n        // 2nd setRemote will add the audio stream back so that services like MOH can work\n        // This code will also run in UnHold scenario, and it will remove & add video stream\n        logger.trace('processHold: Setting remote description with (offer) SDP: ' + inactiveRemoteSdp);\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, inactiveRemoteSdp, function processHoldSetFirstRemoteDescriptionSuccessCallback() {\n            remoteSdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n\n            logger.trace('processHold: Setting remote description with (offer) SDP: ' + remoteSdp);\n            self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, remoteSdp, function processHoldSetSecondRemoteDescriptionSuccessCallback() {\n                if (!hold && !local_hold_status && (videoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE)) {\n                    call.remoteVideoState = CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n                } else {\n                    call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                }\n                peer.createAnswer(function processHoldCreateAnswerSuccessCallback(obj) {\n\n                    logger.debug('processHold: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp) + ' video= '+ _sdpParser.isVideoSdpEnabled(obj.sdp));\n\n                    if (hold) {\n                        logger.debug('processHold: Remote HOLD');\n                        obj.sdp = _sdpParser.respondToRemoteSdpDirections(obj.sdp, call.sdp);\n                    } else if (!local_hold_status) {\n                        logger.debug('processHold: Remote UNHOLD: direction left as it is');\n\n                        if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                            if (self.canOriginatorSendLocalVideo(call)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            }\n                        } else {\n                            if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n                        //change audio's direction to sendrecv for ssl attendees in a 3wc\n                        obj.sdp = _sdpParser.changeDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n                    } else if (local_hold_status && !hold) {\n                        logger.debug('processHold: Remote UNHOLD on local hold');\n\n                        if (audioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                            obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                        } else {\n                            obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        }\n\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                        }\n                    }\n\n                    obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n                    obj.sdp = _sdpParser.updateVersion(peerLocalSdp, obj.sdp);\n                    obj.sdp = _sdpParser.checkIceParamsLengths(obj.sdp, call.sdp);\n                    obj.sdp = _sdpParser.checkAndRestoreICEParams(obj.sdp, call.sdp);\n                    if (_sdpParser.isSdpHasVideoWithZeroPort(obj.sdp) && self.getDefaultVideoContainer()) {\n                        self.useDefaultRenderer(false, false, false);\n                    }\n\n                    //This one is important because the remote party might have offered pasive or active, but we had set it to actpass so that chrome works.\n                    obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n                    obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                    logger.trace('processHold: Setting local description with SDP: ' + obj.sdp);\n\n                    obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n                    peer.setLocalDescription(obj, function processHoldSetLocalDescriptionSuccessCallback() {\n                        logger.debug('processHold: setLocalDescription success!! ' + 'iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                        if (call.supportTrickle) {\n                            _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                        } else if (peer.iceGatheringState === 'complete') {\n                            if (call.successCallback) {\n                                logger.debug('processHold iceGatheringState completed ' + peer.localDescription.sdp);\n                                _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                            }\n                        }\n                    }, function processHoldSetLocalDescriptionFailureCallback(e) {\n                        logger.error('processHold: setLocalDescription failed!! ' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                    });\n                }, function processHoldCreateAnswerFailureCallback(e) {\n                    logger.error('processHold: createAnswer failed!!: ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processHoldSetSecondRemoteDescriptionFailureCallback(e) {\n                logger.error('processHold: second setRemoteDescription failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function processHoldSetFirstRemoteDescriptionFailureCallback(e) {\n            logger.debug('processHold: first setRemoteDescription failed!! ' + e);\n            _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n        });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // processNativeUpdate\n    self.processUpdate = function (call, successCallback, failureCallback) {\n        logger.debug('processUpdate: state= ' + call.peer.signalingState);\n        var peer,\n            remoteAudioState, remoteVideoState, remoteVideoDirection,\n            localDescObj, peerLocalSdp;\n        peerLocalSdp = call.stableLocalSdp;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        // Meetme workaround\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE &&\n                call.currentState === 'COMPLETED') {\n            switch (call.remoteVideoState) {\n            case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n            case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                break;\n            case CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                break;\n            }\n        }\n\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        //this part is a work-around for webrtc bug\n        //set remote description with inactive media lines first.\n        //then set remote description with original media lines.\n\n        //keep original values of remote audio and video states\n        remoteAudioState = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n\n        if(self.needNewPeer(call, true, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        //Since Chrome does not support offer with anything else than actpass, we need to set it.\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        //set media lines with inactive state for workaround\n        call.sdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        call.sdp = _sdpParser.updateVideoSdpDirectionToInactive(call.sdp);\n\n        logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + call.sdp);\n\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processUpdateWorkaroundSetRemoteDescriptionSuccessCallback() {\n            logger.debug('processUpdate: workaround setRemoteDescription success');\n\n            //restore original values\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, remoteAudioState);\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, remoteVideoState);\n            logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + call.sdp);\n\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processUpdateSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processUpdate: setRemoteDescription success');\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n                peer.createAnswer(function processUpdateCreateAnswerSuccessCallback(obj) {\n                    logger.debug('processUpdate: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp) + ' video= ' + _sdpParser.isVideoSdpEnabled(obj.sdp));\n\n                    if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                        }\n                    } else {\n                        if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                        }\n                    }\n                    obj.sdp = _sdpParser.updateVersion(peerLocalSdp, obj.sdp);\n                    obj.sdp = _sdpParser.checkIceParamsLengths(obj.sdp, call.sdp);\n\n                    //This is important because we changed the remote role to actpass for chrome.\n                    obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n                    obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n                    obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                    obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                    localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, obj.sdp);\n\n                    var processUpdateSetLocalDescriptionSuccessCallback = function() {\n                        logger.debug('processUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                        if (call.supportTrickle) {\n                            _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                        } else if (peer.iceGatheringState === 'complete') {\n                            if (call.successCallback) {\n                                logger.debug('processUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                                _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                            }\n                        }\n                    };\n\n                    logger.trace('processUpdate: Setting local description with (answer) SDP: ' + obj.sdp);\n                    peer.setLocalDescription(localDescObj, function () {\n                        // This is a workaround to prevent an issue with ordering of events in Chrome\n                        // We add a delay so that the iceGatheringState reflects the real state.\n                        // https://bugs.chromium.org/p/webrtc/issues/detail?id=1873\n                        setTimeout(processUpdateSetLocalDescriptionSuccessCallback, 10);\n                    }, function processUpdateSetLocalDescriptionSuccessCallback(e) {\n                        logger.debug('processUpdate: setlocalDescription failed!!' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'processUpdate: setlocalDescription failed!!');\n                    });\n                }, function processUpdateCreateAnswerFailureCallback(e) {\n                    logger.debug('processUpdate: createAnswer failed!! ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processUpdateSetRemoteDescriptionSuccessCallback(e) {\n                logger.debug('processUpdate: setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(failureCallback, 'processUpdate: setRemoteDescription failed!!');\n            });\n        }, function processUpdateWorkaroundSetRemoteDescriptionSuccessCallback(e) {\n            logger.debug('processUpdate: workaround setRemoteDescription failed!!' + e);\n            _utils.callFunctionIfExist(failureCallback, 'processUpdate: workaround setRemoteDescription failed!!');\n        });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // processNativeAnswer\n    self.processAnswer = function(call, onSuccess, onFail, isAnswer) {\n        logger.debug('processAnswer: state= ' + call.peer.signalingState);\n        var onSuccessAfterWorkarounds, setRemoteDescription,\n            remoteVideoDirection, localVideoDirection,\n            peer = call.peer,\n            origSdp;\n\n        // If it was specified that this SDP operation is a call answer operation, then\n        //      provide that to the SDP pipeline. This occurs during slow start scenarios,\n        //      but processAnswer is most often a call start operation.\n        var callOperation = ( isAnswer ? CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL : CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL );\n\n        onSuccessAfterWorkarounds = function() {\n            call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        setRemoteDescription = function(operation, call, onSuccess, onFailure) {\n            logger.trace('processAnswer: Setting remote description with (answer) SDP: ' + call.sdp);\n            self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function() {\n                    logger.debug('processAnswer: setRemoteDescription success');\n                    onSuccess();\n                },\n                function(e) {\n                    logger.error('processAnswer: setRemoteDescription failed: ' + e);\n                    onFailure();\n                });\n        };\n\n        call.sdp = _sdpParser.updateH264LevelTo42E01F(call.sdp, self.isH264Enabled());\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, peer.localDescription.sdp, self.isH264Enabled());\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n\n        if (peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.HAVE_REMOTE_PRANSWER) {\n\n            if (_sdpParser.isIceLite(call.prevRemoteSdp) !== _sdpParser.isIceLite(call.sdp)) {\n                logger.debug('ice - ice-lite change.');\n                onFail(CONSTANTS.WEBRTC.ERROR.ICE_ICELITE);\n                return;\n            }\n\n            origSdp = call.sdp;\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            logger.debug('call processPrAnswer again to trigger on remote stream added with updated sdp.');\n\n\n            self.processPreAnswer(call,\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer success callback. Restore original sdp.');\n                    setRemoteDescription(callOperation, call, onSuccessAfterWorkarounds, onFail);\n                },\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer failure callback. Restore original sdp.');\n                    setRemoteDescription(callOperation, call, onSuccessAfterWorkarounds, onFail);\n                }\n            );\n            return;\n        }\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n        localVideoDirection = _sdpParser.getVideoSdpDirection(call.peer.localDescription.sdp);\n\n        // this is needed for buggy webrtc api. when term answers with video to audio only call\n        // this scenario does not work without converting to sendrecv\n        logger.debug('processAnswer: ice-lite: do remote video escalation');\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        if ((localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY || localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY)) {\n\n            // Audio <--> Audio : apply workaround step 1\n\n            setRemoteDescription(callOperation, call, onSuccessAfterWorkarounds, onFail);\n        } else if (localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE)) {\n\n            // Audio  <--> Audio-Video\n            setRemoteDescription(null, call, function() {\n                self.performVideoStartWorkaround(callOperation, call, onSuccessAfterWorkarounds, onFail);\n            }, onFail);\n        } else {\n            // Audio <--> Audio\n            // Or\n            // Audio-Video <--> Audio-Video\n            // there is remote video, no need for orig side workaround\n\n            setRemoteDescription(callOperation, call, onSuccessAfterWorkarounds, onFail);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // processNativePreAnswer\n    self.processPreAnswer = function(call, onSuccess, onFailure) {\n        logger.debug('processPreAnswer: state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.peer.localDescription.sdp, self.isH264Enabled());\n\n        logger.trace('processPreAnswer: Setting remote description with (pranswer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.PRANSWER, call.sdp,\n            function processPreAnswerSetRemoteDescriptionSuccessCallback() {\n                self.setOriginatorReceiveRemoteVideo(call);\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                onSuccess();\n                logger.debug('processPreAnswer: setRemoteDescription success');\n            },\n            function processPreAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('processPreAnswer: setRemoteDescription failed: ' + e);\n                onFailure(e);\n            });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    // processNativeRespond\n    self.processRespond = function(call, onSuccess, onFail, isJoin) {\n        var remoteVideoDirection,\n            peer = call.peer,\n            remoteSdpHasVideo = false;\n\n        logger.debug('processRespond: state= ' + call.peer.signalingState);\n\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        remoteSdpHasVideo = _sdpParser.isSdpHasVideo(call.sdp);\n\n        if (remoteSdpHasVideo) {\n            call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n            remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n            if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n                switch (call.remoteVideoState) {\n                case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n                case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                    call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                    break;\n                }\n            }\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n        }\n\n        if (isJoin) {\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n            self.muteOnHold(call, false);\n        }\n\n        logger.trace('processRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.RESPOND, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp, function() {\n            logger.debug('processRespond: setRemoteDescription success');\n            var onSuccessAfterWorkarounds = function() {\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                _utils.callFunctionIfExist(onSuccess);\n            };\n            self.performVideoStartWorkaround(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n        }, function(e) {\n            logger.debug('processRespond: setRemoteDescription failed: ' + e);\n            _utils.callFunctionIfExist(onFail);\n        });\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * processNativeHoldRespond\n     */\n    self.processHoldRespond = function(call, onSuccess, onFailure, isJoin) {\n        var remoteAudioDirection,\n            remoteVideoDirection,\n            onSuccessAfterWorkaround,\n            localHoldFlag = false,\n            remoteHoldFlag = false;\n\n        onSuccessAfterWorkaround = function() {\n            //call.remoteVideoState = getSdpDirection(call.sdp, video);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        //TODO why not FF check here\n        if(self.needNewPeer(call, false)) {\n            self.createNewPeerForCall(call);\n        }\n\n        logger.debug('processHoldRespond: state= ' + call.peer.signalingState + ' call.currentState= ' + call.currentState);\n\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            logger.trace('processHoldRespond: onRemoteStreamAdded');\n            self.onRemoteStreamAdded(call);\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, call, null, null, call.sdp, onSuccess, onFailure);\n            return;\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n        _sdpParser.init(call.sdp);\n        remoteHoldFlag = _sdpParser.isRemoteHold();\n\n        localHoldFlag = (call.currentState === 'LOCAL_HOLD');\n\n        remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        call.remoteVideoState = remoteVideoDirection;\n\n        logger.debug('processHoldRespond: localHold= ' + localHoldFlag + ' remoteHold= ' + remoteHoldFlag);\n\n        /* Required for MOH - start */\n        if (remoteHoldFlag === false) {\n            if ((remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) && (call.currentState === 'REMOTE_HOLD')) {\n                logger.debug('set current web state to COMPLETED');\n                call.previousState = call.currentState;\n                call.currentState = 'COMPLETED';\n            }\n        } else {\n            if (call.currentState === 'COMPLETED') {\n                logger.debug('set current web state to REMOTE_HOLD');\n                call.previousState = call.currentState;\n                call.currentState = 'REMOTE_HOLD';\n            }\n        }\n\n        if (localHoldFlag || remoteHoldFlag) {\n            logger.debug('processHoldRespond: ' + call.currentState + ' : video -> inactive');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n        }\n\n        if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n            logger.debug('processHoldRespond: video inactive -> recvonly');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n        /* Required for MOH - end */\n\n        if (isJoin) {\n            self.muteOnHold(call, false);\n        }\n\n        // this is required for displaying remote video when direction is send only\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        if (localHoldFlag && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Audio');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        }\n\n        if (localHoldFlag && remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Video');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n        }\n\n        // If we have a configuration to force disable media on hold we tell chrome that the other side is inactive this will\n        // prevent chrome from sending noise even after being muted.\n        if (localHoldFlag && _config.forceDisableMediaOnHold && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            logger.debug('processHoldRespond: Changing remote direction from recvonly to inactive');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n            remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        }\n\n        if (remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            logger.trace('processHoldRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function processHoldRespondSetRemoteDescriptionSuccessCallback() {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns success');\n                    onSuccessAfterWorkaround();\n                },\n                function processHoldRespondSetRemoteDescriptionFailureCallback(e) {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns failed: ' + e);\n                    _utils.callFunctionIfExist(onFailure);\n                }\n            );\n        } else {\n            self.setRemoteDescription(null, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function processHoldRespondSetRemoteDescriptionSuccessCallback() {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns success');\n                    self.performVideoStartWorkaround(CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD, call, onSuccessAfterWorkaround, onFailure);\n                },\n                function processHoldRespondSetRemoteDescriptionFailureCallback(e) {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns failed: ' + e);\n                    _utils.callFunctionIfExist(onFailure);\n                }\n            );\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.processRemoteOfferOnLocalHold = function(call, successCallback, failureCallback) {\n        logger.info('processRemoteOfferOnLocalHold');\n        if (call.peer) {\n            _utils.callFunctionIfExist(successCallback, call.stableLocalSdp);\n        } else {\n            _utils.callFunctionIfExist(failureCallback, 'we dont have a peer object somehow');\n        }\n    };\n\n    self.removeJslIdFromContainer = function() {\n        if (self.getDefaultVideoContainer()) {\n            self.getDefaultVideoContainer().removeAttribute('jsl-id');\n            self.disposeStreamRenderer(self.getDefaultVideoContainer().lastElementChild);\n        } else if (self.getLocalVideoContainer()) {\n            self.getLocalVideoContainer().removeAttribute('jsl-id');\n            self.disposeStreamRenderer(self.getLocalVideoContainer());\n        }\n    };\n\n    self.clearLocalMediaProperties = function(localMedia) {\n        localMedia.stream = null;\n        localMedia.originalStream = null;\n        localMedia.audioContext = null;\n        localMedia.audioGain = null;\n        localMedia.mediaStreamDestination = null;\n    };\n\n    self.endLocalMedia = function(localMedia) {\n        if (localMedia && localMedia.stream && !localMedia.privateStream) {\n            logger.info('stopping local media ' + localMedia.stream.id);\n            self.getLocalStreamMap().remove(localMedia.stream.id);\n            self.getRtcLibrary().detachWebAudioContextFromLocalMedia(localMedia);\n            self.getRtcLibrary().stopLocalMedia(localMedia);\n            self.clearLocalMediaProperties(localMedia);\n        }\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * process the end call that was received\n     *\n     * @ignore\n     * @name rtc.processEnd.stop\n     */\n    self.processEnd = function(call) {\n        var id, localStreamEntries, streams;\n        self.clearIceCandidateCollectionTimer(call);\n        self.clearUpdateCandidateInterval(call);\n        self.clearWebrtcLogCollectionInterval(call);\n        if (call.peer) {\n            logger.info('close peer connection ' + call.id);\n\n            if (call.peer.getRemoteStreams) {\n                streams = call.peer.getRemoteStreams();\n                if (streams && streams[0]) {\n                    self.onRemoteStreamRemoved(call, { stream :streams[0] });\n                }\n            }\n\n            if (call.peer.signalingState !== 'closed') {\n                call.peer.close();\n            }\n            self.endLocalMedia(call.localMedia);\n\n            self.setPeerCount(self.getPeerCount() - 1);\n            if (self.getPeerCount() <= 0) {\n                self.removeJslIdFromContainer();\n\n                localStreamEntries = self.getLocalStreamMap().entries();\n                for (id in localStreamEntries) {\n                    if (localStreamEntries.hasOwnProperty(id)) {\n                        self.endLocalMedia(self.getLocalStreamMap().get(id));\n                    }\n                }\n            }\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onSessionConnecting = function() {\n        logger.debug('onSessionConnecting');\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onSessionOpened = function() {\n        logger.debug('onSessionOpened');\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onSignalingStateChange = function(call) {\n        //TODO may need to move the state changes for webrtc here\n        logger.debug('Signalling state changed: state= ' + call.peer.signalingState);\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.useDefaultRenderer = function(stream, local, isVideoTrackAvailable, muted = false) {\n        var videoContainer;\n\n        if (self.getDefaultVideoContainer() && self.getDefaultVideoContainer().children.length === 0) {\n            // Create divs for the remote and local\n            self.getDefaultVideoContainer().innerHTML = '<div style=\\'height:100%;width:100%\\'></div><div style=\\'position:absolute;bottom:10px;right:10px;height:30%; width:30%;\\'></div>';\n        }\n\n        if (local) {\n            videoContainer = self.getDefaultVideoContainer().lastElementChild;\n        } else {\n            videoContainer = self.getDefaultVideoContainer().firstElementChild;\n            videoContainer.style.width = '100%';\n        }\n        return self.createStreamRenderer(stream, videoContainer, {\n            audio: !local,\n            video: isVideoTrackAvailable,\n            split: true,\n            muted\n        });\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.createStreamRenderer = function(stream, container, { audio = true, video = true, split = false, muted = false } = {}) {\n\n        /**\n         * Sets the output speaker for audio from the HTMLElement to the default\n         *    speaker.\n         * The default speaker should have been set previously using the\n         *    `setDefaultDevices` API.\n         * The element must support `.setSinkId` to be able to change speaker.\n         * @method setSelectedSpeaker\n         * @param  {HTMLElement} element\n         */\n        function setSelectedSpeaker(element) {\n            var speakerId = self.getSelectedSpeakerId();\n            if (!speakerId) {\n                logger.debug('No default speaker set. Not changing sinkId.');\n                return;\n            }\n\n            if(typeof element.setSinkId !== 'undefined') {\n                element.setSinkId(speakerId)\n                    .then(function() {\n                        logger.debug('Default speaker set.', speakerId);\n                    })\n                    .catch(function(error) {\n                        logger.debug('Could not set default speaker. ' + speakerId, error);\n                    });\n            } else {\n                logger.debug('Renderer does not support changing speaker.');\n            }\n        }\n\n        var videoRenderer, renderer, safeStreamId;\n\n        if (!stream || !container) {\n            return;\n        }\n\n        safeStreamId = makeSafeForCSS(stream.id);\n\n        if (video) {\n            // Note: We don't care that the video is being re-used for some reason.\n            videoRenderer = container.querySelector('video');\n            if (!videoRenderer) {\n                videoRenderer = document.createElement('video');\n                container.appendChild(videoRenderer);\n            }\n\n            // Adjust the id of the video renderer with the new id.\n            videoRenderer.id = 'video-stream-id-' + safeStreamId;\n            videoRenderer.srcObject = stream;\n            videoRenderer.style.width = '100%';\n            videoRenderer.style.height = '100%';\n\n            videoRenderer.autoplay = 'true';\n            if (!audio || muted || split) {\n                videoRenderer.muted = 'true';\n            }\n            //This seems required on Android, as changing an existing video element does not trigger the autoplay\n            var playPromise = videoRenderer.play();\n            if(playPromise !== undefined) {\n                // `.play()` is async and returns a promise in some browsers.\n                playPromise.catch(function(error) {\n                    logger.debug('Autoplay video was prevented.', error);\n                });\n            }\n\n            // Always set the output speaker for all renderer elements. This\n            //    works-around certain scenarios where audio comes from the\n            //    wrong speaker after re-renders (eg. unhold, stop video).\n            // Reference: KAA-1824\n            setSelectedSpeaker(videoRenderer);\n        }\n\n        if (audio && split) {\n            if (safeStreamId) {\n                renderer = container.querySelector('#audio-stream-id-' + safeStreamId);\n                if (!renderer) {\n                    renderer = document.createElement('audio');\n                    renderer.id = 'audio-stream-id-' + safeStreamId;\n                    container.appendChild(renderer);\n                }\n            }\n            if (muted) {\n                renderer.muted = 'true';\n            }\n            renderer.autoplay = 'true';\n            renderer.srcObject = stream;\n\n            // Always set the output speaker for all renderer elements. This\n            //    works-around certain scenarios where audio comes from the\n            //    wrong speaker after re-renders (eg. unhold, stop video).\n            // Reference: KAA-1824\n            setSelectedSpeaker(renderer);\n        } else {\n            renderer = videoRenderer;\n        }\n\n        return renderer;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.addCallIdInPluginContainer = function(call) {\n        logger.info('addCallIdInPluginContainer Call ID= ' + call.id);\n        if (self.getDefaultVideoContainer()) {\n            self.getDefaultVideoContainer().setAttribute('jsl-id', call.id);\n        } else if (self.getRemoteVideoContainer()) {\n            self.getRemoteVideoContainer().setAttribute('jsl-id', call.id);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.isActiveCallInVideoContainer = function(container, call) {\n        logger.info('isActiveCallInVideoContainer Call ID= ' + call.id);\n        if (container.getAttribute('jsl-id') !== 'undefined') {\n            logger.info('isActiveCallInVideoContainer Jsl Id= ' + container.getAttribute('jsl-id'));\n            if (call.id !== container.getAttribute('jsl-id')) {\n                return false;\n            }\n        }\n        return true;\n    };\n\n    // nativeOnRemoteStreamAdded\n    self.onRemoteStreamAdded = function(call, event) {\n        var fireEvent,\n            remoteVideoTracks = [],\n            isVideoTrackAvailable = false;\n\n        if (self.getDefaultVideoContainer()) {\n            if (!self.isActiveCallInVideoContainer(self.getDefaultVideoContainer(), call)) {\n                logger.debug('onRemoteStreamAdded: It is not active call. Call Id: ' + call.id);\n                return;\n            }\n        } else if (self.getRemoteVideoContainer()) {\n            if (!self.isActiveCallInVideoContainer(self.getRemoteVideoContainer(), call)) {\n                logger.debug('onRemoteStreamAdded: It is not active call. Call Id: ' + call.id);\n                return;\n            }\n        }\n\n        // The idea with this 'if' is that the first time this gets called, we will have an event.\n        // Subsequent calls, don't need the stream.\n        if (event && event.stream) {\n            call.remoteStream = event.stream;\n            call.remoteStreamId = event.stream.id;\n            event.stream.onaddtrack = function(){\n                logger.debug('onaddtrack for stream ' + event.stream.id);\n                self.onRemoteStreamAdded(call);\n            };\n\n            remoteVideoTracks = event.stream.getVideoTracks();\n        } else {\n            remoteVideoTracks = self.getRemoteVideoTrack(call.peer);\n            if (!call.remoteStream) {\n                logger.error('About to try to render video without having a stream. This state should not happen');\n            }\n        }\n\n        if (remoteVideoTracks && _sdpParser.isVideoSdpEnabled(call.sdp)) {\n            if (remoteVideoTracks.length > 0) {\n                isVideoTrackAvailable = true;\n            }\n        }\n\n        if (call.mergedCall) {\n            var source = call.mergedCall.localMedia.audioContext.createMediaStreamSource(event.stream);\n            source.connect(call.mergedCall.localMedia.mediaStreamDestination);\n            call.mergedCall.localMedia.mergedSource = source;\n        }\n\n        if (self.getDefaultVideoContainer()) {\n            fireEvent = self.useDefaultRenderer(call.remoteStream, false, isVideoTrackAvailable, call.silenced);\n        } else if (self.getRemoteVideoContainer()) {\n            fireEvent = self.createStreamRenderer(call.remoteStream, self.getRemoteVideoContainer(), {\n                video : isVideoTrackAvailable,\n                split: true,\n                muted: call.silenced\n            });\n        } else {\n            fireEvent = true;\n        }\n\n        logger.debug('onRemoteStreamAdded: ' + call.remoteStreamId);\n        if (fireEvent) {\n            self.fireOnStreamAddedEvent(call, call.remoteStream);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.fireOnStreamAddedEvent = function(call, stream) {\n        if (call && call.call && call.call.onStreamAdded) {\n            self.setOriginatorReceiveRemoteVideo(call);\n            _utils.callFunctionIfExist(call.call.onStreamAdded, stream);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onRemoteStreamRemoved = function(call, event) {\n        var container;\n        logger.info('removing stream ' + event.stream.id);\n        if (self.getDefaultVideoContainer()) {\n            container = self.getDefaultVideoContainer().firstElementChild;\n        } else if (self.getRemoteVideoContainer()) {\n            container = self.getRemoteVideoContainer();\n        }\n        self.disposeStreamRenderer(container, event.stream.id);\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.clearUpdateCandidateInterval = function(call) {\n        clearInterval(call.updateCandidateInterval);\n        call.updateCandidateInterval = null;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.clearIceCandidateCollectionTimer = function(call) {\n        //This method wasn't implemented in webrtc.js\n        clearTimeout(call.iceCandidateCollectionTimer);\n        call.iceCandidateCollectionTimer = null;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onIceCandidate = function(call, event) {\n        var sdp;\n        if (event.candidate === null) {\n            logger.debug('Null candidate received.');\n            if (call.successCallback) {\n                sdp = call.peer.localDescription.sdp;\n\n                if (_sdpParser.hasCandidates(sdp, call.relayCandidateCycle, _config.relayCandidateCollectionTimeoutCycle)) {\n                    self.clearIceCandidateCollectionTimer(call);\n                    logger.debug('Candidates received, invoking successCallback.');\n\n                    call.successCallback(sdp);\n                } else {\n                    logger.trace('Sdp does not have candidates.');\n                }\n            }\n        } else {\n            logger.debug('ICE candidate received: sdpMLineIndex = ' + event.candidate.sdpMLineIndex +\n                ', candidate = ' + event.candidate.candidate + ' for call : ' + call.id);\n\n            // if successCallback haven't been cleared, candidates will be sent via successCallback\n            // otherwise candidates will be sent via updateIceCandidates request\n            if (!call.successCallback) {\n                if (!call.candidateArray) {\n                    call.candidateArray = [];\n                }\n                call.candidateArray.push(event.candidate);\n                self.updateCandidates(call);\n            }\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.onIceComplete = function(call) {\n        var sdp;\n        logger.debug('All ICE candidates received for call : ' + call.id);\n        self.clearIceCandidateCollectionTimer(call);\n\n        if (call.successCallback) {\n            sdp = call.peer.localDescription.sdp;\n\n            logger.trace('onIceComplete sdp : ' + sdp);\n\n            call.successCallback(sdp);\n        }\n    };\n\n    self.onDataChannel = function(dataChannelWrapperObj, event) {\n        dataChannelWrapperObj.dataChannel = event.channel;\n        _utils.callFunctionIfExist(dataChannelWrapperObj.onDataChannel, dataChannelWrapperObj);\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.iceCandidateCollectionTimeoutHandler = function(call) {\n        var sdp = call.peer.localDescription.sdp;\n        self.clearIceCandidateCollectionTimer(call);\n        if (_config.relayCandidateCollectionTimeoutCycle) {\n            call.relayCandidateCycle++;\n        }\n        // set timeout if there is no ice candidate available or\n        // when audio, video port assignment isn't complete\n        if (!_sdpParser.hasCandidates(sdp, call.relayCandidateCycle, _config.relayCandidateCollectionTimeoutCycle)) {\n            logger.debug('Re-setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n            call.iceCandidateCollectionTimer = setTimeout(function() {\n                self.iceCandidateCollectionTimeoutHandler(call);\n            }, _config.iceCandidateCollectionTimeoutInterval);\n            return;\n        }\n\n        if (call.successCallback) {\n            logger.debug('Ice candidate collection interrupted after given timeout, invoking successCallback.');\n            call.successCallback(sdp);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.setupIceCandidateCollectionTimer = function(call) {\n        if (_config.iceCandidateCollectionTimeoutInterval) {\n            if (!call.iceCandidateCollectionTimer) {\n                logger.debug('Setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n                if (_config.relayCandidateCollectionTimeoutCycle) {\n                    call.relayCandidateCycle = 1;\n                }\n                call.iceCandidateCollectionTimer = setTimeout(function() {\n                    self.iceCandidateCollectionTimeoutHandler(call);\n                }, _config.iceCandidateCollectionTimeoutInterval);\n            } else {\n                logger.trace('Ice candidate collection timer exists.');\n            }\n        }\n    };\n\n    self.getNativeWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getNativeWebRtcStats called');\n                call.peer.getStats(function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        var results = stats.result();\n                        _utils.callFunctionIfExist(onSuccess, results);\n                    }\n                });\n            }\n        } catch (err) {\n            logger.error('Failed to get all WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n    };\n\n    self.getWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getWebRtcStats called');\n                self.collectWebRtcStats(call.sdp, call.peer,\n                    function(stats) {\n                        var accumulatedStats = self.getAccumulatedWebRtcStats(call.stats, stats, call.cache);\n                        _utils.callFunctionIfExist(onSuccess, accumulatedStats);\n                    },\n                    onFailure);\n            } else {\n                var cacheWebRtcStats = JSON.parse(_cache.getItem(_fcs.getUser() + '_stats'));\n                _utils.callFunctionIfExist(onSuccess, cacheWebRtcStats);\n            }\n        } catch (err) {\n            logger.error('Failed to get WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n        return self.getStats();\n    };\n\n    self.getAccumulatedWebRtcStats = function(statsList, currentStats, callCache) {\n        var i, accumulatedStats = {\n            audio: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                jitter: null,\n                rtt: null\n            },\n            video: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                rtt: null\n            }\n        };\n        if (statsList !== undefined) {\n            for (i = 0; i < statsList.length; i++) {\n                self.accumulateStats(accumulatedStats.audio, statsList[i].audio);\n                self.accumulateStats(accumulatedStats.video, statsList[i].video);\n            }\n        }\n\n        self.accumulateStats(accumulatedStats.audio, currentStats.audio);\n        accumulatedStats.audio.peerAddress = currentStats.audio.peerAddress;\n        accumulatedStats.audio.codec = currentStats.audio.codec;\n        accumulatedStats.audio.jitter = currentStats.audio.jitter;\n        accumulatedStats.audio.rtt = currentStats.audio.rtt;\n\n        self.accumulateStats(accumulatedStats.video, currentStats.video);\n        accumulatedStats.video.peerAddress = currentStats.video.peerAddress;\n        accumulatedStats.video.codec = currentStats.video.codec;\n        accumulatedStats.video.rtt = currentStats.video.rtt;\n\n        if (callCache && _config.recordCallStats) {\n            // if flag enabled, allow saving the call statistics in app's local storage\n            _cache.setItem(_fcs.getUser() + '_stats', JSON.stringify(accumulatedStats));\n        }\n        return accumulatedStats;\n    };\n\n    self.accumulateStats = function(accumulatedStatsObj, statsObj) {\n        accumulatedStatsObj.packetsSent += getInteger(statsObj.packetsSent);\n        accumulatedStatsObj.bytesSent += getInteger(statsObj.bytesSent);\n        accumulatedStatsObj.bytesReceived += getInteger(statsObj.bytesReceived);\n        accumulatedStatsObj.packetsLost += getInteger(statsObj.packetsLost) === -1 ? 0 : getInteger(statsObj.packetsLost);\n    };\n\n    self.collectWebRtcStats = function(statsSdp, peer, onSuccess, onFailure) {\n        try {\n            if (peer) {\n                logger.debug('collectWebRtcStats called');\n                peer.getStats(function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        var results = stats.result();\n                        self.setWebRtcStats(results, statsSdp);\n\n                        _utils.callFunctionIfExist(onSuccess, self.getStats());\n                    }\n                });\n            }\n        } catch (err) {\n            logger.error('Failed to collectWebRtcStats: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n\n        return self.getStats();\n    };\n\n    self.setWebRtcStats = function(results, statsSdp) {\n\n        var i, j, res, names, mediaDescriptions, sdpAudioPort, sdpVideoPort,\n            transportId, googChannelId, googCodecName, alwaysMediaOnBroker,\n            stats = {\n                audio: {\n                    packetsSent: null,\n                    bytesSent: null,\n                    bytesReceived: null,\n                    peerAddress: '',\n                    codec: null,\n                    packetsLost: null,\n                    jitter: null,\n                    rtt: null\n                },\n                video: {\n                    packetsSent: null,\n                    bytesSent: null,\n                    bytesReceived: null,\n                    peerAddress: null,\n                    codec: null,\n                    packetsLost: null,\n                    rtt: null\n                }\n            };\n\n        if (_sdpParser.isIceLite(statsSdp)) {\n            alwaysMediaOnBroker = true;\n        } else {\n            alwaysMediaOnBroker = false;\n        }\n\n        if (statsSdp !== undefined && statsSdp !== null && results !== undefined && results !== null) {\n            _sdpParser.init(statsSdp);\n            _sdpParser.parseSDP(statsSdp);\n            mediaDescriptions = _sdpParser.getMediaDescriptions();\n\n            if (mediaDescriptions !== undefined) {\n                if (mediaDescriptions[0] !== undefined) {\n                    sdpAudioPort = mediaDescriptions[0].port;\n                }\n\n                if (mediaDescriptions[1] !== undefined) {\n                    sdpVideoPort = mediaDescriptions[1].port;\n                }\n            }\n\n            for (i = 0; i < results.length; i++) {\n                res = results[i];\n                names = res.names();\n                if (names !== undefined) {\n                    for (j = 0; j < names.length; j++) {\n                        googChannelId = res.stat('googChannelId');\n                        transportId = res.stat('transportId');\n                        googCodecName = res.stat('googCodecName');\n                        if ((transportId !== undefined && transportId.indexOf('audio') > -1) ||\n                            (googChannelId !== undefined && googChannelId.indexOf('audio') > -1)) {\n\n                            if (googCodecName === 'VP8' || googCodecName === 'H264') {\n                                self.fillStats(stats.video, res, names, j, sdpVideoPort, alwaysMediaOnBroker);\n                            } else {\n                                self.fillStats(stats.audio, res, names, j, sdpAudioPort, alwaysMediaOnBroker);\n                            }\n                        } else if ((transportId !== undefined && transportId.indexOf('video') > -1) ||\n                            (googChannelId !== undefined && googChannelId.indexOf('video') > -1)) {\n                            self.fillStats(stats.video, res, names, j, sdpVideoPort, alwaysMediaOnBroker);\n                        }\n\n                    }\n                    if (!alwaysMediaOnBroker && sdpVideoPort !== undefined) {\n                        stats.video.peerAddress = stats.audio.peerAddress.split(':')[0];\n                    }\n                    self.setStats(stats);\n                }\n            }\n        }\n\n    };\n\n    self.fillStats = function(statsObj, res, names, index, sdpRemotePort, alwaysMediaOnBroker) {\n        var remotePort, remoteAddress;\n\n        if ((res.stat('googActiveConnection') === 'true') && alwaysMediaOnBroker) {\n            remoteAddress = res.stat('googRemoteAddress');\n\n            if (remoteAddress !== undefined) {\n                if (remoteAddress.split(':') !== undefined && remoteAddress.split(':')[1] !== undefined) {\n                    remotePort = remoteAddress.split(':')[1];\n                }\n\n                if (remotePort === sdpRemotePort) {\n\n                    statsObj.peerAddress = remoteAddress;\n\n                    if (names[index] === 'bytesReceived') {\n                        statsObj.bytesReceived = res.stat(names[index]);\n                    }\n\n                    if (names[index] === 'packetsSent') {\n                        statsObj.packetsSent = res.stat(names[index]);\n                    }\n\n                    if (names[index] === 'bytesSent') {\n                        statsObj.bytesSent = res.stat(names[index]);\n                    }\n                }\n            }\n        }\n\n        if ((res.stat('googActiveConnection') === 'true') && !alwaysMediaOnBroker) {\n            remoteAddress = res.stat('googRemoteAddress');\n            statsObj.peerAddress = remoteAddress;\n        }\n\n        if (res.type === 'ssrc') {\n            if (names[index] === 'packetsLost') {\n                statsObj.packetsLost = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googCodecName') {\n                statsObj.codec = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googJitterReceived') {\n                statsObj.jitter = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googRtt') {\n                statsObj.rtt = res.stat(names[index]);\n            }\n\n            if (!alwaysMediaOnBroker) {\n                if (names[index] === 'bytesReceived') {\n                    statsObj.bytesReceived = res.stat(names[index]);\n                }\n                if (names[index] === 'packetsSent') {\n                    statsObj.packetsSent = res.stat(names[index]);\n                }\n                if (names[index] === 'bytesSent') {\n                    statsObj.bytesSent = res.stat(names[index]);\n                }\n            }\n        }\n    };\n\n    self.clearWebrtcLogCollectionInterval = function(call) {\n        //This method wasn't implemented in webrtc.js\n        clearInterval(call.webrtcLogCollectionInterval);\n        call.webrtcLogCollectionInterval = null;\n    };\n\n    self.webrtcLogCollectionTimeoutHandler = function(call) {\n        if (call && call.peer && call.peer.signalingState !== 'closed') {\n            call.peer.getStats(function(stats) {\n                var results = stats.result(),\n                    i, j, res, names, statObj,\n                    resultLength, namesLength;\n                resultLength = results.length;\n                for (i = 0; i < resultLength; ++i) {\n                    res = results[i];\n                    if (!res.local || res.local === res) {\n                        statObj = {};\n                        statObj.timestamp = res.timestamp;\n                        if (res.id) {\n                            statObj.id = res.id;\n                        }\n                        if (res.type) {\n                            statObj.type = res.type;\n                        }\n\n                        if (res.names) {\n                            names = res.names();\n                            namesLength = names.length;\n                            for (j = 0; j < namesLength; ++j) {\n                                statObj[names[j]] = res.stat(names[j]);\n                            }\n                        } else {\n                            if (res.stat('audioOutputLevel')) {\n                                statObj.audioOutputLevel = res.stat('audioOutputLevel');\n                            }\n                        }\n                        logger.trace('Peer connection stats, report[' + i + ']: ', statObj);\n                    }\n                }\n            });\n        } else {\n            self.clearWebrtcLogCollectionInterval(call);\n        }\n    };\n\n    self.setupWebrtcLogCollectionTimer = function(call) {\n        if (_config.webrtcLogCollectionInterval) {\n            self.clearWebrtcLogCollectionInterval(call);\n            var logCollectionInterval = _config.webrtcLogCollectionInterval * 1000;\n            logger.debug('Setting webrtc log collection interval: ' + logCollectionInterval);\n            call.webrtcLogCollectionInterval = setInterval(function() {\n                self.webrtcLogCollectionTimeoutHandler(call);\n            }, logCollectionInterval);\n        }\n    };\n\n    self.oniceconnectionstatechange = function(call) {\n        var state, mediaStates = _fcs.call.MediaStates, iceConnectionState = call.peer.iceConnectionState;\n        logger.debug('ICE connection state change : ' + iceConnectionState);\n        if(iceConnectionState === 'new') {\n            state = mediaStates.NEW;\n        } else if(iceConnectionState === 'checking') {\n            state = mediaStates.CHECKING;\n        } else if(iceConnectionState === 'connected') {\n            state = mediaStates.CONNECTED;\n        } else if(iceConnectionState === 'completed') {\n            state = mediaStates.COMPLETED;\n        } else if(iceConnectionState === 'failed') {\n            state = mediaStates.FAILED;\n        } else if(iceConnectionState === 'disconnected') {\n            state = mediaStates.DISCONNECTED;\n        } else if(iceConnectionState === 'closed') {\n            state = mediaStates.CLOSED;\n        } else {\n            logger.debug('ICE connection state was not recognized');\n        }\n\n        if(state) {\n            _utils.callFunctionIfExist(call.call.onMediaStateChange, state);\n        }\n    };\n\n    self.createDataChannel = function(dataChannelWrapperObj, onSuccess, onFailure, options) {\n        try {\n            dataChannelWrapperObj.dataChannel = dataChannelWrapperObj.peer.createDataChannel(options);\n            onSuccess(dataChannelWrapperObj);\n        } catch (error) {\n            logger.error('Failed to create data channel, exception: ' + error.message);\n            onFailure(error);\n        }\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.createPeer = function(call) {\n        try {\n            var pc, constraints = {}, i, servers = [],\n                iceServerUrl, config, useIceServer;\n\n            useIceServer = !_config.ignoreIceParamsForServices || _config.ignoreIceParamsForServices.indexOf('call') !== -1;\n            logger.info('useIceServer: ' + useIceServer);\n            if (useIceServer) {\n                iceServerUrl = self.getIceServerUrl();\n            }\n\n            if (iceServerUrl instanceof Array) {\n                for (i = 0; i < iceServerUrl.length; i++) {\n                    servers[i] = iceServerUrl[i];\n                }\n            } else if (!iceServerUrl || iceServerUrl === '') {\n                servers = [];\n            } else {\n                servers[0] = iceServerUrl;\n            }\n            config = {\n                iceServers: servers,\n\n                // TODO: Remove this, I believe this is no longer doing anything.\n                // NOTE: This is added temporarily because Chrome and Firefox have required set\n                // by default and the media broker doesn't support multiplexing. ADG-14986\n                rtcpMuxPolicy: 'negotiate',\n\n                // NOTE: Make sure plan-b remains as default until WebRTC gateway can support unified plan.\n                sdpSemantics: 'plan-b'\n            };\n\n            // If present, take the call constraints provided as config.\n            if(_config.callConstraints && _config.callConstraints.chrome) {\n                // If any constraint is malformed, the RTCPeerConnection will fail to be created.\n                logger.debug('Using custom peer constraints for call.', _config.callConstraints.chrome);\n                constraints = _config.callConstraints.chrome;\n            }\n\n            constraints.optional = constraints.optional || [];\n            constraints.optional.push({\n                'DtlsSrtpKeyAgreement': self.isDtlsEnabled()\n            });\n\n            if (self.isDscpEnabled() !== undefined) {\n                constraints.optional.push({\n                    'googDscp': true\n                });\n            }\n\n            //Add iceTransportPolicy:relay in order to force TURN\n            if(_config.useRelayOnly) {\n                config.iceTransportPolicy = 'relay';\n            }\n\n            if (_config.bundlePolicy !== CONSTANTS.WEBRTC.SDP.BUNDLE_POLICY.DISABLED) {\n                config.bundlePolicy = _config.bundlePolicy;\n            }\n\n\n            pc = self.getRtcLibrary().createRTCPeerConnection(config, constraints);\n            pc._peerId = peerId++;\n\n            if (call.peer) {\n                logger.debug(`createPeer - Peer Id: ${call.peer._peerId} - detaching old peer from call ${call.id}.`);\n\n                // Let's make sure we stop listening to any events from the old peer.\n                call.peer.onconnecting = undefined;\n                call.peer.onopen = undefined;\n                call.peer.onsignalingstatechange = undefined;\n                call.peer.onaddstream = undefined;\n                call.peer.onremovestream = undefined;\n                call.peer.onicecandidate = undefined;\n                call.peer.onicecomplete = undefined;\n                call.peer.oniceconnectionstatechange = undefined;\n                call.peer.ondatachannel = undefined;\n                call.peer.onicegatheringstatechange = undefined;\n\n                // Close the peer, it is no longer needed.\n                call.peer.close();\n            }\n\n            self.setPeerCount(self.getPeerCount() + 1);\n            call.peer = pc;\n\n            logger.debug(`createPeer - Peer Id: ${pc._peerId} - created new peer and attached to call (${call.id}).`);\n\n            pc.onconnecting = function(event) {\n                self.onSessionConnecting(call, event);\n            };\n            pc.onopen = function(event) {\n                self.onSessionOpened(call, event);\n            };\n            pc.onsignalingstatechange = function(event) {\n                self.onSignalingStateChange(call, event);\n            };\n            pc.onaddstream = function(event) {\n                self.onRemoteStreamAdded(call, event);\n            };\n            pc.onremovestream = function(event) {\n                self.onRemoteStreamRemoved(call, event);\n            };\n            pc.onicecandidate = function(event) {\n                if (pc !== call.peer) {\n                    logger.error(`Peer Id: ${pc._peerId} - received notification from detached peer not on call (Other Peer id: ${call.peer._peerId} )`);\n                    return;\n                }\n                if (pc.iceGatheringState === 'complete') {\n                    logger.debug(`Peer Id: ${pc._peerId} - ice gathering complete`);\n                    self.onIceComplete(call);\n                } else {\n                    self.setupIceCandidateCollectionTimer(call);\n                    self.onIceCandidate(call, event);\n                }\n            };\n            pc.onicecomplete = function() {\n                if (pc !== call.peer) {\n                    logger.error(`Peer Id: ${pc._peerId} - received notification from detached peer not on call (Other Peer id: ${call.peer._peerId} )`);\n                    return;\n                }\n\n                self.onIceComplete(call);\n            };\n            pc.oniceconnectionstatechange = function(event) {\n                self.oniceconnectionstatechange(call, event);\n            };\n            pc.ondatachannel = function(event) {\n                self.onDataChannel(call, event);\n            };\n\n            pc.onicegatheringstatechange = function() {\n                logger.debug(`Peer Id: ${pc._peerId} - ice gathering state change:` + pc.iceGatheringState);\n            };\n\n            logger.info(`Peer Id: ${pc._peerId} - create PeerConnection successfully.`);\n\n            self.setupWebrtcLogCollectionTimer(call);\n\n            return true;\n        } catch (err) {\n            logger.error('Failed to create PeerConnection, exception: ' + err.message);\n        }\n        return false;\n    };\n\n    self.needNewPeer = function(call, checkFireFox, incomingSDP) {\n        if(call.forceNewPeer) {\n            call.forceNewPeer = false;\n            return true;\n        }\n\n        if(checkFireFox){\n            if(_sdpParser.isRemoteEndFirefox(call.sdp)){\n                logger.debug('New peer needed as remote end is FireFox');\n                return true;\n            }\n        }\n\n        //We only want to compare those when this is an incoming SDP, not when we create an update\n        if(incomingSDP && call.prevRemoteSdp && call.sdp ){\n            if(_sdpParser.getSessionIdFromSdp(call.prevRemoteSdp) !== _sdpParser.getSessionIdFromSdp(call.sdp)){\n                logger.debug('New peer needed as session id has changed');\n                return true;\n            }\n\n            if(_sdpParser.getFingerprintFromSdp(call.prevRemoteSdp) !== _sdpParser.getFingerprintFromSdp(call.sdp)){\n                logger.debug('New peer needed as DTLS Fingerprint has changed');\n                return true;\n            }\n\n            if(_sdpParser.hasCodecPayloadChanged(call.prevRemoteSdp, call.sdp)){\n                logger.debug('New peer needed as Codec Payload has changed');\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    self.createNewPeerForCall = function(call, deleteVideoStream) {\n        var isNewPeerCreated = false,\n            oldPeer,\n            videoTrack;\n        if (call.peer) {\n            oldPeer = call.peer;\n            self.collectWebRtcStats(call.sdp, oldPeer,\n                function(stats) {\n                    logger.debug('collectWebRtcStats successfull');\n                    if (call.stats === undefined) {\n                        call.stats = [];\n                    }\n                    call.stats.push(stats);\n                    if (oldPeer.signalingState !== 'closed') {\n                        oldPeer.close();\n                    }\n                    self.setPeerCount(self.getPeerCount() - 1);\n                    call.dtmfSender = null;\n                },\n                function() {\n                    logger.debug('collectWebRtcStats failed');\n                    if (oldPeer.signalingState !== 'closed') {\n                        oldPeer.close();\n                    }\n                    self.setPeerCount(self.getPeerCount() - 1);\n                    call.dtmfSender = null;\n                });\n        }\n\n        logger.trace('Creating new peer for call: ' + call.id);\n\n        if(self.createPeer(call)){\n            logger.trace('New peer has created for call: ' + call.id);\n            if(call.localMedia && call.localMedia.stream){\n                if (deleteVideoStream) {\n                    videoTrack = call.localMedia.stream.getVideoTracks()[0];\n                    if(videoTrack) {\n                        call.localMedia.stream.removeTrack(videoTrack);\n                    } else {\n                        logger.debug('Designated to remove track after new'\n                            + ' peer creation, but no video track found.');\n                    }\n                }\n                call.peer.addStream(call.localMedia.stream);\n            }\n\n            isNewPeerCreated = true;\n        } else {\n            logger.error('New peer creation has failed!: ' + call.id);\n            if (call.stats) {\n                call.stats.pop();\n            }\n        }\n        return isNewPeerCreated;\n    };\n\n    /*\n     * Gets remote video resolutions with the order below\n     * remoteVideoHeight-remoteVideoWidth\n     *\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getRemoteVideoResolutions = function() {\n        var remoteResolution = [],\n            remoteVideoHeight,\n            remoteVideoWidth;\n\n        if (self.getRemoteVideoContainer()) {\n            if (!self.getRemoteVideoContainer().firstChild) {\n                return remoteResolution;\n            }\n\n            remoteVideoHeight = self.getRemoteVideoContainer().firstChild.videoHeight;\n            remoteVideoWidth = self.getRemoteVideoContainer().firstChild.videoWidth;\n\n        } else {\n            if (!self.getDefaultVideoContainer().firstElementChild.firstChild) {\n                return remoteResolution;\n            }\n\n            remoteVideoHeight = self.getDefaultVideoContainer().firstElementChild.firstChild.videoHeight;\n            remoteVideoWidth = self.getDefaultVideoContainer().firstElementChild.firstChild.videoWidth;\n        }\n\n        logger.debug('remote video resolutions of plugin webrtc...');\n        logger.debug('remoteVideoWidth  : ' + remoteVideoWidth);\n        logger.debug('remoteVideoHeight : ' + remoteVideoHeight);\n\n        remoteResolution.push(remoteVideoHeight);\n        remoteResolution.push(remoteVideoWidth);\n\n        self.getLocalVideoResolutions();\n\n        return remoteResolution;\n    };\n\n    /*\n     * Gets local video resolutions with the order below\n     * localVideoHeight-localVideoWidth\n     *\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getLocalVideoResolutions = function() {\n        var localResolution = [],\n            localVideoHeight,\n            localVideoWidth;\n\n        if (self.getLocalVideoContainer()) {\n            if (!self.getLocalVideoContainer().firstChild) {\n                return localResolution;\n            }\n\n            localVideoHeight = self.getLocalVideoContainer().firstChild.videoHeight;\n            localVideoWidth = self.getLocalVideoContainer().firstChild.videoWidth;\n\n        } else {\n            if (!self.getDefaultVideoContainer().lastElementChild.firstChild) {\n                return localResolution;\n            }\n\n            localVideoHeight = self.getDefaultVideoContainer().lastElementChild.firstChild.videoHeight;\n            localVideoWidth = self.getDefaultVideoContainer().lastElementChild.firstChild.videoWidth;\n        }\n\n        logger.debug('local video resolutions of plugin webrtc...');\n        logger.debug('localVideoWidth  : ' + localVideoWidth);\n        logger.debug('localVideoHeight : ' + localVideoHeight);\n\n        localResolution.push(localVideoHeight);\n        localResolution.push(localVideoWidth);\n\n        return localResolution;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.refreshVideoRenderer = function() {\n        return;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.sendIntraFrame = function() {\n        return;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.sendBlackFrame = function() {\n        return;\n    };\n\n    // Native implementation lies on webRtcAdaptor.js\n    self.disposeStreamRenderer = function(container, id='') {\n        const safeId = makeSafeForCSS(id);\n\n        logger.info('disposeStreamRenderer');\n        if (container) {\n            if (safeId) {\n                var renderer = container.querySelector('#stream-id-' + safeId);\n                if(renderer){\n                    container.removeChild(renderer);\n                }\n            } else {\n                container.innerHTML = '';\n            }\n        }\n    };\n\n    self.sendInbandDTMF = function(call, tone, audioContext) {\n        var oscillator1, oscillator2, freq1, freq2, gainNode, mediaStreamDestination;\n\n        if(call.localMedia && call.localMedia.mediaStreamDestination){\n            mediaStreamDestination = call.localMedia.mediaStreamDestination;\n        } else {\n            logger.error('could not send DTMF as there is no media');\n            return;\n        }\n\n        logger.info('sending inband DTMF tone: ' + tone);\n        if (tone === '1') {\n            freq1 = '697';\n            freq2 = '1209';\n        }\n        if (tone === '2') {\n            freq1 = '697';\n            freq2 = '1336';\n        }\n        if (tone === '3') {\n            freq1 = '697';\n            freq2 = '1477';\n        }\n        if (tone === '4') {\n            freq1 = '770';\n            freq2 = '1209';\n        }\n        if (tone === '5') {\n            freq1 = '770';\n            freq2 = '1336';\n        }\n        if (tone === '6') {\n            freq1 = '770';\n            freq2 = '1477';\n        }\n        if (tone === '7') {\n            freq1 = '852';\n            freq2 = '1209';\n        }\n        if (tone === '8') {\n            freq1 = '852';\n            freq2 = '1336';\n        }\n        if (tone === '9') {\n            freq1 = '852';\n            freq2 = '1477';\n        }\n        if (tone === '*') {\n            freq1 = '941';\n            freq2 = '1209';\n        }\n        if (tone === '0') {\n            freq1 = '941';\n            freq2 = '1336';\n        }\n        if (tone === '#') {\n            freq1 = '941';\n            freq2 = '1477';\n        }\n\n        oscillator1 = audioContext.createOscillator();\n        oscillator1.type = 'sine';\n        oscillator1.frequency.value = freq1;\n        gainNode = audioContext.createGain ? audioContext.createGain() : audioContext.createGainNode();\n        oscillator1.connect(gainNode, 0, 0);\n        gainNode.connect(mediaStreamDestination);\n        gainNode.gain.value = 0.1;\n        oscillator1.start();\n\n        oscillator2 = audioContext.createOscillator();\n        oscillator2.type = 'sine';\n        oscillator2.frequency.value = freq2;\n        gainNode = audioContext.createGain ? audioContext.createGain() : audioContext.createGainNode();\n        oscillator2.connect(gainNode);\n        gainNode.connect(mediaStreamDestination);\n        gainNode.gain.value = 0.1;\n        oscillator2.start();\n\n        setTimeout(function() {\n            oscillator1.disconnect();\n            oscillator2.disconnect();\n        }, 100);\n    };\n\n    /**\n     * Send DTMF tone\n     * Native implementation lies on webRtcAdaptor.js\n     *\n     * @ignore\n     * @name rtc.sendDTMF\n     * @function\n     * @param {Object} call internalCall\n     * @param {String} tone DTMF tone\n     */\n    self.sendDTMF = function(call, tone) {\n        var audioContext, localAudioTrack;\n\n        if (!_sdpParser.isSdpHasTelephoneEvent(call.peer.remoteDescription.sdp)) {\n            audioContext = call.localMedia.audioContext;\n            self.sendInbandDTMF(call, tone, audioContext);\n        } else {\n            logger.info('sending outband DTMF tone: ' + tone);\n            if (!call.dtmfSender) {\n                localAudioTrack = self.getLocalAudioTrack(call.peer);\n                if (!localAudioTrack) {\n                    return;\n                }\n                call.dtmfSender = call.peer.createDTMFSender(localAudioTrack);\n                if (!call.dtmfSender) {\n                    return;\n                }\n            }\n\n            if (call.dtmfSender.canInsertDTMF === true) {\n                call.dtmfSender.insertDTMF(tone, 400);\n            } else {\n                logger.error('Failed to execute \\'insertDTMF\\' on \\'RTCDTMFSender\\': The \\'canInsertDTMF\\' attribute is false: this sender cannot send DTMF');\n            }\n        }\n    };\n\n    self.showSettingsWindow = function() {\n        self.getRtcLibrary().showSettingsWindow();\n    };\n\n    self.set_logSeverityLevel = function(level) {\n        self.getRtcLibrary().set_logSeverityLevel(level);\n    };\n\n    self.enable_logCallback = function() {\n        var pluginLogger = _logManager.getLogger('rtcPlugin');\n        self.getRtcLibrary().enable_logCallback(pluginLogger);\n    };\n\n    self.disable_logCallback = function() {\n        self.getRtcLibrary().disable_logCallback();\n    };\n\n    self.get_audioInDeviceCount = function() {\n        return self.getRtcLibrary().get_audioInDeviceCount();\n    };\n\n    self.get_audioOutDeviceCount = function() {\n        return self.getRtcLibrary().get_audioOutDeviceCount();\n    };\n\n    self.get_videoDeviceCount = function() {\n        return self.getRtcLibrary().get_videoDeviceCount();\n    };\n\n    // set local client's video send status\n    self.setOriginatorSendLocalVideo = function(call, tSdp, status) {\n        var videoSendEnabled = _sdpParser.isVideoSdpEnabled(tSdp);\n        call.canOrigSendVideo = status && videoSendEnabled;\n    };\n\n    // check if local client sends video\n    self.canOriginatorSendLocalVideo = function(call) {\n        return call.canOrigSendVideo;\n    };\n\n    // set local client's video receive status\n    self.setOriginatorReceiveRemoteVideo = function(call) {\n        call.canOrigReceiveVideo = _sdpParser.isVideoSdpEnabled(call.sdp);\n    };\n\n    // check if local client receives video\n    self.canOriginatorReceiveRemoteVideo = function(call) {\n        return call.canOrigReceiveVideo;\n    };\n\n    self.setDTLSRoleFromStableLocalSDP = function(call) {\n        call.dtlsRole =_sdpParser.getTcpSetupAttribute(call.stableLocalSdp);\n    };\n\n    self.handleDTLSRoleFromRemoteSDP = function(call) {\n        if(!self.isDtlsEnabled()) {\n            return;\n        }\n        var remote_role = _sdpParser.getTcpSetupAttribute(call.sdp),\n            local_role = 'active';\n\n        //if we already have a role we don't want to chane it.\n        if((call.dtlsRole === 'active' || call.dtlsRole === 'passive') && remote_role === 'actpass'){\n            logger.debug('Setting local DTLS role from remote SDP : keeping existing role');\n            return;\n        }\n\n        //if we detect a conflict where both ends says they are actpass use fingerprint comparaison and modify the incoming sdp\n        if(call.dtlsRole === 'actpass' && remote_role === 'actpass'){\n            if(_sdpParser.getFingerprintFromSdp(call.lastLocalSdp) < _sdpParser.getFingerprintFromSdp(call.sdp)){\n                local_role = 'passive';\n            } else {\n                local_role = 'active';\n            }\n            call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, local_role === 'active' ? 'passive' : 'active', true);\n            logger.debug('Setting local DTLS role from remote SDP : ' + local_role + ' baed on fingerprint comparaison');\n        }\n\n        if (remote_role === 'active') {\n            local_role = 'passive';\n        }\n\n        logger.debug('Setting local DTLS role from remote SDP : ' + local_role);\n\n        call.dtlsRole = local_role;\n    };\n\n    self.setDTLSRole = function(call, role) {\n        call.dtlsRole = role;\n    };\n\n    /*\n     * TODO: add selected speaker to the audio constraint, after chrome implementation\n     */\n    self.prepareAudioConstraints = function(data) {\n        var mediaConstraints = self.getUserMediaContraints(),\n            selectedMicrophoneId = self.getSelectedMicrophoneId();\n        if(data && (data.isAudioEnabled === false || data.requestScreenShare || data.mediaSourceId)){\n            return false;\n        } else {\n            if (selectedMicrophoneId) {\n                if (typeof mediaConstraints.audio === 'boolean') {\n                    mediaConstraints.audio = {};\n                }\n                mediaConstraints.audio.deviceId = selectedMicrophoneId;\n            }\n            return mediaConstraints.audio;\n        }\n    };\n\n    var updateVideoConstraints = function (videoConstraints, videoResolution, deviceId) {\n        // If the constraint is a boolean, leave it as such if no resolution or deviceId was specified\n        if (typeof videoConstraints === 'boolean') {\n            if (!videoResolution && !deviceId) {\n                return videoConstraints;\n            }\n\n            videoConstraints = {};\n        }\n\n        if (videoResolution) {\n            videoConstraints.height = {\n                max: videoResolution.maxHeight ? videoResolution.maxHeight : videoResolution.height,\n                min: videoResolution.minHeight ? videoResolution.minHeight : videoResolution.height\n            };\n            videoConstraints.width = {\n                max: videoResolution.maxWidth ? videoResolution.maxWidth : videoResolution.width,\n                min: videoResolution.minWidth ? videoResolution.minWidth : videoResolution.width\n            };\n        }\n\n        videoConstraints.deviceId = deviceId;\n        return videoConstraints;\n    };\n\n    self.prepareVideoConstraints = function(data) {\n        var mediaConstraints,\n            selectedCameraId = self.getSelectedCameraId(),\n            isVideoEnabled, videoResolution, requestScreenShare, mediaSourceId, frameRate;\n\n        if (!data) {\n            data = {};\n        }\n        isVideoEnabled = data.isVideoEnabled;\n        videoResolution = data.videoResolution;\n        requestScreenShare = data.requestScreenShare;\n        mediaSourceId = data.mediaSourceId;\n        frameRate = data.frameRate;\n        if (!isVideoEnabled && !requestScreenShare && !mediaSourceId) {\n            return false;\n        }\n\n        if(isVideoEnabled){\n            mediaConstraints = self.getUserMediaContraints();\n            mediaConstraints.video = updateVideoConstraints(mediaConstraints.video, videoResolution, selectedCameraId);\n        }\n\n        //We need to handle specific resolution constraints for screen sharing.\n        if (requestScreenShare || mediaSourceId) {\n            //Need to use the default as we cannot\n            mediaConstraints = {\n                video : {\n                    mandatory: {\n                        'maxFrameRate': 15,\n                        'maxWidth' : 1024,\n                        'maxHeight' : 768\n                    },\n                    mediaSource: 'screen'\n                }\n            };\n\n            if (frameRate) {\n                mediaConstraints.video.mandatory.maxFrameRate = frameRate;\n            }\n\n            if (videoResolution) {\n                mediaConstraints.video.mandatory.maxWidth = videoResolution.maxWidth ? videoResolution.maxWidth : videoResolution.width;\n                mediaConstraints.video.mandatory.maxHeight = videoResolution.maxHeight ? videoResolution.maxHeight : videoResolution.height;\n            }\n\n            if (mediaSourceId) {\n                mediaConstraints.video.mandatory = { chromeMediaSourceId: mediaSourceId };\n            }\n        }\n        return mediaConstraints.video;\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.privateGetUserMedia = function(params) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback() {\n            var mediaInfo, privateMedia,\n                constraints = {\n                    audio: params.options.audioConstraints,\n                    video: params.options.videoConstraints\n                };\n\n            self.getRtcLibrary().getUserMedia(constraints, function privateGetUserMediaSuccessCallback(stream) {\n                privateMedia = {\n                    stream: stream,\n                    privateStream: params.options.privateStream\n                };\n                self.getPrivateStreamMap().add(stream.id, privateMedia);\n\n                mediaInfo = {\n                    id: stream.id,\n                    stream: stream\n                };\n                _utils.callFunctionIfExist(params.onSuccess, mediaInfo);\n            }, function privateGetUserMediaFailureCallback() {\n                _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_ALLOWED);\n            });\n        });\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getCameraList = function(onSuccess) {\n        var index, cameraList = [],\n            sourceList = [];\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            sourceList = mediaSourceInfo.sourceList;\n            for (index = 0; index < sourceList.length; index++) {\n                if (sourceList[index].kind === 'video' || sourceList[index].kind === 'videoinput') {\n                    cameraList.push(sourceList[index]);\n                }\n            }\n            _utils.callFunctionIfExist(onSuccess, cameraList);\n        });\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getMicrophoneList = function(onSuccess) {\n        var index, microphoneList = [],\n            sourceList = [];\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            sourceList = mediaSourceInfo.sourceList;\n            for (index = 0; index < sourceList.length; index++) {\n                if (sourceList[index].kind === 'audio' || sourceList[index].kind === 'audioinput') {\n                    microphoneList.push(sourceList[index]);\n                }\n            }\n            _utils.callFunctionIfExist(onSuccess, microphoneList);\n        });\n    };\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     */\n    self.getSpeakerList = function(onSuccess) {\n        var index, speakerList = [],\n            sourceList = [];\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            sourceList = mediaSourceInfo.sourceList;\n            for (index = 0; index < sourceList.length; index++) {\n                if (sourceList[index].kind === 'audiooutput') {\n                    speakerList.push(sourceList[index]);\n                }\n            }\n            _utils.callFunctionIfExist(onSuccess, speakerList);\n        });\n    };\n\n    self.removeStreamById = function(id) {\n        var localStream = self.getStreamById(id);\n        if (localStream) {\n            self.getRtcLibrary().stopStream(localStream.stream);\n            self.removeStreamFromMap(id);\n        }\n    };\n\n    self.updateCandidates = function(call) {\n        // check if peer has remote description\n        // if not it means call isn't established yet and\n        // updateIceCandidate requests will be rejected from Spidr\n        if (call.peer.remoteDescription && call.peer.remoteDescription.sdp) {\n            logger.debug('updateCandidates is called with: ', call.candidateArray);\n            _utils.callFunctionIfExist(call.updateCandidates, call.candidateArray);\n            call.candidateArray = [];\n            self.clearUpdateCandidateInterval(call);\n        } else {\n            logger.warn('remote party is not ready to receive candidates');\n            if (!call.updateCandidateInterval) {\n                call.updateCandidateInterval = setInterval(()=>{\n                    self.updateCandidates(call);\n                }, 1000);\n            }\n        }\n    };\n\n    self.addRemoteCandidates = function(call, candidateArray) {\n        var peer = call.peer,\n            candidate,\n            length = candidateArray.length;\n\n        for (var i = 0; i < length; i++) {\n            // update candidate parameter type from Object to RTCIceCandidate, Firefox can only work with RTCIceCandidate\n            candidate = self.getRtcLibrary().createRTCIceCandidate(candidateArray[i]);\n            logger.debug('candidate to be added:  ', candidate);\n\n            peer.addIceCandidate(candidate).then(()=>{\n                logger.debug('addIceCandidate success:  ');\n            }).catch(e=>{\n                logger.error('Error: Failure during addIceCandidate : ',  e);\n            });\n        }\n    };\n\n    /**\n     * Changes the sinkId for the current call's video element.\n     * This changes the speaker used for audio. The \"sink Id\" is the speaker Id.\n     */\n    self.setContainerSinkId = function(speakerId, onSuccess, onFailure) {\n\n        if(!speakerId) {\n            _utils.callFunctionIfExist(onFailure, 'No speaker ID provided.');\n            return;\n        }\n        logger.debug('Setting container\\'s speaker id.', speakerId);\n\n        var videoEl;\n        if(self.getDefaultVideoContainer()) {\n            // DefaultVideoContainer has both remote and local video elements.\n            videoEl = self.getDefaultVideoContainer().children[0].firstChild;\n        } else if(self.getRemoteVideoContainer()) {\n            // RemoteVideoContainer is only the remote video element.\n            videoEl = self.getRemoteVideoContainer().children[0];\n        } else {\n            logger.debug('No video container found.');\n            _utils.callFunctionIfExist(onFailure, 'No video container found.');\n            return;\n        }\n\n        if(videoEl && typeof videoEl.sinkId !== 'undefined') {\n            logger.debug('Changing sinkId for element:', videoEl);\n            videoEl.setSinkId(speakerId)\n                .then(function() {\n                    logger.debug('Speaker successfully changed.', speakerId);\n                    _utils.callFunctionIfExist(onSuccess);\n                })\n                .catch(function(error) {\n                    logger.debug('Failed to change speaker.', error);\n                    _utils.callFunctionIfExist(onFailure, 'Failed to change speaker.');\n                });\n        } else {\n            logger.warn('Changing speaker not supported for this browser.');\n            _utils.callFunctionIfExist(onFailure, 'Not supported.');\n        }\n    };\n\n    logger.debug('WebRtcAdaptor initialized');\n}\n","import {mediaErrors} from '../../call/call.js';\nimport {compose} from '../../utils';\n\nexport function WebRtcChromeAdaptorImpl({\n    base: _super,\n    model: _model,\n    LogManager: _logManager,\n    Utils: _utils\n}) {\n    var self = this,\n        logger = _logManager.getLogger('WebRtcChromeAdaptorImpl');\n    logger.debug('WebRtcChromeAdaptor initializing');\n\n    /*\n     * Native implementation lies on webRtcAdaptor.js\n     * Most of this function is identitical to the native implementation.\n     */\n    self.startScreenMedia = function(onSuccess, onFailure, onEnded) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            var video_constraints;\n            self.setMediaSources(mediaSourceInfo);\n            if (self.getScreenSourceAvailable()) {\n                video_constraints = {\n                    mandatory: {\n                        'maxFrameRate': self.getScreenFrameRate(),\n                        'maxWidth': self.getScreenWidth(),\n                        'maxHeight': self.getScreenHeight()\n                    },\n                    mediaSource: 'screen'\n                };\n\n                // This if statement is the only change from the default adaptor.\n                if(self.getMediaSourceId()) {\n                    video_constraints.mandatory.chromeMediaSourceId = self.getMediaSourceId();\n                }\n\n                self.getRtcLibrary().getUserMedia({\n                    video: video_constraints\n                }, function(stream) {\n                    var mediaInfo = self.replaceVideoStream(self.getLocalMedia().stream, stream),\n                        oldStream = self.getScreenStream();\n\n                    // If there is an old screen stream, just stop it but prevent the stop from happening\n                    if(oldStream) {\n                        oldStream.getVideoTracks()[0].onended = null;\n                        self.getRtcLibrary().stopStream(oldStream);\n                    }\n\n                    stream.getVideoTracks()[0].onended = onEnded;\n                    self.setScreenStream(stream);\n\n                    logger.debug('user granted access to local media.');\n                    _utils.callFunctionIfExist(onSuccess, mediaInfo);\n\n                }, function() {\n                    logger.debug('Failed to get access to screen media.');\n                    _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_ALLOWED);\n                }, onEnded);\n            } else {\n                _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_FOUND);\n            }\n        });\n    };\n\n    compose(_super, self);\n    compose(_model, self);\n\n    logger.debug('WebRtcChromeAdaptor initialized');\n}\n","import CONSTANTS from '../../constants';\nimport {compose} from '../../utils';\n\nexport function WebRtcContainerAdaptorImpl({\n    base: _super,\n    model: _model,\n    LogManager: _logManager,\n    Utils: _utils,\n    SdpParser: _sdpParser,\n    Config: _config,\n    SdpPipeline: _sdpPipeline\n}) {\n    var self = this,\n        logger = _logManager.getLogger('WebRtcContainerAdaptorImpl');\n    logger.debug('WebRtcContainerAdaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.performVideoStartWorkaround = function(operation, call, onSuccess, onFail) {\n        var peer = call.peer,\n            remoteAudioState, remoteVideoState, callSdpWithNoSsrc, localSdp;\n\n        if (!_sdpParser.isSdpHasVideo(call.sdp)) {\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        logger.debug('Workaround to play video');\n\n        localSdp = call.stableLocalSdp ? call.stableLocalSdp : call.peer.localDescription.sdp;\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n\n        remoteAudioState = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        call.sdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        call.sdp = _sdpParser.updateVideoSdpDirectionToInactive(call.sdp);\n\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        // In Peer-Peer call, in order to remove remote stream properly,\n        // ssrc lines should be deleted so that workaround below will\n        // first remove the remote stream and then re-add it according to\n        // actuall call sdp.\n        // In Non Peer-Peer call, ther is no ssrc line in sdp so it is safe\n        // to keep method below.\n        callSdpWithNoSsrc = _sdpParser.deleteSsrcFromSdp(call.sdp);\n\n        logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + callSdpWithNoSsrc);\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, callSdpWithNoSsrc,\n            function pvswFirstSetRemoteDescriptionSuccessCallback() {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription success');\n\n                // restore original values\n                call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, remoteAudioState);\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, remoteVideoState);\n\n                logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + call.sdp);\n                self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n                    function pvswSecondSetRemoteDescriptionSuccessCallback() {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription success');\n                        peer.createAnswer(\n                            function pvswCreateAnswerSuccessCallback(obj) {\n                                if (remoteAudioState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                                }\n\n                                if (remoteVideoState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                                } else if (self.canOriginatorSendLocalVideo(call)) {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                                } else {\n                                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                                }\n\n                                obj.sdp = _sdpParser.checkAndRestoreICEParams(obj.sdp, call.sdp);\n\n                                obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n\n                                obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n\n                                obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                                logger.trace('performVideoStartWorkaround: Setting local description with (answer) SDP: ' + obj.sdp);\n                                peer.setLocalDescription(\n                                    self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, obj.sdp),\n                                    function pvswSetLocalDescriptionSuccessCallback() {\n                                        logger.debug('performVideoStartWorkaround: setlocalDescription success');\n                                        _utils.callFunctionIfExist(onSuccess);\n                                    },\n                                    function pvswSetLocalDescriptionFailureCallback(e) {\n                                        logger.debug('performVideoStartWorkaround: setlocalDescription failed!!' + e);\n                                        _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: setlocalDescription failed!!');\n                                    });\n                            },\n                            function pvswCreateAnswerFailureCallback(e) {\n                                logger.debug('performVideoStartWorkaround: createAnswer failed!! ' + e);\n                                _utils.callFunctionIfExist(onFail, 'Session cannot be created');\n                            });\n                    },\n                    function pvswSecondSetRemoteDescriptionFailureCallback(e) {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription failed!!' + e);\n                        _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: second setRemoteDescription failed!!');\n                    });\n            },\n            function pvswFirstSetRemoteDescriptionFailureCallback(e) {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: first setRemoteDescription failed!!');\n            });\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.createAnswer = function(call, successCallback, failureCallback, isVideoEnabled) {\n        logger.debug('createAnswer: isVideoEnabled= ' + isVideoEnabled + ' state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n        if(call.localMedia && call.localMedia.stream){\n            call.peer.addStream(call.localMedia.stream);\n        }\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.deleteFingerprintOrCrypto(call.sdp, self.isDtlsEnabled());\n\n        if (!_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n            // delete ssrc only from video, keep audio ssrc to hear audio\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        logger.trace('createAnswer: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n            function createAnswerSetRemoteDescriptionSuccessCallback() {\n                call.remoteVideoState = _sdpParser.getSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO);\n\n                peer.createAnswer(\n                    function(oSdp) {\n                        isVideoEnabled = isVideoEnabled && self.getVideoSourceAvailable() && _sdpParser.isSdpHasVideo(call.sdp);\n\n                        if (isVideoEnabled) {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                if (_sdpParser.getVideoSdpDirection(call.sdp) !== CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                                } else {\n                                    oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                                }\n                            }\n                        } else {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            } else {\n                                oSdp.sdp = _sdpParser.updateSdpDirection(oSdp.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n\n                        self.muteOnHold(call, false);\n\n                        // createAnswer generates an sdp without ice params\n                        // copy ice params to the local sdp\n                        // scenario: incoming video call from pcc in brokeronly config\n                        oSdp.sdp = _sdpParser.checkAndRestoreICEParams(oSdp.sdp, call.sdp);\n\n                        oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                        logger.trace('createAnswer: Setting local description with (answer) SDP: ' + oSdp.sdp);\n\n                        oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n                        peer.setLocalDescription(\n                            self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, oSdp.sdp),\n                            function createAnswerSetLocalDescriptionSuccessCallback() {\n                                if (_config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE && call.supportTrickle) {\n                                    _utils.callFunctionIfExist(successCallback, oSdp.sdp);\n                                }\n                                // ELSE due to stun requests, successCallback will be called by onIceCandidate()\n                            },\n                            function createAnswerSetLocalDescriptionFailureCallback(e) {\n                                logger.error('createAnswer: setLocalDescription failed : ' + e);\n                                _utils.callFunctionIfExist(failureCallback, 'createNativeAnswer setLocalDescription failed');\n                            });\n                    },\n                    function createAnswerFailureCallback(e) {\n                        logger.error('createAnswer: failed!! Error: ' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                    });\n            },\n            function createAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('createAnswer: setremotedescription failed!! Error: ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'createAnswer setRemoteDescription failed');\n            });\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.processHold = function(call, hold, local_hold_status, successCallback, failureCallback) {\n        logger.debug('processHold: local hold= ' + local_hold_status + ' remote hold= ' + hold + ' state= ' + call.peer.signalingState);\n        var peer,\n            audioDirection, videoDirection,\n            peerLocalSdp, inactiveRemoteSdp, remoteSdp;\n        peerLocalSdp = call.stableLocalSdp;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        audioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        videoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (!local_hold_status && !hold) {\n            self.muteOnHold(call, false);\n        }\n\n        //we need to do something in this case because the remove might offer active or passive but chrome does not allow that\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        // This is required for PCC and meetme with video.\n        // PCC and meetme(Media Server) not supperted VP8/VP9 codec.\n        // so video calls can not be established\n        // local video should be set to false\n        if (!(_sdpParser.isVideoCodecsSupported(call.sdp, self.isH264Enabled())) && !(_sdpParser.isSdpHasVP8Codec(call.sdp)) && (call.sdp.indexOf(CONSTANTS.SDP.M_LINE + CONSTANTS.STRING.VIDEO + ' 0 ', 0) === -1)) {\n            self.setOriginatorSendLocalVideo(call, call.sdp, false);\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n\n        // chrome38 fix\n        inactiveRemoteSdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        inactiveRemoteSdp = _sdpParser.updateVideoSdpDirectionToInactive(inactiveRemoteSdp);\n\n        if(self.needNewPeer(call, true, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        if (_sdpParser.isSdpHasVideo(call.prevRemoteSdp) && (!_sdpParser.isSdpHasVideo(call.sdp))) {\n            self.setOriginatorSendLocalVideo(call, call.sdp, false);\n        }\n\n        inactiveRemoteSdp = _sdpParser.deleteSsrcFromSdp(inactiveRemoteSdp);\n\n        // 1st setRemoteDescription to make webrtc remove the audio and/or video streams\n        // 2nd setRemote will add the audio stream back so that services like MOH can work\n        // This code will also run in UnHold scenario, and it will remove & add video stream\n        logger.trace('processHold: Setting remote description with (offer) SDP: ' + inactiveRemoteSdp);\n\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, inactiveRemoteSdp, function processHoldSetFirstRemoteDescriptionSuccessCallback() {\n            remoteSdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n\n            if (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n                _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n                remoteSdp = _sdpParser.deleteInactiveVideoSsrc(remoteSdp);\n            }\n            logger.trace('processHold: Setting remote description with (offer) SDP: ' + remoteSdp);\n\n            self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, remoteSdp, function processHoldSetSecondRemoteDescriptionSuccessCallback() {\n                if (!hold && !local_hold_status && (videoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE)) {\n                    call.remoteVideoState = CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n                } else {\n                    call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                }\n                peer.createAnswer(function processHoldCreateAnswerSuccessCallback(obj) {\n                    logger.debug('processHold: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp));\n                    logger.debug('processHold: isSdpEnabled video= ' + _sdpParser.isVideoSdpEnabled(obj.sdp));\n\n                    if (hold) {\n                        logger.debug('processHold: Remote HOLD');\n                        obj.sdp = _sdpParser.respondToRemoteSdpDirections(obj.sdp, call.sdp);\n                    } else if (!local_hold_status) {\n                        logger.debug('processHold: Remote UNHOLD: direction left as it is');\n\n                        if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                            if (self.canOriginatorSendLocalVideo(call)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            }\n                        } else {\n                            if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n                        //change audio's direction to sendrecv for ssl attendees in a 3wc\n                        obj.sdp = _sdpParser.changeDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n                    } else if (local_hold_status && !hold) {\n                        logger.debug('processHold: Remote UNHOLD on local hold');\n\n                        if (audioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                            obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                        } else {\n                            obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        }\n\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                        }\n                    }\n\n                    obj.sdp = _sdpParser.updateVersion(peerLocalSdp, obj.sdp);\n                    obj.sdp = _sdpParser.checkIceParamsLengths(obj.sdp, call.sdp);\n                    obj.sdp = _sdpParser.checkAndRestoreICEParams(obj.sdp, call.sdp);\n                    if (_sdpParser.isSdpHasVideoWithZeroPort(obj.sdp) && self.getDefaultVideoContainer()) {\n                        self.useDefaultRenderer(false, false, false);\n                    }\n\n                    //This one is important because the remote party might have offered pasive or active, but we had set it to actpass so that chrome works.\n                    obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n\n                    //TODO This is not in the normal webrtc adapter\n                    obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                    obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, obj.type);\n\n                    logger.trace('processHold: Setting local description with SDP: ' + obj.sdp);\n                    peer.setLocalDescription(obj, function processHoldSetLocalDescriptionSuccessCallback() {\n                        logger.debug('processHold: setLocalDescription success!! ' + 'iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n\n                        if (call.supportTrickle) {\n                            // Trickle ICE is supported; continue processing the operation right away.\n                            _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                        } else {\n                            // Need to wait for ICE gathering to finish.\n                            if (peer.iceGatheringState === 'complete') {\n                                // ICE gathering is already done; continue processing the operation right away.\n                                logger.debug('processHold iceGatheringState completed ' + peer.localDescription.sdp);\n                                _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                            } else {\n                                /**\n                                 * We need to wait for ICE gathering to finish. The operation should continue\n                                 *    being processed when ICE is done (onIceComplete listener), which should\n                                 *    use the call.successCallback function.\n                                 */\n                                logger.debug('Waiting for ICE gathering to complete.');\n                            }\n                        }\n                    }, function processHoldSetLocalDescriptionFailureCallback(e) {\n                        logger.error('processHold: setLocalDescription failed!! ' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                    });\n                }, function processHoldCreateAnswerFailureCallback(e) {\n                    logger.error('processHold: createAnswer failed!!: ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processHoldSetSecondRemoteDescriptionFailureCallback(e) {\n                logger.error('processHold: second setRemoteDescription failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function processHoldSetFirstRemoteDescriptionFailureCallback(e) {\n            logger.debug('processHold: first setRemoteDescription failed!! ' + e);\n            _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n        });\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.processUpdate = function(call, successCallback, failureCallback) {\n        logger.debug('processUpdate: state= ' + call.peer.signalingState);\n        var peer,\n            remoteAudioState, remoteVideoState, remoteVideoDirection, callSdpWithNoSsrc,\n            localDescObj, peerLocalSdp;\n        peerLocalSdp = call.stableLocalSdp;\n\n        // Meetme workaround\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE &&\n          call.currentState === 'COMPLETED') {\n            switch (call.remoteVideoState) {\n            case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n            case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                break;\n            case CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                break;\n            }\n        }\n\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        //this part is a work-around for webrtc bug\n        //set remote description with inactive media lines first.\n        //then set remote description with original media lines.\n\n        //keep original values of remote audio and video states\n        remoteAudioState = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        // delete all ssrc lines from the sdp before setting first remote description\n        // set second remote description with all ssrc lines included\n        if (remoteVideoState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            remoteVideoState === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        if(self.needNewPeer(call, true, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        //Since Chrome does not support offer with anything else than actpass, we need to set it.\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        //set media lines with inactive state for workaround\n        call.sdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        call.sdp = _sdpParser.updateVideoSdpDirectionToInactive(call.sdp);\n\n        callSdpWithNoSsrc = _sdpParser.deleteSsrcFromSdp(call.sdp);\n\n        logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + callSdpWithNoSsrc);\n\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, callSdpWithNoSsrc, function processUpdateWorkaroundSetRemoteDescriptionSuccessCallback() {\n            logger.debug('processUpdate: workaround setRemoteDescription success');\n\n            //restore original values\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, remoteAudioState);\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, remoteVideoState);\n            logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + call.sdp);\n\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processUpdateSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processUpdate: setRemoteDescription success');\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n                peer.createAnswer(function processUpdateCreateAnswerSuccessCallback(obj) {\n                    logger.debug('processUpdate: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp));\n                    logger.debug('processUpdate: isSdpEnabled video= ' + _sdpParser.isVideoSdpEnabled(obj.sdp));\n\n                    if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                        }\n                    } else {\n                        if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                        }\n                    }\n                    obj.sdp = _sdpParser.updateVersion(peerLocalSdp, obj.sdp);\n                    obj.sdp = _sdpParser.checkIceParamsLengths(obj.sdp, call.sdp);\n\n                    //This is important because we changed the remote role to actpass for chrome.\n                    obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n                    obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                    obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                    localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, obj.sdp);\n\n                    logger.trace('processUpdate: Setting local description with (answer) SDP: ' + obj.sdp);\n                    peer.setLocalDescription(localDescObj, function processUpdateSetLocalDescriptionSuccessCallback() {\n                        logger.debug('processUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                        if (call.supportTrickle) {\n                            _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                        } else if (peer.iceGatheringState === 'complete') {\n                            if (call.successCallback) {\n                                logger.debug('processUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                                _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                            }\n                        }\n                    }, function processUpdateSetLocalDescriptionSuccessCallback(e) {\n                        logger.debug('processUpdate: setlocalDescription failed!!' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'processUpdate: setlocalDescription failed!!');\n                    });\n                }, function processUpdateCreateAnswerFailureCallback(e) {\n                    logger.debug('processUpdate: createAnswer failed!! ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processUpdateSetRemoteDescriptionSuccessCallback(e) {\n                logger.debug('processUpdate: setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(failureCallback, 'processUpdate: setRemoteDescription failed!!');\n            });\n        }, function processUpdateWorkaroundSetRemoteDescriptionSuccessCallback(e) {\n            logger.debug('processUpdate: workaround setRemoteDescription failed!!' + e);\n            _utils.callFunctionIfExist(failureCallback, 'processUpdate: workaround setRemoteDescription failed!!');\n        });\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.processAnswer = function(call, onSuccess, onFail) {\n        logger.debug('processAnswer: state= ' + call.peer.signalingState);\n        var onSuccessAfterWorkarounds, setRemoteDescription,\n            remoteVideoDirection, localVideoDirection,\n            peer = call.peer,\n            origSdp;\n\n        onSuccessAfterWorkarounds = function() {\n            call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        setRemoteDescription = function(operation, call, onSuccess, onFailure) {\n            logger.trace('processAnswer: Setting remote description with (answer) SDP: ' + call.sdp);\n            self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function() {\n                    logger.debug('processAnswer: setRemoteDescription success');\n                    onSuccess();\n                },\n                function(e) {\n                    logger.error('processAnswer: setRemoteDescription failed: ' + e);\n                    onFailure();\n                });\n        };\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, peer.localDescription.sdp, self.isH264Enabled());\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n\n        if (peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.HAVE_REMOTE_PRANSWER) {\n\n            if (_sdpParser.isIceLite(call.prevRemoteSdp) !== _sdpParser.isIceLite(call.sdp)) {\n                logger.debug('ice - ice-lite change.');\n                onFail(CONSTANTS.WEBRTC.ERROR.ICE_ICELITE);\n                return;\n            }\n\n            origSdp = call.sdp;\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            logger.debug('call processPrAnswer again to trigger on remote stream added with updated sdp.');\n            self.processPreAnswer(call,\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer success callback. Restore original sdp.');\n                    setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n                },\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer failure callback. Restore original sdp.');\n                    setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n                }\n            );\n            return;\n        }\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n        localVideoDirection = _sdpParser.getVideoSdpDirection(call.peer.localDescription.sdp);\n\n        // this is needed for buggy webrtc api. when term answers with video to audio only call\n        // this scenario does not work without converting to sendrecv\n        logger.debug('processAnswer: ice-lite: do remote video escalation');\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        if ((localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY || localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY)) {\n\n            // delete ssrc only from video, keep audio ssrc to hear audio\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n\n            // Audio <--> Audio : apply workaround step 1\n\n            setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n\n        } else if (localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE)) {\n\n            // Audio  <--> Audio-Video\n\n            setRemoteDescription(null, call, function() {\n                self.performVideoStartWorkaround(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n            }, onFail);\n\n        } else {\n\n            // Audio-Video <--> Audio-Video\n            // there is remote video, no need for orig side workaround\n\n            setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n        }\n\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.processRespond = function(call, onSuccess, onFail, isJoin) {\n        var remoteVideoDirection, callSdpWithNoSsrc,\n            peer = call.peer,\n            remoteSdpHasVideo = false;\n\n        logger.debug('processRespond: state= ' + call.peer.signalingState);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        remoteSdpHasVideo = _sdpParser.isSdpHasVideo(call.sdp);\n\n        if (remoteSdpHasVideo) {\n            call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n            remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n            if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n                switch (call.remoteVideoState) {\n                case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n                case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                    call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                    break;\n                }\n            }\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n        }\n\n        if (isJoin) {\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n            self.muteOnHold(call, false);\n        }\n\n        // delete all ssrc lines from the sdp before setting first remote description\n        // set second remote description with all ssrc lines included\n\n        if (remoteSdpHasVideo && (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n                _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY)) {\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        callSdpWithNoSsrc = _sdpParser.deleteSsrcFromSdp(call.sdp);\n\n        logger.trace('processRespond: Setting remote description with (answer) SDP: ' + callSdpWithNoSsrc);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.RESPOND, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, callSdpWithNoSsrc, function() {\n            logger.debug('processRespond: setRemoteDescription success');\n            var onSuccessAfterWorkarounds = function() {\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                _utils.callFunctionIfExist(onSuccess);\n            };\n            self.performVideoStartWorkaround(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n        }, function(e) {\n            logger.debug('processRespond: setRemoteDescription failed: ' + e);\n            _utils.callFunctionIfExist(onFail);\n        });\n    };\n\n    // Container implementation lies on webRtcContainerAdaptor.js\n    self.processHoldRespond = function(call, onSuccess, onFailure, isJoin) {\n        var remoteAudioDirection,\n            remoteVideoDirection,\n            onSuccessAfterWorkaround,\n            localHoldFlag = false,\n            remoteHoldFlag = false;\n\n        onSuccessAfterWorkaround = function() {\n            //call.remoteVideoState = getSdpDirection(call.sdp, video);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        if(self.needNewPeer(call, false)) {\n            self.createNewPeerForCall(call);\n        }\n\n        logger.debug('processHoldRespond: state= ' + call.peer.signalingState + ' call.currentState= ' + call.currentState);\n\n        _sdpParser.init(call.sdp);\n\n        remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        var isHold = remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n\n        var operation = isHold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            logger.trace('processHoldRespond: onRemoteStreamAdded');\n            self.onRemoteStreamAdded(call);\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFailure);\n            return;\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n        remoteHoldFlag = _sdpParser.isRemoteHold();\n\n        localHoldFlag = (call.currentState === 'LOCAL_HOLD');\n\n        call.remoteVideoState = remoteVideoDirection;\n\n        logger.debug('processHoldRespond: localHold= ' + localHoldFlag + ' remoteHold= ' + remoteHoldFlag);\n\n        /* Required for MOH - start */\n        if (remoteHoldFlag === false) {\n            if ((remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) && (call.currentState === 'REMOTE_HOLD')) {\n                logger.debug('set current web state to COMPLETED');\n                call.previousState = call.currentState;\n                call.currentState = 'COMPLETED';\n            }\n        } else {\n            if (call.currentState === 'COMPLETED') {\n                logger.debug('set current web state to REMOTE_HOLD');\n                call.previousState = call.currentState;\n                call.currentState = 'REMOTE_HOLD';\n            }\n        }\n\n        if (localHoldFlag || remoteHoldFlag) {\n            logger.debug('processHoldRespond: ' + call.currentState + ' : video -> inactive');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n        }\n\n        if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n            logger.debug('processHoldRespond: video inactive -> recvonly');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n        /* Required for MOH - end */\n\n        if (isJoin) {\n            self.muteOnHold(call, false);\n        }\n\n        // this is required for displaying remote video when direction is send only\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n        if (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        if (localHoldFlag && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Audio');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        }\n\n        if (localHoldFlag && remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Video');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n        }\n\n        // If we have a configuration to force disable media on hold we tell chrome that the other side is inactive this will\n        // prevent chrome from sending noise even after being muted.\n        if (localHoldFlag && _config.forceDisableMediaOnHold && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            logger.debug('processHoldRespond: Changing remote direction from recvonly to inactive');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n            remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        }\n\n        if (isHold) {\n            logger.debug('processHoldRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n            self.setRemoteDescription(operation, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function processHoldRespondSetRemoteDescriptionSuccessCallback() {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns success');\n                    onSuccessAfterWorkaround();\n                },\n                function processHoldRespondSetRemoteDescriptionFailureCallback(e) {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns failed: ' + e);\n                    _utils.callFunctionIfExist(onFailure);\n                }\n            );\n        } else {\n            self.setRemoteDescription(null, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function processHoldRespondSetRemoteDescriptionSuccessCallback() {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns success');\n                    self.performVideoStartWorkaround(operation, call, onSuccessAfterWorkaround, onFailure);\n                },\n                function processHoldRespondSetRemoteDescriptionFailureCallback(e) {\n                    logger.debug('processHoldRespond: setRemoteDescription typeAns failed: ' + e);\n                    _utils.callFunctionIfExist(onFailure);\n                }\n            );\n        }\n    };\n\n    logger.debug('WebRtcContainerAdaptor initialized');\n}\n","import CONSTANTS from '../../constants';\nimport {getInteger, compose} from '../../utils';\nimport constants from '../../constants';\n\nexport function WebRtcFirefoxAdaptorImpl({\n    base: _super,\n    mode: _model,\n    LogManager: _logManager,\n    Utils: _utils,\n    SdpParser: _sdpParser,\n    Config: _config,\n    SdpPipeline: _sdpPipeline\n}) {\n    var self = this,\n        logger = _logManager.getLogger('WebRtcFirefoxAdaptorImpl'),\n        peerId = 0;\n    logger.debug('WebRtcFirefoxAdaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    // firefoxPerformSdpWorkaroundsBeforeProcessingIncomingSdp\n    self.performSdpWorkaroundsBeforeProcessingIncomingSdp = function(sdp) {\n        sdp = _sdpParser.updateH264LevelTo42E01F(sdp, self.isH264Enabled());\n        sdp = _sdpParser.deleteBandwidthLineFromSdp(sdp);\n        sdp = _sdpParser.addRtpmapForPCMU(sdp);\n        sdp = _sdpParser.addRtpmapForPCMA(sdp);\n        sdp = _sdpParser.removeG722Codec(sdp);\n        sdp = _sdpParser.setOpusCodecToLowerCase(sdp);\n        return sdp;\n    };\n\n    // firefoxCreateOffer\n    self.createOffer = function(call, successCallback, failureCallback, sendInitialVideo, offerToReceiveVideo) {\n        logger.debug('createOffer: sendInitialVideo= ' + sendInitialVideo + ' state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n        if(call.localMedia && call.localMedia.stream){\n            call.peer.addStream(call.localMedia.stream);\n        }\n\n        peer.createOffer(\n            function createOfferSuccessCallback(oSdp) {\n                sendInitialVideo = sendInitialVideo && self.getVideoSourceAvailable();\n                if (sendInitialVideo) {\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else {\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n\n                oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n\n                oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n\n                oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n                oSdp.sdp = _sdpParser.setTcpSetupAttribute(oSdp.sdp, 'actpass');\n\n                oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n                oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n                oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                logger.trace('createOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n                peer.setLocalDescription(\n                    self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp),\n                    function createOfferSetLocalDescriptionSuccessCallback() {\n                        if (_config.trickleIceSupport === CONSTANTS.TRICKLE.FULL) {\n                            _utils.callFunctionIfExist(successCallback, oSdp.sdp);\n                        }\n                        // ELSE due to stun requests, successCallback will be called by onIceCandidate()\n                    },\n                    function createOfferSetLocalDescriptionFailureCallback(error) {\n                        logger.error('createOffer: setLocalDescription failed : ' + error);\n                        _utils.callFunctionIfExist(failureCallback, 'createOffer: setLocalDescription failed');\n                    });\n            },\n            function createOfferFailureCallback(e) {\n                logger.error('createOffer: createOffer failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            }, { offerToReceiveVideo: offerToReceiveVideo ? 1 : 0 });\n    };\n\n    // firefoxCreateReOffer\n    self.createReOffer = function(call, onSuccess, onFailure, usePreviousMediaDirection) {\n        var peer = call.peer,\n            localDescObj, localAudioDirection, localVideoDirection,\n            prevLocalSdp = call.stableLocalSdp,\n            deleteVideoStream = false;\n\n        logger.debug('createReOffer:' + call.id);\n\n        if (!usePreviousMediaDirection) {\n            deleteVideoStream = !call.initialVideoState && _sdpParser.isSdpHasVideo(call.stableLocalSdp);\n        }\n\n        self.createNewPeerForCall(call, deleteVideoStream);\n        peer = call.peer;\n\n        peer.createOffer(\n            function createReOfferCreateOfferSuccessCallback(oSdp) {\n\n                if (usePreviousMediaDirection) {\n                    localAudioDirection = _sdpParser.getAudioSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateAudioSdpDirection(oSdp.sdp, localAudioDirection);\n                    localVideoDirection = _sdpParser.getVideoSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, localVideoDirection);\n                }\n\n                oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n                oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n                oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n                oSdp.sdp = _sdpParser.setTcpSetupAttribute(oSdp.sdp, 'actpass');\n                oSdp.sdp = _sdpParser.updateVersion(prevLocalSdp, oSdp.sdp);\n                oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n                oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n                oSdp.sdp = _sdpParser.setTrickleOption(oSdp.sdp, _config.trickleIceSupport !== CONSTANTS.TRICKLE.NONE);\n\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.REOFFER, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp);\n\n                logger.trace('createReOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n                peer.setLocalDescription(localDescObj, function createReOfferSetLocalDescriptionSuccessCallback() {\n                    logger.debug('createReOffer: setLocalDescription success' + call.id);\n                    if (_config.trickleIceSupport === CONSTANTS.TRICKLE.FULL) {\n                        _utils.callFunctionIfExist(onSuccess, oSdp.sdp);\n                    }\n                }, function createReOfferSetLocalDescriptionFailureCallback(e) {\n                    logger.debug('createReOffer: setLocalDescription failed!!' + e + call.id);\n                    _utils.callFunctionIfExist(onFailure);\n                });\n            },\n            function createReOfferCreateOfferFailureCallback(e) {\n                logger.error('createReOffer: createOffer failed!! ' + e);\n                _utils.callFunctionIfExist(onFailure);\n            });\n    };\n\n    // firefoxProcessAnswer\n    self.processAnswer = function(call, successCallback, failureCallback) {\n        var peer = call.peer;\n        logger.debug('processAnswer: state= ' + peer.signalingState);\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, peer.localDescription.sdp, self.isH264Enabled());\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n\n        call.sdp = _sdpPipeline(call.id, call.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_REMOTE, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n        logger.trace('processAnswer: Setting remote description with (answer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.ANSWER_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n            function processAnswerSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processAnswer: setRemoteDescription success');\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                _utils.callFunctionIfExist(successCallback);\n            },\n            function processAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('processAnswer: setRemoteDescription failed: ' + e.message);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n    };\n\n    // firefoxRevertRtcState\n    self.revertRtcState = function(call, successCallback) {\n        //no need to create new peer to handle revertRtc case. Peer will be handled after retryAfter period.\n\n        // TODO: Setting timeout to 0 skips the problem of successive holds without glare condition\n        // A real solution have to be found\n        setTimeout(function() {\n            _utils.callFunctionIfExist(successCallback, call);\n        }, 0);\n    };\n\n    // firefoxCreateHoldUpdate\n    self.createHoldUpdate = function(call, hold, remote_hold_status, successCallback, failureCallback) {\n        logger.debug('createHoldUpdate: local hold= ' + hold + ' remote hold= ' + remote_hold_status + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localDescObj,\n            localSdp,\n            createHoldUpdate,\n            hasActiveVideo;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        createHoldUpdate = function() {\n            localSdp = call.stableLocalSdp;\n\n            self.createNewPeerForCall(call);\n            peer = call.peer;\n\n            peer.createOffer(function createHoldUpdateCreateOfferSuccessCallback(obj) {\n\n                if (hold) {\n                    if (!remote_hold_status) {\n                        obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    } else {\n                        obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                        obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                    }\n                } else if (remote_hold_status) {\n                    obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else {\n                    obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                    if (self.canOriginatorSendLocalVideo(call)) {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                    } else {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                    }\n                }\n                obj.sdp = self.updateCodecs(call, obj.sdp);\n                obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n                obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n                obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, 'actpass');\n                obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n                obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n                logger.trace('createHoldUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n                peer.setLocalDescription(localDescObj, function createHoldUpdateSetLocalDescriptionSuccessCallback() {\n                    logger.debug('createHoldUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                    if (call.supportTrickle) {\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    } else if (peer.iceGatheringState === 'complete') {\n                        if (call.successCallback) {\n                            logger.debug('createHoldUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                            _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                        }\n                    }\n                }, function createHoldUpdateSetLocalDescriptionFailureCallback(error) {\n                    logger.error('createHoldUpdate: setLocalDescription failed: ' + error.message);\n                    _utils.callFunctionIfExist(failureCallback);\n                });\n            }, function createHoldUpdateCreateOfferFailureCallback(error) {\n                logger.error('createHoldUpdate: createOffer failed: ' + error.message);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n        };\n\n        hasActiveVideo = _sdpParser.isSdpHasVideo(call.sdp) &&\n            !_sdpParser.isVideoSdpDirectionInactive(call.stableLocalSdp);\n\n        if (!call.isVideoSourceAllowed && hasActiveVideo) {\n\n            // TODO: This should not be done here just for code consistency\n            self.getUserMedia({\n                onSuccess: function (mediaInfo) {\n                    self.storeLocalStreamToCall(call, mediaInfo.id);\n                    call.isVideoSourceAllowed = mediaInfo.video;\n                    createHoldUpdate();\n                }, onFailure: function () {\n                    _utils.callFunctionIfExist(failureCallback);\n                }, options: {\n                    audioConstraints: true,\n                    videoConstraints: true\n                }});\n        } else {\n            if (hasActiveVideo) {\n                call.isVideoSourceAllowed = true;\n            }\n            createHoldUpdate();\n        }\n    };\n\n    // firefoxProcessHold\n    self.processHold = function(call, hold, local_hold_status, successCallback, failureCallback) {\n        logger.debug('processHold: local hold= ' + local_hold_status + ' remote hold= ' + hold + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            audioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n\n        if (!local_hold_status && !hold) {\n            self.muteOnHold(call, false);\n        }\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null);\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        if(self.needNewPeer(call, true, true)) {\n            self.createNewPeerForCall(call);\n        }\n\n        peer = call.peer;\n\n        logger.trace('processHold: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processHoldSetRemoteDescriptionSuccessCallback() {\n            peer.createAnswer(function (obj) {\n                if (hold) {\n                    logger.debug('processHold: Remote HOLD');\n                    obj.sdp = _sdpParser.respondToRemoteSdpDirections(obj.sdp, call.sdp);\n                } else if (!local_hold_status) {\n                    logger.debug('processHold: Remote UNHOLD: direction left as it is');\n\n                    if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                        }\n                    } else {\n                        if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                        }\n                    }\n                    //change audio's direction to sendrecv for ssl attendees in a 3wc\n                    obj.sdp = _sdpParser.changeDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n                } else if (local_hold_status && !hold) {\n                    logger.debug('processHold: Remote UNHOLD on local hold');\n\n                    if (audioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                        obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                    } else {\n                        obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    }\n\n                    if (self.canOriginatorSendLocalVideo(call)) {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    } else {\n                        obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                    }\n                }\n\n                obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n                obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n                obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                logger.trace('processHold: Setting local description with SDP: ' + obj.sdp);\n\n                obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, obj.type);\n\n                peer.setLocalDescription(obj, function processHoldSetLocalDescriptionSuccessCallback() {\n                    logger.debug('processHold: setLocalDescription succeeded');\n                    if (call.supportTrickle) {\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                }, function processHoldSetLocalDescriptionFailureCallback(e) {\n                    logger.error('processHold: setLocalDescription failed!! ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function () {\n                logger.debug('processHold: createAnswer failed!!');\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function processHoldSetRemoteDescriptionFailureCallback(e) {\n            logger.error('processHold: setRemoteDescription failed: ' + e.message);\n            _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n        });\n    };\n\n    // firefoxProcessHoldRespond\n    self.processHoldRespond = function(call, onSuccess, onFailure, isJoin) {\n        var remoteAudioDirection,\n            remoteVideoDirection,\n            localHoldFlag = false,\n            remoteHoldFlag = false;\n\n        logger.debug('processHoldRespond: state= ' + call.peer.signalingState + ' call.currentState= ' + call.currentState);\n\n        if(self.needNewPeer(call, false)) {\n            self.createNewPeerForCall(call);\n        }\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, call, null, null, call.sdp, onSuccess, onFailure);\n            return;\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n        _sdpParser.init(call.sdp);\n        remoteHoldFlag = _sdpParser.isRemoteHold();\n\n        localHoldFlag = (call.currentState === 'LOCAL_HOLD');\n\n        remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        call.remoteVideoState = remoteVideoDirection;\n\n        logger.debug('processHoldRespond: localHold= ' + localHoldFlag + ' remoteHold= ' + remoteHoldFlag);\n\n        /* Required for MOH - start */\n        if (remoteHoldFlag === false) {\n            if ((remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) && (call.currentState === 'REMOTE_HOLD')) {\n                logger.debug('set current web state to COMPLETED');\n                call.previousState = call.currentState;\n                call.currentState = 'COMPLETED';\n            }\n        } else {\n            if (call.currentState === 'COMPLETED') {\n                logger.debug('set current web state to REMOTE_HOLD');\n                call.previousState = call.currentState;\n                call.currentState = 'REMOTE_HOLD';\n            }\n        }\n\n        if (localHoldFlag || remoteHoldFlag) {\n            logger.debug('processHoldRespond: ' + call.currentState + ' : video -> inactive');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n        }\n\n        /* Required for MOH - end */\n\n        if (isJoin) {\n            self.muteOnHold(call, false);\n        }\n\n        // this is required for displaying remote video when direction is send only\n        // call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, video);\n\n        if (localHoldFlag && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Audio');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n\n        if (localHoldFlag && remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Video');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n\n        logger.trace('processHoldRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.HOLD, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n            function processHoldRespondSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processHoldRespond: setRemoteDescription typeAns success');\n                _utils.callFunctionIfExist(onSuccess);\n            },\n            function processHoldRespondSetRemoteDescriptionFailureCallback(e) {\n                logger.debug('processHoldRespond: setRemoteDescription typeAns failed: ' + e);\n                _utils.callFunctionIfExist(onFailure);\n            });\n    };\n\n    // firefoxCreateUpdate\n    self.createUpdate = function(call, successCallback, failureCallback, isVideoStart) {\n        logger.debug('createUpdate: isVideoStart= ' + isVideoStart + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localDesc;\n\n        self.createNewPeerForCall(call);\n        peer = call.peer;\n\n        peer.createOffer(function createUpdateCreateOfferSuccessCallback(obj) {\n            isVideoStart = isVideoStart && self.getVideoSourceAvailable();\n            if (isVideoStart) {\n                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                if (_sdpParser.isVideoSdpDirectionInactive(call.stableRemoteSdp)) {\n                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                } else {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n            }\n            obj.sdp = self.updateCodecs(call, obj.sdp);\n            obj.sdp = _sdpParser.updateVersion(call.stableLocalSdp, obj.sdp);\n            obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, 'actpass');\n            obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n            obj.sdp = _sdpParser.removeG722Codec(obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoFromSdp(obj.sdp, self.isDtlsEnabled());\n            obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n            obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n            obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n            logger.trace('createUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n            peer.setLocalDescription(localDesc, function createUpdateCreateOfferSetLocalDescriptionSuccessCallback() {\n                logger.debug('createUpdate: createOffer setLocalDescription success ');\n\n                // The above process un-mutes the client. We must ensure it continues to be muted if necessary.\n                if(call.audioMuted){\n                    logger.debug('video started while muted, re-mute the microphone');\n                    self.muteAudioTrack(call, true, false);\n                }\n\n                if (call.supportTrickle) {\n                    _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                }\n                // ELSE since the candidates have changed we will call the successCallback at onIceCandidate\n            }, function crateUpdateCreateOfferSetLocalDescriptionFailureCallback(e) {\n                logger.debug('createUpdate: createOffer setLocalDescription failed: ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n        }, function createUpdateCrateOfferFailureCallback(e) {\n            logger.debug('createUpdate: createOffer failed!!: ' + e);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    // firefoxProcessUpdate\n    self.processUpdate = function(call, successCallback, failureCallback) {\n        logger.debug('processUpdate: state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localDescObj, peerLocalSdp;\n        peerLocalSdp = call.stableLocalSdp;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        // Meetme workarounds\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n\n        self.createNewPeerForCall(call);\n        peer = call.peer;\n\n        //This is highly required for meetme on DTLS\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processUpdateSetRemoteDescriptionSuccessCallback() {\n            logger.debug('processUpdate: setRemoteDescription success');\n            call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n            peer.createAnswer(function processUpdateCreateAnswerSuccessCallback(obj) {\n                if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                    if (self.canOriginatorSendLocalVideo(call)) {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                    } else {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                    }\n                } else {\n                    if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    } else {\n                        obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                    }\n                }\n\n                obj.sdp = _sdpParser.updateVersion(peerLocalSdp, obj.sdp);\n                obj.sdp = _sdpParser.checkIceParamsLengths(obj.sdp, call.sdp);\n                obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, call.dtlsRole);\n                obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n                obj.sdp = _sdpParser.setTrickleOption(obj.sdp, call.supportTrickle);\n\n                obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, obj.sdp);\n\n                logger.trace('processUpdate: Setting local description with (answer) SDP: ' + obj.sdp);\n                peer.setLocalDescription(localDescObj, function processUpdateSetLocalDescriptionSuccessCallback() {\n                    logger.debug('processUpdate: setlocalDescription success');\n                    if (call.supportTrickle) {\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                    // ELSE since the candidates have changed we will call the successCallback at onIceCandidate\n                }, function processUpdateSetLocalDescriptionSuccessCallback(e) {\n                    logger.debug('processUpdate: setlocalDescription failed!!' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'processUpdate: setlocalDescription failed!!');\n                });\n            }, function processUpdateCreateAnswerFailureCallback(e) {\n                logger.debug('processUpdate: createAnswer failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function processUpdateSetRemoteDescriptionSuccessCallback(e) {\n            logger.debug('processUpdate: setRemoteDescription failed!!' + e);\n            _utils.callFunctionIfExist(failureCallback, 'processUpdate: setRemoteDescription failed!!');\n        });\n    };\n\n    // firefoxProcessRespond\n    self.processRespond = function(call, onSuccess, onFail, isJoin) {\n        var peer = call.peer;\n        logger.debug('processRespond: state= ' + call.peer.signalingState);\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, call.stableLocalSdp, self.isH264Enabled());\n\n        if (isJoin) {\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n            self.muteOnHold(call, false);\n        }\n\n        logger.trace('processRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp, function processRespondSetRemoteDescriptionSuccessCallback() {\n            logger.debug('processRespond: setRemoteDescription success');\n            call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n            _utils.callFunctionIfExist(onSuccess);\n        }, function processRespondSetRemoteDescriptionSuccessCallback(e) {\n            logger.debug('processRespond: setRemoteDescription failed: ' + e);\n            _utils.callFunctionIfExist(onFail);\n        });\n    };\n\n    // firefoxSendDTMF\n    self.sendDTMF = function(call, tone) {\n        var audioContext,\n            senders,\n            dtmfSender;\n\n        if (!_sdpParser.isSdpHasTelephoneEvent(call.peer.remoteDescription.sdp)) {\n            if (call.localMedia && call.localMedia.audioContext) {\n                audioContext = call.localMedia.audioContext;\n                self.sendInbandDTMF(call, tone, audioContext);\n            } else {\n                logger.debug('No local media to send DTMF');\n            }\n        } else {\n            senders = call.peer.getSenders();\n\n            if (senders) {\n                dtmfSender = senders[0].dtmf;\n                if (!dtmfSender) {\n                    logger.debug('Couldn\\'t find dtmf sender');\n                } else {\n                    dtmfSender.insertDTMF(tone, 400);\n                }\n            } else {\n                logger.debug('Senders in peer connection couldn\\'t be found');\n            }\n        }\n    };\n\n    // firefoxIceCandidateCollectionTimeoutHandler\n    self.iceCandidateCollectionTimeoutHandler = function(call) {\n        var sdp = call.peer.localDescription.sdp;\n        self.clearIceCandidateCollectionTimer(call);\n        if (_config.relayCandidateCollectionTimeoutCycle) {\n            call.relayCandidateCycle++;\n        }\n        sdp = _sdpParser.findZeroConnectionIPandModify(sdp);\n\n        // set timeout if there is no ice candidate available or\n        // when audio, video port assignment isn't complete\n        if (!_sdpParser.hasCandidates(sdp, call.relayCandidateCycle, _config.relayCandidateCollectionTimeoutCycle)) {\n            logger.debug('Re-setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n            call.iceCandidateCollectionTimer = setTimeout(function() {\n                self.iceCandidateCollectionTimeoutHandler(call);\n            }, _config.iceCandidateCollectionTimeoutInterval);\n            return;\n        }\n\n        if (call.successCallback) {\n            logger.debug('Ice candidate collection interrupted after given timeout, invoking successCallback.');\n            sdp = _sdpParser.deleteCurlyBracketsSDP(sdp);\n            if (!self.isH264Enabled()) {\n                sdp = _sdpParser.removeH264Codec(sdp);\n            }\n            if (!_sdpParser.isSdpHasUfrag(sdp)) {\n                sdp = _sdpParser.checkAndRestoreICEParams(sdp, call.stableLocalSdp);\n                logger.debug('Absent ufrag due to inactive video direction is restored from that in stable local sdp');\n            }\n            call.successCallback(sdp);\n        }\n    };\n\n    // firefoxSetupIceCandidateCollectionTimer\n    self.setupIceCandidateCollectionTimer = function(call) {\n        if (_config.iceCandidateCollectionTimeoutInterval) {\n            if (!call.iceCandidateCollectionTimer) {\n                logger.debug('Setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n                if (_config.relayCandidateCollectionTimeoutCycle) {\n                    call.relayCandidateCycle = 1;\n                }\n                call.iceCandidateCollectionTimer = setTimeout(function() {\n                    self.iceCandidateCollectionTimeoutHandler(call);\n                }, _config.iceCandidateCollectionTimeoutInterval);\n            } else {\n                logger.trace('Ice candidate collection timer exists.');\n            }\n        }\n    };\n\n    // firefoxOnIceCandidate\n    self.onIceCandidate = function(call, event) {\n        var sdp;\n        if (event.candidate === null) {\n            logger.debug('Null candidate received.');\n            if (call.successCallback) {\n                sdp = call.peer.localDescription.sdp;\n                self.clearIceCandidateCollectionTimer(call);\n                logger.debug('Candidates received, invoking successCallback.');\n\n                sdp = _sdpParser.deleteCurlyBracketsSDP(sdp);\n                if (!self.isH264Enabled()) {\n                    sdp = _sdpParser.removeH264Codec(sdp);\n                }\n                if (!_sdpParser.isSdpHasUfrag(sdp)) {\n                    sdp = _sdpParser.checkAndRestoreICEParams(sdp, call.stableLocalSdp);\n                    logger.debug('Absent ufrag due to inactive video direction is restored from that in stable local sdp');\n                }\n                call.successCallback(sdp);\n            }\n        } else {\n            logger.debug('ICE candidate received: sdpMLineIndex = ' + event.candidate.sdpMLineIndex +\n                ', candidate = ' + event.candidate.candidate + ' for call : ' + call.id);\n\n            // if successCallback haven't been cleared, candidates will be sent via successCallback\n            // otherwise candidates will be sent via updateIceCandidates request\n            if (!call.successCallback) {\n                if (!call.candidateArray) {\n                    call.candidateArray = [];\n                }\n                call.candidateArray.push(event.candidate);\n                self.updateCandidates(call);\n            }\n        }\n    };\n\n    // firefoxOnIceComplete\n    self.onIceComplete = function(call) {\n        var sdp;\n        logger.debug('All ICE candidates received for call : ' + call.id);\n        self.clearIceCandidateCollectionTimer(call);\n\n        if (call.successCallback) {\n            sdp = call.peer.localDescription.sdp;\n            sdp = _sdpParser.deleteCurlyBracketsSDP(sdp);\n            if (!self.isH264Enabled()) {\n                sdp = _sdpParser.removeH264Codec(sdp);\n            }\n            if (!_sdpParser.isSdpHasUfrag(sdp)) {\n                sdp = _sdpParser.checkAndRestoreICEParams(sdp, call.stableLocalSdp);\n                logger.debug('Absent ufrag due to inactive video direction is restored from that in stable local sdp');\n            }\n\n            logger.trace('onIceComplete sdp : ' + sdp);\n\n            call.successCallback(sdp);\n        }\n    };\n\n    self.createDataChannel = function(dataChannelWrapperObj, onSuccess, onFailure, options) {\n        try {\n            dataChannelWrapperObj.dataChannel = dataChannelWrapperObj.peer.createDataChannel(options);\n            onSuccess(dataChannelWrapperObj);\n        } catch (error) {\n            logger.error('Failed to create data channel, exception: ' + error.message);\n            onFailure(error);\n        }\n    };\n\n    // firefoxCreateNewPeerForCall\n    self.createNewPeerForCall = function(call, deleteVideoStream) {\n        var isNewPeerCreated = false,\n            oldPeer,\n            videoTrack;\n        if (call.peer) {\n            oldPeer = call.peer;\n            self.collectWebRtcStats(oldPeer,\n                function(stats) {\n                    logger.debug('collectWebRtcStats successfull');\n                    if (call.stats === undefined) {\n                        call.stats = [];\n                    }\n                    call.stats.push(stats);\n                    if (oldPeer.signalingState !== 'closed') {\n                        oldPeer.close();\n                    }\n                    self.setPeerCount(self.getPeerCount() - 1);\n                    call.dtmfSender = null;\n                },\n                function() {\n                    logger.debug('collectWebRtcStats failed');\n                    if (oldPeer.signalingState !== 'closed') {\n                        oldPeer.close();\n                    }\n                    self.setPeerCount(self.getPeerCount() - 1);\n                    call.dtmfSender = null;\n                });\n        }\n\n        logger.trace('Creating new peer for call: ' + call.id);\n\n        if(self.createPeer(call)){\n            logger.trace('New peer has created for call: ' + call.id);\n            if(call.localMedia && call.localMedia.stream){\n                if (deleteVideoStream) {\n                    videoTrack = call.localMedia.stream.getVideoTracks()[0];\n                    if(videoTrack) {\n                        call.localMedia.stream.removeTrack(videoTrack);\n                    } else {\n                        logger.debug('Designated to remove track after new'\n                            + ' peer creation, but no video track found.');\n                    }\n                }\n                call.peer.addStream(call.localMedia.stream);\n            }\n\n            isNewPeerCreated = true;\n        } else {\n            logger.error('New peer creation has failed!: ' + call.id);\n            if (call.stats) {\n                call.stats.pop();\n            }\n        }\n        return isNewPeerCreated;\n    };\n\n    // firefoxCreatePeer\n    self.createPeer = function(call) {\n        try {\n            var pc, constraints = {}, i, servers = [],\n                iceServerUrl, config, useIceServer;\n\n            useIceServer = !_config.ignoreIceParamsForServices || _config.ignoreIceParamsForServices.indexOf('call') !== -1;\n            logger.info('useIceServer: ' + useIceServer);\n            if (useIceServer) {\n                iceServerUrl = self.getIceServerUrl();\n            }\n\n            if (iceServerUrl instanceof Array) {\n                for (i = 0; i < iceServerUrl.length; i++) {\n                    iceServerUrl[i].urls = iceServerUrl[i].urls.replace('turns', 'turn');\n                    servers[i] = iceServerUrl[i];\n                }\n            } else if (!iceServerUrl || iceServerUrl === '') {\n                servers = [];\n            } else {\n                servers[0] = iceServerUrl;\n            }\n            config = {\n                iceServers: servers,\n                // NOTE: This is added temporarily because Chrome and Firefox have required set\n                // by default and the media broker doesn't support multiplexing. ADG-14986\n                rtcpMuxPolicy: 'negotiate'\n            };\n\n            // If present, take the call constraints provided as config.\n            if(_config.callConstraints && _config.callConstraints.firefox) {\n                // If any constraint is malformed, the RTCPeerConnection will fail to be created.\n                logger.debug('Using custom peer constraints for call.', _config.callConstraints.firefox);\n                constraints = _config.callConstraints.firefox;\n            }\n\n            constraints.optional = constraints.optional || [];\n            constraints.optional.push({\n                'DtlsSrtpKeyAgreement': self.isDtlsEnabled()\n            });\n\n            //Add iceTransportPolicy:relay in order to force TURN\n            if(_config.useRelayOnly) {\n                config.iceTransportPolicy = 'relay';\n            }\n\n            if (_config.bundlePolicy !== constants.WEBRTC.SDP.BUNDLE_POLICY.DISABLED) {\n                config.bundlePolicy = _config.bundlePolicy;\n            }\n\n            pc = self.getRtcLibrary().createRTCPeerConnection(config, constraints);\n            pc._peerId = peerId++;\n\n            if (call.peer) {\n                logger.debug(`createPeer - Peer Id: ${call.peer._peerId} - detaching old peer from call ${call.id}.`);\n\n                // Let's make sure we stop listening to any events from the old peer.\n                call.peer.onconnecting = undefined;\n                call.peer.onopen = undefined;\n                call.peer.onsignalingstatechange = undefined;\n                call.peer.onaddstream = undefined;\n                call.peer.onremovestream = undefined;\n                call.peer.onicecandidate = undefined;\n                call.peer.onicecomplete = undefined;\n                call.peer.oniceconnectionstatechange = undefined;\n                call.peer.ondatachannel = undefined;\n                call.peer.onicegatheringstatechange = undefined;\n\n                // Close the peer, it is no longer needed.\n                call.peer.close();\n            }\n\n            self.setPeerCount(self.getPeerCount() + 1);\n            call.peer = pc;\n\n            pc.onconnecting = function(event) {\n                self.onSessionConnecting(call, event);\n            };\n            pc.onopen = function(event) {\n                self.onSessionOpened(call, event);\n            };\n            pc.onsignalingstatechange = function(event) {\n                self.onSignalingStateChange(call, event);\n            };\n            pc.onaddstream = function(event) {\n                self.onRemoteStreamAdded(call, event);\n            };\n            pc.onremovestream = function(event) {\n                self.onRemoteStreamRemoved(call, event);\n            };\n            pc.onicecandidate = function(event) {\n                if (pc !== call.peer) {\n                    logger.error(`Peer Id: ${pc._peerId} - received notification from detached peer not on call (Other Peer id: ${call.peer._peerId} )`);\n                    return;\n                }\n                if (event.currentTarget.iceGatheringState === 'complete') {\n                    logger.debug(`Peer Id: ${pc._peerId} - ice gathering complete`);\n                    self.onIceComplete(call);\n                } else {\n                    self.setupIceCandidateCollectionTimer(call);\n                    self.onIceCandidate(call, event);\n                }\n            };\n            pc.onicecomplete = function() {\n                self.onIceComplete(call);\n            };\n            pc.oniceconnectionstatechange = function(event) {\n                self.oniceconnectionstatechange(call, event);\n            };\n            pc.ondatachannel = function(event) {\n                self.onDataChannel(call, event);\n            };\n\n            pc.onicegatheringstatechange = function() {\n                logger.debug(`Peer Id: ${pc._peerId} - ice gathering state change:` + pc.iceGatheringState);\n            };\n\n            logger.info(`Peer Id: ${pc._peerId} - create PeerConnection successfully.`);\n\n            // Will be commented-in after decision of necessary stats\n            // self.setupWebrtcLogCollectionTimer(call);\n\n            return true;\n        } catch (err) {\n            logger.error('Failed to create PeerConnection, exception: ' + err.message);\n        }\n        return false;\n    };\n\n    // firefoxgetCameraList\n    self.getCameraList = function() {\n        return;\n    };\n\n    // firefoxgetMicrophoneList\n    self.getMicrophoneList = function() {\n        return;\n    };\n\n    // firefoxgetSpeakerList\n    self.getSpeakerList = function() {\n        return;\n    };\n\n    self.getNativeWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getNativeWebRtcStats called mozilla');\n                call.peer.getStats(undefined, function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        _utils.callFunctionIfExist(onSuccess, stats);\n                    }\n                },\n                self.statsCallback);\n            }\n        } catch (err) {\n            logger.error('Failed to get all WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n    };\n\n    self.statsCallback = function(error) {\n        logger.debug('Mozilla statsCallback:' + error);\n    };\n\n    self.getWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getWebRtcStats called mozilla');\n                self.collectWebRtcStats(call.peer,\n                    function(stats) {\n                        var accumulatedStats = self.getAccumulatedWebRtcStats(call.stats, stats);\n                        _utils.callFunctionIfExist(onSuccess, accumulatedStats);\n                    },\n                    onFailure);\n            }\n        } catch (err) {\n            logger.error('Failed to get WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n        return self.getStats();\n    };\n\n    self.getAccumulatedWebRtcStats = function(statsList, currentStats) {\n        var i, accumulatedStats = {\n            audio: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                jitter: null,\n                rtt: null\n            },\n            video: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                rtt: null\n            }\n        };\n        if (statsList !== undefined) {\n            for (i = 0; i < statsList.length; i++) {\n                self.accumulateStats(accumulatedStats.audio, statsList[i].audio);\n                self.accumulateStats(accumulatedStats.video, statsList[i].video);\n            }\n        }\n\n        self.accumulateStats(accumulatedStats.audio, currentStats.audio);\n        accumulatedStats.audio.peerAddress = currentStats.audio.peerAddress;\n        accumulatedStats.audio.codec = currentStats.audio.codec;\n        accumulatedStats.audio.jitter = currentStats.audio.jitter;\n        accumulatedStats.audio.rtt = currentStats.audio.rtt;\n\n        self.accumulateStats(accumulatedStats.video, currentStats.video);\n        accumulatedStats.video.peerAddress = currentStats.video.peerAddress;\n        accumulatedStats.video.codec = currentStats.video.codec;\n        accumulatedStats.video.rtt = currentStats.video.rtt;\n\n        return accumulatedStats;\n    };\n\n    self.accumulateStats = function(accumulatedStatsObj, statsObj) {\n        accumulatedStatsObj.packetsSent += getInteger(statsObj.packetsSent);\n        accumulatedStatsObj.bytesSent += getInteger(statsObj.bytesSent);\n        accumulatedStatsObj.bytesReceived += getInteger(statsObj.bytesReceived);\n        accumulatedStatsObj.packetsLost += getInteger(statsObj.packetsLost) === -1 ? 0 : getInteger(statsObj.packetsLost);\n    };\n\n    self.collectWebRtcStats = function(peer, onSuccess, onFailure) {\n        try {\n            if (peer) {\n                logger.debug('collectWebRtcStats called mozilla');\n                peer.getStats(undefined, function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        self.setWebRtcStats(stats);\n                        _utils.callFunctionIfExist(onSuccess, self.getStats());\n                    }\n                },\n                self.statsCallback);\n            }\n        } catch (err) {\n            logger.error('Failed to collectWebRtcStats: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n        return self.getStats();\n    };\n\n    self.setWebRtcStats = function(results) {\n        var stats = {\n            audio: {\n                packetsSent: null,\n                bytesSent: null,\n                bytesReceived: null,\n                peerAddress: null,\n                codec: null,\n                packetsLost: null,\n                jitter: null,\n                rtt: null\n            },\n            video: {\n                packetsSent: null,\n                bytesSent: null,\n                bytesReceived: null,\n                peerAddress: null,\n                codec: null,\n                packetsLost: null,\n                rtt: null\n            }\n        };\n\n        results.forEach(function(result) {\n            if (result.type === 'remotecandidate') {\n\n                // The results from RTCPeerConnection.getStats need to be treated in a\n                // map-like fashion. Other usage has been deprecated.\n                // See: http://w3c.github.io/webrtc-pc/#rtcstatsreport-object\n                var currentStat = results.get(result.id);\n\n                if (currentStat.componentId !== undefined) {\n                    if (currentStat.componentId.indexOf('aLevel=0') > -1) {\n                        stats.audio.peerAddress = currentStat.ipAddress + ':' + currentStat.portNumber;\n                    } else if (currentStat.componentId.indexOf('aLevel=1') > -1) {\n                        stats.video.peerAddress = currentStat.ipAddress + ':' + currentStat.portNumber;\n                    }\n                }\n            }\n        });\n\n        if(stats.video.peerAddress === undefined || stats.video.peerAddress === null  ){\n            stats.video.peerAddress = stats.audio.peerAddress;\n        }\n\n        //audio\n        if (results.get('inbound_rtp_audio_0') !== undefined) {\n            stats.audio.bytesReceived = results.get('inbound_rtp_audio_0').bytesReceived;\n            stats.audio.packetsLost = results.get('inbound_rtp_audio_0').packetsLost;\n            stats.audio.jitter = results.get('inbound_rtp_audio_0').jitter;\n        }\n        if (results.get('outbound_rtp_audio_0') !== undefined) {\n            stats.audio.packetsSent = results.get('outbound_rtp_audio_0').packetsSent;\n            stats.audio.bytesSent = results.get('outbound_rtp_audio_0').bytesSent;\n        }\n        if (results.get('outbound_rtcp_audio_0') !== undefined) {\n            stats.audio.rtt = results.get('outbound_rtcp_audio_0').mozRtt;\n        }\n\n        if (results.get('inbound_rtp_video_1') !== undefined) {\n            stats.video.bytesReceived = results.get('inbound_rtp_video_1').bytesReceived;\n            stats.video.packetsLost = results.get('inbound_rtp_video_1').packetsLost;\n        }\n\n        if (results.get('outbound_rtp_video_1') !== undefined) {\n            stats.video.packetsSent = results.get('outbound_rtp_video_1').packetsSent;\n            stats.video.bytesSent = results.get('outbound_rtp_video_1').bytesSent;\n        }\n        if (results.get('outbound_rtcp_video_1') !== undefined) {\n            stats.video.rtt = results.get('outbound_rtcp_video_1').mozRtt;\n        }\n\n        self.setStats(stats);\n    };\n\n    logger.debug('WebRtcFirefoxAdaptor initialized');\n}\n","import {compose} from '../../utils';\nimport {mediaErrors} from '../../call/call';\n\nexport function WebRtcFirefoxEsrAdaptorImpl({\n    base: _super,\n    model: _model,\n    LogManager: _logManager,\n    Utils: _utils\n}) {\n    var self = this,\n        logger = _logManager.getLogger('WebRtcFirefoxEsrAdaptorImpl');\n    logger.debug('WebRtcFirefoxEsrAdaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    // firefoxEsrGetUserMedia\n    self.getUserMedia = function(params) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n            var mediaInfo, constraints = {\n                    audio: false,\n                    video: false\n                },\n                localMedia;\n            self.setMediaSources(mediaSourceInfo);\n\n            if (mediaSourceInfo) {\n                if (!mediaSourceInfo.audioSourceAvailable) {\n                    logger.debug('Failed to get access to local media.');\n                    _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_FOUND);\n                    return;\n                }\n            }\n\n            if (self.getVideoSourceAvailable()) {\n                constraints.video = params.options.videoConstraints;\n            }\n            if (self.getAudioSourceAvailable()) {\n                constraints.audio = params.options.audioConstraints;\n            }\n\n            logger.debug('getUserMedia - constraints: ', constraints);\n            self.getRtcLibrary().getUserMedia(constraints, function getUserMediaSuccessCallback(stream) {\n\n                localMedia = {\n                    audioContext: {\n                        close: function() {}\n                    },\n                    mediaStreamDestination: {\n                        disconnect: function() {}\n                    },\n                    stream: stream,\n                    originalStream: stream\n                };\n\n                self.setLocalMedia(localMedia);\n                self.getLocalStreamMap().add(localMedia.stream.id, localMedia);\n                self.setInitialized(true);\n\n                mediaInfo = {\n                    audio: constraints.audio,\n                    video: constraints.video,\n                    id: localMedia.stream.id,\n                    originalStream: stream,\n                };\n\n                logger.debug('user has granted access to local media: ', localMedia);\n                _utils.callFunctionIfExist(params.onSuccess, mediaInfo);\n            }, function getUserMediaFailureCallback(error) {\n                logger.debug('Failed to get access to local media. Error: ', error);\n                _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_ALLOWED);\n            });\n        });\n    };\n\n\n    // firefoxEsrSendDTMF\n    self.sendDTMF = function() {\n        logger.debug('DMTF IS ONLY SUPPORTED FOR  FIREFOX 40 AND NEWER VERSIONS');\n    };\n\n    logger.debug('WebRtcFirefoxEsrAdaptor initialized');\n}\n","import {compose, getInteger} from '../../utils';\nimport CONSTANTS from '../../constants';\nimport {mediaErrors} from '../../call/call';\nimport constants from '../../constants';\n\nexport function WebRtcPluginAdaptorImpl({\n    base: _super,\n    decorator: _decorator,\n    model: _model,\n    LogManager: _logManager,\n    Utils: _utils,\n    SdpParser: _sdpParser,\n    Cache: _cache,\n    Core: _fcs,\n    Config: _config,\n    SdpPipeline: _sdpPipeline\n}) {\n    var self = this,\n        logger = _logManager.getLogger('WebRtcPluginAdaptorImpl'),\n        peerId = 0;\n\n    logger.debug('WebRtcPluginAdaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    self.setPluginEnabled(true);\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.getLocalAudioTrack = function(peer) {\n        logger.debug('getLocalAudioTrack');\n\n        if (peer.localStreams && peer.localStreams.length > 0 && peer.localStreams.item(0).audioTracks) {\n            if (peer.localStreams.item(0).audioTracks.length > 0) {\n                return peer.localStreams.item(0).audioTracks.item(0);\n            }\n        }\n\n        return null;\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.getLocalVideoTrack = function(peer) {\n        logger.debug('getLocalVideoTrack');\n\n        if (peer.localStreams && peer.localStreams.length > 0 && peer.localStreams.item(0).videoTracks) {\n            if (peer.localStreams.item(0).videoTracks.length > 0) {\n                return peer.localStreams.item(0).videoTracks.item(0);\n            }\n        }\n\n        return null;\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.getRemoteVideoTrack = function(peer) {\n        logger.debug('getRemoteVideoTrack');\n\n        if (peer.remoteStreams && peer.remoteStreams.item(0)) {\n            return peer.remoteStreams.item(0).videoTracks;\n        }\n\n        return [];\n    };\n\n    //This function is called internally when we make a new call or hold/unhold scenario\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.addLocalStream = function(internalCall) {\n        var stream, fireEvent = false,\n            isSendingLocalVideo = self.canOriginatorSendLocalVideo(internalCall);\n\n        if (internalCall.localMedia && internalCall.localMedia.stream) {\n            if (isSendingLocalVideo) {\n                stream = internalCall.localMedia.stream;\n\n                // Note: I don't think this next assignment is needed.\n                internalCall.call.localStream = stream;\n                if (self.getDefaultVideoContainer()) {\n                    fireEvent = self.useDefaultRenderer(stream, true);\n                } else if (self.getLocalVideoContainer()) {\n                    fireEvent = self.createStreamRenderer(stream, self.getLocalVideoContainer(), {\n                        muted: true\n                    });\n                } else {\n                    fireEvent = true;\n                }\n\n                logger.debug('onLocalStreamAdded: ' + stream.id);\n                if (fireEvent) {\n                    self.fireOnLocalStreamAddedEvent(internalCall, stream);\n                }\n            } else {\n                if (self.getDefaultVideoContainer()) {\n                    if (self.getDefaultVideoContainer().lastElementChild) {\n                        self.disposeStreamRenderer(self.getDefaultVideoContainer().lastElementChild);\n                    }\n                } else if (self.getLocalVideoContainer()) {\n                    self.disposeStreamRenderer(self.getLocalVideoContainer());\n                }\n            }\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.muteAudioTrack = function(call, mute, userAction) {\n        var localAudioTrack;\n\n        if (!self.isInitialized()) {\n            logger.warn('muteAudioTrack: Plugin is not installed');\n            return;\n        }\n\n        if (!call.peer) {\n            return;\n        }\n\n        localAudioTrack = self.getLocalAudioTrack(call.peer);\n        if (localAudioTrack) {\n            logger.info('mute Audio Track [' + localAudioTrack.id + '], call [' + call.id + '] mute=' + mute);\n            localAudioTrack.enabled = !mute;\n            call.audioMuted = mute;\n            if (userAction) {\n                call.fcsUserAudioMuteState = mute;\n            }\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.muteVideoTrack = function(call, mute, userAction) {\n        var localVideoTrack;\n\n        if (!self.isInitialized()) {\n            logger.warn('muteVideoTrack: Plugin is not installed');\n            return;\n        }\n\n        if (!call.peer) {\n            return;\n        }\n\n        localVideoTrack = self.getLocalVideoTrack(call.peer);\n        if (localVideoTrack) {\n            logger.info('mute Video Track [' + localVideoTrack.id + '], call [' + call.id + '] mute=' + mute);\n            localVideoTrack.enabled = !mute;\n            call.videoMuted = mute;\n            if (userAction) {\n                call.fcsUserVideoMuteState = mute;\n            }\n        }\n    };\n\n    /**\n     * Sets the mute state of the call to false or the value specified by the user.\n     * For example, if a call was unmuted before a hold, it will go back to being unmuted after the call comes off of hold.\n     * @function\n     * @param {Object} call internalCall\n     *\n     */\n    self.restoreUserMuteStateOfCall = function(call) {\n        var previousMuteStateOfAudio = false,\n            previousMuteStateOfVideo = false;\n        if (!call.peer) {\n            return;\n        }\n\n        if (call.fcsUserAudioMuteState) {\n            previousMuteStateOfAudio = call.fcsUserAudioMuteState;\n        }\n\n        if (call.fcsUserVideoMuteState) {\n            previousMuteStateOfVideo = call.fcsUserVideoMuteState;\n        }\n\n        logger.debug('previous audio mute state of call: ' + previousMuteStateOfAudio);\n        logger.debug('previous video mute state of call: ' + previousMuteStateOfVideo);\n        self.muteAudioTrack(call, previousMuteStateOfAudio);\n        self.muteVideoTrack(call, previousMuteStateOfVideo);\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * Mutes audio and video tracks (to be used during Hold)\n     *\n     * @ignore\n     * @name rtc.mute\n     * @function\n     * @param {Object} call internalCall\n     * @param {boolean} mute true to mute, false to unmute\n     */\n    self.muteOnHold = function(call, mute) {\n        self.muteAudioTrack(call, mute);\n        self.muteVideoTrack(call, mute);\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    // initEnablerMedia\n    self.initMedia = function(onSuccess, onFailure, options) {\n        var mainContainer = document.body,\n            rtcPlugin = {},\n            verifyPlugin = true,\n            onloadParam,\n            size = '1px',\n            pluginid = 'fcsPlugin',\n            applicationType = 'application/x-gcfwenabler',\n            configuredPluginVersion = self.getPluginVersion(),\n            currentPluginVersion,\n            currentPluginVersionString;\n\n        logger.debug('Configured plugin version: ' + configuredPluginVersion.major + '.' + configuredPluginVersion.minor + '.' + configuredPluginVersion.current_revision);\n\n        if (options) {\n            if (options.pluginLogLevel) {\n                self.setLogLevel(options.pluginLogLevel);\n            }\n\n            if (options.language) {\n                self.setLanguage(options.language);\n            }\n        }\n        //Callback for when the plugin is loaded\n        self.onFCSPLoaded = function() {\n\n            self.setRtcLibrary(_decorator(rtcPlugin));\n            if (self.isH264Enabled()) {\n                self.getRtcLibrary().enableH264();\n            }\n            self.getRtcLibrary().checkMediaSourceAvailability(function mediaSourceCallback(mediaSourceInfo) {\n                self.setMediaSources(mediaSourceInfo);\n            });\n            self.getRtcLibrary().setH264CodecStateChangeHandler(function onH264CodecStateChangeHandler(event) {\n                self.setH264Enabled(event.state);\n            });\n\n            currentPluginVersion = self.getRtcLibrary().getCurrentPluginVersionObject();\n            currentPluginVersionString = self.getRtcLibrary().getVersion();\n            // prevent multiple init calls\n            if (self.isInitialized()) {\n                // If the plugin is already initialized, it should call successCallback with persion\n                _utils.callFunctionIfExist(onSuccess, {\n                    'pluginVersion': rtcPlugin.version\n                });\n            }\n            if (!verifyPlugin) {\n                return;\n            }\n            verifyPlugin = false;\n            logger.debug('Plugin callback');\n\n            _fcs.setPluginVersion(currentPluginVersionString);\n            logger.debug('Installed plugin version: ' + currentPluginVersionString);\n\n            if ((currentPluginVersionString.length < 1) ||\n                (currentPluginVersion.major !== configuredPluginVersion.major ||\n                    currentPluginVersion.minor !== configuredPluginVersion.minor) ||\n                (currentPluginVersion.revision < configuredPluginVersion.min_revision) ||\n                (currentPluginVersion.revision === configuredPluginVersion.min_revision &&\n                    currentPluginVersion.build < configuredPluginVersion.min_build)) {\n\n                logger.debug('Plugin version not supported');\n                _utils.callFunctionIfExist(onFailure, mediaErrors.WRONG_VERSION);\n                _utils.callFunctionIfExist(_fcs.onPluginRequired, mediaErrors.WRONG_VERSION);\n            } else {\n                self.setInitialized(true);\n                if ((currentPluginVersion.revision < configuredPluginVersion.current_revision) ||\n                    (currentPluginVersion.revision === configuredPluginVersion.current_revision &&\n                        currentPluginVersion.build < configuredPluginVersion.current_build)) {\n\n                    logger.debug('New plugin version warning');\n                    _utils.callFunctionIfExist(onFailure, mediaErrors.NEW_VERSION_WARNING);\n                    _utils.callFunctionIfExist(_fcs.onPluginRequired, mediaErrors.NEW_VERSION_WARNING);\n                } else {\n                    _utils.callFunctionIfExist(onSuccess, {\n                        'pluginVersion': rtcPlugin.version\n                    });\n                }\n\n                self.getRtcLibrary().setLang(self.getLanguage());\n            }\n\n            self.getRtcLibrary().checkMediaSourceAvailability();\n        };\n\n        // only check if the function exists, not its type, because in IE it is \"object\" (host object)\n        if (typeof mainContainer.appendChild === 'undefined') {\n            logger.debug('Could not inject plugin in container');\n            _utils.callFunctionIfExist(onFailure, mediaErrors.OPTIONS);\n            _utils.callFunctionIfExist(_fcs.onPluginRequired, mediaErrors.OPTIONS);\n            return;\n        }\n\n        rtcPlugin = document.createElement('object');\n        onloadParam = document.createElement('param');\n        onloadParam.setAttribute('name', 'onload');\n        onloadParam.setAttribute('value', 'onFCSPLoaded');\n        rtcPlugin.appendChild(onloadParam);\n\n        rtcPlugin.id = pluginid;\n        rtcPlugin.width = rtcPlugin.height = size;\n\n        // Order matters for the following:\n        // For IE you need to append first so the dom is available when IE loads the plugin, which happens when the type is set.\n        // For FF you need to set the type and then append or the plugin won't load.\n        // Chrome seems happy either way.\n        try {\n            if (navigator.appName === 'Microsoft Internet Explorer') {\n                mainContainer.appendChild(rtcPlugin);\n                rtcPlugin.type = applicationType;\n            } else {\n                rtcPlugin.type = applicationType;\n                mainContainer.appendChild(rtcPlugin);\n            }\n        } catch (e) {\n            verifyPlugin = false;\n            _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_FOUND);\n            _utils.callFunctionIfExist(_fcs.onPluginRequired, mediaErrors.NOT_FOUND);\n        }\n\n        if (verifyPlugin) {\n            if (typeof document.getElementById(pluginid).createPeerConnection !== 'undefined') {\n                self.onFCSPLoaded();\n            } else {\n                //if the plugin is not initialized within 7 sec fail\n                setTimeout(function() {\n                    // for createPeerConnection, only check if it exists. It is \"function\" in FireFox and \"object\" in Chrome and IE\n                    if (!self.isInitialized()) {\n                        if (typeof document.getElementById(pluginid).createPeerConnection === 'undefined') {\n                            _utils.callFunctionIfExist(onFailure, mediaErrors.NOT_FOUND);\n                            _utils.callFunctionIfExist(_fcs.onPluginRequired, mediaErrors.NOT_FOUND);\n                        } else {\n                            self.onFCSPLoaded();\n                        }\n                    }\n                }, 7000);\n            }\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.getUserMedia = function(params) {\n        self.getRtcLibrary().checkMediaSourceAvailability(function getUserMediaCallback(mediaSourceInfo) {\n            var mediaInfo, constraints = {\n                    audio: false,\n                    video: false\n                },\n                localMedia;\n            self.setMediaSources(mediaSourceInfo);\n\n            if (mediaSourceInfo) {\n                if (!mediaSourceInfo.audioSourceAvailable) {\n                    logger.debug('Failed to get access to local media.');\n                    _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_FOUND);\n                    return;\n                }\n            }\n\n            if (self.getVideoSourceAvailable()) {\n                constraints.video = params.options.videoConstraints;\n            }\n            if (self.getAudioSourceAvailable()) {\n                constraints.audio = params.options.audioConstraints;\n            }\n            logger.debug('Plugin version:' + self.getRtcLibrary().version);\n            logger.debug('getUserMedia - constraints: ', constraints);\n            self.getRtcLibrary().getUserMedia(constraints, function getUserMediaSuccessCallback(stream) {\n                localMedia = {\n                    audioContext: {\n                        close: function() {}\n                    },\n                    mediaStreamDestination: {\n                        disconnect: function() {}\n                    },\n                    stream: stream,\n                    originalStream: stream\n                };\n                self.setLocalMedia(localMedia);\n                self.getLocalStreamMap().add(localMedia.stream.label, localMedia);\n                self.setInitialized(true);\n\n                mediaInfo = {\n                    audio: constraints.audio,\n                    video: constraints.video,\n                    id: localMedia.stream.label,\n                    originalStream: stream,\n                };\n\n                logger.debug('user has granted access to local media: ', localMedia);\n                _utils.callFunctionIfExist(params.onSuccess, mediaInfo);\n            }, function getUserMediaFailureCallback(error) {\n                logger.debug('Failed to get access to local media. Error: ', error);\n                _utils.callFunctionIfExist(params.onFailure, mediaErrors.NOT_ALLOWED);\n            });\n        });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * createEnablerOffer to be used when the enabler plugin is enabled.\n     */\n    self.createOffer = function(call, successCallback, failureCallback, sendInitialVideo, offerToReceiveVideo) {\n        logger.debug('createOffer: sendInitialVideo= ' + sendInitialVideo + ' state= ' + call.peer.signalingState);\n        var peer = call.peer;\n\n        if(call.localMedia && call.localMedia.stream){\n            call.peer.addStream(call.localMedia.stream);\n        }\n\n        peer.createOffer(function createOfferSuccessCallback(oSdp) {\n            sendInitialVideo = sendInitialVideo && self.getVideoSourceAvailable();\n            if (sendInitialVideo) {\n                oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            }\n\n            oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n\n            oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n\n            oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n            oSdp.sdp = _sdpParser.setTcpSetupAttribute(oSdp.sdp, 'actpass');\n\n            oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n            oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n\n            self.muteOnHold(call, false);\n\n            oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            logger.trace('createOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n            peer.setLocalDescription(\n                self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp),\n                function createOfferSetLocalDescriptionSuccessCallback() {\n                    // Due to stun requests, successCallback will be called by onIceCandidate()\n                },\n                function createOfferSetLocalDescriptionFailureCallback(error) {\n                    logger.error('createOffer: setLocalDescription failed : ' + error);\n                    _utils.callFunctionIfExist(failureCallback, 'createOffer: setLocalDescription failed');\n                }\n            );\n\n        }, function createOfferFailureCallback(error) {\n            logger.error('createOffer: createOffer failed!! ' + error);\n            _utils.callFunctionIfExist(failureCallback);\n        }, {\n            optional: {\n                OfferToReceiveVideo: offerToReceiveVideo\n            }\n        });\n    };\n\n    /*\n     * createEnablerAnswer to be used when the enabler plugin is enabled\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     */\n    self.createAnswer = function(call, successCallback, failureCallback, isVideoEnabled) {\n        logger.debug('createAnswer: isVideoEnabled= ' + isVideoEnabled + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            newSdp;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.deleteFingerprintOrCrypto(call.sdp, self.isDtlsEnabled());\n\n        if (!_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n            // delete ssrc only from video, keep audio ssrc to hear audio\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        logger.trace('createAnswer: Setting remote description with (offer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n            function createAnswerSetRemoteDescriptionSuccessCallback() {\n                if(call.localMedia && call.localMedia.stream){\n                    call.peer.addStream(call.localMedia.stream);\n                }\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n                // set answer SDP to localDescriptor for the offer\n                peer.createAnswer(peer.remoteDescription,\n                    function createAnswerSuccessCallback(oSdp) {\n                        newSdp = _sdpParser.getSdpFromObject(oSdp);\n                        oSdp = null;\n                        isVideoEnabled = isVideoEnabled && self.getVideoSourceAvailable() && _sdpParser.isSdpHasVideo(call.sdp);\n                        newSdp = _sdpParser.updateOpusConfig(newSdp, _config.opusConfig);\n\n                        if (isVideoEnabled) {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                newSdp = _sdpParser.updateVideoSdpDirection(newSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                if (_sdpParser.getVideoSdpDirection(call.sdp) !== CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                    newSdp = _sdpParser.updateVideoSdpDirection(newSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                                } else {\n                                    newSdp = _sdpParser.updateVideoSdpDirection(newSdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                                }\n                            }\n                        } else {\n                            if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                                newSdp = _sdpParser.updateVideoSdpDirection(newSdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            } else {\n                                newSdp = _sdpParser.updateVideoSdpDirection(newSdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n\n                        logger.debug('doAnswer(plugin) - isSdpEnabled audio : ' + _sdpParser.isAudioSdpEnabled(newSdp));\n                        logger.debug('doAnswer(plugin) - isSdpEnabled video : ' + _sdpParser.isVideoSdpEnabled(newSdp));\n\n                        if (_sdpParser.isSdpHasAudio(newSdp) || _sdpParser.isSdpHasVideo(newSdp)) {\n\n                            // createAnswer generates an sdp without ice params\n                            // copy ice params to the local sdp\n                            // scenario: incoming video call from pcc in brokeronly config\n                            newSdp = _sdpParser.checkAndRestoreICEParams(newSdp, call.sdp);\n\n                            self.muteOnHold(call, false);\n\n                            newSdp = _sdpPipeline(call.id, newSdp, CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                            logger.trace('createAnswer: Setting local description with (answer) SDP: ' + newSdp);\n                            peer.setLocalDescription(\n                                self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, newSdp),\n                                function createAnswerSetLocalDescriptionSuccessCallback() {\n                                    // Due to stun requests, successCallback will be called by onIceCandidate()\n                                },\n                                function createAnswerSetLocalDescriptionFailureCallback(e) {\n                                    logger.error('createAnswer: setLocalDescription failed : ' + e);\n                                    _utils.callFunctionIfExist(failureCallback, 'createAnswer setLocalDescription failed');\n                                });\n                        } else {\n                            logger.error('createrAnswer: createAnswer failed!!');\n                            _utils.callFunctionIfExist(failureCallback, 'No codec negotiation');\n                        }\n                    },\n                    function createAnswerFailureCallback(e) {\n                        logger.error('createAnswer: failed!!' + e);\n                        _utils.callFunctionIfExist(failureCallback, 'Session cannot be created ');\n                    });\n            },\n            function createAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('createAnswer setRemoteDescription failed : ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'createAnswer setRemoteDescription failed');\n            });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * createEnablerUpdate to be used when the video start or stop\n     */\n    self.createUpdate = function(call, successCallback, failureCallback, isVideoStart) {\n        logger.debug('createEnablerUpdate: isVideoStart= ' + isVideoStart + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localDesc, localSdp = call.stableLocalSdp;\n\n        if (self.createNewPeerForCall({\n            call: call,\n            mustCreatePeer: call.isRemoteEndFirefox,\n        })) {\n            peer = call.peer;\n            self.setTcpSetupAttiributesOnProcessAnswer(call, call.sdp);\n        }\n        self.getRtcLibrary().updateStream(peer, call);\n\n        peer.createOffer(function createUpdateCreateOfferSuccessCallback(obj) {\n            isVideoStart = isVideoStart && self.getVideoSourceAvailable();\n            if (isVideoStart) {\n                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                if (_sdpParser.isVideoSdpDirectionInactive(call.stableRemoteSdp)) {\n                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                } else {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n            }\n            obj.sdp = self.updateCodecs(call, obj.sdp);\n            obj.sdp = _sdpParser.updateH264Level(obj.sdp);\n            obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n            obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, 'actpass');\n            obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n            obj.sdp = _sdpParser.removeG722Codec(obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoFromSdp(obj.sdp, self.isDtlsEnabled());\n            obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n\n            obj.sdp = _sdpPipeline(call.id, obj.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDesc = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n            logger.trace('createUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n            peer.setLocalDescription(localDesc, function createUpdateCreateOfferSetLocalDescriptionSuccessCallback() {\n                logger.debug('createUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n\n                // The above process un-mutes the client. We must ensure it continues to be muted if necessary.\n                if(call.audioMuted){\n                    logger.debug('video started while muted, re-mute the microphone');\n                    self.muteAudioTrack(call, true, false);\n                }\n\n                if (peer.iceGatheringState === 'complete') {\n                    if (call.successCallback) {\n                        logger.debug('createUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                }\n            }, function crateUpdateCreateOfferSetLocalDescriptionFailureCallback(e) {\n                logger.debug('createUpdate: createOffer setLocalDescription failed: ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n\n        }, function createUpdateCrateOfferFailureCallback(e) {\n            logger.debug('createUpdate: createOffer failed!!: ' + e);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * createEnablerHoldUpdate to be used when the enabler plugin is enabled\n     */\n    self.createHoldUpdate = function(call, hold, remote_hold_status, successCallback, failureCallback, useIceServer) {\n        logger.debug('createHoldUpdate: local hold= ' + hold + ' remote hold= ' + remote_hold_status + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localDescObj,\n            localSdp;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        localSdp = call.stableLocalSdp;\n\n        if (self.createNewPeerForCall({\n            call: call,\n            mustCreatePeer: call.isRemoteEndFirefox,\n            useIceServer: useIceServer\n        })) {\n            peer = call.peer;\n        }\n\n        peer.createOffer(function createHoldUpdateCreateOfferSuccessCallback(obj) {\n\n            if (hold) {\n                if (!remote_hold_status) {\n                    obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                } else {\n                    obj.sdp = _sdpParser.updateAudioSdpDirectionToInactive(obj.sdp);\n                    obj.sdp = _sdpParser.updateVideoSdpDirectionToInactive(obj.sdp);\n                }\n            } else if (remote_hold_status) {\n                obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n            } else {\n                obj.sdp = _sdpParser.updateAudioSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                if (self.canOriginatorSendLocalVideo(call)) {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                } else {\n                    obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                }\n            }\n            obj.sdp = self.updateCodecs(call, obj.sdp);\n            obj.sdp = _sdpParser.updateH264Level(obj.sdp);\n            obj.sdp = _sdpParser.updateVersion(localSdp, obj.sdp);\n            obj.sdp = _sdpParser.deleteCryptoZeroFromSdp(obj.sdp);\n            obj.sdp = _sdpParser.setTcpSetupAttribute(obj.sdp, 'actpass');\n            obj.sdp = _sdpParser.updateOpusConfig(obj.sdp, _config.opusConfig);\n\n            obj.sdp = _sdpPipeline(call.id, obj.sdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n            localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, obj.sdp);\n\n            logger.trace('createHoldUpdate: Setting local description with (offer) SDP: ' + obj.sdp);\n            peer.setLocalDescription(localDescObj, function createHoldUpdateSetLocalDescriptionSuccessCallback() {\n                logger.debug('createHoldUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                if (peer.iceGatheringState === 'complete') {\n                    if (call.successCallback) {\n                        logger.debug('createHoldUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                    }\n                }\n            }, function createHoldUpdateSetLocalDescriptionFailureCallback(error) {\n                logger.error('createHoldUpdate: setLocalDescription failed: ' + error.message);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n        }, function createHoldUpdateCreateOfferFailureCallback(error) {\n            logger.error('createHoldUpdate: createOffer failed: ' + error.message);\n            _utils.callFunctionIfExist(failureCallback);\n        });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processEnabler30Update to be used when the enabler plugin is enabled. (based on processEnabler30Update)\n     */\n    self.processUpdate = function(call, successCallback, failureCallback, local_hold_status) {\n        logger.debug('processUpdate: state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            localSdp, remoteAudioState, remoteVideoState,\n            peerLocalSdp, remoteVideoDirection, callSdpWithNoSsrc, remoteDescriptionMainProcess, data;\n        peerLocalSdp = call.stableLocalSdp;\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        // Meetme workaround. This workaround is added into native function\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, peerLocalSdp);\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) &&\n            (call.currentState === 'COMPLETED')) {\n            switch (call.remoteVideoState) {\n            case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n            case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                break;\n            case CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE:\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                break;\n            }\n        }\n\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        //this part is a work-around for webrtc bug\n        //set remote description with inactive media lines first.\n        //then set remote description with original media lines.\n\n        //keep original values of remote audio and video states\n        remoteAudioState = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n        // delete all ssrc lines from the sdp before setting first remote description\n        // set second remote description with all ssrc lines included\n\n        // TODO: Not sure about this line. It used to store the result but the result was unused. Kept the call\n        // around for safety in case it has side effects.\n        self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.prevRemoteSdp);\n\n        data = {\n            call: call,\n            mustCreatePeer: call.isRemoteEndFirefox,\n            oldSdp: call.prevRemoteSdp,\n            newSdp: call.sdp,\n        };\n        if (self.createNewPeerForCall(data)) {\n            peer = call.peer;\n            self.setTcpSetupAttiributesOnProcessAnswer(call, call.sdp);\n        }\n\n        //This is highly required for meetme on DTLS\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        remoteDescriptionMainProcess = function() {\n            logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + call.sdp);\n            self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp, function processUpdateSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processUpdate: setRemoteDescription success');\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n\n                peer.createAnswer(peer.remoteDescription, function processUpdateCreateAnswerSuccessCallback(obj) {\n                    logger.debug('processUpdate: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp));\n                    logger.debug('processUpdate: isSdpEnabled video= ' + _sdpParser.isVideoSdpEnabled(obj.sdp));\n\n                    if (_sdpParser.isAudioSdpEnabled(obj.sdp) || _sdpParser.isVideoSdpEnabled(obj.sdp)) {\n                        if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                            if (self.canOriginatorSendLocalVideo(call)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            }\n                        } else {\n                            if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                            } else {\n                                obj.sdp = _sdpParser.updateVideoSdpDirection(obj.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n\n                        //TODO: Since there is no setter method for obj.sdp from the plugin side,\n                        //      we create a temporary local variable and pass obj.sdp's value into it.\n                        //      Rewrite the below part of code when the setter method is applied to the plugin side\n                        localSdp = _sdpParser.getSdpFromObject(obj);\n                        obj = null;\n                        localSdp = _sdpParser.updateVersion(peerLocalSdp, localSdp);\n\n                        localSdp = _sdpParser.checkIceParamsLengths(localSdp, call.sdp);\n                        localSdp = _sdpParser.setTcpSetupAttribute(localSdp, call.dtlsRole);\n                        localSdp = _sdpParser.updateOpusConfig(localSdp, _config.opusConfig);\n\n                        localSdp = _sdpPipeline(call.id, localSdp, CONSTANTS.WEBRTC.SDP.OPERATION.UPDATE, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                        logger.trace('processUpdate: Setting local description with (answer) SDP: ' + localSdp);\n                        peer.setLocalDescription( self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, localSdp),\n                            function processUpdateSetLocalDescriptionSuccessCallback() {\n                                logger.debug('processUpdate setLocalDescription success. iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                                if (peer.iceGatheringState === 'complete') {\n                                    if (call.successCallback) {\n                                        logger.debug('processUpdate iceGatheringState completed ' + peer.localDescription.sdp);\n                                        _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                                    }\n                                }\n                            },\n                            function processUpdateSetLocalDescriptionFailureCallback(e) {\n                                logger.debug('processUpdate: setLocalDescription failed: ' + e);\n                                _utils.callFunctionIfExist(failureCallback, 'processUpdate: setlocalDescription failed!!');\n                            });\n                    } else {\n                        logger.debug('processUpdate: createAnswer failed!!');\n                        _utils.callFunctionIfExist(failureCallback, 'No codec negotiation');\n                    }\n                }, function processUpdateCreateAnswerFailureCallback(e) {\n                    logger.debug('processUpdate: createAnswer failed!! ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processUpdateSetRemoteDescriptionSuccessCallback(e) {\n                logger.debug('processUpdate: setRemoteDescription failed: ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'processUpdate: setRemoteDescription failed!!');\n            });\n        };\n\n        if (_sdpParser.isSdpHasVideo(call.prevRemoteSdp) || _sdpParser.isIceLite(call.sdp) || local_hold_status) {\n            //set media lines with sendonly state for work-around\n            call.sdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n            call.sdp = _sdpParser.updateVideoSdpDirectionToInactive(call.sdp);\n\n            callSdpWithNoSsrc = _sdpParser.deleteSsrcFromSdp(call.sdp);\n\n            logger.trace('processUpdate: Setting remote description with (offer) SDP: ' + callSdpWithNoSsrc);\n            self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, callSdpWithNoSsrc, function processUpdateWorkaroundSetRemoteDescriptionSuccessCallback() {\n                logger.debug('processUpdate: workaround setRemoteDescription success');\n\n                //restore original values\n                call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, remoteAudioState);\n                call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, remoteVideoState);\n\n                remoteDescriptionMainProcess();\n            }, function processUpdateWorkaroundSetRemoteDescriptionFailureCallback(e) {\n                logger.debug('processUpdate: workaround setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(failureCallback, 'processUpdate: workaround setRemoteDescription failed!!');\n            });\n        } else {\n            remoteDescriptionMainProcess();\n        }\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processEnabler30Answer to be used when the enabler plugin is enabled\n     */\n    self.processAnswer = function(call, onSuccess, onFail) {\n        logger.debug('processAnswer: state= ' + call.peer.signalingState);\n\n        var onSuccessAfterWorkarounds, setRemoteDescription,\n            remoteVideoDirection, localVideoDirection, peer = call.peer,\n            origSdp;\n\n        onSuccessAfterWorkarounds = function() {\n            call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n            _utils.callFunctionIfExist(onSuccess);\n        };\n\n        setRemoteDescription = function(operation, call, onSuccess, onFailure) {\n            logger.trace('processAnswer: Setting remote description with (answer) SDP: ' + call.sdp);\n            self.setRemoteDescription(operation, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n                function() {\n                    logger.debug('processAnswer: setRemoteDescription success');\n                    onSuccess();\n                },\n                function(e) {\n                    logger.error('processAnswer: setRemoteDescription failed: ' + e);\n                    onFailure();\n                });\n        };\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, _sdpParser.getSdpFromObject(call.peer.localDescription), self.isH264Enabled());\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n\n        if (peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.HAVE_REMOTE_PRANSWER) {\n\n            if (_sdpParser.isIceLite(call.prevRemoteSdp) !== _sdpParser.isIceLite(call.sdp)) {\n                logger.debug('ice - ice-lite change.');\n                onFail(CONSTANTS.WEBRTC.ERROR.ICE_ICELITE);\n                return;\n            }\n\n            origSdp = call.sdp;\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n            logger.debug('call processPrAnswer again to trigger on remote stream added with updated sdp.');\n            self.processPreAnswer(call,\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer sucess callback. Restore original sdp.');\n                    setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n                },\n                function() {\n                    call.sdp = origSdp;\n                    logger.debug('processPrAnswer failure callback. Restore original sdp.');\n                    setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n                }\n            );\n            return;\n        }\n\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n        localVideoDirection = _sdpParser.getVideoSdpDirection(_sdpParser.getSdpFromObject(call.peer.localDescription));\n\n        // this is needed for buggy webrtc api. when term answers with video to audio only call\n        // this scenario does not work without converting to sendrecv\n        logger.debug('processAnswer: ice-lite: do remote video escalation');\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n\n        if ((localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY || localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY)) {\n\n            // Audio <--> Audio : apply workaround step 1\n\n            // delete ssrc only from video, keep audio ssrc to hear audio\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n\n            setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n\n        } else if (localVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY &&\n            (remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY || remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE)) {\n\n            // Audio  <--> Audio-Video\n\n            setRemoteDescription(null, call, function() {\n                self.performVideoStartWorkaround(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n            }, onFail);\n\n        } else {\n\n            // Audio-Video <--> Audio-Video\n            // there is remote video, no need for orig side workaround\n\n            setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, onSuccessAfterWorkarounds, onFail);\n        }\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * performEnablerVideoStartWorkaround - term side cannot see orig's video\n     */\n    self.performVideoStartWorkaround = function(operation, call, onSuccess, onFail) {\n        var peer = call.peer,\n            remoteAudioState, remoteVideoState,\n            callSdpWithNoSsrc, peerLocalSdp;\n\n        //disable the workaround by default, as it is not necessairy in current version of Chrome\n        if(!_config.performVideoStartWorkaround){\n            onSuccess();\n            return;\n        }\n\n        if (!_sdpParser.isSdpHasVideo(call.sdp)) {\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFail);\n            return;\n        }\n\n        logger.debug('Workaround to play video');\n\n        peerLocalSdp = call.stableLocalSdp ? call.stableLocalSdp : call.peer.localDescription.sdp;\n\n        call.sdp = _sdpParser.addSdpMissingCryptoLine(call.sdp);\n\n        remoteAudioState = _sdpParser.getSdpDirectionLogging(call.sdp, CONSTANTS.STRING.AUDIO, false);\n        remoteVideoState = _sdpParser.getSdpDirectionLogging(call.sdp, CONSTANTS.STRING.VIDEO, false);\n\n        call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.AUDIO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n        call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n\n        callSdpWithNoSsrc = _sdpParser.deleteSsrcFromSdp(call.sdp);\n\n        logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + callSdpWithNoSsrc);\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, callSdpWithNoSsrc,\n            function() {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription success');\n\n                // restore original values\n                call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.AUDIO, remoteAudioState);\n                call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO, remoteVideoState);\n\n                logger.trace('performVideoStartWorkaround: Setting remote description with (offer) SDP: ' + call.sdp);\n                self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, call.sdp,\n                    function() {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription success');\n                        peer.createAnswer(peer.remoteDescription, function(obj) {\n                            var localSdp = _sdpParser.getSdpFromObject(obj);\n\n                            if (_sdpParser.getSdpDirectionLogging(call.sdp, CONSTANTS.STRING.AUDIO, false) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                localSdp = _sdpParser.updateSdpDirection(localSdp, CONSTANTS.STRING.AUDIO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n\n                            if (call.remoteVideoState === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                                localSdp = _sdpParser.updateSdpDirection(localSdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            } else if (self.canOriginatorSendLocalVideo(call)) {\n                                localSdp = _sdpParser.updateSdpDirection(localSdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                localSdp = _sdpParser.updateSdpDirection(localSdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            }\n\n                            localSdp = _sdpParser.checkAndRestoreICEParams(localSdp, call.sdp);\n\n                            localSdp = _sdpParser.setTcpSetupAttribute(localSdp, call.dtlsRole);\n\n                            localSdp = _sdpParser.updateVersion(peerLocalSdp, localSdp);\n\n                            localSdp = _sdpPipeline(call.id, localSdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                            logger.trace('performVideoStartWorkaround: Setting local description with (answer) SDP: ' + localSdp);\n                            peer.setLocalDescription(\n                                self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, localSdp),\n                                function() {\n                                    logger.debug('performVideoStartWorkaround: setlocalDescription success');\n                                    _utils.callFunctionIfExist(onSuccess);\n                                },\n                                function(e) {\n                                    logger.debug('performVideoStartWorkaround: setlocalDescription failed!!' + e);\n                                    _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: setlocalDescription failed!!');\n                                });\n                        }, function(e) {\n                            logger.debug('performVideoStartWorkaround: createAnswer failed!! ' + e);\n                            _utils.callFunctionIfExist(onFail, 'Session cannot be created');\n                        });\n                    },\n                    function(e) {\n                        logger.debug('performVideoStartWorkaround: second setRemoteDescription failed!!' + e);\n                        _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: second setRemoteDescription failed!!');\n                    });\n            },\n            function(e) {\n                logger.debug('performVideoStartWorkaround: first setRemoteDescription failed!!' + e);\n                _utils.callFunctionIfExist(onFail, 'performVideoStartWorkaround: first setRemoteDescription failed!!');\n            });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processPreAnswer to be used when the enabler plugin is enabled\n     */\n    self.processPreAnswer = function(call, onSuccess, onFailure) {\n        logger.debug('processPreAnswer: state= ' + call.peer.signalingState);\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, _sdpParser.getSdpFromObject(call.peer.localDescription), self.isH264Enabled());\n\n        logger.trace('processPreAnswer: Setting remote description with (pranswer) SDP: ' + call.sdp);\n        self.setRemoteDescription(CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.PRANSWER, call.sdp,\n            function processPreAnswerSetRemoteDescriptionSuccessCallback() {\n                self.setOriginatorReceiveRemoteVideo(call);\n                call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                onSuccess();\n                logger.debug('processPreAnswer: setRemoteDescription success');\n            },\n            function processPreAnswerSetRemoteDescriptionFailureCallback(e) {\n                logger.error('processPreAnswer: setRemoteDescription failed: ' + e);\n                onFailure(e);\n            });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processEnablerRespond\n     */\n    self.processRespond = function(call, onSuccess, onFailure, isJoin, operation = CONSTANTS.WEBRTC.SDP.OPERATION.START_CALL) {\n        var remoteVideoDirection;\n\n        logger.debug('processRespond: state= ' + call.peer.signalingState);\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFailure);\n            return;\n        }\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, _sdpParser.getSdpFromObject(call.stableLocalSdp), self.isH264Enabled());\n\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n            switch (call.remoteVideoState) {\n            case CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE:\n            case CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY:\n                call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                break;\n            }\n        }\n\n        call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n        call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.VIDEO);\n        if (isJoin) {\n            call.sdp = _sdpParser.changeDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n            self.muteOnHold(call, false);\n        }\n\n        if (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n            call.sdp = _sdpParser.deleteInactiveVideoSsrc(call.sdp);\n        }\n\n        logger.trace('processRespond: Setting remote description with (answer) SDP: ' + call.sdp);\n        self.setRemoteDescription(null, call, call.peer, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, call.sdp,\n            function() {\n                logger.debug('processRespond: setRemoteDescription success');\n                var onSuccessAfterWorkaround = function() {\n                    call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                    _utils.callFunctionIfExist(onSuccess);\n                };\n                // _utils.callFunctionIfExist(onSuccessAfterWorkaround);\n                self.performVideoStartWorkaround(operation, call, onSuccessAfterWorkaround, onFailure);\n            },\n            function(e) {\n                logger.debug('processRespond: setRemoteDescription failed: ' + e);\n                _utils.callFunctionIfExist(onFailure);\n            });\n    };\n\n    /*\n     * createPluginReOffer\n     */\n    self.createReOffer = function(call, successCallback, failureCallback, usePreviousMediaDirection) {\n        var peer = call.peer,\n            localDescObj, localAudioDirection, localVideoDirection,\n            prevLocalSdp = call.stableLocalSdp,\n            deleteVideoStream = false,\n            data;\n\n        logger.debug('createReOffer:' + call.id);\n\n        if (!usePreviousMediaDirection) {\n            deleteVideoStream = !call.initialVideoState && _sdpParser.isSdpHasVideo(call.stableLocalSdp);\n        }\n\n        data = {\n            call: call,\n            mustCreatePeer: true,\n            deleteVideoStream: deleteVideoStream,\n        };\n        if (self.createNewPeerForCall(data)) {\n            peer = call.peer;\n        }\n\n        peer.createOffer(\n            function createReOfferCreateOfferSuccessCallback(oSdp) {\n                if (usePreviousMediaDirection) {\n                    localAudioDirection = _sdpParser.getAudioSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateAudioSdpDirection(oSdp.sdp, localAudioDirection);\n                    localVideoDirection = _sdpParser.getVideoSdpDirection(prevLocalSdp);\n                    oSdp.sdp = _sdpParser.updateVideoSdpDirection(oSdp.sdp, localVideoDirection);\n                }\n\n                oSdp.sdp = _sdpParser.deleteCryptoZeroFromSdp(oSdp.sdp);\n                oSdp.sdp = _sdpParser.removeG722Codec(oSdp.sdp);\n                oSdp.sdp = _sdpParser.deleteCryptoFromSdp(oSdp.sdp, self.isDtlsEnabled());\n                oSdp.sdp = _sdpParser.setTcpSetupAttribute(oSdp.sdp, 'actpass');\n                oSdp.sdp = _sdpParser.updateVersion(prevLocalSdp, oSdp.sdp);\n                oSdp.sdp = self.updateCodecs(call, oSdp.sdp);\n                oSdp.sdp = _sdpParser.updateOpusConfig(oSdp.sdp, _config.opusConfig);\n\n                oSdp.sdp = _sdpPipeline(call.id, oSdp.sdp, CONSTANTS.WEBRTC.SDP.OPERATION.REOFFER, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.OFFER);\n\n                localDescObj = self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.OFFER, oSdp.sdp);\n                logger.trace('createReOffer: Setting local description with (offer) SDP: ' + oSdp.sdp);\n                peer.setLocalDescription(localDescObj, function createReOfferSetLocalDescriptionSuccessCallback() {\n                    logger.debug('createReOffer: setLocalDescription success' + call.id);\n                }, function createReOfferSetLocalDescriptionFailureCallback(e) {\n                    logger.debug('createReOffer: setLocalDescription failed!!' + e + call.id);\n                    _utils.callFunctionIfExist(failureCallback);\n                });\n            },\n            function createReOfferCreateOfferFailureCallback(e) {\n                logger.error('createReOffer: createOffer failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback);\n            });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processEnablerHold to be used when the enabler plugin 30 is enabled.\n     */\n    self.processHold = function(call, hold, local_hold_status, successCallback, failureCallback) {\n        logger.debug('processHold: local hold= ' + local_hold_status + ' remote hold= ' + hold + ' state= ' + call.peer.signalingState);\n        var peer = call.peer,\n            audioDirection, videoDirection, inactiveRemoteSdp,\n            peerLocalSdp, localSdp, remoteSdp, data;\n        peerLocalSdp = call.stableLocalSdp;\n\n        var operation = hold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        audioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        videoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        if (!local_hold_status && !hold) {\n            self.muteOnHold(call, false);\n        }\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n        call.sdp = _sdpParser.setTcpSetupAttribute(call.sdp, 'actpass');\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, null, self.isH264Enabled());\n        call.sdp = _sdpParser.performVideoPortZeroWorkaround(call.sdp);\n        call.sdp = _sdpParser.checkAndRestoreICEParams(call.sdp, _sdpParser.getSdpFromObject(call.peer.localDescription));\n\n        // chrome38 fix\n        inactiveRemoteSdp = _sdpParser.updateAudioSdpDirectionToInactive(call.sdp);\n        inactiveRemoteSdp = _sdpParser.updateVideoSdpDirectionToInactive(inactiveRemoteSdp);\n\n        data = {\n            call: call,\n            mustCreatePeer: call.isRemoteEndFirefox,\n            oldSdp: call.prevRemoteSdp,\n            newSdp: call.sdp,\n        };\n        if (self.createNewPeerForCall(data)) {\n            peer = call.peer;\n            self.setTcpSetupAttiributesOnProcessAnswer(call, call.sdp);\n        }\n        inactiveRemoteSdp = _sdpParser.deleteSsrcFromSdp(inactiveRemoteSdp);\n\n        // 1st setRemoteDescription to make webrtc remove the audio and/or video streams\n        // 2nd setRemote will add the audio stream back so that services like MOH can work\n        // This code will also run in UnHold scenario, and it will remove & add video stream\n        logger.trace('processHold: Setting remote description with (offer) SDP: ' + inactiveRemoteSdp);\n        self.setRemoteDescription(null, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, inactiveRemoteSdp, function processHoldSetFirstRemoteDescriptionSuccessCallback() {\n            remoteSdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n\n            if (_sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n                _sdpParser.getVideoSdpDirection(call.sdp) === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY) {\n                remoteSdp = _sdpParser.deleteInactiveVideoSsrc(remoteSdp);\n            }\n            logger.trace('processHold: Setting remote description with (offer) SDP: ' + remoteSdp);\n            self.setRemoteDescription(operation, call, peer, CONSTANTS.WEBRTC.SDP.TYPE.OFFER, remoteSdp, function processHoldSetSecondRemoteDescriptionSuccessCallback() {\n                if (!hold && !local_hold_status && (videoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE)) {\n                    call.remoteVideoState = CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n                } else {\n                    call.remoteVideoState = _sdpParser.getVideoSdpDirection(call.sdp);\n                }\n                peer.createAnswer(peer.remoteDescription, function processHoldCreateAnswerSuccessCallback(obj) {\n                    localSdp = _sdpParser.getSdpFromObject(obj);\n                    logger.debug('processHold: isSdpEnabled audio= ' + _sdpParser.isAudioSdpEnabled(obj.sdp));\n                    logger.debug('processHold: isSdpEnabled video= ' + _sdpParser.isVideoSdpEnabled(obj.sdp));\n                    obj = null;\n\n                    if (hold) {\n                        logger.debug('processHold: Remote HOLD');\n                        localSdp = _sdpParser.respondToRemoteSdpDirections(localSdp, call.sdp);\n                    } else if (!local_hold_status) {\n                        logger.debug('processHold: Remote UNHOLD: direction left as it is');\n\n                        if (_sdpParser.isSdpVideoSendEnabled(call.sdp)) {\n                            if (self.canOriginatorSendLocalVideo(call)) {\n                                localSdp = _sdpParser.updateVideoSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE);\n                            } else {\n                                localSdp = _sdpParser.updateVideoSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n                            }\n                        } else {\n                            if (self.canOriginatorSendLocalVideo(call) && !_sdpParser.isVideoSdpDirectionInactive(call.sdp)) {\n                                localSdp = _sdpParser.updateVideoSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                            } else {\n                                localSdp = _sdpParser.updateVideoSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n                            }\n                        }\n                        //change audio's direction to sendrecv for ssl attendees in a 3wc\n                        localSdp = _sdpParser.changeDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE, CONSTANTS.STRING.AUDIO);\n                    } else if (local_hold_status && !hold) {\n                        logger.debug('processHold: Remote UNHOLD on local hold');\n\n                        if (audioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) {\n                            localSdp = _sdpParser.updateAudioSdpDirectionToInactive(localSdp);\n                        } else {\n                            localSdp = _sdpParser.updateAudioSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        }\n\n                        if (self.canOriginatorSendLocalVideo(call)) {\n                            localSdp = _sdpParser.updateVideoSdpDirection(localSdp, CONSTANTS.WEBRTC.MEDIA_STATE.SEND_ONLY);\n                        } else {\n                            localSdp = _sdpParser.updateVideoSdpDirectionToInactive(localSdp);\n                        }\n                    }\n\n                    localSdp = _sdpParser.updateVersion(peerLocalSdp, localSdp);\n                    localSdp = _sdpParser.checkIceParamsLengths(localSdp, call.sdp);\n                    localSdp = _sdpParser.checkAndRestoreICEParams(localSdp, call.sdp);\n                    if (_sdpParser.isSdpHasVideoWithZeroPort(localSdp) && self.getDefaultVideoContainer()) {\n                        self.useDefaultRenderer(false, false, false);\n                    }\n\n                    localSdp = _sdpParser.setTcpSetupAttribute(localSdp, call.dtlsRole);\n\n                    localSdp = _sdpParser.updateH264Level(localSdp);\n                    localSdp = _sdpParser.updateOpusConfig(localSdp, _config.opusConfig);\n\n                    localSdp = _sdpPipeline(call.id, localSdp, operation, CONSTANTS.WEBRTC.SDP.STEP.PRE_SET_LOCAL, CONSTANTS.WEBRTC.SDP.TYPE.ANSWER);\n\n                    logger.trace('processHold: Setting local description with (answer) SDP: ' + localSdp);\n                    peer.setLocalDescription( self.getRtcLibrary().createRTCSessionDescription(CONSTANTS.WEBRTC.SDP.TYPE.ANSWER, localSdp),\n                        function processHoldSetLocalDescriptionSuccessCallback() {\n                            logger.debug('processHold: setLocalDescription success!! ' + 'iceConnectionState: ' + peer.iceConnectionState + ' iceGatheringState: ' + peer.iceGatheringState);\n                            if (peer.iceGatheringState === 'complete') {\n                                if (call.successCallback) {\n                                    logger.debug('processHold iceGatheringState completed ' + peer.localDescription.sdp);\n                                    _utils.callFunctionIfExist(successCallback, peer.localDescription.sdp);\n                                }\n                            }\n                        },\n                        function processHoldSetLocalDescriptionFailureCallback(e) {\n                            logger.error('processHold: setLocalDescription failed!! ' + e);\n                            _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                        });\n                }, function processHoldCreateAnswerFailureCallback(e) {\n                    logger.error('processHold: createAnswer failed!!: ' + e);\n                    _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n                });\n            }, function processHoldSetSecondRemoteDescriptionFailureCallback(e) {\n                logger.error('processHold: second setRemoteDescription failed!! ' + e);\n                _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n            });\n        }, function processHoldSetFirstRemoteDescriptionFailureCallback(e) {\n            logger.debug('processHold: first setRemoteDescription failed!! ' + e);\n            _utils.callFunctionIfExist(failureCallback, 'Session cannot be created');\n        });\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * processHoldRespond to be used when the enabler plugin is enabled\n     */\n    self.processHoldRespond = function(call, onSuccess, onFailure, isJoin) {\n        var remoteAudioDirection,\n            remoteVideoDirection,\n            localHoldFlag = false,\n            remoteHoldFlag = false,\n            data;\n\n        logger.debug('processHoldRespond: state= ' + call.peer.signalingState + ' call.currentState= ' + call.currentState);\n\n        data = {\n            call: call\n        };\n        if (self.createNewPeerForCall(data)) {\n            self.setTcpSetupAttiributesOnProcessAnswer(call, call.sdp);\n        }\n\n        call.sdp = self.performSdpWorkaroundsBeforeProcessingIncomingSdp(call.sdp);\n\n        _sdpParser.init(call.sdp);\n\n        remoteAudioDirection = _sdpParser.getAudioSdpDirection(call.sdp);\n        remoteVideoDirection = _sdpParser.getVideoSdpDirection(call.sdp);\n\n        var isHold = remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE ||\n            remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY;\n\n        var operation = isHold ? CONSTANTS.WEBRTC.SDP.OPERATION.HOLD : CONSTANTS.WEBRTC.SDP.OPERATION.UNHOLD;\n\n        if (call.peer.signalingState === CONSTANTS.WEBRTC.RTC_SIGNALING_STATE.STABLE) {\n            //if we are in stable state we should not change remotedescription\n            self.onRemoteStreamAdded(call);\n            self.setRemoteDescription(operation, call, null, null, call.sdp, onSuccess, onFailure);\n            return;\n        }\n\n        call.sdp = _sdpParser.checkSupportedVideoCodecs(call.sdp, _sdpParser.getSdpFromObject(call.stableLocalSdp), self.isH264Enabled());\n\n        remoteHoldFlag = _sdpParser.isRemoteHold();\n\n        localHoldFlag = (call.currentState === 'LOCAL_HOLD');\n\n        logger.debug('processHoldRespond: localHold= ' + localHoldFlag + ' remoteHold= ' + remoteHoldFlag);\n\n        /* Required for MOH - start */\n        if (remoteHoldFlag === false) {\n            if ((remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) && (call.currentState === 'REMOTE_HOLD')) {\n                call.previousState = call.currentState;\n                call.currentState = 'COMPLETED';\n            }\n        } else {\n            if (call.currentState === 'COMPLETED') {\n                call.previousState = call.currentState;\n                call.currentState = 'REMOTE_HOLD';\n            }\n        }\n\n        if (localHoldFlag || remoteHoldFlag) {\n            logger.debug('processHoldRespond: ' + call.currentState + ' : video -> inactive');\n            call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE);\n        }\n\n        if ((remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.INACTIVE) && (call.currentState === 'COMPLETED')) {\n            logger.debug('processHoldRespond: video inactive -> recvonly');\n            call.sdp = _sdpParser.updateSdpDirection(call.sdp, CONSTANTS.STRING.VIDEO, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n        /* Required for MOH - end */\n\n        if (localHoldFlag && remoteAudioDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Audio');\n            call.sdp = _sdpParser.updateAudioSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n\n        if (localHoldFlag && remoteVideoDirection === CONSTANTS.WEBRTC.MEDIA_STATE.SEND_RECEIVE) {\n            logger.debug('processHoldRespond: Mute Remote Video');\n            call.sdp = _sdpParser.updateVideoSdpDirection(call.sdp, CONSTANTS.WEBRTC.MEDIA_STATE.RECEIVE_ONLY);\n        }\n\n        self.processRespond(call, onSuccess, onFailure, isJoin, operation);\n    };\n\n    // createEnablerDataChannel\n    self.createDataChannel = function(dataChannelWrapperObj, onSuccess, onFailure, options) {\n        try {\n            if (options) {\n                dataChannelWrapperObj.dataChannel = dataChannelWrapperObj.peer.createDataChannel('Label', options);\n            } else {\n                dataChannelWrapperObj.dataChannel = dataChannelWrapperObj.peer.createDataChannel('Label');\n            }\n            onSuccess(dataChannelWrapperObj);\n        } catch (error) {\n            logger.error('Failed to create data channel, exception: ' + error.message);\n            onFailure(error);\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.createPeer = function(call) {\n        try {\n            var pc, constraints = {}, i, servers = [],\n                iceServerUrl, config, useIceServer;\n\n            useIceServer = !_config.ignoreIceParamsForServices || _config.ignoreIceParamsForServices.indexOf('call') !== -1;\n\n            logger.info('useIceServer: ' + useIceServer);\n            if (useIceServer) {\n                iceServerUrl = self.getIceServerUrl();\n            }\n\n            if (iceServerUrl instanceof Array) {\n                for (i = 0; i < iceServerUrl.length; i++) {\n                    servers[i] = iceServerUrl[i];\n                }\n            } else if (!iceServerUrl || iceServerUrl === '') {\n                servers = [];\n            } else {\n                servers[0] = iceServerUrl;\n            }\n            config = {\n                iceServers: servers,\n                // NOTE: This is added temporarily because Chrome and Firefox have required set\n                // by default and the media broker doesn't support multiplexing. ADG-14986\n                rtcpMuxPolicy: 'negotiate'\n            };\n\n            // If present, take the call constraints provided as config.\n            if(_config.callConstraints && _config.callConstraints.plugin) {\n                // If any constraint is malformed, the RTCPeerConnection will fail to be created.\n                logger.debug('Using custom peer constraints for call.', _config.callConstraints.plugin);\n                constraints = _config.callConstraints.plugin;\n            }\n\n            constraints.optional = constraints.optional || [];\n            constraints.optional.push({\n                'DtlsSrtpKeyAgreement': self.isDtlsEnabled()\n            });\n\n            if (_config.bundlePolicy !== constants.WEBRTC.SDP.BUNDLE_POLICY.DISABLED) {\n                config.bundlePolicy = _config.bundlePolicy;\n            }\n\n            pc = self.getRtcLibrary().createRTCPeerConnection(config, constraints);\n            pc._peerId = peerId++;\n\n            if (call.peer) {\n                logger.debug(`createPeer - Peer Id: ${call.peer._peerId} - detaching old peer from call ${call.id}.`);\n\n                // Let's make sure we stop listening to any events from the old peer.\n                call.peer.onconnecting = undefined;\n                call.peer.onopen = undefined;\n                call.peer.onsignalingstatechange = undefined;\n                call.peer.onaddstream = undefined;\n                call.peer.onremovestream = undefined;\n                call.peer.onicecandidate = undefined;\n                call.peer.onicecomplete = undefined;\n                call.peer.oniceconnectionstatechange = undefined;\n                call.peer.ondatachannel = undefined;\n                call.peer.onicegatheringstatechange = undefined;\n\n                // Close the peer, it is no longer needed.\n                call.peer.close();\n            }\n\n            self.setPeerCount(self.getPeerCount() + 1);\n            call.peer = pc;\n\n            pc.onconnecting = function(event) {\n                self.onSessionConnecting(call, event);\n            };\n            pc.onopen = function(event) {\n                self.onSessionOpened(call, event);\n            };\n            pc.onsignalingstatechange = function(event) {\n                self.onSignalingStateChange(call, event);\n            };\n            pc.onaddstream = function(event) {\n                self.onRemoteStreamAdded(call, event);\n            };\n            pc.onremovestream = function(event) {\n                self.onRemoteStreamRemoved(call, event);\n            };\n            pc.onicecandidate = function(event) {\n                if (pc !== call.peer) {\n                    logger.error(`Peer Id: ${pc._peerId} - received notification from detached peer not on call (Other Peer id: ${call.peer._peerId} )`);\n                    return;\n                }\n\n                self.setupIceCandidateCollectionTimer(call);\n                self.onIceCandidate(call, event);\n            };\n            pc.onicecomplete = function() {\n                if (pc !== call.peer) {\n                    logger.error(`Peer Id: ${pc._peerId} - received notification from detached peer not on call (Other Peer id: ${call.peer._peerId} )`);\n                    return;\n                }\n                self.onIceComplete(call);\n            };\n            pc.oniceconnectionstatechange = function(event) {\n                self.oniceconnectionstatechange(call, event);\n            };\n            pc.ondatachannel = function(event) {\n                self.onDataChannel(call, event);\n            };\n\n            pc.onicegatheringstatechange = function() {\n                logger.debug(`Peer Id: ${pc._peerId} - ice gathering state change:` + pc.iceGatheringState);\n            };\n\n            logger.info(`Peer Id: ${pc._peerId} - create PeerConnection successfully.`);\n\n            self.setupWebrtcLogCollectionTimer(call);\n\n            return true;\n        } catch (err) {\n            logger.error('Failed to create PeerConnection, exception: ' + err.message);\n        }\n\n        return false;\n    };\n\n    self.createNewPeerForCall = function(data) {\n        var call = data.call,\n            mustCreatePeer = data.mustCreatePeer,\n            sessionIdChanged = _sdpParser.getSessionIdFromSdp(data.oldSdp) !== _sdpParser.getSessionIdFromSdp(data.newSdp),\n            isNewPeerCreated = false,\n            oldPeer,\n            useIceServer,\n            telephoneEventPayloadChanged = _sdpParser.hasCodecPayloadChanged(data.oldSdp, data.newSdp),\n            isDTLSFingerprintChanged = false;\n\n        if (_config.ignoreIceParamsForServices && _config.ignoreIceParamsForServices.indexOf('call') !== -1) {\n            useIceServer = false;\n        } else {\n            useIceServer = true;\n        }\n\n        if(data.call && data.call.sdp && data.call.prevRemoteSdp) {\n            isDTLSFingerprintChanged = _sdpParser.getFingerprintFromSdp(data.call.prevRemoteSdp) !== _sdpParser.getFingerprintFromSdp(data.call.sdp);\n        }\n\n        if (mustCreatePeer || telephoneEventPayloadChanged || isDTLSFingerprintChanged || sessionIdChanged) {\n            if (call.peer) {\n                oldPeer = call.peer;\n                self.collectWebRtcStats(call.sdp, oldPeer,\n                    function(stats) {\n                        logger.debug('Plugin collectWebRtcStats successfull');\n                        if (call.stats === undefined) {\n                            call.stats = [];\n                        }\n                        call.stats.push(stats);\n                        if (oldPeer.signalingState !== 'closed') {\n                            oldPeer.close();\n                        }\n                        self.setPeerCount(self.getPeerCount() - 1);\n                        call.dtmfSender = null;\n                    },\n                    function() {\n                        logger.debug('Plugin collectWebRtcStats failed');\n                        if (oldPeer.signalingState !== 'closed') {\n                            oldPeer.close();\n                        }\n                        self.setPeerCount(self.getPeerCount() - 1);\n                        call.dtmfSender = null;\n                    });\n            }\n\n            logger.trace('Creating new peer for call: ' + call.id);\n            self.createPeer(call, useIceServer, function createPeerSuccessCallback() {\n                logger.trace('New peer has created for call: ' + call.id);\n\n                //\n                // add commented out lines below\n                // after plugin implementation\n                //\n                //if (data.deleteVideoStream) {\n                //    videoTrack = call.localMedia.stream.getVideoTracks()[0];\n                //    call.localMedia.stream.removeTrack(videoTrack);\n                //}\n                //\n                if(call.localMedia && call.localMedia.stream){\n                    call.peer.addStream(call.localMedia.stream);\n                }\n                //clearing those since we are using a new peer\n                self.clearTcpSetupParameters(call);\n                isNewPeerCreated = true;\n            }, function createPeerFailureCallback() {\n                logger.error('New peer creation has failed!: ' + call.id);\n                if (call.stats) {\n                    call.stats.pop();\n                }\n            });\n        }\n        return isNewPeerCreated;\n    };\n\n    // pluginOnRemoteStreamAdded\n    self.onRemoteStreamAdded = function(call, event) {\n        var fireEvent,\n            remoteVideoTracks = [],\n            isVideoTrackAvailable = false;\n\n        if (self.getDefaultVideoContainer()) {\n            if (!self.isActiveCallInVideoContainer(self.getDefaultVideoContainer(), call)) {\n                logger.debug('onRemoteStreamAdded: It is not active call. Call Id: ' + call.id);\n                return;\n            }\n        } else if (self.getRemoteVideoContainer()) {\n            if (!self.isActiveCallInVideoContainer(self.getRemoteVideoContainer(), call)) {\n                logger.debug('onRemoteStreamAdded: It is not active call. Call Id: ' + call.id);\n                return;\n            }\n        }\n\n        if (event && event.stream) {\n            call.remoteStream = event.stream;\n\n            remoteVideoTracks = event.stream.getVideoTracks();\n        } else {\n            remoteVideoTracks = self.getRemoteVideoTrack(call.peer);\n        }\n\n        if (remoteVideoTracks) {\n            if (remoteVideoTracks.length > 0) {\n                isVideoTrackAvailable = true;\n            }\n        }\n\n        if (self.getDefaultVideoContainer()) {\n            fireEvent = self.useDefaultRenderer(call.remoteStream, false, isVideoTrackAvailable);\n        } else if (self.getRemoteVideoContainer()) {\n            fireEvent = self.createStreamRenderer(call.remoteStream, self.getRemoteVideoContainer());\n        } else {\n            fireEvent = true;\n        }\n\n        logger.debug('onRemoteStreamAdded: ' + call.remoteStream.id);\n        if (fireEvent) {\n            self.fireOnStreamAddedEvent(call, call.remoteStream);\n        }\n    };\n\n    self.iceCandidateCollectionTimeoutHandler = function(call) {\n        var sdp = call.peer.localDescription.sdp;\n        self.clearIceCandidateCollectionTimer(call);\n        if (_config.relayCandidateCollectionTimeoutCycle) {\n            call.relayCandidateCycle++;\n        }\n        // set timeout if there is no ice candidate available or\n        // when audio, video port assignment isn't complete\n        if (!_sdpParser.hasCandidates(sdp, call.relayCandidateCycle, _config.relayCandidateCollectionTimeoutCycle)) {\n            logger.debug('Re-setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n            call.iceCandidateCollectionTimer = setTimeout(function() {\n                self.iceCandidateCollectionTimeoutHandler(call);\n            }, _config.iceCandidateCollectionTimeoutInterval);\n            return;\n        }\n\n        if (call.successCallback) {\n            logger.debug('Ice candidate collection interrupted after given timeout, invoking successCallback.');\n\n            sdp = _sdpParser.updateH264Level(sdp);\n\n            call.successCallback(sdp);\n        }\n    };\n\n    self.setupIceCandidateCollectionTimer = function(call) {\n        if (_config.iceCandidateCollectionTimeoutInterval) {\n            if (!call.iceCandidateCollectionTimer) {\n                logger.debug('Setting ice candidate collection timeout: ' + _config.iceCandidateCollectionTimeoutInterval);\n                if (_config.relayCandidateCollectionTimeoutCycle) {\n                    call.relayCandidateCycle = 1;\n                }\n                call.iceCandidateCollectionTimer = setTimeout(function() {\n                    self.iceCandidateCollectionTimeoutHandler(call);\n                }, _config.iceCandidateCollectionTimeoutInterval);\n            } else {\n                logger.trace('Ice candidate collection timer exists.');\n            }\n        }\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * onIceCandidate to be called when the enabler plugin is enabled\n     */\n    self.onIceCandidate = function(call, event) {\n        var sdp;\n        if (event.candidate === null) {\n            logger.debug('Null candidate received.');\n            if (call.successCallback) {\n                sdp = _sdpParser.getSdpFromObject(call.peer.localDescription);\n\n                if (_sdpParser.hasCandidates(sdp, call.relayCandidateCycle, _config.relayCandidateCollectionTimeoutCycle)) {\n                    self.clearIceCandidateCollectionTimer(call);\n                    logger.debug('Candidates received, invoking successCallback.');\n\n                    sdp = _sdpParser.updateH264Level(sdp);\n                    call.successCallback(sdp);\n                } else {\n                    logger.trace('Sdp does not have candidates.');\n                }\n\n            }\n        } else {\n            logger.debug('ICE candidate received : sdpMLineIndex = ' + event.candidate.sdpMLineIndex +\n                ', candidate = ' + event.candidate.candidate + ' for call : ' + call.id);\n        }\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     * onIceComplete to be called when the enabler plugin is enabled\n     */\n    self.onIceComplete = function(call) {\n        var sdp;\n        logger.debug('All ICE candidates received for call : ' + call.id);\n        self.clearIceCandidateCollectionTimer(call);\n\n        if (call.successCallback) {\n            sdp = call.peer.localDescription.sdp;\n            sdp = _sdpParser.updateH264Level(sdp);\n            logger.trace('onIceComplete sdp : ' + sdp);\n\n            call.successCallback(sdp);\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.useDefaultRenderer = function(stream, local, isVideoTrackAvailable) {\n        var videoContainer;\n\n        if (self.getDefaultVideoContainer() && self.getDefaultVideoContainer().children.length === 0) {\n            // Create divs for the remote and local\n            self.getDefaultVideoContainer().innerHTML = '<div style=\\'height:100%;width:100%\\'></div><div style=\\'position:absolute;bottom:10px;right:10px;height:30%; width:30%;\\'></div>';\n        }\n\n        if (local) {\n            videoContainer = self.getDefaultVideoContainer().lastElementChild;\n        } else {\n            videoContainer = self.getDefaultVideoContainer().firstElementChild;\n\n            if (!isVideoTrackAvailable) {\n                videoContainer.style.width = '0%';\n            } else {\n                videoContainer.style.width = '100%';\n            }\n        }\n        return self.createStreamRenderer(stream, videoContainer, {\n            muted: local\n        });\n    };\n\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.createStreamRenderer = function(stream, container) {\n        if (!stream || !container) {\n            return;\n        }\n\n        const streamUrl = self.getRtcLibrary().getURLFromStream(stream);\n\n        container.innerHTML = '<object width=\\'100%\\' height=\\'100%\\' type=\\'application/x-gcfwenabler-video\\'><param name=\\'autoplay\\' value=\\'true\\' /><param name=\\'videosrc\\' value=\\'' + streamUrl + '\\' /></object>';\n\n        return true;\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.sendIntraFrame = function(call) {\n        if (!call.peer) {\n            return;\n        }\n\n        if (self.canOriginatorSendLocalVideo(call)) {\n            call.peer.sendIntraFrame();\n        } else {\n            //call.peer.sendBlackFrame();\n            //sendBlackFrame is removed from plugin\n            return;\n        }\n    };\n\n    // Enabler implementation lies on webRtcPluginAdaptor.js\n    self.sendBlackFrame = function(call) {\n        if (!call.peer) {\n            return;\n        }\n        //call.peer.sendBlackFrame();\n        //TODO: This function will be completely removed since sendBlackFrame is removed from plugin\n        return;\n    };\n\n    /**\n     * Send DTMF tone\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     *\n     * @ignore\n     * @name rtc.sendDTMF\n     * @function\n     * @param {Object} call internalCall\n     * @param {String} tone DTMF tone\n     */\n    self.sendDTMF = function(call, tone) {\n        var localAudioTrack;\n\n        if (!call.dtmfSender) {\n            localAudioTrack = self.getLocalAudioTrack(call.peer);\n            if (!localAudioTrack) {\n                return;\n            }\n            call.dtmfSender = call.peer.createDTMFSender(localAudioTrack);\n            if (!call.dtmfSender) {\n                return;\n            }\n        }\n\n        if (call.dtmfSender.canInsertDTMF === true) {\n            call.dtmfSender.insertDTMF(tone, 400);\n            logger.info('sending outband DTMF tone: ' + tone);\n        } else {\n            logger.error('Failed to execute \\'insertDTMF\\' on \\'RTCDTMFSender\\': The \\'canInsertDTMF\\' attribute is false: this sender cannot send DTMF');\n        }\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     */\n    self.getCameraList = function() {\n        return;\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     */\n    self.getMicrophoneList = function() {\n        return;\n    };\n\n    /*\n     * Enabler implementation lies on webRtcPluginAdaptor.js\n     */\n    self.getSpeakerList = function() {\n        return;\n    };\n\n    self.getNativeWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getNativeWebRtcStats called');\n                call.peer.getStats(function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        var results = stats.result();\n                        _utils.callFunctionIfExist(onSuccess, results);\n                    }\n                });\n            }\n        } catch (err) {\n            logger.error('Failed to get all WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n    };\n\n    self.getWebRtcStats = function(call, onSuccess, onFailure) {\n        try {\n            if (call) {\n                logger.debug('getWebRtcStats called');\n                self.collectWebRtcStats(call.sdp, call.peer,\n                    function(stats) {\n                        var accumulatedStats = self.getAccumulatedWebRtcStats(call.stats, stats, call.cache);\n                        _utils.callFunctionIfExist(onSuccess, accumulatedStats);\n                    },\n                    onFailure);\n            } else {\n                var cacheWebRtcStats = JSON.parse(_cache.getItem(_fcs.getUser() + '_stats'));\n                _utils.callFunctionIfExist(onSuccess, cacheWebRtcStats);\n            }\n        } catch (err) {\n            logger.error('Failed to get WebRTC Statistics: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n        return self.getStats();\n    };\n\n    self.getAccumulatedWebRtcStats = function(statsList, currentStats, callCache) {\n        var i, accumulatedStats = {\n            audio: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                jitter: null,\n                rtt: null\n            },\n            video: {\n                packetsSent: 0,\n                bytesSent: 0,\n                bytesReceived: 0,\n                peerAddress: null,\n                codec: null,\n                packetsLost: 0,\n                rtt: null\n            }\n        };\n        if (statsList !== undefined) {\n            for (i = 0; i < statsList.length; i++) {\n                self.accumulateStats(accumulatedStats.audio, statsList[i].audio);\n                self.accumulateStats(accumulatedStats.video, statsList[i].video);\n            }\n        }\n\n        self.accumulateStats(accumulatedStats.audio, currentStats.audio);\n        accumulatedStats.audio.peerAddress = currentStats.audio.peerAddress;\n        accumulatedStats.audio.codec = currentStats.audio.codec;\n        accumulatedStats.audio.jitter = currentStats.audio.jitter;\n        accumulatedStats.audio.rtt = currentStats.audio.rtt;\n\n        self.accumulateStats(accumulatedStats.video, currentStats.video);\n        accumulatedStats.video.peerAddress = currentStats.video.peerAddress;\n        accumulatedStats.video.codec = currentStats.video.codec;\n        accumulatedStats.video.rtt = currentStats.video.rtt;\n\n        if (callCache) {\n            _cache.setItem(_fcs.getUser() + '_stats', JSON.stringify(accumulatedStats));\n        }\n        return accumulatedStats;\n    };\n\n    self.accumulateStats = function(accumulatedStatsObj, statsObj) {\n        accumulatedStatsObj.packetsSent += getInteger(statsObj.packetsSent);\n        accumulatedStatsObj.bytesSent += getInteger(statsObj.bytesSent);\n        accumulatedStatsObj.bytesReceived += getInteger(statsObj.bytesReceived);\n        accumulatedStatsObj.packetsLost += getInteger(statsObj.packetsLost) === -1 ? 0 : getInteger(statsObj.packetsLost);\n    };\n\n    self.collectWebRtcStats = function(statsSdp, peer, onSuccess, onFailure) {\n        try {\n            if (peer) {\n                logger.debug('collectWebRtcStats called');\n                peer.getStats(function(stats) {\n                    if (stats !== undefined && stats !== null) {\n                        var results = stats.result();\n                        self.setWebRtcStats(results, statsSdp);\n\n                        _utils.callFunctionIfExist(onSuccess, self.getStats());\n                    }\n                });\n            }\n        } catch (err) {\n            logger.error('Failed to collectWebRtcStats: ' + err.message);\n            _utils.callFunctionIfExist(onFailure, err);\n        }\n\n        return self.getStats();\n    };\n\n    self.setWebRtcStats = function(results, statsSdp) {\n\n        var i, j, res, names, mediaDescriptions, sdpAudioPort, sdpVideoPort,\n            transportId, googChannelId, googCodecName, alwaysMediaOnBroker,\n            stats = {\n                audio: {\n                    packetsSent: null,\n                    bytesSent: null,\n                    bytesReceived: null,\n                    peerAddress: '',\n                    codec: null,\n                    packetsLost: null,\n                    jitter: null,\n                    rtt: null\n                },\n                video: {\n                    packetsSent: null,\n                    bytesSent: null,\n                    bytesReceived: null,\n                    peerAddress: null,\n                    codec: null,\n                    packetsLost: null,\n                    rtt: null\n                }\n            };\n\n        if (_sdpParser.isIceLite(statsSdp)) {\n            alwaysMediaOnBroker = true;\n        } else {\n            alwaysMediaOnBroker = false;\n        }\n\n        if (statsSdp !== undefined && statsSdp !== null && results !== undefined && results !== null) {\n            _sdpParser.init(statsSdp);\n            _sdpParser.parseSDP(statsSdp);\n            mediaDescriptions = _sdpParser.getMediaDescriptions();\n\n            if (mediaDescriptions !== undefined) {\n                if (mediaDescriptions[0] !== undefined) {\n                    sdpAudioPort = mediaDescriptions[0].port;\n                }\n\n                if (mediaDescriptions[1] !== undefined) {\n                    sdpVideoPort = mediaDescriptions[1].port;\n                }\n            }\n\n            for (i = 0; i < results.length; i++) {\n                res = results[i];\n                names = res.names();\n                if (names !== undefined) {\n                    for (j = 0; j < names.length; j++) {\n                        googChannelId = res.stat('googChannelId');\n                        transportId = res.stat('transportId');\n                        googCodecName = res.stat('googCodecName');\n                        if ((transportId !== undefined && transportId.indexOf('audio') > -1) ||\n                            (googChannelId !== undefined && googChannelId.indexOf('audio') > -1)) {\n\n                            if (googCodecName === 'VP8' || googCodecName === 'H264') {\n                                self.fillStats(stats.video, res, names, j, sdpVideoPort, alwaysMediaOnBroker);\n                            } else {\n                                self.fillStats(stats.audio, res, names, j, sdpAudioPort, alwaysMediaOnBroker);\n                            }\n                        } else if ((transportId !== undefined && transportId.indexOf('video') > -1) ||\n                            (googChannelId !== undefined && googChannelId.indexOf('video') > -1)) {\n                            self.fillStats(stats.video, res, names, j, sdpVideoPort, alwaysMediaOnBroker);\n                        }\n\n                    }\n                    if (!alwaysMediaOnBroker && sdpVideoPort !== undefined) {\n                        stats.video.peerAddress = stats.audio.peerAddress.split(':')[0];\n                    }\n                    self.setStats(stats);\n                }\n            }\n        }\n\n    };\n\n    self.fillStats = function(statsObj, res, names, index, sdpRemotePort, alwaysMediaOnBroker) {\n        var remotePort, remoteAddress;\n\n        if ((res.stat('googActiveConnection') === 'true') && alwaysMediaOnBroker) {\n            remoteAddress = res.stat('googRemoteAddress');\n\n            if (remoteAddress !== undefined) {\n                if (remoteAddress.split(':') !== undefined && remoteAddress.split(':')[1] !== undefined) {\n                    remotePort = remoteAddress.split(':')[1];\n                }\n\n                if (remotePort === sdpRemotePort) {\n\n                    statsObj.peerAddress = remoteAddress;\n\n                    if (names[index] === 'bytesReceived') {\n                        statsObj.bytesReceived = res.stat(names[index]);\n                    }\n\n                    if (names[index] === 'packetsSent') {\n                        statsObj.packetsSent = res.stat(names[index]);\n                    }\n\n                    if (names[index] === 'bytesSent') {\n                        statsObj.bytesSent = res.stat(names[index]);\n                    }\n                }\n            }\n        }\n\n        if ((res.stat('googActiveConnection') === 'true') && !alwaysMediaOnBroker) {\n            remoteAddress = res.stat('googRemoteAddress');\n            statsObj.peerAddress = remoteAddress;\n        }\n\n        if (res.type === 'ssrc' || res.id.indexOf('ssrc') > -1) {\n            if (names[index] === 'packetsLost') {\n                statsObj.packetsLost = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googCodecName') {\n                statsObj.codec = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googJitterReceived') {\n                statsObj.jitter = res.stat(names[index]);\n            }\n\n            if (names[index] === 'googRtt') {\n                statsObj.rtt = res.stat(names[index]);\n            }\n\n            if (!alwaysMediaOnBroker) {\n                if (names[index] === 'bytesReceived') {\n                    statsObj.bytesReceived = res.stat(names[index]);\n                }\n                if (names[index] === 'packetsSent') {\n                    statsObj.packetsSent = res.stat(names[index]);\n                }\n                if (names[index] === 'bytesSent') {\n                    statsObj.bytesSent = res.stat(names[index]);\n                }\n            }\n        }\n    };\n\n    self.addRemoteCandidates = function() {\n        logger.warn('addIceCandidates does not work on plugin');\n        return;\n    };\n\n    //Plugin does not support merging audio streams\n    self.mergeAudioStream = false;\n\n    logger.debug('WebRtcPluginAdaptor initialized');\n}\n","import {compose} from '../../utils';\n\nexport function WebRtcPluginv22AdaptorImpl({\n    base: _super,\n    model: _model,\n    LogManager: _logManager\n}) {\n    var self = this,\n        webRtcPlugin22Version = {\n            major: 2,\n            minor: 2,\n\n            min_revision: 477,\n            min_build: 0,\n\n            current_revision: 477,\n            current_build: 0\n        },\n        logger = _logManager.getLogger('WebRtcPluginv22AdaptorImpl');\n\n    logger.debug('WebRtcPluginv22Adaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    self.setPluginVersion(webRtcPlugin22Version);\n    logger.debug('WebRtcPluginv22Adaptor initialized');\n}\n","import {compose} from '../../utils';\n\nexport function WebRtcPluginv31AdaptorImpl({\n    base: _super,\n    model: _model,\n    LogManager: _logManager,\n    SdpParser: _sdpParser\n}) {\n    var self = this,\n        webRtcPlugin31Version = {\n            major: 3,\n            minor: 1,\n\n            min_revision: 520,\n            min_build: 0,\n\n            current_revision: 524,\n            current_build: 0\n        },\n        logger = _logManager.getLogger('WebRtcPluginv31AdaptorImpl');\n    logger.debug('WebRtcPluginv31Adaptor initializing');\n\n    compose(_super, self);\n    compose(_model, self);\n\n    self.setPluginVersion(webRtcPlugin31Version);\n\n    /**\n     * Send DTMF tone\n     * Enabler implementation lies on webRtcPluginv31Adaptor.js\n     *\n     * @ignore\n     * @name rtc.sendDTMF\n     * @function\n     * @param {Object} call internalCall\n     * @param {String} tone DTMF tone\n     */\n    self.sendDTMF = function(call, tone) {\n        var localAudioTrack;\n\n        if (!call.dtmfSender) {\n            localAudioTrack = self.getLocalAudioTrack(call.peer);\n            if (!localAudioTrack) {\n                return;\n            }\n            call.dtmfSender = call.peer.createDTMFSender(localAudioTrack);\n            if (!call.dtmfSender) {\n                return;\n            }\n        }\n\n        if (!_sdpParser.isSdpHasTelephoneEvent(call.peer.remoteDescription.sdp)) {\n            call.dtmfSender.insertDTMF(tone, 400, 100, true);\n            logger.info('sending inband DTMF tone: ' + tone);\n        } else {\n            if (call.dtmfSender.canInsertDTMF === true) {\n                call.dtmfSender.insertDTMF(tone, 400);\n                logger.info('sending outband DTMF tone: ' + tone);\n            } else {\n                logger.error('Failed to execute \\'insertDTMF\\' on \\'RTCDTMFSender\\': The \\'canInsertDTMF\\' attribute is false: this sender cannot send DTMF');\n            }\n        }\n    };\n\n    logger.debug('WebRtcPluginv31Adaptor initialized');\n}\n","import {webRtcLibraryDecoratorImpl} from './webRtcLibraryDecorator';\nimport {webRtcLibraryChromeDecoratorImpl} from './webRtcLibraryChromeDecorator';\nimport {webRtcLibraryFirefoxDecoratorImpl} from './webRtcLibraryFirefoxDecorator';\n\nexport default {\n    WebRtcDecoratorFactory: container =>\n        target => webRtcLibraryDecoratorImpl(target, container.Utils),\n    WebRtcChromeDecoratorFactory: container =>\n        target => webRtcLibraryChromeDecoratorImpl(target, container.Global, container.Navigator, container.Utils, container.LogManager),\n    WebRtcFirefoxDecoratorFactory: container =>\n        target => webRtcLibraryFirefoxDecoratorImpl(target, container.WebRtcChromeDecoratorFactory, container.Global, container.Navigator)\n};\n","export function webRtcLibraryDecoratorImpl(target, _utils) {\n    var libraryObjWrapper = {};\n\n    libraryObjWrapper.getUserMedia = target.getUserMedia;\n    libraryObjWrapper.showSettingsWindow = target.showSettingsWindow;\n    libraryObjWrapper.getURLFromStream = target.getURLFromStream;\n    libraryObjWrapper.enableH264 = target.enableH264;\n\n    libraryObjWrapper.createRTCSessionDescription = function(type, sdp) {\n        return target.createSessionDescription(type, sdp);\n    };\n\n    libraryObjWrapper.createRTCIceCandidate = function(candidate, type, number) {\n        return target.createIceCandidate(candidate, type, number);\n    };\n\n    libraryObjWrapper.createRTCPeerConnection = function(config, constraints) {\n        return target.createPeerConnection(config, constraints);\n    };\n\n    libraryObjWrapper.setLang = function(lang) {\n        target.setLanguage(lang || 'en');\n    };\n\n    libraryObjWrapper.checkMediaSourceAvailability = function(callback) {\n        _utils.callFunctionIfExist(callback, {\n            videoSourceAvailable: (target.getVideoDeviceNames().length > 0) ? true : false,\n            audioSourceAvailable: (target.getAudioInDeviceNames().length > 0) ? true : false,\n            sourceList: [],\n            screenSourceAvailable: false\n        });\n    };\n\n    libraryObjWrapper.get_audioInDeviceCount = function() {\n        return target.getAudioInDeviceNames().length;\n    };\n\n    libraryObjWrapper.get_audioOutDeviceCount = function() {\n        return target.getAudioOutDeviceNames().length;\n    };\n\n    libraryObjWrapper.get_videoDeviceCount = function() {\n        return target.getVideoDeviceNames().length;\n    };\n\n    libraryObjWrapper.set_logSeverityLevel = function(level) {\n        target.logSeverityLevel = level;\n        return true;\n    };\n\n    libraryObjWrapper.get_logSeverityLevel = function() {\n        return target.logSeverityLevel;\n    };\n\n    libraryObjWrapper.enable_logCallback = function(handler) {\n        target.logCallback = handler;\n        return true;\n    };\n\n    libraryObjWrapper.disable_logCallback = function() {\n        target.logCallback = null;\n    };\n\n    libraryObjWrapper.setType = function(applicationType) {\n        target.type = applicationType;\n    };\n\n    libraryObjWrapper.getType = function() {\n        return target.type;\n    };\n\n    libraryObjWrapper.getVersion = function() {\n        return target.version;\n    };\n\n    libraryObjWrapper.setH264CodecStateChangeHandler = function(handler) {\n        target.onh264codecstatechange = handler;\n    };\n\n    libraryObjWrapper.getCurrentPluginVersionObject = function() {\n        var splittedPluginVersion = target.version.split('.'),\n            currentPluginVersion;\n\n        currentPluginVersion = {\n            major: parseInt(splittedPluginVersion[0], 10),\n            minor: parseInt(splittedPluginVersion[1], 10),\n            revision: parseInt(splittedPluginVersion[2], 10),\n            build: parseInt(splittedPluginVersion[3], 10)\n        };\n        return currentPluginVersion;\n    };\n\n    libraryObjWrapper.detachWebAudioContextFromLocalMedia = function(localMedia) {\n        localMedia.audioContext.close();\n        localMedia.mediaStreamDestination.disconnect();\n    };\n\n    libraryObjWrapper.stopLocalMedia = function(localMedia) {\n        if (localMedia) {\n            libraryObjWrapper.stopStream(localMedia.stream);\n            libraryObjWrapper.stopStream(localMedia.originalStream);\n        }\n    };\n\n    libraryObjWrapper.stopStream = function(stream) {\n        if (stream && stream.stop) {\n            stream.stop();\n        }\n    };\n\n    libraryObjWrapper.updateStream = function(peer, call) {\n        var localStreams = peer.localStreams;\n        if(localStreams && localStreams.length > 0) {\n            peer.removeStream(localStreams.item(0));\n        }\n\n        peer.addStream(call.localMedia.stream);\n    };\n\n    return libraryObjWrapper;\n}\n","import {mediaErrors} from '../../call/call.js';\n\nexport function webRtcLibraryChromeDecoratorImpl(target, _window, _navigator, _utils, _logManager) {\n    var logger = _logManager.getLogger('webRtcLibraryChromeDecoratorImpl'),\n        screenShareExtensionLoaded = false,\n        screenShareExtensionId;\n\n    target.getUserMedia = function(constraints, successCallback, failureCallback) {\n        function getSourceMedia(mediaSourceId) {\n            if (!constraints.video.mandatory) {\n                constraints.video.mandatory = {};\n            }\n            if(mediaSourceId) {\n                constraints.video.mandatory.chromeMediaSourceId = mediaSourceId;\n            }\n            constraints.video.mandatory.chromeMediaSource = 'desktop';\n            _navigator.webkitGetUserMedia(constraints, successCallback, failureCallback);\n        }\n\n        var isScreensharing = constraints.video && constraints.video.mediaSource === 'screen';\n        if(isScreensharing) {\n            // This isn't a real constraint; remove it before using the constraints.\n            delete constraints.video['mediaSource'];\n\n            if(constraints.video.mandatory.chromeMediaSourceId) {\n                /*\n                 * Screenshare Scenario #1:\n                 *      A mediaSourceId was provided as an option when starting screenshare.\n                 */\n                getSourceMedia();\n\n            } else if (screenShareExtensionLoaded) {\n                /*\n                 *  Screenshare Scenario #2:\n                 *      The app provided an extension Id on setup, so we need to talk with\n                 *      that extension to retrieve a mediaSourceId.\n                 */\n                _window.chrome.runtime.sendMessage(screenShareExtensionId, {\n                    message: 'chooseDesktopMedia'\n                },\n                // sendMessage success callback.\n                function(response) {\n                    if(response && response.mediaSourceId) {\n                        getSourceMedia(response.mediaSourceId);\n                    } else {\n                        _utils.callFunctionIfExist(failureCallback);\n                    }\n                });\n\n            } else {\n                // Neither screensharing method worked.\n                logger.debug('No extension ID or media source ID provided.');\n                _utils.callFunctionIfExist(failureCallback);\n            }\n        } else {\n            // Regular getUserMedia.\n            _navigator.webkitGetUserMedia(constraints, successCallback, failureCallback);\n        }\n    };\n\n    target.initScreenSharing = function(onSuccess, onFailure, options) {\n        var screenSharingOpts = options.screenSharing;\n\n        if (screenSharingOpts && screenSharingOpts.chromeExtensionId) {\n            screenShareExtensionId = screenSharingOpts.chromeExtensionId;\n            try {\n                _window.chrome.runtime.sendMessage(screenShareExtensionId, {\n                    message: 'version'\n                }, function(response) {\n                    if (response && response.version) {\n                        screenShareExtensionLoaded = true;\n                        _utils.callFunctionIfExist(onSuccess);\n                    } else {\n                        _utils.callFunctionIfExist(onFailure, mediaErrors.NO_SCREENSHARING_WARNING);\n                    }\n                });\n            } catch (error) {\n                _utils.callFunctionIfExist(onFailure, mediaErrors.NO_SCREENSHARING_WARNING);\n            }\n        } else {\n            // If there is no screensharing extension, screensharing can still work if the application\n            // provides the media source id on it's own. Consider this else case a success, since\n            // we don't want to say screensharing is not available.\n            _utils.callFunctionIfExist(onSuccess);\n        }\n    };\n\n    target.showSettingsWindow = function() {\n        return;\n    };\n\n    target.createRTCSessionDescription = function(type, sdp) {\n        return new _window.RTCSessionDescription({\n            'type': type,\n            'sdp': sdp\n        });\n    };\n\n    target.createRTCIceCandidate = function(candidate) {\n        return new _window.RTCIceCandidate(candidate);\n    };\n\n    target.createRTCPeerConnection = function(config, constraints) {\n        if(_window.RTCPeerConnection) {\n            // Non-prefixed API is available in Chrome 56+.\n            return new _window.RTCPeerConnection(config, constraints);\n        } else {\n            return new _window.webkitRTCPeerConnection(config, constraints);\n        }\n    };\n\n    target.checkMediaSourceAvailability = function(callback) {\n        var i, videoSourceAvailable, audioSourceAvailable, sources = [];\n\n        function executeCallback(videoSourceAvailable, audioSourceAvailable) {\n            _utils.callFunctionIfExist(callback, {\n                videoSourceAvailable: videoSourceAvailable,\n                audioSourceAvailable: audioSourceAvailable,\n                sourceList: sources,\n                // Hardcode screensharing to be available, since there is\n                // no initialization needed for screensharing to be available.\n                screenSourceAvailable: true\n            });\n        }\n\n        function processMediaDevices(mediaSources) {\n            for (i = 0; i < mediaSources.length; i++) {\n                if (mediaSources[i].kind === 'videoinput' || mediaSources[i].kind === 'video') {\n                    // Video source is available such as webcam\n                    videoSourceAvailable = true;\n                } else if (mediaSources[i].kind === 'audioinput' || mediaSources[i].kind === 'audio') {\n                    // audio source is available such as mic\n                    audioSourceAvailable = true;\n                }\n                sources.push({\n                    id: mediaSources[i].deviceId || mediaSources[i].id,\n                    kind: mediaSources[i].kind,\n                    label: mediaSources[i].label,\n                    groupId: mediaSources[i].groupId\n                });\n            }\n            executeCallback(videoSourceAvailable, audioSourceAvailable);\n        }\n\n        if (_navigator.mediaDevices && _navigator.mediaDevices.enumerateDevices) {\n            _navigator.mediaDevices.enumerateDevices().then(processMediaDevices).catch(function(error) {\n                logger.error('Failed to enumerate devices. Error name: ' + error.name + 'Error message: ' + error.message);\n                executeCallback(false, false);\n            });\n        } else {\n            _window.MediaStreamTrack.getSources(processMediaDevices);\n        }\n    };\n\n    target.detachWebAudioContextFromLocalMedia = function(localMedia) {\n        localMedia.audioContext.close();\n        if (localMedia && localMedia.mediaStreamDestination && localMedia.mediaStreamDestination.numberOfOutputs > 0) {\n            localMedia.mediaStreamDestination.disconnect();\n        }\n    };\n\n    target.stopLocalMedia = function(localMedia) {\n        if (localMedia) {\n            if(localMedia.stream) {\n                target.stopStream(localMedia.stream);\n            }\n            if(localMedia.originalStream) {\n                target.stopStream(localMedia.originalStream);\n            }\n        }\n    };\n\n    target.stopStream = function(stream) {\n        var i, tracks = [];\n        if (stream && stream.getTracks) {\n            tracks = stream.getTracks();\n        }\n        for (i in tracks) {\n            if (tracks.hasOwnProperty(i)) {\n                tracks[i].stop();\n            }\n        }\n    };\n\n    target.get_audioInDeviceCount = function() {\n        // Not Applicable for Chrome Native\n        return 1;\n    };\n\n    target.get_audioOutDeviceCount = function() {\n        // Not Applicable for Chrome Native\n        return 1;\n    };\n\n    target.get_videoDeviceCount = function() {\n        // Not Applicable for Chrome Native\n        return 1;\n    };\n\n    target.set_logSeverityLevel = function() {\n        // Not Applicable for Chrome Native\n        return false;\n    };\n\n    target.get_logSeverityLevel = function() {\n        // Not Applicable for Chrome Native\n        return;\n    };\n\n    target.enable_logCallback = function() {\n        // Not Applicable for Chrome Native\n        return;\n    };\n\n    target.disable_logCallback = function() {\n        // Not Applicable for Chrome Native\n        return;\n    };\n\n    target.updateStream = function(peer, call) {\n        var localStreams = peer.getLocalStreams();\n        if(localStreams && localStreams.length > 0) {\n            peer.removeStream(peer.getLocalStreams()[0]);\n        }\n\n        peer.addStream(call.localMedia.stream);\n    };\n}\n","export function webRtcLibraryFirefoxDecoratorImpl(target, _super, _window, _navigator) {\n    _super(target);\n\n    target.getUserMedia = function(constraints, successCallback, failureCallback) {\n        if (_navigator.mediaDevices && _navigator.mediaDevices.getUserMedia) {\n            _navigator.mediaDevices.getUserMedia(constraints)\n                .then(successCallback)\n                .catch(failureCallback);\n        } else {\n            _navigator.mozGetUserMedia(constraints, successCallback, failureCallback);\n        }\n    };\n\n    target.createRTCSessionDescription = function(type, sdp) {\n        if (_window.RTCSessionDescription) {\n            return new _window.RTCSessionDescription({\n                'type': type,\n                'sdp': sdp\n            });\n        } else {\n            return new _window.mozRTCSessionDescription({\n                'type': type,\n                'sdp': sdp\n            });\n        }\n    };\n\n    target.createRTCIceCandidate = function(candidate) {\n        if (_window.RTCIceCandidate) {\n            return new _window.RTCIceCandidate(candidate);\n        } else {\n            return new _window.mozRTCIceCandidate(candidate);\n        }\n    };\n\n    target.createRTCPeerConnection = function(config, constraints) {\n        if (_window.RTCPeerConnection) {\n            return new _window.RTCPeerConnection(config, constraints);\n        } else {\n            return new _window.mozRTCPeerConnection(config, constraints);\n        }\n    };\n\n    target.stopLocalMedia = function(localMedia) {\n        if (localMedia) {\n            target.stopStream(localMedia.stream);\n            target.stopStream(localMedia.originalStream);\n        }\n    };\n\n    target.stopStream = function(stream) {\n        var i, tracks = [];\n        if (stream && stream.getTracks) {\n            tracks = stream.getTracks();\n        }\n        for (i in tracks) {\n            if (tracks.hasOwnProperty(i)) {\n                tracks[i].stop();\n            }\n        }\n    };\n\n    target.updateStream = function() {\n        return;\n        //        peer.removeTrack(peer.getSenders()[0]);\n        //        peer.addStream(call.localMedia.stream);\n    };\n}\n","import {WebRtcAdaptorModel} from './webRtcAdaptorModel';\nimport {WebRtcChromeAdaptorModel} from './webRtcChromeAdaptorModel';\nimport {WebRtcFirefoxAdaptorModel} from './webRtcFirefoxAdaptorModel';\nimport {WebRtcPluginAdaptorModel} from './webRtcPluginAdaptorModel';\n\nexport default {\n    WebRtcAdaptorModelFactory:        () => WebRtcAdaptorModel,\n    WebRtcChromeAdaptorModelFactory:  () => WebRtcChromeAdaptorModel,\n    WebRtcFirefoxAdaptorModelFactory: () => WebRtcFirefoxAdaptorModel,\n    WebRtcPluginAdaptorModelFactory:  () => WebRtcPluginAdaptorModel\n};\n","export default function Map() {\n    var items = {},\n        length = 0;\n\n    this.size = function() {\n        return length;\n    };\n\n    this.add = function(key, value) {\n        length++;\n        items[key] = value;\n        return this;\n    };\n\n    this.get = function(key) {\n        return items[key];\n    };\n\n    this.remove = function(key) {\n        length--;\n        return delete items[key];\n    };\n\n    this.clear = function() {\n        var variableKey;\n        for (variableKey in items) {\n            if (items.hasOwnProperty(variableKey)) {\n                if (delete items[variableKey]) {\n                    length--;\n                }\n            }\n        }\n    };\n\n    this.entries = function() {\n        return items;\n    };\n}\n","import {WebRtcAdaptorModel} from './webRtcAdaptorModel';\n\nexport function WebRtcChromeAdaptorModel() {\n    var self = {},\n        mediaSourceId;\n\n    var base = WebRtcAdaptorModel();\n    Object.assign(self, base);\n\n    self.getMediaSourceId = function() {\n        return mediaSourceId;\n    };\n\n    self.setMediaSourceId = function(sourceId) {\n        mediaSourceId = sourceId;\n    };\n\n    return self;\n}\n","import {WebRtcAdaptorModel} from './webRtcAdaptorModel';\n\nexport function WebRtcFirefoxAdaptorModel() {\n    var self = {},\n        // Since Firefox supports H264 by default, this attribute set as true\n        h264Enabled = true,\n        mediaSourceId;\n\n    var base = WebRtcAdaptorModel();\n    Object.assign(self, base);\n\n    self.isH264Enabled = function() {\n        return h264Enabled;\n    };\n\n    self.setH264Enabled = function(enabled) {\n        h264Enabled = enabled === true ? true : false;\n    };\n\n    self.getMediaSourceId = function() {\n        return mediaSourceId;\n    };\n\n    self.setMediaSourceId = function(sourceId) {\n        mediaSourceId = sourceId;\n    };\n\n    return self;\n}\n","import {WebRtcAdaptorModel} from './webRtcAdaptorModel';\n\nexport function WebRtcPluginAdaptorModel() {\n    var self = {},\n        //this variable will be always set by a plugin adaptor.\n        pluginVersion = {\n            major: 0,\n            minor: 0,\n\n            min_revision: 0,\n            min_build: 0,\n\n            current_revision: 0,\n            current_build: 0\n        };\n\n    var base = WebRtcAdaptorModel();\n    Object.assign(self, base);\n\n    self.getPluginVersion = function() {\n        return pluginVersion;\n    };\n\n    self.setPluginVersion = function(version) {\n        pluginVersion = version;\n    };\n\n    self.getUserMediaContraints = function() {\n        return {\n            audio: true,\n            video: true\n        };\n    };\n\n    return self;\n}\n","import constants from '../constants';\nimport {mediaErrors} from '../call/call';\n\nexport function WebRtcManager({\n    WebRtcAdaptorFactory: _webRtcAdaptorFactory,\n    LogManager: _logManager,\n    TurnCredentialsManager: _turnCredentialsManager,\n    Navigator: _navigator,\n    Utils: _utils,\n    GlobalBroadcaster: _globalBroadcaster\n}) {\n    var self = this,\n        rtcAdaptor,\n        logger = _logManager.getLogger('WebRtcManager');\n\n    function setSuccessCallbacktoCall(call, successCallback) {\n        logger.debug('Setting the call\\'s successCallback.');\n        call.successCallback = successCallback;\n    }\n\n    function clearSuccessParametersFromCall(call) {\n        logger.debug('Clearing the call\\'s successCallback.');\n        call.successCallback = null;\n    }\n\n    self.onCredentialsReceived = function() {\n        if (rtcAdaptor) {\n            rtcAdaptor.setIceServerUrl(self.addTurnCredentialsToUrl());\n        }\n    };\n\n    _turnCredentialsManager.onCredentialsReceived = self.onCredentialsReceived;\n\n    self.addTurnCredentialsToUrl = function() {\n        var i, serverType,\n            iceServerUrl = rtcAdaptor.getIceServerUrl(),\n            turnCredentials = _turnCredentialsManager.get();\n        if (turnCredentials) {\n            logger.info('Turn credentials are avaliable.');\n            if (iceServerUrl instanceof Array) {\n                for (i = 0; i < iceServerUrl.length; i++) {\n                    serverType = iceServerUrl[i].urls.substring(0, iceServerUrl[i].urls.indexOf(':'));\n                    if (serverType === 'turn' || serverType === 'turns') {\n                        iceServerUrl[i].credential = turnCredentials.credential;\n                        iceServerUrl[i].username = turnCredentials.username;\n                    }\n                }\n            }\n        }\n        return iceServerUrl;\n    };\n\n    self.canOriginatorSendLocalVideo = function(call) {\n        return rtcAdaptor.canOriginatorSendLocalVideo(call);\n    };\n\n    self.canOriginatorReceiveRemoteVideo = function(call) {\n        return rtcAdaptor.canOriginatorReceiveRemoteVideo(call);\n    };\n\n    self.onFcsSetupCompleted = function(fcsConfig) {\n        logger.debug('FCS Config updated: ' + JSON.stringify(fcsConfig));\n        self.initMedia(null, null, fcsConfig);\n    };\n\n    self.initMedia = function(onSuccess, onFailure, options) {\n        logger.info('Initializing media for call');\n\n        if (!rtcAdaptor) {\n            rtcAdaptor = _webRtcAdaptorFactory.getWebRtcAdaptor(options);\n        }\n\n        if (options) {\n            if (options.iceserver) {\n\n                // RTCIceServer.url is deprecated; should use .urls instead.\n                // Update the passed-in options for backwards compatibility.\n                for (var i = 0; i < options.iceserver.length; i++) {\n                    if(options.iceserver[i].url) {\n                        options.iceserver[i].urls = options.iceserver[i].url;\n                        delete options.iceserver[i].url;\n                    }\n                }\n\n                // Adding raw iceserver config to adaptor\n                // to make addTurnCredentialsToUrl method work properly\n                rtcAdaptor.setIceServerUrl(options.iceserver);\n                rtcAdaptor.setIceServerUrl(self.addTurnCredentialsToUrl(options.iceserver));\n            }\n            if (options.webrtcdtls !== undefined) {\n                rtcAdaptor.setDtlsEnabled(options.webrtcdtls);\n            }\n            if (options.dscpEnabled !== undefined) {\n                rtcAdaptor.setDscpEnabled(options.dscpEnabled);\n            }\n\n            if (options.localVideoContainer) {\n                rtcAdaptor.setLocalVideoContainer(options.localVideoContainer);\n            }\n\n            if (options.remoteVideoContainer) {\n                rtcAdaptor.setRemoteVideoContainer(options.remoteVideoContainer);\n            }\n\n            if (options.videoContainer) {\n                rtcAdaptor.setDefaultVideoContainer(options.videoContainer);\n            }\n        }\n\n        if (rtcAdaptor.isInitialized()) {\n            _utils.callFunctionIfExist(onSuccess);\n        } else {\n            rtcAdaptor.initMedia(onSuccess, onFailure, options);\n        }\n    };\n\n    self.privateGetUserMedia = function(onSuccess, onFailure, data) {\n        var audioConstraints = rtcAdaptor.prepareAudioConstraints(),\n            videoConstraints = rtcAdaptor.prepareVideoConstraints({\n                isVideoEnabled: true\n            }),\n            returnParams = {\n                onSuccess: onSuccess,\n                onFailure: onFailure\n            };\n\n        if (data.options) {\n            if (data.options.audio !== undefined) {\n                audioConstraints = data.options.audio;\n            }\n            if (data.options.video !== undefined) {\n                videoConstraints = data.options.video;\n            }\n        }\n\n        if (!audioConstraints && !videoConstraints) {\n            _utils.callFunctionIfExist(onFailure, mediaErrors.INVALID_PARAMETER);\n            return;\n        }\n\n        returnParams.options = {\n            audioConstraints: audioConstraints,\n            videoConstraints: videoConstraints,\n            privateStream: data.privateStream\n        };\n\n        rtcAdaptor.privateGetUserMedia(returnParams);\n    };\n\n    self.getWebRtcStats = function(call, onSuccess, onFailure) {\n        rtcAdaptor.getWebRtcStats(call, onSuccess, onFailure);\n    };\n\n    self.getNativeWebRtcStats = function(call, onSuccess, onFailure) {\n        rtcAdaptor.getNativeWebRtcStats(call, onSuccess, onFailure);\n    };\n\n    self.startWebRtcStatsTimer = function(call, interval, onSuccess, onFailure) {\n        self.stopWebRtcStatsTimer(call);\n\n        call.statsTimer = setInterval(function() {\n            rtcAdaptor.getWebRtcStats(call, onSuccess, onFailure);\n        }, interval);\n    };\n\n    self.stopWebRtcStatsTimer = function(call) {\n        if (call.statsTimer) {\n            clearInterval(call.statsTimer);\n            call.statsTimer = undefined;\n        }\n    };\n\n    self.canMergeAudio = function() {\n        if(rtcAdaptor) {\n            return rtcAdaptor.mergeAudioStream;\n        } else {\n            logger.debug('Media not initiliazed yet.');\n            return false;\n        }\n    };\n\n    self.mergeAudioStream = function(call1, call2){\n        rtcAdaptor.mergeAudioStream(call1, call2);\n    };\n\n    self.unMergeAudioStream = function(call1, call2){\n        rtcAdaptor.unMergeAudioStream(call1, call2);\n    };\n\n    self.getUserMedia = function(onSuccess, onFailure, options) {\n        var audioConstraints = rtcAdaptor.prepareAudioConstraints(options),\n            videoConstraints = rtcAdaptor.prepareVideoConstraints(options),\n            returnParams = {\n                onSuccess: onSuccess,\n                onFailure: onFailure\n            };\n\n        if (!audioConstraints && !videoConstraints) {\n            //no need to reach the adaptor if we are not asking for audio or video\n            onSuccess({video:false, audio:false});\n            return;\n        }\n\n        returnParams.options = {\n            audioConstraints: audioConstraints,\n            videoConstraints: videoConstraints\n        };\n\n        logger.info('getting user media - userAgent: ' + _navigator.userAgent +\n            ' constraints: ' + JSON.stringify({\n            audio: audioConstraints,\n            video: videoConstraints\n        }));\n\n        rtcAdaptor.getUserMedia(returnParams);\n    };\n\n    /*\n     * Forward the function call to the rtcAdaptor.\n     */\n    self.changeSpeaker = function(speakerId, onSuccess, onFailure) {\n        // If media has not been initialized yet, rtcAdaptor will be undefined.\n        if(rtcAdaptor) {\n            rtcAdaptor.setContainerSinkId(speakerId, onSuccess, onFailure);\n        } else {\n            _utils.callFunctionIfExist(onFailure, 'Media not initialized.');\n        }\n    };\n\n    self.startScreenMedia = function(onSuccess, onFailure, options, onEnded) {\n        logger.info('getting screen media for call: started - userAgent: ' + _navigator.userAgent);\n\n        if (options) {\n            if (options.width) {\n                rtcAdaptor.setScreenWidth(options.width);\n            }\n\n            if (options.height) {\n                rtcAdaptor.setScreenHeight(options.height);\n            }\n\n            if (options.frameRate) {\n                rtcAdaptor.setScreenFrameRate(options.frameRate);\n            }\n\n            if(options.mediaSourceId) {\n                rtcAdaptor.setMediaSourceId(options.mediaSourceId);\n            }\n        }\n\n        rtcAdaptor.startScreenMedia(onSuccess, onFailure, onEnded);\n    };\n\n    self.stopScreenMedia = function() {\n\n        // If media source id was set via options, unset it.\n        if(rtcAdaptor.getMediaSourceId()) {\n            rtcAdaptor.setMediaSourceId('');\n        }\n\n        rtcAdaptor.stopScreenMedia();\n    };\n\n    self.createDataChannelOffer = function(dataChannelWrapperObj, successCallback, failureCallback) {\n        var successCallbackWrapper = function(sdp) {\n            clearSuccessParametersFromCall(dataChannelWrapperObj);\n            _utils.callFunctionIfExist(successCallback, sdp);\n        };\n\n        setSuccessCallbacktoCall(dataChannelWrapperObj, successCallbackWrapper);\n\n        if(rtcAdaptor.createPeer(dataChannelWrapperObj)){\n            rtcAdaptor.createDataChannel(\n                dataChannelWrapperObj,\n                function createDataChannelSuccessCallback() {\n                    rtcAdaptor.createDataChannelOffer(\n                        dataChannelWrapperObj,\n                        successCallbackWrapper,\n                        function createOfferFailureCallback(error) {\n                            clearSuccessParametersFromCall(dataChannelWrapperObj);\n                            _utils.callFunctionIfExist(failureCallback, error);\n                        });\n                },\n                function createDataChannelFailureCallback(error) {\n                    _utils.callFunctionIfExist(failureCallback, error);\n                }\n            );\n        } else {\n            _utils.callFunctionIfExist(failureCallback);\n        }\n    };\n\n    self.createDataChannelAnswer = function(dataChannelWrapperObj, successCallback, failureCallback) {\n        var successCallbackWrapper = function(sdp) {\n            clearSuccessParametersFromCall(dataChannelWrapperObj);\n            _utils.callFunctionIfExist(successCallback, sdp);\n        };\n\n        setSuccessCallbacktoCall(dataChannelWrapperObj, successCallbackWrapper);\n\n        if(rtcAdaptor.createPeer(dataChannelWrapperObj)){\n            rtcAdaptor.createDataChannelAnswer(\n                dataChannelWrapperObj,\n                successCallbackWrapper,\n                function createDataChannelAnswerFailureCallback(error) {\n                    clearSuccessParametersFromCall(dataChannelWrapperObj);\n                    _utils.callFunctionIfExist(failureCallback, error);\n                });\n        } else {\n            _utils.callFunctionIfExist(failureCallback);\n        }\n    };\n\n    self.createOffer = function(call, successCallback, failureCallback, sendInitialVideo, offerToReceiveVideo, isAnswer) {\n        logger.info('create offer SDP: sendInitialVideo= ' + sendInitialVideo);\n\n        var successCallbackWrapper = function(sdp) {\n            clearSuccessParametersFromCall(call);\n            call.initialVideoState = sendInitialVideo;\n\n            rtcAdaptor.setDTLSRole(call,'actpass');\n\n            call.lastLocalSdp = sdp;\n            rtcAdaptor.restoreUserMuteStateOfCall(call);\n            rtcAdaptor.setOriginatorSendLocalVideo(call, sdp, sendInitialVideo);\n            if (typeof(successCallback) === 'function') {\n                successCallback(sdp);\n            }\n        };\n\n        setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n        if (!call.peer) {\n            if(rtcAdaptor.createPeer(call)){\n                rtcAdaptor.createOffer(call, successCallbackWrapper, function(err) {\n                    clearSuccessParametersFromCall(call);\n                    if (typeof(failureCallback) === 'function') {\n                        failureCallback(err);\n                    }\n                }, sendInitialVideo, offerToReceiveVideo, isAnswer);\n            } else {\n                _utils.callFunctionIfExist(failureCallback, 2);\n            }\n        }\n    };\n\n    self.createAnswer = function(call, successCallback, failureCallback, sendInitialVideo) {\n        logger.info('creating answer SDP: callid= ' + call.id);\n        logger.info('creating answer SDP: sendInitialVideo= ' + sendInitialVideo);\n\n        var successCallbackWrapper = function(sdp) {\n            clearSuccessParametersFromCall(call);\n            call.initialVideoState = sendInitialVideo;\n            call.stableLocalSdp = sdp;\n            rtcAdaptor.setOriginatorSendLocalVideo(call, sdp, sendInitialVideo);\n            rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n            rtcAdaptor.setDTLSRoleFromStableLocalSDP(call);\n            if (typeof(successCallback) === 'function') {\n                successCallback(sdp);\n            }\n        };\n\n        setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n        rtcAdaptor.addCallIdInPluginContainer(call);\n\n        if (!call.peer) {\n            if(rtcAdaptor.createPeer(call)){\n                rtcAdaptor.createAnswer(call, successCallbackWrapper, function(err) {\n                    clearSuccessParametersFromCall(call);\n                    if (typeof(failureCallback) === 'function') {\n                        failureCallback(err);\n                    }\n                }, sendInitialVideo);\n            } else {\n                _utils.callFunctionIfExist(failureCallback, 2);\n            }\n        }\n    };\n\n    self.processDataChannelAnswer = function(call, successCallback, failureCallback) {\n        if (call.peer) {\n\n            var successCallbackWrapper = function() {\n                clearSuccessParametersFromCall(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback();\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.processDataChannelAnswer(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            });\n        }\n    };\n\n    self.processAnswer = function(call, successCallback, failureCallback, isAnswer) {\n        if (call.peer) {\n\n            var successCallbackWrapper = function() {\n                clearSuccessParametersFromCall(call);\n                call.stableLocalSdp = call.lastLocalSdp;\n                rtcAdaptor.restoreUserMuteStateOfCall(call);\n                rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback();\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.handleDTLSRoleFromRemoteSDP(call);\n\n            rtcAdaptor.addCallIdInPluginContainer(call);\n\n            rtcAdaptor.processAnswer(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            }, isAnswer);\n        }\n    };\n\n    self.processRespond = function(call, successCallback, failureCallback, isJoin) {\n        if (call.peer) {\n\n            var successCallbackWrapper = function() {\n                clearSuccessParametersFromCall(call);\n                call.stableLocalSdp = call.lastLocalSdp;\n                rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback();\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.handleDTLSRoleFromRemoteSDP(call);\n            rtcAdaptor.addCallIdInPluginContainer(call);\n\n            rtcAdaptor.processRespond(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            }, isJoin);\n        }\n    };\n\n    self.createUpdate = function(call, successCallback, failureCallback, isVideoStart) {\n        logger.info('createUpdate: isVideoStart= ' + isVideoStart);\n\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                call.lastLocalSdp = sdp;\n                rtcAdaptor.muteVideoTrack(call, !isVideoStart, true);\n                rtcAdaptor.setOriginatorSendLocalVideo(call, sdp, isVideoStart);\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.createUpdate(call, successCallbackWrapper, failureCallback, isVideoStart);\n        }\n    };\n\n    self.processUpdate = function(call, successCallback, failureCallback, local_hold_status) {\n        logger.info('processUpdate: local_hold_status:' + local_hold_status);\n\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                call.stableLocalSdp = sdp;\n                rtcAdaptor.restoreUserMuteStateOfCall(call);\n                rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.addCallIdInPluginContainer(call);\n\n            rtcAdaptor.processUpdate(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            }, local_hold_status);\n        }\n    };\n\n    self.createReOffer = function(call, successCallback, failureCallback, usePreviousMediaDirection) {\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                call.lastLocalSdp = sdp;\n                rtcAdaptor.restoreUserMuteStateOfCall(call);\n                rtcAdaptor.setDTLSRole(call, 'actpass');\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.createReOffer(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            }, usePreviousMediaDirection);\n        }\n    };\n\n    self.createHoldUpdate = function(call, hold, remote_hold_status, successCallback, failureCallback) {\n        logger.info('create hold update local hold= ' + hold + ' remote hold= ' + remote_hold_status);\n\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                call.lastLocalSdp = sdp;\n                if (hold || remote_hold_status) {\n                    rtcAdaptor.muteOnHold(call, true);\n                } else {\n                    rtcAdaptor.restoreUserMuteStateOfCall(call);\n                }\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.createHoldUpdate(call, hold, remote_hold_status, successCallbackWrapper,\n                function(err) {\n                    clearSuccessParametersFromCall(call);\n                    if (typeof(failureCallback) === 'function') {\n                        failureCallback(err);\n                    }\n                });\n        }\n    };\n\n    self.processRemoteOfferOnLocalHold = function(call, successCallback, failureCallback) {\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.processRemoteOfferOnLocalHold(call, successCallbackWrapper,\n                function(err) {\n                    clearSuccessParametersFromCall(call);\n                    if (typeof(failureCallback) === 'function') {\n                        failureCallback(err);\n                    }\n                });\n        }\n    };\n\n    self.processEnd = function(call) {\n        if (call.peer) {\n            rtcAdaptor.processEnd(call);\n        }\n    };\n\n    self.processHold = function(call, hold, local_hold_status, successCallback, failureCallback) {\n        logger.info('processHold: local hold= ' + local_hold_status + ' remote hold= ' + hold);\n\n        if (call.peer) {\n\n            var successCallbackWrapper = function(sdp) {\n                clearSuccessParametersFromCall(call);\n                call.stableLocalSdp = sdp;\n                if (!local_hold_status && !hold) {\n                    rtcAdaptor.restoreUserMuteStateOfCall(call);\n                    rtcAdaptor.setOriginatorSendLocalVideo(call, sdp, true);\n                }\n                if (!call.call.isVideoNegotiationAvailable()) {\n                    rtcAdaptor.muteVideoTrack(call, true, true);\n                    rtcAdaptor.setOriginatorSendLocalVideo(call, sdp, false);\n                }\n                rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback(sdp);\n                }\n            };\n\n            rtcAdaptor.handleDTLSRoleFromRemoteSDP(call);\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.addCallIdInPluginContainer(call);\n\n            rtcAdaptor.processHold(call, hold, local_hold_status, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            });\n        }\n    };\n\n    self.processHoldRespond = function(call, successCallback, failureCallback, isJoin) {\n        logger.info('Processing response to hold offer sent');\n\n        if (call.peer) {\n\n            var successCallbackWrapper = function() {\n                clearSuccessParametersFromCall(call);\n                call.stableLocalSdp = call.lastLocalSdp;\n                rtcAdaptor.setOriginatorReceiveRemoteVideo(call);\n                if (typeof(successCallback) === 'function') {\n                    successCallback();\n                }\n            };\n\n            setSuccessCallbacktoCall(call, successCallbackWrapper);\n\n            rtcAdaptor.handleDTLSRoleFromRemoteSDP(call);\n            rtcAdaptor.addCallIdInPluginContainer(call);\n\n            rtcAdaptor.processHoldRespond(call, successCallbackWrapper, function(err) {\n                clearSuccessParametersFromCall(call);\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            }, isJoin);\n        }\n    };\n\n    self.processPreAnswer = function(call, successCallback, failureCallback) {\n        logger.info('processing preanswer from the offer we sent');\n\n        if (call.peer) {\n            rtcAdaptor.processPreAnswer(call, function() {\n                if (typeof(successCallback) === 'function') {\n                    successCallback();\n                }\n            }, function(err) {\n                if (typeof(failureCallback) === 'function') {\n                    failureCallback(err);\n                }\n            });\n\n        }\n\n    };\n\n    self.isDtlsEnabled = function() {\n        return rtcAdaptor.isDtlsEnabled();\n    };\n\n    self.revertRtcState = function(call, successCallback, failureCallback) {\n        // The adapter doesn't pass the call along whenever calling the callback. We bind to it\n        // here to ensure we get the proper callback parameter.\n        var successCallbackWrapper = successCallback && successCallback.bind(undefined, call);\n\n        clearSuccessParametersFromCall(call);\n        rtcAdaptor.revertRtcState(call, successCallbackWrapper, failureCallback);\n    };\n\n    self.getRemoteVideoResolutions = function() {\n        return rtcAdaptor.getRemoteVideoResolutions();\n    };\n\n    self.getLocalVideoResolutions = function() {\n        return rtcAdaptor.getLocalVideoResolutions();\n    };\n\n    self.isAudioSourceAvailable = function() {\n        return rtcAdaptor.getAudioSourceAvailable();\n    };\n\n    self.isVideoSourceAvailable = function() {\n        return rtcAdaptor.getVideoSourceAvailable();\n    };\n\n    self.refreshVideoRenderer = function() {\n        rtcAdaptor.refreshVideoRenderer();\n    };\n\n    self.sendIntraFrame = function(internalCall) {\n        rtcAdaptor.sendIntraFrame(internalCall);\n    };\n\n    self.sendBlackFrame = function(internalCall) {\n        rtcAdaptor.sendBlackFrame(internalCall);\n    };\n\n    self.muteAudioTrack = function(call, mute) {\n        return rtcAdaptor.muteAudioTrack(call, mute, true);\n    };\n\n    self.updateSilenceStatus = function(call) {\n        rtcAdaptor.updateSilenceStatus(call);\n    };\n\n    self.isAudioMuted = function(call) {\n        return rtcAdaptor.isAudioMuted(call);\n    };\n\n    self.addLocalStream = function(call) {\n        rtcAdaptor.addLocalStream(call);\n    };\n\n    self.isPluginEnabled = function() {\n        return rtcAdaptor.isPluginEnabled();\n    };\n\n    self.sendDTMF = function(call, tone) {\n        rtcAdaptor.sendDTMF(call, tone);\n    };\n\n    self.showSettingsWindow = function() {\n        rtcAdaptor.showSettingsWindow();\n    };\n\n    self.createStreamRenderer = function(stream, container, options) {\n        return rtcAdaptor.createStreamRenderer(stream, container, options);\n    };\n\n    self.disposeStreamRenderer = function(container) {\n        rtcAdaptor.disposeStreamRenderer(container);\n    };\n\n    self.set_logSeverityLevel = function(level) {\n        rtcAdaptor.set_logSeverityLevel(level);\n    };\n\n    self.enable_logCallback = function() {\n        rtcAdaptor.enable_logCallback();\n    };\n\n    self.disable_logCallback = function() {\n        rtcAdaptor.disable_logCallback();\n    };\n\n    self.get_audioInDeviceCount = function() {\n        return rtcAdaptor.get_audioInDeviceCount();\n    };\n\n    self.get_audioOutDeviceCount = function() {\n        return rtcAdaptor.get_audioOutDeviceCount();\n    };\n\n    self.get_videoDeviceCount = function() {\n        return rtcAdaptor.get_videoDeviceCount();\n    };\n\n    self.storeLocalStreamToCall = function(call, localStreamId) {\n        rtcAdaptor.storeLocalStreamToCall(call, localStreamId);\n    };\n\n    self.updateLocalStreamToCall = function(call, localStreamId) {\n        rtcAdaptor.updateLocalStreamToCall(call, localStreamId);\n    };\n\n    self.deleteLocalStream = function(call) {\n        rtcAdaptor.endLocalMedia(call.localMedia);\n    };\n\n    self.getStreamById = function(id) {\n        return rtcAdaptor.getStreamById(id);\n    };\n\n    self.removeStreamById = function(id) {\n        rtcAdaptor.removeStreamById(id);\n    };\n\n    self.setSelectedMicrophoneId = function(_selectedMicrophoneId) {\n        rtcAdaptor.setSelectedMicrophoneId(_selectedMicrophoneId);\n    };\n\n    self.setSelectedSpeakerId = function(_selectedSpeakerId, onSuccess, onFailure) {\n        // If media has not been initialized yet, rtcAdaptor will be undefined.\n        if(rtcAdaptor) {\n            rtcAdaptor.setSelectedSpeakerId(_selectedSpeakerId);\n            _utils.callFunctionIfExist(onSuccess);\n        } else {\n            _utils.callFunctionIfExist(onFailure, 'Media not initialized.');\n        }\n    };\n\n    self.setSelectedCameraId = function(_selectedCameraId) {\n        rtcAdaptor.setSelectedCameraId(_selectedCameraId);\n    };\n\n    self.getCameraList = function(onSuccess) {\n        rtcAdaptor.getCameraList(function(cameraList) {\n            _utils.callFunctionIfExist(onSuccess, cameraList);\n        });\n    };\n\n    self.getMicrophoneList = function(onSuccess) {\n        rtcAdaptor.getMicrophoneList(function(microphoneList) {\n            _utils.callFunctionIfExist(onSuccess, microphoneList);\n        });\n    };\n\n    self.getSpeakerList = function(onSuccess) {\n        rtcAdaptor.getSpeakerList(function(speakerList) {\n            _utils.callFunctionIfExist(onSuccess, speakerList);\n        });\n    };\n\n    self.addRemoteCandidates = function(call, candidateArray) {\n        rtcAdaptor.addRemoteCandidates(call, candidateArray);\n    };\n\n    _globalBroadcaster.subscribe(constants.EVENT.FCS_SETUP_COMPLETED, self.onFcsSetupCompleted);\n\n    //@{test-methods}\n    self.setRtcLibrary = function(_rtcLibrary) {\n        rtcAdaptor = _rtcLibrary;\n    };\n    //@{test-methods}\n}\n","\nexport function WebRtcAdaptorFactory({\n    Navigator: _navigator,\n    LogManager: _logManager,\n    Config: _config,\n\n    WebRtcChromeAdaptorFactory: _WebRtcChromeAdaptor,\n    WebRtcContainerAdaptorFactory: _WebRtcContainerAdaptor,\n    WebRtcFirefoxAdaptorFactory: _WebRtcFirefoxAdaptor,\n    WebRtcFirefoxEsrAdaptorFactory: _WebRtcFirefoxEsrAdaptor,\n    WebRtcPluginv22AdaptorFactory: _WebRtcPluginv22Adaptor,\n    WebRtcPluginv31AdaptorFactory: _WebRtcPluginv31Adaptor\n}) {\n    var logger = _logManager.getLogger('WebRtcAdaptorFactory'),\n        NAVIGATOR_TYPES = {\n            CHROME: 'chrome',\n            FIREFOX: 'firefox',\n            'PLUGIN': 'plugin',\n            CONTAINER: 'container'\n        },\n        PLUGIN_MODES = {\n            // 3.0 Enabler Plugin\n            WEBRTCH264: 'webrtch264',\n            // 2.2 Enabler Plugin\n            WEBRTC22: 'webrtc22',\n            // Default Enabler Plugin\n            WEBRTC: 'webrtc',\n            // Native For Chrome Browser and Default Enabler Plugin for other Browsers\n            AUTO: 'auto',\n            // Native For Chrome Browser and Default Enabler Plugin for other Browsers\n            AUTO22: 'auto22',\n            // Native For Chrome Browser and 3.0 Enabler Plugin for other Browsers\n            AUTOH264: 'autoh264',\n            // Native For Chrome AND Firefox Browser and Enabler Plugin for other Browsers\n            AUTOFIREFOX: 'autofirefox'\n        },\n        DEFAULT_RTC_PLUGIN_MODE = PLUGIN_MODES.WEBRTCH264,\n        DEFAULT_RTC_ADAPTOR = _WebRtcPluginv31Adaptor,\n        PLUGIN_MODE_LOOKUP_TABLE = {\n            chrome: {\n                webrtc: DEFAULT_RTC_PLUGIN_MODE,\n                autofirefox: PLUGIN_MODES.AUTO,\n                autoh264: PLUGIN_MODES.AUTO,\n                webrtch264: PLUGIN_MODES.WEBRTCH264\n            },\n            firefox: {\n                webrtc: DEFAULT_RTC_PLUGIN_MODE,\n                auto: DEFAULT_RTC_PLUGIN_MODE,\n                auto22: PLUGIN_MODES.WEBRTC22,\n                autoh264: PLUGIN_MODES.WEBRTCH264,\n                autofirefox: PLUGIN_MODES.AUTO\n            },\n            plugin: {\n                auto: DEFAULT_RTC_PLUGIN_MODE,\n                auto22: PLUGIN_MODES.WEBRTC22,\n                autoh264: PLUGIN_MODES.WEBRTCH264,\n                autofirefox: DEFAULT_RTC_PLUGIN_MODE,\n                webrtc: DEFAULT_RTC_PLUGIN_MODE\n            }\n        },\n        ADAPTOR_LOOKUP_TABLE = {\n            chrome: {\n                auto: _WebRtcChromeAdaptor,\n                autoh264: _WebRtcChromeAdaptor,\n                webrtc22: _WebRtcPluginv22Adaptor,\n                webrtch264: _WebRtcPluginv31Adaptor\n            },\n            firefox: {\n                auto: _WebRtcFirefoxAdaptor,\n                autoesr: _WebRtcFirefoxEsrAdaptor,\n                webrtc22: _WebRtcPluginv22Adaptor,\n                webrtch264: _WebRtcPluginv31Adaptor\n            },\n            plugin: {\n                webrtc22: _WebRtcPluginv22Adaptor,\n                webrtch264: _WebRtcPluginv31Adaptor\n            },\n            container: {\n                auto: _WebRtcContainerAdaptor,\n                autoh264: _WebRtcContainerAdaptor,\n                webrtc22: _WebRtcContainerAdaptor,\n                webrtch264: _WebRtcContainerAdaptor\n            }\n        },\n        COMPOSIT_PLUGIN_MODES = {\n            // Default Enabler Plugin\n            WEBRTC: 'webrtc',\n            // Native For Chrome And Firefox Browser and Default Enabler Plugin for other Browsers\n            AUTO: 'auto'\n        },\n        COMPOSIT_ADAPTOR_LOOKUP_TABLE = {\n            chrome: {\n                auto: _WebRtcChromeAdaptor,\n                webrtc: DEFAULT_RTC_ADAPTOR\n            },\n            firefox: {\n                auto: _WebRtcFirefoxAdaptor,\n                autoesr: _WebRtcFirefoxEsrAdaptor,\n                webrtc: DEFAULT_RTC_ADAPTOR\n            },\n            plugin: {\n                auto: DEFAULT_RTC_ADAPTOR,\n                webrtc: DEFAULT_RTC_ADAPTOR\n            },\n            container: {\n                auto: _WebRtcContainerAdaptor,\n                webrtc: _WebRtcContainerAdaptor\n            }\n        },\n        pluginMode;\n\n    function getNavigatorType() {\n        var type, version, regex;\n        if (_navigator.userAgent && _navigator.userAgent.indexOf('GENBANDOmni') !== -1 && _navigator.userAgent.indexOf('Chrome') === -1) {\n\n            /*\n                Special case: Handle the OmniContainer used by SO explicitly.\n                Use the userAgent of the client to determine which adaptor to use.\n                    - Desktop:\n                        - 1.1 requires the Container adaptor.\n                        - 1.2+ should use the Chrome adaptor.\n                    - Android: Is not handled by this if case (doesn't enter it).\n                    - iOS: Uses to the Container adaptor for now.\n                TODO: Remove this special case once they've set their versions.\n             */\n\n            // Check the version of the OmniContainer being used.\n            // Mobile clients don't specify version, so default to undefined value if not found.\n            var omniRegex = new RegExp(/GENBANDOmni\\.(\\d\\.\\d)/);\n            var omniVersion = (_navigator.userAgent.match(omniRegex) || []).pop();\n\n            // Version 1.1 and iOS require the Container Adaptor.\n            if(omniVersion === '1.1' || typeof omniVersion === 'undefined') {\n                type = NAVIGATOR_TYPES.CONTAINER;\n            } else {\n                // Other desktop versions should use the Chrome adaptor.\n                type = NAVIGATOR_TYPES.CHROME;\n            }\n\n        } else if (_navigator.webkitGetUserMedia) {\n            type = NAVIGATOR_TYPES.CHROME;\n            regex = new RegExp(/\\Chrome\\/(\\d*)/);\n        } else if (_navigator.mozGetUserMedia) {\n            type = NAVIGATOR_TYPES.FIREFOX;\n            regex = new RegExp(/\\Firefox\\/(\\d*)/);\n        } else {\n            type = NAVIGATOR_TYPES.PLUGIN;\n        }\n        if (regex && _navigator.userAgent) {\n            version = parseInt(_navigator.userAgent.match(regex).pop(), 10);\n        }\n\n        logger.debug('Navigator type determined to be ' + type);\n\n        return {\n            type: type,\n            version: version\n        };\n    }\n\n    function identifyPluginMode(options) {\n        var i;\n\n        if (!options || !options.pluginMode) {\n            return PLUGIN_MODES.AUTO;\n        }\n\n        for (i in PLUGIN_MODES) {\n            if (PLUGIN_MODES[i] === options.pluginMode) {\n                return PLUGIN_MODES[i];\n            }\n        }\n\n        return PLUGIN_MODES.AUTO;\n    }\n\n    function getPluginModeForComposition(navigatorType) {\n        var pluginMode = PLUGIN_MODES.AUTO,\n            validPluginMode = false,\n            h264Enabled,\n            pluginModeBrowser = _config.pluginMode[navigatorType.type],\n            pluginModeBrowserVersion,\n            browserVersion, i, regex;\n\n        if (pluginModeBrowser) {\n            regex = new RegExp(/^\\d+\\+$/);\n            if (pluginModeBrowser.version && regex.test(pluginModeBrowser.version)) {\n                pluginModeBrowserVersion = parseInt(pluginModeBrowser.version.replace(/\\+/, ''), 10);\n            }\n            browserVersion = navigatorType.version;\n            if (pluginModeBrowser.mode && (!pluginModeBrowserVersion || browserVersion >= pluginModeBrowserVersion)) {\n                pluginMode = pluginModeBrowser.mode;\n            } else if (_config.pluginMode.mode) {\n                pluginMode = _config.pluginMode.mode;\n            }\n\n            if (typeof pluginModeBrowser.h264 !== 'undefined' && (!pluginModeBrowserVersion || browserVersion >= pluginModeBrowserVersion)) {\n                h264Enabled = pluginModeBrowser.h264;\n            } else {\n                h264Enabled = _config.pluginMode.h264;\n            }\n        } else {\n            pluginMode = _config.pluginMode.mode;\n            h264Enabled = _config.pluginMode.h264;\n        }\n\n        // plugin mode validity check\n        for (i in COMPOSIT_PLUGIN_MODES) {\n            if (COMPOSIT_PLUGIN_MODES[i] === pluginMode) {\n                validPluginMode = true;\n            }\n        }\n        if (!validPluginMode) {\n            pluginMode = PLUGIN_MODES.AUTO;\n        }\n\n        // h264 validity check\n        if (h264Enabled !== true && h264Enabled !== false) {\n            h264Enabled = undefined;\n        }\n\n        return {\n            pluginMode: pluginMode,\n            h264Enabled: h264Enabled\n        };\n    }\n\n    function getPluginMode(options, navigatorType) {\n        var pluginMode = identifyPluginMode(options);\n\n        return PLUGIN_MODE_LOOKUP_TABLE[navigatorType.type][pluginMode] || pluginMode;\n    }\n\n    this.getWebRtcAdaptor = function(options) {\n        var adaptorFactory, navigatorType = getNavigatorType(),\n            adaptor, pluginModeAndH264Bundle, h264Enabled;\n\n        if (_config.pluginMode) {\n            pluginModeAndH264Bundle = getPluginModeForComposition(navigatorType);\n            pluginMode = pluginModeAndH264Bundle.pluginMode;\n            h264Enabled = pluginModeAndH264Bundle.h264Enabled;\n            if (pluginMode === 'auto' && navigatorType.type === 'firefox' && navigatorType.version < 40) {\n                pluginMode = 'autoesr';\n            }\n            adaptorFactory = COMPOSIT_ADAPTOR_LOOKUP_TABLE[navigatorType.type][pluginMode];\n        } else {\n            pluginMode = getPluginMode(options, navigatorType);\n            if (pluginMode === 'auto' && navigatorType.type === 'firefox' && navigatorType.version < 40) {\n                pluginMode = 'autoesr';\n            }\n            adaptorFactory = ADAPTOR_LOOKUP_TABLE[navigatorType.type][pluginMode];\n        }\n\n        if (!adaptorFactory) {\n            // This seems unnecessary, still keeping it just in case of a weird\n            // condition\n            logger.debug('Invalid Plugin Mode Detected, Treated as WEBRTC');\n            pluginMode = DEFAULT_RTC_PLUGIN_MODE;\n            adaptorFactory = DEFAULT_RTC_ADAPTOR;\n        }\n\n        if(navigatorType.type === 'firefox' && (pluginMode === PLUGIN_MODES.WEBRTCH264 ||\n                                                pluginMode === PLUGIN_MODES.WEBRTC22 ||\n                                                pluginMode === PLUGIN_MODES.WEBRTC) ) {\n            logger.error('Plugins for firefox are no longer supported.');\n        }\n\n        logger.debug('Adaptor initializing from ' + navigatorType + ' browser and ' + pluginMode + ' plugIn mode');\n        adaptor = adaptorFactory();\n        //TODO: set h264Enabled for adaptor\n        if (typeof h264Enabled !== 'undefined') {\n            adaptor.setH264Enabled(h264Enabled);\n        }\n        return adaptor;\n    };\n\n    // Used for tests.\n    this.getLastPluginMode = function() {\n        return pluginMode;\n    };\n\n    this.getPluginModes = function() {\n        return PLUGIN_MODES;\n    };\n\n    this.getDefaultRtcPluginMode = function() {\n        return DEFAULT_RTC_PLUGIN_MODE;\n    };\n\n    this.getDefaultRtcAdaptor = function() {\n        return DEFAULT_RTC_ADAPTOR;\n    };\n\n    //@{test-methods}\n    this.getNavigatorType = getNavigatorType;\n    //@{test-methods}\n}\n","import { eventChannel } from 'redux-saga'\nimport { call, put, take, takeEvery } from 'redux-saga/effects'\nimport { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\n\nimport { devicesActions } from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport { convertDevices } from '../utils/mediaDevices'\n\n// Get the logger\nconst log = logManager.getLogger('CALL')\n\n/**\n * Naively checks whether navigator.mediaDevices is supported in this environment.\n * @method isSupported\n * @return {boolean}\n */\nfunction isSupported () {\n  return typeof navigator !== 'undefined' && typeof navigator.mediaDevices !== 'undefined'\n}\n\n// TODO: Somewhere else should \"initialize\" this.\nif (!isSupported()) {\n  log.warn('MediaDevices not supported; will not watch for media device changes.')\n}\n\n/**\n * Saga watcher.\n * Forwards actions to checkMediaDevices saga.\n * @method watchCheckMediaDevices\n */\nexport function * watchCheckMediaDevices () {\n  yield takeEvery(actionTypes.CHECK_DEVICES, checkMediaDevices)\n}\n\n/**\n * Retrieves media devices when requested.\n * @method checkMediaDevices\n */\nexport function * checkMediaDevices () {\n  if (!isSupported()) {\n    yield put(\n      devicesActions.checkDevicesFinish({\n        error: new BasicError({\n          code: callCodes.NOT_SUPPORTED,\n          message: 'MediaDevices APIs are not supported in this environment.'\n        })\n      })\n    )\n    return\n  }\n\n  // Redux-saga doesn't like calling this directly.\n  // TODO: Find out why / find a better way to do this.\n  function getDevices () {\n    return navigator.mediaDevices.enumerateDevices()\n  }\n\n  let devices\n  try {\n    devices = yield call(getDevices)\n  } catch (error) {\n    log.debug('Failed to retrieve media devices.', error)\n    yield put(devicesActions.checkDevicesFinish({ error }))\n    return\n  }\n\n  log.debug('Retrieved latest media devices.', devices)\n  // Format the device list into a user-friendly object.\n  devices = convertDevices(devices)\n  yield put(devicesActions.checkDevicesFinish({ devices }))\n}\n\n/**\n * Listens for device changes.\n * Groups changes within a short time period into a single emitted event.\n * @method onDeviceChange\n */\nexport function * onDeviceChange () {\n  if (!isSupported()) {\n    return\n  }\n\n  const deviceChangeChannel = eventChannel(emit => {\n    let recentDeviceChange = false\n\n    navigator.mediaDevices.ondevicechange = () => {\n      log.info('Media device change detected.')\n      // A physical device change results in one event per\n      // device \"kind\". Group the events together.\n      if (!recentDeviceChange) {\n        recentDeviceChange = true\n        setTimeout(function () {\n          recentDeviceChange = false\n          emit(devicesActions.checkDevices())\n        }, 50)\n      }\n    }\n\n    // Return unsubscribe function.\n    return () => {\n      navigator.mediaDevices.ondevicechange = null\n    }\n  })\n  while (true) {\n    const action = yield take(deviceChangeChannel)\n    yield put(action)\n  }\n}\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Represents that local video should be displayed in the container.\n * @method startLocalVideo\n * @param  {HTMLElement} videoContainer The container to use for local video.\n * @returns {Object} A flux standard action.\n */\nexport function startLocalVideo (videoContainer) {\n  return {\n    type: actionTypes.START_LOCAL_VIDEO,\n    payload: videoContainer\n  }\n}\n\n/**\n * Represents that a request for local video has finished.\n * @method startLocalVideoFinish\n * @param  {HTMLElement} videoContainer The container that local video is being displayed in.\n * @param  {BasicError} error A Basic error object, if an error occurred.\n * @returns {Object} A flux standard action.\n */\nexport function startLocalVideoFinish (videoContainer, error) {\n  return {\n    type: actionTypes.START_LOCAL_VIDEO_FINISH,\n    payload: error || videoContainer,\n    error: !!error\n  }\n}\n\n/**\n * Represents that local video should stop being displayed.\n * @method stopLocalVideo\n * @returns {Object} A flux standard action.\n */\nexport function stopLocalVideo () {\n  return {\n    type: actionTypes.STOP_LOCAL_VIDEO\n  }\n}\n\n/**\n * Represents that an action to stop local video has finished.\n * @method stopLocalVideoFinish\n * @param  {BasicError} error A Basic error object, if an error occurred.\n * @returns {Object} A flux standard action.\n */\nexport function stopLocalVideoFinish (error) {\n  return {\n    type: actionTypes.STOP_LOCAL_VIDEO_FINISH,\n    payload: error || undefined,\n    error: !!error\n  }\n}\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Represents that media should be initialized.\n * @method initMedia\n * @param {Object} [options]\n * @param {string} [options.chromeExtensionId] ID of the Chrome Screenshare extension to be used.\n * @returns {Object} A flux standard action.\n */\nexport function initMedia (options = {}) {\n  return {\n    type: actionTypes.INIT_MEDIA,\n    payload: options\n  }\n}\n\n/**\n * Represents that media has been / tried to be initialized.\n * @method initMediaFinish\n * @param  {Object} result Information about media support.\n * @param  {boolean} result.error Whether the initialization was successful or not.\n * @param  {number} result.code A unique code describing the result scenario.\n * @param  {string} result.message Human readable message of the result.\n * @returns {Object} A flux standard action.\n */\nexport function initMediaFinish (result) {\n  return {\n    type: actionTypes.INIT_MEDIA_FINISH,\n    payload: result\n  }\n}\n\n/**\n * Represents an action to prompt user for permission to use speakers or camera.\n * @method promptUserMedia\n * @param {Object} [params]\n * @param {boolean} [params.video]\n * @param {boolean} [params.audio]\n * @returns {Object} A flux standard action.\n */\nexport function promptUserMedia (options) {\n  return {\n    type: actionTypes.PROMPT_USER_MEDIA,\n    payload: options\n  }\n}\n\n/**\n * Represents the finish of an action to prompt user for permission to use speakers or camera.\n * @method promptUserMediaFinish\n * @param  {Object} [error] The error object, in the case of an error.\n * @param {Object} [params]\n * @param {boolean} [params.video]\n * @param {boolean} [params.audio]\n * @returns {Object} A flux standard action.\n */\nexport function promptUserMediaFinish (options, error) {\n  if (typeof error !== 'undefined') {\n    return {\n      type: actionTypes.PROMPT_USER_MEDIA_FINISH,\n      payload: { options: options, error: error },\n      error: !!error\n    }\n  } else {\n    return {\n      type: actionTypes.PROMPT_USER_MEDIA_FINISH,\n      payload: options\n    }\n  }\n}\n","import * as actionTypes from '../actionTypes'\nimport { callActionHelper } from './calls'\n\n/**\n * Represents a request to check media devices.\n * @method checkDevices\n * @returns {Object} A flux standard action.\n */\nexport function checkDevices () {\n  return {\n    type: actionTypes.CHECK_DEVICES\n  }\n}\n\n/**\n * Represents that media devices have been checked.\n * @method checkDevicesFinish\n * @param  {Object} $0\n * @param  {Object} $0.devices\n * @param  {Error} $0.error\n * @returns {Object} A flux standard action.\n */\nexport function checkDevicesFinish ({ devices, error }) {\n  var action = {\n    type: actionTypes.CHECK_DEVICES_FINISH\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = devices\n  }\n  return action\n}\n\n/**\n * Represents a request to set default devices for calls.\n * @method setDefaultDevices\n * @param  {Object} devices\n * @param  {string} [devices.camera] The ID of the camera to set as default.\n * @param  {string} [devices.microphone] The ID of the microphone to set as default.\n * @param  {string} [devices.speaker] The ID of the speaker to set as default.\n * @return {Object} A flux standard action.\n */\nexport function setDefaultDevices (devices) {\n  return {\n    type: actionTypes.SET_DEFAULT_DEVICES,\n    payload: {\n      ...devices\n    }\n  }\n}\n\n/**\n * Represents that the default devices was attempted to be set.\n * @method setDefaultDevicesFinish\n * @param  {Object} $0\n * @param  {Object} $0.devices The devices that were set as defaults.\n * @param  {Object} $0.error Error object, in the case of an issue.\n * @return {Object} A flux standard action.\n */\nexport function setDefaultDevicesFinish ({ devices, error }) {\n  return {\n    type: actionTypes.SET_DEFAULT_DEVICES_FINISH,\n    payload: error || devices,\n    error: !!error\n  }\n}\n\n/**\n * Represents a request to change the current speaker in use for a call.\n * @method changeSpeaker\n * @param  {string} speakerId Id of the speaker.\n * @return {Object} A flux standard action.\n */\nexport function changeSpeaker (speakerId) {\n  return {\n    type: actionTypes.CHANGE_SPEAKER,\n    payload: speakerId\n  }\n}\n\n/**\n * Represents that the current speaker was attempted to be changed.\n * @method changeSpeakerFinish\n * @param  {Object} error Error object, in the case of an issue.\n * @return {Object} A flux standard action.\n */\nexport function changeSpeakerFinish ({ speakerId, error }) {\n  return {\n    type: actionTypes.CHANGE_SPEAKER_FINISH,\n    payload: error || speakerId,\n    error: !!error\n  }\n}\n\n/**\n * Represents a request to change the camera/microphone for a call.\n * @method changeInputDevices\n * @param  {string} callId The ID of the call to act upon.\n * @return {Object} A flux standard action.\n */\nexport function changeInputDevices (callId) {\n  return callActionHelper(actionTypes.CHANGE_INPUT_DEVICES, callId)\n}\n\n/**\n * Represents that input devices was (attempted) changed for a call.\n * @method changeInputDevicesFinish\n * @param  {Object} $0\n * @param  {string} $0.callId   Id of the call that changed.\n * @param  {Object} $0.error Error object, in the case of an issue.\n * @return {Object} A flux standard action.\n */\nexport function changeInputDevicesFinish ({ callId, error }) {\n  return callActionHelper(actionTypes.CHANGE_INPUT_DEVICES_FINISH, callId, {\n    error\n  })\n}\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Represents an API request to create an audio bridge.\n * @method createAudioBridge\n * @param  {string} bridgeId UUID to identify the audio bridge.\n * @returns {Object} A flux standard action.\n */\nexport function createAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.CREATE_AUDIO_BRIDGE,\n    payload: {\n      bridgeId\n    }\n  }\n}\n\n/**\n * Represents the result of creating an audio bridge.\n * @method createAudioBridgeFinish\n * @param  {string} bridgeId UUID to identify the audio bridge.\n * @param  {Boolean} [error=false]\n * @returns {Object} A flux standard action.\n */\nexport function createAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.CREATE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n\nexport function closeAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.CLOSE_AUDIO_BRIDGE,\n    payload: { bridgeId }\n  }\n}\n\nexport function closeAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.CLOSE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n\nexport function addCallToBridge (bridgeId, callId) {\n  return {\n    type: actionTypes.BRIDGE_ADD_CALL,\n    payload: { bridgeId, callId }\n  }\n}\n\nexport function updateAudioBridgeCalls (bridgeId, calls) {\n  return {\n    type: actionTypes.UPDATE_AUDIO_BRIDGE_CALLS,\n    payload: { bridgeId, calls }\n  }\n}\n\nexport function addCallToBridgeFinish (bridgeId, callId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.BRIDGE_ADD_CALL_FINISH,\n    payload: error || { bridgeId, callId }\n  }\n}\n\nexport function removeCallFromBridge (bridgeId, callId) {\n  return {\n    type: actionTypes.BRIDGE_REMOVE_CALL,\n    payload: { bridgeId, callId }\n  }\n}\n\nexport function removeCallFromBridgeFinish (bridgeId, callId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.BRIDGE_REMOVE_CALL_FINISH,\n    payload: error || { bridgeId, callId }\n  }\n}\n\nexport function muteAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.MUTE_AUDIO_BRIDGE,\n    payload: { bridgeId }\n  }\n}\n\nexport function muteAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.MUTE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n\nexport function unmuteAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.UNMUTE_AUDIO_BRIDGE,\n    payload: { bridgeId }\n  }\n}\n\nexport function unmuteAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.UNMUTE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n\nexport function silenceAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.SILENCE_AUDIO_BRIDGE,\n    payload: { bridgeId }\n  }\n}\n\nexport function silenceAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.SILENCE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n\nexport function unsilenceAudioBridge (bridgeId) {\n  return {\n    type: actionTypes.UNSILENCE_AUDIO_BRIDGE,\n    payload: { bridgeId }\n  }\n}\n\nexport function unsilenceAudioBridgeFinish (bridgeId, error = false) {\n  return {\n    error: !!error,\n    type: actionTypes.UNSILENCE_AUDIO_BRIDGE_FINISH,\n    payload: error || { bridgeId }\n  }\n}\n","import { WEBRTC_DEVICE_KINDS } from '../constants'\n\n/**\n * Converts an array of MediaDevices into an object keyed on device type.\n * @method parseDevices\n * @param  {Array} [devices=[]] Media devices, in the form of MediaDeviceInfo objects.\n * @return {Object} Media device object.\n */\nexport function convertDevices (devices = []) {\n  const convertedDevices = {\n    microphone: [],\n    camera: [],\n    speaker: []\n  }\n\n  devices.forEach(function (device) {\n    convertedDevices[WEBRTC_DEVICE_KINDS[device.kind]].push(device)\n  })\n\n  return convertedDevices\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a call plugin.\n * @type {string}\n */\nconst name = 'call'\n\n// Export the interface as a single object.\nexport default {\n  name,\n  api,\n  reducer\n}\n","/**\n * The Calls feature is used to make audio and video calls to and from\n * SIP users and PSTN phones.\n *\n * Call functions are all part of the 'call' namespace.\n *\n * Whenever 'user' is mentioned as input parameter within this API, it needs to be provided in the user@domain format.\n *\n * @public\n * @namespace Calls\n */\n\n/**\n * The SDK's media features are used to control WebRTC Media Devices.\n *\n * Media functions are all part of the 'media' namespace.\n *\n * @public\n * @module Media\n */\n\n/**\n * The audio bridge feature allows multiple audio calls to be bridged together\n * for a local three-way call.\n *\n * Audio bridge functions are all part of the 'audioBridge' namespace.\n * @public\n * @module AudioBridge\n * @requires call\n */\n\nimport {\n  getCalls,\n  getCallById,\n  getCustomParametersById,\n  getMediaInfo,\n  getAudioBridges,\n  getBridgeCalls\n} from './selectors'\nimport { getDomain } from '../../auth/interface/selectors'\nimport { getConfiguration } from '../../config/interface/selectors'\nimport { localVideoActions, devicesActions, callsActions, mediaActions, audioBridgeActions } from './actions'\nimport { normalizeSipUri } from '../utils/normalization'\nimport { CALL_STATES_FCS, ICE_MEDIA_STATES } from '../constants'\n\n// Libraries.\nimport { v4 as uuidV4 } from 'uuid'\nimport { pick, defaults } from 'lodash/fp'\nimport { logManager, API_LOG_TAG } from '../../logs'\n\n// Get the logger\nconst log = logManager.getLogger('CALL')\n\n/**\n * Call API.\n * @method api\n * @param  {Function} $0\n * @param  {Function} $0.dispatch - The redux store's dispatch function.\n * @param {Function} $0.getState - The redux store's getState function.\n * @return {Object} api - The call API object.\n */\nexport default function api ({ dispatch, getState }) {\n  const mediaApi = {\n    /**\n     * Sets the selected devices as the default devices.\n     * They will be used for audio output for future calls.\n     * Changing speaker is supported on browser's that support HTMLMediaElement.setSinkId().\n     * @memberof media\n     * @public\n     * @requires call\n     * @requires callMe\n     * @method setDefaultDevices\n     * @param  {Object} devices\n     * @param  {string} [devices.camera] The ID of the camera to set as default.\n     * @param  {string} [devices.microphone] The ID of the microphone to set as default.\n     * @param  {string} [devices.speaker] The ID of the speaker to set as default.\n     * @example\n     * // Set only the default microphone and camera.\n     * client.media.setDefaultDevices({\n     *     camera: 'abc123...',\n     *     microphone: 'def456...'\n     * });\n     */\n    setDefaultDevices (devices) {\n      log.debug(API_LOG_TAG + 'media.setDefaultDevices: ', devices)\n      dispatch(devicesActions.setDefaultDevices(devices))\n    },\n\n    /** Retrieves the available media devices for use.\n     * @memberof media\n     * @public\n     * @requires call\n     * @requires callMe\n     * @method getDevices\n     */\n    getDevices () {\n      log.debug(API_LOG_TAG + 'media.getDevices')\n      dispatch(devicesActions.checkDevices())\n    },\n\n    /**\n     * Starts the local video stream and displays it to the user.\n     * @memberof media\n     * @public\n     * @requires call\n     * @method startPreviewVideo\n     * @param  {HTMLElement} [videoContainer] The container to use for local video.\n     * @example\n     * ``` javascript\n     *  var container = document.getElementById('local-video');\n     *  client.media.startPreviewVideo(container);\n     * ```\n     */\n    startPreviewVideo (videoContainer) {\n      log.debug(API_LOG_TAG + 'media.startPreviewVideo: ', videoContainer)\n      dispatch(localVideoActions.startLocalVideo(videoContainer))\n    },\n\n    /**\n     * Stops the local video stream created in `startPreviewVideo`.\n     * @memberof media\n     * @public\n     * @requires call\n     * @method stopPreviewVideo\n     */\n    stopPreviewVideo () {\n      log.debug(API_LOG_TAG + 'media.stopPreviewVideo')\n      dispatch(localVideoActions.stopLocalVideo())\n    },\n\n    /**\n     * Initialize media to ensure webRTC support\n     * If you are calling this manually, you NEED to pass the call configs\n     *      to this API. Otherwise it will not properly check for screensharing\n     *      support.\n     * @memberof media\n     * @requires call\n     * @requires callMe\n     * @method init\n     * @param {Object} [options]\n     * @param {string} [options.chromeExtensionId] The ID of the Chrome Screenshare extension if your application will be using screenshare on Chrome.\n     */\n    init (options) {\n      log.debug(API_LOG_TAG + 'media.init: ', options)\n      dispatch(mediaActions.initMedia(options))\n    },\n\n    /**\n     * Prompt the user for permission to use their audio and/or video devices.\n     *\n     * @memberof media\n     * @public\n     * @requires call\n     * @method promptUserMedia\n     * @param {Object} [options]\n     * @param {boolean} [options.video] Whether to get permission for video.\n     * @param {boolean} [options.audio] Whether to get permission for audio.\n     */\n    promptUserMedia (options = {}) {\n      log.debug(API_LOG_TAG + 'media.promptUserMedia: ', options)\n      dispatch(mediaActions.promptUserMedia(options))\n    }\n  }\n\n  const callApi = {\n    /**\n     * Retrieves the state of calls made during the current session.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method getAll\n     * @return {Array} Call objects.\n     * @example\n     * let calls = client.call.getAll();\n     * let currentCalls = calls.filter(call => {\n     *     return call.state === client.call.states.IN_CALL;\n     * });\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'call.getAll')\n      return getCalls(getState())\n    },\n\n    /**\n     * Retrieves a call from state with a specific call ID.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method getById\n     * @param  {string} callId The ID of the call to retrieve.\n     * @return {Object} A call object.\n     */\n    getById (callId) {\n      log.debug(API_LOG_TAG + 'call.getById: ', callId)\n      return getCallById(getState(), callId)\n    },\n\n    /**\n     * Retrieves media support information. Requires `initMedia` to have\n     *      been called beforehand.\n     * @requires call\n     * @requires callMe\n     * @method getMediaInfo\n     * @param  {Object} state Redux state.\n     * @return {Object}\n     */\n    getMediaInfo () {\n      log.debug(API_LOG_TAG + 'call.getMediaInfo')\n      return getMediaInfo(getState())\n    },\n\n    /**\n     * Changes camera and microphone for the specified call.\n     * The call will use the current selected default devices.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method changeInputDevices\n     * @param {string} callId The ID of the call to act upon.\n     */\n    changeInputDevices (callId) {\n      log.debug(API_LOG_TAG + 'call.changeInputDevices: ', callId)\n      dispatch(devicesActions.changeInputDevices(callId))\n    },\n\n    /**\n     * Changes speaker used for call audio output.\n     * Supported on browser's that support HTMLMediaElement.setSinkId().\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method changeSpeaker\n     * @param  {string} speakerId ID of the speaker to use for call audio.\n     */\n    changeSpeaker (speakerId) {\n      log.debug(API_LOG_TAG + 'call.changeSpeaker: ', speakerId)\n      dispatch(devicesActions.changeSpeaker(speakerId))\n    },\n\n    /**\n     * States of a call.\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @property {string} IN_CALL The call is on-going.\n     * @property {string} RINGING The call has been established and is waiting for a user response.\n     * @property {string} ENDED The call has been terminated.\n     * @property {string} ON_HOLD The call has been put on hold locally.\n     * @property {string} ON_REMOTE_HOLD The call has been put on hold remotely.\n     * @example\n     * client.on('call:stateChange', function(callInfo) {\n     *      if(callInfo.state === client.call.states.ENDED) {\n     *          // Call has ended.\n     *      }\n     * });\n     */\n    states: CALL_STATES_FCS,\n\n    /**\n     * State of the media connection within a call.\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @property {string} NEW A new media connection process has started.\n     * @property {string} CHECKING Media is searching for a connection.\n     * @property {string} CONNECTED Media has found a connection, but may still be searching for a better connection to use.\n     * @property {string} COMPLETED Media has finished searching and been established. Audio/video should now be flowing on the call.\n     * @property {string} FAILED Media was not able to find a connection. Audio/video will not flow.\n     * @property {string} DISCONNECTED The media connection has lost its connection and is trying to recover.\n     * @property {string} CLOSED The media connection has shut down.\n     *\n     */\n    mediaStates: ICE_MEDIA_STATES,\n\n    /**\n     * Start an outgoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method make\n     * @param {string} callee Full user ID of the call recipient.\n     * @param {Object} [options] Call options.\n     * @param {string} [options.from] Sets the display name of the caller to be sent alongside the username of the user.\n     * @param {boolean} [options.isVideoEnabled=true] Whether to enable video during the call. If false, you cannot start video mid-call.\n     * @param {Object} [options.contact] Object containing firstName and lastName of caller.\n     * @param {boolean} [options.sendInitialVideo=false]  Whether to start the call sending the local video stream.\n     * @param {boolean} [options.isAudioEnabled=true] Whether to enable audio during the call. Setting this to false will disable audio for the call.\n     * @param {boolean} [options.webrtcdtls=true] Whether to enable DTLS for WebRTC calls.\n     * @param {Object} [options.videoResolution] The object to configure the local video resolution.\n     * @param {number} [options.videoResolution.height] The height in pixels of the local video.\n     * @param {number} [options.videoResolution.width] The width in pixels of the local video.\n     * @param {Array.<{name: string, value:string}>} [options.customParameters] Custom SIP header parameters for the SIP backend.\n     * @param {HTMLElement} [options.remoteVideoContainer] The HTML element to use as a container for the remote video.\n     * @param {HTMLElement} [options.localVideoContainer] The HTML element to use as a container for the local video.\n     * @param {boolean} [options.normalizeAddress=false] Whether to enable normalization of callee address.\n     * @return {string} Id of the outgoing call.\n     * @example\n     * let remoteContainer = document.getElementById('remote-container');\n     * // Start a video call that only shows the remote media (not local).\n     * let callId = client.call.make('sampleUser@example.com', {\n     *     isVideoEnabled: true,\n     *     sendInitialVideo: true,\n     *     remoteVideoContainer: remoteContainer,\n     *     customParameters: [\n     *       {\n     *         \"name\": \"X-GPS\",\n     *         \"value\": \"42.686032,23.344565\"\n     *       }\n     *     ]\n     * });\n     */\n    make (callee, options = {}) {\n      log.debug(API_LOG_TAG + 'call.make: ', callee, options)\n      const callOptions = [\n        'from',\n        'contact',\n        'isAudioEnabled',\n        'isVideoEnabled',\n        'sendInitialVideo',\n        'webrtcdtls',\n        'remoteVideoContainer',\n        'localVideoContainer',\n        'normalizeAddress',\n        'videoResolution',\n        'customParameters',\n        // Internal options.\n        'sendScreenShare',\n        'mediaSourceId'\n      ]\n      // Pick out the valid call options.\n      options = pick(callOptions, options)\n\n      options.contact = defaults(\n        {\n          firstName: '',\n          lastName: ''\n        },\n        options.contact\n      )\n\n      const config = getConfiguration(getState())\n      if (options.normalizeAddress || config.call.normalizeDestination) {\n        // Normalize callee addresses\n        callee = normalizeSipUri(callee, getDomain(getState()))\n        log.info('Address normalized to: ', callee)\n      }\n\n      // Create our own call ID for storing in state.\n      const callId = uuidV4()\n      dispatch(callsActions.makeCall(callee, callId, options))\n      return callId\n    },\n\n    /**\n     * Answer an incoming call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method answer\n     * @param {string} callId The ID of the call to answer.\n     * @param {Object} [options] Call options.\n     * @param {boolean} [options.isVideoEnabled] Whether to enable video during the call. If false, you cannot start video mid-call.\n     * @param {boolean} [options.sendInitialVideo] Whether to start the call sending the local video stream.\n     * @param {boolean} [options.isAudioEnabled=true] Whether to enable audio during the call. Setting this to false will disable audio for the call.\n     * @param {Object} [options.videoResolution] The object to configure the local video resolution.\n     * @param {number} [options.videoResolution.height] The height in pixels of the local video.\n     * @param {number} [options.videoResolution.width] The width in pixels of the local video.\n     * @param {HTMLElement} [options.localVideoContainer] The HTML element to use as a container for the local video.\n     * @param {HTMLElement} [options.remoteVideoContainer] The HTML element to use as a container for the remote video.\n     */\n    answer (callId, options) {\n      log.debug(API_LOG_TAG + 'call.answer: ', callId, options)\n      dispatch(callsActions.answerCall(callId, options))\n    },\n\n    /**\n     * Ignore an incoming call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method ignore\n     * @param {string} callId The ID of the call to ignore.\n     */\n    ignore (callId) {\n      log.debug(API_LOG_TAG + 'call.ignore: ', callId)\n      dispatch(callsActions.ignoreCall(callId))\n    },\n\n    /**\n     * Reject an incoming call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method reject\n     * @param {string} callId The ID of the call to reject.\n     */\n    reject (callId) {\n      log.debug(API_LOG_TAG + 'call.reject: ', callId)\n      dispatch(callsActions.rejectCall(callId))\n    },\n\n    /**\n     * End an on-going call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method end\n     * @param {string} callId Id of the call to end.\n     */\n    end (callId) {\n      log.debug(API_LOG_TAG + 'call.end: ', callId)\n      dispatch(callsActions.endCall(callId))\n    },\n\n    /*\n     *  Mid-Call operations.\n     */\n\n    /**\n     * Mute the local audio stream on an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method mute\n     * @param {string} callId The ID of the call being acted on.\n     */\n    mute (callId) {\n      log.debug(API_LOG_TAG + 'call.mute: ', callId)\n      dispatch(callsActions.muteCall(callId))\n    },\n\n    /**\n     * Unmute the local audio stream on an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method unmute\n     * @param {string} callId The ID of the call being acted on.\n     */\n    unmute (callId) {\n      log.debug(API_LOG_TAG + 'call.unmute: ', callId)\n      dispatch(callsActions.unMuteCall(callId))\n    },\n\n    /**\n     * Silence the remote audio on an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method silence\n     * @param {string} callId The ID of the call being acted on.\n     */\n    silence (callId) {\n      log.debug(API_LOG_TAG + 'call.silence: ', callId)\n      dispatch(callsActions.silenceCall(callId))\n    },\n\n    /**\n     * Un-silence the remote audio on an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method unsilence\n     * @param {string} callId The ID of the call being acted on.\n     */\n    unsilence (callId) {\n      log.debug(API_LOG_TAG + 'call.unsilence: ', callId)\n      dispatch(callsActions.unSilenceCall(callId))\n    },\n\n    /**\n     * Retrieves a call's customParameters.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method getCustomParameters\n     * @param  {string}    callId The ID of the call to retrieve custom parameters.\n     * @return {Array.<{name: string, value:string}>} Custom parameters of the call.\n     */\n    getCustomParameters (callId) {\n      log.debug(API_LOG_TAG + 'call.getCustomParameters: ', callId)\n      return getCustomParametersById(getState(), callId)\n    },\n\n    /**\n     * Set custom parameters on an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method setCustomParameters\n     * @param {string} callId The ID of the call being acted on.\n     * @param {Array.<{name: string, value:string}>} customParameters Custom parameters for the call.\n     * @example\n     * // Set custom parameters for call.\n     * client.call.setCustomParameters(\n     *    callId,\n     *    [\n     *      { \"name\": \"X-GPS\",\n     *        \"value\": \"42.686032,23.344565\"\n     *      }\n     *    ]\n     * });\n     */\n    setCustomParameters (callId, params = {}) {\n      log.debug(API_LOG_TAG + 'call.setCustomParameters: ', callId, params)\n      dispatch(callsActions.setCustomParameters(callId, params))\n    },\n\n    /**\n     * Start local video stream for an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method startVideo\n     * @param {string} callId Id of the call being acted on.\n     * @param {Object} [options] Options for the video stream.\n     * @param {Object} [options.videoResolution] The video resolution configuration object.\n     * @param {number} [options.videoResolution.height] The height of the outgoing video in pixels.\n     * @param {number} [options.videoResolution.width] The width of the outgoing video in pixels.\n     */\n    startVideo (callId, options = {}) {\n      log.debug(API_LOG_TAG + 'call.startVideo: ', callId, options)\n      dispatch(callsActions.startVideo(callId, options))\n    },\n\n    /**\n     * Stop local video for an ongoing call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method stopVideo\n     * @param {string} callId Id of the call being acted on.\n     */\n    stopVideo (callId) {\n      log.debug(API_LOG_TAG + 'call.stopVideo: ', callId)\n      dispatch(callsActions.stopVideo(callId))\n    },\n\n    /**\n     * Put an ongoing call on hold.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method hold\n     * @param {string} callId Id of the call being acted on.\n     */\n    hold (callId) {\n      log.debug(API_LOG_TAG + 'call.hold: ', callId)\n      dispatch(callsActions.holdCall(callId))\n    },\n\n    /**\n     * Return a held call to ongoing.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method unhold\n     * @param {string} callId Id of the call being acted on.\n     */\n    unhold (callId) {\n      log.debug(API_LOG_TAG + 'call.unhold: ', callId)\n      dispatch(callsActions.unHoldCall(callId))\n    },\n\n    /**\n     * Starts sharing a screen over a call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method startScreenshare\n     * @param {string} callId Id of the call being acted on.\n     * @param  {Object} options\n     * @param  {string} options.mediaSourceId Id of the media screen to share.\n     * @param  {Number} [options.height=768] The height of the video stream to send.\n     * @param  {Number} [options.width=1024] The width of the video stream to send.\n     * @param  {Number} [options.frameRate=15] The number of frames per second to request.\n     */\n    startScreenshare (callId, options = {}) {\n      log.debug(API_LOG_TAG + 'call.startScreenshare: ', callId, options)\n      dispatch(callsActions.startScreenshare(callId, options))\n    },\n\n    /**\n     * Stops sharing a screen over a call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method stopScreenshare\n     * @param {string} callId Id of the call being acted on.\n     */\n    stopScreenshare (callId) {\n      log.debug(API_LOG_TAG + 'call.stopScreenshare: ', callId)\n      dispatch(callsActions.stopScreenshare(callId))\n    },\n\n    /**\n     * Send a DTMF tone over a call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method sendDTMF\n     * @param {string} callId Id of the call being acted on.\n     * @param {number} tone DTMF tone to send. Valid values are [0,1,2,3,4,5,6,7,8,9,#].\n     *\n     */\n    sendDTMF (callId, tone) {\n      log.debug(API_LOG_TAG + 'call.sendDTMF: ', callId, tone)\n      dispatch(callsActions.sendDTMF(callId, tone))\n    },\n\n    /**\n     * Explicitly send the current custom parameters for a call.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method sendCustomParameters\n     * @param {string} callId Id of the call being acted on.\n     */\n    sendCustomParameters (callId) {\n      log.debug(API_LOG_TAG + 'call.sendCustomParameters: ', callId)\n      dispatch(callsActions.sendCustomParameters(callId))\n    },\n\n    /**\n     * Forward an incoming call to another user.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method forwardCall\n     * @param {string} callId Id of the call being acted on.\n     * @param {string} destination The user to forward the call to.\n     */\n    forwardCall (callId, destination) {\n      log.debug(API_LOG_TAG + 'call.forwardCall: ', callId, destination)\n      dispatch(callsActions.forwardCall(callId, destination))\n    },\n\n    /**\n     * Transfer a call to another user.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method directTransfer\n     * @param {string} callId Id of the call being acted on.\n     * @param {string} destination The user to transfer the call to.\n     */\n    directTransfer (callId, destination) {\n      log.debug(API_LOG_TAG + 'call.directTransfer: ', callId, destination)\n      dispatch(callsActions.directTransfer(callId, destination))\n    },\n\n    /**\n     * Transfer a call to another user.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method consultativeTransfer\n     * @param {string} callId Id of the call being acted on.\n     * @param {string} destinationCallId The callId to transfer the call to.\n     */\n    consultativeTransfer (callId, destinationCallId) {\n      log.debug(API_LOG_TAG + 'call.consultativeTransfer: ', callId, destinationCallId)\n      dispatch(callsActions.consultativeTransfer(callId, destinationCallId))\n    },\n\n    /**\n     * Join two calls (both must be on hold and audio only). The joined call can be referenced via callId.\n     *\n     * @public\n     * @memberof Calls\n     * @requires call\n     * @method join\n     * @param {string} callId Id of the call being acted on.\n     * @param {string} destinationCallId The callId to join the call with.\n     */\n    join (callId, destinationCallId) {\n      log.debug(API_LOG_TAG + 'call.join: ', callId, destinationCallId)\n      dispatch(callsActions.joinCall(callId, destinationCallId))\n    },\n\n    /**\n     * Retrieves the resolution of the remote video of a call.\n     * @memberof Calls\n     * @requires call\n     * @requires callMe\n     * @method getRemoteVideoResolutions\n     * @param  {string} callId Id of the call being acted on.\n     * @return {Object} Height and width properties of the remote video.\n     */\n    getRemoteVideoResolutions (callId) {\n      log.debug(API_LOG_TAG + 'call.getRemoteVideoResolutions: ', callId)\n      /* Implement this in the API temporarily, since this should be done\n       *   automatically on a state change, but we can't due to FCS timing\n       *   issues. See KAA-424.\n       */\n      const call = getCallById(getState(), callId)\n      // If the remote side is sending video and we're rendering it..\n      if (call && call.remoteVideoState.indexOf('send') > -1 && call.remoteVideoContainer) {\n        let videoTag\n        // Find the video tag.\n        // Turn the nodeList into a real array so IE11 can us forEach\n        var childNodes = Array.prototype.slice.call(call.remoteVideoContainer.childNodes)\n        childNodes.forEach(function (node) {\n          if (node.tagName === 'VIDEO') {\n            videoTag = node\n          }\n        })\n\n        if (videoTag) {\n          return {\n            height: videoTag.videoHeight,\n            width: videoTag.videoWidth\n          }\n        }\n      }\n    }\n  }\n\n  const audioBridgeApi = {\n    /**\n     * Creates a local bridge that can be used to join audio calls.\n     * @public\n     * @memberof AudioBridge\n     * @method create\n     * @return {string} ID used to identify the bridge.\n     */\n    create () {\n      log.debug(API_LOG_TAG + 'audioBridge.create')\n      // Create our own ID for storing in state.\n      const bridgeId = uuidV4()\n      dispatch(audioBridgeActions.createAudioBridge(bridgeId))\n      return bridgeId\n    },\n\n    /**\n     * Closes an existing audio bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method close\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     */\n    close (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.close: ', bridgeId)\n      dispatch(audioBridgeActions.closeAudioBridge(bridgeId))\n    },\n\n    /**\n     * Adds a call to the specified local audio bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method addCall\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     * @param  {string} callId Identifier for the call to add.\n     */\n    addCall (bridgeId, callId) {\n      log.debug(API_LOG_TAG + 'audioBridge.addCall: ', bridgeId, callId)\n      dispatch(audioBridgeActions.addCallToBridge(bridgeId, callId))\n    },\n\n    /**\n     * Remove a specified call from the local audio bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method removeCall\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     * @param  {string} callId Identifier for the call to remove.\n     */\n    removeCall (bridgeId, callId) {\n      log.debug(API_LOG_TAG + 'audioBridge.removeCall: ', bridgeId, callId)\n      dispatch(audioBridgeActions.removeCallFromBridge(bridgeId, callId))\n    },\n\n    /**\n     * Mute the local audio for all of the calls on the bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method mute\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     */\n    mute (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.mute: ', bridgeId)\n      dispatch(audioBridgeActions.muteAudioBridge(bridgeId))\n    },\n\n    /**\n     * Unmute the local audio for all of the calls on the bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method unmute\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     */\n    unmute (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.unmute: ', bridgeId)\n      dispatch(audioBridgeActions.unmuteAudioBridge(bridgeId))\n    },\n\n    /**\n     * Silence the remote audio for all of the calls on the bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method silence\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     */\n    silence (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.silence: ', bridgeId)\n      dispatch(audioBridgeActions.silenceAudioBridge(bridgeId))\n    },\n\n    /**\n     * Un-silence the remote audio for all of the calls on the bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method unsilence\n     * @param  {string} bridgeId Identifier for the bridge to act on.\n     */\n    unsilence (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.unsilence: ', bridgeId)\n      dispatch(audioBridgeActions.unsilenceAudioBridge(bridgeId))\n    },\n\n    /**\n     * Retrieve information about audio bridges.\n     * @public\n     * @memberof AudioBridge\n     * @method getAll\n     * @return {Array} List of active audio bridges.\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'audioBridge.getAll')\n      return getAudioBridges(getState())\n    },\n\n    /**\n     * Retrieve all calls currently part of an audio bridge.\n     * @public\n     * @memberof AudioBridge\n     * @method getBridgeCalls\n     * @param {string} bridgeId The ID of the bridge whose calls we wish to retrieve\n     * @return {Array} List of calls currently part of the specified audio bridge.\n     */\n    getBridgeCalls (bridgeId) {\n      log.debug(API_LOG_TAG + 'audioBridge.getBridgeCalls: ', bridgeId)\n      return getBridgeCalls(getState(), bridgeId)\n    }\n  }\n\n  // TODO: Split up this file. It's getting too large.\n  return {\n    call: callApi,\n    media: mediaApi,\n    audioBridge: audioBridgeApi\n  }\n}\n","/**\n * Extracts the domain from an address if an @ symbol exists and isn't at the start or end of the address.\n * @param {string} addressString The address string to extract the domain from (if it exists).\n * @returns {string} The extracted domain. Empty string of none found.\n */\nfunction extractDomainFromAddress (addressString) {\n  const indexOfAtSymbol = addressString.lastIndexOf('@')\n  if (indexOfAtSymbol !== 0 && indexOfAtSymbol !== addressString.length - 1) {\n    // If '@' symbol found in middle of addressString, split it.\n    if (indexOfAtSymbol !== -1) {\n      return addressString.substr(indexOfAtSymbol + 1)\n    }\n  }\n  return ''\n}\n\n/**\n * Determines which address and domain to use depending on whether the address string contains a domain or not.\n * @param {string} addressString The address string to examine and extract a domain from (if any).\n * @param {string} defaultDomainString The domain to use if the address string does not contain a domain in it.\n * @returns {Object} An object containing the correct address and domain to use.\n */\nfunction separateAddressAndDomain (addressString, defaultDomainString) {\n  const extractedDomain = extractDomainFromAddress(addressString)\n  // If a domain was extracted from the address, use that as the domain and strip it from the address.\n  if (extractedDomain) {\n    return {\n      address: addressString.substr(0, addressString.length - extractedDomain.length - 1),\n      domain: extractedDomain\n    }\n  } else {\n    return {\n      address: addressString,\n      domain: defaultDomainString\n    }\n  }\n}\n\n/**\n * Extracts any pre-pended data before a \":\" (if it exists) from the beginning of a string.\n * @param {string} inputString The string to remove pre-pended data from.\n * @returns {string} The pre-pended data string.\n */\nfunction extractPrependedData (inputString) {\n  const prependedDataMatches = inputString.match(/^.*:/g)\n  if (prependedDataMatches && prependedDataMatches[0]) {\n    return prependedDataMatches[0]\n  } else {\n    return ''\n  }\n}\n\n/**\n * Finds the leading special characters (\"#\", \"+\", \"*\") of an address if it is a phone number.\n * If the address contains letters or any non-visual-separator characters,\n *  it is not a phone number and no leading special characters will be found.\n * @param {string} addressString The address string to find the leading characters of (if any).\n *  The addressString must not contain any pre-pended data such as \"sip:\".\n *  The addressString must not contain a domain.\n * @returns {string} The leading special characters as one string. Empty string if none found.\n */\nfunction extractLeadingSpecialCharacters (addressString) {\n  // A single or group of contiguous characters are considered leading character/s if it is  the following:\n  // - starts at the beginning of the string - ^\n  // - is any of the following characters - [#+*]+\n  // - is followed by a digit or \"(\" - [\\d|(]\n  // - is followed by any number of only digits and visual separators - [\\d \\-.()+]*$\n  const potentialLeadingChars = addressString.match(/^[#+*]+[\\d|(][\\d \\-.()+]*$/g)\n  if (potentialLeadingChars && potentialLeadingChars[0]) {\n    // Guaranteed to have a match for regex [#+*]+ since we have potentialLeadingChars\n    // which was a match for a similar regex and we are simply extracting the leading characters part.\n    const actualLeadingChars = potentialLeadingChars[0].match(/[#+*]+/g)\n    return actualLeadingChars[0]\n  }\n  return ''\n}\n\n/**\n * Outputs a new string without its phone number visual separators (\"-\", \".\", \"(\", \")\", \"+\").\n * @param {string} inputString The string to remove visual separators from.\n * @returns {string} A new string without visual separators.\n */\nfunction withoutVisualSeparators (inputString) {\n  return inputString.replace(/[ \\-.()+]/g, '')\n}\n\n/**\n * Determines whether a string should be considered a phone number or not.\n * @param {string} addressString The address string to check.\n *  The addressString must not contain any pre-pended data such as \"sip:\"\n *  The addressString must not contain any leading special characters.\n *  The addressString must not contain a domain.\n * @returns {boolean} True if the input string is a phone number. False if it is not.\n */\nfunction isPhoneNumber (addressString) {\n  const cleanNumber = withoutVisualSeparators(addressString)\n  const phoneNumberMatch = cleanNumber.match(/^\\d+$/g)\n  return phoneNumberMatch && phoneNumberMatch.length === 1\n}\n\n/**\n * Processes the address string and returns the correct output.\n * If the address is a phone number, visual separators are removed.\n * Otherwise, it will just return the address as-is.\n * @param {string} addressString The address string to process.\n *  The addressString must not contain any pre-pended data such as \"sip:\".\n *  The addressString must not contain any leading special characters (if it is a phone number).\n *  The addressString must not contain a domain.\n * @returns {string} A phone number without visual-separators or the addressString as-is.\n */\nfunction processAddress (addressString) {\n  return isPhoneNumber(addressString) ? withoutVisualSeparators(addressString) : addressString\n}\n\n/**\n * Processes the domain string and returns the correct output.\n * Adds an \"@\" symbol if it isn't present at the beginning of the domain.\n * @param {string} domainString The domain string to process.\n * @returns {string} The domain with \"@\" symbol at the beginning if it doesn't exist.\n */\nfunction processDomain (domainString) {\n  if (domainString === '' || domainString === undefined) {\n    return ''\n  } else if (domainString.indexOf('@') === 0) {\n    return domainString\n  } else {\n    return '@' + domainString\n  }\n}\n\n/**\n *The function takes in the input dial string and domain address of the user, performs a normalization process based on the phone number handling normalization rules\n * @function normalizeSipUri\n * @param {string} address   It contains the input dial string the user dials in or the callee address\n * @param {string} domain    It contains the user's domain address\n * @returns {string} output  The output which is the normalized callee address/phone number\n */\nexport function normalizeSipUri (address, domain) {\n  // Remove leading and trailing white spaces.\n  address = address.trim()\n\n  // Extract domain.\n  const resultingAddressAndDomain = separateAddressAndDomain(address, domain)\n  domain = resultingAddressAndDomain.domain\n  address = resultingAddressAndDomain.address\n\n  // Extract pre-pended \"sip:\".\n  const prepend = extractPrependedData(address)\n  address = address.substr(prepend.length)\n\n  // Extract leading characters.\n  const leadingChars = extractLeadingSpecialCharacters(address)\n  address = address.substr(leadingChars.length)\n\n  // Process and build parts into final output in the form of `<prepend>:<leadingChars><address>@<domain>`.\n  return 'sip:' + leadingChars + processAddress(address) + processDomain(domain)\n}\n","import calls from './calls'\nimport devices from './devices'\nimport localVideo from './localVideo'\nimport media from './media'\nimport audioBridges from './audioBridges'\n\n/**\n * Combine subreducers into a single call reducer.\n */\nexport default function (state = {}, action) {\n  return {\n    calls: calls(state.calls, action),\n    devices: devices(state.devices, action),\n    media: media(state.media, action),\n    localVideo: localVideo(state.localVideo, action),\n    audioBridges: audioBridges(state.audioBridges, action)\n  }\n}\n","import * as actionTypes from '../actionTypes'\nimport { combineActions, handleActions } from 'redux-actions'\nimport { concat } from 'lodash/fp'\n\n// Top-tier reducers: Handles the whole call state.\nconst reducers = {}\n// Call-tier reducers: Handles only a specific call's state.\nconst callReducers = {}\n\n/*\n * Top-tier reducers.\n * Receives the entire call substate as state.\n */\n\n/*\n * Reducer to handle MAKE_CALL action.\n * Create a new call object and add it to state.\n */\nreducers[actionTypes.MAKE_CALL] = {\n  next (state, action) {\n    const newCall = {\n      ...action.payload.callInfo,\n      state: 'INITIATING',\n      muted: false,\n      silenced: false,\n      direction: 'outgoing',\n      isScreensharing: action.payload.callInfo.sendScreenShare || false,\n      originalRemoteParticipant: {\n        displayNumber: action.payload.callInfo.to\n      },\n      id: action.payload.callId\n    }\n    return concat(state, newCall)\n  }\n}\n\n/*\n * Reducer to handle CALL_INCOMING actions.\n * Cannot have an error 'incoming call'. Add the\n *      incoming call to state.\n */\nreducers[actionTypes.CALL_INCOMING] = {\n  next (state, action) {\n    const newCall = {\n      state: 'RINGING',\n      muted: false,\n      silenced: false,\n      direction: 'incoming',\n      isScreensharing: false,\n      id: action.payload.callId,\n      wrtcsSessionId: action.payload.callInfo.wrtcsSessionId,\n      ...action.payload.callInfo\n    }\n    return concat(state, newCall)\n  }\n}\n\nreducers[actionTypes.JOIN_CALL_FINISH] = {\n  next (state, action) {\n    const newCall = {\n      ...action.payload.callInfo,\n      direction: 'outgoing',\n      id: action.payload.callId\n    }\n    return concat(state, newCall)\n  }\n}\n\n/*\n * Call-tier reducers.\n * Receive a single call's state as state.\n */\n\n/*\n * Reducer to handle SET_CUSTOM_PARAMETERS actions.\n */\ncallReducers[actionTypes.SET_CUSTOM_PARAMETERS] = {\n  next (state, action) {\n    return {\n      ...state,\n      customParameters: action.payload.customParameters\n    }\n  }\n}\n\n/*\n * Reducer to handle MAKE_CALL_FINISH actions.\n * In both cases, update the existing call in state with\n *      the new call state.\n */\ncallReducers[actionTypes.MAKE_CALL_FINISH] = {\n  next (state, action) {\n    const callInfo = action.payload.callInfo\n    return {\n      ...state,\n      ...callInfo,\n      state: 'INITIATED',\n      sendingVideo: callInfo.sendInitialVideo || false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      ...action.payload.callInfo,\n      state: 'ENDED',\n      error: action.payload\n    }\n  }\n}\n\n/*\n * Reducer to handle ANSWER_CALL_FINISH actions.\n * Only intended to set call info, not current state.\n */\ncallReducers[actionTypes.ANSWER_CALL_FINISH] = {\n  next (state, action) {\n    const callInfo = action.payload.callInfo\n    return {\n      ...state,\n      ...callInfo,\n      sendingVideo: callInfo.sendInitialVideo || false\n      // State change action sets the call's current state.\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      ...action.payload.callInfo,\n      error: action.payload\n      // State change action sets the call's current state.\n    }\n  }\n}\n\n/*\n * Reducer to handle ANSWER_CALL actions.\n * Only intended to set call info, not current state.\n */\ncallReducers[actionTypes.ANSWER_CALL] = {\n  next (state, action) {\n    const callInfo = action.payload.callInfo\n    return {\n      ...state,\n      ...callInfo,\n      sendingVideo: callInfo.sendInitialVideo || false\n      // State change action sets the call's current state.\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      ...action.payload.callInfo,\n      error: action.payload\n      // State change action sets the call's current state.\n    }\n  }\n}\n\n/*\n * Reducer to handle CALL_STATE_CHANGE actions.\n * Change the specified call's state.\n */\ncallReducers[actionTypes.CALL_STATE_CHANGE] = {\n  next (state, action) {\n    return {\n      ...state,\n      ...action.payload.callInfo,\n      state: action.payload.state,\n      transition: action.payload.transition\n    }\n  }\n}\n\n/*\n * Reducer to handle media state change actions.\n * Change the specified call's media state.\n */\ncallReducers[actionTypes.CALL_MEDIA_STATE_CHANGE] = {\n  next (state, action) {\n    return {\n      ...state,\n      mediaState: action.payload.mediaState\n    }\n  }\n}\n\n/*\n * Reducer to handle MUTE_CALL_FINISH actions.\n * Change the specified call's state to muted.\n */\ncallReducers[actionTypes.MUTE_CALL_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      muted: true\n    }\n  }\n}\n\n/*\n * Reducer to handle UNMUTE_CALL_FINISH actions.\n * Change the specified call's state to not muted.\n */\ncallReducers[actionTypes.UNMUTE_CALL_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      muted: false\n    }\n  }\n}\n\n/*\n * Reducer to handle SILENCE_CALL_FINISH actions.\n * Change the specified call's state to silenced.\n */\ncallReducers[actionTypes.SILENCE_CALL_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      silenced: true\n    }\n  }\n}\n\n/*\n * Reducer to handle UNSILENCE_CALL_FINISH actions.\n * Change the specified call's state to not silenced.\n */\ncallReducers[actionTypes.UNSILENCE_CALL_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      silenced: false\n    }\n  }\n}\n\n/*\n * Handles changing the call's screensharing state.\n */\ncallReducers[actionTypes.START_SCREENSHARE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      isScreensharing: true\n    }\n  }\n}\n\n/*\n * Handles changing the call's screensharing state.\n */\ncallReducers[actionTypes.STOP_SCREENSHARE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      isScreensharing: false\n    }\n  }\n}\n\n/*\n * Handles changing the call's video state.\n */\ncallReducers[actionTypes.START_VIDEO_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      sendingVideo: true\n    }\n  }\n}\n\n/*\n * Handles changing the call's video state.\n */\ncallReducers[actionTypes.STOP_VIDEO_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      sendingVideo: false\n    }\n  }\n}\n\n/*\n * Combine all of the call-tier reducers into a single reducer,\n *      each with a default state of empty object.\n */\nconst callReducer = handleActions(callReducers, {})\n\n// Actions routed to call-tier reducers.\nconst specificCallActions = combineActions(\n  actionTypes.MAKE_CALL_FINISH,\n  actionTypes.ANSWER_CALL,\n  actionTypes.ANSWER_CALL_FINISH,\n  actionTypes.CALL_STATE_CHANGE,\n  actionTypes.CALL_MEDIA_STATE_CHANGE,\n  actionTypes.MUTE_CALL_FINISH,\n  actionTypes.UNMUTE_CALL_FINISH,\n  actionTypes.SILENCE_CALL_FINISH,\n  actionTypes.UNSILENCE_CALL_FINISH,\n  actionTypes.START_SCREENSHARE_FINISH,\n  actionTypes.STOP_SCREENSHARE_FINISH,\n  actionTypes.START_VIDEO_FINISH,\n  actionTypes.STOP_VIDEO_FINISH,\n  actionTypes.SET_CUSTOM_PARAMETERS\n)\n\n/*\n * Reducer to handle specific call actions.\n * Routes the actions to the call-tier reducers.\n */\nreducers[specificCallActions] = (state, action) => {\n  return state.map(function (call) {\n    // Only update the call related to the action.\n    if (call.id === action.payload.callId) {\n      return callReducer(call, action)\n    } else {\n      return call\n    }\n  })\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer,\n *      each with a default state of an empty array.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","import * as actionTypes from '../actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\n// Replace old devices with newly checked devices.\nreducers[actionTypes.CHECK_DEVICES_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\nreducers[actionTypes.SET_DEFAULT_DEVICES_FINISH] = {\n  next (state, action) {\n    // Replace the default devices with the newly set defaults.\n    return {\n      ...state,\n      defaults: {\n        ...state.defaults,\n        ...action.payload\n      }\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","import * as actionTypes from '../actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst defaultState = {\n  displaying: false\n}\n\nconst reducers = {}\n\n// Store information about the local video being displayed.\nreducers[actionTypes.START_LOCAL_VIDEO_FINISH] = {\n  next (state, action) {\n    return {\n      displaying: true,\n      container: action.payload\n    }\n  }\n}\n\n// Remove info / Return to default state.\nreducers[actionTypes.STOP_LOCAL_VIDEO_FINISH] = {\n  next () {\n    return defaultState\n  }\n}\n\nconst reducer = handleActions(reducers, defaultState)\nexport default reducer\n","import * as actionTypes from '../actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\n// Replace old media info with new info.\nreducers[actionTypes.INIT_MEDIA_FINISH] = {\n  next (state, action) {\n    // If media state has been set, don't reset it. results from second+\n    //      initMedia attempt may not be accurate.\n    if (!state) {\n      return action.payload\n    } else {\n      return state\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, '')\nexport default reducer\n","import * as actionTypes from '../actionTypes'\nimport { combineActions, handleActions } from 'redux-actions'\nimport { concat } from 'lodash/fp'\n\n// Top-tier reducers: Handles the whole audioBridge state.\nconst reducers = {}\n// Bridge-tier reducers: Handles only a specific bridge's state.\nconst bridgeReducers = {}\n\nreducers[actionTypes.CREATE_AUDIO_BRIDGE_FINISH] = {\n  next (state, action) {\n    const newBridge = {\n      id: action.payload.bridgeId,\n      options: action.payload.options,\n      muted: false,\n      silenced: false,\n      calls: [],\n      status: 'OPEN'\n    }\n\n    return concat(state, newBridge)\n  }\n}\n\n/*\n * Bridge-tier reducers.\n * Receive a single bridge's state as state.\n */\n\nbridgeReducers[actionTypes.CLOSE_AUDIO_BRIDGE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      status: 'CLOSED'\n    }\n  }\n}\n\nbridgeReducers[actionTypes.MUTE_AUDIO_BRIDGE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      muted: true\n    }\n  }\n}\n\nbridgeReducers[actionTypes.UNMUTE_AUDIO_BRIDGE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      muted: false\n    }\n  }\n}\n\nbridgeReducers[actionTypes.SILENCE_AUDIO_BRIDGE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      silenced: true\n    }\n  }\n}\n\nbridgeReducers[actionTypes.UNSILENCE_AUDIO_BRIDGE_FINISH] = {\n  next (state) {\n    return {\n      ...state,\n      silenced: false\n    }\n  }\n}\n\nbridgeReducers[actionTypes.UPDATE_AUDIO_BRIDGE_CALLS] = {\n  next (state, action) {\n    return {\n      ...state,\n      calls: action.payload.calls\n    }\n  }\n}\n\n/*\n * Combine all of the bridge-tier reducers into a single reducer,\n *      each with a default state of empty object.\n */\nconst bridgeReducer = handleActions(bridgeReducers, {})\n\n// Actions routed to bridge-tier reducers.\nconst specificBridgeActions = combineActions(\n  actionTypes.CLOSE_AUDIO_BRIDGE_FINISH,\n  actionTypes.MUTE_AUDIO_BRIDGE_FINISH,\n  actionTypes.UNMUTE_AUDIO_BRIDGE_FINISH,\n  actionTypes.SILENCE_AUDIO_BRIDGE_FINISH,\n  actionTypes.UNSILENCE_AUDIO_BRIDGE_FINISH,\n  actionTypes.UPDATE_AUDIO_BRIDGE_CALLS\n)\n\n/*\n * Reducer to handle specific bridge actions.\n * Routes the actions to the bridge-tier reducers.\n */\nreducers[specificBridgeActions] = (state, action) => {\n  return state.map(function (bridge) {\n    if (bridge.id === action.payload.bridgeId) {\n      return bridgeReducer(bridge, action)\n    } else {\n      return bridge\n    }\n  })\n}\n\n/*\n * Combine all of the top-tier reducers into a single reducer,\n *      each with a default state of an empty object.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\n/**\n * Helper function for call error events.\n * @method callErrorEvent\n * @param  {Object} action\n * @return {Object}\n */\nfunction callErrorEvent (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.CALL_ERROR,\n      args: { callId: action.payload.callId, error: action.payload }\n    }\n  }\n}\n\nvar events = {}\n\n// Actions that only emit an event on an error action.\n// For most, callStateChange emits the success event.\nevents[actionTypes.IGNORE_CALL_FINISH] = callErrorEvent\nevents[actionTypes.REJECT_CALL_FINISH] = callErrorEvent\nevents[actionTypes.END_CALL_FINISH] = callErrorEvent\nevents[actionTypes.START_VIDEO_FINISH] = callErrorEvent\nevents[actionTypes.STOP_VIDEO_FINISH] = callErrorEvent\nevents[actionTypes.HOLD_CALL_FINISH] = callErrorEvent\nevents[actionTypes.UNHOLD_CALL_FINISH] = callErrorEvent\nevents[actionTypes.SEND_DTMF_FINISH] = callErrorEvent\nevents[actionTypes.SEND_CUSTOM_PARAMETERS_FINISH] = callErrorEvent\n\nevents[actionTypes.MAKE_CALL_FINISH] = function (action) {\n  if (action.error) {\n    // Call start error event.\n    return callErrorEvent(action)\n  } else {\n    // Call start event.\n    return {\n      type: eventTypes.CALL_STARTED,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.CALL_INCOMING] = function (action) {\n  return {\n    type: eventTypes.CALL_INCOMING,\n    args: { callId: action.payload.callId }\n  }\n}\n\nevents[actionTypes.FORWARD_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_FORWARDED,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.CALL_STATE_CHANGE] = function (action) {\n  return {\n    type: eventTypes.CALL_STATE_CHANGE,\n    args: {\n      callId: action.payload.callId,\n      state: action.payload.state,\n      transition: action.payload.transition\n    }\n  }\n}\n\nevents[actionTypes.CALL_MEDIA_STATE_CHANGE] = function (action) {\n  return {\n    type: eventTypes.CALL_MEDIA_STATE_CHANGE,\n    args: {\n      callId: action.payload.callId,\n      mediaState: action.payload.mediaState\n    }\n  }\n}\n\nevents[actionTypes.ANSWER_CALL_FINISH] = function (action) {\n  // For a successful answer call, an event is emitted\n  //      as a stateChanged event.\n  if (action.error) {\n    // Call start error event.\n    return callErrorEvent(action)\n  }\n}\n\nevents[actionTypes.JOIN_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_JOIN,\n      args: {\n        callId: action.payload.callId,\n        joinedCalls: action.payload.params.joinedCalls\n      }\n    }\n  }\n}\n\nevents[actionTypes.MUTE_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_STATE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.UNMUTE_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_STATE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.SILENCE_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_STATE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.UNSILENCE_CALL_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_STATE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.START_SCREENSHARE_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_SCREENSHARE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\nevents[actionTypes.STOP_SCREENSHARE_FINISH] = function (action) {\n  if (action.error) {\n    return callErrorEvent(action)\n  } else {\n    return {\n      type: eventTypes.CALL_SCREENSHARE_CHANGE,\n      args: { callId: action.payload.callId }\n    }\n  }\n}\n\n// TODO: Store devices in state on device change\n// Notify an application when media devices change.\nevents[actionTypes.CHECK_DEVICES_FINISH] = function (action) {\n  if (!action.error) {\n    return {\n      type: eventTypes.DEVICE_CHANGE,\n      args: { devices: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.DEVICE_ERROR,\n      args: {\n        devices: {},\n        error: action.payload\n      }\n    }\n  }\n}\n\nevents[actionTypes.SET_DEFAULT_DEVICES_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.DEVICE_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.DEVICE_DEFAULT_CHANGE,\n      args: { devices: action.payload }\n    }\n  }\n}\n\nevents[actionTypes.PROMPT_USER_MEDIA_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MEDIA_PERMISSIONS,\n      args: {\n        granted: false,\n        devices: action.payload.options,\n        error: action.payload.error\n      }\n    }\n  } else {\n    return {\n      type: eventTypes.MEDIA_PERMISSIONS,\n      args: {\n        granted: true,\n        devices: action.payload\n      }\n    }\n  }\n}\n\n// TODO: Store devices in state on device change\nevents[actionTypes.CHANGE_SPEAKER_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.DEVICE_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.DEVICE_CHANGE,\n      args: {\n        type: 'speaker',\n        deviceId: action.payload\n      }\n    }\n  }\n}\n\nevents[actionTypes.INIT_MEDIA_FINISH] = function (action) {\n  return {\n    type: eventTypes.MEDIA_INITIALIZED,\n    args: { result: action.payload }\n  }\n}\n\nevents[actionTypes.START_LOCAL_VIDEO_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.LOCAL_VIDEO_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.LOCAL_VIDEO_CHANGE,\n      args: { displaying: true }\n    }\n  }\n}\n\nevents[actionTypes.STOP_LOCAL_VIDEO_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.LOCAL_VIDEO_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.LOCAL_VIDEO_CHANGE,\n      args: { displaying: false }\n    }\n  }\n}\n\nfunction audioBridgeEvents (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.BRIDGE_ERROR,\n      args: {\n        error: action.payload\n      }\n    }\n  } else {\n    return {\n      type: eventTypes.BRIDGE_CHANGE,\n      args: {\n        bridgeId: action.payload.bridgeId\n      }\n    }\n  }\n}\n\nevents[actionTypes.CREATE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\nevents[actionTypes.CLOSE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\nevents[actionTypes.UPDATE_AUDIO_BRIDGE_CALLS] = audioBridgeEvents\nevents[actionTypes.MUTE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\nevents[actionTypes.UNMUTE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\nevents[actionTypes.SILENCE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\nevents[actionTypes.UNSILENCE_AUDIO_BRIDGE_FINISH] = audioBridgeEvents\n\nexport default events\n","/**\n * An outgoing call has successfully started.\n *\n * @public\n * @memberof call\n * @requires call\n * @requires callMe\n * @event call:start\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n */\nexport const CALL_STARTED = 'call:start'\n\n/**\n * A new incoming call has been received.\n *\n * @public\n * @memberof call\n * @requires call\n * @event call:receive\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n * @example\n * client.on('call:receive', function(callId) {\n *     // We have received a call, prompt the user to respond.\n *     promptUser(client.call.getById(callId));\n * });\n */\nexport const CALL_INCOMING = 'call:receive'\n\n/**\n * Calls have been successfully joined.\n * @public\n * @requires call\n * @memberof call\n * @event call:join\n * @param {Object} params\n * @param {string} params.callId The ID of the new, joined call.\n * @param {Array}  params.joinedCalls The two calls that were joined together.\n */\nexport const CALL_JOIN = 'call:join'\n\n/**\n * A call has successfully been forwarded.\n *\n * @public\n * @memberof call\n * @requires call\n * @event call:forward\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n */\nexport const CALL_FORWARDED = 'call:forward'\n\n/**\n * A call's state has changed.\n *\n * @public\n * @memberof call\n * @requires call\n * @requires callMe\n * @event call:stateChange\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n * @param {string} params.state New state of the call.\n * @param {Object} params.transition Information about the state change.\n * @param {number} params.transition.code Code representing the reason for the state change.\n * @param {string} params.transition.reasonText Explanation of the status code.\n * @param {string} params.transition.oldState The previous state of the call.\n * @example\n * client.on('call:stateChange', function(params) {\n *     // We are now in call with another user, so update our app to show it.\n *     if(params.state === client.call.states.IN_CALL) {\n *         renderCall(client.call.getById(params.callId));\n *     }\n * });\n */\nexport const CALL_STATE_CHANGE = 'call:stateChange'\n\n/**\n * A call's media state has changed.\n * @public\n * @memberof call\n * @requires call\n * @requires callMe\n * @event call:mediaStateChange\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n * @param {string} params.mediaState New media state of the call.\n */\nexport const CALL_MEDIA_STATE_CHANGE = 'call:mediaStateChange'\n\n/**\n * Screensharing has been started turned on or off.\n *\n * @public\n * @memberof call\n * @requires call\n * @requires callMe\n * @event call:screenshareChange\n * @param {Object} params\n * @param {string} params.callId The Id of the call.\n */\nexport const CALL_SCREENSHARE_CHANGE = 'call:screenshareChange'\n\n/**\n * An error has occurred with a call.\n *\n * @public\n * @memberof call\n * @requires call\n * @requires callMe\n * @event call:error\n * @param {Object} params\n * @param {string} params.callId The id of the call.\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const CALL_ERROR = 'call:error'\n\n/**\n * The status of previewing local video has changed.\n * @public\n * @memberof media\n * @requires call\n * @event videoPreview:change\n * @param {Object} params\n * @param {boolean} params.displaying Whether the local video preview is being displayed or not.\n */\nexport const LOCAL_VIDEO_CHANGE = 'videoPreview:change'\n\n/**\n * An error has occurred when changing local video preview status.\n * @public\n * @memberof media\n * @requires call\n * @event videoPreview:error\n * @param {Object} params\n * @param {api.BasicError} params.error Information about the error.\n */\nexport const LOCAL_VIDEO_ERROR = 'videoPreview:error'\n\n// Media devices.\n\n/**\n * A change has been made to default devices used for calls.\n * @public\n * @memberof media\n * @requires call\n * @requires callMe\n * @event devices:defaultsChange\n * @param {Object} params\n * @param {Object} params.devices The devices now set as default.\n */\nexport const DEVICE_DEFAULT_CHANGE = 'devices:defaultsChange'\n\n/**\n * Available media devices have been changed.\n * @public\n * @memberof media\n * @requires call\n * @requires callMe\n * @event devices:change\n * @param {Object} params\n * @param {Object} params.devices The devices, separated by device type.\n */\nexport const DEVICE_CHANGE = 'devices:change'\n\n/**\n * Media device permissions have been granted by the user.\n * @memberof media\n * @requires call\n * @event media:permissions\n * @param {Object} params\n * @param {Object} params.devices The devices to request permission for.\n * @param {api.BasicError} params.error The Basic error object.\n * @param {boolean} params.granted Whether permission was granted?\n */\nexport const MEDIA_PERMISSIONS = 'media:permissions'\n\n/**\n * An error occurred while performing a device operation.\n * @public\n * @memberof media\n * @requires call\n * @requires callMe\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const DEVICE_ERROR = 'devices:error'\n\n/**\n * Media support has been checked.\n * @public\n * @memberof media\n * @requires call\n * @requires callMe\n * @event media:initialize\n * @param {Object} params\n * @param {Object} params.result Results of initializing media.\n * @param {boolean} params.result.error Whether the initialization was successful or not.\n * @param {number} params.result.code A unique code describing the result scenario.\n * @param {string} params.result.message Human readable message of the result.\n */\nexport const MEDIA_INITIALIZED = 'media:initialize'\n\n/**\n * A change has occurred in an audio bridge.\n * @public\n * @memberof AudioBridge\n * @event audioBridge:change\n * @param {Object} params\n * @param {string} bridgeId The bridge that the change occurred on.\n */\nexport const BRIDGE_CHANGE = 'audioBridge:change'\n\n/**\n * An error occurred while performing an audio bridge operation.\n * @public\n * @memberof AudioBridge\n * @event audioBridge:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const BRIDGE_ERROR = 'audioBridge:error'\n","// Call History plugin.\nimport { api, name, reducer } from './interface'\nimport * as sagas from './sagas'\nimport events from './interface/events'\n\n// Other plugins.\nimport { mapEvents } from '../events/interface/actions'\n\n// Libraries.\nimport { values } from 'lodash/fp'\nimport { put } from 'redux-saga/effects'\n\n/**\n * Call History plugin factory.\n * @method callHistory\n * @return {Object} plugin - An sdk plugin.\n */\nexport default function callHistory () {\n  function * init () {\n    yield put(mapEvents(events))\n  }\n\n  return {\n    name,\n    capabilities: ['callHistory'],\n    init,\n    api,\n    reducer,\n    sagas: values(sagas)\n  }\n}\n","import api from './api'\nimport reducer from './reducers'\n\nconst name = 'callHistory'\n\nexport { name, api, reducer }\n","/**\n * The 'call.history' namespace is used to retrieve and inspect the authenticated\n * users call logs.\n *\n * Functions below are all part of this namespace.\n *\n * @public\n * @namespace callHistory\n */\n\n// Call History interface.\nimport * as actions from './actions'\nimport { getCallHistory, getCachedHistory } from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CALLHISTORY')\n\n/**\n * Call History API.\n * @method api\n * @param  {Function} $0\n * @param  {Function} $0.dispatch The redux store's dispatch function.\n * @param {Function} $0.getState - The redux store's getState function.\n * @return {Object} API.\n */\nexport default function api ({ dispatch, getState }) {\n  const callHistoryApi = {\n    /**\n     * Fetches the list of call logs and stores them locally. The API\n     * {@link #callhistoryget CallHistory.get} can then be used to get\n     * the logs from local state after it has been updated.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method fetch\n     * @param  {number} [amount=50] The number of records to retrieve.\n     * @param  {number} [offset=0] Starting offset for records to retrieve.\n     */\n    fetch (amount = 50, offset = 0) {\n      log.debug(`${API_LOG_TAG}call.history.fetch, amount: ${amount}, offset: ${offset}`)\n      dispatch(actions.retrieveCallLogs(amount, offset))\n    },\n\n    /**\n     * Deletes the specified call log.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method remove\n     * @param  {number} recordId The ID of the call log to be removed.\n     */\n    remove (recordId) {\n      log.debug(`${API_LOG_TAG}call.history.remove, recordId: ${recordId}`)\n      dispatch(actions.removeCallLogs(recordId))\n    },\n\n    /**\n     * Deletes all call logs.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method clear\n     */\n    clear () {\n      log.debug(`${API_LOG_TAG}call.history.clear`)\n      dispatch(actions.removeCallLogs('all'))\n    },\n\n    /**\n     * Gets the list of call logs cached locally. The event\n     * `callHistory:changed` is used to indicate the local state of logs\n     * has been updated.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method get\n     * @example\n     * client.on('callHistory:change', function() {\n     *     // Get all call logs when they've been updated.\n     *     let callLogs = client.call.history.get();\n     * });\n     * @returns {Array} A list of call log records, ordered by latest first.\n     */\n    get () {\n      log.debug(`${API_LOG_TAG}call.history.get`)\n      return getCallHistory(getState())\n    },\n\n    /**\n     * Gets the cached call history data and returns stringified data.\n     *\n     * The data is provided in a format that can be used directly with the\n     *    {@link callHistory.setCache call.history.setCache} API. This allows an\n     *    application to persist the information across SDK instances when the\n     *    backend environment does not support the CallHistory feature.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method getCache\n     * @returns {string} A stringified list of call log records from the cache, ordered by latest first.\n     */\n    getCache () {\n      log.debug(`${API_LOG_TAG}call.history.getCache`)\n      return JSON.stringify(getCachedHistory(getState()))\n    },\n\n    /**\n     * Sets the cached call history data, expects stringified data as it will be parsed.\n     *\n     * The data can be retrieved from the {@link callHistory.getCache\n     *    call.history.getCache} API. This allows an\n     *    application to persist the information across SDK instances when the\n     *    backend environment does not support the CallHistory feature.\n     * @public\n     * @memberof callHistory\n     * @requires callHistory\n     * @method setCache\n     * @param {string} data The stringified call history data to store in the cache.\n     */\n    setCache (data) {\n      log.debug(`${API_LOG_TAG}call.history.setCache, data: ${data}`)\n      dispatch(actions.setCache(JSON.parse(data)))\n    }\n  }\n\n  return { call: { history: callHistoryApi } }\n}\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves call history stored in state.\n * @method getCallHistory\n * @param  {Object} state Redux state.\n * @return {Array}\n */\nexport function getCallHistory (state) {\n  return cloneDeep(state.callHistory)\n}\n\n/**\n * Retrieves call history stored in state\n * @method getCachedHistory\n * @param  {Object} state Redux state.\n * @return {Array}\n */\nexport function getCachedHistory (state) {\n  return cloneDeep(state.callHistory)\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { reverse, sortBy, unionBy, concat } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.FETCH_CALL_HISTORY_FINISH] = {\n  next (state, action) {\n    // Note: If a conflict occurs in the below unionBy, the newer log is\n    //      preferred over the older log. This is because SPiDR only keeps\n    //      50 records at a time, and it re-uses old recordIds when it\n    //      creates new record logs. It's stupid.\n\n    // Get local Logs. Local logs are identified by having a recordID of 16 characters\n    const localLogs = state.filter(function (log) {\n      return log.recordId.length === 36 && log.duration !== '0'\n    })\n\n    // Remove the local logs\n    const localLogsRemoved = state.filter(function (log) {\n      return log.resourceLocation !== ''\n    })\n\n    // Generate a list of unique logs (ie; not found in server logs)\n    const uniqueLogs = localLogs.filter(function (log) {\n      var result = action.payload.some(isSimilar, log)\n      return !result\n    })\n\n    // Combine server logs and new logs.\n    const newLogs = concat(unionBy('recordId', action.payload, localLogsRemoved), uniqueLogs)\n\n    // Sort start time, in descending order.\n    return reverse(sortBy('startTime', newLogs))\n  }\n}\n\nreducers[actionTypes.DELETE_CALL_HISTORY_FINISH] = {\n  next (state, action) {\n    if (action.payload === 'all') {\n      return []\n    } else {\n      return state.filter(function (log) {\n        return log.recordId !== action.payload\n      })\n    }\n  }\n}\n\nreducers[actionTypes.ADD_CALL_HISTORY_ENTRY] = {\n  next (state, action) {\n    return concat(action.payload, state)\n  }\n}\n\n// rehydrate cache with previously stored data\nreducers[actionTypes.SET_CACHE] = {\n  next (state, action) {\n    return action.payload\n  }\n}\n\n// Call History default state is an empty array.\nconst reducer = handleActions(reducers, [])\nexport default reducer\n\n/*\n * A helper function to determine if 2 log entries are similar.\n * A log is considered similar under the following conditions:\n *   - the startTime is within 10 seconds\n *   - the duration is within 5 seconds\n *   - the direction is the same\n */\nconst isSimilar = function (serverLogEntry) {\n  const startTimePadding = 10000\n  const durationPadding = 5000\n\n  if (Math.abs(serverLogEntry.startTime - this.startTime) > startTimePadding) {\n    return false\n  }\n  if (Math.abs(serverLogEntry.duration - this.duration) > durationPadding) {\n    return false\n  }\n  if (serverLogEntry.direction !== this.direction) {\n    return false\n  }\n  return true\n}\n","/**\n * Call History saga index.\n * Defines which actions trigger which sagas.\n */\n\n// Call History plugin.\nimport { retrieveCallLogs, removeCallLogs } from './server'\nimport { storeCallLogs, oldStoreCallLogs } from './client'\nimport * as actionTypes from '../interface/actionTypes'\n\n// Other plugins.\nimport { CALL_STATE_CHANGE } from '../../call/interface/actionTypes'\nimport { END_CALL_FINISH, REJECT_CALL_FINISH } from '../../call/interfaceNew/actionTypes'\nimport { CALL_STATES_FCS } from '../../call/constants'\n\n// Libraries.\nimport { takeEvery } from 'redux-saga/effects'\n\n/**\n * Fetch server call history.\n * @method fetchLogs\n */\nexport function * fetchLogs () {\n  yield takeEvery(actionTypes.FETCH_CALL_HISTORY, retrieveCallLogs)\n}\n\n/**\n * Delete server call history.\n * @method removeLogs\n */\nexport function * removeLogs () {\n  yield takeEvery(actionTypes.DELETE_CALL_HISTORY, removeCallLogs)\n}\n\n/**\n * Create local call log after a call ends.\n * Handles actions from both the new and old call interfaces (new/old callstacks).\n * @method createLocalLog\n */\nexport function * createLocalLog () {\n  // Matches \"call ended\" actions from the old call interface (ie. old\n  //    callstack). The old \"call ended\" actions are \"state change\" actions\n  //    where the new state is \"ended\".\n  function oldCallEndedPattern (action) {\n    return action.type === CALL_STATE_CHANGE && action.payload.state === CALL_STATES_FCS.ENDED\n  }\n\n  // Matches \"call ended\" actions from the new call interface (ie. new\n  //    callstack). The \"call ended\" actions are straight-forward \"end call\"\n  //    actions, but since the old interface also uses these actions, we need\n  //    to make sure they're the new interface \"end call\" actions. This is done\n  //    by checking how the call ID is stored in the payload.\n  //    new = action.payload.id; old = action.payload.callId\n  function callEndedPattern (action) {\n    return (action.type === END_CALL_FINISH || action.type === REJECT_CALL_FINISH) && action.payload.id\n  }\n\n  // Forward \"call ended\" actions to the appropriate saga.\n  yield takeEvery(oldCallEndedPattern, oldStoreCallLogs)\n  yield takeEvery(callEndedPattern, storeCallLogs)\n}\n","/**\n * Sagas related to server call history.\n */\n\n// Call History plugin.\nimport * as actions from '../interface/actions'\n\n// Other plugins.\nimport { getPlatform, getRequestInfo } from '../../auth/interface/selectors'\n\n// Helpers.\nimport { logManager } from '../../logs'\nimport request from '../../request/effects'\nimport BasicError, { callHistoryCodes } from '../../errors'\n\n// Libraries.\nimport { isNumber } from 'lodash/fp'\nimport { put, select } from 'redux-saga/effects'\n\n// Constants\nimport { platforms } from '../../constants'\n\nconst log = logManager.getLogger('CALLHISTORY')\n\n/**\n * Saga for fetching call log records.\n * @method retrieveCallLogs\n * @param {Object} action Action of type `FETCH_CALL_HISTORY`.\n */\nexport function * retrieveCallLogs (action) {\n  log.info(\n    `Attempting to retrieve ${action.payload.amount} call history log(s), with an offset of ${action.payload.offset}.`\n  )\n\n  // Catch invalid input (which breaks SPiDR) before making the request.\n  if (!isNumber(action.payload.amount) || action.payload.amount < 0 || !isNumber(action.payload.offset)) {\n    log.info('Unable to retrieve log(s); invalid input.')\n    yield put(\n      actions.retrieveCallLogsFinish({\n        error: new BasicError({\n          code: callHistoryCodes.BAD_REQUEST,\n          message: 'Unable to retrieve log(s); invalid input.'\n        })\n      })\n    )\n    return\n  }\n\n  // TODO: Break the callHistory requests into its own file.\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : requestInfo.version\n  const url = `${requestInfo.baseURL}/rest/version/${version}/user/${requestInfo.username}/logHistory`\n\n  const queryParams = {\n    startIndex: action.payload.offset,\n    count: action.payload.amount\n  }\n\n  const response = yield request({\n    url,\n    queryParams,\n    method: 'GET'\n  })\n\n  if (response.error) {\n    let error\n    if (response.payload.body) {\n      if (response.payload.body.logHistory) {\n        // Handle errors from the server.\n        const { statusCode } = response.payload.body.logHistory\n        log.info(`Failed to retrieve call logs with status code ${statusCode}.`)\n\n        error = new BasicError({\n          code: statusCode === 37 ? callHistoryCodes.BAD_REQUEST : callHistoryCodes.UNKNOWN_ERROR,\n          message: `Failed to retrieve call logs. Status Code: ${statusCode}.`\n        })\n      } else {\n        log.info('Failed to retrieve call logs; user not authenticated.')\n        error = new BasicError({\n          code: callHistoryCodes.NOT_AUTHENTICATED,\n          message: 'Failed to retrieve call logs; user not authenticated.'\n        })\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { code, message } = response.payload.result\n      log.info('Failed to fetch call log(s)', message)\n\n      error = new BasicError({\n        code: code === 403 ? callHistoryCodes.FORBIDDEN : callHistoryCodes.UNKNOWN_ERROR,\n        message: `Call log fetch failed: ${message}.`\n      })\n    }\n\n    yield put(actions.retrieveCallLogsFinish({ error }))\n  } else {\n    // Massage the call logs into a more concise format.\n    let logs = response.payload.body.logHistory.logItems.map(function (log) {\n      if (log.type === 'CallLog') {\n        return log.params\n      }\n    })\n\n    log.info(`Successfully retrieved ${logs.length} call history log(s).`)\n\n    // Massage the call logs to include the remoteParticipant property.\n    logs = logs.map(function (log) {\n      /**\n       * There is a bug in SPiDR where it always uses the keys `callerName` and\n       * `callerDisplayNumber` for ALL logs, instead of only incoming logs.\n       * Because of this, callerDisplayNumber is always the remote participant,\n       * even when the local user is the caller.\n       * This if statement is a workaround for this problem.\n       * // TODO: Remove this if when the SPiDR issue is resolved.\n       */\n      if (log.direction === 'outgoing' && !log.calleeDisplayNumber && !log.calleeName) {\n        log.calleeDisplayNumber = log.callerDisplayNumber\n        log.calleeName = log.callerName\n        // Keep callerDisplayNumber and callerName properties unchanged for\n        //    backwards compatibility.\n      }\n\n      if (log.direction === 'outgoing') {\n        log.remoteParticipant = {\n          displayName: log.calleeName,\n          displayNumber: log.calleeDisplayNumber\n        }\n      } else {\n        log.remoteParticipant = {\n          displayName: log.callerName,\n          displayNumber: log.callerDisplayNumber\n        }\n      }\n      return log\n    })\n\n    yield put(actions.retrieveCallLogsFinish({ logs }))\n  }\n}\n\n/**\n * Saga for deleting call logs.\n * @method removeCallLogs\n * @param {Object} action Action of type `DELETE_CALL_HISTORY`.\n */\nexport function * removeCallLogs (action) {\n  log.info('Attempting to remove call log(s):', action.payload)\n\n  if (!action.payload) {\n    log.info('Could not remove call logs from history; invalid input.')\n    yield put(\n      actions.removeCallLogsFinish({\n        error: new BasicError({\n          code: callHistoryCodes.BAD_REQUEST,\n          message: 'Could not remove call logs; invalid input.'\n        })\n      })\n    )\n    return\n  }\n\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : requestInfo.version\n  let url = `${requestInfo.baseURL}/rest/version/${version}/user/${requestInfo.username}/`\n\n  if (action.payload === 'all') {\n    url += 'logHistory'\n  } else {\n    url += `logRecord/${action.payload}`\n  }\n\n  const response = yield request({\n    url,\n    method: 'DELETE',\n    responseType: 'none'\n  })\n\n  if (response.error) {\n    let error\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.logRecord\n      log.info(`Failed to remove log(s) from call history. Status Code ${statusCode}).`)\n\n      error = new BasicError({\n        code: statusCode === 42 ? callHistoryCodes.NOT_FOUND : callHistoryCodes.UNKNOWN_ERROR,\n        message: `Failed to remove call log. Status Code: ${statusCode}.`\n      })\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.info('Failed call log removal.', message)\n\n      error = new BasicError({\n        code: callHistoryCodes.UNKNOWN_ERROR,\n        message: `Call log removal failed: ${message}.`\n      })\n    }\n\n    yield put(actions.removeCallLogsFinish({ error }))\n  } else {\n    log.info('Successfully removed log(s) from call history.')\n    yield put(actions.removeCallLogsFinish({ recordId: action.payload }))\n  }\n}\n","/**\n * Sagas related to client generated call history.\n */\n\n// Call History plugin.\nimport { addCallLogEntry } from '../interface/actions'\n\n// Other plugins.\nimport { getUserInfo } from '../../auth/interface/selectors'\nimport { END_CALL_FINISH, REJECT_CALL_FINISH } from '../../call/interfaceNew/actionTypes'\nimport { CALL_STATES_FCS, CALL_STATES } from '../../call/constants'\nimport { getCallById as oldGetCallById } from '../../call/interface/selectors'\nimport { getCallById as newGetCallById } from '../../call/interfaceNew/selectors'\n\n// Helpers.\nimport { logManager } from '../../logs'\n\n// Libraries\nimport { put, select } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('CALLHISTORY')\n\n/**\n * Constructs a local call log from a \"call ended\" action.\n * Old callstack specific.\n *\n * This saga defines how a \"local call log\" is created after a call has ended.\n *    The format of the log mimics the format of server-side call logs.\n * Assumptions:\n *    1. The provided action is a \"call ended\" action for the old callstack.\n * Responsibilities:\n *    1. Gather all information needed for a call log.\n *    2. Create / format the call log.\n *    3. Update redux state (via actions).\n * @method oldStoreCallLogs\n * @param {Object} action A `CALL_STATE_CHANGE` action representing a call end.\n */\nexport function * oldStoreCallLogs (action) {\n  // Make sure this is a call end state change.\n  if (action.payload.state !== CALL_STATES_FCS.ENDED) {\n    return\n  }\n\n  // Get call state needed for the log.\n  const call = yield select(oldGetCallById, action.payload.callId)\n\n  if (!call) {\n    log.debug(`Call info (${action.payload.callId}) not in state to create local log.`)\n    return\n  }\n\n  var logEntry = {\n    recordId: action.payload.callId,\n    startTime: '' + call.startTime,\n    duration: '' + (call.endTime - call.startTime),\n    callerDisplayNumber: call.from,\n    calleeDisplayNumber: call.to,\n    calleeName: call.calleeName,\n    remoteParticipant: call.remoteParticipant,\n    originalRemoteParticipant: call.originalRemoteParticipant,\n    resourceLocation: ''\n  }\n\n  if (call.direction === 'incoming') {\n    // If the previous state was ringing, and the change was not because the call was\n    //      answered by another device (ie. code 9904), then it is a missed call.\n    if (action.payload.transition.prevState === CALL_STATES_FCS.RINGING && action.payload.transition.code !== '9904') {\n      logEntry.direction = 'missed'\n    } else {\n      logEntry.direction = 'incoming'\n    }\n    logEntry.callerName = call.callerName\n  } else {\n    logEntry.direction = 'outgoing'\n    // Use the contact name provided to the call as the current user's name.\n    const contactName = (call.contact.firstName + ' ' + call.contact.lastName).trim()\n    logEntry.callerName = contactName || call.from.split('@')[0]\n  }\n\n  log.debug('Adding call event to the local call history:', logEntry)\n  yield put(addCallLogEntry(logEntry))\n}\n\n/**\n * Constructs a local call log from a \"call ended\" action.\n * New callstack specific.\n *\n * This saga defines how a \"local call log\" is created after a call has ended.\n *    The format of the log mimics the format of server-side call logs.\n * Assumptions:\n *    1. The provided action is a \"call ended\" action for the new callstack.\n * Responsibilities:\n *    1. Gather all information needed for a call log.\n *    2. Create / format the call log.\n *    3. Update redux state (via actions).\n * @method storeCallLogs\n * @param {Object} action An action representing a call ending.\n */\nexport function * storeCallLogs (action) {\n  if (![END_CALL_FINISH, REJECT_CALL_FINISH].includes(action.type)) {\n    return\n  }\n\n  // Get call state needed for the log.\n  const call = yield select(newGetCallById, action.payload.id)\n\n  if (!call) {\n    log.debug(`Call (${action.payload.id}) not in state to create local log.`)\n    return\n  }\n\n  // TODO: Call state doesn't have a property with the current user's name.\n  //    Get it from auth state for now.\n  const userInfo = yield select(getUserInfo)\n\n  var logEntry = {\n    recordId: action.payload.id,\n    startTime: '' + call.startTime,\n    duration: '' + (call.endTime - call.startTime),\n    callerDisplayNumber: call.isCaller ? userInfo.username : call.remoteParticipant.displayNumber,\n    calleeDisplayNumber: call.isCaller ? call.remoteParticipant.displayNumber : userInfo.username,\n    calleeName: call.isCaller\n      ? call.remoteParticipant.displayName || call.remoteParticipant.displayNumber\n      : userInfo.username,\n    callerName: call.isCaller\n      ? call.displayName\n        ? call.displayName\n        : userInfo.username\n      : call.remoteParticipant.displayName || call.remoteParticipant.displayNumber,\n    remoteParticipant: call.remoteParticipant,\n    originalRemoteParticipant: null,\n    resourceLocation: ''\n  }\n\n  if (call.direction === 'incoming') {\n    // If the previous state was ringing, and the change was not because the call was\n    //      answered by another device (ie. code 9904), then it is a missed call.\n    if (\n      action.payload.transition &&\n      action.payload.transition.prevState === CALL_STATES.RINGING &&\n      action.payload.transition.code !== '9904'\n    ) {\n      logEntry.direction = 'missed'\n    } else {\n      logEntry.direction = 'incoming'\n    }\n  } else {\n    logEntry.direction = 'outgoing'\n  }\n\n  log.debug(`Adding ${logEntry.direction} call to the local call history:`, logEntry)\n  yield put(addCallLogEntry(logEntry))\n}\n","/**\n * Retrieves media devices available on the system.\n * @method getDevices\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getDevices (state) {\n  return state.webrtc.devices\n}\n\n/**\n * Session selectors.\n */\nexport function getSessions (state) {\n  return state.webrtc.sessions\n}\n\nexport function getSessionById (state, sessionId) {\n  return getSessions(state).find(session => session.id === sessionId)\n}\n\n/**\n * Track selectors.\n */\nexport function getTracks (state) {\n  return state.webrtc.tracks\n}\n\nexport function getTrackById (state, trackId) {\n  return getTracks(state).find(track => track.trackId === trackId)\n}\n\n/**\n * Media selectors.\n * Handles retrieving data from the `state.webrtc.media` substate.\n */\n\n/**\n * Get the list of all media this session.\n * @method getMedia\n * @param  {Object} state Redux state.\n * @return {Array} A list of all media objects.\n */\nexport function getMedia (state) {\n  return state.webrtc.media\n}\n\n/**\n * Get a specific media object.\n * @method getMediaById\n * @param  {Object} state Redux state.\n * @param  {string} mediaId The media to retrieve.\n * @return {Object} A media object.\n */\nexport function getMediaById (state, mediaId) {\n  return getMedia(state).find(media => media.id === mediaId)\n}\n\n/**\n * Retrieves information about the browser.\n * @method getBrowserDetails\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getBrowserDetails (state) {\n  return state.webrtc.browser\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nfunction callHistoryEvent (action) {\n  if (!action.error) {\n    return [\n      {\n        type: eventTypes.CALL_HISTORY_CHANGE,\n        args: {}\n      },\n      {\n        type: eventTypes.CALL_HISTORY_CACHE_CHANGE,\n        args: {}\n      }\n    ]\n  } else {\n    return {\n      type: eventTypes.CALL_HISTORY_ERROR,\n      args: { error: action.payload }\n    }\n  }\n}\n\nvar events = {}\n\nevents[actionTypes.FETCH_CALL_HISTORY_FINISH] = callHistoryEvent\nevents[actionTypes.DELETE_CALL_HISTORY_FINISH] = callHistoryEvent\nevents[actionTypes.ADD_CALL_HISTORY_ENTRY] = callHistoryEvent\n\nexport default events\n","/**\n * Call history state has been updated. See {@link #callhistoryget CallHistory.get} to retrieve new state.\n * @public\n * @memberof callHistory\n * @event callHistory:change\n */\nexport const CALL_HISTORY_CHANGE = 'callHistory:change'\n\n/**\n * An error occurred while performing a call history operation.\n * @public\n * @memberof callHistory\n * @event callHistory:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const CALL_HISTORY_ERROR = 'callHistory:error'\n\n/**\n * Call history cached state has been updated\n * @public\n * @memberof callHistory\n * @event callHistoryCache:change\n */\nexport const CALL_HISTORY_CACHE_CHANGE = 'callHistoryCache:change'\n","/**\n * This file is a plugin for the \"clickToCall\" feature. It is meant to connect two specified devices\n * Reference info: https://confluence.genband.com/display/KSDK/Plugins\n */\nimport pluginInterface from './interface'\n\n// Sagas\nimport { clickToCallSaga } from './sagas'\n\n// Events\nimport events from './interface/events'\n\n// Other plugins.\nimport { mapEvents } from '../events/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\n\n/**\n * clickToCall Plugin (that is implemented using a saga).\n *\n * @method clickToCallImplementation\n * @return {Object} An instance of the \"clickToCall\" plugin.\n */\nexport default function clickToCallImplementation () {\n  function * init () {\n    // Map events\n    yield put(mapEvents(events))\n  }\n\n  return {\n    // Interface Components:\n    name: pluginInterface.name,\n    capabilities: ['clickToCall'],\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer,\n    // Implementation Components\n    sagas: [clickToCallSaga],\n    init\n  }\n}\n","import api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a clickToCall plugin.\n * @type {string}\n */\nconst name = 'clickToCall'\n\nexport default {\n  reducer,\n  name,\n  api\n}\n","/**\n * The clickToCall namespace is used to bridge a call between two specified devices\n *\n * @public\n * @namespace clickToCall\n * @requires clickToCall\n */\nimport * as actions from './actions'\nimport { getAll } from './selectors'\n\nimport { v4 as uuidV4 } from 'uuid'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CLICKTOCALL')\n\nexport default function api (context) {\n  const clickToCallApi = {\n    /**\n     * Attempts to establish a call between two specified devices\n     *\n     * @public\n     * @memberof clickToCall\n     * @method make\n     * @param  {string} caller A string representing the person making the call\n     * @param  {string} callee A string representing the person receiving the call\n     * @returns {string} callId A unique id representing the call\n     */\n    make: function (caller, callee) {\n      log.debug(API_LOG_TAG + 'clickToCall.make: ', caller, callee)\n      const callId = uuidV4()\n      context.dispatch(actions.clickToCall(callId, caller, callee))\n      return callId\n    },\n    /**\n     * Gets all local clickToCall calls\n     *\n     * @public\n     * @memberof clickToCall\n     * @requires clickToCall\n     * @method get\n     * @returns {Array} A list of clickToCall records, ordered by earliest requestTime\n     */\n    get: function () {\n      log.debug(API_LOG_TAG + 'clickToCall.get')\n      return getAll(context.getState())\n    }\n  }\n\n  return {\n    clickToCall: clickToCallApi\n  }\n}\n","// Other Libraries\nimport { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves clickToCall calls stored in state\n *\n * @method getAll\n * @param  {Object} state Redux state.\n * @return {Array}\n */\nexport function getAll (state) {\n  return cloneDeep(state.clickToCall)\n}\n","/**\n * clicktoCall Plugin.\n *\n * Handles the clicktoCall plugin substate. Defines how to communicate back to\n * the Interface (ie. which actions to use).\n * @param  {Object} [state={}] Default state for the reducer is an empty object.\n * @param  {Action} action A dispatched action.\n * @return {Object} state The new example sub-state.\n */\n\nimport { handleActions } from 'redux-actions'\nimport * as actionTypes from './actionTypes'\n\nconst reducers = {}\n\nreducers[actionTypes.CLICK_TO_CALL_FINISH] = {\n  next (state, action) {\n    if (action.error) {\n      return state\n    } else {\n      return state.concat({\n        callId: action.payload.callId,\n        caller: action.payload.caller,\n        callee: action.payload.callee,\n        requestTime: action.payload.requestTime\n      })\n    }\n  }\n}\n\n// clickToCall default state is empty array\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","// clickToCall plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { getConnectionInfo, getPlatform } from '../auth/interface/selectors'\n\n// Libraries.\nimport { put, take, select } from 'redux-saga/effects'\nimport { logManager } from '../logs'\n\n// Other plugins.\nimport request from '../request/effects'\n\n// Error handling\nimport BasicError, { clickToCallCodes } from '../errors'\nimport { platforms } from '../constants'\n\n// Get the logger\nconst log = logManager.getLogger('CLICKTOCALL')\n\nexport function * clickToCallSaga () {\n  while (true) {\n    // wait for CLICK_TO_CALL action dispatch.\n    const action = yield take(actionTypes.CLICK_TO_CALL)\n\n    // ensure both caller and callee are provided in payload.\n    if (!action.payload.caller || !action.payload.callee) {\n      log.info('Missing call participant information')\n      yield put(\n        actions.clickToCallFinish({\n          payload: {\n            error: new BasicError({\n              message: 'callee or caller were not provided in CLICK_TO_CALL action payload',\n              code: clickToCallCodes.MISSING_ARGS\n            }),\n            callId: action.payload.callId\n          }\n        })\n      )\n      continue\n    }\n\n    const conn = yield select(getConnectionInfo)\n    const platform = yield select(getPlatform)\n\n    const { server, username } = conn\n\n    const version = platform === platforms.UC ? 1 : server.version\n\n    const url = `${server.protocol}://${server.server}:${server.port}/rest/version/${version}/user/${username}/clicktocall`\n\n    const data = {\n      clickToCallRequest: {\n        callingParty: action.payload.caller,\n        calledParty: action.payload.callee\n      }\n    }\n\n    const options = {\n      url,\n      method: 'POST',\n      body: JSON.stringify(data)\n    }\n\n    const requestTime = new Date().getTime()\n    // wait until we get a response from /clicktocall service\n    const response = yield request(options)\n\n    // determine what type of response was received.\n    if (response.error) {\n      yield put(\n        actions.clickToCallFinish({\n          payload: {\n            error: new BasicError({\n              message: response.payload.result.message,\n              code: clickToCallCodes.RESPONSE_ERROR\n            }),\n            callId: action.payload.callId\n          }\n        })\n      )\n    } else {\n      yield put(\n        actions.clickToCallFinish({\n          callId: action.payload.callId,\n          caller: action.payload.caller,\n          callee: action.payload.callee,\n          requestTime\n        })\n      )\n    }\n  }\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\n/**\n * Helper function for clickToCall error events.\n *\n * @method clickToCallEvent\n * @param  {Object} action\n * @return {Object}\n */\nfunction clickToCallEvent (action) {\n  if (!action.error) {\n    return {\n      type: eventTypes.CLICK_TO_CALL_STARTED,\n      args: {\n        callId: action.payload.callId\n      }\n    }\n  } else {\n    return {\n      type: eventTypes.CLICK_TO_CALL_ERROR,\n      args: {\n        callId: action.payload.callId,\n        error: action.payload\n      }\n    }\n  }\n}\n\nvar events = {}\n\nevents[actionTypes.CLICK_TO_CALL_FINISH] = clickToCallEvent\n\nexport default events\n","/**\n * ClickToCall has successfully started.\n *\n * @public\n * @memberof clickToCall\n * @requires clickToCall\n * @event clickToCall:start\n * @param {Object} params\n * @param {string} params.callId A unique id representing the call made\n */\nexport const CLICK_TO_CALL_STARTED = 'clickToCall:start'\n\n/**\n * ClickToCall had an error.\n *\n * @public\n * @memberof clickToCall\n * @requires clickToCall\n * @event clickToCall:error\n * @param {Object} params\n * @param {string} params.callId A unique id representing the call made\n * @param {api.BasicError} params.error The Basic error object.\n *\n */\nexport const CLICK_TO_CALL_ERROR = 'clickToCall:error'\n","import baseConnectivity from '../common/base'\nimport { connCheckMethods } from '../../constants'\nimport { defaults } from 'lodash/fp'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\nconst defaultValues = {\n  method: connCheckMethods.KEEP_ALIVE,\n  pingInterval: 30000,\n  reconnectLimit: 5,\n  reconnectDelay: 5000,\n  reconnectTimeMultiplier: 1,\n  reconnectTimeLimit: 640000,\n  autoReconnect: true,\n  maxMissedPings: 3,\n  checkConnectivity: true,\n  webSocketOAuthMode: 'query'\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  method: enums([connCheckMethods.KEEP_ALIVE]),\n  pingInterval: v8n.positive(),\n  reconnectLimit: v8n.positive(),\n  reconnectDelay: v8n.positive(),\n  reconnectTimeMultiplier: v8n.positive(),\n  reconnectTimeLimit: v8n.positive(),\n  autoReconnect: v8n.boolean(),\n  maxMissedPings: v8n.positive(),\n  checkConnectivity: v8n.boolean(),\n  webSocketOAuthMode: v8n.string()\n})\nconst parseOptions = parse('connectivity', v8nValidation)\n\n/**\n * Configuration options for the Connectivity feature.\n * The SDK can only use keepalive as the connectivity check.\n *\n * Keep Alive: The client sends \"keepalive\" messages (to the server) on the websocket at regular intervals. This lets the server know that the client is still connected, and that it should \"keep the connection alive\".\n *\n * For more information on keepalive see here: https://en.wikipedia.org/wiki/Keepalive\n * @public\n * @name config.connectivity\n * @memberof config\n * @instance\n * @param {Object} connectivity Connectivity configs.\n * @param {Number} [connectivity.pingInterval=30000] Time in between websocket ping attempts (milliseconds).\n * @param {Number} [connectivity.reconnectLimit=5] Number of failed reconnect attempts before reporting an error. Can be set to 0 to not limit reconnection attempts.\n * @param {Number} [connectivity.reconnectDelay=5000] Base time between websocket reconnect attempts (milliseconds).\n * @param {Number} [connectivity.reconnectTimeMultiplier=1] Reconnect delay multiplier for subsequent attempts. The reconnect delay time will be multiplied by this after each failed reconnect attempt to increase the delay between attempts. eg. 5000ms then 10000ms then 20000ms delay if value is 2.\n * @param {Number} [connectivity.reconnectTimeLimit=640000] Maximum time delay between reconnect attempts (milliseconds). Used in conjunction with the reconnect time multiplier to prevent overly long delays between reconnection attempts.\n * @param {Boolean} [connectivity.autoReconnect=true] Flag to determine whether the SDK will attempt to automatically reconnect after connectivity disruptions.\n * @param {Number} [connectivity.maxMissedPings=3] Maximum pings sent (without receiving a response) before reporting an error.\n * @param {Boolean} [connectivity.checkConnectivity=true] Flag to determine whether the SDK should check connectivity.\n * @param {string} [connectivity.webSocketOAuthMode=query] query will send the bearer access token to authenticate the websocket and none will not send it.\n */\nexport default function connectivity (options = {}) {\n  options = defaults(defaultValues, options)\n  parseOptions(options)\n  return baseConnectivity(options)\n}\n","// Connectivity plugin.\nimport pluginInterface from '../interface'\nimport eventsMap from '../interface/events'\nimport { wsConnectFlow } from './sagas'\n\n// Other plugins.\nimport { update as updateConfig } from '../../config/interface/actions'\nimport { mapEvents } from '../../events/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { connCheckResponsibility } from '../../constants'\n\n/**\n * Base Connectivity plugin factory.\n * Responsible for handling websockets.\n * @method baseConnectivity\n * @param  {Object} [options={}] Connectivity configs. See above.\n * @return {Object} Plugin - A connectivity plugin.\n */\nexport default function baseConnectivity (options) {\n  // For backwards compatibility, convert the old style to the new style.\n  if (typeof options.method === 'string') {\n    const method = options.method\n    options.method = {\n      type: method,\n      // In both old scenarios, the client is responsible.\n      responsibleParty: connCheckResponsibility.CLIENT\n    }\n  }\n\n  function * init () {\n    yield put(updateConfig(options, pluginInterface.name))\n    yield put(mapEvents(eventsMap))\n  }\n\n  return {\n    sagas: [wsConnectFlow],\n    init,\n    name: pluginInterface.name,\n    reducer: pluginInterface.reducer,\n    api: pluginInterface.api\n  }\n}\n","import name from './name'\nimport api from './api'\nimport reducer from './reducers'\n\nexport default { name, api, reducer }\n","// Constants\nimport { platforms } from '../../constants'\n\n/**\n * The 'connection' namespace is used to connect and maintain connections between\n * the SDK and one or more backend servers.\n *\n * @public\n * @namespace connection\n */\n\n/**\n * Information about a websocket connection.\n *\n * Can be retrieved using the {@link connection.getSocketState} API.\n *\n * @public\n * @static\n * @typedef {Object} WSConnectionObject\n * @memberof connection\n * @property {boolean} connected The state of the websocket connection.\n * @property {boolean} pinging True if the client has sent a ping to the server and is still waiting for a pong response.\n * @property {Object} method Information about how the websocket is being used.\n * @property {string} [method.type] How the websocket is staying connected.\n * @property {string} [method.responsibleParty] Who is responsible for keeping the connection alive.\n * @property {string} platform The SDK platform being used.\n * @property {number} pingInterval How often the client will ping the server to test for websocket connectivity.\n * @property {number} reconnectLimit How many times the SDK will try to reconnect a disconnected websocket.\n * @property {number} reconnectDelay How long the SDK will wait before retrying websocket reconnection.\n * @property {number} reconnectTimeMultiplier Reconnect delay multiplier for subsequent attempts. The reconnect delay time will be multiplied by this after each failed reconnect attempt to increase the delay between attempts. eg. 5000ms then 10000ms then 20000ms delay if value is 2.\n * @property {number} reconnectTimeLimit Maximum time delay between reconnect attempts (milliseconds). Used in conjunction with `reconnectTimeMultiplier` to prevent overly long delays between reconnection attempts.\n * @property {boolean} autoReconnect Indicates if the SDK should automatically try reconnecting a disconnected websocket.\n * @property {number} maxMissedPings How many missed pings before the SDK stops trying to reconnect a disconnected websocket.\n * @property {string} webSocketOAuthMode The mode used for authenticating with the server.\n * @property {Object} wsInfo Information required to connect a websocket to the server.\n * @property {string} [wsInfo.protocol] The protocol to use to connect a websocket.\n * @property {string} [wsInfo.server] The domain name or IP address of the server to connect to.\n * @property {number} [wsInfo.port] The port of the server to connect to.\n * @property {string} [wsInfo.url] The URL path to use to request a websocket connection.\n * @property {string} [wsInfo.params] Any additional params that might be required by the server to establish the websocket connection.\n * @property {number} lastContact The date and time that the last known contact with the server was.\n */\n\nimport { changeConnectivityChecking, lostConnection } from './actions'\n\n// Selectors\nimport { getConnectionState } from './selectors'\nimport { getPlatform } from '../../auth/interface/selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CONNECTIVITY')\n\nexport default function api ({ dispatch, getState }) {\n  const connectivityApi = {\n    /**\n     * Get the state of the websocket.\n     * @public\n     * @static\n     * @memberof connection\n     * @method getSocketState\n     * @param {string} [platform='link'] Backend platform for which to request the websocket's state.\n     * @return {connection.WSConnectionObject} Details about the current websocket connection, including state and configuration.\n     */\n    getSocketState (platform = platforms.LINK) {\n      log.debug(API_LOG_TAG + 'connection.getSocketState: ', platform)\n      return getConnectionState(getState(), platform)\n    },\n\n    /**\n     * Enables or disables connectivity checking.\n     * @public\n     * @memberof connection\n     * @method enableConnectivityChecking\n     * @param {boolean} enable Enable connectivity checking.\n     */\n    enableConnectivityChecking (enable) {\n      log.debug(API_LOG_TAG + 'connection.enableConnectivityChecking: ', enable)\n      dispatch(changeConnectivityChecking(enable))\n    },\n\n    /**\n     * Triggers a reset in the connection to the WebSocket being used for notifications.\n     * This can be used in scenarios where a network issue (undetectable by the SDK)\n     * is detected by an application.\n     *\n     * If there is no WebSocket currently connected, this function has no effect.\n     * Calling this function will trigger all the normal WebSocket and connectivity lifecycle\n     * events as well as trigger re-connection processing that follows the configuration of the SDK.\n     * Calling this function always has the potential of causing some events being lost by the\n     * SDK and preventing proper operation.\n     * @public\n     * @memberof connection\n     * @method resetConnection\n     */\n    resetConnection () {\n      const state = getState()\n      const platform = getPlatform(state)\n      log.debug(API_LOG_TAG + 'connection.resetConnection: ', platform)\n\n      const wsState = getConnectionState(state, platform)\n      if (!wsState.connected) {\n        log.debug(API_LOG_TAG + 'connection.resetConnection: No active websocket connection. Ignoring request.')\n        return\n      }\n      // Dispatching this action would close/cleanup existing ws connection\n      // However, we'll re-connect after that.\n      dispatch(lostConnection(undefined, platform))\n    }\n  }\n  return { connection: connectivityApi }\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { omit } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.WS_ATTEMPT_CONNECT] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_RECONNECT_FAILED] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_CONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: true,\n        method: action.payload.kandy.method,\n        platform: action.meta.platform,\n        ...omit('checkConnectivity', action.payload.kandy)\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.LOST_CONNECTION] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_DISCONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_ERROR] = {\n  next (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\n/*\n  Accepts a boolean payload for checkConnectivity\n */\nreducers[actionTypes.CHANGE_CONNECTIVITY_CHECKING] = {\n  next (state, action) {\n    return {\n      ...state,\n      checkConnectivity: action.payload\n    }\n  }\n}\n\n/*\n  Accepts a payload for pingInterval in MILLISECONDS\n */\nreducers[actionTypes.CHANGE_PING_INTERVAL] = {\n  next (state, action) {\n    return {\n      ...state,\n      pingInterval: action.payload\n    }\n  }\n}\n\n/**\n * Connectivity Interface reducer\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n */\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nvar events = {}\n\nevents[actionTypes.WS_CONNECT_FINISHED] = function (action) {\n  if (action.error) {\n    // TODO: Handle the error case?\n  } else {\n    return {\n      type: eventTypes.WS_CHANGE,\n      args: { platform: action.meta.platform }\n    }\n  }\n}\n\nevents[actionTypes.LOST_CONNECTION] = function (action) {\n  return {\n    type: eventTypes.WS_CHANGE,\n    args: { platform: action.meta.platform }\n  }\n}\n// TODO: Differentiate between types of disconnects?\nevents[actionTypes.WS_DISCONNECT_FINISHED] = events[actionTypes.LOST_CONNECTION]\n\n// TODO: Does an app care that we're trying to connect/reconnect?\nevents[actionTypes.WS_ATTEMPT_CONNECT] = function (action) {\n  return {\n    type: eventTypes.WS_CHANGE,\n    args: { platform: action.meta.platform }\n  }\n}\n\nexport default events\n","/**\n * The websocket to the server has changed state.\n *\n * @public\n * @memberof connection\n * @event ws:change\n * @param {Object} params\n * @param {string} params.platform The platform\n */\nexport const WS_CHANGE = 'ws:change'\n","// Connectivity plugin.\nimport { openWebsocket, cleanupWebSocket, wsEmitter } from './websocket'\nimport { getConnectivityConfig, getPingInterval, getCheckConnectivity } from '../interface/selectors'\nimport * as actionTypes from '../interface/actionTypes'\nimport * as actions from '../interface/actions'\n\n// Other plugins.\nimport { getConnectionInfo } from '../../auth/interface/selectors'\nimport { getSubscriptionInfo } from '../../subscription/interface/selectors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { takeEvery, delay, call, put, fork, cancel, actionChannel, race, select, take } from 'redux-saga/effects'\n\n// Constants\nimport { platforms, connCheckMethods, connCheckResponsibility } from '../../constants'\n\n// Get the logger\nconst log = logManager.getLogger('CONNECTIVITY')\n\nexport function * wsConnectFlow () {\n  log.info('Creating channel for handling websocket actions ...')\n  const chan = yield actionChannel(actionTypes.WS_ATTEMPT_CONNECT)\n  log.info('Channel successfully created.')\n  yield takeEvery(chan, websocketLifecycle)\n}\n\n/**\n * Saga that handles a websocket over its lifecycle.\n * @method websocketLifecycle\n * @param  {Object} wsConnectAction\n */\nexport function * websocketLifecycle (wsConnectAction) {\n  const wsInfo = wsConnectAction.payload\n  const { platform, isReconnect } = wsConnectAction.meta\n\n  // Redux-saga take() pattern.\n  // Take disconnect websocket action for this platform.\n  function disconnectWebsocketPattern (action) {\n    return action.type === actionTypes.WS_DISCONNECT && action.meta.platform === platform\n  }\n\n  log.info(`Connecting to websocket on platform: ${platform} ...`)\n  // Try to open the websocket, but cancel if we get a disconnect action.\n  const { websocket, disconnect } = yield race({\n    websocket: call(connectWebsocket, wsInfo, platform),\n    disconnect: take(disconnectWebsocketPattern)\n  })\n\n  // If the websocket didn't open, stop here. Dispatch the error if there was one.\n  if (disconnect) {\n    log.info('Received disconnect during websocket connection; stopping.')\n    return\n  } else if (websocket.error) {\n    if (isReconnect) {\n      yield put(actions.wsReconnectFailed(undefined, platform))\n      return\n    } else {\n      yield put(actions.wsConnectFinished(new Error(websocket.message), platform))\n      return\n    }\n  }\n\n  // Append information to the websocket, so that its accessible elsewhere.\n  // TODO: Remove this and replace with proper redux state storage.\n  const connConfig = yield select(getConnectivityConfig)\n  websocket.kandy = connConfig\n\n  websocket.kandy.wsInfo = wsInfo\n  websocket.kandy.platform = platform\n\n  // set last contact in both cases to be now\n  websocket.kandy.lastContact = Date.now()\n\n  const emitTask = yield fork(wsEmitter, websocket, platform)\n\n  // determine which pingFlow is appropriate\n  let pingFlow\n  if (websocket.kandy.method.responsibleParty === connCheckResponsibility.SERVER) {\n    log.debug(`Starting a serverPing flow on ${platform} ...`)\n    pingFlow = yield fork(serverPingFlow, websocket, platform)\n  } else {\n    log.debug(`Starting a clientPing flow on ${platform} ...`)\n    pingFlow = yield fork(clientPingFlow, websocket, platform)\n  }\n\n  // Dispatch the finish action, to notify that the websocket is connected.\n  yield put(actions.wsConnectFinished(websocket, platform))\n\n  // Redux-saga take() pattern.\n  // Take end of lifecycle WS actions for this platform.\n  function closeWebsocketPattern (action) {\n    return (\n      (action.type === actionTypes.WS_DISCONNECT ||\n        action.type === actionTypes.LOST_CONNECTION ||\n        action.type === actionTypes.WS_CLOSED ||\n        action.type === actionTypes.WS_ERROR) &&\n      action.meta.platform === platform\n    )\n  }\n\n  // Wait for a disconnect or lost connection action.\n  const action = yield take(closeWebsocketPattern)\n  log.debug(`Cancelling outstanding tasks upon receiving action: ${action.type}`)\n\n  // Whether we're disconnecting or have lost connection,\n  //      we want to cancel these tasks either way.\n  yield cancel([emitTask, pingFlow])\n\n  log.debug('Cleaning up websocket connection ...')\n  yield call(cleanupWebSocket, websocket)\n\n  if (action.type === actionTypes.WS_DISCONNECT) {\n    // If we're disconnecting, close the websocket to end it's lifecycle.\n    yield put(actions.wsDisconnectFinished(undefined, platform))\n    log.info('Successfully disconnected websocket connection.')\n  } else if (action.type === actionTypes.WS_CLOSED && action.payload.code === 1000) {\n    // 1000 signifies a normal closure\n    // Normal websocket close, don't try to reconnect\n    log.debug('Websocket closed normally.')\n    yield put(actions.wsReconnectFailed(undefined, platform))\n  } else {\n    if (websocket.kandy.autoReconnect) {\n      // If this is a Link websocket, we need to ensure the URL is using the\n      //     \"latest\" access token from state.\n      if (wsConnectAction.meta.platform === platforms.UC) {\n        log.info('Updating access token ...')\n        const { notificationChannel } = yield select(getSubscriptionInfo)\n        const { accessToken, oauthToken } = yield select(getConnectionInfo)\n        wsInfo.url = notificationChannel\n        if (oauthToken && !accessToken) {\n          wsInfo.params = {\n            access_token: oauthToken\n          }\n        } else {\n          wsInfo.params = {\n            token: accessToken\n          }\n        }\n      } else if (wsConnectAction.meta.platform === platforms.LINK) {\n        const { bearerAccessToken } = yield select(getConnectionInfo)\n        // If using bearerAccessToken and WS query mode, set the token as part\n        //    of the WS reconnect query string.\n        if (bearerAccessToken && connConfig.webSocketOAuthMode === 'query') {\n          wsInfo.params = {\n            token: bearerAccessToken\n          }\n        }\n      }\n\n      // If we've lost connection, re-dispatch the initial action, so that we can\n      //      start the lifecycle over.\n      log.debug('Attempting to reconnect using a new websocket ...')\n      yield put(actions.wsAttemptConnect(wsInfo, wsConnectAction.meta.platform, true))\n    } else {\n      log.debug('Not attempting to reconnect to websocket autoReconnect is false.')\n      yield put(actions.wsReconnectFailed(undefined, platform))\n    }\n  }\n}\n\n/**\n * if we receive a server ping we want to respond with a pong,\n * if there is none we want to check to see if its been too long since the server last pinged us and if it has been then reconnect,\n * otherwise we just want to increment the time since the last ping\n * @param {Object} ws a websocket connected to the backend\n * @return {Object} yields a Flux standard action\n */\nexport function * serverPingFlow (ws) {\n  const { lastContact, platform, maxMissedPings, autoReconnect } = ws.kandy\n  let timeOfLastPing = Date.now()\n  const { pingInterval: configPingInterval } = yield select(getConnectivityConfig)\n  if (configPingInterval) {\n    log.warn(\n      '`connectivity.pingInterval` has been set, but `connectivity.method.responsibleParty` is set to `server`. ' +\n        `The configured value of ${configPingInterval}ms will be ignored.`\n    )\n  }\n\n  while (true) {\n    /**\n     * //TODO: Get rid of this use of getPingInterval\n     * The server doesn't even use this interval, it uses whatever the server is set to\n     * It gets an undefined value, sets it to 120 seconds, and when the server responds switched to that timeout.\n     * See KJS-58 for a discussion of the problem, and KAA-2215 for a long-term solution\n     */\n    let pingInterval = yield select(getPingInterval)\n    pingInterval = typeof pingInterval !== 'undefined' ? pingInterval : 120000\n    const maxIdleDuration = pingInterval * maxMissedPings\n    log.debug(`serverPing: Using ping interval: ${pingInterval} with maximum idle duration: ${maxIdleDuration}`)\n\n    // wait for incoming server pings or disconnect actions on an interval\n    const { serverPing, disconnect } = yield race({\n      expiry: delay(pingInterval),\n      serverPing: take(actionTypes.RECEIVE_SERVER_PING),\n      disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n    })\n\n    // is disconnect action received then exit\n    if (disconnect) {\n      log.debug('Got disconnect action. Exiting from serverPing flow ...')\n      break\n    }\n\n    if (serverPing) {\n      // server sent us a ping so reset the timeSinceLastPing\n      timeOfLastPing = Date.now()\n\n      // pingInterval is stored in milliseconds but comes in as seconds so convert\n      const pingIntervalMillis = serverPing.payload.connCheck.interval * 1000\n      // Prevent firing actions if pingInterval hasn't changed\n      if (pingIntervalMillis !== pingInterval) {\n        yield put(actions.changePingInterval(pingIntervalMillis, platform))\n      }\n\n      const message = { connAck: {} }\n      log.debug(\n        `Received a server ping which uses interval: ${pingIntervalMillis} ms. ${platform} is replying with message: ${message}`\n      )\n      const error = _sendWSMessage(ws, JSON.stringify(message))\n\n      // if the pong websocket message has an error then try to reconnect\n      if (error) {\n        log.error(`Got error when attempting to reply: ${error.message}`)\n        if (autoReconnect) {\n          log.info('Trying to auto reconnect ...')\n        }\n        yield put(actions.lostConnection(undefined, platform))\n        break\n      }\n    } else {\n      if (Date.now() - timeOfLastPing >= maxIdleDuration) {\n        log.warn('Closing websocket due to inactivity. (have not received pong from server)', platform)\n\n        // try to reconnect or exit\n        if (autoReconnect) {\n          log.debug(`${platform} is attempting to auto reconnect ...`)\n        }\n        yield put(actions.lostConnection(undefined, platform))\n        break\n      } else {\n        log.debug(`${platform} websocket last contact: ${lastContact}. Reconnect after ${maxIdleDuration}.`)\n      }\n    }\n  }\n}\n\n/**\n * This flow is responsible for handling keepAlive and pingPong methods for client,\n * if keepAlive is used the client simply sends the keepAlive message to the websocket after waiting the pingInterval\n * if pingPong is used the client is responsible for pinging the server and listening for server \"pong\" responses via the websocket\n * the client will then determine if too much time has passed and attempt to reconnect if its not receiving server pongs or if an error occurs\n * @param {Object} ws a websocket connected to the backend\n * @return {Object} yields a Flux standard action\n */\nexport function * clientPingFlow (ws) {\n  const { lastContact, platform, maxMissedPings, autoReconnect } = ws.kandy\n  const { checkConnectivity, method } = yield select(getConnectivityConfig)\n\n  let timeOfLastPong = Date.now()\n  let message = ''\n  let shouldCheck\n\n  while (true) {\n    // If the flag was explicitly set in state, prefer that over the config.\n    shouldCheck = yield select(getCheckConnectivity)\n    shouldCheck = typeof shouldCheck !== 'undefined' ? shouldCheck : checkConnectivity\n\n    const { pingInterval } = yield select(getConnectivityConfig)\n    const maxIdleDuration = pingInterval * maxMissedPings\n    const intervalInSeconds = pingInterval / 1000\n\n    if (shouldCheck) {\n      if (method.type === connCheckMethods.PING_PONG) {\n        message = { connCheck: { interval: intervalInSeconds } }\n      } else if (method.type === connCheckMethods.KEEP_ALIVE) {\n        message = { message_type: 'ping' }\n      } else {\n        log.error(`Invalid connectivity method: ${method}`)\n        break\n      }\n\n      log.debug(`${platform} is sending a ${method.type} every ${intervalInSeconds} sec.`)\n\n      const error = _sendWSMessage(ws, JSON.stringify(message))\n      if (error) {\n        log.error('Exception in clientPing flow: ' + error.message)\n        if (autoReconnect) {\n          log.debug(`${platform} is attempting to auto reconnect ...`)\n        }\n        yield put(actions.lostConnection(undefined, platform))\n        break\n      }\n    } else {\n      log.debug('Set to not check websocket connectivity. Waiting for connectivity status change ...')\n\n      // If we shouldn't ping, wait until we receive a trigger to (maybe) ping.\n      const shouldCheckConnectivity = yield take(\n        action => action.type === 'CHANGE_CONNECTIVITY_CHECKING' && action.payload\n      )\n      log.debug(`Connectivity check setting changed. Check connectivity?: ${shouldCheckConnectivity}`)\n      continue\n    }\n\n    const delayStartTime = Date.now()\n    // Wait for either the ping interval, a disconnect or a pong from the server\n    const { disconnect, serverPong } = yield race({\n      expiry: delay(pingInterval),\n      serverPong: take(actionTypes.RECEIVE_SERVER_PONG),\n      disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n    })\n\n    // If we receive a serverPong, we will not have waited the full pingInterval duration.\n    //    Determine how long we were waiting for, so that we know how long to wait (again)\n    //    to fulfill the full pingInterval duration (before restarting the ping loop).\n    const timeElapsed = Date.now() - delayStartTime\n\n    // If we received a disconnect action, stop the pings and exit.\n    if (disconnect) {\n      log.debug('Got disconnect action. Exiting from clientPing flow ...')\n      break\n    }\n\n    if (method.type === connCheckMethods.PING_PONG) {\n      if (serverPong) {\n        // we received a pong, wait pingInterval to send another ping\n        timeOfLastPong = Date.now()\n\n        const timeUntilNextPing = pingInterval - timeElapsed\n        const { disconnect } = yield race({\n          expiry: delay(timeUntilNextPing),\n          disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n        })\n        // If we received a disconnect action, stop the pings and exit.\n        if (disconnect) {\n          log.debug('Got disconnect action. Exiting from clientPing flow ...')\n          break\n        }\n      } else {\n        if (Date.now() - timeOfLastPong >= maxIdleDuration) {\n          log.warn('Closing websocket due to inactivity. (have not received pong from server)', platform)\n\n          // its been too long since the last pong, attempt to reconnect or exit\n          yield put(actions.lostConnection(undefined, platform))\n\n          break\n        } else {\n          log.debug(`${platform} websocket last contact: ${lastContact}. Reconnect after ${maxIdleDuration}.`)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Generic Websocket message that takes a websocket and a message and sends it\n * @param  {Object} ws  websocket\n * @return {Object}     Error object\n */\nfunction _sendWSMessage (ws, message) {\n  try {\n    if (ws && ws.readyState === 1) {\n      log.debug('Sending message on websocket.', message)\n      ws.send(message)\n    } else {\n      throw new Error('websocket was not in readyState')\n    }\n  } catch (e) {\n    return e\n  }\n}\n\n/**\n * Helper function for connecting to a websocket.\n * Attempts to connect a specified number of times before returning an error.\n * Includes a delay in between attempts, determined by configs.\n * @method connectWebsocket\n * @param  {Object} wsInfo\n * @return {Websocket|Object}  Either a connected websocket or an error object.\n */\nexport function * connectWebsocket (wsInfo, platform) {\n  const configs = yield select(getConnectivityConfig)\n  let connectionAttempt = 0\n  // The delay between attempts should not be shorter than 2 seconds.\n  let delayTime = configs.reconnectDelay > 2000 ? configs.reconnectDelay : 2000\n  let websocket\n\n  // If no limit is set, we will continually attempt to reconnect.\n  if (!configs.reconnectLimit) {\n    log.debug('No connectivity reconnect limit set.')\n  }\n\n  function * safeOpenWs (wsInfo) {\n    let websocket\n    try {\n      websocket = yield call(openWebsocket, wsInfo)\n    } catch (err) {\n      websocket = err\n    }\n    return websocket\n  }\n  while (connectionAttempt < configs.reconnectLimit || !configs.reconnectLimit) {\n    const wsConnectStart = Date.now()\n    const { openWs, timeout } = yield race({\n      openWs: call(safeOpenWs, wsInfo),\n      timeout: delay(delayTime)\n    })\n    const attemptDuration = Date.now() - wsConnectStart\n\n    // Checking for both timeout and open websocket errors here since we need to calculate the next delay parameters in\n    //  both scenarios\n    if (timeout || (openWs && openWs.error)) {\n      connectionAttempt++\n      websocket = openWs\n      log.debug(\n        `Failed to connect to websocket on ${platform}. (Attempt #${connectionAttempt}). Message: ${\n          timeout ? 'Timed out' : websocket.message\n        }.`\n      )\n\n      // If we are still under the reconnect attempt limit, calculate the next delay time and delay before retrying.\n      if (connectionAttempt < configs.reconnectLimit || !configs.reconnectLimit) {\n        // Calculate the remaining delay time by checking how long the previous connection attempt was.\n        // Do this before potentially lengthening the `delayTime` value.\n        const remainingDelay = timeout ? 0 : delayTime - attemptDuration\n\n        // Increase the delay time for the next loop if we're not at the limit.\n        if (delayTime !== configs.reconnectTimeLimit) {\n          delayTime = configs.reconnectDelay * Math.pow(configs.reconnectTimeMultiplier, connectionAttempt)\n          delayTime = delayTime < configs.reconnectTimeLimit ? delayTime : configs.reconnectTimeLimit\n        }\n\n        log.debug(`Websocket will attempt to reconnect after ${remainingDelay} ms on ${platform}`)\n        if (remainingDelay > 0) {\n          yield delay(remainingDelay)\n        }\n      } else {\n        log.debug(`Stopping websocket connection attempts on ${platform}.`)\n        // We are at reconnect attempt limit; if it was due to a timeout we need to return an error. In case of\n        //  websocket error, that will be returned by the websocket.\n        if (timeout) {\n          return {\n            error: true,\n            message: 'Timed out.'\n          }\n        }\n        break\n      }\n    } else if (openWs) {\n      websocket = openWs\n      break\n    }\n  }\n\n  // Return either the websocket or the latest error.\n  return websocket\n}\n","import { wsClosed, wsError, receiveServerPing, receiveServerPong } from '../interface/actions'\nimport { eventChannel, END, buffers } from 'redux-saga'\nimport { take, put, call } from 'redux-saga/effects'\n\nimport { toQueryString } from '../../common/utils'\n\n// Other plugins.\nimport { websocketNotification } from '../../notifications/interface/actions'\nimport { logManager } from '../../logs'\n\nconst INITIAL_BUFFER_SIZE = 50\nconst log = logManager.getLogger('CONNECTIVITY')\n\n/**\n * Create a new websocket.\n * @method openWebsocket\n * @param  {Object} options Websocket configuration options.\n * @param {string} options.protocol Websocket protocol to use.\n * @param {string} options.server Websocket hostname.\n * @param {string} options.port Websocket port to use.\n * @param {string} options.url Websocket notification channel.\n * @param {Object} options.params A list of URL params to attach to the websocket.\n * @return {WebSocket} ws Newly connected websocket.\n */\nexport function openWebsocket (options) {\n  // Create the websocket.\n  const ws = new WebSocket(\n    `${options.protocol}://${options.server}:${options.port}${options.url}` + toQueryString(options.params)\n  )\n\n  // Use a promise to wait for the first message from the websocket.\n  // This indicates whether the WS opened successfully or not.\n  const validateWS = new Promise((resolve, reject) => {\n    const onOpen = function () {\n      ws.onopen = null\n      ws.onerror = null\n      resolve(ws)\n    }\n    const onError = function () {\n      ws.onopen = null\n      ws.onerror = null\n\n      // TODO: Fix this?\n      /* eslint-disable-next-line prefer-promise-reject-errors */\n      reject({\n        // Websocket doesn't return error codes for security reasons and as such all websocket\n        // errors have to be handled the same.\n        error: true,\n        message: 'Could not connect to websocket. Received error on open.'\n      })\n    }\n    ws.onopen = onOpen\n    ws.onerror = onError\n  })\n  return validateWS\n}\n\n/**\n * Clean-up a provided websocket.\n * @method cleanupWebSocket\n * @param  {Websocket} ws Websocket to be cleaned-up.\n * @return {Websocket} ws The websocket after being cleaned.\n */\nexport function cleanupWebSocket (ws) {\n  if (ws.close) {\n    ws.close()\n  }\n  ws.onclose = null\n  ws.onmessage = null\n  ws.onopen = null\n  ws.onerror = null\n}\n\n/**\n * Create an event channel for a given websocket\n * @param  {WebSocket} ws       The websocket to make an event channel for.\n * @param {string} [platform=link]    The backend platform associated with the websocket.\n * @return {EventChannel}              The event channel corresponding to the WebSocket\n */\nfunction createWsChannel (ws, platform) {\n  // this function handles server messages\n  return eventChannel(emit => {\n    // Define handlers\n    ws.onmessage = message => {\n      // Mark this websocket are being connected as of now.\n      ws.kandy.lastContact = Date.now()\n\n      var data = JSON.parse(message.data)\n      log.debug('Received message on websocket.', data)\n      if (data.connCheck) {\n        // Handle CPaaS server pings\n        emit(receiveServerPing(data, platform))\n      } else if (data.connAck) {\n        // Handle CPaaS server pongs\n        emit(receiveServerPong(data, platform))\n      } else {\n        emit(websocketNotification(data, platform))\n      }\n    }\n    ws.onclose = data => {\n      emit(wsClosed(data, platform))\n      emit(END)\n    }\n    ws.onerror = err => {\n      emit(wsError(new Error(err), platform))\n      emit(END)\n    }\n\n    return () => cleanupWebSocket(ws)\n  }, buffers.expanding(INITIAL_BUFFER_SIZE))\n}\n\n/**\n * Saga worker for creating a websocket and emitting its events\n * @param {Object} ws configuration options.\n * @param {string} [platform=link]    The backend platform associated with the websocket.\n * @return {Generator}\n */\nexport function * wsEmitter (ws, platform) {\n  var wsChannel = yield call(createWsChannel, ws, platform)\n  while (true) {\n    const action = yield take(wsChannel)\n    yield put(action)\n  }\n}\n","// Redux-Saga\nimport { put } from 'redux-saga/effects'\n// Events\nimport eventsMap from '../interface/events'\nimport { mapEvents } from '../../events/interface/actions'\n// Config\nimport { update as updateConfig } from '../../config/interface/actions'\n// Helpers\nimport { defaults } from 'lodash/fp'\n// Sagas\n\nimport { send, fetchConversations, fetchMessages, receiveMessage, deleteMessage, deleteConversation } from './sagas'\n\n// The interface to implement.\nimport pluginInterface from '../interface'\n\n// Parse and/or Validate\nimport { validation as v8n, parse } from '../../../src/common/validation'\n\nconst defaultOptions = {\n  features: ['base', 'parts', 'rich', 'history', 'group']\n}\n\nconst v8nValidation = v8n.schema({\n  features: v8n.array().every.string()\n})\nconst parseOptions = parse('messaging', v8nValidation)\n\n/**\n * Factory function for the UC messaging plugin.\n * @method ucMessaging\n * @param  {Object} [options={}]\n * @param  {Array} [options.features=['base', 'parts', 'rich', 'history', 'group'] ] - A list of the supported features of messaging\n * @return {Object} A plugin object.\n */\nexport default function ucMessaging (options = {}) {\n  options = defaults(defaultOptions, options)\n  parseOptions(options)\n\n  function * init () {\n    yield put(updateConfig(options, pluginInterface.name))\n    yield put(mapEvents(eventsMap))\n  }\n\n  const capabilities = [\n    'richMessagingWithoutLocation',\n    'conversationHistory',\n    'multiUserConversation',\n    'fetchConversations'\n  ]\n\n  return {\n    sagas: [send, fetchConversations, fetchMessages, receiveMessage, deleteMessage, deleteConversation],\n    capabilities,\n    init,\n    api: pluginInterface.api,\n    name: pluginInterface.name,\n    reducer: pluginInterface.reducer,\n    mixins: pluginInterface.mixins\n  }\n}\n","import * as actionTypes from './actionTypes'\nimport * as eventTypes from './eventTypes'\nimport { isEqual } from 'lodash/fp'\n\nconst eventsMap = {}\n\neventsMap[actionTypes.CREATE_CONVERSATION] = function (action) {\n  return {\n    type: eventTypes.CONVERSATIONS_NEW\n  }\n}\n\neventsMap[actionTypes.SEND_MESSAGE_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MESSAGES_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.MESSAGES_CHANGE,\n      args: {\n        destination: action.payload.destination,\n        type: action.payload.type,\n        messageId: action.payload.messageId,\n        sender: action.payload.sender\n      }\n    }\n  }\n}\n\neventsMap[actionTypes.MESSAGE_RECEIVED] = function (action) {\n  const { meta, payload } = action\n  if (meta.newConversation) {\n    return {\n      type: eventTypes.CONVERSATIONS_CHANGE,\n      args: [\n        {\n          destination: payload.destination,\n          type: action.meta.type\n        }\n      ]\n    }\n  }\n  return {\n    type: eventTypes.MESSAGES_CHANGE,\n    args: {\n      destination: payload.destination,\n      messageId: payload.message.messageId,\n      type: action.meta.type\n    }\n  }\n}\n\neventsMap[actionTypes.FETCH_CONVERSATIONS_FINISHED] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MESSAGING_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.CONVERSATIONS_CHANGE,\n      args: action.payload.conversations.map(conversation => {\n        return {\n          destination: conversation.destination,\n          type: conversation.type\n        }\n      })\n    }\n  }\n}\n\neventsMap[actionTypes.DELETE_CONVERSATION_FINISH] = function (action, { state }) {\n  if (action.error) {\n    return {\n      type: eventTypes.MESSAGES_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.CONVERSATIONS_CHANGE,\n      args: state.messaging.conversations.map(conversation => {\n        if (\n          !(isEqual(conversation.destination, action.payload.destination) && conversation.type === action.payload.type)\n        ) {\n          return {\n            destination: conversation.destination,\n            type: conversation.type\n          }\n        }\n      })\n    }\n  }\n}\n\neventsMap[actionTypes.FETCH_MESSAGES_FINISHED] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MESSAGING_ERROR,\n      args: action.payload\n    }\n  } else {\n    return {\n      type: eventTypes.MESSAGES_CHANGE,\n      args: {\n        destination: action.payload.destination,\n        type: action.payload.type\n      }\n    }\n  }\n}\n\neventsMap[actionTypes.CLEAR_MESSAGES] = function (action) {\n  return {\n    type: eventTypes.MESSAGES_CHANGE,\n    args: action.payload\n  }\n}\n\neventsMap[actionTypes.DELETE_MESSAGE_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MESSAGES_ERROR,\n      args: action.payload\n    }\n  } else {\n    return {\n      type: eventTypes.MESSAGES_CHANGE,\n      args: {\n        destination: action.payload.destination,\n        type: action.payload.type\n      }\n    }\n  }\n}\n\nexport default eventsMap\n","// Messaging plugin.\nimport * as actionTypes from '../interface/actionTypes'\nimport { messageActions, convoActions } from '../interface/actions'\nimport { findConversation } from '../interface/selectors'\n\n// Other plugins.\nimport { getConnectionInfo, getUserInfo } from '../../auth/interface/selectors'\nimport { NOTIFICATION_RECEIVED } from '../../notifications/interface/actionTypes'\nimport request from '../../request/effects'\nimport BasicError, { messagingCodes } from '../../errors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { actionChannel, take, put, call, select, fork } from 'redux-saga/effects'\nimport { has, values } from 'lodash/fp'\n\n// Constants\nimport { platforms } from '../../constants'\n\nconst platform = platforms.UC\nconst log = logManager.getLogger('MESSAGING')\n\n/**\n * UC send message saga.\n * Performs the workflow of forming a CIM readable message URL and sending the message.\n * @method send\n */\nexport function * send () {\n  const sendMessageChannel = yield actionChannel(actionTypes.SEND_MESSAGE)\n  // This is a complex saga.  Because we can have failures inside a nested loop\n  // which is inside the saga while loop, we need to use a variable to track\n  // if we need to reset the saga based on a failure inside nested loop.\n  while (true) {\n    let resetSaga = false\n    const action = yield take(sendMessageChannel)\n    const config = yield select(getConnectionInfo, platform)\n    const { protocol, server, version, port } = config.server\n    const { destination, id } = action.payload\n    const isGroup = destination.length > 1\n    const userInfo = yield select(getUserInfo)\n    const message = action.payload.message\n    const type = message.type\n\n    const url = `${protocol}://${server}:${port}/${version}/rm/send`\n\n    const queryParams = {}\n    if (isGroup) {\n      queryParams.tos = destination\n    } else {\n      queryParams.to = destination\n    }\n    const parts = message.parts\n    // CIM's send endpoint allows a text and file param in the URL.\n    // It allows multiple attachment params.\n    const usedParts = {}\n    const attachments = []\n    for (const part of parts) {\n      if (part.type === 'text' && !usedParts.text && part.text) {\n        usedParts.text = { ...part }\n        queryParams.txt = part.text\n      } else if (part.type === 'file' && part.file) {\n        usedParts.file = { ...part }\n        const upload = yield call(uploadFile, part.file)\n\n        if (!upload.error && !upload.payload.body.error) {\n          attachments.push(upload.payload.body.success.handle)\n        } else {\n          // We failed to upload the file\n          yield put(\n            messageActions.sendMessageFinish({\n              sender: userInfo.username,\n              destination: action.payload.destination,\n              type: type,\n              parts: action.payload.message.parts,\n              timestamp: action.payload.message.timestamp,\n              error: new BasicError({\n                message: 'Failed to send message with attachment.',\n                code: messagingCodes.FILE_UPLOAD_FAIL\n              })\n            })\n          )\n          // Failure inside nested loop, request saga reset\n          resetSaga = true\n          break\n        }\n      } else if (part.type === 'json' && part.json) {\n        // Ensure json is stringified for sending.\n        const jsonObject = tryParseJSON(part.json)\n        let jsonString = ''\n        if (jsonObject) {\n          // The input part was a JSON string\n          jsonString = part.json\n          part.json = jsonObject\n        } else {\n          // The input part was an Object.\n          jsonString = JSON.stringify(part.json)\n        }\n        usedParts.json = { ...part }\n        const jsonBlob = new Blob([jsonString], {\n          type: 'application/vdn.kandy.json'\n        })\n        const upload = yield call(uploadFile, jsonBlob)\n\n        if (!upload.error && !upload.payload.body.error) {\n          attachments.push(upload.payload.body.success.handle)\n        } else {\n          // We failed to upload the json blob\n          yield put(\n            messageActions.sendMessageFinish({\n              sender: userInfo.username,\n              destination: action.payload.destination,\n              type: type,\n              parts: action.payload.message.parts,\n              timestamp: action.payload.message.timestamp,\n              error: new BasicError({\n                message: 'Failed to send message with attachment.',\n                code: messagingCodes.FILE_UPLOAD_FAIL\n              })\n            })\n          )\n          // Failure inside nested loop, request saga reset\n          resetSaga = true\n          break\n        }\n      }\n    }\n    if (resetSaga) {\n      continue\n    }\n\n    if (!usedParts.text && !usedParts.file && !usedParts.json) {\n      // We have no usable parts.\n      yield put(\n        messageActions.sendMessageFinish({\n          sender: userInfo.username,\n          destination: action.payload.destination,\n          type: type,\n          parts: action.payload.message.parts,\n          timestamp: action.payload.message.timestamp,\n          error: new BasicError({\n            message: 'There were no usable parts to send with this message. Add parts.',\n            code: messagingCodes.SEND_MESSAGE_FAIL\n          })\n        })\n      )\n      continue\n    }\n    if (attachments.length > 0) {\n      queryParams.attach = attachments\n    }\n    const response = yield request({ url, queryParams })\n    if (response.error) {\n      let message\n      if (response.payload.body) {\n        // Handle errors from the server.\n        message = `Failed to send message. Code: ${response.payload.error.code}.`\n      } else {\n        // Handle errors from the plugin helper.\n        message = `Send message request failed: ${response.payload.result.message}.`\n      }\n      log.debug(message)\n\n      yield put(\n        messageActions.sendMessageFinish({\n          sender: userInfo.username,\n          destination: action.payload.destination,\n          type: type,\n          parts: action.payload.message.parts,\n          timestamp: action.payload.message.timestamp,\n          error: new BasicError({\n            message: message,\n            code: messagingCodes.SEND_MESSAGE_FAIL\n          })\n        })\n      )\n    } else {\n      if (usedParts.file) {\n        delete usedParts.file.file\n        usedParts.file = {\n          ...usedParts.file,\n          ...response.payload.body.success.attachments[0]\n        }\n      }\n      if (response.payload.body.success) {\n        yield put(\n          messageActions.sendMessageFinish({\n            sender: userInfo.username,\n            destination: action.payload.destination,\n            type: type,\n            parts: values(usedParts),\n            timestamp: action.payload.message.timestamp,\n            messageId: response.payload.body.success.id\n          })\n        )\n      } else if (response.payload.body.error) {\n        yield put(\n          messageActions.sendMessageFinish({\n            sender: userInfo.username,\n            destination: action.payload.destination,\n            type: type,\n            parts: values(usedParts),\n            timestamp: action.payload.message.timestamp,\n            error: new BasicError({\n              message: response.payload.body.error.human,\n              code: response.payload.body.error.code\n            })\n          })\n        )\n      }\n\n      if (isGroup && !id) {\n        // If a group conversation as created in tandem with the sending of this message, then we need to update that conversation in the state and provide it with its ID as it exists in the back end. This will allow us to send REST requests that are related to this conversation.\n        yield put(\n          convoActions.updateConversation({\n            destination: action.payload.destination,\n            id: response.payload.body.success.group,\n            type: type\n          })\n        )\n      }\n    }\n  }\n}\n\nexport function * receiveMessage () {\n  const messageReceivedChannel = actionChannel(\n    action =>\n      action.type === NOTIFICATION_RECEIVED &&\n      action.meta.platform === platform &&\n      (action.payload.notificationMessage.event === 'im' || action.payload.notificationMessage.event === 'sms') &&\n      action.payload.notificationMessage.direction === 'in'\n  )\n  const messageReceived = yield messageReceivedChannel\n  while (true) {\n    const action = yield take(messageReceived)\n    const message = action.payload.notificationMessage\n    const parts = []\n    const sender = message.From\n    const destination = [sender]\n    const messageId = message.id\n    const cimType = message.type\n    const sdkType = cimType === 'internal' ? 'im' : message.type\n\n    if (message.txt) {\n      parts.push({ type: 'text', text: message.txt })\n    }\n    if (message.Attach) {\n      const config = yield select(getConnectionInfo, platform)\n      const { protocol, server, version, port } = config.server\n      const url = `${protocol}://${server}:${port}/${version}/rm/thread/${sender}`\n      const queryParams = {\n        type: cimType,\n        id: messageId\n      }\n\n      // Remove the default Content-Type header of 'app/json', which would\n      //    cause CORS issues for this request.\n      if (has('requestOptions.headers.Content-Type', config)) {\n        delete config.requestOptions.headers['Content-Type']\n      }\n\n      const response = yield request({ url, queryParams })\n\n      // TODO: Create and use formal basic errors here.\n      if (response.error) {\n        log.error('Could not retrieve the thread for an incoming rich message.')\n        continue\n      } else if (response.payload.body.error) {\n        log.error('There was an issue attempting to retrieve a rich message.')\n        continue\n      } else if (response.payload.body.success) {\n        if (!response.payload.body.success[0] || !response.payload.body.success[0].attachments) {\n          log.error(\n            'Not able to get info for received message from the server or it was received and there were no attachments'\n          )\n          continue\n        }\n\n        const attachments = response.payload.body.success[0].attachments\n\n        for (const attachment of attachments) {\n          if (attachment.mime === 'application/vdn.kandy.json') {\n            // Hit the file endpoint\n            const jsonBlobResponse = yield request({ url: attachment.url })\n            if (!jsonBlobResponse.error && !jsonBlobResponse.payload.body.error) {\n              // Grab the json from the response\n              const json = jsonBlobResponse.payload.body\n              // Put json into a part and push into parts\n              parts.push({\n                type: 'json',\n                json\n              })\n            } else {\n              log.error('Attempting to retrieve the JSON blob resulted in an error.')\n            }\n          } else {\n            parts.push({\n              type: 'file',\n              ...attachment\n            })\n          }\n        }\n      }\n    }\n    const conversation = yield select(findConversation, destination)\n    let newConversation = false\n\n    // If this message should correspond to a conversation which doesn't exist\n    // the state, we will need to dispatch an action to create it\n    if (!conversation) {\n      newConversation = true\n    }\n    // Dispatch the messageReceived action so we can update the conversation\n    yield put(\n      messageActions.messageReceived(destination, parts, messageId, sender, Date.now(), {\n        newConversation: newConversation,\n        type: sdkType\n      })\n    )\n  }\n}\n/**\n * UC fetch message saga.\n * Performs the workflow of fetching the CIM `thread` of a specific conversation / user.\n * @method fetchMessages\n */\nexport function * fetchMessages () {\n  const fetchMessageChannel = yield actionChannel(actionTypes.FETCH_MESSAGES)\n  while (true) {\n    const action = yield take(fetchMessageChannel)\n    const { destination, amount, type } = action.payload\n    const config = yield select(getConnectionInfo, platform)\n    const userInfo = yield select(getUserInfo, platform)\n    const { protocol, server, version, port } = config.server\n    const conversation = yield select(findConversation, destination, type)\n\n    let error\n\n    // Convert the SDK IM conversation type to the type that CIM expects.\n    const convType = type === 'im' ? 'internal' : type\n\n    if (!conversation.id) {\n      // TODO: Create a better fallback for this situation. It's possible that a conversation can have no id if it was instantiated from scratch. This means that the conversation either doesn't exist in the back end, or it does and its `thread id` still needs to be fetched.\n      error = new BasicError({\n        code: messagingCodes.FETCH_MESSAGES_FAIL,\n        message: `Unable to fetch messages for a conversation with no thread ID. Destination: ${destination.join(', ')}`\n      })\n      log.debug('Attempting to retrieve messages for a Conversation with no ID', conversation)\n    } else {\n      const response = yield request({\n        url: `${protocol}://${server}:${port}/${version}/rm/thread/${conversation.id}`,\n        queryParams: {\n          type: convType,\n          max: amount\n        }\n      })\n\n      if (response.error) {\n        // Handle errors from the request helper.\n        // TODO: Proper error.\n        error = new BasicError({\n          code: response.payload.result.code,\n          message: `Message request failed: ${response.payload.result.message}`\n        })\n      } else if (response.payload.body && response.payload.body.error) {\n        // Handle errors from the server.\n        // TODO: Proper error.\n        error = new BasicError({\n          code: response.payload.body.error.code,\n          message: `Failed to fetch messages: ${response.payload.body.error.human}`\n        })\n      } else {\n        const messages = response.payload.body.success\n        const formattedMessageArray = []\n\n        for (const message of messages) {\n          const parts = []\n          if (message.txt) {\n            parts.push({ type: 'text', text: message.txt })\n          }\n          if (message.attachments) {\n            for (const attachment of message.attachments) {\n              if (attachment.mime === 'application/vdn.kandy.json') {\n                // Hit the file endpoint\n                const jsonBlobResponse = yield request({ url: attachment.url })\n                if (!jsonBlobResponse.error && !jsonBlobResponse.payload.body.error) {\n                  // Grab the json from the response\n                  const json = jsonBlobResponse.payload.body\n                  // Put json into a part and push into parts\n                  parts.push({\n                    type: 'json',\n                    json\n                  })\n                } else {\n                  log.error('Attempting to retrieve the JSON blob resulted in an error.')\n                }\n              } else {\n                parts.push({ type: 'file', ...attachment })\n              }\n            }\n          }\n          // TODO: Speak to CIM to find out why messages don't have a `sender` value\n          const senderName = findMessageSender(conversation, message.sender, message.dir)\n          formattedMessageArray.push({\n            timestamp: message.when,\n            sender: senderName || userInfo.username,\n            messageId: message.id,\n            parts\n          })\n        }\n        if (!error) {\n          yield put(messageActions.fetchMessagesFinished(destination, type, formattedMessageArray))\n        } else {\n          // Handle all cases where an error occurred\n          yield put(messageActions.fetchMessagesFinished(destination, convType, undefined, error))\n        }\n      }\n    }\n  }\n}\n\nexport function * fetchConversations () {\n  while (true) {\n    const action = yield take(actionTypes.FETCH_CONVERSATIONS)\n    const options = action.payload\n    const config = yield select(getConnectionInfo, platform)\n    const { protocol, server, version, port } = config.server\n    const queryParams = {}\n    let url\n\n    if (options) {\n      if ('id' in options) {\n        // If id is provided, we only need to fetch a single thread\n        url = `${protocol}://${server}:${port}/${version}/rm/thread`\n        queryParams.id = options.id\n      } else {\n        // Otherwise, check to see if other options have been provided to filter the results\n        url = `${protocol}://${server}:${port}/${version}/rm/threads`\n\n        if ('touched' in options) {\n          queryParams.touched = prepareTouchedParam(options.touched)\n        }\n\n        if ('type' in options) {\n          queryParams.type = options.type\n        }\n\n        if ('thread' in options) {\n          queryParams.thread = options.thread\n        }\n      }\n    }\n    const response = yield request({ url, queryParams })\n    if (response.error) {\n      let error\n      if (response.payload.body) {\n        // Handle errors from the server.\n        // TODO: Proper error.\n        error = new BasicError({\n          code: response.payload.body.error.code,\n          message: `Failed to fetch conversations: ${response.payload.body.error.human}`\n        })\n      } else {\n        // Handle errors from the request helper.\n        // TODO: Proper error.\n        error = new BasicError({\n          code: response.payload.result.code,\n          message: `Conversation request failed: ${response.payload.result.message}`\n        })\n      }\n      yield put(convoActions.fetchConversationsFinished({ error }))\n    } else {\n      const formattedConversationsArray = []\n      response.payload.body.success.forEach(convo => {\n        const { handle, handles, members, thread, type, lastreceived, lastpull, lastmsg } = convo\n        // TODO: we should use a better naming convention than `handle`, as this complicates things for group convos\n        if (handle && !handles) {\n          formattedConversationsArray.push({\n            // Convert `type` from the CIM term to the SDK term to store in state.\n            // Ensure that destination is an Array\n            id: thread,\n            destination: [handle],\n            type: type === 'internal' ? 'im' : type,\n            lastReceived: lastreceived ? lastreceived * 1000 : undefined, // convert seconds to milliseconds\n            lastPull: lastpull ? lastpull * 1000 : undefined, // convert seconds to milliseconds\n            lastMessage: lastmsg,\n            messages: []\n          })\n        } else if (handles && !handle) {\n          const users = []\n          handles.forEach((handle, i) => users.push({ handle: handle, id: members[i] }))\n          // Sorting on handle to ensure that destination name is always consistent\n          users.sort((a, b) => (a.handle > b.handle ? 1 : -1))\n\n          formattedConversationsArray.push({\n            // Convert `type` from the CIM term to the SDK term to store in state.\n            destination: users.map(user => user.handle),\n            id: thread,\n            type: 'group',\n            members: users,\n            lastReceived: lastreceived ? lastreceived * 1000 : undefined, // convert seconds to milliseconds\n            lastPull: lastpull ? lastpull * 1000 : undefined, // convert seconds to milliseconds\n            messages: []\n          })\n        }\n      })\n      yield put(\n        convoActions.fetchConversationsFinished({\n          conversations: formattedConversationsArray,\n          ...options\n        })\n      )\n\n      if ('fetchMessages' in options) {\n        // This indicates that fetchMessages was previously called on a conversation whose ID was not previously known. This would have caused fetchConversations to be called, in which case that conversation will be updated\n      }\n    }\n  }\n}\n\n/**\n * delete a conversation\n * @method deleteConversation\n */\nexport function * deleteConversation () {\n  while (true) {\n    const action = yield take(actionTypes.DELETE_CONVERSATION)\n    yield fork(handleDeleteConversation, action)\n  }\n}\n\n/**\n * Handle a forked deleteConversation action\n * @method handleDeleteConversation\n * @param {Object} action An action of type DELETE_CONVERSATION\n */\nfunction * handleDeleteConversation (action) {\n  const destination = action.payload.destination\n  const type = action.payload.type === 'im' ? 'internal' : action.payload.type\n  const config = yield select(getConnectionInfo, platform)\n  const conversation = yield select(findConversation, destination, action.payload.type)\n  const response = yield call(deleteRequest, config, { type: type }, [conversation.id])\n  const handledResponse = handleDeleteResponse(response)\n\n  if (handledResponse.error) {\n    yield put(convoActions.deleteConversationFinish({ destination, type, error: handledResponse.result }))\n  } else {\n    const { destination, type } = action.payload\n    yield put(convoActions.deleteConversationFinish({ destination, type }))\n  }\n}\n\n/**\n * Delete one or more messages\n * @method deleteMessage\n */\nexport function * deleteMessage () {\n  const deleteMessageChannel = yield actionChannel(actionTypes.DELETE_MESSAGE)\n  while (true) {\n    const action = yield take(deleteMessageChannel)\n    yield fork(handleDeleteMessage, action)\n  }\n}\n\n/**\n * Handle a forked deleteMessage action\n * @method handleDeleteMessage\n * @param {Object} action an action of type DELETE_MESSAGE\n */\nfunction * handleDeleteMessage (action) {\n  const messageId = action.payload.messageId\n  const type = action.payload.type\n  const config = yield select(getConnectionInfo, platform)\n  const conversation = yield select(findConversation, action.payload.destination, action.payload.type)\n\n  const response = yield call(deleteRequest, config, { type: type === 'im' ? 'internal' : type }, [\n    conversation.id,\n    messageId\n  ])\n  const handledResponse = handleDeleteResponse(response)\n\n  if (handledResponse.error) {\n    yield put(\n      messageActions.deleteMessageFinish({\n        destination: action.payload.destination,\n        type,\n        messageId,\n        error: handledResponse.result\n      })\n    )\n  } else {\n    yield put(\n      messageActions.deleteMessageFinish({\n        destination: action.payload.destination,\n        type: action.payload.type,\n        messageId\n      })\n    )\n  }\n}\n\n/**\n * Execute a delete request and return the response\n *\n * @method deleteRequest\n * @param {Object} config Configuration dictionary object\n * @param {string} config.server Server information\n * @param {string} config.requestOptions\n * @param {Object} queryParams Parameters for use in the query string\n * @param {Array} pathParams Parameters for use in the path\n */\nfunction * deleteRequest (config, queryParams = {}, pathParams = []) {\n  const { protocol, server, port, version } = config.server\n  const url = `${protocol}://${server}:${port}/${version}/rm/delete/${pathParams.join('/')}`\n\n  return yield request({ url, queryParams })\n}\n\n/**\n * Helper function to parse responses of delete requests\n * @param {Object} response The response object returned from a request to the \"delete\" endpoint\n */\nfunction handleDeleteResponse (response) {\n  if (response.error) {\n    const error = new BasicError({\n      code: response.payload.result.code,\n      message: `Delete request failed: ${response.payload.result.message}`\n    })\n    return { error: true, result: error }\n  } else if (response.payload.body && response.payload.body.error) {\n    const error = new BasicError({\n      code: response.payload.body.error.code,\n      message: `Request delivered but delete was unsuccessful: ${response.payload.body.error.human}`\n    })\n    return { error: true, result: error }\n  } else {\n    return { error: false }\n  }\n}\n\nfunction * uploadFile (file) {\n  const config = yield select(getConnectionInfo, platform)\n  const { protocol, server, version, port } = config.server\n\n  const formData = new FormData()\n  const name = file.name || 'Custom Json Blob'\n  formData.append('raw', file, name)\n  formData.append('token', config.accessToken)\n\n  const requestObject = {\n    url: `${protocol}://${server}:${port}/${version}/rm/upload`,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    body: formData,\n    method: 'POST'\n  }\n\n  const response = yield request(requestObject)\n  return response\n}\n\nfunction tryParseJSON (jsonString) {\n  try {\n    var jsonObject = JSON.parse(jsonString)\n    if (jsonObject && typeof jsonObject === 'object') {\n      return jsonObject\n    }\n  } catch (error) {\n    // Do nothing\n  }\n\n  return false\n}\n\n/**\n * findMessageSender\n *\n * Helper function to determine the name of the sender of a message in a conversation\n *\n * @param conversation\n * @param id\n * @param dir\n * @returns {string} The name of sender of the message\n */\nfunction findMessageSender (conversation, id, dir) {\n  if (conversation) {\n    if (conversation.type === 'group' && dir === 0) {\n      const result = conversation.members.find(member => (member.id = id))\n      if (result && 'handle' in result) {\n        return result.handle\n      }\n      return 'Unknown'\n    }\n    if (dir === 0) {\n      return Array.isArray(conversation.destination) ? conversation.destination[0] : conversation.destination\n    }\n  }\n}\n\n/**\n * cimDateFormat\n *\n * Helper function to convert a unix timestamp to the date format which the messaging service expects in the back end\n *\n * @param {string|number} unixtime\n * @returns {string} The UTC date formatted as YYYYMMDDhhmmss\n */\nfunction cimDateFormat (unixtime) {\n  const time = new Date(unixtime)\n  return `${time.getUTCFullYear()}${time.getUTCMonth() +\n    1}${time.getUTCDay()}${time.getUTCHours()}${time.getUTCMinutes()}${time.getUTCSeconds()}`\n}\n\n/**\n * prepareTouchedParam\n *\n * Helper function to prepare the `touched` URL parameter for use in conversation fetching requests\n *\n * @param {string|number} param\n * @returns {string} The string literal `lastcheck` or the UTC date formatted as YYYYMMDDhhmmss\n */\nfunction prepareTouchedParam (param) {\n  if (param && param === 'lastcheck') {\n    return param\n  } else {\n    return cimDateFormat(param)\n  }\n}\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Action helper functions.\n */\n\nfunction sendMessageHelper (actionType, destination, parts, timestamp, type, id) {\n  return {\n    type: actionType,\n    payload: {\n      destination,\n      id: id,\n      message: {\n        timestamp,\n        isPending: true,\n        read: false,\n        parts,\n        type\n      }\n    }\n  }\n}\n\nfunction messageReadHelper (actionType, messageId, participant) {\n  return {\n    type: actionType,\n    payload: { messageId, participant }\n  }\n}\n\n/**\n * Message actions.\n * Actions about the CRUD of message objects.\n */\n\n/**\n * Creates a send message action. Triggered when the user initiates the send message process.\n *\n * @method sendMessage\n * @param {Array} destination An array of destinations for messages created in this conversation.\n * @param {Array} parts The message parts, as a formatted object.\n * @param {number} timestamp A timestamp for the sent message in seconds.\n * @param {number} id The ID of the conversation as it exists in the back end.\n * @param {string} type Type of message. 'im', 'group' or 'sms'.\n * @returns {Object} A flux standard action representing the send message action.\n */\nexport const sendMessage = (destination, parts, timestamp, type, id) =>\n  sendMessageHelper(actionTypes.SEND_MESSAGE, destination, parts, timestamp, type, id)\n\n/**\n * Creates a send message finished action. Trigged when a message send function has received a success response.\n *\n * @method sendMessageFinish\n * @param {Object} $0\n * @param {Array} $0.destination An array of destinations for messages created in this conversation.\n * @param {string} $0.sender The sender of the outgoing message.\n * @param {string} $0.type The type of conversation: can be one of 'im', 'sms' or 'group'\n * @param {Array} $0.parts The message parts.\n * @param {number} $0.timestamp A timestamp for the sent message in seconds.\n * @param {string} [$0.messageId] The returned messageId of the message if sent successfully.\n * @param {string} [$0.deliveryStatus] The status of sent message\n * @param {Object} [$0.error] A basic error object\n * @returns {Object} A flux standard action representing the send message finished action.\n */\nexport const sendMessageFinish = ({\n  destination,\n  sender,\n  type,\n  parts,\n  timestamp,\n  messageId,\n  deliveryStatus,\n  error\n}) => {\n  return {\n    type: actionTypes.SEND_MESSAGE_FINISH,\n    payload: { destination, sender, type, parts, timestamp, messageId, deliveryStatus, error },\n    error: Boolean(error)\n  }\n}\n\n/**\n * Creates a message received action. Triggered when the websocket receives a chat message.\n *\n * @method messageReceived\n * @param {Array} destination An array of destinations for messages created in this conversation.\n * @param {Array} parts The message parts.\n * @param {string} messageId The messageId of the message that has been received.\n * @param {string} sender The user who sent the message. This is the user who the conversation is with.\n * @param {number} timestamp A timestamp for the sent message.\n * @param {Object} meta - A meta object.\n * @param {string} meta.type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @param {boolean} meta.newConversation - A boolean value indicating whether the message corresponds to a conversation not yet in the store.\n * @returns {Object} A flux standard action representing the message received action.\n */\nexport function messageReceived (\n  destination,\n  parts,\n  messageId,\n  sender,\n  timestamp,\n  meta = { type: 'im', newConversation: false }\n) {\n  return {\n    type: actionTypes.MESSAGE_RECEIVED,\n    meta: meta,\n    payload: {\n      destination: destination,\n      message: {\n        timestamp: timestamp,\n        isPending: false,\n        read: false,\n        parts: parts,\n        sender: sender,\n        messageId: messageId\n      }\n    }\n  }\n}\n\n/**\n * Creates an incoming message read action. This triggers when we receive a \"Message Read\" notification over the websocket.\n *\n * @method incomingMessageRead\n * @param {string} messageId The unique id of the message being marked as read.\n * @param {string} participant The other participant of the conversation.\n * @returns {Object} A flux standard action representing the incoming message read action.\n */\nexport const incomingMessageRead = (messageId, participant) =>\n  messageReadHelper(actionTypes.INCOMING_MESSAGE_READ, messageId, participant)\n\n/**\n * Creates a send message read action. This should send a \"mark message as read\" request to the server.\n *\n * @method sendMessageRead\n * @param {string} messageId The unique id of the message being marked as read.\n * @param {string} participant The other participant of the conversation.\n * @returns {Object} A flux standard action representing the send message read action.\n */\nexport const sendMessageRead = (messageId, participant) =>\n  messageReadHelper(actionTypes.SEND_MESSAGE_READ, messageId, participant)\n\n/**\n * Creates a send message read finish action. This triggers on server response when attempting to mark a message read.\n *\n * @method sendMessageReadFinish\n * @param {Object} $0\n * @param {string} $0.messageId The unique id of the message being marked as read.\n * @param {string} $0.participant The other participant of the conversation.\n * @param {Object} $0.error A Basic error object.\n * @returns {Object} A flux standard action representing the send message read finish action.\n */\nexport function sendMessageReadFinish ({ messageId, participant, error }) {\n  return {\n    type: actionTypes.SEND_MESSAGE_READ_FINISH,\n    payload: error || { messageId, participant },\n    error: Boolean(error)\n  }\n}\n\n/**\n * Creates a fetch messages action. This is dispatched by the API directly.\n * @method fetchMessages\n * @param {Array} destination An array of destinations for messages created in this conversation.\n * @param {number} amount A number representing the amount of messages to fetch.\n * @returns {Object} A flux standard action representing the fetch messages action.\n */\nexport function fetchMessages (destination, amount, type) {\n  return {\n    type: actionTypes.FETCH_MESSAGES,\n    payload: { destination, amount, type }\n  }\n}\n\n/**\n * Creates a fetch messages finished action.\n * @method fetchMessagesFinished\n * @param {Array} destination An array of destinations for messages created in this conversation.\n * @param {string} type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @param {Array} messages An array of formatted messages to put into the store.\n * @param {Object} [error] An error object, only present if an error occurred.\n * @returns {Object} A flux standard action representing the fetch messages finished action.\n */\nexport function fetchMessagesFinished (destination, type, messages, error) {\n  return {\n    type: actionTypes.FETCH_MESSAGES_FINISHED,\n    payload: error || { destination, type, messages },\n    error: !!error\n  }\n}\n\n/**\n * Request to clear messages from a conversation's state.\n * @method clearMessages\n * @param  {string} destination The destination for messages created in this conversation.\n * @param {string} type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @returns {Object} A flux standard action.\n */\nexport function clearMessages (destination, type) {\n  return {\n    type: actionTypes.CLEAR_MESSAGES,\n    payload: {\n      destination: destination,\n      type: type\n    }\n  }\n}\n\n/**\n * Request to delete all the messages from a conversation.\n * @method deleteMessage\n * @param  {string} destination The destination for messages created in this conversation.\n * @param {string} type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @param {string} messageId The ID of the message targeted for deletion\n * @returns {Object} A flux standard action.\n */\nexport function deleteMessage (destination, type, messageId) {\n  return {\n    type: actionTypes.DELETE_MESSAGE,\n    payload: {\n      destination: destination,\n      type: type,\n      messageId: messageId\n    }\n  }\n}\n\n/**\n * Creates a fetch messages finished action.\n * @method deleteMessagesFinish\n * @param {Object} $0\n * @param {Array} $0.destination An array of destinations for messages created in this conversation.\n * @param {string} $0.type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @param {string} $0.messageId The ID of the message that was targeted for deletion\n * @param {Object} [$0.error] An error object, only present if an error occurred.\n * @returns {Object} A flux standard action representing the fetch messages finished action.\n */\nexport function deleteMessageFinish ({ destination, type, messageId, error }) {\n  return {\n    type: actionTypes.DELETE_MESSAGE_FINISH,\n    payload: error || { destination, type, messageId },\n    error: !!error\n  }\n}\n","import * as actionTypes from '../actionTypes'\n\n/**\n * Conversation actions.\n * Actions relating to the creation/management of conversation objects.\n */\n\n/**\n * Creates a create conversation action. Triggered when the user creates a new conversation object.\n *\n * @method createConversation\n * @param {Array} destination An array of destinations for messages created in this conversation.\n * @param {Object} options The options object can contain any keys an app may want passed along into the conversation object in the store.\n * @returns {Object} A flux standard action representing the create conversation action.\n */\nexport function createConversation (destination, options) {\n  return {\n    type: actionTypes.CREATE_CONVERSATION,\n    payload: {\n      destination: destination,\n      messages: [],\n      isTypingList: [],\n      ...options\n    }\n  }\n}\n\n/**\n * Creates a fetch conversations action. This is dispatched by the API directly.\n * @param {Object} [options] An optional configuration object to query for more specific results. If no object is passed, all threads will be retrieved\n * @method fetchConversations\n * @returns {Object} A flux standard action representing the fetch conversations action.\n */\nexport function fetchConversations (options) {\n  return {\n    type: actionTypes.FETCH_CONVERSATIONS,\n    payload: {\n      ...options\n    }\n  }\n}\n\n/**\n * Creates a fetch conversations finished action.\n * @method fetchConversationsFinished\n * @param {Object} $0\n * @param {Array} [$0.conversations] An array of conversation objects, if fetch was successful\n * @param {Object} [$0.error] An error object, only included if fetchConversations implementation had an error.\n * @returns {Object} A flux standard action representing the fetch conversations finished action.\n */\nexport function fetchConversationsFinished ({ conversations, error }) {\n  return {\n    type: actionTypes.FETCH_CONVERSATIONS_FINISHED,\n    payload: error || { conversations },\n    error: Boolean(error)\n  }\n}\n\n/**\n * Creates an update conversation action.\n *\n * @method updateConversation\n * @param {Object} conversation The conversation object\n * @param {Array} conversation.destination An array of strings representing the destinations for messages that are sent from this conversation object. This property is always required, as it is the primary property by which conversations are organized in messaging plugin\n * @param {number} [conversation.id] The conversation object's corresponding thread ID\n * @param {string} [conversation.type] The conversation type, which is expected to be one of: \"im\", \"sms\", \"group\".\n * @returns {Object} A flux standard action representing the create conversation action.\n */\nexport function updateConversation (conversation) {\n  return {\n    type: actionTypes.UPDATE_CONVERSATION,\n    payload: conversation\n  }\n}\n\n/**\n * Request to delete all the messages from a conversation.\n * @method deleteConversation\n * @param  {string} destination The destination for messages created in this conversation.\n * @param {string} type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @returns {Object} A flux standard action.\n */\nexport function deleteConversation (destination, type) {\n  return {\n    type: actionTypes.DELETE_CONVERSATION,\n    payload: {\n      destination: destination,\n      type: type\n    }\n  }\n}\n\n/**\n * Creates a fetch messages finished action.\n * @method deleteConversationFinish\n * @param {Object} $0\n * @param {Array} $0.destination An array of destinations for messages created in this conversation.\n * @param {string} $0.type The type of conversation: can be one of \"im\", \"sms\", \"group\" or \"other\"\n * @param {Object} [$0.error] An error object, only present if an error occurred.\n * @returns {Object} A flux standard action representing the fetch messages finished action.\n */\nexport function deleteConversationFinish ({ destination, type, error }) {\n  return {\n    type: actionTypes.DELETE_CONVERSATION_FINISH,\n    payload: error || { destination, type },\n    error: !!error\n  }\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\nimport mixins from './mixins'\n\n/**\n * This interface is for a messaging plugin.\n * @type {string}\n */\nconst name = 'messaging'\n\nexport default {\n  name,\n  api,\n  reducer,\n  mixins\n}\n","/**\n * The messaging feature revolves around a 'conversation' namespace. It is responsible to store the conversations\n * and its messages, and return conversation objects when requested.\n *\n * See the \"Conversation\" and \"Message\" sections of the documentation for more details.\n *\n *\n * Messaging functions are all part of the 'conversation' namespace. Ex: client.conversation.get('id').\n *\n * @public\n * @namespace conversation\n */\n\nimport { convoActions } from './actions'\nimport { getConversations as selectConversations, findConversation } from './selectors'\nimport { logManager, API_LOG_TAG } from '../../logs'\n\n// Retrieve logger\nconst log = logManager.getLogger('MESSAGING')\n\nexport default function api (context) {\n  const messagingApi = {\n    // TODO: Revise this API's argument, since it is using names that are defined by CIM  they are not very descriptive.\n    /**\n     * Attempts to retrieve a list of conversations that the current user is a part of.\n     * These conversations can then be retrieved from the store using get().\n     *\n     * @public\n     * @param {Object} [options] An optional configuration object to query for more specific results.\n     * If no object is passed, all threads will be retrieved.\n     * @param {string} [options.touched] The unix timestamp in seconds representing the date from which\n     *  to return any threads that have changed. Can also pass the string literal \"lastcheck\", resulting in\n     *  the back-end making use of the most recent date value provided in a previous request\n     * @param {string} [options.type] Limit results to one of: \"internal\", \"sms\", \"group\" or \"unknown\".\n     * @param {string|number} [options.thread] Limit results to one thread specified by its thread handle.\n     * @memberof conversation\n     * @requires fetchConversations\n     * @method fetch\n     */\n    fetch: function (options = {}) {\n      log.debug(API_LOG_TAG + 'conversation.fetch: ', options)\n\n      context.dispatch(convoActions.fetchConversations(options))\n    },\n    /**\n     * Get a conversation object matching the user ID provided in the 'destination' parameter.\n     * If successful, the event 'conversations:change' will be emitted.\n     *\n     * This API will retrieve a conversation already existing in the store.\n     *\n     * @public\n     * @memberof conversation\n     * @requires onlyInternalMessaging\n     * @method get\n     * @param {string} destination The destination for messages created in this conversation. This will\n     * be a user's sip address.\n     * @param {Object} [options] An optional configuration object to query for more specific results.\n     * If this object is not passed, the function will query for \"im\" conversation with that recipient.\n     * @param {string} [options.type] The type of conversation to retrieve. Can be one of \"im\", \"sms\" or \"other\".\n     * @returns {conversation.Conversation} A Conversation object matching the passed destination, otherwise undefined is returned.\n     */\n    /**\n     * Get a conversation object matching the user IDs provided in the 'destination' parameter.\n     * If successful, the event 'conversations:change' will be emitted.\n     * Multi-user conversations have a destination comprised of multiple user IDs.\n     *\n     * @public\n     * @memberof conversation\n     * @requires multiUserConversation\n     * @method get\n     * @param {Array} destination An array of destinations for messages created in this conversation.\n     * These will be a user's sip address.\n     * @param {Object} [options] An optional configuration object to query for more specific results.\n     * If this object is not passed, the function will query for \"im\" conversations associated with those destinations.\n     * @param {string} [options.type] The type of conversation to retrieve. Can be one of \"im\", \"sms\" or \"other\".\n     * @returns {conversation.Conversation} A Conversation object matching the passed destination, otherwise undefined is returned.\n     */\n    /**\n     * Get a conversation object matching the user ID provided in the 'recipient' parameter.\n     *\n     * This API will retrieve a conversation already existing in the store.\n     *\n     * @public\n     * @memberof conversation\n     * @requires internalAndSmsMessaging\n     * @method get\n     * @param {string} recipient The destination for messages created in this conversation. This\n     * will be a user's sip address.\n     * @param {Object} [options] An optional configuration object to query for more specific results.\n     * If this object is not passed, the function will query for \"im\" conversation with that recipient.\n     * @param {string} [options.type] The type of conversation to retrieve. Can be one of \"im\", \"sms\" or \"other\".\n     * @returns {Object} A Conversation object matching the passed recipient, otherwise undefined is returned.\n     */\n    get: function (recipient, options = { type: 'im' }) {\n      log.debug(API_LOG_TAG + 'conversation.get: ', recipient, options)\n      const destination = Array.isArray(recipient) ? [...recipient] : [recipient]\n      let description = 'Conversation'\n      let messages\n      let id\n\n      const conversation = findConversation(context.getState(), destination, options.type)\n      if (conversation) {\n        if (options.type === conversation.type) {\n          description = conversation.description\n          messages = conversation.messages\n          id = conversation.id\n\n          return context.primitives.Conversation({\n            destination,\n            type: options.type,\n            id: id,\n            description,\n            messages: messages,\n            lastMessage: conversation.lastMessage,\n            isTypingList: conversation.isTypingList,\n            lastReceived: conversation ? conversation.lastReceived : undefined,\n            lastPull: conversation ? conversation.lastPull : undefined\n          })\n        } else {\n          log.info(\n            'Conversation found with matching destination, but conversation type does not match the type requested. Please specify the appropriate type, or call client.conversation.create() for a new type of conversation'\n          )\n        }\n      } else {\n        log.info(\n          'Requested conversation not in state. Please use the create function if you would like a new conversation object.'\n        )\n      }\n      return undefined\n    },\n    /**\n     * Create and return a new conversation object. Any messages being sent through this conversation\n     * object will be sent to the destination provided\n     *\n     * @public\n     * @memberof conversation\n     * @requires internalAndSmsMessaging\n     * @method create\n     * @param {string} recipient\n     * @param options\n     * @returns {Object} a Conversation object\n     */\n    /**\n     * Create and return a new conversation object. Any messages being sent through this conversation\n     * object will be sent to the destinations provided\n     *\n     * @public\n     * @memberof conversation\n     * @requires multiUserConversation\n     * @method create\n     * @param {Array} recipient An array of destinations for messages created in this conversation. These will be a user's sip address.\n     * @param {string} type The type of conversation to create. Can be one of \"im\", \"sms\", \"group\" or \"other\"\n     * @param options\n     * @returns {Object} a Conversation object\n     */\n    create: function (recipient, options = { type: 'im' }) {\n      log.debug(API_LOG_TAG + 'conversation.create: ', recipient, options)\n      const destination = Array.isArray(recipient) ? recipient : [recipient]\n      const prevConv = findConversation(context.getState(), destination, options.type)\n\n      if (!prevConv) {\n        context.dispatch(convoActions.createConversation(destination, options))\n      }\n\n      return context.primitives.Conversation({\n        destination,\n        type: options.type\n      })\n    },\n    /**\n     * Returns all conversations currently tracked by the SDK\n     *\n     * @public\n     * @memberof conversation\n     * @requires internalAndSmsMessaging\n     * @requires onlyInternalMessaging\n     * @method getAll\n     * @returns {Array<conversation.Conversation>} An array of conversation objects.\n     */\n    getAll: function () {\n      log.debug(API_LOG_TAG + 'conversation.getAll')\n      const conversations = selectConversations(context.getState())\n\n      // Map conversation Objects to Conversation-Mixin Objects\n      return conversations.map(conversation => context.primitives.Conversation(conversation))\n    }\n  }\n  return { conversation: messagingApi }\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { unionBy, unionWith, sortBy, isEqual } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.CREATE_CONVERSATION] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: [...state.conversations, { ...action.payload }]\n    }\n  }\n}\n\nreducers[actionTypes.FETCH_CONVERSATIONS_FINISHED] = {\n  next (state, action) {\n    // TODO: does not persist conversations unique to local state\n    return {\n      ...state,\n      conversations: unionWith(\n        (a, b) => isEqual(a.destination, b.destination) && a.type === b.type, // Comparator\n        action.payload.conversations,\n        state.conversations // Conversation arrays\n      )\n    }\n  }\n}\n\nreducers[actionTypes.UPDATE_CONVERSATION] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return { ...conversation, ...action.payload }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.FETCH_MESSAGES] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            isPending: true\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.FETCH_MESSAGES_FINISHED] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: sortBy('timestamp', unionBy('messageId', action.payload.messages, conversation.messages)),\n            isTypingList: [],\n            isPending: false\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.SEND_MESSAGE] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.message.type\n        ) {\n          return {\n            ...conversation,\n            messages: [...conversation.messages, action.payload.message]\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.INCOMING_MESSAGE_READ] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: conversation.messages.map(message => {\n              if (message.messageId === action.payload.messageId) {\n                return { ...message, read: true }\n              }\n              return message\n            })\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.SEND_MESSAGE_READ_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: conversation.messages.map(message => {\n              if (message.messageId === action.payload.messageId) {\n                return { ...message, read: true }\n              }\n              return message\n            })\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.MESSAGE_RECEIVED] = {\n  next (state, action) {\n    if (action.meta.newConversation) {\n      return {\n        ...state,\n        conversations: [\n          ...state.conversations,\n          {\n            destination: action.payload.destination,\n            messages: [action.payload.message],\n            type: action.meta.type,\n            lastReceived: action.payload.message.timestamp\n          }\n        ]\n      }\n    } else {\n      return {\n        ...state,\n        conversations: state.conversations.map(conversation => {\n          if (isEqual(conversation.destination, action.payload.destination) && conversation.type === action.meta.type) {\n            return {\n              ...conversation,\n              messages: [...conversation.messages, action.payload.message],\n              lastReceived: action.payload.message.timestamp\n            }\n          }\n          return conversation\n        })\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SEND_MESSAGE_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: conversation.messages.map(message => sendMessageFinishHelper(message, action))\n          }\n        }\n        return conversation\n      })\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: conversation.messages.filter(\n              message => message.timestamp !== action.payload.timestamp && !message.isPending\n            )\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\n// Remove all messages from the specified conversation.\nreducers[actionTypes.CLEAR_MESSAGES] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: []\n          }\n        }\n        return conversation\n      })\n    }\n  }\n}\n\nreducers[actionTypes.DELETE_MESSAGE_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.map(conversation => {\n        if (\n          isEqual(conversation.destination, action.payload.destination) &&\n          conversation.type === action.payload.type\n        ) {\n          return {\n            ...conversation,\n            messages: conversation.messages.filter(message => message.messageId !== action.payload.messageId)\n          }\n        }\n        return conversation\n      })\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.DELETE_CONVERSATION_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      conversations: state.conversations.filter(\n        conversation =>\n          !(isEqual(conversation.destination, action.payload.destination) && conversation.type === action.payload.type)\n      )\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\n/*\n * Combine all of reducers into a single reducer, with\n *      a default state of an empty array.\n */\nconst reducer = handleActions(reducers, { conversations: [], errors: [] })\nexport default reducer\n\n/**\n * sendMessageFinishHelper\n *\n * A helper function to make dealing with the messages array in SEND_MESSAGE_FINISH\n * a little bit easier.\n *\n * @param {Object} message\n * @param {Object} action\n */\nfunction sendMessageFinishHelper (message, action) {\n  if (message.timestamp === action.payload.timestamp) {\n    if (action.payload.error) {\n      message = {\n        ...message,\n        sender: action.payload.sender,\n        isPending: false,\n        messageId: null,\n        error: action.payload.error\n      }\n    } else {\n      message = {\n        ...message,\n        sender: action.payload.sender,\n        isPending: false,\n        messageId: action.payload.messageId,\n        parts: action.payload.parts\n      }\n    }\n    if (action.payload.deliveryStatus) {\n      message.deliveryStatus = action.payload.deliveryStatus\n    }\n  } else {\n    message = { ...message }\n  }\n  return message\n}\n","/**\n * A Conversation object represents a conversation between either two users, or a\n * user and a group. A Conversation can create messages via the conversation's\n * {@link conversation.Conversation.createMessage createMessage()} function.\n * @public\n * @static\n * @typedef {Object} Conversation\n * @memberof conversation\n * @requires richMessagingWithoutLocation\n * @property {string} destination The Id of the remote user with which the current user is having a conversation.\n * @property {number} lastReceived The timestamp (milliseconds since epoch) of when a message was last received in this conversation.\n */\n// `features` and `lastPull` are not documented because they're intended to be internal\n// `type` is not documented because as of now there are no types other than 'im'\n\n/**\n * A Conversation object represents a conversation between either two users, or a\n * user and a group. A Conversation can create messages via the conversation's\n * {@link conversation.Conversation.createMessage createMessage()} function.\n * @public\n * @static\n * @typedef {Object} Conversation\n * @memberof conversation\n * @requires simpleMessagingOnly\n * @property {string} destination The id of the remote user with which the current user is having a conversation.\n */\n\n/**\n * A Message object is a means by which a sender can deliver information to a recipient.\n *\n * Creating and sending a message:\n *\n * A message object can be obtained through the {@link conversation.Conversation.createMessage Conversation.createMessage} API on an existing conversation.\n *\n * Messages have Parts which represent pieces of a message, such as a text part, a json object part or a file part.\n * Once all the desired parts have been added to the message using the {@link conversation.Message.addPart Message.addPart} function,\n * the message can then be sent using the {@link conversation.Message.send Message.send} function.\n *\n * Once the sender sends a message, this message is saved in sender's state as an object.\n * Similarly, once the recipient gets a message, this message is saved in recipient's state.\n *\n * Retrieving a delivered message:\n *\n * Once a message is delivered successfully, it can be\n * obtained through the {@link conversation.Conversation.getMessages Conversation.getMessages} or {@link conversation.Conversation.getMessage Conversation.getMessage} API on an existing conversation.\n *\n * Below are the properties pertaining to the message object, returned by Conversation.getMessage(s) APIs, for either sender or recipient.\n *\n * @property {number} timestamp A Unix timestamp in seconds marking the time when the message was created by sender.\n * @property {Array<conversation.Part>} parts An array of Part Objects.\n * @property {string} sender The primary contact address of the sender.\n * @property {Array<string>} destination An array of primary contact addresses associated with various destinations to which the message is meant to be delivered.\n * @property {string} messageId The unique id of the message. The message object (stored in sender's state) has a different id\n * than the one associated with the message object stored in recipient's state.\n * @property {string} type The type of message that was sent. See {@link conversation.chatTypes} for valid types.\n * This property applies only to message objects stored in sender's state.\n *\n * @public\n * @static\n * @typedef {Object} Message\n * @memberof conversation\n */\n\nimport { find, includes, isEqual } from 'lodash/fp'\nimport { convoActions, messageActions } from './actions'\n\nimport { getMessagingConfig, findConversation } from './selectors'\nimport { getUserInfo } from '../../auth/interface/selectors'\nimport compose from '@stamp/compose'\n// Events\nimport { emitEvent } from '../../events/interface/actions'\nimport { MESSAGING_ERROR } from './eventTypes'\n\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('MESSAGING')\n\n/**\n * Base conversation stamp\n *\n * @param {Array} destination The Destination for messages being sent through\n * this conversation in this instance of the SDK. This should be an Array with any number of user IDs\n * @param {string} type='im' The type of the message.\n * @param {string} id=undefined The unique identifier for base conversation.\n * @param {string} description='' The description associated with base conversation.\n * @param {Array} messages=[] An array containing the conversation's messages.\n * @param {number} lastReceived The timestamp associated with the last received message.\n * @param {string} lastMessage This is the last received message in a given conversation, as delivered by server.\n */\nconst conversationBase = {\n  initializers: [\n    function ({\n      destination,\n      type = 'im',\n      id = undefined,\n      description = '',\n      messages = [],\n      isTypingList = [],\n      lastReceived,\n      lastPull,\n      lastMessage = ''\n    }) {\n      this.destination = destination\n      this.type = type\n      this.description = description\n      this.messages = messages\n      this.lastMessage = lastMessage\n      this.isTypingList = isTypingList\n      this.id = id\n      const features = getMessagingConfig(this.context.getState()).features\n      if (this.destination.length === 1) {\n        const groupIndex = features.indexOf('group')\n        if (groupIndex > -1) {\n          features.splice(groupIndex, 1)\n        }\n      }\n      this.features = features\n      this.lastReceived = lastReceived\n      this.lastPull = lastPull\n      this.isPending = false\n    }\n  ],\n\n  methods: {\n    /**\n     * Create and return a message object. You must specify the part. If this is a simple text message, provide a `text` part as demonstrated in the example.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @requires richMessaging\n     * @constructs Message\n     * @param {Object} part The part to add to the message.\n     * @param {string} part.type The type of part. Can be \"text\", \"json\", \"file\", or \"location\".\n     * @param {string} [part.text] The text of the part. Must be a part of type \"text\".\n     * @param {Object} [part.json] The json of the part. Must be a part of type \"json\".\n     * @param {File} [part.file] The file of the part. Must be a part of type \"file\".\n     * @param {Object} [part.location] The location of the part. Must be a part of type \"location\".\n     * @param {number} [part.location.longitude] The longitude of the location.\n     * @param {number} [part.location.latitude] The latitude of the location.\n     * @returns {Object} The newly created Message object.\n     *\n     * @example\n     * conversation.createMessage({type: 'text', text: 'This is the message'});\n     */\n    /**\n     * Create and return a message object. You must specify the part. If this is a simple text message, provide a `text` part as demonstrated in the example.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @requires richMessagingWithoutLocation\n     * @constructs Message\n     * @param {Object} part The part to add to the message.\n     * @param {string} part.type The type of part. Can be \"text\", \"json\", \"file\".\n     * @param {string} [part.text] The text of the part. Must be a part of type \"text\".\n     * @param {Object} [part.json] The json of the part. Must be a part of type \"json\".\n     * @param {File} [part.file] The file of the part. Must be a part of type \"file\".\n     * @returns {conversation.Message} The newly created Message object.\n     *\n     * @example\n     * conversation.createMessage({type: 'text', text: 'This is the message'});\n     */\n    /**\n     * Create and return a message object. You must provide a `text` part as demonstrated in the example.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @requires simpleMessagingOnly\n     * @param {Object} part The part to add to the message.\n     * @param {string} part.type The type of part. Must be \"text\".\n     * @param {string} part.text The text of the part. Must be a part of type \"text\".\n     * @returns {conversation.Message} The newly created Message object.\n     *\n     * @example\n     * conversation.createMessage({type: 'text', text: 'This is the message'});\n     */\n    createMessage (part) {\n      const messageContext = {\n        features: this.features,\n        isGroup: this.destination.length > 1,\n        id: this.id,\n        type: this.type\n      }\n      return this.context.primitives.Message({\n        destination: this.destination,\n        part,\n        context: messageContext,\n        type: this.type\n      })\n    },\n\n    /**\n     * Clears all messages in this conversation from local state.\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @method clearMessages\n     */\n    clearMessages () {\n      this.context.dispatch(messageActions.clearMessages(this.destination, this.type))\n    },\n\n    /**\n     * Get the messages associated with this conversation.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @returns {Object[]} messages An array containing the conversation's messages.\n     * @returns {Function} messages.markRead Marks the message as read.\n     * @returns {Function} messages.forward Forward the message to another user.\n     * @returns {string} messages.messageId The Id of the message.\n     * @returns {string} messages.sender The user Id of the user who sent the message.\n     * @returns {number} messages.timestamp The time at which the message was sent.\n     * @returns {boolean} messages.read Whether the message has been marked as read.\n     * @returns {boolean} messages.isPending Whether the message has finished being sent to the server.\n     * @returns {Array} messages.parts The parts of the message.\n     */\n    getMessages: function () {\n      const convo = findConversation(this.context.getState(), this.destination, this.type)\n\n      return convo.messages.map(message => {\n        message.forward = participant => {\n          this.context.dispatch(messageActions.sendMessage(participant, message.parts, Date.now(), this.type, this.id))\n        }\n\n        const userInfo = getUserInfo(this.context.getState())\n        // Only allow the end user to markRead on message that were incoming.\n        if (message.sender !== userInfo.username) {\n          message.markRead = () => {\n            this.context.dispatch(messageActions.sendMessageRead(message.messageId, this.destination))\n          }\n        }\n        return message\n      })\n    },\n\n    /**\n     * Get a specific message from this conversation.\n     * @public\n     * @static\n     * @method getMessage\n     * @memberof conversation.Conversation\n     * @param {string} messageId ID of the message to retrieve.\n     * @return {Object} A message object.\n     */\n    getMessage (messageId) {\n      const convo = findConversation(this.context.getState(), this.destination, this.type)\n      const message = find(message => message.messageId === messageId)(convo.messages)\n\n      if (!message) {\n        log.debug(`Message (${messageId}) not found in conversation (${this.destination}).`)\n        return\n      }\n\n      // TODO: Have a helper that \"augments\" messages.\n      // \"Augment\" the message like we do in `getMessages`.\n      message.forward = participant => {\n        this.context.dispatch(messageActions.sendMessage(participant, message.parts, Date.now(), this.type, this.id))\n      }\n      // Only allow the end user to markRead on message that were incoming.\n      const userInfo = getUserInfo(this.context.getState())\n      if (message.sender !== userInfo.username) {\n        message.markRead = () => {\n          this.context.dispatch(messageActions.sendMessageRead(message.messageId, this.destination))\n        }\n      }\n      return message\n    },\n\n    /**\n     * Delete messages from this conversation. Provide an array of message IDs representing the messages for which the DELETE_MESSAGE action will be dispatched. If no message IDs are provided, all of the messages will be deleted.\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @requires richMessaging\n     * @method deleteMessages\n     * @param {Array} messageIds An array of message IDs\n     */\n    deleteMessages: function (messageIds = []) {\n      if (messageIds.length === 0) {\n        // If this method was called without providing any specific message IDs, we will assume that all messages should be deleted\n        this.messages.forEach(message => messageIds.push(message.messageId))\n      }\n      messageIds.forEach(messageId => {\n        this.context.dispatch(messageActions.deleteMessage(this.destination, this.type, messageId))\n      })\n    },\n\n    /**\n     * Delete this conversation on the server\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @requires richMessaging\n     * @method delete\n     */\n    delete: function () {\n      this.context.dispatch(convoActions.deleteConversation(this.destination, this.type))\n    },\n\n    /**\n     * Subscribe to this conversations messages array.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @param {Function} subscriber A subscriber function to be triggered when the messages array of this conversation is updated.\n     * @param {string} subscriber.destination The conversation participants.\n     * @param {string} subscriber.messageId The ID of the message that caused the event.\n     * @return {Function} The unsubscribe function.\n     */\n    subscribe: function (subscriber) {\n      if (subscriber) {\n        // Create a subscriber wrapper to properly determine if this messages:change event is relevant to this convo\n        // TODO: we might need to change the name of `conversationId` as it is used here. Conversations have actual IDs in the backend, which are an integer value rather than an array of strings, as is the case with destination. We track conversation IDs, as they exist in the back end, as we are required to identify the conversation by `id` when performing actions in the backend on a Group Conversation.\n        const subscriberWrapper = ({ destination, messageId }) => {\n          if (isEqual(destination, this.destination)) {\n            subscriber({ destination, messageId })\n          }\n        }\n        // Subscribe to the messages:change event with the wrapped subscriber\n        this.context.api.on('messages:change', subscriberWrapper)\n\n        // Return the unsubscribe function\n        return () => {\n          this.context.api.off('messages:change', subscriberWrapper)\n        }\n      }\n    }\n  }\n}\n\n/*\n * Conversation history stamp. Handles any functions that retrieve history from the server concerning conversations.\n */\nconst conversationHistory = {\n  initializers: [\n    function () {\n      const features = getMessagingConfig(this.context.getState()).features\n      if (!includes('history', features)) {\n        const prototype = Object.getPrototypeOf(this)\n        delete prototype.fetchMessages\n      }\n      return this\n    }\n  ],\n  methods: {\n    /**\n     * Allows the user to fetch messages associated with a specific conversation from the server.\n     * When the operation is complete, a NEW_MESSAGE event will be emitted.\n     * Messages can then be retrieved using getMessages.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Conversation\n     * @method fetchMessages\n     * @param {number} [amount=50] An amount of messages to fetch.\n     */\n    fetchMessages: function (amount = 50) {\n      this.context.dispatch(messageActions.fetchMessages(this.destination, amount, this.type))\n    }\n  }\n}\n\n/*\n * base Message stamp\n * @param {string} destination The Destination for messages being sent through\n * this conversation in this instance of the SDK. This can be one or many users,\n * separated by commas `,`\n * @param  {Object} part - Initial part to the message.\n * @param  {Object} context - Information and capabilities for how the message will act with regard to the conversation.\n * @param  {Array} context.features - List of features the conversation supports.\n * @param  {Function} context.send - Function for sending the message.\n * @param  {string} type=im - The type of the message\n */\nconst messageBase = {\n  initializers: [\n    function ({ destination, part, context, type = 'im' }) {\n      this.destination = Array.isArray(destination) ? destination : [destination]\n      this.convoContext = context\n      this.type = destination.length > 1 ? 'group' : type\n      if (typeof part === 'string') {\n        part = { type: 'text', text: part }\n      }\n      this.parts = [part]\n    }\n  ],\n  methods: {\n    /**\n     * Sends the message.\n     *\n     * @public\n     * @static\n     * @method send\n     * @memberof conversation.Message\n     */\n    send () {\n      log.debug('Send message', this)\n      this.context.dispatch(\n        messageActions.sendMessage(this.destination, this.parts, Date.now(), this.type, this.convoContext.id)\n      )\n    }\n  }\n}\n\n/**\n * stamp to add message parts capabilities to a Message primitive\n * @name withParts\n * @param  {Object} context - Information and capabilities for how the message will act with regard to the conversation.\n * @param  {Array} context.features - List of features the conversation supports.\n */\nconst withParts = {\n  initializers: [\n    function ({ context: { features = [] } }) {\n      if (!includes('parts', features)) {\n        const prototype = Object.getPrototypeOf(this)\n        delete prototype.addPart\n      }\n      return this\n    }\n  ],\n  methods: {\n    /**\n     * Add an additional part to a message.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Message\n     * @requires richMessaging\n     * @memberof withParts\n     * @param {Object} part The part to add to the message.\n     * @param {string} part.type The type of part. Can be \"text\", \"json\", \"file\", or \"location\".\n     * @param {string} [part.text] The text of the part. Must be a part of type \"text\".\n     * @param {Object} [part.json] The json of the part. Must be a part of type \"json\".\n     * @param {File} [part.file] The file of the part. Must be a part of type \"file\".\n     * @param {Object} [part.location] The location of the part. Must be a part of type \"location\".\n     * @param {number} [part.location.longitude] The longitude of the location.\n     * @param {number} [part.location.latitude] The latitude of the location.\n     */\n    /**\n     * Add an additional part to a message.\n     *\n     * @public\n     * @static\n     * @memberof conversation.Message\n     * @requires richMessagingWithoutLocation\n     * @param {Object} part The part to add to the message.\n     * @param {string} part.type The type of part. Can be \"text\", \"json\", \"file\", or \"location\".\n     * @param {string} [part.text] The text of the part. Must be a part of type \"text\".\n     * @param {Object} [part.json] The json of the part. Must be a part of type \"json\".\n     * @param {File} [part.file] The file of the part. Must be a part of type \"file\".\n     */\n    addPart (part) {\n      // Validate the part. If not valid, returns an error.\n      const validationResponse = validatePart(part, this.convoContext.features)\n      if (validationResponse instanceof Error) {\n        this.context.dispatch(emitEvent(MESSAGING_ERROR, { error: validationResponse.message }))\n      }\n      this.parts.push(part)\n    }\n  }\n}\n\n/*\n * A helper function to validate inputs. Will be progressively updated as we\n * allow for more and more input types.\n */\nconst validatePart = function (part, features) {\n  if (part.hasOwnProperty('type')) {\n    if (part.hasOwnProperty(part.type)) {\n      let validTypeFlag = false\n      switch (part.type) {\n        case 'text':\n          validTypeFlag = true\n          break\n        case 'file':\n          validTypeFlag = features.indexOf('rich') !== -1\n          break\n        case 'location':\n          validTypeFlag = features.indexOf('rich') !== -1\n          break\n        case 'json':\n          validTypeFlag = features.indexOf('rich') !== -1\n      }\n      return validTypeFlag || new Error(`Part of type \"${part.type}\" is not supported`)\n    } else {\n      return new Error('A message part must have a payload corresponding with its declared type')\n    }\n  } else {\n    return new Error('A message part must have a type. Options are: [text, file, location, json]')\n  }\n}\n\nexport default {\n  Conversation: compose(conversationBase, conversationHistory),\n  Message: compose(messageBase, withParts)\n}\n","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","import { put } from 'redux-saga/effects'\n// Events\nimport eventsMap from '../interface/events'\nimport { mapEvents } from '../../events/interface/actions'\n\n// Import the interface to implement.\nimport pluginInterface from '../interface'\n\nimport { mwiReceived, fetchMwi } from './sagas'\n\n/**\n * Plugin for voicemail service.\n * Provides the SDK with the Voicemail feature.\n */\nexport default function mwiLink () {\n  function * init () {\n    yield put(mapEvents(eventsMap))\n  }\n\n  const capabilities = ['voicemail']\n\n  return {\n    capabilities,\n    api: pluginInterface.api,\n    name: pluginInterface.name,\n    reducer: pluginInterface.reducer,\n    init,\n    sagas: [mwiReceived, fetchMwi]\n  }\n}\n","import * as actionTypes from './actionTypes'\nimport * as eventTypes from './eventTypes'\n\nconst eventsMap = {}\n\neventsMap[actionTypes.MWI_UPDATE] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.MWI_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.MWI_CHANGE,\n      args: {\n        lastUpdated: action.payload.lastUpdated,\n        newMessagesWaiting: action.payload.newMessagesWaiting,\n        totalVoice: action.payload.totalVoice,\n        unheardVoice: action.payload.unheardVoice,\n        voice: action.payload.voice,\n        fax: action.payload.fax,\n        multimedia: action.payload.multimedia\n      }\n    }\n  }\n}\n\nexport default eventsMap\n","// TODO: Fix params in this file, move to voicemail over MWI on all public wording.\n/**\n * A voicemail event has been received.\n *\n * @requires voicemail\n * @public\n * @static\n * @memberof voicemail\n * @event voicemail:change\n * @param {Object} params An object containing voicemail info.\n * @param {number} params.lastUpdated Timestamp of the last time voicemail data was checked.\n * @param {boolean} params.newMessagesWaiting Whether there are new messages.\n * @param {number} params.totalVoice The total number of voicemail messages.\n * @param {number} params.unheardVoice Number of unheard voicemail messages.\n * @param {Object} params.voice Object containing individual counts of new, old, urgent voicemails.\n * @param {Object} params.fax Object containing individual counts of new, old, urgent faxes.\n * @param {Object} params.multimedia Object containing individual counts of new, old, urgent multimedia messages.\n */\nexport const MWI_CHANGE = 'voicemail:change'\n\n/**\n * An error has occurred while attempting to retrieve voicemail data.\n *\n * @requires voicemail\n * @public\n * @memberof voicemail\n * @event voicemail:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const MWI_ERROR = 'voicemail:error'\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a mwi plugin.\n * @type {string}\n */\nconst name = 'mwi'\n\nexport default {\n  name,\n  api,\n  reducer\n}\n","/**\n * The 'voicemail' namespace is used to retrieve and view\n * voicemail indicators.\n *\n * Voicemail functions are all part of this namespace.\n *\n * @public\n * @requires voicemail\n * @namespace voicemail\n */\n\nimport * as actions from './actions'\n\nimport { getMwi as selectMwi } from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('MWI')\n\nexport default function api ({ dispatch, getState }) {\n  const mwiApi = {\n    /**\n     * Attempts to retrieve voicemail information from the server.\n     *\n     * A {@link voicemail.event:voicemail:change voicemail:change} event is\n     *    emitted upon completion.\n     *\n     * @public\n     * @requires voicemail\n     * @memberof voicemail\n     * @method fetch\n     */\n    fetch () {\n      log.debug(API_LOG_TAG + 'voicemail.fetch')\n      dispatch(actions.fetchMwi())\n    },\n\n    /**\n     * Returns voicemail data from the store.\n     *\n     * @public\n     * @requires voicemail\n     * @memberof voicemail\n     * @method get\n     */\n    get () {\n      log.debug(API_LOG_TAG + 'voicemail.get')\n      return selectMwi(getState())\n    }\n  }\n\n  return { voicemail: mwiApi }\n}\n","import { cloneDeep } from 'lodash/fp'\n\n/*\n * Redux-saga selector functions.\n * Used with the `select` effect in sagas to retrieve\n *      specific portions of the state.\n */\n\n/**\n * Retrieves the message waiting indicator data from the state.\n * @method getMwi\n * @return {Object}\n */\nexport function getMwi (state) {\n  return cloneDeep(state.mwi)\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\nreducers[actionTypes.MWI_UPDATE] = {\n  next (state, action) {\n    return {\n      ...action.payload\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","import { actionChannel, put, take, select } from 'redux-saga/effects'\n// Auth\nimport { getConnectionInfo, getPlatform } from '../../auth/interface/selectors'\n// Notifications\nimport { NOTIFICATION_RECEIVED } from '../../notifications/interface/actionTypes'\n// MWI Actions\nimport * as actions from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\n// Request\nimport request from '../../request/effects'\n// Errors\nimport BasicError, { mwiCodes } from '../../errors'\n// Constants\nimport { platforms } from '../../constants'\n\n// Logs\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('MWI')\n\nexport function * mwiReceived () {\n  const mwiEventChannel = actionChannel(\n    action =>\n      action.type === NOTIFICATION_RECEIVED &&\n      action.payload.notificationMessage &&\n      action.payload.notificationMessage.eventType === 'mwi'\n  )\n  const mwiReceived = yield mwiEventChannel\n  while (true) {\n    const action = yield take(mwiReceived)\n\n    // Parse the mwi data\n    const mwiData = {\n      ...action.payload.notificationMessage.mwiNotificationParams\n    }\n    mwiData.newMessagesWaiting = mwiData.mwi === 'yes'\n    delete mwiData.mwi\n    log.info(`There are ${mwiData.newMessagesWaiting ? mwiData.newMessagesWaiting : 'no'} new messages waiting.`)\n    mwiData.lastUpdated = action.payload.notificationMessage.time\n    log.info(`There are ${mwiData.totalVoice} total voicemails. ${mwiData.unheardVoice} unheard.`)\n\n    yield put(actions.mwiUpdate({ mwiData }))\n  }\n}\n\nexport function * fetchMwi () {\n  while (true) {\n    const action = yield take(actionTypes.FETCH_MWI)\n    const connInfo = yield select(getConnectionInfo)\n    const options = {\n      ...action.payload,\n      ...connInfo\n    }\n\n    const platform = yield select(getPlatform)\n    const version = platform === platforms.UC ? 1 : options.server.version\n    const response = yield request({\n      url: `${options.server.protocol}://${options.server.server}:${options.server.port}/rest/version/${version}/user/${options.username}/voicemail`,\n      method: 'GET'\n    })\n\n    if (response.error) {\n      let error\n      if (response.payload.body) {\n        // Handle errors from the server.\n        const { statusCode } = response.payload.body.mwiresponse\n        const errMsg = `Failed to fetch voicemail(s). Status Code: ${statusCode}`\n        log.info(errMsg)\n\n        error = new BasicError({\n          code: mwiCodes.FETCH_MWI_FAIL,\n          message: errMsg\n        })\n      } else {\n        // Handle errors from the request helper.\n        const { message } = response.payload.result\n        const errMsg = `Voicemail fetch request failed. ${message}`\n        log.info(errMsg)\n\n        error = new BasicError({\n          code: mwiCodes.FETCH_MWI_FAIL,\n          message: errMsg\n        })\n      }\n\n      yield put(actions.mwiUpdate({ error }))\n    } else {\n      let mwiData = {}\n      if (response.payload.body.mwiresponse.statusCode === 52) {\n        // This statusCode means this user has absolutely no messages, new or old.\n        // It is therefore accompanied with absolutely no data, so we make some for the store.\n        mwiData = {\n          lastUpdated: Date.now(),\n          newMessagesWaiting: false,\n          totalVoice: '0',\n          unheardVoice: '0'\n        }\n        log.info('There are no new or old voicemails.')\n      } else {\n        mwiData = { ...response.payload.body.mwiresponse }\n        delete mwiData.statusCode\n\n        // Parse the mwi data\n        mwiData.newMessagesWaiting = mwiData.mwi === 'yes'\n        delete mwiData.mwi\n        log.info(`There are ${mwiData.newMessagesWaiting ? mwiData.newMessagesWaiting : 'no'} new messages waiting.`)\n        mwiData.lastUpdated = Date.now()\n        log.info(`There are ${mwiData.totalVoice} total voicemails. ${mwiData.unheardVoice} unheard.`)\n      }\n      yield put(actions.mwiUpdate({ mwiData }))\n    }\n  }\n}\n","// Notification plugin.\nimport { api, reducer, name } from '../../notifications/interface'\nimport events from '../../notifications/interface/events'\nimport * as pushRegistrationSagas from './sagas/pushRegistration'\nimport { enableWebsocketChannelEntry, processNotification } from './sagas/notification'\n\n// Other plugins.\nimport { mapEvents } from '../../events/interface/actions'\nimport { update as updateConfig } from '../../config/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { defaultsDeep, values } from 'lodash/fp'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\n/**\n * Configuration options for the notification feature.\n * @public\n * @name config.notifications\n * @memberof config\n * @instance\n * @param {Object} notifications - The notifications configuration object.\n * @param {number} [notifications.idCacheLength=100] - Default amount of event ids to remember for de-duplication purposes.\n * @param {string} [notifications.incomingCallNotificationMode='any-channel'] - Communication channel mode used for incoming call notifications. Supported values are 'any-channel' or 'push-channel-only'.\n * @param {Object} [notifications.pushRegistration] - Object describing the server to use for push services.\n * @param {string} [notifications.pushRegistration.server] - Hostname for the push registration server.\n * @param {string} [notifications.pushRegistration.port] - Port for the push registration server.\n * @param {string} [notifications.pushRegistration.protocol] - Protocol for the push registration server.\n * @param {string} [notifications.pushRegistration.version] - Version for the push registration server.\n */\n\nconst defaultOptions = {\n  idCacheLength: 100,\n  incomingCallNotificationMode: 'any-channel'\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  idCacheLength: v8n.positive(),\n  incomingCallNotificationMode: enums(['any-channel', 'push-channel-only']),\n  pushRegistration: v8n.optional(\n    v8n.schema({\n      server: v8n.string(),\n      port: v8n.string(),\n      protocol: v8n.string(),\n      version: v8n.string()\n    })\n  )\n})\nconst parseOptions = parse('notifications', v8nValidation)\n\n/**\n * Notifications plugin factory.\n * @method notifications\n * @param {configs.notifications} options - Configuration options for authentication.\n * @return {Object} plugin - A notifications plugin.\n */\nexport default function notifications (options = {}) {\n  const pluginOptions = defaultsDeep(defaultOptions, options)\n  parseOptions(pluginOptions)\n\n  function * init () {\n    yield put(updateConfig(pluginOptions, name))\n    yield put(mapEvents(events))\n  }\n\n  const capabilities = ['push', 'registerPushNotifications', 'externalNotifications']\n\n  return {\n    name,\n    capabilities,\n    init,\n    api,\n    reducer,\n    sagas: [enableWebsocketChannelEntry, processNotification, ...values(pushRegistrationSagas)]\n  }\n}\n","import reducer from './reducers'\nimport api from './api'\n\nconst name = 'notifications'\n\nexport { name, api, reducer }\n","import * as actionTypes from './actionTypes'\nimport { WS_CONNECT_FINISHED, WS_DISCONNECT_FINISHED } from '../../connectivity/interface/actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\nreducers[actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH] = {\n  next (state, action) {\n    const channel = action.meta.channel\n    const enabled = action.payload.channelEnabled\n\n    let newChannelState\n    if (enabled) {\n      newChannelState = {\n        ...state[channel],\n        ...action.payload\n      }\n    } else {\n      // If the channel is being disabled, clear old state.\n      newChannelState = {\n        ...action.payload\n      }\n    }\n\n    return {\n      ...state,\n      [channel]: newChannelState\n    }\n  }\n}\n\n/*\n * The websocket channel is assumed to be enabled when the\n *      websocket is opened.\n */\nreducers[WS_CONNECT_FINISHED] = {\n  next (state) {\n    // TODO: Link WS only?\n    return {\n      ...state,\n      WEBSOCKET: {\n        ...state.WEBSOCKET,\n        channelEnabled: true\n      }\n    }\n  }\n}\n\n/*\n * The websocket channel is assumed to be disabled when the\n *      websocket is closed.\n */\nreducers[WS_DISCONNECT_FINISHED] = {\n  next (state) {\n    // TODO: Link WS only?\n    return {\n      ...state,\n      WEBSOCKET: {\n        ...state.WEBSOCKET,\n        channelEnabled: false\n      }\n    }\n  }\n}\n\n// Default notifications sub-state.\nconst defaultState = {\n  WEBSOCKET: {\n    channelEnabled: false\n  },\n  PUSH: {\n    channelEnabled: true\n  }\n}\n\n/**\n * Notifications reducer.\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n */\nconst reducer = handleActions(reducers, defaultState)\nexport default reducer\n","/**\n * The 'notification' namespace allows user to register/deregister for/from push notifications as well as\n * enabling/disabling the processing of websocket notifications.\n *\n * @public\n * @requires externalNotifications\n * @namespace notification\n */\n\nimport * as actions from './actions'\nimport { platforms } from '../../constants'\n\nimport { defer } from '../../common/utils'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Notifications API.\n * @method api\n * @param {Function} dispatch The redux store's dispatch function.\n * @return {Object} api  The notifications API object.\n */\nexport default function api ({ dispatch }) {\n  const notificationApi = {\n    /**\n     * Provides an external notification to the system for processing.\n     *\n     * @public\n     * @requires externalNotifications\n     * @memberof notification\n     * @method process\n     * @param {Object} notification\n     * @param {string} [channel] - The channel that the notification came from.\n     */\n    process (notification, channel, platform = platforms.LINK) {\n      log.debug(API_LOG_TAG + 'notification.process: ', notification, channel, platform)\n      dispatch(actions.externalNotification(notification, channel, platform))\n    },\n\n    /**\n     * Registers with Apple push notification service. Once registration is successful, the application will be able to receive\n     * standard and/or voip push notifications. It can then send these notifications to the SDK with {@link api.notifications.process}\n     * in order for the SDK to process them.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method registerApplePush\n     * @param {Object} params\n     * @param {string[]} params.services - Array of services for which we wish to receive notifications.\n     * @param {string} params.voipDeviceToken - The voip device token used for voip push on iOS.\n     *                                          This token is required if registering for call service notifications on iOS.\n     * @param {string} params.standardDeviceToken - The standardDevice token used for standard push on iOS .\n     *                                              This token is required when registering for non-call service notifications.\n     * @param {string} params.bundleId - The bundleId to identify the application receiving the push notification.\n     * @param {string} params.clientCorrelator - Unique identifier for a client device.\n     * @param {string} params.realm - The realm used by the push registration service to identify and\n     *                                establish a connection with the service gateway.\n     * @param {boolean} params.isProduction - If true, push notification will be sent to production.\n     *                                        If false, push notification will be sent to sandbox.\n     * @return {Promise} When successful,  the information of the registration.\n     *                   Promise will reject with error object otherwise.\n     */\n    registerApplePush ({\n      services,\n      voipDeviceToken,\n      standardDeviceToken,\n      bundleId,\n      clientCorrelator,\n      realm,\n      isProduction\n    }) {\n      const deferredResult = defer()\n      log.debug(API_LOG_TAG + 'notification.registerApplePush', arguments)\n\n      dispatch(\n        actions.registerApplePushNotification(\n          {\n            services,\n            voipDeviceToken,\n            standardDeviceToken,\n            bundleId,\n            clientCorrelator,\n            realm,\n            isProduction\n          },\n          deferredResult\n        )\n      )\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Registers with Google push notification service. Once registration is successful, the application will be able to receive\n     * standard and/or voip push notifications. It can then send these notifications to the SDK with {@link api.notifications.process}\n     * in order for the SDK to process them.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method registerAndroidPush\n     * @param {Object} params\n     * @param {string[]} params.services - Array of services to register for.\n     * @param {string} params.deviceToken - The device token used for standard push on Android. This token is required\n     *                                      when registering for all related services notifications.\n     * @param {string} params.bundleId - The bundleId to identify the application receiving the push notification.\n     * @param {string} params.clientCorrelator - Unique identifier for a client device.\n     * @param {string} params.realm - The realm used by the push registration service to identify\n     *                                and establish a connection with the service gateway.\n     * @return {Promise} When successful,  the information of the registration.\n     *                   Promise will reject with error object otherwise.\n     */\n    registerAndroidPush ({ services, deviceToken, bundleId, clientCorrelator, realm }) {\n      const deferredResult = defer()\n      log.debug(API_LOG_TAG + 'notification.registerAndroidPush', arguments)\n\n      dispatch(\n        actions.registerAndroidPushNotification(\n          {\n            services,\n            deviceToken,\n            bundleId,\n            clientCorrelator,\n            realm\n          },\n          deferredResult\n        )\n      )\n      return deferredResult.promise\n    },\n\n    /**\n     * Unregister Apple push notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method unregisterApplePush\n     * @param {string} registrationInfo - The data returned from the push registration\n     * @return {Promise} When successful, the promise will resolve with undefined.\n     *                   Promise will reject with error object otherwise.\n     */\n    unregisterApplePush (registrationInfo) {\n      const deferredResult = defer()\n      log.debug(API_LOG_TAG + 'notification.unregisterPush')\n      dispatch(actions.unregisterApplePushNotification(registrationInfo, deferredResult))\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Unregister Android push notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method unregisterAndroidPush\n     * @param {string} registrationInfo - The data returned from the push registration\n     * @return {Promise} When successful, the promise will resolve with undefined.\n     *                   Promise will reject with error object otherwise.\n     */\n    unregisterAndroidPush (registrationInfo) {\n      const deferredResult = defer()\n      log.debug(API_LOG_TAG + 'notification.unregisterPush')\n      dispatch(actions.unregisterAndroidPushNotification(registrationInfo, deferredResult))\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Enables, or disables, the processing of websocket notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method enableWebsocket\n     * @param {boolean} enable - Whether the websocket channel should be enabled.\n     */\n    enableWebsocket (enable) {\n      log.debug(API_LOG_TAG + 'notification.enableWebsocket: ', enable)\n      dispatch(\n        actions.enableNotificationChannel('WEBSOCKET', {\n          channelEnabled: enable\n        })\n      )\n    }\n  }\n\n  return { notification: notificationApi }\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nvar events = {}\n\nevents[actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.NOTI_ERROR,\n      args: { channel: action.meta.channel, error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.NOTI_CHANGE,\n      args: { channel: action.meta.channel }\n    }\n  }\n}\n\nevents[actionTypes.NOTIFICATION_RECEIVED] = function (action) {\n  if (!action.error) {\n    return {\n      type: eventTypes.NOTI_RECEIVED,\n      args: { payload: action.payload }\n    }\n  }\n}\n\nexport default events\n","/**\n * Push notifications registration state has changed.\n *\n * @public\n * @requires push\n * @memberof notification\n * @event notifications:change\n * @param {Object} params\n * @param {string} params.channel The channel for the notification.\n */\nexport const NOTI_CHANGE = 'notifications:change'\n\n/**\n * An error occurred with push notifications.\n *\n * @public\n * @requires push\n * @memberof notification\n * @event notifications:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n * @param {string} params.channel The channel for the notification.\n */\nexport const NOTI_ERROR = 'notifications:error'\n\n/**\n * A notification was received by the SDK.\n *\n * @private This is an undocumented feature.\n *\n * @event notification:received\n * @param {Object} params Object that has information about the notification.\n * @param {Object} params.payload The payload of the notification.\n */\nexport const NOTI_RECEIVED = 'notification:received'\n","// Libraries.\nimport { defaults } from 'lodash/fp'\nimport { call, select, takeEvery } from 'redux-saga/effects'\n// Other plugins.\nimport { getConnectionInfo } from '../../../auth/interface/selectors'\n// Logs\nimport { logManager } from '../../../logs'\nimport * as actionTypes from '../../interface/actionTypes'\nimport { getNotificationConfig } from '../../interface/selectors'\nimport * as requests from '../requests'\n\n// Get the logger\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Register for apple push notification\n * @method applePushRegistrationEntry\n */\nexport function * applePushRegistrationEntry () {\n  yield takeEvery(actionTypes.REGISTER_APPLE_PUSH_NOTIFICATION, registerPushDeviceToken)\n}\n\n/**\n * Register for android push notification\n * @method androidPushRegistrationEntry\n */\nexport function * androidPushRegistrationEntry () {\n  yield takeEvery(actionTypes.REGISTER_ANDROID_PUSH_NOTIFICATION, registerPushDeviceToken)\n}\n\n/**\n * Saga for registering a device token for push notifications.\n * @method registerPushDeviceToken\n */\nfunction * registerPushDeviceToken (action) {\n  // Wait for a registration action.\n  const connection = yield select(getConnectionInfo)\n  const { pushRegistration } = yield select(getNotificationConfig)\n\n  // If a push registration endpoint was configured, use that instead of default.\n  if (pushRegistration) {\n    connection.server = defaults(connection.server, pushRegistration)\n    connection.protocol = defaults(connection.protocol, pushRegistration)\n    connection.port = defaults(connection.port, pushRegistration)\n    connection.version = defaults(connection.version, pushRegistration)\n  }\n\n  log.info('Registering device token for PUSH notifications...')\n  const response = yield call(requests.pushNotificationsRegistration, connection, {\n    ...action.payload\n  })\n\n  if (response.error) {\n    // Failed to create registration, reject the deferred result.\n    yield call([action.meta.deferred, 'reject'], {\n      error: response.text\n    })\n  } else {\n    // Successfully created registration, resolve the deferred result and respond with the registration.\n    yield call([action.meta.deferred, 'resolve'], response.registration)\n  }\n}\n\n/**\n * Unregister for apple push notification\n * @method applePushUnregisterEntry\n */\nexport function * applePushUnregisterEntry () {\n  yield takeEvery(actionTypes.UNREGISTER_APPLE_PUSH_NOTIFICATION, unregisterPushDeviceToken)\n}\n\n/**\n * Unregister for android push notification.\n * @method androidPushUnregisterEntry\n */\nexport function * androidPushUnregisterEntry () {\n  yield takeEvery(actionTypes.UNREGISTER_ANDROID_PUSH_NOTIFICATION, unregisterPushDeviceToken)\n}\n\n/**\n * Saga for deregistering a device token for push notifications.\n * @method deregisterPushDeviceToken\n */\nfunction * unregisterPushDeviceToken (action) {\n  const connection = yield select(getConnectionInfo)\n  const { pushRegistration } = yield select(getNotificationConfig)\n\n  // If a push registration endpoint was configured, use that instead of default.\n  if (pushRegistration) {\n    connection.server = defaults(connection.server, pushRegistration)\n    connection.protocol = defaults(connection.protocol, pushRegistration)\n    connection.port = defaults(connection.port, pushRegistration)\n    connection.version = defaults(connection.version, pushRegistration)\n  }\n\n  log.info('Un-registering device token for PUSH notifications...')\n  const response = yield call(requests.pushNotificationsDeRegistration, connection, {\n    registration: action.payload.registration\n  })\n  if (response.error) {\n    yield call([action.meta.deferred, 'reject'], {\n      error: response.text\n    })\n  } else {\n    yield call([action.meta.deferred, 'resolve'], undefined)\n  }\n}\n","import { defaults, has } from 'lodash/fp'\nimport { buffers } from 'redux-saga'\nimport { inflate } from 'pako'\nimport { actionChannel, call, put, select, take, takeEvery } from 'redux-saga/effects'\nimport { getConnectionInfo } from '../../../auth/interface/selectors'\nimport { platforms } from '../../../constants'\nimport { logManager } from '../../../logs'\nimport * as actions from '../../interface/actions'\nimport * as actionTypes from '../../interface/actionTypes'\nimport { getNotificationConfig, getNotificationsInfo } from '../../interface/selectors'\nimport * as requests from '../requests'\n\n// Get the logger\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Unregister for android push notification.\n * @method enableWebsocketChannelEntry\n */\nexport function * enableWebsocketChannelEntry () {\n  yield takeEvery(actionTypes.ENABLE_NOTIFICATION_CHANNEL, enableWebsocketChannel)\n}\n\nfunction * enableWebsocketChannel (action) {\n  if (action.payload.enable) {\n    // TODO: If websockets are not connected, connect them here.\n  }\n\n  // TODO: Handle possible error case when connecting websockets.\n  //      Otherwise, plain dispatch to update state.\n  log.info('Enabling WEBSOCKET notification channel ...')\n  yield put(\n    actions.enableNotificationChannelFinish(action.meta.channel, {\n      params: action.payload\n    })\n  )\n}\n\nconst INITIAL_BUFFER_SIZE = 10\n\nexport function * processNotification () {\n  var queue = []\n\n  const externalNotifications = yield actionChannel(\n    actionTypes.PROCESS_NOTIFICATION,\n    buffers.expanding(INITIAL_BUFFER_SIZE)\n  )\n  while (true) {\n    const action = yield take(externalNotifications)\n    const config = yield select(getNotificationConfig)\n    log.info(\n      `Received notification on channel ${action.meta.channel} for platform: ${action.meta.platform}; Handling...`\n    )\n\n    // Only process notifications from enabled channels, ie. \"silence\" the channel.\n    const channel = yield select(getNotificationsInfo, action.meta.channel)\n    if (!channel.channelEnabled) {\n      log.debug(`Notification received on disabled channel: ${action.meta.channel}. Ignoring it ...`)\n      continue\n    }\n\n    const notification = action.payload\n    const notificationMessage = notification.notificationMessage\n    const notificationId = id(action.meta.platform)(notification)(notificationMessage)\n\n    let formattedPayload = action.payload\n    if (has('payload.notificationMessage.sessionParams.sdpFormat', action)) {\n      log.debug('Notification contains SDP. Normalizing.')\n      formattedPayload = yield call(normalizeSDP, action.payload)\n    }\n\n    // If we're in the PUSH-only notification mode and\n    // this incoming notification is coming through a channel other than PUSH channel (e.g. WEBSOCKET) and\n    // this notification is for an incoming call\n    if (\n      formattedPayload.notificationMessage.eventType === 'call' &&\n      config.incomingCallNotificationMode === 'push-channel-only' &&\n      action.meta.channel !== 'PUSH'\n    ) {\n      // Ignore this call-related notification, but at a minimum generate a log so that user is aware.\n      log.warn(\n        'Dropped incoming call notification with id: ' +\n          notificationId +\n          ' received through channel: ' +\n          action.meta.channel +\n          ' because current mode for handling notifications is set to: push-channel-only.'\n      )\n      continue\n    } else {\n      // Don't check for duplicate notifications if idCacheLength is set to 0\n      // Get the list of \"relevant\" IDs in the queue (\"relevant\" being the latest X elements).\n      // This covers edge-cases where the cache length config is changed (to a smaller number)\n      //    after the queue has begun to be populated.\n      const ids = config.idCacheLength === 0 ? [] : queue.slice(config.idCacheLength * -1)\n      // If the notification ID is part of the list, then it's a duplicate.\n      const duplicate = ids.includes(notificationId)\n      if (duplicate) {\n        log.info('Notification was a duplicate; ignoring.')\n        const error = new Error(`Notification id ${notificationId} is duplicate.`)\n        // TODO: Tech-debt; this action should be a notificationReceived error action.\n        //      But that requires all sagas listening for notifications to filter out\n        //      error actions ..which requires their take() patterns changed, which\n        //      is another tech-debt item.\n        yield put(actions.processNotificationFinish(error))\n      } else {\n        queue.push(notificationId)\n        // Because the client can update the value of idCacheLength at any time\n        // we have to adjust the size of our queue accordingly\n        while (queue.length > config.idCacheLength) {\n          queue.shift()\n        }\n\n        const { platform, channel } = action.meta\n        log.debug('Added notification ID to the ID cache. Informing listeners ...')\n        // Inform all other plugins by sending a NOTIFICATION_RECEIVED action\n        yield put(actions.notificationReceived(formattedPayload, platform, channel))\n      }\n    }\n  }\n}\n\nconst id = platform => notification => notificationMessage => {\n  switch (platform) {\n    case platforms.LINK:\n      log.debug(`The received notification is of type ${notificationMessage.eventType}.`)\n      return notificationMessage.eventId\n\n    case platforms.UC:\n      // A Link notification can be in either the Link format or the SPiDR format (for calls).\n      return notificationMessage.id || notificationMessage.eventId\n\n    case platforms.CPAAS:\n      // CPaaS notifications do not have a consistent path to their ID.\n      //    The ID is one level down in the object, but we need to dynamically\n      //    find the key that its in.\n      for (const key in notification) {\n        if (notification[key].id) {\n          return notification[key].id\n        }\n      }\n      log.error('Received notification without a findable ID: ', Object.keys(notification))\n      return null\n\n    default:\n      log.debug('Received notification from unknown platform.')\n      return null\n  }\n}\n\n/**\n * This function accepts a notification payload. If the payload is a spidr payload\n * and contains an sdpFormat that needs manipulating, it is done here.\n * @method normalizeSDP\n * @param payload A processNotification action payload\n * @returns payload A processNotification action payload\n */\nexport function * normalizeSDP (payload) {\n  // Copy the payload to not disturb the action.\n  payload = { ...payload }\n\n  if (payload.notificationMessage.sessionParams.sdpFormat === 'compressed') {\n    log.debug('Found SDP format: compressed. Deflating compressed SDP...')\n    // convert based64 encoded string into bytes\n    const sdpCompressedBytes = atob(payload.notificationMessage.sessionParams.sdp)\n\n    // First convert the ASCII string into an array of unsigned integers\n    // pako.inflate() requires an Uint8Array as parameter.\n    const buf = new ArrayBuffer(sdpCompressedBytes.length)\n    const bufView = new Uint8Array(buf) // allocate enough space ..\n    for (let i = 0, strLen = sdpCompressedBytes.length; i < strLen; i++) {\n      bufView[i] = sdpCompressedBytes.charCodeAt(i) // fill-in the array of uint(s)\n    }\n\n    // uncompressed the bytes\n    try {\n      const sdpUnCompressedBytes = inflate(bufView)\n      // convert uncompressed bytes back into string\n\n      const sdpString = String.fromCharCode.apply(null, sdpUnCompressedBytes)\n\n      payload.notificationMessage.sessionParams.sdp = sdpString\n      log.debug(`Returning uncompressed SDP as part of payload: ${sdpString}`)\n    } catch (err) {\n      log.debug(`Cannot inflate the compressed SDP: ${err}`)\n      // TODO: If there was an error, try to handle it here.\n    }\n    return payload\n  } else if (payload.notificationMessage.sessionParams.sdpFormat === 'url') {\n    const connection = yield select(getConnectionInfo)\n    const { pushRegistration } = yield select(getNotificationConfig)\n    log.debug(`Found SDP format: url. pushRegistration: ${pushRegistration}`)\n    // If a push registration endpoint was configured, use that instead of default.\n    if (pushRegistration) {\n      connection.server = defaults(connection.server, pushRegistration)\n      connection.protocol = defaults(connection.protocol, pushRegistration)\n      connection.port = defaults(connection.port, pushRegistration)\n      connection.version = defaults(connection.version, pushRegistration)\n    }\n    log.info('Fetching SDP...')\n    const response = yield call(requests.fetchSDP, connection, payload.notificationMessage.sessionParams.sdp)\n    if (response.error) {\n      // REST request failed.\n      // TODO: Handle the error here rather than throwing an error\n    } else {\n      payload.notificationMessage.sessionParams.sdp = response.eventDataResponse.sdp\n    }\n    return payload\n  } else {\n    log.debug(`Unknown sdpFormat received: ${payload.notificationMessage.sessionParams.sdpFormat}.`)\n    return payload\n  }\n}\n","\n/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED$1               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN$1             = 2;\n\n/*============================================================================*/\n\n\nfunction zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH$1    = 3;\nconst MAX_MATCH$1    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES$1       = 30;\n/* number of distance codes */\n\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\n\nconst MAX_BITS$1      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES$1 + 2) * 2);\nzero$1(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES$1 * 2);\nzero$1(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero$1(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\nzero$1(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES$1);\nzero$1(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES$1);\nzero$1(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) =>\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS$1; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES$1; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES$1; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nconst copy_block = (s, buf, len, header) =>\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  s.pending_buf.set(s.window.subarray(buf, buf + len), s.pending);\n  s.pending += len;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) =>\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) =>\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let lx = 0;         /* running index in l_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE$1;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) =>\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let black_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS$1; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init$1 = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block$1 = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align$1 = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nconst _tr_flush_block$1 = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN$1) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block$1(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally$1 = (s, dist, lc) =>\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //let out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n};\n\nvar _tr_init_1  = _tr_init$1;\nvar _tr_stored_block_1 = _tr_stored_block$1;\nvar _tr_flush_block_1  = _tr_flush_block$1;\nvar _tr_tally_1 = _tr_tally$1;\nvar _tr_align_1 = _tr_align$1;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants$2 = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_UNKNOWN,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants$2;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE = 42;\nconst EXTRA_STATE = 69;\nconst NAME_STATE = 73;\nconst COMMENT_STATE = 91;\nconst HCRC_STATE = 103;\nconst BUSY_STATE = 113;\nconst FINISH_STATE = 666;\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  let max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    const max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n};\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED$2; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH$2;\n  _tr_init(s);\n  return Z_OK$3;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK$3) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$2; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR$2; }\n  strm.state.gzhead = head;\n  return Z_OK$3;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR$2;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION$1) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n};\n\n\nconst deflate$2 = (strm, flush) => {\n\n  let beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK$1 || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n  }\n\n  s.strm = strm; /* just in case */\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;\n      let level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH$3) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {\n    let bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK$3;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH$1) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK$3;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH$3) { return Z_OK$3; }\n  if (s.wrap <= 0) { return Z_STREAM_END$3; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK$3;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2$1 = deflate$2;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1$2 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2$1,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate$1(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1$2.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$2) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1$2.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1$2.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$2) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1$2.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$2;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$2) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate$1(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip$1(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_2 = deflate$1;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar constants$1 = constants$2;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD$1 = 30;       /* got a data error -- remain here until reset */\nconst TYPE$1 = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD$1;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD$1;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE$1;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD$1;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n  let base_index = 0;\n//  let shoextra;    /* extra bits table to use */\n  let end;                    /* use base and extra for symbol > end */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n  let extra_index = 0;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES$1) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS$1) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,\n  Z_DEFLATED\n} = constants$2;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 1;       /* i: waiting for magic header */\nconst    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 3;       /* i: waiting for modification time (gzip) */\nconst    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 7;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 9;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 10;    /* i: waiting for dictionary check value */\nconst    DICT = 11;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 14;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 18;   /* i: waiting for code length code lengths */\nconst        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nconst            LEN = 21;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 22;    /* i: waiting for length extra bits */\nconst            DIST = 23;      /* i: waiting for distance code */\nconst            DISTEXT = 24;   /* i: waiting for distance extra bits */\nconst            MATCH = 25;     /* o: waiting for output space to copy string */\nconst            LIT = 26;       /* o: waiting for output space to write literal */\nconst    CHECK = 27;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 29;      /* finished check, done -- remain here until reset */\nconst    BAD = 30;       /* got a data error -- remain here until reset */\nconst    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$1;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$1) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate$2 = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$1;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT$1;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$1;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR$1;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH$1))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$1;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$1;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR$1;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$1;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2$1 = inflate$2;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\n*/\n\nvar inflate_1$2 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2$1,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate$1(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1$2.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1$2.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1$2.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1$2.inflateReset(strm);\n      status = inflate_1$2.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = inflate_1$2.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate$1(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1$1 = Inflate$1;\nvar inflate_2 = inflate$1;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip$1 = inflate$1;\nvar constants = constants$2;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1$1,\n\tinflate: inflate_2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip$1,\n\tconstants: constants\n};\n\nconst { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;\n\nconst { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;\n\n\n\nvar Deflate_1 = Deflate;\nvar deflate_1 = deflate;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar Inflate_1 = Inflate;\nvar inflate_1 = inflate;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip_1 = ungzip;\nvar constants_1 = constants$2;\n\nvar pako = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tInflate: Inflate_1,\n\tinflate: inflate_1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport { Deflate_1 as Deflate, Inflate_1 as Inflate, constants_1 as constants, pako as default, deflate_1 as deflate, deflateRaw_1 as deflateRaw, gzip_1 as gzip, inflate_1 as inflate, inflateRaw_1 as inflateRaw, ungzip_1 as ungzip };\n","// Presence plugin.\nimport { api, reducer } from '../interface'\nimport * as sagas from './sagas'\nimport eventsMap from '../interface/events'\nimport { STATUS, ACTIVITY } from './constants'\n\n// Other plugins.\nimport { mapEvents } from '../../events/interface/actions'\n\n// Libraries\nimport { put } from 'redux-saga/effects'\nimport { values } from 'lodash/fp'\n\nconst name = 'presence'\n\nconst capabilities = ['presence']\n\n/**\n * Link Presence plugin factory.\n * @method linkPresence\n * @return {Object} A plugin.\n */\nexport default function linkPresence () {\n  // Add plugin-specific things to the API.\n  function augmentedApi (context) {\n    const newApi = api(context)\n\n    /**\n     * Possible status values.\n     * @public\n     * @static\n     * @memberof presence\n     * @type {Object}\n     * @property {string} OPEN\n     * @property {string} CLOSED\n     * @example\n     * const { statuses, activities } = client.presence\n     * // Use the values when updating presence.\n     * client.presence.update(statuses.OPEN, activities.AVAILABLE)\n     */\n    newApi.presence.statuses = STATUS\n\n    /**\n     * Possible activity values.\n     * @public\n     * @static\n     * @memberof presence\n     * @type {Object}\n     * @property {string} AVAILABLE\n     * @property {string} IDLE\n     * @property {string} AWAY\n     * @property {string} LUNCH\n     * @property {string} BUSY\n     * @property {string} VACATION\n     * @property {string} ON_THE_PHONE\n     * @property {string} UNKNOWN\n     */\n    newApi.presence.activities = ACTIVITY\n    return newApi\n  }\n\n  return {\n    name,\n    capabilities,\n    api: augmentedApi,\n    reducer,\n    init: () => [put(mapEvents(eventsMap))],\n    sagas: values(sagas)\n  }\n}\n","export { default as api } from './api'\nexport { default as reducer } from './reducers'\n","/**\n * The 'presence' namespace provides an interface for an application to set the\n *    User's presence information and to track other Users' presence\n *    information.\n *\n * Presence information is persisted by the server. When the SDK is initialized,\n *    there will be no information available. Presence information will become\n *    available either by using {@link presence.fetch} or by subscribing for\n *    updates about other Users, using {@link presence.subscribe}.\n *\n * Available presence information can be retrieved using {@link presence.get} or\n *    {@link presence.getAll}.\n *\n * @public\n * @requires presence\n * @namespace presence\n */\n\n/**\n * The PresenceStatus type defines the user's current status in terms of the user's availability to\n * communicate/respond to other users in the network.\n * An instance of this type can be obtained by invoking the {@link presence.get} function.\n *\n * Reporting when a user is on the phone is enabled (by default), which means that presence update notifications\n * will be sent whenever a user is in a call, as well as when the call has ended.\n * This is a user preference enabled or disabled on server side, and it can only be changed on the server side.\n *\n * The status is set to {@link presence.statuses open} as soon as a user subscribes for the presence service.\n *\n * @public\n * @static\n * @typedef {Object} PresenceStatus\n * @memberof presence\n * @property {string} userId The unique identifier for the user associated with this presence status.\n * @property {string} status The current status the user has set for themselves. For supported values see {@link presence.statuses}.\n * @property {string} activity The current activity of the user.\n *      For supported values see {@link presence.activities}.\n * @property {string} note Additional message accompanying the status & activity.\n * @property {boolean} loading Whether the presence information has been loaded or is in the process of loading.\n */\n\nimport * as actions from './actions'\nimport * as selectors from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('PRESENCE')\n\nexport default function (context) {\n  const presenceApi = {\n    /**\n     * Updates the presence information for the current user.\n     *\n     * See {@link presence.statuses} and {@link presence.activities} for valid\n     *    values.\n     *\n     * The SDK will emit a\n     *    {@link presence.event:presence:selfChange presence:selfChange} event\n     *    when the operation completes. The updated presence information is\n     *    available and can be retrieved with {@link presence.getSelf}.\n     *\n     * Other users subscribed for this user's presence will receive a\n     *    {@link presence.event:presence:change presence:change} event.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method update\n     * @param  {string} status The status of the presence state.\n     * @param  {string} activity The activity to be shown as presence state\n     * @param  {string} [note] An additional note to be provided when the activity is `presence.activities.ACTIVITIES_OTHER`.\n     */\n    update (status, activity, note) {\n      log.debug(API_LOG_TAG + 'presence.update: ', status, activity, note)\n      context.dispatch(actions.updatePresence(status, activity, note))\n    },\n\n    /**\n     * Retrieves the presence information for specified users, if available.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method get\n     * @param  {Array<string>|string} user A User ID or an array of User IDs.\n     * @return {Array<Object>|Object} List of user presence information.\n     */\n    get (user) {\n      log.debug(API_LOG_TAG + 'presence.get: ', user)\n      const users = Array.isArray(user) ? user : [user]\n      const storedUsers = selectors.getPresence(context.getState(), users)\n      // return something sensible based on the input\n      if (!Array.isArray(users)) {\n        if (storedUsers.length) {\n          return storedUsers[0]\n        }\n        return undefined\n      }\n      return storedUsers\n    },\n\n    /**\n     * Retrieves the presence information for all available users.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method getAll\n     * @return {Array<Object>} List of user presence information.\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'presence.getAll')\n      return selectors.getAllPresence(context.getState())\n    },\n\n    /**\n     * Retrieves the presence information for the current user.\n     *\n     * This information is set using the {@link presence.update} API.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method getSelf\n     * @return {Object} Presence information for the current user.\n     */\n    getSelf () {\n      log.debug(API_LOG_TAG + 'presence.getSelf')\n      return selectors.getSelfPresence(context.getState())\n    },\n\n    /**\n     * Fetches presence information for the given users. This will refresh the\n     *    available information with any new information from the server.\n     *\n     * Available presence information an be retrieved using the\n     *    {@link presence.get} or {@link presence.getAll} APIs.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method fetch\n     * @param {Array<string>|string} user A User ID or an array of User IDs.\n     */\n    fetch (user) {\n      log.debug(API_LOG_TAG + 'presence.fetch: ', user)\n      const users = Array.isArray(user) ? user : [user]\n      context.dispatch(actions.getPresence(users))\n    },\n\n    /**\n     * Subscribe to another User's presence updates.\n     *\n     * When the User updates their presence information, the SDK will emit a\n     *    {@link presence.event:presence:change presence:change} event.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method subscribe\n     * @param {Array<string>|string} users A User ID or an array of User IDs.\n     */\n    subscribe (users) {\n      log.debug(API_LOG_TAG + 'presence.subscribe: ', users)\n      context.dispatch(actions.subscribePresence(users))\n    },\n\n    /**\n     * Unsubscribe from another User's presence updates.\n     *\n     * @public\n     * @static\n     * @memberof presence\n     * @requires presence\n     * @method unsubscribe\n     * @param {Array<string>|string} users A User ID or an array of User IDs.\n     */\n    unsubscribe (users) {\n      log.debug(API_LOG_TAG + 'presence.unsubscribe: ', users)\n      context.dispatch(actions.unsubscribePresence(users))\n    }\n  }\n  return { presence: presenceApi }\n}\n","import * as actionTypes from './actionTypes'\n\n// Libraries\nimport { handleActions } from 'redux-actions'\nimport { omit } from 'lodash/fp'\n\n// Helpers\nimport { subscriptionCodes } from '../../errors'\n\nconst reducers = {}\n\nreducers[actionTypes.UPDATE] = {\n  next (state) {\n    return {\n      ...state,\n      self: {\n        ...state.self,\n        loading: true,\n        error: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.UPDATE_FINISH] = {\n  next (state, action) {\n    const result = {\n      ...state,\n      self: {\n        loading: false,\n        error: false,\n        status: action.payload.status,\n        activity: action.payload.activity\n      }\n    }\n    if (action.payload.note) {\n      result.self.note = action.payload.note\n    }\n    return result\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      self: {\n        ...state.self,\n        loading: false,\n        error: action.payload\n      }\n    }\n  }\n}\n\nreducers[actionTypes.GET] = {\n  next (state, { payload: userIds }) {\n    const users = { ...state.users }\n    for (const userId of userIds) {\n      users[userId] = {\n        userId,\n        loading: true\n      }\n    }\n    return { ...state, users }\n  }\n}\n\nreducers[actionTypes.GET_FINISH] = {\n  next (state, { payload }) {\n    if (!payload.presenceContact) {\n      return { ...state }\n    }\n\n    const users = {}\n    for (const contact of payload.presenceContact) {\n      const presenceObject = {}\n      presenceObject.userId = contact.presentityUserId\n      if (contact.presence && contact.presence.person) {\n        presenceObject.activity = contact.presence.person.activities.activityValue\n        presenceObject.status = contact.presence.person['overriding-willingness'].overridingWillingnessValue\n        presenceObject.note = contact.presence.person.activities.other\n      }\n      presenceObject.loading = false\n      users[contact.presentityUserId] = presenceObject\n    }\n    return {\n      ...state,\n      users: {\n        ...state.users,\n        ...users\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state\n    }\n  }\n}\n\nreducers[actionTypes.RECEIVED] = {\n  next (state, { payload }) {\n    return {\n      ...state,\n      users: {\n        ...state.users,\n        [payload.userId]: {\n          userId: payload.userId, // optimize for filtering by userId\n          status: payload.status,\n          activity: payload.activity,\n          note: payload.note,\n          loading: false\n        }\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SUBSCRIBE] = {\n  next (state, { payload }) {\n    // Payload could be a string (single userId) or array (multiple userIds)\n    if (!Array.isArray(payload)) {\n      payload = [payload]\n    }\n    const updatedUsers = Object.assign({}, state.users)\n    payload.forEach(userId => {\n      updatedUsers[userId] = {\n        userId,\n        loading: false,\n        isPending: true\n      }\n    })\n\n    return {\n      ...state,\n      users: updatedUsers\n    }\n  }\n}\n\nreducers[actionTypes.SUBSCRIBE_FINISH] = {\n  next (state, { payload }) {\n    const updatedUsers = Object.assign({}, state.users)\n    payload.presentityUserId.forEach(userId => {\n      updatedUsers[userId] = {\n        userId,\n        loading: false,\n        isPending: false\n      }\n    })\n\n    return {\n      ...state,\n      users: updatedUsers\n    }\n  },\n  throw (state, { payload }) {\n    const updatedUsers = Object.assign({}, state.users)\n    payload.presentityUserId.forEach(userId => {\n      delete updatedUsers[userId]\n    })\n\n    return {\n      ...state,\n      users: updatedUsers\n    }\n  }\n}\n\nreducers[actionTypes.UNSUBSCRIBE] = {\n  next (state, { payload }) {\n    // Payload could be a string (single userId) or array (multiple userIds)\n    if (!Array.isArray(payload)) {\n      payload = [payload]\n    }\n    const updatedUsers = Object.assign({}, state.users)\n    payload.forEach(userId => {\n      updatedUsers[userId] = {\n        userId,\n        loading: false,\n        isPending: true\n      }\n    })\n\n    return {\n      ...state,\n      users: updatedUsers\n    }\n  }\n}\n\nreducers[actionTypes.UNSUBSCRIBE_FINISH] = {\n  next (state, { payload }) {\n    return {\n      ...state,\n      users: omit(payload.presentityUserId, state.users)\n    }\n  },\n  throw (state, { payload }) {\n    let updatedUsers = Object.assign({}, state.users)\n    if (payload.code === subscriptionCodes.CPAAS_SERVICE_UNSUB_FAIL) {\n      // Remove the userId from state\n      updatedUsers = omit(payload.presentityUserId, updatedUsers)\n    } else {\n      // Update the userId in state\n      if (payload.presentityUserId && payload.presentityUserId.length > 0) {\n        payload.presentityUserId.forEach(userId => {\n          updatedUsers[userId] = {\n            userId,\n            loading: false,\n            isPending: false\n          }\n        })\n      }\n    }\n\n    return {\n      ...state,\n      users: updatedUsers\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, { self: {}, users: {} })\nexport default reducer\n","// Presence plugin.\nimport * as actionTypes from '../interface/actionTypes'\nimport * as actions from '../interface/actions'\nimport { updatePresenceRequest, watchPresenceRequest } from './requests'\nimport { getAllPresence } from '../interface/selectors'\n\n// Other plugins.\nimport { getPlatform, getRequestInfo } from '../../auth/interface/selectors'\nimport { NOTIFICATION_RECEIVED } from '../../notifications/interface/actionTypes'\n// Libraries.\nimport { put, call, select, takeEvery } from 'redux-saga/effects'\n// Helpers\nimport BasicError, { presenceCodes } from '../../errors'\n\n// Constants\nimport { ACTIVITY, STATUS } from './constants'\nimport { platforms } from '../../constants'\n\n// Logs\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('PRESENCE')\n\n/**\n * Entry to update user(s) presence.\n * @method presenceUpdateSaga\n */\nexport function * presenceUpdateSaga () {\n  yield takeEvery(actionTypes.UPDATE, updatePresence)\n}\n\n/**\n * Entry to get users(s) presence.\n * @method presenceGetSaga\n */\nexport function * presenceGetSaga () {\n  yield takeEvery(actionTypes.GET, getPresence)\n}\n\n/**\n * Entry to Subscribe for user(s) presence.\n * @method presenceSubscribeSaga\n */\nexport function * presenceSubscribeSaga () {\n  yield takeEvery(actionTypes.SUBSCRIBE, subscribePresence)\n}\n\n/**\n * Entry to Unsubscribe from the user(s) presence.\n * @method presenceUnsubscribeSaga\n */\nexport function * presenceUnsubscribeSaga () {\n  yield takeEvery(actionTypes.UNSUBSCRIBE, unsubscribePresence)\n}\n\n/**\n * Entry to presence notification message.\n * @method presenceReceivedSaga\n */\nexport function * presenceReceivedSaga () {\n  yield takeEvery(\n    action =>\n      action.type === NOTIFICATION_RECEIVED &&\n      action.payload.notificationMessage &&\n      action.payload.notificationMessage.eventType === 'presenceWatcher',\n    receivePresence\n  )\n}\n\n/**\n * Link saga for updating user(s) Presence .\n * @method updatePresence\n * @param {Object} payload\n */\nfunction * updatePresence ({ payload }) {\n  // Verify that the status value is a valid\n  if (Object.values(STATUS).indexOf(payload.status) === -1) {\n    log.debug('Invalid presence status present.')\n    yield put(\n      actions.updatePresenceFinish({\n        error: new BasicError({\n          code: presenceCodes.INVALID_STATUS,\n          message: 'Invalid status in presence update request.'\n        })\n      })\n    )\n    return\n  }\n\n  // Verify that the activity value is a valid\n  if (Object.values(ACTIVITY).indexOf(payload.activity) === -1) {\n    log.debug('Invalid presence activity present.')\n    yield put(\n      actions.updatePresenceFinish({\n        error: new BasicError({\n          code: presenceCodes.INVALID_ACTIVITY,\n          message: 'Invalid activity in presence update request.'\n        })\n      })\n    )\n    return\n  }\n\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  requestInfo.version = platform === platforms.UC ? 1 : requestInfo.version\n  const res = yield call(updatePresenceRequest, payload, requestInfo)\n  if (res instanceof Error) {\n    log.debug(`Failed to update presence. Error is: ${res}`)\n    yield put(actions.updatePresenceFinish(res))\n  } else {\n    log.debug('Successfully updated presence.')\n    yield put(actions.updatePresenceFinish(payload))\n  }\n}\n/**\n * Link saga for getting the presence updates one time only for the user(s).\n * @method getPresence\n */\nfunction * getPresence ({ payload }) {\n  const users = Array.isArray(payload) ? payload : [payload]\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  requestInfo.version = platform === platforms.UC ? 1 : requestInfo.version\n  const res = yield call(watchPresenceRequest, users, 'get', requestInfo)\n  yield put(actions.getPresenceFinish(res))\n}\n\n/**\n * Link saga for Handling subscribing to another users(s) presence.\n * @method subscribePresence\n */\nfunction * subscribePresence ({ payload }) {\n  const users = Array.isArray(payload) ? payload : [payload]\n  log.info(`Subscribing to the user(s) ${users} presence.`)\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  requestInfo.version = platform === platforms.UC ? 1 : requestInfo.version\n  // To start watching for presence updates for the subscribed user(s)\n  const res = yield call(watchPresenceRequest, users, 'watch', requestInfo)\n  if (!(res instanceof Error)) {\n    log.info(`Finished subscribing to user(s): ${users} with status code: ${res.presenceWatcherResponse.statusCode}`)\n  } else {\n    log.info(`Failed to subscribe to users(s): ${users}. ${res.message}`)\n  }\n  res.presentityUserId = users\n  yield put(actions.subscribePresenceFinish(res))\n}\n\n/**\n * Link saga for Handling unsubscribing the user(s) presence.\n * User will not be able to receive presence updates of the unsubscribed user.\n * @method unsubscribePresence\n */\nfunction * unsubscribePresence ({ payload }) {\n  const users = Array.isArray(payload) ? payload : [payload]\n  log.info(`UnSubscribing to the user(s) ${users} presence.`)\n  const requestInfo = yield select(getRequestInfo)\n  const platform = yield select(getPlatform)\n  requestInfo.version = platform === platforms.UC ? 1 : requestInfo.version\n  // To stop user from getting updates of the unsubscribe user(s) presence.\n  const res = yield call(watchPresenceRequest, users, 'stopwatch', requestInfo)\n  if (!(res instanceof Error)) {\n    log.info(`Finished unSubscribing to user(s): ${users} with status code: ${res.presenceWatcherResponse.statusCode}`)\n  } else {\n    log.info(`Failed to unsubscribe to users(s): ${users}. ${res.message}`)\n  }\n  yield put(actions.unsubscribePresenceFinish(res))\n}\n\n/**\n * Link receivePresence saga.\n * Handles the presence info received from the notification message.\n * @method receivePresence\n * @param {Object} wsAction\n */\nfunction * receivePresence (wsAction) {\n  const params = wsAction.payload.notificationMessage.presenceWatcherNotificationParams\n  log.info(`Received notification of the user(s): ${params.name} present presence.`)\n\n  const users = yield select(getAllPresence)\n\n  if (users[params.name] && !users[params.name].isPending) {\n    const presence = {\n      userId: params.name,\n      activity: params.activity,\n      status: params.status,\n      note: params.note\n    }\n    yield put(actions.presenceReceived(presence))\n  }\n}\n","// Request\nimport request from '../../request/effects'\n// Logs\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('PRESENCE')\n\nexport function * updatePresenceRequest ({ status, activity, note }, requestInfo) {\n  const url = `${requestInfo.baseURL}/rest/version/${requestInfo.version}/user/${requestInfo.username}/presence`\n\n  const data = { status, activity }\n  if (note) {\n    data.note = note\n  }\n  const body = JSON.stringify({ presenceRequest: data })\n\n  const method = 'POST'\n\n  const response = yield request({ url, body, method })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.presenceResponse\n      log.debug(`Failed to update presence with status code ${statusCode}.`)\n\n      // TODO: Proper error.\n      return new Error(`Failed to update presence with status code ${statusCode}.`)\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Update presence request failed: ${message}.`)\n\n      // TODO: Proper error.\n      return new Error(`Update presence request failed: ${message}.`)\n    }\n  } else {\n    if (response.payload.body.presenceResponse.statusCode === 0) {\n      return true // success!\n    }\n    return new Error('Failed to update presence. Code: ' + response.payload.body.presenceResponse.statusCode + '.')\n  }\n}\n\n/**\n * Make a request to the presenceWatcher resource\n * @param  {array<User>}  users  a lits of users for the watch request\n * @param  {string}       action watch     Starts watching the presence updates\n *                                         for the users in the users array.\n *                               stopwatch Stops watching the presence updates\n *                                         for the users in the users array.\n *                               get       Gets the presence updates one time\n *                                         only for the users in the users array.\n */\nexport function * watchPresenceRequest (users, action, requestInfo) {\n  const url = `${requestInfo.baseURL}/rest/version/${requestInfo.version}/user/${requestInfo.username}/presenceWatcher`\n\n  const body = JSON.stringify({\n    presenceWatcherRequest: {\n      userList: users,\n      action\n    }\n  })\n\n  const method = 'POST'\n\n  const response = yield request({ url, method, body })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.presenceWatcherResponse\n      log.debug(`Failed to watch presence with status code ${statusCode}.`)\n\n      // TODO: Proper error.\n      return new Error(`Failed to watch presence with status code ${statusCode}.`)\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Watch presence request failed: ${message}.`)\n\n      // TODO: Proper error.\n      return new Error(`Watch presence request failed: ${message}.`)\n    }\n  } else {\n    if (response.payload.body.presenceWatcherResponse.statusCode === 0) {\n      return response.payload.body // success!\n    }\n    return new Error(\n      'Failed to execute presence operation (' +\n        action +\n        '). Code: ' +\n        response.payload.body.presenceResponse.statusCode +\n        '.'\n    )\n  }\n}\n","import * as actionTypes from './actionTypes'\nimport * as eventTypes from './eventTypes'\n\n// Helper function for error events.\nfunction presenceError (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.ERROR,\n      args: { error: action.payload }\n    }\n  }\n}\n\nconst eventsMap = {}\n\neventsMap[actionTypes.RECEIVED] = action => ({\n  type: eventTypes.RECEIVED,\n  args: {\n    userId: action.payload.userId,\n    status: action.payload.status,\n    activity: action.payload.activity,\n    note: action.payload.note\n  }\n})\n\neventsMap[actionTypes.UPDATE_FINISH] = action => {\n  if (action.error) {\n    return presenceError(action)\n  } else {\n    return {\n      type: eventTypes.SELF_CHANGE\n    }\n  }\n}\n\neventsMap[actionTypes.GET_FINISH] = action => {\n  if (action.error) {\n    return presenceError(action)\n  } else {\n    return {\n      type: eventTypes.RECEIVED,\n      args: {\n        userId: action.payload.userId,\n        status: action.payload.status,\n        activity: action.payload.activity,\n        note: action.payload.note\n      }\n    }\n  }\n}\n\neventsMap[actionTypes.SUBSCRIBE_FINISH] = action => {\n  if (action.error) {\n    return presenceError(action)\n  } else {\n    return {\n      type: eventTypes.SUBSCRIBE,\n      args: {\n        userIds: action.payload.presentityUserId\n      }\n    }\n  }\n}\n\neventsMap[actionTypes.UNSUBSCRIBE_FINISH] = action => {\n  if (action.error) {\n    return presenceError(action)\n  } else {\n    return {\n      type: eventTypes.UNSUBSCRIBE,\n      args: {\n        userIds: action.payload.presentityUserId\n      }\n    }\n  }\n}\n\n// TODO: Should have events to notify of successful operations for these actions.\neventsMap[actionTypes.CREATE_PRESENCE_LIST_FINISH] = presenceError\n\nexport default eventsMap\n","/**\n * A presence update about a subscribed user has been received.\n *\n * This event is generated as a result of {@link presence.fetch} or {@link presence.update} operations.\n *\n * For the latter operation, the current user receives a presence update of another user that the current user is subscribed to.\n *\n * The changed information can be retrieved using the {@link presence.get}\n *    API.\n *\n * @public\n * @memberof presence\n * @requires presence\n * @event presence:change\n * @param {Object} params A presence object containing data.\n * @param {string} params.userId The ID of the user.\n * @param {string} params.status The presence status of the user.\n * @param {string} params.activity The activity of the user.\n * @param {string} params.note A custom note provided by the user.\n */\nexport const RECEIVED = 'presence:change'\n\n/**\n * The current user's presence information has changed.\n *\n * The changed information can be retrieved using the {@link presence.getSelf}\n *    API.\n *\n * @public\n * @memberof presence\n * @requires presence\n * @event presence:selfChange\n */\nexport const SELF_CHANGE = 'presence:selfChange'\n\n/**\n * An update (as a result of subscribing to a specific user's presence) has been received.\n *\n * @public\n * @memberof presence\n * @requires presence\n * @event presence:subscribe\n * @param {Object} params A subscription object containing data.\n * @param {Array<string>} params.userIds The ID(s) of the user(s) whose presence needs to be watched.\n */\nexport const SUBSCRIBE = 'presence:subscribe'\n\n/**\n * An update (as a result of unsubscribing to a specific user's presence) has been received.\n *\n * @public\n * @memberof presence\n * @requires presence\n * @event presence:unsubscribe\n * @param {Object} params A subscription object containing data.\n * @param {Array<string>} params.userIds The ID(s) of the user(s) whose presence no longer requires to be watched.\n */\nexport const UNSUBSCRIBE = 'presence:unsubscribe'\n\n/**\n * An error occurred with presence.\n *\n * @public\n * @memberof presence\n * @requires presence\n * @event presence:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const ERROR = 'presence:error'\n","// Sip Events plugin.\nimport pluginInterface from './interface'\nimport * as sagas from './sagas'\nimport events from './interface/events'\n\n// Other plugins.\nimport { mapEvents } from '../events/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { values } from 'lodash/fp'\n\n/**\n * Sip Events Plugin Factory.\n * @method sipEvents\n * @return {Object} Sip Events plugin.\n */\nexport default function sipEvents () {\n  const { name, api, reducer } = pluginInterface\n  const capabilities = ['sipEvents']\n\n  function * init () {\n    yield put(mapEvents(events))\n  }\n\n  return {\n    name,\n    init,\n    api,\n    reducer,\n    capabilities,\n    sagas: values(sagas)\n  }\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducer'\n\nconst name = 'sipEvents'\n\nexport default {\n  name,\n  api,\n  reducer\n}\n","/* eslint-disable no-warning-comments */\n/**\n *  The SIP Events feature allows an application to communicate with a SIP network integrated\n *      with their Kandy Link instance. The SIP network may generate custom events intended\n *      for an application, which can be handled with the SDK's `sip` namespace.\n *\n * Usage of SIP Events is dependent on your Kandy Link instance. The types of SIP Events can\n *    be different based on configurations and components, often being part of a custom\n *    solution. As such, the SIP Events feature is presented in a generic manner to be\n *    flexible for any possible events.\n *\n * An example of a common SIP event is \"SIP presence\". When a user is connected to a SIP phone,\n *    the network may generate \"phone presence\" events when the user starts and ends a call\n *    (eg. 'On Call', 'Available'). Applications can subscribe to receive these events for\n *    specific users.\n *\n * A SIP event may either be solicited or unsolicited. Solicited events, such as the \"presence\"\n *    example above, requires the application to subscribe for the event. See the\n *    {@link sip.subscribe sip.subscribe API} for more information about solicited events.\n *    Unsolicited events have no prerequisites for being received.\n *\n * @public\n * @requires sipEvents\n * @namespace sip\n */\n/* eslint-enable no-warning-comments */\n\nimport { getSipEventInfo } from './selectors'\nimport * as actions from './actions'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('SIPEVENTS')\n\n/**\n * Sip Events API.\n * @method api\n * @param  {Object} $0\n * @param  {Function} $0.dispatch Redux dispatch.\n * @param  {Function} $0.getState Redux getState.\n * @return {Object} Sip Events' plugin API.\n */\nexport default function api ({ dispatch, getState }) {\n  var api = {\n    /**\n     * Creates a subscription for a SIP event.\n     *\n     * A subscription is required to receive SIP notifications for solicited events. Before\n     *    creating a SIP subscription, the service for the event type must have been\n     *    provisioned as part of the user subscription using the {@link services.subscribe}\n     *    API.\n     *\n     * Only one SIP subscription per event type can exist at a time. A subscription can\n     *    watch for events from multiple users at once. Users can be added to or removed\n     *    from a subscription using the {@link sip.update sip.update} API at any time.\n     *\n     * The SDK will emit a {@link sip.event:sip:subscriptionChange sip:subscriptionChange}\n     *    event when the operations completes. The {@link sip.getDetails} API can be used\n     *    to retrieve the current information about a subscription.\n     *\n     * The SDK will emit a {@link sip.event:sip:eventsChange sip:eventsChange} event when\n     *    a SIP event is received.\n     * @public\n     * @static\n     * @method subscribe\n     * @requires sipEvents\n     * @memberof sip\n     * @param  {string} eventType The name of the SIP event.\n     * @param  {Array<string>} subscribeUserList The list of users to receive events about.\n     * @param  {string} clientCorrelator Unique identifier for a client device.\n     * @param  {Array<call.CustomParameter>} [customParameters] Custom SIP header parameters for the SIP backend.\n     * @example\n     * // Provision the service for the specific SIP event during user subscription.\n     * //   This is required before a SIP subscription for the event can be created.\n     * const services = ['call', 'event:presence', ...]\n     * client.services.subscribe(services)\n     *\n     * // Subscribe to receive SIP presence events from two users.\n     * client.sip.subscribe('event:presence', ['userOne@example.com', 'userTwo@example.com'], 'clientId123')\n     *\n     * // Subscribe for SIP events with a custom parameter.\n     * const customParameters = [{\n     *    name: 'X-nt-GUID',\n     *    value: 'GUID123abc'\n     * }]\n     * client.sip.subscribe('event:presence', subscribeUserList, 'clientId123', customParameters)\n     */\n    subscribe (eventType, subscribeUserList, clientCorrelator, customParameters = []) {\n      log.debug(API_LOG_TAG + 'sip.subscribe: ', eventType, subscribeUserList, clientCorrelator, customParameters)\n      dispatch(actions.sipEventSubscribe(eventType, subscribeUserList, clientCorrelator, customParameters))\n    },\n\n    /**\n     * Updates an existing SIP event subscription.\n     *\n     * Allows for adding or removing users from the subscription, and for changing the\n     *    custom parameters of the subscription.\n     *\n     * The SDK will emit a {@link sip.event:sip:subscriptionChange sip:subscriptionChange}\n     *    event when the operations completes. The {@link sip.getDetails} API can be used\n     *    to retrieve the current information about a subscription.\n     * @public\n     * @static\n     * @method update\n     * @requires sipEvents\n     * @memberof sip\n     * @param  {string} eventType The name of the SIP event.\n     * @param  {Object} userLists\n     * @param  {Array<string>}  userLists.subscribeUserList List of users to add to the subscription.\n     * @param  {Array<string>}  userLists.unsubscribeUserList List of users to remove from the subscription. If all users are removed, the event subscription will be deleted.\n     * @param  {Array<call.CustomParameter>} [customParameters] Custom SIP header parameters for the SIP backend.\n     * @example\n     * // Add a user to an existing subscription.\n     * const userLists = {\n     *    subscribedUserList: ['userThree@example.com']\n     * }\n     * client.sip.update('event:presence', userLists)\n     *\n     * // Simultaneously add and remove users from the subscription.\n     * const userLists = {\n     *    subscribedUserList: ['userThree@example.com'],\n     *    unsubscribeUserList: ['userOne@example.com']\n     * }\n     * client.sip.update('event:presence', userLists)\n     */\n    update (eventType, userLists, customParameters = []) {\n      log.debug(API_LOG_TAG + 'sip.update: ', eventType, userLists, customParameters)\n      dispatch(actions.sipEventUpdate(eventType, userLists, customParameters))\n    },\n\n    /**\n     * Deletes an existing SIP event subscription.\n     *\n     * The SDK will emit a {@link sip.event:sip:subscriptionChange sip:subscriptionChange}\n     *    event when the operations completes.\n     *\n     * Subscription details will no longer be available using the {@link sip.getDetails}\n     *    API after it has been unsubscribed from.\n     * @public\n     * @static\n     * @method unsubscribe\n     * @requires sipEvents\n     * @memberof sip\n     * @param  {string} eventType The name of the SIP event.\n     * @example\n     * // Delete a SIP subscription.\n     * client.sip.unsubscribe('event:presence')\n     */\n    unsubscribe (eventType) {\n      log.debug(API_LOG_TAG + 'sip.unsubscribe: ', eventType)\n      dispatch(actions.sipEventUnsubscribe(eventType))\n    },\n\n    /**\n     * Retrieve information about a SIP event subscription.\n     *\n     * The SDK will track which users are included as part of the subscription and\n     *    previous notifications received. Each subscription will include a unique ID.\n     * @public\n     * @static\n     * @method getDetails\n     * @requires sipEvents\n     * @memberof sip\n     * @param  {string} [eventType] The name of a SIP event. If not provided, will retrieve\n     *    information for all SIP subscriptions.\n     * @return {Object} SIP subscription information. If `eventType` was not provided, will\n     *    return an object namespaced by event types.\n     * @example\n     * // Retrieve information about a single SIP subscription.\n     * const { subscribedUsers, notifications } = client.sip.getDetails('event:presence')\n     *\n     * // Retrieve information about all current SIP subscriptions.\n     * const subscriptions = client.sip.getDetails()\n     * const { subscribedUsers, notifications } = subscriptions['event:presence']\n     */\n    getDetails (eventType) {\n      log.debug(API_LOG_TAG + 'sip.getDetails: ', eventType)\n      return getSipEventInfo(getState(), eventType)\n    }\n  }\n\n  // Namespace the API.\n  return { sip: api }\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\n\n// Libraries.\nimport { concat, omit, union, without } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.SIP_EVENT_SUBSCRIBE_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      // Add a new sip event section to state.\n      [action.payload.eventType]: {\n        sessionData: action.payload.sessionData,\n        subscribedUsers: action.payload.subscribedUsers\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SIP_EVENT_UPDATE_FINISH] = {\n  next (state, action) {\n    let subscribedUsers = state[action.payload.eventType].subscribedUsers\n    // Add the new subscribed users.\n    subscribedUsers = union(action.payload.subscribeUserList, subscribedUsers)\n    // Remove the unsubscribed users.\n    subscribedUsers = without(action.payload.unsubscribeUserList, subscribedUsers)\n\n    // Update the subscribed users for the sip event section.\n    if (subscribedUsers.length === 0) {\n      // If there are no subscribed users for this session, the session is deleted.\n      const newState = { ...state }\n      delete newState[action.payload.eventType]\n      return newState\n    } else {\n      return {\n        ...state,\n        [action.payload.eventType]: {\n          ...state[action.payload.eventType],\n          subscribedUsers\n        }\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SIP_EVENT_UNSUBSCRIBE_FINISH] = {\n  next (state, action) {\n    // Remove the specified sip event section.\n    return omit(action.payload.eventType, state)\n  }\n}\n\nreducers[actionTypes.SIP_EVENT_RECEIVED] = function (state, action) {\n  // Ensure everything is defined.\n  const eventInfo = state[action.payload.eventType] || {}\n  const notifications = eventInfo.notifications || []\n  // Concat the notification to the specified sip event section.\n  return {\n    ...state,\n    [action.payload.eventType]: {\n      ...state[action.payload.eventType],\n      notifications: concat(notifications, action.payload)\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","// Sip Events plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { getSipEventInfo } from './interface/selectors'\n\n// Other plugins.\nimport { getConnectionInfo, getPlatform } from '../auth/interface/selectors'\nimport { getCallByWrtcsSessionId } from '../call/interfaceNew/selectors'\nimport { getSubscriptionInfo, getSubscribedServices } from '../subscription/interface/selectors'\nimport { NOTIFICATION_RECEIVED } from '../notifications/interface/actionTypes'\nimport request from '../request/effects'\nimport BasicError, { sipEventCodes } from '../errors'\n\n// Libraries.\nimport { put, race, select, spawn, take, delay } from 'redux-saga/effects'\n\n// Logs\nimport { logManager } from '../logs'\nimport { includes } from 'lodash/fp'\n\n// Constants\nimport { platforms } from '../constants'\n\n// Get the logger\nconst log = logManager.getLogger('SIPEVENTS')\n\n/**\n * Saga for subscribing to specified Sip Events.\n * @method sipEventSubscribe\n */\nexport function * sipEventSubscribe () {\n  while (true) {\n    const action = yield take(actionTypes.SIP_EVENT_SUBSCRIBE)\n    // TODO: Have the client correlator be provided as a config, not through the API.\n    log.debug(`Subscribing for sip ${action.payload.eventType}.`, action.payload.clientCorrelator)\n\n    // Determine if the user is subscribed to the specified sip event.\n    const subscribedServices = yield select(getSubscribedServices)\n\n    const sipEvents = subscribedServices.filter(service => service.startsWith('event:'))\n\n    if (!includes(action.payload.eventType, sipEvents)) {\n      log.info(`Cannot subscribe to sip ${action.payload.eventType}; service not provisioned during user subscription.`)\n      yield put(\n        actions.sipEventSubscribeFinish({\n          error: new BasicError({\n            code: sipEventCodes.NOT_PROVISIONED,\n            message: 'Cannot subscribe to sip event; service was not provisioned during user subscription.'\n          })\n        })\n      )\n      continue\n    }\n\n    // Use the same subscription duration as the user subscription.\n    const { expires } = yield select(getSubscriptionInfo)\n\n    const platform = yield select(getPlatform)\n    let { server, username, token, accessToken } = yield select(getConnectionInfo)\n\n    // TODO: UC should store it's token the same way as Link.\n    if (platform === platforms.UC && !token) {\n      token = accessToken\n    }\n\n    const requestOptions = {}\n    requestOptions.method = 'POST'\n\n    requestOptions.url =\n      `${server.protocol}://${server.server}:${server.port}/` +\n      `rest/version/${server.version}/` +\n      `user/${username}/` +\n      'eventSubscription'\n\n    requestOptions.body = {\n      eventSubscriptionRequest: {\n        subscribeUserList: action.payload.subscribeUserList,\n        clientCorrelator: action.payload.clientCorrelator,\n        eventType: action.payload.eventType,\n        expires\n      }\n    }\n    if (action.payload.customParameters.length) {\n      requestOptions.body.eventSubscriptionRequest.customParameters = action.payload.customParameters\n    }\n    requestOptions.body = JSON.stringify(requestOptions.body)\n\n    const response = yield request(requestOptions)\n\n    if (response.error) {\n      let error\n      if (response.payload.body) {\n        // Handle errors from the server.\n        const { statusCode } = response.payload.body.eventSubscriptionResponse\n        log.info(`Failed to subscribe to sip event ${action.payload.eventType}, ` + `status code ${statusCode}`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message: `Failed to subscribe to sip event ${action.payload.eventType}, ` + `status code ${statusCode}`\n        })\n      } else {\n        // Handler errors from the request helper.\n        const { message } = response.payload.result\n        log.info(`SIP event subscription request failed: ${message}.`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message: `SIP event subscription request failed: ${message}.`\n        })\n      }\n\n      yield put(actions.sipEventSubscribeFinish({ error }))\n    } else {\n      log.info(`Successfully subscribed to sip event ${action.payload.eventType}.`)\n      const finishAction = actions.sipEventSubscribeFinish({\n        response: {\n          // Response payload includes: statusCode, expires, sessionData.\n          ...response.payload.body.eventSubscriptionResponse,\n          eventType: action.payload.eventType,\n          subscribedUsers: action.payload.subscribeUserList\n        }\n      })\n      // Spawn a non-blocking saga to handle resubscriptions.\n      yield spawn(sipEventResub, finishAction)\n      yield put(finishAction)\n    }\n  }\n}\n\n/**\n * Saga to handle automatic resubscription to subscribed sip event.\n * @method sipEventResub\n * @param  {Object} action A SIP_EVENT_SUBSCRIBE_FINISH action.\n */\nfunction * sipEventResub (action) {\n  let shouldResub = true\n  while (shouldResub) {\n    const resubDelay = (action.payload.expires * 1000) / 2\n    // Wait for either the resub delay or an unsubscribe action.\n    const { expiry } = yield race({\n      expiry: delay(resubDelay),\n      unsubscribe: take(unsubAction => {\n        return (\n          unsubAction.type === actionTypes.SIP_EVENT_UNSUBSCRIBE_FINISH &&\n          unsubAction.payload.eventType === action.payload.eventType\n        )\n      })\n    })\n\n    // If the resubDelay has elapsed, attempt resubscribe.\n    if (expiry) {\n      const eventInfo = yield select(getSipEventInfo, action.payload.eventType)\n\n      if (eventInfo) {\n        log.info(`Re-subscribing for sip ${action.payload.eventType}.`)\n        yield put(actions.sipEventUpdate(action.payload.eventType, {}))\n      } else {\n        shouldResub = false\n      }\n    } else {\n      shouldResub = false\n    }\n  }\n}\n\n/**\n * Saga to update/resubscribe to a subscribed sip event.\n * @method sipEventUpdate\n */\nexport function * sipEventUpdate () {\n  while (true) {\n    const action = yield take(actionTypes.SIP_EVENT_UPDATE)\n    log.debug(`Updating sip event subscription: ${action.payload.eventType}.`)\n    const eventInfo = yield select(getSipEventInfo, action.payload.eventType)\n\n    if (!eventInfo) {\n      if (action.meta.isResub) {\n        // Don't need to resub, since we're not subscribed anymore.\n        // TODO: Tech-Debt: BasicError isn't very useful for these scenarios. The emitted event provides\n        //      the BasicError, except there's no (easy to use) info indicating _which_ event was being\n        //      acted on. BasicError needs the ability to provide extra information.\n        const error = new BasicError({\n          code: sipEventCodes.NOT_SUBSCRIBED,\n          message: `Cannot resubscribe for ${action.payload.eventType} subscription; user not subscribed.`\n        })\n        yield put(actions.sipEventUpdateFinish({ error }))\n      } else {\n        // Error: Not subscribed to this sip event. Cannot update.\n        const error = new BasicError({\n          code: sipEventCodes.NOT_SUBSCRIBED,\n          message: `Cannot update subscription for ${action.payload.eventType}; user not subscribed.`\n        })\n        yield put(actions.sipEventUpdateFinish({ error }))\n      }\n      continue\n    }\n\n    const platform = yield select(getPlatform)\n    let { server, username, token, accessToken } = yield select(getConnectionInfo)\n\n    // TODO: UC should store it's token the same way as Link.\n    if (platform === platforms.UC && !token) {\n      token = accessToken\n    }\n\n    const requestOptions = {}\n    requestOptions.method = 'PUT'\n\n    requestOptions.url =\n      `${server.protocol}://${server.server}:${server.port}/` +\n      `rest/version/${server.version}/` +\n      `user/${username}/` +\n      `eventSubscription/${eventInfo.sessionData}`\n\n    // Only include user lists in the request body if there are entries.\n    const userLists = {}\n    if (action.payload.subscribeUserList.length > 0) {\n      userLists.subscribeUserList = action.payload.subscribeUserList\n    }\n    if (action.payload.unsubscribeUserList.length > 0) {\n      userLists.unsubscribeUserList = action.payload.unsubscribeUserList\n    }\n\n    requestOptions.body = JSON.stringify({\n      eventSubscriptionRequest: {\n        ...userLists,\n        eventType: action.payload.eventType,\n        customParameters: action.payload.customParameters,\n        expires: eventInfo.expires\n      }\n    })\n\n    const response = yield request(requestOptions)\n\n    if (response.error) {\n      let error\n      if (response.payload.body) {\n        // Handle errors from the server.\n        const { statusCode } = response.payload.body.eventSubscriptionResponse\n        log.info(`Failed to update sip event subscription; ${action.payload.eventType}, ` + `status code ${statusCode}`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message:\n            `Failed to update to sip event subscription; ${action.payload.eventType}, ` + `status code ${statusCode}`\n        })\n      } else {\n        // Handler errors from the request helper.\n        const { message } = response.payload.result\n        log.info(`SIP event update subscription request failed: ${message}.`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message: `SIP event update subscription request failed: ${message}.`\n        })\n      }\n\n      yield put(actions.sipEventUpdateFinish({ error }))\n    } else {\n      log.info(`Updated sip event subscription: ${action.payload.eventType}.`)\n      yield put(\n        actions.sipEventUpdateFinish({\n          response: {\n            // Response payload includes statusCode, expires, sessionData.\n            ...response.payload.body.eventSubscriptionResponse,\n            eventType: action.payload.eventType,\n            subscribeUserList: action.payload.subscribeUserList || [],\n            unsubscribeUserList: action.payload.unsubscribeUserList || []\n          }\n        })\n      )\n    }\n  }\n}\n\n/**\n * Saga to unsubscribe from [all currently subscribed] sip events.\n * @method sipEventUnsubscribe\n */\nexport function * sipEventUnsubscribe () {\n  while (true) {\n    const action = yield take(actionTypes.SIP_EVENT_UNSUBSCRIBE)\n    log.debug(`Unsubscribing from sip event subscriptions: ${action.payload}.`)\n    const eventInfo = yield select(getSipEventInfo, action.payload)\n\n    if (!eventInfo) {\n      log.info(`Cannot unsubscribe from sip event ${action.payload}; no subscription exists.`)\n      const error = new BasicError({\n        code: sipEventCodes.NOT_SUBSCRIBED,\n        message: `Cannot unsubscribe from ${action.payload}; no subscription found.`\n      })\n      yield put(actions.sipEventUnsubscribeFinish({ error }))\n      continue\n    }\n\n    const platform = yield select(getPlatform)\n    let { server, username, token, accessToken } = yield select(getConnectionInfo)\n\n    // TODO: UC should store it's token the same way as Link.\n    if (platform === platforms.UC && !token) {\n      token = accessToken\n    }\n\n    const requestOptions = {}\n    requestOptions.method = 'DELETE'\n    requestOptions.responseType = 'none'\n\n    requestOptions.url =\n      `${server.protocol}://${server.server}:${server.port}/` +\n      `rest/version/${server.version}/` +\n      `user/${username}/` +\n      `eventSubscription/${eventInfo.sessionData}`\n\n    const response = yield request(requestOptions)\n\n    if (response.error) {\n      let error\n      if (response.payload.body) {\n        // Handle errors from the server.\n        const { statusCode } = response.payload.body.eventSubscriptionResponse\n        log.info(`Failed to unsubscribe from sip event ${action.payload.eventType}, ` + `status code ${statusCode}`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message: `Failed to unsubscribe from sip event ${action.payload.eventType}, ` + `status code ${statusCode}`\n        })\n      } else {\n        // Handler errors from the request helper.\n        const { message } = response.payload.result\n        log.info(`SIP event unsubscription request failed: ${message}.`)\n\n        error = new BasicError({\n          code: sipEventCodes.UNKNOWN_ERROR,\n          message: `SIP event unsubscription request failed: ${message}.`\n        })\n      }\n\n      yield put(actions.sipEventUnsubscribeFinish({ error }))\n    } else {\n      log.info(`Successfully unsubscribed from sip ${action.payload}.`)\n      yield put(\n        actions.sipEventUnsubscribeFinish({\n          response: {\n            eventType: action.payload\n          }\n        })\n      )\n    }\n  }\n}\n\n/**\n * Saga to handle received sip event notifications.\n * @method receiveEventNotify\n */\nexport function * receiveEventNotify () {\n  // Redux-saga take() pattern.\n  // Take notification actions that MAY be for sip events.\n  function receiveEventNotifyPattern (action) {\n    return (\n      action.type === NOTIFICATION_RECEIVED &&\n      action.payload.notificationMessage.hasOwnProperty('genericNotificationParams')\n    )\n  }\n\n  while (true) {\n    const action = yield take(receiveEventNotifyPattern)\n\n    // Determine which sip events the user is subscribed/connected for.\n    const subscribedServices = yield select(getSubscribedServices)\n\n    const sipEvents = subscribedServices.filter(service => service.startsWith('event:'))\n\n    const notification = action.payload.notificationMessage\n    const genericNotification = notification.genericNotificationParams\n    let callId = ''\n    /*\n     * Check if the notification's sessiondataType (if it exists) is of type call.\n     * If it is, then the sessionData field of the notification is a KandyLink Call ID.\n     * We can then map that KL Call ID to an SDK Call ID (if it exists) and attach that to the\n     * sip event we emit to the application.\n     */\n    if (genericNotification.sessiondataType && genericNotification.sessiondataType === 'call') {\n      // Look at our existing calls to find the SDK Call ID (if any) that corresponds to the sessiondata\n      const targetcall = yield select(getCallByWrtcsSessionId, genericNotification.sessionData)\n      if (!targetcall) {\n        log.warn('Call associated with received SIP notification cannot be found.')\n      } else {\n        callId = targetcall.id\n      }\n    }\n\n    /*\n     * Determine which scenario we received this notification in:\n     *  - Provisioned and subscribed: Application subscribed for the event during user subscription,\n     *      and created a SIP subscription for it.\n     *  - Provisioned, not subscribed: Application subscribed for the event during user subscription,\n     *      but the SDK does not have a SIP subscription for it.\n     *  - Unsolicited: Application has no user or SIP subscription for the event.\n     *\n     * We want to emit the notification in all scenarios, so this check is mainly for logging purposes.\n     */\n    if (includes(notification.eventType, sipEvents)) {\n      const eventInfo = yield select(getSipEventInfo, notification.eventType)\n\n      // Determine if there is a SIP subscription for this sip event in state.\n      if (eventInfo) {\n        // User subscribed to sip event, with a SIP subscription found in state.\n        log.info(`Received solicited SIP event notification of type ${notification.eventType}.`, notification)\n      } else {\n        // User subscribed to sip event, but no SIP subscription found.\n        //    This is assumed to be an edge-case where the SDK lost the SIP subscription info.\n        log.info(\n          `Received solicited SIP event notification for untracked event of type ${notification.eventType}.`,\n          notification\n        )\n      }\n    } else {\n      // User not subscribed to sip event.\n      log.info(`Received unsolicited SIP event notification of type ${notification.eventType}.`, notification)\n    }\n\n    // Always emit the notification to the application.\n    yield put(actions.sipEventReceived(notification, callId))\n  }\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\n// Helper function for formatting \"changed\" events.\nfunction subscriptionChange ({ change, action }) {\n  if (action.error) {\n    return {\n      type: eventTypes.EVENT_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.EVENT_SUBSCRIPTION_CHANGED,\n      args: {\n        eventType: action.payload.eventType,\n        change,\n        subscribedUsers: action.payload.subscribedUsers,\n        unsubscribedUsers: action.payload.unsubscribedUsers\n      }\n    }\n  }\n}\n\nvar events = {}\n\nevents[actionTypes.SIP_EVENT_SUBSCRIBE_FINISH] = function (action) {\n  return subscriptionChange({\n    change: 'newSubscription',\n    action\n  })\n}\n\nevents[actionTypes.SIP_EVENT_UPDATE_FINISH] = function (action) {\n  return subscriptionChange({\n    change: 'updateSubscription',\n    action\n  })\n}\n\nevents[actionTypes.SIP_EVENT_UNSUBSCRIBE_FINISH] = function (action) {\n  return subscriptionChange({\n    change: 'unsubscribe',\n    action\n  })\n}\n\nevents[actionTypes.SIP_EVENT_RECEIVED] = function (action) {\n  // Pass the notification straight through.\n  return {\n    type: eventTypes.EVENT_RECEIVED,\n    args: {\n      eventType: action.payload.event.eventType,\n      eventId: action.payload.event.eventId,\n      links: {\n        callId: action.payload.callId\n      },\n      event: action.payload.event\n    }\n  }\n}\n\nexport default events\n","/**\n * A change has occurred to a SIP subscription.\n *\n * This event can be emitted when a new SIP subscription is created ({@link sip.subscribe}\n *    API), an existing subscription is updated ({@link sip.update} API), or has been\n *    deleted ({@link sip.unsubscribe} API). The `change` parameter on the event indicates\n *    which scenario caused the event.\n *\n * When users are added or removed from a subscription through a new subscription or an update,\n *    the `subscribedUsers` and `unsubscribedUsers` parameters will indicate the users added\n *    and removed, respectively.\n *\n * The {@link sip.getDetails} API can be used to retrieve the current information about\n *    a subscription.\n *\n * @public\n * @requires sipEvents\n * @memberof sip\n * @event sip:subscriptionChange\n * @param {Object} params\n * @param {string} params.eventType The name of the SIP event.\n * @param {string} params.change The change operation that triggered the event.\n * @param {Array<string>} [params.subscribedUsers] List of users added to the subscription\n *    as part of the change.\n * @param {Array<string>} [params.unsubscribedUsers] List of users removed from the\n *    subscription as part of the change.\n */\nexport const EVENT_SUBSCRIPTION_CHANGED = 'sip:subscriptionChange'\n\n/**\n * An error has occurred during a SIP event operation.\n *\n * @public\n * @requires sipEvents\n * @memberof sip\n * @event sip:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n * @example\n * // Listen for the event being emitted.\n * client.on('sip:error', (params) => {\n *    // Handle the error based on the information.\n *    const { code, message } = params.error\n *    ...\n * })\n */\nexport const EVENT_ERROR = 'sip:error'\n\n/**\n * A SIP event notification has been received.\n *\n * The `event` parameter is the full notification received from the network. The format\n *    of the notification is dependant on its event type. The SDK does not do any\n *    pre-processing of this data.\n * @public\n * @requires sipEvents\n * @memberof sip\n * @event sip:eventsChange\n * @param {Object} params Information about the notification.\n * @param {string} params.eventType The name of the SIP event.\n * @param {string} params.eventId A unique ID for the event notification.\n * @param {Object} params.event The full event object.\n * @param {Object} params.links\n * @param {string} [params.links.callId] The ID of the call this SIP event links to.\n * @example\n * // Listen for the event being emitted.\n * client.on('sip:eventsChange', (params) => {\n *    // Gather the SIP info specific to the event.\n *    const sipInfo = params.event.genericNotificationParams\n *\n *    // Handle the data based on the event type.\n *    if (params.eventType === 'event:presence') {\n *        const { data, from } = sipInfo\n *        ...\n *    }\n * })\n */\nexport const EVENT_RECEIVED = 'sip:eventsChange'\n","import * as actionTypes from './interface/actions/actionTypes'\nimport * as userActions from './interface/actions/users'\nimport * as contactActions from './interface/actions/contacts'\nimport { getConnectionInfo, getPlatform } from '../auth/interface/selectors'\nimport pluginInterface from './interface'\nimport contactsEvents from './interface/events/contacts'\nimport usersEvents from './interface/events/users'\nimport { mapEvents } from '../events/interface/actions'\n// Request\nimport request from '../request/effects'\n\n// Logs\nimport { logManager } from '../logs'\nimport { all, call, take, put, select } from 'redux-saga/effects'\n\n// Constants\nimport { platforms } from '../constants'\n\n// Get the logger\nconst log = logManager.getLogger('USERS')\n\nconst { api, name, reducer } = pluginInterface\n\nconst capabilities = ['addContactAsFriend', 'selfInfoAsUserProfile', 'limitedSearch']\n\nexport default function usersLink () {\n  function * init () {\n    yield put(mapEvents({ ...contactsEvents, ...usersEvents }))\n  }\n\n  function * refreshContacts () {\n    while (true) {\n      const action = yield take([actionTypes.REFRESH_CONTACTS])\n      if (action.error) {\n        continue\n      }\n\n      const connection = yield select(getConnectionInfo)\n      const res = yield call(contactRequest, 'GET', connection)\n      if (res.error) {\n        yield put(contactActions.refreshContactsFinish({ error: res.error }))\n      } else {\n        var contacts = res.result.addressBookEntries ? res.result.addressBookEntries.map(localContactFromRemote) : []\n        yield put(\n          contactActions.refreshContactsFinish({\n            contacts: contacts\n          })\n        )\n      }\n    }\n  }\n\n  /**\n   * fetch a contact from the user's Personal Address Book.\n   *\n   * @return {Generator} [description]\n   */\n  function * fetchContact () {\n    while (true) {\n      const action = yield take([actionTypes.FETCH_CONTACT])\n\n      if (action.error) {\n        log.debug(action.error)\n      }\n\n      const connection = yield select(getConnectionInfo)\n      const res = yield call(contactRequest, 'GET', connection, `contacts/${action.payload}`)\n\n      if (res.error) {\n        const error = new Error(res.error)\n        yield put(contactActions.fetchContactFinish({ error }))\n      } else {\n        const contact = localContactFromRemote(res.result.addressBookEntries[0])\n        yield put(contactActions.fetchContactFinish({ contact }))\n      }\n    }\n  }\n\n  function * addContact () {\n    while (true) {\n      try {\n        // Wait for ADD_CONTACT action.\n        const action = yield take(actionTypes.ADD_CONTACT)\n\n        var contactData = {\n          addressBookRequest: {\n            addressBookEntries: [remoteContactFromLocal({ ...action.payload })]\n          }\n        }\n        const connection = yield select(getConnectionInfo)\n        const res = yield call(contactRequest, 'POST', connection, 'contacts/', JSON.stringify(contactData))\n        if (res.error) {\n          throw new Error(res.error)\n        } else {\n          const contact = localContactFromRemote(action.payload)\n          yield put(contactActions.addContactFinish({ contact }))\n        }\n      } catch (error) {\n        yield put(contactActions.addContactFinish({ error }))\n      }\n    }\n  }\n\n  function * removeContact () {\n    while (true) {\n      try {\n        // Wait for REMOVE_CONTACT action.\n        const action = yield take(actionTypes.REMOVE_CONTACT)\n        const connection = yield select(getConnectionInfo)\n        const res = yield call(contactRequest, 'DELETE', connection, 'contacts/' + encodeURIComponent(action.payload))\n\n        if (res.error) {\n          throw new Error(res.error)\n        }\n        yield put(contactActions.removeContactFinish({ contactId: action.payload }))\n      } catch (err) {\n        yield put(contactActions.removeContactFinish({ error: err }))\n      }\n    }\n  }\n\n  function * updateContact () {\n    while (true) {\n      try {\n        const action = yield take(actionTypes.UPDATE_CONTACT)\n        const { contact } = action.payload\n        const contactRestObject = remoteContactFromLocal({ ...contact })\n        var contactData = {\n          addressBookRequest: {\n            addressBookEntries: [contactRestObject]\n          }\n        }\n        const connection = yield select(getConnectionInfo)\n        const res = yield call(\n          contactRequest,\n          'PUT',\n          connection,\n          'contacts/' + contact.contactId,\n          JSON.stringify(contactData)\n        )\n        if (res.error) {\n          throw new Error(res.error)\n        }\n        yield put(contactActions.updateContactFinish({ contact }))\n      } catch (error) {\n        yield put(contactActions.updateContactFinish({ error }))\n      }\n    }\n  }\n\n  function * searchDirectory () {\n    while (true) {\n      // Wait for SEARCH_DIRECTORY action.\n      const action = yield take(actionTypes.SEARCH_DIRECTORY)\n\n      let type\n      const filters = action.payload.filters\n      // Look for first defined filter provided\n      for (const filter in filters) {\n        if (filters.hasOwnProperty(filter) && filters[filter]) {\n          type = filter\n          break\n        }\n      }\n      log.info(`Using criteria '${type}' with value '${filters[type]}' to search directory.`)\n\n      var body = {\n        searchCriteria: filters[type],\n        searchType: searchTypeInteger(type)\n      }\n      const connection = yield select(getConnectionInfo)\n      const res = yield call(getDirectory, connection, body)\n      if (res.error) {\n        const error = new Error(res.error)\n        yield put(userActions.searchDirectoryFinish({ error }))\n      } else {\n        var users = res.result.directoryItems || []\n        yield put(userActions.searchDirectoryFinish({ users: users.map(localUserFromRemote) }))\n      }\n    }\n  }\n\n  /**\n   * On-Premises fetchUser saga\n   * Performs the workflow of caching a user.\n   * @return {Generator} [description]\n   */\n  function * fetchUser () {\n    while (true) {\n      // Wait for FETCH_USER action.\n      const { payload: userId } = yield take(actionTypes.FETCH_USER)\n      var body = {\n        searchCriteria: userId,\n        searchType: searchTypeInteger('user_id')\n      }\n      const connection = yield select(getConnectionInfo)\n      const res = yield call(getDirectory, connection, body)\n      if (res.error) {\n        yield put(userActions.fetchUserFinish(new Error(res.error)))\n      } else {\n        if (res.result.directoryItems) {\n          yield put(userActions.fetchUserFinish(res.result.directoryItems[0]))\n        } else {\n          log.debug('Fetch user request was successful, but result was empty')\n        }\n      }\n    }\n  }\n\n  /**\n   * On-Premises getUserDetails saga.\n   * Performs the workflow of fetching user profile data for the currently logged in user.\n   * @method getUserDetails\n   */\n  function * fetchSelf () {\n    while (true) {\n      // Wait for a GET_USER_DETAILS action.\n      const action = yield take(actionTypes.FETCH_SELF_INFO)\n      const userData = {}\n\n      if (action.error) {\n        continue\n      }\n\n      const connection = yield select(getConnectionInfo)\n      // Fetch the user details\n      const { userProfile, currentLocale } = yield all({\n        userProfile: call(fetchSelfInfo, connection),\n        currentLocale: call(fetchUserLocale, connection)\n      })\n\n      // Set as much user data as possible, but log an error if any of our calls failed\n      if (!userProfile.error) {\n        userData.data = userProfile\n      } else {\n        log.debug('Error retrieving user profile information', userProfile.text)\n      }\n\n      if (!currentLocale.error) {\n        userData.currentLocale = currentLocale\n      } else {\n        log.debug('Error retrieving user locale', currentLocale.text)\n      }\n      userData.primaryContact = connection.username\n\n      yield put(userActions.fetchUserFinish(userData))\n    }\n  }\n\n  return {\n    sagas: [\n      refreshContacts,\n      addContact,\n      removeContact,\n      updateContact,\n      fetchContact,\n      searchDirectory,\n      fetchUser,\n      fetchSelf\n    ],\n    api,\n    name,\n    init,\n    reducer,\n    capabilities\n  }\n}\n\nexport function * contactRequest (method, conn, extraURL, body) {\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : conn.server.version\n  var url\n  if (extraURL) {\n    url = `${conn.server.protocol}://${conn.server.server}:${conn.server.port}/rest/version/${version}/user/${conn.username}/addressbook/${extraURL}`\n  } else {\n    url = `${conn.server.protocol}://${conn.server.server}:${conn.server.port}/rest/version/${version}/user/${conn.username}/addressbook`\n  }\n  const options = {\n    method: method\n  }\n  if (body) {\n    options.body = body\n  }\n\n  const response = yield request({ url, ...options })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      let statusCode, errorMessage\n      if (response.payload.body.addressBookResponse) {\n        statusCode = response.payload.body.addressBookResponse.statusCode\n      } else if (response.payload.body.message && response.payload.result.code) {\n        statusCode = response.payload.result.code\n        errorMessage = response.payload.body.message\n      }\n      log.debug(`Failed to search addressbook with status code ${statusCode}.`)\n      // TODO: Proper errors.\n      return {\n        error: new Error(`Failed to search addressbook; status ${statusCode}.\\n message ${errorMessage}`)\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Addressbook search request failed: ${message}`)\n      // TODO: Proper errors.\n      return {\n        error: new Error(`Addressbook search request failed: ${message}`)\n      }\n    }\n  } else if (response.payload.body && response.payload.body.addressBookResponse.statusCode === 0) {\n    return { result: response.payload.body.addressBookResponse || {} }\n  } else {\n    // Unknown case.\n    log.debug('Unknown error case for addressbook search.')\n    const err = new Error('Unknown error.')\n    return { error: err }\n  }\n}\n\n// see SPiDR 4.3 REST API Documentation - 12.11.3\nfunction searchTypeInteger (searchType) {\n  switch (searchType) {\n    case 'first_name':\n    case 'firstName':\n    case 'FIRSTNAME':\n      return 1\n    case 'last_name':\n    case 'lastName':\n    case 'LASTNAME':\n      return 2\n    case 'name':\n    case 'NAME':\n      return 3\n    case 'phone_number':\n    case 'phoneNumber':\n    case 'PHONENUMBER':\n      return 4\n    case 'user_id':\n    case 'userId':\n    case 'USERID':\n    case 'user_name':\n    case 'userName':\n    case 'USERNAME':\n      return 5\n  }\n}\n\nexport function * getDirectory (conn, params = {}) {\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : conn.server.version\n  var url = `${conn.server.protocol}://${conn.server.server}:${conn.server.port}/rest/version/${version}/user/${conn.username}/directory`\n\n  const queryParams = {}\n  if (params.searchType) {\n    queryParams.criteria = params.searchCriteria\n    queryParams.criteriaType = params.searchType\n  } else if (params.searchCriteria) {\n    queryParams.criteria = params.searchCriteria\n  }\n  const method = 'GET'\n\n  const response = yield request({ url, queryParams, method })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.directory\n      log.debug(`Failed to search directory with status code ${statusCode}.`)\n      // TODO: Proper errors.\n      return {\n        error: new Error(`Failed to search directory; status ${statusCode}.`)\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Directory search request failed: ${message}`)\n      // TODO: Proper errors.\n      return { error: new Error(`Directory search request failed: ${message}`) }\n    }\n  } else if (response.payload.body && response.payload.body.directory.statusCode === 0) {\n    // Request was successful.\n    return { result: response.payload.body.directory || {} }\n  } else {\n    // Unknown case.\n    log.debug('Unknown error case for directory search.')\n    const err = new Error('Unknown error.')\n    return { error: err }\n  }\n}\n\n/**\n * Fetch userProfileData from SPiDR with the provided connection info.\n * Compared to {@link user.fetch} API, this API retrieves additional user related information.\n *\n * @param  {Object}     connection Connection information for the platform in use.\n * @return {Object}            Fetch request's response, parsed.\n */\nexport function * fetchSelfInfo (connection) {\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : connection.server.version\n  var url = `${connection.server.protocol}://${connection.server.server}:${connection.server.port}/rest/version/${version}/user/${connection.username}/userProfileData`\n\n  var params = {\n    method: 'GET'\n  }\n\n  const response = yield request({ url, ...params })\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.userProfileData\n      log.debug(`Failed to fetch user details with status code ${statusCode}.`)\n      // TODO: Proper errors.\n      return {\n        error: true,\n        status: statusCode,\n        text: `Failed to fetch user details with status code ${statusCode}.`\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`User details fetch request failed: ${message}`)\n      // TODO: Proper errors.\n      return {\n        error: true,\n        text: `User details fetch request failed: ${message}`\n      }\n    }\n  } else if (\n    response.payload.body &&\n    response.payload.body.userProfileData &&\n    response.payload.body.userProfileData.statusCode === 0\n  ) {\n    // Request was successful.\n    return response.payload.body.userProfileData\n  } else {\n    // Unknown case.\n    log.debug('Unknown error case for user details fetch.')\n    return {\n      error: true,\n      text: 'Unknown error case fetching user details.'\n    }\n  }\n}\n\n/**\n * Fetch user locale information from SPiDR with the provided connection info.\n * @param  {Object}     connection Connection information for the platform in use.\n * @return {Object}            Fetch request's response.\n */\nexport function * fetchUserLocale (connection) {\n  const platform = yield select(getPlatform)\n  const version = platform === platforms.UC ? 1 : connection.server.version\n  const url = `${connection.server.protocol}://${connection.server.server}:${connection.server.port}/rest/version/${version}/localization`\n\n  var params = {\n    method: 'GET'\n  }\n\n  const response = yield request({ url, ...params })\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      log.debug('Failed to fetch user locale.')\n      // TODO: Proper errors.\n      return {\n        error: true,\n        text: 'Failed to fetch user locale .'\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`User locale fetch request failed: ${message}`)\n      // TODO: Proper errors.\n      return {\n        error: true,\n        text: `User locale fetch request failed: ${message}`\n      }\n    }\n  } else if (response.payload.body && response.payload.body.acceptLanguage) {\n    // Locale request was successful.\n    return response.payload.body.acceptLanguage\n  } else {\n    // Unknown case.\n    log.debug('Unknown error case for user locale fetch.')\n    return {\n      error: true,\n      text: 'Unknown error case fetching user locale.'\n    }\n  }\n}\n\n/**\n * remoteContactFromLocal\n *\n * At the time of development, `nickName` is the property by which contact resources are keyed in the back end. Since the manner in which a `nickName` is used and regarded in common practice suggests that it can be changed, we are exposing it as a property named `contactId` and informing developers that this is a unique property. This function is used to normalize the naming convention when preparing contact data to be sent for a REST request\n *\n * @param {Object} contact A contact object\n */\nfunction remoteContactFromLocal (contact) {\n  if ('contactId' in contact) {\n    contact.nickname = contact.contactId\n    delete contact.contactId\n  }\n  // We must remove all empty values, as the back end servicing Link does not permit them\n  for (const prop in contact) {\n    if (!contact[prop] || contact[prop].length === 0) {\n      delete contact[prop]\n    }\n  }\n  return contact\n}\n\n/**\n * localContactFromRemote\n *\n * Convert a contact object from the back end format used in REST calls, to the format maintained in the state\n *\n * @param {Object} contact A contact object\n */\nfunction localContactFromRemote (contact) {\n  if ('nickname' in contact) {\n    contact.contactId = contact.nickname\n    delete contact.nickname\n  }\n  return contact\n}\n\n/**\n * localUserFromRemote\n *\n * Converts a user object from the back end format used in REST calls, to the format maintained in the state. In particular, it ensures that the user object has a `userId` property, as this is the property by which users are keyed in our state.\n *\n * @param {Object} user A user object\n * @returns {Object} The user object\n */\nfunction localUserFromRemote (user) {\n  return {\n    ...user,\n    userId: user.primaryContact || user.userId\n  }\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a users plugin.\n * @type {string}\n */\nconst name = 'users'\n\n// Export the interface as a single object.\nexport default { name, api, reducer }\n","import usersAPI from './users'\nimport contactsAPI from './contacts'\n\n/**\n * Users API index.\n * APIs are organized by their namespacing.\n * @method api\n * @param {Object} context\n * @param {Function} context.dispatch The redux store's dispatch function.\n * @param {Function} context.getState The redux store's getState function.\n * @param {Object} context.primitives Primitive types designed for use in the SDK\n * @return {Object} The plugin's API object.\n */\nexport default function api (context) {\n  return {\n    contacts: contactsAPI(context),\n    user: usersAPI(context)\n  }\n}\n","// Users plugin.\nimport * as actions from '../actions/users'\nimport { getUser, getUsers } from '../selectors'\n\nimport { logManager, API_LOG_TAG } from '../../../logs'\nconst log = logManager.getLogger('USERS')\n\nexport default function usersAPI ({ dispatch, getState, primitives }) {\n  /**\n   * The 'user' namespace allows access to user information for users within the same domain.\n   *\n   * @public\n   * @namespace user\n   */\n\n  /**\n   * The User data object.\n   *\n   * @public\n   * @static\n   * @typedef {Object} User\n   * @memberof user\n   * @property {user.UserID} userId The User ID of the user.\n   * @property {string} emailAddress The email address of the user.\n   * @property {string} firstName The first name of the user.\n   * @property {string} lastName The last name of the user.\n   * @property {string} photoURL The URL to get the photo of the user.\n   * @property {string} buddy Whether the user is a \"buddy\". Values can be \"true\" or \"false\".\n   */\n\n  return {\n    /**\n     * Fetches information about a User.\n     *\n     * The SDK will emit a {@link user.event:users:change users:change}\n     *    event after the operation completes. The User's information will then\n     *    be available.\n     *\n     * Information about an available User can be retrieved using the\n     *    {@link user.get} API.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method fetch\n     * @param {string} userId The User ID of the user.\n     */\n    fetch (userId) {\n      log.debug(API_LOG_TAG + 'user.fetch: ', userId)\n      dispatch(actions.fetchUser(userId))\n    },\n\n    /**\n     * Fetches information about the current User from directory.\n     * Compared to {@link user.fetch} API, this API retrieves additional user related information.\n     *\n     * The SDK will emit a {@link user.event:users:change users:change}\n     *    event after the operation completes. The User's information will then\n     *    be available.\n     *\n     * Information about an available User can be retrieved using the\n     *    {@link user.get} API.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method fetchSelfInfo\n     * @requires selfInfoAsUserProfile\n     */\n    /**\n     * Fetches information about the current User from directory.\n     * This API is simply a shortcut for the {@link user.fetch user.fetch(getUserInfo().identity)} API.\n     *\n     * The SDK will emit a {@link user.event:users:change users:change}\n     *    event after the operation completes. The User's information will then\n     *    be available.\n     *\n     * Information about an available User can be retrieved using the\n     *    {@link user.get} API.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method fetchSelfInfo\n     * @requires selfInfoAsUserSearch\n     */\n    fetchSelfInfo () {\n      log.debug(API_LOG_TAG + 'user.fetchSelfInfo')\n      dispatch(actions.fetchSelfInfo())\n    },\n\n    /**\n     * Retrieves information about a User, if available.\n     *\n     * See the {@link user.fetch} and {@link user.search} APIs for details about\n     *    making Users' information available.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method get\n     * @param {user.UserID} userId The User ID of the user.\n     * @returns {user.User} The User object for the specified user.\n     */\n    get (userId) {\n      log.debug(API_LOG_TAG + 'user.get: ', userId)\n      return getUser(getState(), userId)\n    },\n\n    /**\n     * Retrieves information about all available Users.\n     *\n     * See the {@link user.fetch} and {@link user.search} APIs for details about\n     *    making Users' information available.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method getAll\n     * @returns {Array<user.User>} An array of all the User objects.\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'user.getAll')\n      return getUsers(getState())\n    },\n\n    /**\n     * Searches the domain's directory for Users.\n     *\n     * Directory searching only supports one filter. If multiple filters are provided, only one of the filters will be used for the search.\n     * A search with no filters provided will return all users.\n     *\n     * The SDK will emit a {@link user.event:directory:change directory:change}\n     *    event after the operation completes. The search results will be\n     *    provided as part of the event, and will also be available using the\n     *    {@link user.get} and {@link user.getAll} APIs.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method search\n     * @requires limitedSearch\n     * @param {Object} filters The filter options for the search.\n     * @param {user.UserID} [filters.userId] Matches the User ID of the user.\n     * @param {string} [filters.name] Matches the firstName or lastName.\n     * @param {string} [filters.firstName] Matches the firstName.\n     * @param {string} [filters.lastName] Matches the lastName.\n     * @param {string} [filters.userName] Matches the userName.\n     * @param {string} [filters.phoneNumber] Matches the phoneNumber.\n     */\n\n    /**\n     * Searches the domain's directory for Users.\n     *\n     * The SDK will emit a {@link user.event:directory:change directory:change}\n     *    event after the operation completes. The search results will be\n     *    provided as part of the event, and will also be available using the\n     *    {@link user.get} and {@link user.getAll} APIs.\n     *\n     * @public\n     * @static\n     * @memberof user\n     * @method search\n     * @requires advancedSearch\n     * @param {Object} filters The filter options for the search.\n     * @param {user.UserID} [filters.userId] Matches the User ID of the user.\n     * @param {string} [filters.name] Matches the firstName or lastName.\n     * @param {string} [filters.firstName] Matches the firstName.\n     * @param {string} [filters.lastName] Matches the lastName.\n     * @param {string} [filters.userName] Matches the userName.\n     * @param {string} [filters.phoneNumber] Matches the phoneNumber.\n     * @param {Object} [options] Sorting options.\n     * @param {string} [options.sortBy] The User property to sort the results by. This can be any of the above listed filters.\n     * @param {string} [options.order] Order in which results are returned. Can be either \"asc\" or \"desc\".\n     * @param {number} [options.max] The maximum number of results to return.\n     * @param {string} [options.next] The pointer for a chunk of results, which may be returned from a previous query.\n     */\n    search (filters = {}, options = {}) {\n      log.debug(API_LOG_TAG + 'user.search: ', filters, options)\n      dispatch(actions.searchDirectory(filters, options))\n    }\n  }\n}\n","// Users plugin.\nimport * as actions from '../actions/contacts'\nimport { getContact, getContacts } from '../selectors'\n\nimport { logManager, API_LOG_TAG } from '../../../logs'\n\nconst log = logManager.getLogger('USERS')\n\nexport default function contactsAPI ({ dispatch, getState, primitives }) {\n  /**\n   * The 'contacts' namespace allows users to store personal contacts to their account.\n   *\n   * @public\n   * @namespace contacts\n   */\n\n  return {\n    /**\n     * Add a contact to a user's personal address book.\n     * Will trigger the `contacts:new` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method add\n     * @requires addContactAsFriend\n     * @param {Object} contact The contact object.\n     * @param {string} contact.primaryContact The primary userId for the contact\n     * @param {string} contact.contactId The contact's unique contact ID\n     * @param {string} [contact.firstName] The contact's first name\n     * @param {string} [contact.lastName] The contact's last name\n     * @param {string} [contact.photoUrl] The URL address identifying location of user's picture\n     * @param {string} [contact.emailAddress] The contact's email address\n     * @param {string} [contact.homePhone] The contact's home phone number\n     * @param {string} [contact.workPhone] The contact's business phone number\n     * @param {string} [contact.mobilePhone] The contact's mobile phone number\n     * @param {string} [contact.conferenceURL] Conference URL and access code for this user's address book entry\n     * @param {string} [contact.fax] The user's fax number\n     * @param {string} [contact.pager] The user's pager number\n     * @param {string} [contact.groupList] The name of the contact list for which to add this contact to (\"friends\" by default)\n     * @param {boolean} [contact.friendStatus] Indicates whether or not the contact is a friend of the user\n     */\n    /**\n     * Add a contact to a user's personal address book.\n     * Will trigger the `contacts:new` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method add\n     * @requires addContactAsBuddy\n     * @param {Object} contact The contact object.\n     * @param {string} contact.primaryContact The primary userId for the contact\n     * @param {string} contact.contactId The contact's unique contact ID\n     * @param {string} [contact.firstName] The contact's first name\n     * @param {string} [contact.lastName] The contact's last name\n     * @param {string} [contact.email] The contact's email address\n     * @param {string} [contact.homePhoneNumber] The contact's home phone number\n     * @param {string} [contact.businessPhoneNumber] The contact's business phone number\n     * @param {string} [contact.mobilePhoneNumber] The contact's mobile phone number\n     * @param {string} [contact.list] The name of the contact list for which to add this contact to (\"friends\" by default)\n     * @param {boolean} [contact.buddy] Indicates whether or not the contact is a friend of the user\n     */\n    add (contact) {\n      log.debug(API_LOG_TAG + 'contacts.add: ', contact)\n      dispatch(actions.addContact(contact))\n    },\n\n    /**\n     * Retrieves local information about a contact.\n     *\n     * @public\n     * @memberof contacts\n     * @method get\n     * @param {string} contactId The unique contact ID of the contact.\n     * @return {Object} Contact information.\n     */\n    get (contactId) {\n      log.debug(API_LOG_TAG + 'contacts.get: ', contactId)\n      return getContact(getState(), contactId)\n    },\n\n    /**\n     * Retrieves local information about all contacts.\n     *\n     * @public\n     * @memberof contacts\n     * @method getAll\n     * @return {Array} List of contact information.\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'contacts.getAll')\n      return getContacts(getState())\n    },\n\n    /**\n     * Refreshes the local information about contacts. This will get new contacts from the platform.\n     * Will trigger the `contacts:change` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method refresh\n     */\n    refresh () {\n      log.debug(API_LOG_TAG + 'contacts.refresh')\n      dispatch(actions.refreshContacts())\n    },\n\n    /**\n     * Remove a contact from a personal address book.\n     * Will trigger the `contacts:change` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method remove\n     * @param  {string} id The Id of the contact that will be removed.\n     */\n    remove (id) {\n      log.debug(API_LOG_TAG + 'contacts.remove: ', id)\n      dispatch(actions.removeContact(id))\n    },\n\n    /**\n     * Update a contact from the user's personal address book.\n     * Will trigger the `contacts:change` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method update\n     * @requires addContactAsFriend\n     * @param {Object} contact The contact object.\n     * @param {string} contact.primaryContact The primary userId for the contact\n     * @param {string} contact.contactId The contact's unique contact ID\n     * @param {string} [contact.firstName] The contact's first name\n     * @param {string} [contact.lastName] The contact's last name\n     * @param {string} [contact.photoUrl] The URL address identifying location of user's picture\n     * @param {string} [contact.emailAddress] The contact's email address\n     * @param {string} [contact.homePhone] The contact's home phone number\n     * @param {string} [contact.workPhone] The contact's business phone number\n     * @param {string} [contact.mobilePhone] The contact's mobile phone number\n     * @param {string} [contact.conferenceURL] Conference URL and access code for this user's address book entry\n     * @param {string} [contact.fax] The user's fax number\n     * @param {string} [contact.pager] The user's pager number\n     * @param {string} [contact.groupList] The name of the contact list for which to add this contact to (\"friends\" by default)\n     * @param {boolean} [contact.friendStatus] Indicates whether or not the contact is a friend of the user\n     */\n    /**\n     * Update a contact from the user's personal address book.\n     * Will trigger the `contacts:change` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method update\n     * @requires addContactAsBuddy\n     * @param {Object} contact The contact object.\n     * @param {string} contact.primaryContact The primary userId for the contact\n     * @param {string} contact.contactId The contact's unique contact ID\n     * @param {string} [contact.firstName] The contact's first name\n     * @param {string} [contact.lastName] The contact's last name\n     * @param {string} [contact.email] The contact's email address\n     * @param {string} [contact.homePhoneNumber] The contact's home phone number\n     * @param {string} [contact.businessPhoneNumber] The contact's business phone number\n     * @param {string} [contact.mobilePhoneNumber] The contact's mobile phone number\n     * @param {string} [contact.list] The name of the contact list for which to add this contact to (\"friends\" by default)\n     * @param {boolean} [contact.buddy] Indicates whether or not the contact is a friend of the user\n     */\n    update (contact) {\n      let objectToUse\n      if (typeof contact === 'string' || contact instanceof String) {\n        log.warn(\n          API_LOG_TAG +\n            'contacts.update: Call to update(contactId, contact) has been deprecated and so it will be removed. Consider using: update(contact), instead.'\n        )\n        // second argument is supposed to be actual contact obj\n        objectToUse = arguments[1]\n      } else {\n        // Assume first param is the actual contact obj\n        objectToUse = contact\n      }\n      log.debug(API_LOG_TAG + 'contacts.update: ', objectToUse)\n      dispatch(actions.updateContact(objectToUse))\n    },\n\n    /**\n     * Fetch a contact from the user's personal address book.\n     * Will trigger the `contacts:change` event.\n     *\n     * @public\n     * @memberof contacts\n     * @method fetch\n     * @param  {string} contactId The unique contact ID of the contact.\n     */\n    fetch (contactId) {\n      log.debug(API_LOG_TAG + 'contacts.fetch: ', contactId)\n      dispatch(actions.fetchContact(contactId))\n    }\n  }\n}\n","import contactsReducers from './contacts'\nimport usersReducers from './users'\nimport { handleActions } from 'redux-actions'\n\n/*\n * Combine all of reducers into a single reducer, defaulting to an empty Object for each\n * substate of contacts and users\n */\nconst reducer = handleActions(\n  { ...contactsReducers, ...usersReducers },\n  {\n    errors: [],\n    contacts: {},\n    users: {},\n    isPending: true\n  }\n)\nexport default reducer\n","import * as actionTypes from '../actions/actionTypes'\nimport { unset } from 'lodash/fp'\n\nconst reducers = {}\n\nconst contactsPendingReducer = {\n  next (state) {\n    return {\n      ...state,\n      isPending: true\n    }\n  }\n}\n\nreducers[actionTypes.ADD_CONTACT] = contactsPendingReducer\nreducers[actionTypes.REFRESH_CONTACTS] = contactsPendingReducer\nreducers[actionTypes.FETCH_CONTACT] = contactsPendingReducer\nreducers[actionTypes.UPDATE_CONTACT] = contactsPendingReducer\n\nreducers[actionTypes.ADD_CONTACT_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        [action.payload.contactId]: action.payload\n      },\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.REFRESH_CONTACTS_FINISH] = {\n  next (state, action) {\n    const contacts = {}\n    for (const contact of action.payload) {\n      contacts[contact.contactId] = contact\n    }\n    return {\n      ...state,\n      contacts: contacts,\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.FETCH_CONTACT_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        [action.payload.contactId]: action.payload\n      },\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.REMOVE_CONTACT_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      contacts: unset(action.payload, state.contacts), // Remove the property from state.contacts whose key is equal to action.payload\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.UPDATE_CONTACT_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        [action.payload.contactId]: action.payload\n      },\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nexport default reducers\n","import * as actionTypes from '../actions/actionTypes'\n\nconst reducers = {}\n\nreducers[actionTypes.FETCH_USER_FINISH] = {\n  next (state, action) {\n    const user = action.payload\n    return {\n      ...state,\n      users: {\n        ...state.users,\n        [user.userId]: user\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.FETCH_SELF_INFO_FINISH] = {\n  next (state, action) {\n    const self = action.payload\n    return {\n      ...state,\n      users: {\n        ...state.users,\n        [self.userId]: self\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nreducers[actionTypes.SEARCH_DIRECTORY_FINISH] = {\n  next (state, action) {\n    const users = {}\n    for (const user of action.payload) {\n      users[user.userId] = user\n    }\n    return {\n      ...state,\n      users: {\n        ...state.users,\n        ...users\n      },\n      isPending: false\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isPending: false,\n      errors: state.errors.concat(action.payload)\n    }\n  }\n}\n\nexport default reducers\n","import * as actionTypes from '../actions/actionTypes'\nimport * as eventTypes from './eventTypes'\n\nconst eventsMap = {}\n\nconst contactNewEvent = action => {\n  return {\n    type: eventTypes.CONTACTS_CHANGE,\n    args: action.payload\n  }\n}\n\nconst contactsChangeEvent = action => {\n  if (action.error) {\n    return {\n      type: eventTypes.CONTACTS_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.CONTACTS_CHANGE\n    }\n  }\n}\n\nconst addContactFinishActions = action => {\n  if (action.error) {\n    return contactsChangeEvent(action)\n  }\n  return [contactNewEvent(action), contactsChangeEvent(action)]\n}\n\neventsMap[actionTypes.ADD_CONTACT_FINISH] = addContactFinishActions\neventsMap[actionTypes.REFRESH_CONTACTS_FINISH] = contactsChangeEvent\neventsMap[actionTypes.REMOVE_CONTACT_FINISH] = contactsChangeEvent\neventsMap[actionTypes.UPDATE_CONTACT_FINISH] = contactsChangeEvent\neventsMap[actionTypes.FETCH_CONTACT_FINISH] = contactsChangeEvent\n\nexport default eventsMap\n","import * as actionTypes from '../actions/actionTypes'\nimport * as eventTypes from './eventTypes'\n\nconst eventsMap = {}\n\neventsMap[actionTypes.SEARCH_DIRECTORY_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.DIRECTORY_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.DIRECTORY_CHANGE,\n      args: { results: action.payload }\n    }\n  }\n}\n\neventsMap[actionTypes.FETCH_USER_FINISH] = eventsMap[actionTypes.FETCH_SELF_INFO_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.USERS_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.USERS_CHANGE,\n      args: { results: [action.payload] }\n    }\n  }\n}\nexport default eventsMap\n","// Request plugin.\nimport { defaultOptions, parseOptions } from './configs'\nimport watchRequests from './sagas'\nimport eventsMap from './interface/events'\nimport { api, name } from './interface'\n\n// Other plugins.\nimport { update as updateConfig } from '../config/interface/actions'\nimport { mapEvents } from '../events/interface/actions'\n\n// Utils.\nimport { mergeValues } from '../common/utils'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\n\n/*\n * HTTP request plugin.\n */\nexport default pluginFactory()\n\n/*\n * Platform-specific request plugins.\n *    Same base REST behaviour as the generic request plugin, with some extra\n *    handling of a response.\n */\nexport const linkRequest = pluginFactory('link')\nexport const ucRequest = pluginFactory('uc')\nexport const cpaasRequest = pluginFactory('cpaas')\n\n/**\n * Factory function for creating a Request Plugin.\n *    Allows for specifying which platform the requests will be made to. This\n *    adds special handling of responses to check for special-case issues.\n * @param  {string} [platform] The platform this plugin is for.\n * @return {Function} The actual Plugin creator function.\n */\nfunction pluginFactory (platform) {\n  // Generate the saga for this platform, or a generic saga if platform is undefined.\n  const saga = watchRequests(platform)\n\n  return function request (options = {}) {\n    options = mergeValues(defaultOptions, options)\n    parseOptions(options)\n\n    function * init () {\n      yield put(updateConfig(options, name))\n      yield put(mapEvents(eventsMap))\n    }\n\n    return {\n      sagas: [saga],\n      init,\n      capabilities: platform ? ['restAuthorization'] : [],\n      api,\n      name\n    }\n  }\n}\n","// Parse and/or Validate\nimport { validation as v8n, parse } from '../../src/common/validation'\n\n/**\n * Configurable properties 'published' by this \"Request\" plugin.\n * NOTE: Do NOT expose the config properties (related to this plugin) to the public API documentation.\n *\n * @property {boolean} [injectAgentVersionHeader=true] Option to automatically inject an agent version header to every REST request.\n *            This header is used to help with diagnostics and analytics in a completely anonymous fashion.\n *\n * @property {string} [customAgentVersionHeaderSuffix=''] Additional custom information that can be appended to the agent version header's value.\n *           This additional suffix value is only used when injectAgentVersionHeader property is enabled.\n */\nexport const defaultOptions = {\n  injectAgentVersionHeader: true,\n  customAgentVersionHeaderSuffix: ''\n}\n\nconst v8nValidation = v8n.schema({\n  injectAgentVersionHeader: v8n.boolean()\n})\nexport const parseOptions = parse('request', v8nValidation)\n","// Request plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport makeRequest from './makeRequest'\nimport * as authorizations from './authorization'\nimport { sanitizeRequest } from './utils'\n\n// Other plugins.\nimport { logManager } from '../logs'\n\n// Helpers.\nimport { getVersion } from '../common/version'\n\n// Libraries.\nimport { call, put, takeEvery } from 'redux-saga/effects'\n\n/*\n * Saga-factory for creating the `watchRequests` saga.\n *    If `platform` is undefined, then no extra, platform-specific handling is done.\n */\nexport default function watchRequests (platform) {\n  // Only allow our known platforms or undefined (for base).\n  if (!['link', 'uc', 'cpaas', undefined].includes(platform)) {\n    throw Error('Invalid platform specific for requests.')\n  }\n  return function * watchRequests () {\n    yield takeEvery(actionTypes.REQUEST, handleRequest, platform)\n  }\n}\n\n/*\n * Generator that handles a request action with standard HTTP handling features and reports\n * a requestFinished action when the request is done.\n *\n * @param {string} [platform] The platform being used.\n * @param {FluxStandardAction} action The action to handle.\n */\nfunction * handleRequest (platform, action) {\n  const log = logManager.getLogger('REQUEST', action.meta.requestId)\n\n  const logOptions = sanitizeRequest(action.payload)\n  log.debug(`Making REST request ${action.meta.requestId}.`, logOptions)\n\n  // Make the request based on the action\n  var result = yield call(makeRequest, action.payload, action.meta.requestId)\n\n  log.debug(`Received REST response ${action.meta.requestId}.`, result)\n\n  // If the platform was specified and this is not a 3.X build, perform the\n  //    authorization check side-effect.\n  if (platform && !getVersion().startsWith('3')) {\n    // Call the 'authorization' function specific for this platform.\n    //    They're all named ${platform}Authorization so it's easier to call them.\n    const error = authorizations[`${platform}Authorization`](result)\n\n    if (error) {\n      yield put(actions.authorizationError(error))\n    }\n  }\n\n  yield put(actions.response(action.meta.requestId, result, !!result.error))\n}\n\n// begin-test-code\nexport const __testonly__ = { watchRequests, handleRequest }\n// end-test-code\n","// Other plugins.\nimport { logManager } from '../logs'\n\n// Utils.\nimport { toQueryString } from '../common/utils'\n\n/**\n * The possible response data types that can be handled.\n */\nconst responseTypes = Object.freeze({\n  json: 'json',\n  blob: 'blob',\n  text: 'text',\n  none: 'none'\n})\n\n/**\n * Make a request with the specified options. The options is very similar to the options passed to the GlobalFetch\n * method except that is also accepts the url as part of the options.\n * Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request\n *\n * Currently this processes the request and assumes nothing about the response.\n * - If the response has a body, it will always be parsed and forwarded on.\n *      - If no body, then use an empty object in its place.\n * - If the fetch succeeded, the response \"results\" will always be forwarded on,\n *      even if the response is outside of the 200-299 range.\n *      - Because some backends provide more detailed error info (that a saga\n *        may need) as part of the body, rather than just the response status.\n * - If the fetch fails, return with the fetch failure information.\n *\n * @param {Object} options Options to make the request with.\n * @param {string} options.url The URL to make the request to.\n * @param {Object} [options.queryParams] The parameters to be added to the query string\n * @param {string} [options.responseType='json] The expected data type of the response body.\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] The request body\n * @return {Promise} A promise that resolves with a custom response object.\n */\nexport default async function makeRequest (options, requestId) {\n  const log = logManager.getLogger('REQUEST', requestId)\n\n  /*\n   * Check the provided options to ensure they are valid before making the request.\n   */\n  const error = validateOptions(options)\n  if (error) {\n    log.info(error.result.message)\n    return error\n  }\n\n  // Extract and remove the non-fetch API properties.\n  const { url, queryParams, responseType = 'json', ...fetchOptions } = options\n\n  // Grab that last part of the URL (after the last /) to be logged.\n  let endUrl = url.match(/([^/]*)$/)[0]\n  // Cut it short if it's too long, since this should be human-readable.\n  endUrl = endUrl.length > 15 ? endUrl.substring(0, 15) + '...' : endUrl\n  log.info(`Making ${fetchOptions.method} ${endUrl} request.`)\n\n  let response\n  /*\n   * Make the request. Scenarios to check for:\n   *  1. Fetch failed.\n   *  2. Fetch succeeded and is ok, with no response body.\n   *  3. Fetch succeeded and is ok, with expected response type.\n   *  4. Fetch succeeded and is ok, with unexpected response type.\n   *  5. Fetch succeeded but is not ok.\n   */\n  try {\n    response = await fetch(url + toQueryString(queryParams), fetchOptions)\n  } catch (err) {\n    // Scenario 1: Fetch failed.\n    log.info(`Failed to make request, caused by ${err.message}`)\n    return makeResponse({ error: 'FETCH' }, { code: err.name, message: err.message })\n  }\n\n  // Basic information for the request result.\n  const result = {\n    ok: response.ok,\n    code: response.status,\n    message: response.statusText\n  }\n\n  if (response.ok) {\n    if (response.status === 204) {\n      /*\n       * A `204 (No Content)` response indicates a success, but with no content to return.\n       * Avoid parsing the response because there isn't one.\n       */\n      // Scenario 2: Response is ok, with no response body.\n      log.info(`Finished request with successful response (status ${response.status}).`)\n      return makeResponse(undefined, { body: {}, ...result })\n    }\n\n    const data = await parseBody(response, responseType)\n    if (data instanceof Error) {\n      // Scenario 4: Response is ok, with an unexpected type.\n      log.error(`Failed to parse with response type: ${responseType}. Error: ${data}`)\n      return makeResponse({ error: 'REQUEST' }, { code: data.name, message: data.message })\n    } else {\n      // Scenario 3: Response is ok, with an expected type.\n      log.info(`Finished request with successful response (status ${response.status}).`)\n      return makeResponse(undefined, { body: data, ...result })\n    }\n  } else {\n    // Scenario 5: Response is not ok.\n    let contentType\n    // Check the Content-Type of the response.\n    try {\n      contentType = await response.headers.get('content-type')\n    } catch (err) {\n      log.debug(`Failed to get content-type:${err.message}.`)\n    }\n    /*\n     * Handle a SPiDR special-case error where the response body is a HTML page...\n     * Throw away the body and simply report it as 'Forbidden'.\n     */\n    if (response.status === 403 && contentType.includes('html')) {\n      return makeResponse({ error: 'REQUEST' }, result)\n    }\n\n    /*\n     * Try to parse the response as JSON, and if successful, include\n     * it in the returned error. otherwise, provide an empty object instead.\n     */\n    let responseBody\n    try {\n      responseBody = await response.json()\n    } catch (err) {\n      responseBody = {}\n      log.debug('Failed to parse response:', err.message)\n    }\n    return makeResponse({ error: 'REQUEST' }, { body: responseBody, ...result })\n  }\n}\n\n/**\n * Checks for the provided options to be considered valid before making the\n *    request. If an option is invalid, an error response will be returned.\n * @param  {Object} options\n * @return {Response|undefined}\n */\nfunction validateOptions (options) {\n  const { url, responseType } = options\n\n  if (!url || typeof url !== 'string') {\n    const invalidUrlMessage = `Invalid request url; expected url of type string but received ${url} instead`\n    return makeResponse({ error: 'REQUEST_URL', message: invalidUrlMessage })\n  }\n\n  /*\n   * If an expected responseType was provided, it should be one of the types\n   *    that we know how to handle.\n   */\n  if (responseType && !responseTypes.hasOwnProperty(responseType)) {\n    const invalidResponseType = 'Cannot make request; responseType value was invalid.'\n    return makeResponse({ error: 'RESPONSE_TYPE', message: invalidResponseType })\n  }\n}\n\n/**\n * Get the body from the response depending on our expected content-type.\n * @return {Body|Error}\n */\nasync function parseBody (response, expectedType) {\n  /**\n   * The SDK should only be parsing the responses as is expected without checking the content type of the response.\n   * This is deterministic depending on the `responseType` passed in to the request through the request options.\n   */\n  let responseBody = {}\n  try {\n    switch (expectedType) {\n      case responseTypes.json:\n        responseBody = await response.json()\n        break\n      case responseTypes.blob:\n        responseBody = await response.blob()\n        break\n      case responseTypes.text:\n        responseBody = await response.text()\n        break\n      case responseTypes.none:\n        // Do not parse the response\n        break\n      default:\n        // This should be unreachable code.\n        throw Error('Assertion failed')\n    }\n  } catch (e) {\n    // Note: We get here if we have a successful request but the server sent us unexpected data.\n    // We need to treat this as an error case because we can no longer enforce a contract with the\n    // code making the request.\n    //\n    // If the code gets here the issue is either with the server not sending us expected data, or with\n    // the calling code that told us to expect the wrong data.\n\n    return e\n  }\n\n  return responseBody\n}\n\n/**\n * Make a response object that will  have the same structure every time\n * regardless of the server response.\n *\n * @param {Object} apiResponse API related response data\n * @param {string} apiResponse.error This should be a string indicating an error if the request fails due to an invalid request.\n * @param {string} apiResponse.message This should be a string with more details about the api error.\n * @param {Object} httpResponse This will contain the response data from the server.\n * @param {Object} httpResponse.body The response body data from the server.\n * @param {boolean} httpResponse.ok Indicates if the request was considered a success by the server.\n * @param {Object} httpResponse.code The HTTP status code for the request.\n * @param {Object} httpResponse.message A message describing the server response.\n * @return {Object} An object containing API and/or server response details.\n */\nfunction makeResponse (apiResponse = {}, httpResponse = {}) {\n  return {\n    body: httpResponse.body,\n    error: apiResponse.error,\n    result: {\n      ok: Boolean(httpResponse.ok),\n      code: httpResponse.code,\n      message: apiResponse.message || httpResponse.message\n    }\n  }\n}\n","/**\n * \"Authorization\" issues are REST errors caused by invalid user credentials.\n *    These are issues that should be solvable by an end-user updating/fixing\n *    the credentials that they have provided.\n */\nimport BasicError, { authCodes } from '../errors'\n\n/**\n * Function that checks a REST response action for Link authorization issues.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function linkAuthorization (response) {\n  if (!response.error) {\n    return\n  }\n\n  /*\n   * A SPiDR REST request will return\n   *  - '403 Forbidden', with body 'statusCode: 4' for bad password,\n   *  - '403 Forbidden', with html body (which is thrown away) for bad username.\n   *\n   * The SPiDR REST API document (v4.7, May 2019) says it will return '403 Forbidden'\n   *    with other statusCodes for numerous untestable scenarios. Some of these are\n   *    for credential/auth issues, others are for unrelated issues.\n   * Authorization related:\n   *    - 27 (generic auth failure), 61 (credentials issue), 65 (token expired)\n   * Unrelated:\n   *    - 29 (device not authorized), 35 (service not enabled), 37 (invalid value),\n   *      45 (invalid app_name), 46 (invalid CallMe token), 62 (account is disabled),\n   *      63 (account is locked), 64 (invalid CallMe realm)\n   */\n  // Status codes considered to be \"auth issues\".\n  const authIssues = [4, 27, 61, 65]\n\n  const statusCode = getStatusCode(response)\n\n  /*\n   * A case where Link REST request will return '401 Unauthorized'\n   */\n  if (response.result.code === 401) {\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message: 'Authorization failed with server. Please check credentials.'\n    })\n  }\n\n  /*\n   * Define a Link authorization issue to be:\n   *  - a '403 Forbidden', with no body or with a specific statusCode.\n   */\n  if (response.result.code === 403 && (response.body === undefined || authIssues.includes(statusCode))) {\n    let message = 'Authorization failed with server. Please check credentials.'\n    if (statusCode) {\n      message += ` Status code: ${statusCode}`\n    }\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message: message\n    })\n  }\n}\n\n/**\n * Function that checks a REST response action for UC authorization issues.\n *    UC includes both SPiDR and CIM REST requests.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function ucAuthorization (response) {\n  /*\n   * A CIM REST request will return\n   *    - '401 Login Please' (not 401 Unauthorized) with no body for credential issues.\n   *    - '401 Login Please', with body message \"expired token\" for token issues.\n   *\n   * SPiDR will return '401 Unauthorized' for non-auth issues though,\n   *    (statusCode 35 for \"service not enabled\").\n   */\n\n  /*\n   * Define a UC authorization issue to be:\n   *  - a '401 Login Please'.\n   */\n  const result = response.result\n  if (result.code === 401 && result.message === 'Login Please') {\n    let message = 'Authorization failed with server. Please check credentials.'\n\n    const statusCode = getStatusCode(response)\n\n    if (statusCode) {\n      message += ` Status code: ${statusCode}`\n    }\n\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message\n    })\n  }\n}\n\n/**\n * Function that checks a REST response action for CPaaS authorization issues.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function cpaasAuthorization (response) {\n  /*\n   * A CPaaS REST request will return '401 Unauthorized' for authorization issues.\n   */\n  if (response.result.code === 401) {\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message: 'Authorization failed with server. Please check credentials.'\n    })\n  }\n}\n\n/**\n * Helper function for parsing a statusCode from a SPiDR REST response body.\n * @param  {Object} response\n * @return {number|undefined}\n */\nfunction getStatusCode (response) {\n  let statusCode\n  /*\n   * Parse the statusCode out from the body.\n   */\n  if (response.body) {\n    if (response.body.statusCode) {\n      // In some cases (eg. KAA-1937), the statusCode is at the top-level of the body.\n      statusCode = response.body.statusCode\n    } else {\n      // In most cases, the statusCode is inside another object. The name of this\n      //    parameter is different depending which service the request was for,\n      //    so search for it.\n      Object.values(response.body).forEach(value => {\n        if (value.statusCode) {\n          statusCode = value.statusCode\n        }\n      })\n    }\n  }\n  return statusCode\n}\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nconst eventsMap = {}\n\neventsMap[actionTypes.AUTHORIZATION_ERROR] = function (action) {\n  return {\n    type: eventTypes.REQUEST_ERROR,\n    args: {\n      error: action.payload\n    }\n  }\n}\n\nexport default eventsMap\n","/**\n * An error occurred with server authorization.\n *\n * This event will be emitted anytime a REST request to the server is rejected\n *    due to an authorization issue. This may occur for invalid credentials or\n *    expired tokens, depending on which form of authentication the application\n *    has chosen to use.\n * @public\n * @memberof api\n * @requires restAuthorization\n * @event request:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const REQUEST_ERROR = 'request:error'\n","import name from './name'\nimport api from './api'\n\nexport { name, api }\n","/**\n * This interface is for an request plugin.\n * @type {string}\n */\nconst name = 'requests'\nexport default name\n","import { fetchResource } from '../utils'\nimport { logManager, API_LOG_TAG } from '../../logs'\n// Other plugins.\nimport { getPlatform, getRequestInfo } from '../../auth/interface/selectors'\nimport { merge } from 'lodash/fp'\n\nconst log = logManager.getLogger('REQUEST')\n\n/**\n * Request API.\n * @method api\n * @param  {Function} $0\n * @param  {Function} $0.dispatch - The redux store's dispatch function.\n * @param  {Function} $0.getState - The redux store's getState function.\n * @return {Object} api - The request API object.\n */\nexport default function api ({ dispatch, getState }) {\n  return {\n    request: {\n      /**\n       * The 'request' namespace (within the 'api' type) is used to make network requests to the server.\n       *\n       * @public\n       * @namespace request\n       */\n\n      /**\n       * Send a request to the underlying REST service with the appropriate configuration and authentication.\n       * This is a wrapper on top of the browser's [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/fetch)\n       * and behaves very similarly but using SDK configuration for the base URL and authentication as well\n       * as SDK logging.\n       *\n       * @public\n       * @memberof request\n       * @method fetch\n       * @param {string} resource The full path of the resource to fetch from the underlying service. This should include any REST version\n       *                          or user information. This path will be appended to the base URL according to SDK configuration.\n       * @param {RequestInit} init An object containing any custom settings that you want to apply to the request. See [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/fetch)\n       *                           for a full description and defaults.\n       * @return {Promise<Response>} A promise for a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) object.\n       * @example\n       * // Send a REST request to the server\n       * // Create a request options object following [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/fetch)\n       * const requestOptions = {\n       *   method: 'POST',\n       *   body: JSON.stringify({\n       *     test: 123\n       *   })\n       * }\n       *\n       * // Note that you will need to subscribe for the `custom` service in order to\n       * // receive notifications from the `externalnotification` service.\n       * const response = await client.request.fetch('/rest/version/1/user/xyz@test.com/externalnotification', requestOptions)\n       */\n      async fetch (resource, init = {}) {\n        log.debug(API_LOG_TAG + 'fetch: ', resource)\n        const state = getState()\n        const platform = getPlatform(state)\n        const requestInfo = getRequestInfo(state, platform)\n        const options = platform === 'cpaas' ? requestInfo.options : requestInfo.requestOptions\n        requestInfo.requestOptions = merge(init, options)\n        requestInfo.platform = platform\n        // Do request\n        return await fetchResource(resource, requestInfo)\n      }\n    }\n  }\n}\n","/**\n * The ID of a User (e.g. joe@test.3s5j.att.com)\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof user\n * @requires cpaas_user_id\n */\n\n/**\n * The User ID ie: joe@test.3s5j.att.com\n *\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof call\n * @requires cpaas_user_id\n */\n\n/**\n * The ID of a User (e.g. joe@domain.com)\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof user\n * @requires link_user_id\n */\n\n/**\n * The SIP URI ie: sip:joe@domain.com\n *\n * @public\n * @static\n * @typedef {string} SIP_URI\n * @memberof call\n * @requires link_user_id\n */\n\n/**\n * The Phone Number ie: +18885559876\n *\n * @public\n * @static\n * @typedef {string} PhoneNumber\n * @memberof call\n * @requires cpaas_pstn\n */\n\n/**\n * The TEL URI ie: tel:+18885559876\n *\n * @public\n * @static\n * @typedef {string} TEL_URI\n * @memberof call\n * @requires link_pstn\n */\n","import { cloneDeep } from 'lodash/fp';\n\n/**\n * returns a function with params object\n * @param  {Array} An array of strings or objects representing the desired codecs to be removed,\n * can be passed in as a string or as objects with the following signature:\n *  [{\n *      name: 'codecname',\n *      fmtpParams: 'specific ftmp parameter target'\n *  }]\n * @return {Function}        [description]\n *\n * INSTRUCTIONS FOR EXPOSING FUNCTION TO UC VERSION OF THE SDK:\n * the following code will need to be added to the appropriate index files (ie: kandy.uc.js)\n * this will expose the createCodecRemover function in the browser\n    import createCodecRemover from '../../fcs/src/js/sdp/codecRemover';\n    kandy.sdpHandlers = {\n        createCodecRemover\n    };\n    module.exports = kandy;\n\n * INSTRUCTIONS USING RUNNING FUNCTION ONCE EXPOSED\n * From the browser Devtools run the following:\n * const codecRemover = createKandy.sdpHandlers.createCodecRemover(['VP8', 'VP9'])\n * const newSdp = codecRemover(<SDP Object>); // the incoming SDP object\n * console.log(newSdp)\n */\nexport default function createCodecRemover(codecs) {\n    if(!codecs){\n        codecs = [];\n    }\n    // We allow the user to pass in a codecs of objects or strings, so here we format the strings into objects for uniformity.\n    codecs = codecs.map(item => (typeof item === 'string' ? { name: item } : item));\n\n    return function(...params) {\n        // Adding support for new callstack sdp handlers\n        // Old callstack sdp pipeline passes an object to each sdp\n        // handler that contains the currentSdp\n        // New callstack passes 3 arguments to each sdp handler\n        // newSdp, info, originalSdp\n        let oldCallstack = true;\n        let currentSdp;\n        if (params[0].currentSdp) {\n            currentSdp = params[0].currentSdp;\n        } else if (params.length === 3) {\n            oldCallstack = false;\n            currentSdp = params[0];\n        }\n\n        let newSdp = cloneDeep(currentSdp);\n\n        // This is an array of strings representing codec names we want to remove.\n        let codecStringsToRemove = codecs.map(codec => codec.name);\n\n        newSdp.media.forEach(media => {\n            // This is an array of just the codes (codec payloads) that we FOR SURE want to remove.\n            let finalRemoveList = [];\n            // This is an array of RTP objects who have codecs that are the same as strings passed in via codecs.\n            let filteredRtp = [];\n\n            // If the current rtp.codec is in the codecStringsToRemove list, add the rtp to filteredRtp\n            filteredRtp = media.rtp.filter(rtp => codecStringsToRemove.includes(rtp.codec));\n\n            filteredRtp.forEach(rtp => {\n                // We grab the relevantCodec codecs object from the passed in codecs, based on the name string.\n                const relevantCodecs = codecs.filter(codec => codec.name === rtp.codec);\n\n                // We check the relevantCodec. If it is not present, then we have no codecs info for this specific rtp.\n                relevantCodecs.forEach(relevantCodec => {\n                    // If fmtpParams doesnt exist or is of length 0 then we assume we can remove all instances of this codec\n                    if (\n                        !relevantCodec.fmtpParams ||\n                        (relevantCodec.fmtpParams && relevantCodec.fmtpParams.length === 0)\n                    ) {\n                        // We want to delete this codec no matter what, since no fmtp params were included.\n                        finalRemoveList.push(rtp.payload);\n                    } else {\n                        // There are fmtp values for this codec. Therefore we have to check each media.fmtp object to see if it is the right one.\n                        // Then when we find the right fmtp object, we check its config to see if it has the parameters specified in the input.\n                        media.fmtp.forEach(fmtp => {\n                            // We check each iteration to see if we found the right fmtp object.\n                            if (fmtp.payload === rtp.payload) {\n                                // If we found the right fmtp object, we have to make sure each config param is in the fmtp.config.\n                                if (relevantCodec.fmtpParams.every(c => fmtp.config.includes(c))) {\n                                    finalRemoveList.push(rtp.payload);\n                                }\n                            }\n                        });\n                    }\n                });\n            });\n\n            // At this point we should have an array (finalRemoveList) that contains all ORIGINAL codec payloads that we need to remove.\n            // We now need to check fmtp for all rtx payloads ASSOCIATED with the original codec payload.\n            media.fmtp.forEach(fmtp => {\n                // Check if the config contains apt=, which indicates this fmtp is associated with another.\n                if (fmtp.config.includes('apt=')) {\n                    // If so, lets grab the whole string WITHOUT the apt= part, and convet it into an integer. This should be a payload number.\n                    var payload = parseInt(fmtp.config.replace('apt=', ''));\n\n                    // Check if the finalRemoveList contains the payload that this fmtp is associated with.\n                    if (finalRemoveList.includes(payload)) {\n                        // If so, then we need to add this fmtp.payload to the finalRemoveList\n                        finalRemoveList.push(fmtp.payload);\n                    }\n                }\n            });\n\n            // We assume past this point that the finalRemoveList is all powerful.\n            // For each codec in the media.payloads string, if it is in our finalRemoveList list, we remove it.\n            let isNumber = false;\n            if (typeof media.payloads === 'number') {\n                media.payloads = media.payloads.toString();\n                isNumber = true;\n            }\n            if (media.payloads) {\n                media.payloads = media.payloads\n                    .split(' ')\n                    .filter(payload => !finalRemoveList.includes(parseInt(payload)))\n                    .join(' ');\n            }\n            if (media.payloads && isNumber) {\n                media.payloads = parseInt(media.payloads);\n            }\n\n            // For each codec object, if the payload is in our filteredCodes list, we remove the object.\n            if (media.rtp) {\n                media.rtp = media.rtp.filter(rtp => !finalRemoveList.includes(rtp.payload));\n            }\n\n            if (media.fmtp) {\n                media.fmtp = media.fmtp.filter(fmtp => !finalRemoveList.includes(fmtp.payload));\n            }\n            if (media.rtcpFb) {\n                media.rtcpFb = media.rtcpFb.filter(\n                    rtcpFb => !finalRemoveList.includes(rtcpFb.payload)\n                );\n            }\n        });\n\n        // If old callstack, then return the results of the next sdp handler\n        // If new callstack, then just return the modified sdp\n        return oldCallstack ? params[0].next(newSdp) : newSdp;\n    };\n}\n","/**\n * Creates and returns an SDP Handler function that will remove the desired codecs\n *  from the SDP when passed to the pipeline.\n *\n * @method createCodecRemover\n * @param  {Array<string|Object} codecs An array of strings or objects representing the desired codecs to be removed.\n * @example\n * // `codecs` paramters can be an array of strings (i.e., ['VP8', 'VP9']) or as objects with the following signature:\n * const codecsToBeRemoved = [{\n *   name: 'codecname',\n *   fmtpParams: 'specific ftmp parameter target'\n * }]\n * const codecRemover = createCodecRemover(codecsToBeRemoved)\n * @return {Function} returns an SDP handler function\n */\nexport function createCodecRemover (codecs = []) {\n  // We allow the user to pass in a codecs of objects or strings, so here we format the strings into objects for uniformity.\n  codecs = codecs.map(item => (typeof item === 'string' ? { name: item } : item))\n\n  return function (newSdp, info, originalSdp) {\n    // This is an array of strings representing codec names we want to remove.\n    const codecStringsToRemove = codecs.map(codec => codec.name)\n\n    newSdp.media.forEach(media => {\n      // This is an array of just the codes (codec payloads) that we FOR SURE want to remove.\n      const finalRemoveList = []\n      // This is an array of RTP objects who have codecs that are the same as strings passed in via codecs.\n      let filteredRtp = []\n\n      // If the current rtp.codec is in the codecStringsToRemove list, add the rtp to filteredRtp\n      filteredRtp = media.rtp.filter(rtp => codecStringsToRemove.includes(rtp.codec))\n\n      filteredRtp.forEach(rtp => {\n        // We grab the relevantCodec codecs object from the passed in codecs, based on the name string.\n        const relevantCodecs = codecs.filter(codec => codec.name === rtp.codec)\n\n        // We check the relevantCodec. If it is not present, then we have no codecs info for this specific rtp.\n        relevantCodecs.forEach(relevantCodec => {\n          // If fmtpParams doesnt exist or is of length 0 then we assume we can remove all instances of this codec\n          if (!relevantCodec.fmtpParams || (relevantCodec.fmtpParams && relevantCodec.fmtpParams.length === 0)) {\n            // We want to delete this codec no matter what, since no fmtp params were included.\n            finalRemoveList.push(rtp.payload)\n          } else {\n            // There are fmtp values for this codec. Therefore we have to check each media.fmtp object to see if it is the right one.\n            // Then when we find the right fmtp object, we check its config to see if it has the parameters specified in the input.\n            media.fmtp.forEach(fmtp => {\n              // We check each iteration to see if we found the right fmtp object.\n              if (fmtp.payload === rtp.payload) {\n                // If we found the right fmtp object, we have to make sure each config param is in the fmtp.config.\n                if (relevantCodec.fmtpParams.every(c => fmtp.config.includes(c))) {\n                  finalRemoveList.push(rtp.payload)\n                }\n              }\n            })\n          }\n        })\n      })\n\n      // At this point we should have an array (finalRemoveList) that contains all ORIGINAL codec payloads that we need to remove.\n      // We now need to check fmtp for all rtx payloads ASSOCIATED with the original codec payload.\n      media.fmtp.forEach(fmtp => {\n        // Check if the config contains apt=, which indicates this fmtp is associated with another.\n        if (fmtp.config.includes('apt=')) {\n          // If so, lets grab the whole string WITHOUT the apt= part, and convet it into an integer. This should be a payload number.\n          var payload = parseInt(fmtp.config.replace('apt=', ''))\n\n          // Check if the finalRemoveList contains the payload that this fmtp is associated with.\n          if (finalRemoveList.includes(payload)) {\n            // If so, then we need to add this fmtp.payload to the finalRemoveList\n            finalRemoveList.push(fmtp.payload)\n          }\n        }\n      })\n\n      // We assume past this point that the finalRemoveList is all powerful.\n      // For each codec in the media.payloads string, if it is in our finalRemoveList list, we remove it.\n      let isNumber = false\n      if (typeof media.payloads === 'number') {\n        media.payloads = media.payloads.toString()\n        isNumber = true\n      }\n      if (media.payloads) {\n        media.payloads = media.payloads\n          .split(' ')\n          .filter(payload => !finalRemoveList.includes(parseInt(payload)))\n          .join(' ')\n      }\n      if (media.payloads && isNumber) {\n        media.payloads = parseInt(media.payloads)\n      }\n\n      // For each codec object, if the payload is in our filteredCodes list, we remove the object.\n      media.rtp = media.rtp.filter(rtp => !finalRemoveList.includes(rtp.payload))\n      media.fmtp = media.fmtp.filter(fmtp => !finalRemoveList.includes(fmtp.payload))\n\n      if (media.rtcpFb) {\n        media.rtcpFb = media.rtcpFb.filter(rtcpFb => !finalRemoveList.includes(rtcpFb.payload))\n      }\n    })\n\n    return newSdp\n  }\n}\n","// SDP Handlers\nexport * from './codecRemover.js'\n"],"sourceRoot":""}